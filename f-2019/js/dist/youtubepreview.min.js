"use strict";!function(o){var e=!1,t=function(o){"undefined"!=typeof console&&console.log&&console.log(o)},a=function(a,n){a.not("[data-video-id-ready]").each(function(){var a=o(this).attr("data-video-id-ready",1),u=a.find(".youtube-preview"),r=a.attr("data-video-iframe-id"),i=function(){var u,i="youku"==e&&a.attr("data-youku-id")?"youku":"youtube";"youtube"===i?(u="https://www.youtube.com/embed/"+a.attr("data-video-id")+"?rel=0&autoplay=1&wmode=transparent&controls="+n.controls+"&showinfo="+n.showInfo,n.autoPlay&&(u+="&enablejsapi=1&version=3")):(u="http://player.youku.com/embed/"+a.attr("data-youku-id"),n.autoPlay&&(u+="&autoplay=1")),t(i),t(u);var l=o("<iframe></iframe>").attr("id",r).attr("src",u).attr("frameborder",0);n.allowFullscreen&&l.attr("allowfullscreen",1),l.appendTo(a),n.callback&&n.callback(),"youtube"===i&&n.autoPlay&&"undefined"!=typeof YT&&new YT.Player(r,{events:{onReady:function(o){console.log("onready",(new Date).getTime()),o.target.playVideo()}}})};u.click(function(){if(!1===e){var o=new Image;o.onload=function(){e="youtube",i()},o.onerror=function(){e="youku",i()},o.src="http://youtube.com/favicon.ico"}else i()})})};o.fn.videoPreview=function(e){return a(this,o.extend({autoPlay:!0,allowFullscreen:!0,controls:2,showInfo:1},e)),this}}(jQuery);