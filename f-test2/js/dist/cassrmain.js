/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

	/**
	 * The main CASS wrapper object
	 * @author City Web Team
	 */
	
	"use strict";
	var $ = __webpack_require__(1),
	    Cookies = __webpack_require__(9),
	    CASS = (function(w, Modernizr, yepnope) {
	        var initCookieNotice = __webpack_require__(10),
	            //initCookieSurvey = require('./funcs/init-cookie-survey'),
	            initHeader = __webpack_require__(11),
	            imageCreditation = __webpack_require__(12),
	            /**
	             * The object to hold all loadable scripts, add an object here to allow it's loading in a page
	             *
	             * Each child object has three properties:
	             *   description: a short description of the script
	             *           src: the filename of the script
	             *       [async]: Whether to load the script asynchronously (assumed false unless given)
	             *
	             * @var Object
	             */
	            scripts = {
	                flowplayer: {
	                    description: "include flowplayer for pages with videos",
	                    src: "lib/flowplayer/flowplayer-3.2.4.min.js"
	                },
	                flowplayerEmbed: {
	                    description: "Embed code for flowplayer",
	                    src: "lib/flowplayer/flowplayer.embed-3.0.3.min.js"
	                },
	                swfobject: {
	                    description: "swfobject for youtube video(s)",
	                    src: "lib/swfobject/swfobject.js"
	                },
	                galleria: {
	                    description: "JQuery image gallery plugin",
	                    src: "lib/jquery/plugins/galleria/galleria-1.2.9/galleria-1.2.9.min.js"
	                },
	                galleriaTheme: {
	                    description: "city galleria theme",
	                    src: "lib/jquery/plugins/galleria/themes/city/galleria.city.min.js"
	                },
	                underscore: {
	                    description: "utility library",
	                    src: "lib/backbone/underscore.min.js"
	                },
	                hallway: {
	                    description: "scripts to run on hallway pages",
	                    src: "modules/hallway.js"
	                }
	            },
	            /***************************************************************************
	         * GLOBAL VARIABLES
	         ***************************************************************************/
	
	            /**
	             * What level of debugging is required (currently binary 0 or 1, no debug messages or all)
	             * @var Integer
	             */
	            debugLevel = 0,
	            /**
	             * cache window.location
	             */
	            windowLocation = w.location,
	            /**
	             * cache location.hash
	             */
	            locationHash = location.hash,
	            /**
	             * The location of external scripts (with trailing slash)
	             * @var String
	             */
	            srcPrefix =
	                "//" + windowLocation.hostname.replace(/www|intranet/, "s1").replace("cass.", "") + "/cassrmain/js/",
	            /**
	             * The version number to prepend to the file name, set in page
	             * @var String
	             */
	            version = w.CITY_VERSION || "123456789.",
	            /**
	         * used for detecting download filetypes by extension
	         */
	
	            /**
	             * are we on the Cass sub-domain?
	             */
	            isCass = windowLocation.hostname.indexOf("cass.city.ac.uk") !== -1,
	            /**
	             * are we on the Bunhill sub-domain?
	             */
	            isBunhill = windowLocation.hostname.indexOf("bunhill.city.ac.uk") !== -1,
	            /**
	             * Our design breakpoints as defined in _mixin_pages.scss
	             */
	            breakpoints = {
	                thin: 320,
	                medium: 768,
	                thinish: 480,
	                wide: 980,
	                wider: 1200
	            },
	            /**
	             * Screen size on load, set in initPage
	             */
	            screenSize,
	            /***************************************************************************
	         * USEFUL GLOBAL FUNCTIONS
	         ***************************************************************************/
	
	            /**
	             * Sends a message to the browser console (Gecko, Webkit) or into the <body> (IE)
	             * @param {String} message: the message to print out
	             */
	            debug = function(message) {
	                var debugContainer, elmt;
	
	                if (debugLevel > 0 || location.search.match("debug")) {
	                    try {
	                        //for Safari, Chrome, Firefox(w/ firebug)
	                        w.console.log(message);
	                    } catch (e) {
	                        try {
	                            //for Opera
	                            opera.postError.apply(opera, message);
	                        } catch (e1) {
	                            //for IE
	
	                            //create a debug container (if none exists)
	                            debugContainer = document.getElementById("debugContainer");
	                            if (!debugContainer) {
	                                debugContainer = document.createElement("div");
	                                debugContainer.setAttribute("id", "debugContainer");
	                                debugContainer.setAttribute("class", "hide");
	                                document
	                                    .getElementsByTagName("body")
	                                    .item(0)
	                                    .appendChild(debugContainer);
	                            }
	                            elmt = document.createElement("pre");
	                            elmt.setAttribute("class", "debug");
	                            elmt.appendChild(document.createTextNode(message));
	                            debugContainer.appendChild(elmt);
	                        }
	                    } //end IE catch block
	                }
	            },
	            /**
	             * Lazyload function, now proxies to yepnope
	             *
	             * @param {Object} jsHandle: The Object from CASS.scripts to load
	             * @param {String} callback: The name of the callback to be executed after this script has loaded
	             */
	            load = function(jsHandle, callback) {
	                //work out full path
	                var path = (function() {
	                    var script = scripts[jsHandle];
	
	                    if (/^https?:\/\//.test(script.src)) {
	                        return script.src;
	                    }
	
	                    return srcPrefix + (/plugins|lib/.test(script.src) ? "" : "modules/") + script.src;
	                })();
	
	                yepnope({
	                    load: path,
	                    callback: callback
	                });
	            },
	            setVersion = function(v) {
	                version = v;
	            },
	            /**
	             * returns the size of an object
	             */
	            objectSize = function(object) {
	                var size = 0,
	                    key;
	
	                for (key in object) {
	                    if (object.hasOwnProperty(key)) {
	                        size += 1;
	                    }
	                }
	
	                return size;
	            },
	            /**
	             * returns true if a number is even
	             * @param {Number} value
	             * @return {Boolean}
	             */
	            isEven = function(value) {
	                if (value % 2 === 0) {
	                    return true;
	                } else {
	                    return false;
	                }
	            },
	            /**
	             * Read a page's GET URL variables and return them as an associative array.
	             */
	            getUrlVars = function() {
	                var vars = [],
	                    hash,
	                    i = 0,
	                    hashes = windowLocation.href.slice(windowLocation.href.indexOf("?") + 1).split("&");
	
	                for (i; i < hashes.length; i = i + 1) {
	                    hash = hashes[i].split("=");
	                    vars.push(hash[0]);
	                    vars[hash[0]] = hash[1];
	                }
	
	                return vars;
	            },
	            /**
	             * return hash as array from url GET param
	             */
	            getUrlHash = function() {
	                var hashes;
	
	                if (locationHash.length !== 0) {
	                    hashes = locationHash.split("#")[1].split("&");
	                }
	
	                return hashes || "";
	            },
	            /**
	             * gets window width
	             * @param: {Object} - window object
	             * @return: {Number} - window width
	             */
	            getWindowWidth = function(w) {
	                return Math.round($(w).width());
	            },
	            /**
	             * adds a class of has-loaded to images
	             * @param: {Object} - html element
	             * @return: {Object} - the html element, with new class
	             */
	            imageLoaded = function(arg) {
	                var el = arg.target || arg;
	                $(el).addClass("has-loaded");
	                return el;
	            },
	            /**
	             * returns true if the viewport size has changed -
	             * useful in responsive layout, see
	             * snook.ca/archives/javascript/ie6_fires_onresize
	             */
	            viewportChanged = function() {
	                var changed = false,
	                    docEl = w.document.documentElement,
	                    coolOff = 20, //further calls within this window get
	                    //the same return value
	                    now = Date.now
	                        ? Date.now()
	                        : (function() {
	                              return new Date().valueOf();
	                          })();
	
	                //set up a holder object (if it doesn't exist)
	                w.viewport = w.viewport || {};
	
	                //these need zeroing before we begin (if not already set)
	                w.viewport.dimensions = w.viewport.dimensions || { height: null, width: null };
	
	                //need to handle the situation where many calls to this
	                //function happen in quick succession
	                if (w.viewport.timeStamp && now - w.viewport.timeStamp < coolOff) {
	                    debug("within window, returning " + w.viewport.storedResult);
	                    return w.viewport.storedResult;
	                }
	
	                //store the time of this call
	                w.viewport.timeStamp = now;
	
	                //have we changed viewport size?
	                if (
	                    w.viewport.dimensions.width !== docEl.clientWidth ||
	                    w.viewport.dimensions.height !== docEl.clientHeight
	                ) {
	                    changed = true;
	                }
	
	                //store new dimensions
	                w.viewport.dimensions.height = docEl.clientHeight;
	                w.viewport.dimensions.width = docEl.clientWidth;
	
	                //store this result in case of a re-call within coolOff
	                w.viewport.storedResult = changed;
	
	                debug("viewport changed: " + changed);
	
	                return changed;
	            },
	            /***************************************************************************
	         * BEGIN CASS MODULES
	         ***************************************************************************/
	
	            /*
	         * sets up a carousel on a page
	         * @param carouselObj : Object
	         *
	         */
	            createSlider = function($carouselObj) {
	                var data = w.sliderData,
	                    dataLength = data.length,
	                    tempObj = {},
	                    tempEl = "",
	                    items,
	                    item,
	                    compiledTmpl = [],
	                    i,
	                    initSlider = function() {
	                        var options = {
	                            auto: true,
	                            autoControls: true,
	                            pause: 15000,
	                            autoHover: true,
	                            touchEnabled: true,
	                            preventDefaultSwipeY: true,
	                            mode: "fade",
	                            startText: '<span class="visuallyhidden">Start Slider</span><i class="icon-play"></i>',
	                            stopText: '<span class="visuallyhidden">Pause Slider</span><i class="icon-pause"></i>',
	                            adaptiveHeight: true,
	                            onSliderLoad: function() {
	                                $carouselObj.removeClass("loading");
	                            }
	                        };
	
	                        $carouselObj.bxSlider(options);
	                    },
	                    /* jshint -W015 */
	                    tmpl = [
	                        '<li class="cf">',
	                        '<div class="carousel-media">',
	                        "<%= data.sliderMedia %>",
	                        "</div>",
	                        '<div class="carousel-text">',
	                        '<% if (data.sliderType === "event") { %>',
	                        '<div class="date">',
	                        '<p class="date-month"><%= data.sliderDateMonth %></p>',
	                        '<p class="date-day-no"><%= data.sliderDateDayNo %></p>',
	                        '<p class="date-day"><%= data.sliderDateDay %></p>',
	                        "</div>",
	                        "<% } %>",
	                        "<h2><%= data.sliderTitle %></h2>",
	                        "<%= data.sliderDescription %>",
	                        "</div>",
	                        "</li>"
	                    ].join("\n");
	                /* jshint +W015 */
	
	                //set up slider
	                if (dataLength < 1) {
	                    return;
	                }
	
	                // we don't need the first slide as it is already in th DOM
	                data.shift();
	                dataLength = data.length;
	
	                // enumerate array
	                for (i = 0; i < dataLength; i += 1) {
	                    // items is an object representing a carousel slide
	                    items = data[i];
	                    tempEl = _.template(tmpl, items, { variable: "data" });
	                    compiledTmpl.push(tempEl);
	                }
	
	                $carouselObj.append(compiledTmpl.join(""));
	
	                initSlider($carouselObj);
	            },
	            /**
	             * Create a image Gallery
	             *
	             * @param {Object} a jquery object representing a single instance of a gallery
	             * @param {Boolean} true if the gallery is in a widget, false if in main content body
	             * @return {Object || Undefined} returns the galleria jQuery object if
	             * successful else undefined - for instance if $gallery is not a jQuery object
	             *
	             */
	            createGallery = function($gallery) {
	                var data = {
	                        src: "/apis/galleries/galleria-json?root=",
	                        root: ""
	                    },
	                    $loader = $('<span class="loading">loading</span>'),
	                    $galleryInner,
	                    //some default options
	                    galleriaOptions = {
	                        height: 0.5625,
	                        lightbox: false,
	                        maxScaleRatio: 1,
	                        preload: 2,
	                        showInfo: false,
	                        imageCrop: false,
	                        debug: true,
	                        extend: function(/* defined but not used: options */) {
	                            if ("city" === $gallery.attr("data-theme")) {
	                                $gallery.prepend(
	                                    $("<div/>", {
	                                        class: "cg-caption"
	                                    })
	                                );
	
	                                /*loadstart is triggered every time galleria loads an image*/
	                                this.bind("loadstart", function(e) {
	                                    var data = this._data[e.index],
	                                        //$caption is refound here as it needs to be scoped to this gallery
	                                        $caption = $gallery.find(".cg-caption");
	
	                                    if (data.m_caption) {
	                                        $caption.html(data.m_caption);
	                                    } else {
	                                        $caption.html("&nbsp;");
	                                    }
	                                });
	                            }
	                        }
	                    },
	                    galleriaThemeCallback = function() {
	                        //get id of root from id of gallery div
	                        data.root = $gallery.attr("id").replace("gallery-", "");
	
	                        $.getJSON(data.src + data.root, function(data) {
	                            //remove loader
	                            $loader.hide();
	                            $gallery.css("opacity", "1");
	                            galleriaOptions.data_source = data;
	                            $galleryInner.galleria(galleriaOptions);
	                        });
	
	                        return $galleryInner;
	                    };
	                //end vars
	
	                //some checks before we go further
	                if (!$gallery || $gallery.length === 0) {
	                    debug("$gallery is undefined or not a jQuery object");
	                    return;
	                } else {
	                    $galleryInner = $gallery.find(".gallery-inner");
	                }
	
	                //return if no stage found
	                if ($galleryInner.length === 0) {
	                    debug("no stage found");
	                    return;
	                }
	
	                //set some options from $galleryInner classes - this are set as metadata on the gallery folder
	                if ($galleryInner.hasClass("lightbox")) {
	                    galleriaOptions.lightbox = true;
	                }
	
	                if ($galleryInner.hasClass("caption")) {
	                    galleriaOptions.showInfo = true;
	                }
	
	                //add loading gif
	                $gallery.prepend($loader);
	
	                yepnope({
	                    load: [
	                        "lib/jquery/plugins/galleria/galleria-1.4.2/galleria-1.4.2.min.js",
	                        "lib/jquery/plugins/galleria/galleria-1.4.2/themes/classic/galleria.classic.min.js"
	                    ],
	                    complete: galleriaThemeCallback
	                });
	            }, //end createGallery
	            /**
	             * adds autocomplete functionality to the main search bar, using jQuery UI
	             * @param: {Object} form - jQuery object for form to run autoSuggest on
	             * @param: {Object} input - jQuery object for input elements to run autoSuggest on
	             * @param: {String} collection - the name of the Funnelback collection to query
	             * @retun: {Undefined}
	             */
	            searchAutoComplete = function(form, input, collection) {
	                input.autocomplete({
	                    source: function(request, response) {
	                        $.ajax({
	                            url: "/fb/suggest.json?collection=" + collection + "&fmt=json",
	                            dataType: "json",
	                            data: {
	                                partial_query: request.term
	                            },
	                            success: function(data) {
	                                response(
	                                    $.map(data, function(item) {
	                                        return {
	                                            label: item
	                                        };
	                                    })
	                                );
	                            }
	                        }); //end $.ajax
	                    }, //end source function
	
	                    minLength: 2,
	                    delay: 20,
	
	                    //when you have selected something
	                    select: function(event, ui) {
	                        //close the drop down
	                        //need to create a dummy assignment, to please jslint
	                        //close is still performed
	
	                        var c = this.close;
	
	                        //make sure on click the selected value replaces the type value
	                        $(this).val(ui.item.value);
	                        form.submit();
	                    },
	                    //show the drop down
	                    open: function() {
	                        $(this)
	                            .removeClass("ui-corner-all")
	                            .addClass("ui-corner-top");
	                    },
	                    //close the drop down
	                    close: function() {
	                        $(this)
	                            .removeClass("ui-corner-top")
	                            .addClass("ui-corner-all");
	                    }
	                });
	            },
	            /**
	             * Finds any vid images on a page and replaces them with either a YouTube iframe or SWFObject for FMS vids
	             * @return: Undefined
	             */
	            videos = function() {
	                var $youtubeVids = $("img.youtube"),
	                    $fmsVids = $("img.fms"),
	                    /*
	                 * Replaces an image element with YouTube iFrame
	                 * @param: {Object} : $el - jQuery object for youTube images to be replaced
	                 * @retun: {Undefined}
	                 */
	                    embedYoutube = function($youtubeVids) {
	                        $youtubeVids.each(function(i, el) {
	                            var $el = $(el),
	                                vidWidth = 500, // default width
	                                vidHeight = 320, // default height
	                                videoID = $el.attr("id").replace("vid_", ""),
	                                load = function(autoplay) {
	                                    $el.replaceWith(
	                                        '<div class="embed-wrapper"><div class="embed-container"><iframe height=' +
	                                            vidHeight +
	                                            " width= " +
	                                            vidWidth +
	                                            ' src="https://www.youtube.com/embed/' +
	                                            videoID +
	                                            "?rel=0" +
	                                            (autoplay ? "&autoplay=1" : "") +
	                                            "\" frameborder='0' allowfullscreen></iframe></div></div>"
	                                    );
	                                },
	                                preview = $el.hasClass("preview");
	
	                            if (preview) {
	                                $el.click(function() {
	                                    load(true);
	                                });
	                            } else {
	                                load(false);
	                            }
	                        });
	                    },
	                    /*
	                 * Replaces an image element with SWF Object
	                 * @param: {Object} : $el - jQuery object for all fms images to be replaced
	                 * @retun: {Undefined}
	                 */
	                    embedFms = function($fmsVids) {
	                        var splashImages = {
	                            cassStandard:
	                                "//s1.city.ac.uk/cassrmain/i/video-overlays/flowplayer-cass-500x320.jpg?v=8105",
	                            cassStandardWs:
	                                "//s1.city.ac.uk/cassrmain/i/video-overlays/flowplayer-cass-687x419.jpg?v=8105",
	                            cassRetina:
	                                "//s1.city.ac.uk/cassrmain/i/video-overlays/flowplayer-cass-500x320@x2.jpg?v=8105",
	                            cassRetinaWs:
	                                "//s1.city.ac.uk/cassrmain/i/video-overlays/flowplayer-cass-687x419@x2.jpg?v=8105"
	                        };
	
	                        $fmsVids.each(function(i, el) {
	                            var $el = $(el),
	                                vidWidth = 687, //default width
	                                vidHeight = 419, // default height
	                                elId = $el.attr("id"),
	                                vidId = elId.replace("vid_", ""),
	                                expressInstall = "//s1.city.ac.uk/js/swfobject/expressInstall.swf",
	                                flashtargetversion = "9.0.28",
	                                flashvars = null,
	                                params = {
	                                    allowScriptAccess: "always",
	                                    allowfullscreen: "true",
	                                    wmode: "transparent"
	                                },
	                                splashImage,
	                                swfCallBack = function(e) {
	                                    $(e.ref).wrap(
	                                        '<div class="embed-wrapper" style="max-width:' +
	                                            vidWidth +
	                                            'px"><div class="embed-container"></div></div>'
	                                    );
	                                };
	
	                            //if video is included in the course description div of a course N page, width needs to be 419
	                            if ($el.parents(".course-description").length !== 0) {
	                                vidWidth = 419;
	                            }
	
	                            //vids have different sizes depending on the size of the content div and if they are widescreen on square
	                            if ($el.hasClass("widescreen")) {
	                                vidHeight = vidWidth * 0.61;
	                                splashImage = splashImages.cassStandardWs;
	                            } else {
	                                vidWidth = 500;
	                                vidHeight = 320;
	                                splashImage = splashImages.cassStandard;
	                            }
	
	                            if (!swfobject.hasFlashPlayerVersion(flashtargetversion)) {
	                                //explain why there is no video
	                                $el.after(
	                                    '<p class="notice-message"><i class="icon-warning-sign" style="color : #CCCC00"></i> You need to have flash player ' +
	                                        flashtargetversion +
	                                        " or greater installed to see the video.</p>" +
	                                        '<p><a href="http://get.adobe.com/flashplayer/">Get Flash Player</a></p>'
	                                );
	                            } else {
	                                //config has to be in a string and key and values have to be "quoted" - nightmare
	                                // construct all the variables to pass to the player -
	                                // tried to make this a proper json array, didn't work :(
	                                // IE doesn't like double quotes here so ignore JSHint error
	
	                                /* jshint -W018 */
	                                flashvars =
	                                    "{'clip': {'provider': 'rtmp'}, 'playlist': [{'url':'" +
	                                    splashImage +
	                                    "', 'autoPlay': true}, {'url': '" +
	                                    vidId.replace("vid_", "") +
	                                    "/Hi_bandwidth', 'autoPlay': false, 'scaling': 'fit'}], 'plugins': {'rtmp': {'url': 'https://s1.city.ac.uk/js/flowplayer/flowplayer.rtmp-3.2.3.swf', 'netConnectionUrl': 'rtmp://media.city.ac.uk/flowplayer', 'objectEncoding': '0', 'proxyType': 'none' }, 'controls': {'url': 'flowplayer.controls.swf'} } }";
	                                /* jshint +W018 */
	
	                                // initiate the player
	                                swfobject.embedSWF(
	                                    "https://s1.city.ac.uk/js/flowplayer/flowplayer-3.2.5.swf",
	                                    elId,
	                                    vidWidth,
	                                    vidHeight,
	                                    "9.0.0",
	                                    expressInstall,
	                                    { config: flashvars },
	                                    params,
	                                    false,
	                                    swfCallBack
	                                );
	                            } //end has flash if
	                        });
	                    };
	
	                if ($youtubeVids.length) {
	                    embedYoutube($youtubeVids);
	                }
	                if ($fmsVids.length) {
	                    yepnope({
	                        load: scripts.swfobject.src,
	                        callback: function(url, result, key) {
	                            embedFms($fmsVids);
	                        }
	                    });
	                }
	            }, // end videos
	            /**
	             * creates the You Tube module - a UI component featuring a carousel of videos and a featured video area. Clicking on one of the slides
	             * updates the featured video, plus the title, description, views and share links. Requires Underscore.js
	             * @param {Object} ytModule a jQuery Object representing the container for the ytModule.
	             * @return {Undefined}
	             */
	            ytModule = function($ytModule) {
	                var ytUrl,
	                    vl,
	                    fv,
	                    successCallback,
	                    /*
	                 * constructor for FeaturedVideo obj
	                 * @param {String} el - a jQuery selector for the FeaturedVideo container
	                 * @return {Object} Returns a newa FeaturedVideo obj
	                 * @constructor
	                 */
	                    FeaturedVideo = function(el) {
	                        if (!(this instanceof FeaturedVideo)) {
	                            return new FeaturedVideo(el);
	                        }
	                        this.el = el;
	                        this.$el = $(el);
	                        this.player = $("#yt-video-player");
	                        /* jshint -W015 */
	                        this.tmpl = [
	                            '<div class="span14">',
	                            '<div id="yt-video-player" class="yt-video-player">',
	                            '<div class="embed-wrapper">',
	                            '<div class="embed-container">',
	                            '<iframe src="https://www.youtube.com/embed/<%= data.id %>?rel=0" frameborder="0" allowfullscreen></iframe>',
	                            "</div>",
	                            "</div>",
	                            "</div>",
	                            "</div>",
	                            '<div class="span10">',
	                            '<div class="video-meta">',
	                            '<h2 class="video-title"><%= data.title %></h2>',
	                            '<p class="video-description"><%= data.description %></p>',
	                            '<p class="video-views">Views : <%= data.views %></p>',
	                            '<p class="social-flat-links">',
	                            '<span class="facebook social-btn"><a href="https://www.facebook.com/dialog/feed?app_id=141996839165515&amp;redirect_uri=<% window.location.href %>&amp;link=<%= data.player %>"><i class="icon-facebook"></i>Facebook</a></span>',
	                            '<span class="twitter social-btn"><a href="https://twitter.com/intent/tweet?url=<%= data.player %>&amp;title=<%= data.title %>"><i class="icon-twitter"></i>Twitter</a></span>',
	                            '<span class="google social-btn"><a href="https://plus.google.com/share?url=<%= data.player %>"><i class="icon-google-plus"></i>Google +</a></span>',
	                            "</p>",
	                            "</div>",
	                            "<div>"
	                        ].join("\n");
	                        /* jshint +W015 */
	
	                        return this;
	                    },
	                    /*
	                 * constructor for VideosList obj
	                 * @param {String} el - a jQuery selector for the VideosList container
	                 * @return {Object} Returns a new VideosList obj
	                 * @constructor
	                 */
	                    VideosList = function(el) {
	                        if (!(this instanceof VideosList)) {
	                            return new VideosList(el);
	                        }
	                        this.el = el;
	                        this.$el = $(el);
	                        /* jshint -W015 */
	                        this.tmpl = [
	                            '<li data-video-id="<%= data.id %>" data-video-title="<%= data.title %>" data-video-description="<%= data.description %>" data-video-player="<%= data.player %>" data-video-views="<%= data.views %>" class="video event event-video <%= data.activeClass %>">',
	                            '<a href="https://www.youtube.com/embed/<%= data.id %>" class="video-link">',
	                            '<img src="<%= data.thumbnail %>" />',
	                            "</a>",
	                            '<p class="video-title">',
	                            '<a href="https://www.youtube.com/embed/<%= data.id %>" class="video-link"><%= data.title %></a>',
	                            "</p>",
	                            '<p class="video-views"><span class="view-count"><%= data.views %></span> views</p>',
	                            "</li>"
	                        ].join("\n");
	                        /* jshint +W015 */
	
	                        return this;
	                    };
	
	                // end ytModule var
	
	                /*
	                 * @method
	                 * @param {Object} videoDate - updates the featured video
	                 */
	                FeaturedVideo.prototype.update = function(videoData) {
	                    var newFeatured = _.template(this.tmpl, videoData, { variable: "data" });
	
	                    this.$el
	                        .addClass("loading")
	                        .empty()
	                        .append(newFeatured)
	                        .removeClass("loading");
	                };
	                /*
	                 * @method
	                 * {Array} slidesArray - each element contains html for individual slides
	                 */
	                VideosList.prototype.buildList = function(slidesArray) {
	                    // attach to DOM
	                    this.$el.append('<ul class="yt-videos-list">' + slidesArray.join("") + "</ul>");
	
	                    // attach click handler
	                    this.videoLinks = this.$el.find(".video-link");
	
	                    this.$el.on("click", ".video-link", function(e) {
	                        var $self = $(this),
	                            $selfParent = $self.parents(".video"),
	                            videoData = {};
	
	                        e.preventDefault();
	
	                        videoData.title = $selfParent.data("video-title");
	                        videoData.description = $selfParent.data("video-description");
	                        videoData.views = $selfParent.data("video-views");
	                        videoData.src = $self.attr("href");
	                        videoData.id = $selfParent.data("video-id");
	                        videoData.player = $selfParent.data("video-player");
	
	                        $(".video-link").each(function() {
	                            $(this)
	                                .parent(".video")
	                                .removeClass("active");
	                        });
	
	                        $selfParent.addClass("active");
	
	                        // update feature vid object
	                        fv.update(videoData);
	
	                        //scroll up to player
	                        $("html, body").animate(
	                            {
	                                scrollTop: $("#yt-video-player").offset().top
	                            },
	                            500
	                        );
	                    });
	
	                    // init slider
	                    this.$el.find("ul").bxSlider({
	                        slideWidth: 200,
	                        minSlides: 2,
	                        maxSlides: 10,
	                        slideMargin: 10,
	                        moveSlides: 1,
	                        infiniteLoop: false,
	                        nextText:
	                            '<span class="visuallyhidden">Next set of slides</span><i class="icon-caret-right"></i>',
	                        prevText:
	                            '<span class="visuallyhidden">Previous set of slides</span><i class="icon-caret-left"></i>',
	                        touchEnabled: true,
	                        preventDefaultSwipeY: true,
	                        adaptiveHeight: true
	                    });
	                };
	
	                // begin
	
	                //bail if underscore.js isn't loaded
	                if (!window._) {
	                    CASS.debug("ytModule requires Underscore.js to be loaded");
	                    return;
	                }
	
	                $ytModule = $ytModule || $("#yt-module");
	                fv = new FeaturedVideo("#yt-featured-video");
	                vl = new VideosList("#yt-videos-list");
	                ytUrl = $ytModule.data("yt-playlist");
	
	                if (!ytUrl) {
	                    CASS.debug("Needs a YouTube playlist");
	                    return;
	                }
	
	                if (ytUrl.indexOf("/youtube/v3/") >= 0) {
	                    successCallback = function(data) {
	                        var items = data.items,
	                            itemsLength = items.length,
	                            tmpArray = [],
	                            compiled,
	                            dataForTemplate,
	                            i;
	
	                        for (i = 0; i < itemsLength; i++) {
	                            var snippet = items[i].snippet;
	                            // private videos won't have a thumbnail
	                            if (snippet.thumbnails && snippet.thumbnails.high) {
	                                dataForTemplate = {
	                                    title: snippet.title,
	                                    description: snippet.description,
	                                    id: snippet.resourceId.videoId,
	                                    player: "https://www.youtube.com/embed/" + snippet.resourceId.videoId + "?rel=0",
	                                    thumbnail: snippet.thumbnails.high.url,
	                                    activeClass: ""
	                                };
	                                if (i === 0) {
	                                    dataForTemplate.activeClass = "active";
	                                    // update featured vid DOM
	                                    fv.update(dataForTemplate);
	                                } else {
	                                    dataForTemplate.activeClass = "";
	                                }
	                                compiled = _.template(vl.tmpl, dataForTemplate, { variable: "data" });
	                                // add compiled string to array
	                                tmpArray[i] = compiled;
	                            }
	                        }
	                        // update videos list DOM
	                        vl.buildList(tmpArray);
	                    };
	                } else {
	                    successCallback = function(data) {
	                        var items = data.data.items,
	                            itemsLength = items.length,
	                            tmpArray = [],
	                            compiled,
	                            dataForTemplate,
	                            i;
	
	                        for (i = 0; i < itemsLength; i++) {
	                            // private videos won't have a thumbnail
	                            if (items[i].video.thumbnail) {
	                                dataForTemplate = {
	                                    title: items[i].video.title,
	                                    description: items[i].video.description,
	                                    views: items[i].video.viewCount,
	                                    id: items[i].video.id,
	                                    player: encodeURI(items[i].video.player["default"]),
	                                    thumbnail: items[i].video.thumbnail.hqDefault,
	                                    activeClass: ""
	                                };
	                                if (i === 0) {
	                                    dataForTemplate.activeClass = "active";
	                                    // update featured vid DOM
	                                    fv.update(dataForTemplate);
	                                } else {
	                                    dataForTemplate.activeClass = "";
	                                }
	                                compiled = _.template(vl.tmpl, dataForTemplate, { variable: "data" });
	                                // add compiled string to array
	                                tmpArray[i] = compiled;
	                            }
	                        }
	
	                        // update videos list DOM
	                        vl.buildList(tmpArray);
	                    };
	                }
	
	                $.ajax({
	                    url: ytUrl,
	                    dataType: "jsonp",
	                    success: successCallback,
	                    complete: function() {
	                        $ytModule.removeClass("loading");
	                    },
	                    error: function(jqXHR, textStatus, errorThrown) {
	                        CASS.debug(jqXHR, textStatus, errorThrown);
	                    }
	                });
	            },
	            /**
	             * creates and adds a function as the default error handler for jQuery ajax operations
	             */
	            initJsFailureNotifier = function() {
	                var webService = "//webapps.city.ac.uk/matrix/services/jQueryError.php",
	                    notify = function(event, jqXHR, ajaxSettings, errorThrown) {
	                        //insert an "image" which has a web service as the src,
	                        //the web service sends email to ucs-webteam
	                        $("<img />", {
	                            src:
	                                webService +
	                                "?u=" +
	                                escape(windowLocation.href) +
	                                "&s=" +
	                                escape(ajaxSettings.url) +
	                                "&t=" +
	                                ajaxSettings.type +
	                                "&e=" +
	                                escape(errorThrown),
	                            style: "display: none"
	                        }).appendTo("#footer");
	                    };
	
	                //register this as a global ajax event handler
	                $(document).ajaxError(notify);
	            },
	            /**
	             * This is our yepnope filter
	             *
	             * splices in the version string we have set up in setVersion
	             * prepends the correct s1 domain, where it hasn't been provided
	             *
	             * N.B. will fail if we have an s1 top level folder containing
	             * dots (see comment below)
	             *
	             */
	            yepnopeFilter = function(resource) {
	                var loc, lastItem;
	                /*
	                 If we are loading in an absolute url, don't touch it
	                 * this is the regex which fails on a top level folder with dots
	                 *
	                 * matches:
	                 * http://www.external.com/scripts/script.js
	                 * www.external.com/scripts/script.js
	                 * absolute.with.many.sub.domains.domain.com/scripts/script.js
	                 * https://absoulte.with.many.sub.domains.domain.com/scripts/script.js
	                 *
	                 * doesn't match:
	                 * modules/test.js
	                 * lib/subdir/script.js
	                 * lib/subdir.123/script.js
	                 *
	                 * will match when we don't want to:
	                 * toplevel.with.dots/script.js
	                 * lib.v2/jquery/script.js
	                 *
	                 * I think it's an unlikely issue, but if anyone can tweak the regex
	                 * to prevent this please do.
	                 *
	                 */
	
	                if (/^(https?:\/\/)?([^\/.]+\.)+[^\/]+\//.test(resource.url)) {
	                    return resource;
	                }
	
	                loc =
	                    //already contains s1? - don't add prefix
	                    ((/s1/.test(resource.url) ? "" : srcPrefix) + resource.url)
	                        //split for splicing
	                        .split("/");
	
	                //splice in version
	                lastItem = loc.length - 1;
	                loc[lastItem] = version + loc[lastItem];
	
	                resource.url = loc.join("/");
	
	                // if on prod and we are loading a module/.js file
	                // we want .min.js rather than .js
	                if (/s1\.city/.test(resource.url) && !/js\/lib/.test(resource.url)) {
	                    resource.url = resource.url.replace(/js$/, "min.js");
	                }
	
	                return resource;
	            },
	            /**
	             *
	             * What needs to happen after a bxslider carousel has finished loading:
	             * 1. inject controls into @widget. finds default bxslider controls, replace with font awesome icons and append in widget
	             * 2. add scrollable class to widget content
	             * 3. remove loading spinner
	             * @param jQuery widget: a jquery wrapped .widget (needed for widget controls)
	             * @param string middleButtonText: what to write on the middle button (defaults to "All") (needed for widget controls)
	             * @param string allLink: the "all" middle button href (needed for widget controls)
	             */
	            afterBxSliderLoaded = function($widget, allLink, middleButtonText) {
	                var // carousel controls
	                    previousButton = $widget.find(".bx-prev"),
	                    nextButton = $widget.find(".bx-next"),
	                    inputMiddleButtonText = middleButtonText ? middleButtonText : "All";
	
	                // remove widget loading spinner
	                $widget.removeClass("widget-loading");
	
	                // add the "all" button between previous and next buttons if it is needed
	                if (allLink) {
	                    previousButton.after('<a href="' + allLink + '" class="bx-all" >' + inputMiddleButtonText + "</a>");
	                }
	            },
	            /**
	             * creates a standard carousel widget, e.g. events, news
	             * @param Object - the widget container
	             */
	            standardCarouselWidget = function($widget, allLink, showAmount, wrap) {
	                var $list, widgetBxOptions;
	
	                if (!$widget) {
	                    return;
	                }
	
	                showAmount = showAmount || 3;
	                $list = $widget.find(".items");
	                wrap = wrap || false;
	
	                //reformat the content into column sizes based on determined size, if there are more than showAmount items
	                if ($list.find("> .item").size() > showAmount) {
	                    widgetBxOptions = {
	                        auto: false,
	                        autoControls: false,
	                        pause: 15000,
	                        autoHover: true,
	                        touchEnabled: false,
	                        pager: false,
	                        infiniteLoop: false,
	                        hideControlOnEnd: true,
	                        adaptiveHeight: true,
	                        nextText: '<span class="visuallyhidden">Next</span><i class="icon-caret-right"></i>',
	                        prevText: '<span class="visuallyhidden">Previous</span><i class="icon-caret-left"></i>',
	                        onSliderLoad: function() {
	                            afterBxSliderLoaded($widget, allLink);
	                        }
	                    };
	
	                    if (wrap) {
	                        //set up sortable
	                        $list.wrapChildren({
	                            childElem: "li",
	                            sets: showAmount
	                        });
	                    }
	
	                    $list.bxSlider(widgetBxOptions);
	                } else {
	                    //remove widget loading spinner, case where the carousel isn't needed
	                    $widget.removeClass("widget-loading");
	                }
	            },
	            /*
	         Taking this out as not convinced it still works, put it back if someone ever asks for a Flickr widget
	         initFlickr = function () {
	
	         var $widget = $("#flickr-widget"),
	         $slideWrapper = $widget.find("ul"),
	         loadedOtherPics,
	         bxSliderCallback = function () {
	
	         debug("flickr callback...");
	
	         $(".widget-content", $widget).each(function () {
	
	         //find the ul
	         var firstdiv = $("ul div:first-child", this),
	         //ul = $("ul", this), defined not used
	         thisJq = $(this),
	         height = firstdiv.height(),
	         width = firstdiv.width();
	
	         //add classes
	         thisJq.addClass("scrollable");
	
	         //add css to .widget-content
	         thisJq.stop().animate({
	         "min-height": height
	         });
	         thisJq.css("width", width);
	
	         //remove loading icon when the content is ready
	         $widget.removeClass("widget-loading");
	
	         });
	
	         afterBxSliderLoaded($widget);
	
	         };
	
	         //attach an event to init the rest of the pics
	         $widget.mouseenter(function () {
	
	         //we only want to run this once
	         if (loadedOtherPics) {
	         return;
	         }
	
	         loadedOtherPics = true;
	
	         //translate all the span.imageurl"s into actual images
	         //(saves some rendering time)
	         $("a .imageurl", $widget).each(function () {
	
	         var thisJq = $(this),
	         text = thisJq.text(),
	         imgTag = "<img src=\"" + text + "\" alt=\"\">";
	
	         thisJq.parent().text("").prepend(imgTag);
	
	         });
	
	         $("p .imageurl", $widget).each(function () {
	         var thisJq = $(this),
	         text = thisJq.text(),
	         styleAttr = "background-image: url(" + text + ");";
	
	         thisJq.parent().attr("style", styleAttr);
	         thisJq.remove();
	
	         });
	
	         });
	
	         //set up scrollable
	         $slideWrapper.bxSlider({
	         auto: false,
	         autoControls: false,
	         pause: 15000,
	         autoHover: true,
	         touchEnabled: false,
	         pager: false,
	         infiniteLoop: false,
	         hideControlOnEnd: true,
	         adaptiveHeight: true,
	         nextText : "<span class=\"visuallyhidden\">Next</span><i class=\"icon-caret-right\"></i>",
	         prevText : "<span class=\"visuallyhidden\">Previous</span><i class=\"icon-caret-left\"></i>",
	         onSliderLoad: function(){
	         bxSliderCallback();
	         }
	         });
	
	         },// end initFlickr*/
	
	            /**
	             * map widget
	             */
	            initMap = function() {
	                var googleMapsMarkers = {},
	                    $mapJsData = $(".mapJsData"),
	                    mapsCallback = function() {
	                        var dialogProperties = {
	                                autoOpen: false,
	                                modal: true,
	                                width: 500,
	                                height: 500,
	                                position: ["top", "right"],
	                                title: "Find Us",
	                                resizable: false
	                            },
	                            //register the long/lat for this page as a google maps LongLat object, take from first marker (should always be at least one)
	                            //thisLatLng = new google.maps.LatLng(googleMapsMarkers.marker0.geolat, googleMapsMarkers.marker0.geolong),
	                            thisLatLng,
	                            mapProperties = {
	                                zoom: 15,
	                                //center: thisLatLng,
	                                disableDefaultUI: true,
	                                navigationControl: true,
	                                scaleControl: true,
	                                mapTypeId: google.maps.MapTypeId.ROADMAP,
	                                streetViewControl: true
	                            },
	                            $mapOverlayPane = $("<div>", {
	                                text: "Map here!",
	                                id: "mapBig"
	                            });
	                        //end vars
	
	                        // begin
	
	                        //populate googleMapsMarkers object with geo vars from the page
	                        $mapJsData.each(function(i) {
	                            googleMapsMarkers["marker" + i] = {};
	
	                            $("li.map-param", this).each(function() {
	                                var elementName = $(this)
	                                    .attr("class")
	                                    .replace("asset_metadata_", "")
	                                    .replace(".", "")
	                                    .replace("map-param", "")
	                                    .replace(" ", "");
	
	                                if (elementName === "geodescription") {
	                                    googleMapsMarkers["marker" + i][elementName] = $(this).html();
	                                } else {
	                                    googleMapsMarkers["marker" + i][elementName] = $(this).text();
	                                }
	                            });
	                        });
	
	                        // register the long/lat for this page as a google maps LongLat object, take from first marker (should always be at least one)
	                        thisLatLng = new google.maps.LatLng(
	                            googleMapsMarkers.marker0.geolat,
	                            googleMapsMarkers.marker0.geolong
	                        );
	
	                        mapProperties.center = thisLatLng;
	
	                        $mapOverlayPane.appendTo("body").dialog(dialogProperties);
	
	                        //bind events
	                        $mapOverlayPane.on("dialogopen", function() {
	                            //probably not best that we do this on every open, but don't think
	                            //there is a google Map destructor and it doesn't seem to cause issues
	                            var map = new google.maps.Map(document.getElementById("mapBig"), mapProperties),
	                                //initlaise infoWindow
	                                infoWindow = new google.maps.InfoWindow({
	                                    maxWidth: 400
	                                }),
	                                //bind info window to marker
	                                bindInfoWindow = function(marker, description, map, infoWindow) {
	                                    google.maps.event.addListener(marker, "click", function() {
	                                        infoWindow.setContent(description);
	                                        infoWindow.open(map, marker);
	                                    });
	                                }, //end bind info window
	                                createMarker = function(point, name, description, icon, map, infoWindow) {
	                                    var marker = new google.maps.Marker({
	                                        map: map,
	                                        position: point,
	                                        icon: icon,
	                                        title: name
	                                    });
	
	                                    bindInfoWindow(marker, description, map, infoWindow);
	                                }; //end createMarker
	                            // end vars
	
	                            $.each(googleMapsMarkers, function() {
	                                var point = new google.maps.LatLng(this.geolat, this.geolong);
	
	                                createMarker(
	                                    point,
	                                    this.geoplacename,
	                                    this.geodescription,
	                                    this.geoiconUrl,
	                                    map,
	                                    infoWindow
	                                );
	                            });
	                        }); //end $mapOverlayPane.on
	
	                        //override the map clicks
	                        $(".widget .map").on("click", function(e) {
	                            e.preventDefault();
	                            $mapOverlayPane.dialog("open");
	                        });
	                    }; //end mapsCallback
	
	                if ($mapJsData.length) {
	                    mapsCallback();
	                }
	            },
	            /**
	             * courses widget
	             */
	            initCourses = function() {
	                var $widget = $("#courses-widget"),
	                    $widgetContent = $widget.find(".widget-content");
	
	                $widgetContent.accordion({
	                    heightStyle: "content",
	                    collapsible: true,
	                    active: false,
	                    animate: false,
	                    icons: false,
	                    create: function() {
	                        afterBxSliderLoaded($widget);
	                    }
	                });
	            }, //end initCourses
	            /**
	             * Call to action widget
	             */
	            initCallToAction = function() {
	                var start_date = $("#start_date").val(),
	                    end_date = $("#end_date").val(),
	                    sd = new Date(),
	                    ed = new Date(),
	                    cd,
	                    splitDate = function(dt, idt) {
	                        var dateArray = dt.split("/"),
	                            endofArray = dateArray[2].split(" ");
	
	                        idt.setFullYear(endofArray[0]);
	                        idt.setMonth(dateArray[1] - 1);
	                        idt.setDate(dateArray[0]);
	
	                        return idt;
	                    };
	
	                sd = splitDate(start_date, sd);
	                ed = splitDate(end_date, ed);
	
	                //current date
	                cd = new Date();
	
	                if (ed >= cd && sd <= cd) {
	                    //Show the on date
	                    $("#content_on_date").attr("class", "widget-content cta-widget-show");
	                    $("#content_out_of_date").attr("class", "cta-widget-hide");
	                } else {
	                    //Show out of date
	                    $("#content_out_of_date").attr("class", "widget-content cta-widget-show");
	                    $("#content_on_date").attr("class", "cta-widget-hide");
	                }
	            },
	            /**
	             * initiates an image gallery widget
	             *
	             * @return {object || undefined} returns the galleria jQuery object if
	             * successful else undefined - for instance if $gallery is not a jQuery object
	             *
	             */
	            initGallery = function() {
	                var $gallery = $("#gallery-widget .gallery");
	                return createGallery($gallery, true);
	            },
	            /**
	             * The master widget initialiser, calls all the other init{map,events...} functions
	             */
	            initWidgets = function() {
	                var widgets = {
	                        map: {
	                            f: initMap
	                        },
	                        courses: {
	                            f: initCourses
	                        },
	                        events: {
	                            f: standardCarouselWidget,
	                            allLink: "//www.cass.city.ac.uk/events",
	                            showAmount: 3,
	                            wrap: true
	                        },
	                        news: {
	                            f: standardCarouselWidget,
	                            allLink: "//www.cass.city.ac.uk/news",
	                            showAmount: 3,
	                            wrap: true
	                        },
	                        testimonials: {
	                            f: standardCarouselWidget,
	                            showAmount: 1,
	                            wrap: false
	                        },
	                        "spotlight-research": {
	                            f: standardCarouselWidget,
	                            showAmount: 1,
	                            wrap: false
	                        },
	                        rss: {
	                            f: standardCarouselWidget,
	                            showAmount: 1,
	                            wrap: false
	                        },
	                        profiles: {
	                            f: standardCarouselWidget,
	                            showAmount: 1,
	                            wrap: false
	                        },
	                        gallery: {
	                            f: initGallery
	                        },
	                        cta: {
	                            f: initCallToAction
	                        } /*,
	                         "flickr" : {
	                         f: initFlickr
	                         },*/
	                    },
	                    widget,
	                    currentWidget,
	                    initFn;
	
	                debug("init widget related scripts");
	
	                // loop through each widget type and init if present
	                for (widget in widgets) {
	                    if (typeof widgets[widget] !== "function") {
	                        //debug("searching for " + i);
	                        currentWidget = $("#" + widget + "-widget");
	
	                        //bail here if the widget is not present
	                        if (currentWidget.length === 0) {
	                            debug("no " + widget + " widget");
	                            continue;
	                        }
	
	                        initFn = widgets[widget].f;
	
	                        //bail here if we can't find init func
	                        if (typeof initFn !== "function") {
	                            debug("can't find init func of " + widget + " widget");
	                            continue;
	                        }
	
	                        // run the init
	                        debug("running init func of " + widget + " widget");
	
	                        if (initFn === standardCarouselWidget) {
	                            initFn.apply(this, [
	                                currentWidget,
	                                widgets[widget].allLink,
	                                widgets[widget].showAmount,
	                                widgets[widget].wrap
	                            ]);
	                        } else {
	                            initFn.apply();
	                        }
	                    }
	                }
	            }, // end initWidgets
	            /**
	             * Stuff needed on everypage - explore city, login etc.
	             */
	            initPage = function() {
	                var $windowObj = $(w),
	                    $body = $("body"),
	                    // search
	                    $form = $body.find(".header-search"),
	                    $query = $form.find(".header-search__query"),
	                    collection = "main-all",
	                    // navigation
	                    //VI $globalNav = $body.find("#global-nav"),
	                    $breadcrumbsNav = $("#breadcrumbs-nav"),
	                    $responsiveTogglers = $(".responsive-toggler"), // buttons to hide/show navigation menus
	                    //VI $togglees = $(".toggle"),                               // the areas to be shown/hidden when the above button is clicked
	                    /* VI $globalNavAccordionOptions = {
	                        header: ".header",
	                        active: false,
	                        collapsible: true,
	                        autoHeight: true,
	                        animate: false,
	                        icons: false
	                    },*/
	                    // in page UI elements
	                    $content = $("#content"),
	                    $carouselObj = $("#promo-area"), // carousel container
	                    $accordions = $body.find(".accordion"),
	                    $tabs = $body.find(".tabs"),
	                    $ytModule = $(".yt-module"),
	                    $galleries = $content.find(".gallery"),
	                    $images = $content.find("img");
	                //end initPage vars
	
	                // funky loading images
	                if ($images.complete) {
	                    imageLoaded($images);
	                }
	
	                $images.each(function() {
	                    if (this.complete) {
	                        imageLoaded(this);
	                    }
	                    $(this).on("load", imageLoaded);
	                });
	
	                // set screensize
	                screenSize = getWindowWidth(window) >= breakpoints.wide ? "wide" : "mobile";
	
	                // attach click events on mobile navigation togglers
	                $responsiveTogglers.on("click", function(e) {
	                    var $self = $(this),
	                        $toggle = $self.next(".toggle");
	
	                    e.preventDefault();
	                    $self.toggleClass("active");
	                    $toggle.toggleClass("active");
	
	                    //if ($self.hasClass("global-nav-bttn")) {
	                    //    // need to refesh to calculate height when accordion is visible
	                    //    $globalNav.accordion("refresh");
	                    //}
	                });
	
	                if (!Modernizr.svg) {
	                    $(".logo img").attr("src", function() {
	                        return $(this)
	                            .attr("src")
	                            .replace(".svg", ".png");
	                    });
	                }
	
	                // if current-page is first in the menu, it needs different padding
	                if ($breadcrumbsNav.find("li").length === 0) {
	                    $(".current-page").addClass("first");
	                    $breadcrumbsNav.remove();
	                }
	
	                // keyboard accessible dropdowns
	                /* VI
	                $globalNav.find("a").focus(function () {
	                    $(this).parents(".dd").addClass("hover");
	                }).blur(function () {
	                    $(this).parents(".dd").removeClass("hover");
	                });
	                */
	
	                // on page load if we start with wide sized browser we want
	                // the mega dropdowns
	                /* VI
	                if (screenSize === "wide") {
	
	                } else {
	                    $globalNav.data("ui", "accordion");
	                    $globalNav.accordion($globalNavAccordionOptions);
	                }
	                */
	
	                // attach resize event to window
	                /* VI
	                $windowObj.resize(function () {
	
	                    if (!viewportChanged()) {
	                        return;
	                    }
	
	                    if (getWindowWidth(window) >= breakpoints.wide) {
	                        //big to small?
	                        screenSize = "wide";
	                        //console.log("small to big, TODO: kill accordion");
	
	                        // destroy accordion
	                        if ($globalNav.data("ui") === "accordion") {
	                            $globalNav.data("ui", "");
	                            $globalNav.accordion("destroy");
	                        }
	
	                        // close any openers which were open before width change
	                        $responsiveTogglers.removeClass("active");
	                        $togglees.removeClass("active");
	
	                    } else {
	                        //console.log("big to small");
	                        screenSize = "mobile";
	                        $globalNav.data("ui", "accordion");
	                        $globalNav.accordion($globalNavAccordionOptions);
	
	                    }
	
	                });
	                */
	
	                // initalise any accordions found
	                $accordions.accordion({
	                    heightStyle: "content",
	                    collapsible: true,
	                    active: false,
	                    animate: false,
	                    icons: false
	                });
	
	                // initalise any tabs found
	                // make sure we trigger statefull tabs if needed
	                if ($tabs.hasClass("statefull-tabs")) {
	                    $tabs.tabs({
	                        create: function() {
	                            var hash = getUrlHash(),
	                                appendHash;
	                            if (hash.length === 1) {
	                                appendHash = parseInt(hash[0].split("=")[1]) - 1;
	                                $tabs.find("a:eq(" + parseInt(appendHash) + ")").click();
	                            }
	                        },
	                        activate: function(event, ui) {
	                            var newHash = "#courses-details=" + ($(ui.newTab[0]).index() + 1);
	                            if (history.pushState) {
	                                history.pushState(null, null, newHash);
	                            } else {
	                                location.hash = newHash;
	                            }
	                        }
	                    });
	                } else {
	                    $tabs.tabs();
	                }
	
	                // if we have a carousel - set it up
	                if ($carouselObj.length !== 0) {
	                    yepnope({
	                        load: scripts.underscore.src,
	                        callback: function() {
	                            createSlider($carouselObj);
	                        }
	                    });
	                }
	
	                // if a gallery is found invoke initGallery for each
	                if ($galleries.length !== 0) {
	                    $galleries.each(function() {
	                        createGallery($(this), false);
	                    });
	                }
	
	                // fallback for browsers that don't understand placeholder attribute
	                if (!Modernizr.input.placeholder) {
	                    $("[placeholder]")
	                        .focus(function() {
	                            var input = $(this);
	                            if (input.val() === input.attr("placeholder")) {
	                                input.val("");
	                                input.removeClass("placeholder");
	                            }
	                        })
	                        .blur(function() {
	                            var input = $(this);
	                            if (input.val() === "" || input.val() === input.attr("placeholder")) {
	                                input.addClass("placeholder");
	                                input.val(input.attr("placeholder"));
	                            }
	                        })
	                        .blur();
	                    $("[placeholder]")
	                        .parents("form")
	                        .submit(function() {
	                            $(this)
	                                .find("[placeholder]")
	                                .each(function() {
	                                    var input = $(this);
	                                    if (input.val() === input.attr("placeholder")) {
	                                        input.val("");
	                                    }
	                                });
	                        });
	                }
	
	                //set up autocomplete on search box
	                searchAutoComplete($form, $query, collection);
	
	                //catch any hallway style call to action or banner action
	                if ($content.find(".action-hallway, .banner-hallway").length) {
	                    CASS.load("hallway");
	                }
	
	                // catch any videos that have been manually input
	                $("iframe[src*='youtube']").each(function() {
	                    var $element = $(this),
	                        vidWidth = $element.outerWidth(),
	                        $parent = $element.parent();
	
	                    // don't double wrap an iframe
	                    if (!$parent.hasClass("embed-container")) {
	                        // for elastic objects, we need 2 (!) wrappers
	                        $element.wrap(
	                            '<div class="embed-wrapper" style="max-width:' +
	                                vidWidth +
	                                'px"><div class="embed-container"></div></div>'
	                        );
	                    }
	                });
	
	                // YouTube module
	                if ($ytModule.length) {
	                    yepnope({
	                        load: scripts.underscore.src,
	                        complete: function() {
	                            ytModule($ytModule);
	                        }
	                    });
	                }
	            }, //end initPage
	            /** deferred functions **/
	            initDeferred = function() {
	                if (typeof CITY_OPTIONS !== "undefined" && CITY_OPTIONS.defer) {
	                    for (var i = 0; i < CITY_OPTIONS.defer.length; i++) {
	                        CITY_OPTIONS.defer[i]();
	                    }
	                }
	            },
	            /**
	             * Initialisation function, called immediately after CASS declaration below
	             */
	            init = function() {
	                debug("CASS ready (we are in " + document.compatMode + ")");
	                yepnope.addFilter(yepnopeFilter);
	
	                // the following needs domready
	                $(function() {
	                    initPage();
	
	                    initHeader($);
	
	                    imageCreditation();
	
	                    initDeferred();
	
	                    initWidgets();
	
	                    //set up any videos on page
	                    videos();
	
	                    // set up shadowbox
	                    Shadowbox.init({ overlayOpacity: 0.9 });
	
	                    initCookieNotice($);
	
	                    //initCookieSurvey($);
	
	                    //while we are developing, lets include the devstuff
	                    // load("devStuff");
	
	                    //set up the js failure notification
	                    initJsFailureNotifier();
	                });
	            };
	
	        // end CASS var
	
	        /**
	         *  This literal defines what methods to make publicly accessible
	         *  outsite CASS
	         */
	        return {
	            init: init,
	            load: load,
	            debug: debug,
	            setVersion: setVersion,
	            isEven: isEven,
	            getUrlVars: getUrlVars,
	            objectSize: objectSize,
	            getWindowWidth: getWindowWidth,
	            s1Server: srcPrefix,
	            isCass: isCass,
	            isBunhill: isBunhill
	        };
	    })(window, Modernizr, yepnope);
	// end CASS
	
	window.CASS = CASS;
	window.Cookies = Cookies;


/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

	module.exports = function () {
	
	    var jQuery = __webpack_require__(2);
	    window.jQuery = window.$ = jQuery;
	    
	    __webpack_require__(4);
	    __webpack_require__(5);
	    __webpack_require__(6);
	
	    __webpack_require__(7)(window.jQuery);
	
	    __webpack_require__(8);
	
	    return window.jQuery;
	}();

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

	var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {/*!
	 * jQuery JavaScript Library v1.10.2
	 * http://jquery.com/
	 *
	 * Includes Sizzle.js
	 * http://sizzlejs.com/
	 *
	 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2013-07-03T13:48Z
	 */
	(function( window, undefined ) {
	
	// Can't do this because several apps including ASP.NET trace
	// the stack via arguments.caller.callee and Firefox dies if
	// you try to trace through "use strict" call chains. (#13335)
	// Support: Firefox 18+
	//"use strict";
	    var
	    // The deferred used on DOM ready
	        readyList,
	
	    // A central reference to the root jQuery(document)
	        rootjQuery,
	
	    // Support: IE<10
	    // For `typeof xmlNode.method` instead of `xmlNode.method !== undefined`
	        core_strundefined = typeof undefined,
	
	    // Use the correct document accordingly with window argument (sandbox)
	        location = window.location,
	        document = window.document,
	        docElem = document.documentElement,
	
	    // Map over jQuery in case of overwrite
	        _jQuery = window.jQuery,
	
	    // Map over the $ in case of overwrite
	        _$ = window.$,
	
	    // [[Class]] -> type pairs
	        class2type = {},
	
	    // List of deleted data cache ids, so we can reuse them
	        core_deletedIds = [],
	
	        core_version = "1.10.2",
	
	    // Save a reference to some core methods
	        core_concat = core_deletedIds.concat,
	        core_push = core_deletedIds.push,
	        core_slice = core_deletedIds.slice,
	        core_indexOf = core_deletedIds.indexOf,
	        core_toString = class2type.toString,
	        core_hasOwn = class2type.hasOwnProperty,
	        core_trim = core_version.trim,
	
	    // Define a local copy of jQuery
	        jQuery = function( selector, context ) {
	            // The jQuery object is actually just the init constructor 'enhanced'
	            return new jQuery.fn.init( selector, context, rootjQuery );
	        },
	
	    // Used for matching numbers
	        core_pnum = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
	
	    // Used for splitting on whitespace
	        core_rnotwhite = /\S+/g,
	
	    // Make sure we trim BOM and NBSP (here's looking at you, Safari 5.0 and IE)
	        rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
	
	    // A simple way to check for HTML strings
	    // Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	    // Strict HTML recognition (#11290: must start with <)
	        rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
	
	    // Match a standalone tag
	        rsingleTag = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
	
	    // JSON RegExp
	        rvalidchars = /^[\],:{}\s]*$/,
	        rvalidbraces = /(?:^|:|,)(?:\s*\[)+/g,
	        rvalidescape = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
	        rvalidtokens = /"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,
	
	    // Matches dashed string for camelizing
	        rmsPrefix = /^-ms-/,
	        rdashAlpha = /-([\da-z])/gi,
	
	    // Used by jQuery.camelCase as callback to replace()
	        fcamelCase = function( all, letter ) {
	            return letter.toUpperCase();
	        },
	
	    // The ready event handler
	        completed = function( event ) {
	
	            // readyState === "complete" is good enough for us to call the dom ready in oldIE
	            if ( document.addEventListener || event.type === "load" || document.readyState === "complete" ) {
	                detach();
	                jQuery.ready();
	            }
	        },
	    // Clean-up method for dom ready events
	        detach = function() {
	            if ( document.addEventListener ) {
	                document.removeEventListener( "DOMContentLoaded", completed, false );
	                window.removeEventListener( "load", completed, false );
	
	            } else {
	                document.detachEvent( "onreadystatechange", completed );
	                window.detachEvent( "onload", completed );
	            }
	        };
	
	    jQuery.fn = jQuery.prototype = {
	        // The current version of jQuery being used
	        jquery: core_version,
	
	        constructor: jQuery,
	        init: function( selector, context, rootjQuery ) {
	            var match, elem;
	
	            // HANDLE: $(""), $(null), $(undefined), $(false)
	            if ( !selector ) {
	                return this;
	            }
	
	            // Handle HTML strings
	            if ( typeof selector === "string" ) {
	                if ( selector.charAt(0) === "<" && selector.charAt( selector.length - 1 ) === ">" && selector.length >= 3 ) {
	                    // Assume that strings that start and end with <> are HTML and skip the regex check
	                    match = [ null, selector, null ];
	
	                } else {
	                    match = rquickExpr.exec( selector );
	                }
	
	                // Match html or make sure no context is specified for #id
	                if ( match && (match[1] || !context) ) {
	
	                    // HANDLE: $(html) -> $(array)
	                    if ( match[1] ) {
	                        context = context instanceof jQuery ? context[0] : context;
	
	                        // scripts is true for back-compat
	                        jQuery.merge( this, jQuery.parseHTML(
	                            match[1],
	                            context && context.nodeType ? context.ownerDocument || context : document,
	                            true
	                        ) );
	
	                        // HANDLE: $(html, props)
	                        if ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {
	                            for ( match in context ) {
	                                // Properties of context are called as methods if possible
	                                if ( jQuery.isFunction( this[ match ] ) ) {
	                                    this[ match ]( context[ match ] );
	
	                                    // ...and otherwise set as attributes
	                                } else {
	                                    this.attr( match, context[ match ] );
	                                }
	                            }
	                        }
	
	                        return this;
	
	                        // HANDLE: $(#id)
	                    } else {
	                        elem = document.getElementById( match[2] );
	
	                        // Check parentNode to catch when Blackberry 4.6 returns
	                        // nodes that are no longer in the document #6963
	                        if ( elem && elem.parentNode ) {
	                            // Handle the case where IE and Opera return items
	                            // by name instead of ID
	                            if ( elem.id !== match[2] ) {
	                                return rootjQuery.find( selector );
	                            }
	
	                            // Otherwise, we inject the element directly into the jQuery object
	                            this.length = 1;
	                            this[0] = elem;
	                        }
	
	                        this.context = document;
	                        this.selector = selector;
	                        return this;
	                    }
	
	                    // HANDLE: $(expr, $(...))
	                } else if ( !context || context.jquery ) {
	                    return ( context || rootjQuery ).find( selector );
	
	                    // HANDLE: $(expr, context)
	                    // (which is just equivalent to: $(context).find(expr)
	                } else {
	                    return this.constructor( context ).find( selector );
	                }
	
	                // HANDLE: $(DOMElement)
	            } else if ( selector.nodeType ) {
	                this.context = this[0] = selector;
	                this.length = 1;
	                return this;
	
	                // HANDLE: $(function)
	                // Shortcut for document ready
	            } else if ( jQuery.isFunction( selector ) ) {
	                return rootjQuery.ready( selector );
	            }
	
	            if ( selector.selector !== undefined ) {
	                this.selector = selector.selector;
	                this.context = selector.context;
	            }
	
	            return jQuery.makeArray( selector, this );
	        },
	
	        // Start with an empty selector
	        selector: "",
	
	        // The default length of a jQuery object is 0
	        length: 0,
	
	        toArray: function() {
	            return core_slice.call( this );
	        },
	
	        // Get the Nth element in the matched element set OR
	        // Get the whole matched element set as a clean array
	        get: function( num ) {
	            return num == null ?
	
	                // Return a 'clean' array
	                this.toArray() :
	
	                // Return just the object
	                ( num < 0 ? this[ this.length + num ] : this[ num ] );
	        },
	
	        // Take an array of elements and push it onto the stack
	        // (returning the new matched element set)
	        pushStack: function( elems ) {
	
	            // Build a new jQuery matched element set
	            var ret = jQuery.merge( this.constructor(), elems );
	
	            // Add the old object onto the stack (as a reference)
	            ret.prevObject = this;
	            ret.context = this.context;
	
	            // Return the newly-formed element set
	            return ret;
	        },
	
	        // Execute a callback for every element in the matched set.
	        // (You can seed the arguments with an array of args, but this is
	        // only used internally.)
	        each: function( callback, args ) {
	            return jQuery.each( this, callback, args );
	        },
	
	        ready: function( fn ) {
	            // Add the callback
	            jQuery.ready.promise().done( fn );
	
	            return this;
	        },
	
	        slice: function() {
	            return this.pushStack( core_slice.apply( this, arguments ) );
	        },
	
	        first: function() {
	            return this.eq( 0 );
	        },
	
	        last: function() {
	            return this.eq( -1 );
	        },
	
	        eq: function( i ) {
	            var len = this.length,
	                j = +i + ( i < 0 ? len : 0 );
	            return this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );
	        },
	
	        map: function( callback ) {
	            return this.pushStack( jQuery.map(this, function( elem, i ) {
	                return callback.call( elem, i, elem );
	            }));
	        },
	
	        end: function() {
	            return this.prevObject || this.constructor(null);
	        },
	
	        // For internal use only.
	        // Behaves like an Array's method, not like a jQuery method.
	        push: core_push,
	        sort: [].sort,
	        splice: [].splice
	    };
	
	// Give the init function the jQuery prototype for later instantiation
	    jQuery.fn.init.prototype = jQuery.fn;
	
	    jQuery.extend = jQuery.fn.extend = function() {
	        var src, copyIsArray, copy, name, options, clone,
	            target = arguments[0] || {},
	            i = 1,
	            length = arguments.length,
	            deep = false;
	
	        // Handle a deep copy situation
	        if ( typeof target === "boolean" ) {
	            deep = target;
	            target = arguments[1] || {};
	            // skip the boolean and the target
	            i = 2;
	        }
	
	        // Handle case when target is a string or something (possible in deep copy)
	        if ( typeof target !== "object" && !jQuery.isFunction(target) ) {
	            target = {};
	        }
	
	        // extend jQuery itself if only one argument is passed
	        if ( length === i ) {
	            target = this;
	            --i;
	        }
	
	        for ( ; i < length; i++ ) {
	            // Only deal with non-null/undefined values
	            if ( (options = arguments[ i ]) != null ) {
	                // Extend the base object
	                for ( name in options ) {
	                    src = target[ name ];
	                    copy = options[ name ];
	
	                    // Prevent never-ending loop
	                    if ( target === copy ) {
	                        continue;
	                    }
	
	                    // Recurse if we're merging plain objects or arrays
	                    if ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {
	                        if ( copyIsArray ) {
	                            copyIsArray = false;
	                            clone = src && jQuery.isArray(src) ? src : [];
	
	                        } else {
	                            clone = src && jQuery.isPlainObject(src) ? src : {};
	                        }
	
	                        // Never move original objects, clone them
	                        target[ name ] = jQuery.extend( deep, clone, copy );
	
	                        // Don't bring in undefined values
	                    } else if ( copy !== undefined ) {
	                        target[ name ] = copy;
	                    }
	                }
	            }
	        }
	
	        // Return the modified object
	        return target;
	    };
	
	    jQuery.extend({
	        // Unique for each copy of jQuery on the page
	        // Non-digits removed to match rinlinejQuery
	        expando: "jQuery" + ( core_version + Math.random() ).replace( /\D/g, "" ),
	
	        noConflict: function( deep ) {
	            if ( window.$ === jQuery ) {
	                window.$ = _$;
	            }
	
	            if ( deep && window.jQuery === jQuery ) {
	                window.jQuery = _jQuery;
	            }
	
	            return jQuery;
	        },
	
	        // Is the DOM ready to be used? Set to true once it occurs.
	        isReady: false,
	
	        // A counter to track how many items to wait for before
	        // the ready event fires. See #6781
	        readyWait: 1,
	
	        // Hold (or release) the ready event
	        holdReady: function( hold ) {
	            if ( hold ) {
	                jQuery.readyWait++;
	            } else {
	                jQuery.ready( true );
	            }
	        },
	
	        // Handle when the DOM is ready
	        ready: function( wait ) {
	
	            // Abort if there are pending holds or we're already ready
	            if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
	                return;
	            }
	
	            // Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).
	            if ( !document.body ) {
	                return setTimeout( jQuery.ready );
	            }
	
	            // Remember that the DOM is ready
	            jQuery.isReady = true;
	
	            // If a normal DOM Ready event fired, decrement, and wait if need be
	            if ( wait !== true && --jQuery.readyWait > 0 ) {
	                return;
	            }
	
	            // If there are functions bound, to execute
	            readyList.resolveWith( document, [ jQuery ] );
	
	            // Trigger any bound ready events
	            if ( jQuery.fn.trigger ) {
	                jQuery( document ).trigger("ready").off("ready");
	            }
	        },
	
	        // See test/unit/core.js for details concerning isFunction.
	        // Since version 1.3, DOM methods and functions like alert
	        // aren't supported. They return false on IE (#2968).
	        isFunction: function( obj ) {
	            return jQuery.type(obj) === "function";
	        },
	
	        isArray: Array.isArray || function( obj ) {
	            return jQuery.type(obj) === "array";
	        },
	
	        isWindow: function( obj ) {
	            /* jshint eqeqeq: false */
	            return obj != null && obj == obj.window;
	        },
	
	        isNumeric: function( obj ) {
	            return !isNaN( parseFloat(obj) ) && isFinite( obj );
	        },
	
	        type: function( obj ) {
	            if ( obj == null ) {
	                return String( obj );
	            }
	            return typeof obj === "object" || typeof obj === "function" ?
	            class2type[ core_toString.call(obj) ] || "object" :
	                typeof obj;
	        },
	
	        isPlainObject: function( obj ) {
	            var key;
	
	            // Must be an Object.
	            // Because of IE, we also have to check the presence of the constructor property.
	            // Make sure that DOM nodes and window objects don't pass through, as well
	            if ( !obj || jQuery.type(obj) !== "object" || obj.nodeType || jQuery.isWindow( obj ) ) {
	                return false;
	            }
	
	            try {
	                // Not own constructor property must be Object
	                if ( obj.constructor &&
	                    !core_hasOwn.call(obj, "constructor") &&
	                    !core_hasOwn.call(obj.constructor.prototype, "isPrototypeOf") ) {
	                    return false;
	                }
	            } catch ( e ) {
	                // IE8,9 Will throw exceptions on certain host objects #9897
	                return false;
	            }
	
	            // Support: IE<9
	            // Handle iteration over inherited properties before own properties.
	            if ( jQuery.support.ownLast ) {
	                for ( key in obj ) {
	                    return core_hasOwn.call( obj, key );
	                }
	            }
	
	            // Own properties are enumerated firstly, so to speed up,
	            // if last one is own, then all properties are own.
	            for ( key in obj ) {}
	
	            return key === undefined || core_hasOwn.call( obj, key );
	        },
	
	        isEmptyObject: function( obj ) {
	            var name;
	            for ( name in obj ) {
	                return false;
	            }
	            return true;
	        },
	
	        error: function( msg ) {
	            throw new Error( msg );
	        },
	
	        // data: string of html
	        // context (optional): If specified, the fragment will be created in this context, defaults to document
	        // keepScripts (optional): If true, will include scripts passed in the html string
	        parseHTML: function( data, context, keepScripts ) {
	            if ( !data || typeof data !== "string" ) {
	                return null;
	            }
	            if ( typeof context === "boolean" ) {
	                keepScripts = context;
	                context = false;
	            }
	            context = context || document;
	
	            var parsed = rsingleTag.exec( data ),
	                scripts = !keepScripts && [];
	
	            // Single tag
	            if ( parsed ) {
	                return [ context.createElement( parsed[1] ) ];
	            }
	
	            parsed = jQuery.buildFragment( [ data ], context, scripts );
	            if ( scripts ) {
	                jQuery( scripts ).remove();
	            }
	            return jQuery.merge( [], parsed.childNodes );
	        },
	
	        parseJSON: function( data ) {
	            // Attempt to parse using the native JSON parser first
	            if ( window.JSON && window.JSON.parse ) {
	                return window.JSON.parse( data );
	            }
	
	            if ( data === null ) {
	                return data;
	            }
	
	            if ( typeof data === "string" ) {
	
	                // Make sure leading/trailing whitespace is removed (IE can't handle it)
	                data = jQuery.trim( data );
	
	                if ( data ) {
	                    // Make sure the incoming data is actual JSON
	                    // Logic borrowed from http://json.org/json2.js
	                    if ( rvalidchars.test( data.replace( rvalidescape, "@" )
	                            .replace( rvalidtokens, "]" )
	                            .replace( rvalidbraces, "")) ) {
	
	                        return ( new Function( "return " + data ) )();
	                    }
	                }
	            }
	
	            jQuery.error( "Invalid JSON: " + data );
	        },
	
	        // Cross-browser xml parsing
	        parseXML: function( data ) {
	            var xml, tmp;
	            if ( !data || typeof data !== "string" ) {
	                return null;
	            }
	            try {
	                if ( window.DOMParser ) { // Standard
	                    tmp = new DOMParser();
	                    xml = tmp.parseFromString( data , "text/xml" );
	                } else { // IE
	                    xml = new ActiveXObject( "Microsoft.XMLDOM" );
	                    xml.async = "false";
	                    xml.loadXML( data );
	                }
	            } catch( e ) {
	                xml = undefined;
	            }
	            if ( !xml || !xml.documentElement || xml.getElementsByTagName( "parsererror" ).length ) {
	                jQuery.error( "Invalid XML: " + data );
	            }
	            return xml;
	        },
	
	        noop: function() {},
	
	        // Evaluates a script in a global context
	        // Workarounds based on findings by Jim Driscoll
	        // http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context
	        globalEval: function( data ) {
	            if ( data && jQuery.trim( data ) ) {
	                // We use execScript on Internet Explorer
	                // We use an anonymous function so that context is window
	                // rather than jQuery in Firefox
	                ( window.execScript || function( data ) {
	                    window[ "eval" ].call( window, data );
	                } )( data );
	            }
	        },
	
	        // Convert dashed to camelCase; used by the css and data modules
	        // Microsoft forgot to hump their vendor prefix (#9572)
	        camelCase: function( string ) {
	            return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
	        },
	
	        nodeName: function( elem, name ) {
	            return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
	        },
	
	        // args is for internal usage only
	        each: function( obj, callback, args ) {
	            var value,
	                i = 0,
	                length = obj.length,
	                isArray = isArraylike( obj );
	
	            if ( args ) {
	                if ( isArray ) {
	                    for ( ; i < length; i++ ) {
	                        value = callback.apply( obj[ i ], args );
	
	                        if ( value === false ) {
	                            break;
	                        }
	                    }
	                } else {
	                    for ( i in obj ) {
	                        value = callback.apply( obj[ i ], args );
	
	                        if ( value === false ) {
	                            break;
	                        }
	                    }
	                }
	
	                // A special, fast, case for the most common use of each
	            } else {
	                if ( isArray ) {
	                    for ( ; i < length; i++ ) {
	                        value = callback.call( obj[ i ], i, obj[ i ] );
	
	                        if ( value === false ) {
	                            break;
	                        }
	                    }
	                } else {
	                    for ( i in obj ) {
	                        value = callback.call( obj[ i ], i, obj[ i ] );
	
	                        if ( value === false ) {
	                            break;
	                        }
	                    }
	                }
	            }
	
	            return obj;
	        },
	
	        // Use native String.trim function wherever possible
	        trim: core_trim && !core_trim.call("\uFEFF\xA0") ?
	            function( text ) {
	                return text == null ?
	                    "" :
	                    core_trim.call( text );
	            } :
	
	            // Otherwise use our own trimming functionality
	            function( text ) {
	                return text == null ?
	                    "" :
	                    ( text + "" ).replace( rtrim, "" );
	            },
	
	        // results is for internal usage only
	        makeArray: function( arr, results ) {
	            var ret = results || [];
	
	            if ( arr != null ) {
	                if ( isArraylike( Object(arr) ) ) {
	                    jQuery.merge( ret,
	                        typeof arr === "string" ?
	                            [ arr ] : arr
	                    );
	                } else {
	                    core_push.call( ret, arr );
	                }
	            }
	
	            return ret;
	        },
	
	        inArray: function( elem, arr, i ) {
	            var len;
	
	            if ( arr ) {
	                if ( core_indexOf ) {
	                    return core_indexOf.call( arr, elem, i );
	                }
	
	                len = arr.length;
	                i = i ? i < 0 ? Math.max( 0, len + i ) : i : 0;
	
	                for ( ; i < len; i++ ) {
	                    // Skip accessing in sparse arrays
	                    if ( i in arr && arr[ i ] === elem ) {
	                        return i;
	                    }
	                }
	            }
	
	            return -1;
	        },
	
	        merge: function( first, second ) {
	            var l = second.length,
	                i = first.length,
	                j = 0;
	
	            if ( typeof l === "number" ) {
	                for ( ; j < l; j++ ) {
	                    first[ i++ ] = second[ j ];
	                }
	            } else {
	                while ( second[j] !== undefined ) {
	                    first[ i++ ] = second[ j++ ];
	                }
	            }
	
	            first.length = i;
	
	            return first;
	        },
	
	        grep: function( elems, callback, inv ) {
	            var retVal,
	                ret = [],
	                i = 0,
	                length = elems.length;
	            inv = !!inv;
	
	            // Go through the array, only saving the items
	            // that pass the validator function
	            for ( ; i < length; i++ ) {
	                retVal = !!callback( elems[ i ], i );
	                if ( inv !== retVal ) {
	                    ret.push( elems[ i ] );
	                }
	            }
	
	            return ret;
	        },
	
	        // arg is for internal usage only
	        map: function( elems, callback, arg ) {
	            var value,
	                i = 0,
	                length = elems.length,
	                isArray = isArraylike( elems ),
	                ret = [];
	
	            // Go through the array, translating each of the items to their
	            if ( isArray ) {
	                for ( ; i < length; i++ ) {
	                    value = callback( elems[ i ], i, arg );
	
	                    if ( value != null ) {
	                        ret[ ret.length ] = value;
	                    }
	                }
	
	                // Go through every key on the object,
	            } else {
	                for ( i in elems ) {
	                    value = callback( elems[ i ], i, arg );
	
	                    if ( value != null ) {
	                        ret[ ret.length ] = value;
	                    }
	                }
	            }
	
	            // Flatten any nested arrays
	            return core_concat.apply( [], ret );
	        },
	
	        // A global GUID counter for objects
	        guid: 1,
	
	        // Bind a function to a context, optionally partially applying any
	        // arguments.
	        proxy: function( fn, context ) {
	            var args, proxy, tmp;
	
	            if ( typeof context === "string" ) {
	                tmp = fn[ context ];
	                context = fn;
	                fn = tmp;
	            }
	
	            // Quick check to determine if target is callable, in the spec
	            // this throws a TypeError, but we will just return undefined.
	            if ( !jQuery.isFunction( fn ) ) {
	                return undefined;
	            }
	
	            // Simulated bind
	            args = core_slice.call( arguments, 2 );
	            proxy = function() {
	                return fn.apply( context || this, args.concat( core_slice.call( arguments ) ) );
	            };
	
	            // Set the guid of unique handler to the same of original handler, so it can be removed
	            proxy.guid = fn.guid = fn.guid || jQuery.guid++;
	
	            return proxy;
	        },
	
	        // Multifunctional method to get and set values of a collection
	        // The value/s can optionally be executed if it's a function
	        access: function( elems, fn, key, value, chainable, emptyGet, raw ) {
	            var i = 0,
	                length = elems.length,
	                bulk = key == null;
	
	            // Sets many values
	            if ( jQuery.type( key ) === "object" ) {
	                chainable = true;
	                for ( i in key ) {
	                    jQuery.access( elems, fn, i, key[i], true, emptyGet, raw );
	                }
	
	                // Sets one value
	            } else if ( value !== undefined ) {
	                chainable = true;
	
	                if ( !jQuery.isFunction( value ) ) {
	                    raw = true;
	                }
	
	                if ( bulk ) {
	                    // Bulk operations run against the entire set
	                    if ( raw ) {
	                        fn.call( elems, value );
	                        fn = null;
	
	                        // ...except when executing function values
	                    } else {
	                        bulk = fn;
	                        fn = function( elem, key, value ) {
	                            return bulk.call( jQuery( elem ), value );
	                        };
	                    }
	                }
	
	                if ( fn ) {
	                    for ( ; i < length; i++ ) {
	                        fn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );
	                    }
	                }
	            }
	
	            return chainable ?
	                elems :
	
	                // Gets
	                bulk ?
	                    fn.call( elems ) :
	                    length ? fn( elems[0], key ) : emptyGet;
	        },
	
	        now: function() {
	            return ( new Date() ).getTime();
	        },
	
	        // A method for quickly swapping in/out CSS properties to get correct calculations.
	        // Note: this method belongs to the css module but it's needed here for the support module.
	        // If support gets modularized, this method should be moved back to the css module.
	        swap: function( elem, options, callback, args ) {
	            var ret, name,
	                old = {};
	
	            // Remember the old values, and insert the new ones
	            for ( name in options ) {
	                old[ name ] = elem.style[ name ];
	                elem.style[ name ] = options[ name ];
	            }
	
	            ret = callback.apply( elem, args || [] );
	
	            // Revert the old values
	            for ( name in options ) {
	                elem.style[ name ] = old[ name ];
	            }
	
	            return ret;
	        }
	    });
	
	    jQuery.ready.promise = function( obj ) {
	        if ( !readyList ) {
	
	            readyList = jQuery.Deferred();
	
	            // Catch cases where $(document).ready() is called after the browser event has already occurred.
	            // we once tried to use readyState "interactive" here, but it caused issues like the one
	            // discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
	            if ( document.readyState === "complete" ) {
	                // Handle it asynchronously to allow scripts the opportunity to delay ready
	                setTimeout( jQuery.ready );
	
	                // Standards-based browsers support DOMContentLoaded
	            } else if ( document.addEventListener ) {
	                // Use the handy event callback
	                document.addEventListener( "DOMContentLoaded", completed, false );
	
	                // A fallback to window.onload, that will always work
	                window.addEventListener( "load", completed, false );
	
	                // If IE event model is used
	            } else {
	                // Ensure firing before onload, maybe late but safe also for iframes
	                document.attachEvent( "onreadystatechange", completed );
	
	                // A fallback to window.onload, that will always work
	                window.attachEvent( "onload", completed );
	
	                // If IE and not a frame
	                // continually check to see if the document is ready
	                var top = false;
	
	                try {
	                    top = window.frameElement == null && document.documentElement;
	                } catch(e) {}
	
	                if ( top && top.doScroll ) {
	                    (function doScrollCheck() {
	                        if ( !jQuery.isReady ) {
	
	                            try {
	                                // Use the trick by Diego Perini
	                                // http://javascript.nwbox.com/IEContentLoaded/
	                                top.doScroll("left");
	                            } catch(e) {
	                                return setTimeout( doScrollCheck, 50 );
	                            }
	
	                            // detach all dom ready events
	                            detach();
	
	                            // and execute any waiting functions
	                            jQuery.ready();
	                        }
	                    })();
	                }
	            }
	        }
	        return readyList.promise( obj );
	    };
	
	// Populate the class2type map
	    jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
	        class2type[ "[object " + name + "]" ] = name.toLowerCase();
	    });
	
	    function isArraylike( obj ) {
	        var length = obj.length,
	            type = jQuery.type( obj );
	
	        if ( jQuery.isWindow( obj ) ) {
	            return false;
	        }
	
	        if ( obj.nodeType === 1 && length ) {
	            return true;
	        }
	
	        return type === "array" || type !== "function" &&
	            ( length === 0 ||
	            typeof length === "number" && length > 0 && ( length - 1 ) in obj );
	    }
	
	// All jQuery objects should point back to these
	    rootjQuery = jQuery(document);
	    /*!
	     * Sizzle CSS Selector Engine v1.10.2
	     * http://sizzlejs.com/
	     *
	     * Copyright 2013 jQuery Foundation, Inc. and other contributors
	     * Released under the MIT license
	     * http://jquery.org/license
	     *
	     * Date: 2013-07-03
	     */
	    (function( window, undefined ) {
	
	        var i,
	            support,
	            cachedruns,
	            Expr,
	            getText,
	            isXML,
	            compile,
	            outermostContext,
	            sortInput,
	
	        // Local document vars
	            setDocument,
	            document,
	            docElem,
	            documentIsHTML,
	            rbuggyQSA,
	            rbuggyMatches,
	            matches,
	            contains,
	
	        // Instance-specific data
	            expando = "sizzle" + -(new Date()),
	            preferredDoc = window.document,
	            dirruns = 0,
	            done = 0,
	            classCache = createCache(),
	            tokenCache = createCache(),
	            compilerCache = createCache(),
	            hasDuplicate = false,
	            sortOrder = function( a, b ) {
	                if ( a === b ) {
	                    hasDuplicate = true;
	                    return 0;
	                }
	                return 0;
	            },
	
	        // General-purpose constants
	            strundefined = typeof undefined,
	            MAX_NEGATIVE = 1 << 31,
	
	        // Instance methods
	            hasOwn = ({}).hasOwnProperty,
	            arr = [],
	            pop = arr.pop,
	            push_native = arr.push,
	            push = arr.push,
	            slice = arr.slice,
	        // Use a stripped-down indexOf if we can't use a native one
	            indexOf = arr.indexOf || function( elem ) {
	                    var i = 0,
	                        len = this.length;
	                    for ( ; i < len; i++ ) {
	                        if ( this[i] === elem ) {
	                            return i;
	                        }
	                    }
	                    return -1;
	                },
	
	            booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
	
	        // Regular expressions
	
	        // Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace
	            whitespace = "[\\x20\\t\\r\\n\\f]",
	        // http://www.w3.org/TR/css3-syntax/#characters
	            characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
	
	        // Loosely modeled on CSS identifier characters
	        // An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors
	        // Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
	            identifier = characterEncoding.replace( "w", "w#" ),
	
	        // Acceptable operators http://www.w3.org/TR/selectors/#attribute-selectors
	            attributes = "\\[" + whitespace + "*(" + characterEncoding + ")" + whitespace +
	                "*(?:([*^$|!~]?=)" + whitespace + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + identifier + ")|)|)" + whitespace + "*\\]",
	
	        // Prefer arguments quoted,
	        //   then not containing pseudos/brackets,
	        //   then attribute selectors/non-parenthetical expressions,
	        //   then anything else
	        // These preferences are here to reduce the number of selectors
	        //   needing tokenize in the PSEUDO preFilter
	            pseudos = ":(" + characterEncoding + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + attributes.replace( 3, 8 ) + ")*)|.*)\\)|)",
	
	        // Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	            rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),
	
	            rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	            rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),
	
	            rsibling = new RegExp( whitespace + "*[+~]" ),
	            rattributeQuotes = new RegExp( "=" + whitespace + "*([^\\]'\"]*)" + whitespace + "*\\]", "g" ),
	
	            rpseudo = new RegExp( pseudos ),
	            ridentifier = new RegExp( "^" + identifier + "$" ),
	
	            matchExpr = {
	                "ID": new RegExp( "^#(" + characterEncoding + ")" ),
	                "CLASS": new RegExp( "^\\.(" + characterEncoding + ")" ),
	                "TAG": new RegExp( "^(" + characterEncoding.replace( "w", "w*" ) + ")" ),
	                "ATTR": new RegExp( "^" + attributes ),
	                "PSEUDO": new RegExp( "^" + pseudos ),
	                "CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
	                    "*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
	                    "*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
	                "bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
	                // For use in libraries implementing .is()
	                // We use this for POS matching in `select`
	                "needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
	                    whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	            },
	
	            rnative = /^[^{]+\{\s*\[native \w/,
	
	        // Easily-parseable/retrievable ID or TAG or CLASS selectors
	            rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
	
	            rinputs = /^(?:input|select|textarea|button)$/i,
	            rheader = /^h\d$/i,
	
	            rescape = /'|\\/g,
	
	        // CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	            runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
	            funescape = function( _, escaped, escapedWhitespace ) {
	                var high = "0x" + escaped - 0x10000;
	                // NaN means non-codepoint
	                // Support: Firefox
	                // Workaround erroneous numeric interpretation of +"0x"
	                return high !== high || escapedWhitespace ?
	                    escaped :
	                    // BMP codepoint
	                    high < 0 ?
	                        String.fromCharCode( high + 0x10000 ) :
	                        // Supplemental Plane codepoint (surrogate pair)
	                        String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	            };
	
	// Optimize for push.apply( _, NodeList )
	        try {
	            push.apply(
	                (arr = slice.call( preferredDoc.childNodes )),
	                preferredDoc.childNodes
	            );
	            // Support: Android<4.0
	            // Detect silently failing push.apply
	            arr[ preferredDoc.childNodes.length ].nodeType;
	        } catch ( e ) {
	            push = { apply: arr.length ?
	
	                // Leverage slice if possible
	                function( target, els ) {
	                    push_native.apply( target, slice.call(els) );
	                } :
	
	                // Support: IE<9
	                // Otherwise append directly
	                function( target, els ) {
	                    var j = target.length,
	                        i = 0;
	                    // Can't trust NodeList.length
	                    while ( (target[j++] = els[i++]) ) {}
	                    target.length = j - 1;
	                }
	            };
	        }
	
	        function Sizzle( selector, context, results, seed ) {
	            var match, elem, m, nodeType,
	            // QSA vars
	                i, groups, old, nid, newContext, newSelector;
	
	            if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
	                setDocument( context );
	            }
	
	            context = context || document;
	            results = results || [];
	
	            if ( !selector || typeof selector !== "string" ) {
	                return results;
	            }
	
	            if ( (nodeType = context.nodeType) !== 1 && nodeType !== 9 ) {
	                return [];
	            }
	
	            if ( documentIsHTML && !seed ) {
	
	                // Shortcuts
	                if ( (match = rquickExpr.exec( selector )) ) {
	                    // Speed-up: Sizzle("#ID")
	                    if ( (m = match[1]) ) {
	                        if ( nodeType === 9 ) {
	                            elem = context.getElementById( m );
	                            // Check parentNode to catch when Blackberry 4.6 returns
	                            // nodes that are no longer in the document #6963
	                            if ( elem && elem.parentNode ) {
	                                // Handle the case where IE, Opera, and Webkit return items
	                                // by name instead of ID
	                                if ( elem.id === m ) {
	                                    results.push( elem );
	                                    return results;
	                                }
	                            } else {
	                                return results;
	                            }
	                        } else {
	                            // Context is not a document
	                            if ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&
	                                contains( context, elem ) && elem.id === m ) {
	                                results.push( elem );
	                                return results;
	                            }
	                        }
	
	                        // Speed-up: Sizzle("TAG")
	                    } else if ( match[2] ) {
	                        push.apply( results, context.getElementsByTagName( selector ) );
	                        return results;
	
	                        // Speed-up: Sizzle(".CLASS")
	                    } else if ( (m = match[3]) && support.getElementsByClassName && context.getElementsByClassName ) {
	                        push.apply( results, context.getElementsByClassName( m ) );
	                        return results;
	                    }
	                }
	
	                // QSA path
	                if ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {
	                    nid = old = expando;
	                    newContext = context;
	                    newSelector = nodeType === 9 && selector;
	
	                    // qSA works strangely on Element-rooted queries
	                    // We can work around this by specifying an extra ID on the root
	                    // and working up from there (Thanks to Andrew Dupont for the technique)
	                    // IE 8 doesn't work on object elements
	                    if ( nodeType === 1 && context.nodeName.toLowerCase() !== "object" ) {
	                        groups = tokenize( selector );
	
	                        if ( (old = context.getAttribute("id")) ) {
	                            nid = old.replace( rescape, "\\$&" );
	                        } else {
	                            context.setAttribute( "id", nid );
	                        }
	                        nid = "[id='" + nid + "'] ";
	
	                        i = groups.length;
	                        while ( i-- ) {
	                            groups[i] = nid + toSelector( groups[i] );
	                        }
	                        newContext = rsibling.test( selector ) && context.parentNode || context;
	                        newSelector = groups.join(",");
	                    }
	
	                    if ( newSelector ) {
	                        try {
	                            push.apply( results,
	                                newContext.querySelectorAll( newSelector )
	                            );
	                            return results;
	                        } catch(qsaError) {
	                        } finally {
	                            if ( !old ) {
	                                context.removeAttribute("id");
	                            }
	                        }
	                    }
	                }
	            }
	
	            // All others
	            return select( selector.replace( rtrim, "$1" ), context, results, seed );
	        }
	
	        /**
	         * Create key-value caches of limited size
	         * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
	         *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
	         *	deleting the oldest entry
	         */
	        function createCache() {
	            var keys = [];
	
	            function cache( key, value ) {
	                // Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
	                if ( keys.push( key += " " ) > Expr.cacheLength ) {
	                    // Only keep the most recent entries
	                    delete cache[ keys.shift() ];
	                }
	                return (cache[ key ] = value);
	            }
	            return cache;
	        }
	
	        /**
	         * Mark a function for special use by Sizzle
	         * @param {Function} fn The function to mark
	         */
	        function markFunction( fn ) {
	            fn[ expando ] = true;
	            return fn;
	        }
	
	        /**
	         * Support testing using an element
	         * @param {Function} fn Passed the created div and expects a boolean result
	         */
	        function assert( fn ) {
	            var div = document.createElement("div");
	
	            try {
	                return !!fn( div );
	            } catch (e) {
	                return false;
	            } finally {
	                // Remove from its parent by default
	                if ( div.parentNode ) {
	                    div.parentNode.removeChild( div );
	                }
	                // release memory in IE
	                div = null;
	            }
	        }
	
	        /**
	         * Adds the same handler for all of the specified attrs
	         * @param {String} attrs Pipe-separated list of attributes
	         * @param {Function} handler The method that will be applied
	         */
	        function addHandle( attrs, handler ) {
	            var arr = attrs.split("|"),
	                i = attrs.length;
	
	            while ( i-- ) {
	                Expr.attrHandle[ arr[i] ] = handler;
	            }
	        }
	
	        /**
	         * Checks document order of two siblings
	         * @param {Element} a
	         * @param {Element} b
	         * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
	         */
	        function siblingCheck( a, b ) {
	            var cur = b && a,
	                diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
	                    ( ~b.sourceIndex || MAX_NEGATIVE ) -
	                    ( ~a.sourceIndex || MAX_NEGATIVE );
	
	            // Use IE sourceIndex if available on both nodes
	            if ( diff ) {
	                return diff;
	            }
	
	            // Check if b follows a
	            if ( cur ) {
	                while ( (cur = cur.nextSibling) ) {
	                    if ( cur === b ) {
	                        return -1;
	                    }
	                }
	            }
	
	            return a ? 1 : -1;
	        }
	
	        /**
	         * Returns a function to use in pseudos for input types
	         * @param {String} type
	         */
	        function createInputPseudo( type ) {
	            return function( elem ) {
	                var name = elem.nodeName.toLowerCase();
	                return name === "input" && elem.type === type;
	            };
	        }
	
	        /**
	         * Returns a function to use in pseudos for buttons
	         * @param {String} type
	         */
	        function createButtonPseudo( type ) {
	            return function( elem ) {
	                var name = elem.nodeName.toLowerCase();
	                return (name === "input" || name === "button") && elem.type === type;
	            };
	        }
	
	        /**
	         * Returns a function to use in pseudos for positionals
	         * @param {Function} fn
	         */
	        function createPositionalPseudo( fn ) {
	            return markFunction(function( argument ) {
	                argument = +argument;
	                return markFunction(function( seed, matches ) {
	                    var j,
	                        matchIndexes = fn( [], seed.length, argument ),
	                        i = matchIndexes.length;
	
	                    // Match elements found at the specified indexes
	                    while ( i-- ) {
	                        if ( seed[ (j = matchIndexes[i]) ] ) {
	                            seed[j] = !(matches[j] = seed[j]);
	                        }
	                    }
	                });
	            });
	        }
	
	        /**
	         * Detect xml
	         * @param {Element|Object} elem An element or a document
	         */
	        isXML = Sizzle.isXML = function( elem ) {
	            // documentElement is verified for cases where it doesn't yet exist
	            // (such as loading iframes in IE - #4833)
	            var documentElement = elem && (elem.ownerDocument || elem).documentElement;
	            return documentElement ? documentElement.nodeName !== "HTML" : false;
	        };
	
	// Expose support vars for convenience
	        support = Sizzle.support = {};
	
	        /**
	         * Sets document-related variables once based on the current document
	         * @param {Element|Object} [doc] An element or document object to use to set the document
	         * @returns {Object} Returns the current document
	         */
	        setDocument = Sizzle.setDocument = function( node ) {
	            var doc = node ? node.ownerDocument || node : preferredDoc,
	                parent = doc.defaultView;
	
	            // If no document and documentElement is available, return
	            if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
	                return document;
	            }
	
	            // Set our document
	            document = doc;
	            docElem = doc.documentElement;
	
	            // Support tests
	            documentIsHTML = !isXML( doc );
	
	            // Support: IE>8
	            // If iframe document is assigned to "document" variable and if iframe has been reloaded,
	            // IE will throw "permission denied" error when accessing "document" variable, see jQuery #13936
	            // IE6-8 do not support the defaultView property so parent will be undefined
	            if ( parent && parent.attachEvent && parent !== parent.top ) {
	                parent.attachEvent( "onbeforeunload", function() {
	                    setDocument();
	                });
	            }
	
	            /* Attributes
	             ---------------------------------------------------------------------- */
	
	            // Support: IE<8
	            // Verify that getAttribute really returns attributes and not properties (excepting IE8 booleans)
	            support.attributes = assert(function( div ) {
	                div.className = "i";
	                return !div.getAttribute("className");
	            });
	
	            /* getElement(s)By*
	             ---------------------------------------------------------------------- */
	
	            // Check if getElementsByTagName("*") returns only elements
	            support.getElementsByTagName = assert(function( div ) {
	                div.appendChild( doc.createComment("") );
	                return !div.getElementsByTagName("*").length;
	            });
	
	            // Check if getElementsByClassName can be trusted
	            support.getElementsByClassName = assert(function( div ) {
	                div.innerHTML = "<div class='a'></div><div class='a i'></div>";
	
	                // Support: Safari<4
	                // Catch class over-caching
	                div.firstChild.className = "i";
	                // Support: Opera<10
	                // Catch gEBCN failure to find non-leading classes
	                return div.getElementsByClassName("i").length === 2;
	            });
	
	            // Support: IE<10
	            // Check if getElementById returns elements by name
	            // The broken getElementById methods don't pick up programatically-set names,
	            // so use a roundabout getElementsByName test
	            support.getById = assert(function( div ) {
	                docElem.appendChild( div ).id = expando;
	                return !doc.getElementsByName || !doc.getElementsByName( expando ).length;
	            });
	
	            // ID find and filter
	            if ( support.getById ) {
	                Expr.find["ID"] = function( id, context ) {
	                    if ( typeof context.getElementById !== strundefined && documentIsHTML ) {
	                        var m = context.getElementById( id );
	                        // Check parentNode to catch when Blackberry 4.6 returns
	                        // nodes that are no longer in the document #6963
	                        return m && m.parentNode ? [m] : [];
	                    }
	                };
	                Expr.filter["ID"] = function( id ) {
	                    var attrId = id.replace( runescape, funescape );
	                    return function( elem ) {
	                        return elem.getAttribute("id") === attrId;
	                    };
	                };
	            } else {
	                // Support: IE6/7
	                // getElementById is not reliable as a find shortcut
	                delete Expr.find["ID"];
	
	                Expr.filter["ID"] =  function( id ) {
	                    var attrId = id.replace( runescape, funescape );
	                    return function( elem ) {
	                        var node = typeof elem.getAttributeNode !== strundefined && elem.getAttributeNode("id");
	                        return node && node.value === attrId;
	                    };
	                };
	            }
	
	            // Tag
	            Expr.find["TAG"] = support.getElementsByTagName ?
	                function( tag, context ) {
	                    if ( typeof context.getElementsByTagName !== strundefined ) {
	                        return context.getElementsByTagName( tag );
	                    }
	                } :
	                function( tag, context ) {
	                    var elem,
	                        tmp = [],
	                        i = 0,
	                        results = context.getElementsByTagName( tag );
	
	                    // Filter out possible comments
	                    if ( tag === "*" ) {
	                        while ( (elem = results[i++]) ) {
	                            if ( elem.nodeType === 1 ) {
	                                tmp.push( elem );
	                            }
	                        }
	
	                        return tmp;
	                    }
	                    return results;
	                };
	
	            // Class
	            Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
	                    if ( typeof context.getElementsByClassName !== strundefined && documentIsHTML ) {
	                        return context.getElementsByClassName( className );
	                    }
	                };
	
	            /* QSA/matchesSelector
	             ---------------------------------------------------------------------- */
	
	            // QSA and matchesSelector support
	
	            // matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	            rbuggyMatches = [];
	
	            // qSa(:focus) reports false when true (Chrome 21)
	            // We allow this because of a bug in IE8/9 that throws an error
	            // whenever `document.activeElement` is accessed on an iframe
	            // So, we allow :focus to pass through QSA all the time to avoid the IE error
	            // See http://bugs.jquery.com/ticket/13378
	            rbuggyQSA = [];
	
	            if ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {
	                // Build QSA regex
	                // Regex strategy adopted from Diego Perini
	                assert(function( div ) {
	                    // Select is set to empty string on purpose
	                    // This is to test IE's treatment of not explicitly
	                    // setting a boolean content attribute,
	                    // since its presence should be enough
	                    // http://bugs.jquery.com/ticket/12359
	                    div.innerHTML = "<select><option selected=''></option></select>";
	
	                    // Support: IE8
	                    // Boolean attributes and "value" are not treated correctly
	                    if ( !div.querySelectorAll("[selected]").length ) {
	                        rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
	                    }
	
	                    // Webkit/Opera - :checked should return selected option elements
	                    // http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
	                    // IE8 throws error here and will not see later tests
	                    if ( !div.querySelectorAll(":checked").length ) {
	                        rbuggyQSA.push(":checked");
	                    }
	                });
	
	                assert(function( div ) {
	
	                    // Support: Opera 10-12/IE8
	                    // ^= $= *= and empty values
	                    // Should not select anything
	                    // Support: Windows 8 Native Apps
	                    // The type attribute is restricted during .innerHTML assignment
	                    var input = doc.createElement("input");
	                    input.setAttribute( "type", "hidden" );
	                    div.appendChild( input ).setAttribute( "t", "" );
	
	                    if ( div.querySelectorAll("[t^='']").length ) {
	                        rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
	                    }
	
	                    // FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
	                    // IE8 throws error here and will not see later tests
	                    if ( !div.querySelectorAll(":enabled").length ) {
	                        rbuggyQSA.push( ":enabled", ":disabled" );
	                    }
	
	                    // Opera 10-11 does not throw on post-comma invalid pseudos
	                    div.querySelectorAll("*,:x");
	                    rbuggyQSA.push(",.*:");
	                });
	            }
	
	            if ( (support.matchesSelector = rnative.test( (matches = docElem.webkitMatchesSelector ||
	                    docElem.mozMatchesSelector ||
	                    docElem.oMatchesSelector ||
	                    docElem.msMatchesSelector) )) ) {
	
	                assert(function( div ) {
	                    // Check to see if it's possible to do matchesSelector
	                    // on a disconnected node (IE 9)
	                    support.disconnectedMatch = matches.call( div, "div" );
	
	                    // This should fail with an exception
	                    // Gecko does not error, returns false instead
	                    matches.call( div, "[s!='']:x" );
	                    rbuggyMatches.push( "!=", pseudos );
	                });
	            }
	
	            rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
	            rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );
	
	            /* Contains
	             ---------------------------------------------------------------------- */
	
	            // Element contains another
	            // Purposefully does not implement inclusive descendent
	            // As in, an element does not contain itself
	            contains = rnative.test( docElem.contains ) || docElem.compareDocumentPosition ?
	                function( a, b ) {
	                    var adown = a.nodeType === 9 ? a.documentElement : a,
	                        bup = b && b.parentNode;
	                    return a === bup || !!( bup && bup.nodeType === 1 && (
	                            adown.contains ?
	                                adown.contains( bup ) :
	                            a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
	                        ));
	                } :
	                function( a, b ) {
	                    if ( b ) {
	                        while ( (b = b.parentNode) ) {
	                            if ( b === a ) {
	                                return true;
	                            }
	                        }
	                    }
	                    return false;
	                };
	
	            /* Sorting
	             ---------------------------------------------------------------------- */
	
	            // Document order sorting
	            sortOrder = docElem.compareDocumentPosition ?
	                function( a, b ) {
	
	                    // Flag for duplicate removal
	                    if ( a === b ) {
	                        hasDuplicate = true;
	                        return 0;
	                    }
	
	                    var compare = b.compareDocumentPosition && a.compareDocumentPosition && a.compareDocumentPosition( b );
	
	                    if ( compare ) {
	                        // Disconnected nodes
	                        if ( compare & 1 ||
	                            (!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {
	
	                            // Choose the first element that is related to our preferred document
	                            if ( a === doc || contains(preferredDoc, a) ) {
	                                return -1;
	                            }
	                            if ( b === doc || contains(preferredDoc, b) ) {
	                                return 1;
	                            }
	
	                            // Maintain original order
	                            return sortInput ?
	                                ( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :
	                                0;
	                        }
	
	                        return compare & 4 ? -1 : 1;
	                    }
	
	                    // Not directly comparable, sort on existence of method
	                    return a.compareDocumentPosition ? -1 : 1;
	                } :
	                function( a, b ) {
	                    var cur,
	                        i = 0,
	                        aup = a.parentNode,
	                        bup = b.parentNode,
	                        ap = [ a ],
	                        bp = [ b ];
	
	                    // Exit early if the nodes are identical
	                    if ( a === b ) {
	                        hasDuplicate = true;
	                        return 0;
	
	                        // Parentless nodes are either documents or disconnected
	                    } else if ( !aup || !bup ) {
	                        return a === doc ? -1 :
	                            b === doc ? 1 :
	                                aup ? -1 :
	                                    bup ? 1 :
	                                        sortInput ?
	                                            ( indexOf.call( sortInput, a ) - indexOf.call( sortInput, b ) ) :
	                                            0;
	
	                        // If the nodes are siblings, we can do a quick check
	                    } else if ( aup === bup ) {
	                        return siblingCheck( a, b );
	                    }
	
	                    // Otherwise we need full lists of their ancestors for comparison
	                    cur = a;
	                    while ( (cur = cur.parentNode) ) {
	                        ap.unshift( cur );
	                    }
	                    cur = b;
	                    while ( (cur = cur.parentNode) ) {
	                        bp.unshift( cur );
	                    }
	
	                    // Walk down the tree looking for a discrepancy
	                    while ( ap[i] === bp[i] ) {
	                        i++;
	                    }
	
	                    return i ?
	                        // Do a sibling check if the nodes have a common ancestor
	                        siblingCheck( ap[i], bp[i] ) :
	
	                        // Otherwise nodes in our document sort first
	                        ap[i] === preferredDoc ? -1 :
	                            bp[i] === preferredDoc ? 1 :
	                                0;
	                };
	
	            return doc;
	        };
	
	        Sizzle.matches = function( expr, elements ) {
	            return Sizzle( expr, null, null, elements );
	        };
	
	        Sizzle.matchesSelector = function( elem, expr ) {
	            // Set document vars if needed
	            if ( ( elem.ownerDocument || elem ) !== document ) {
	                setDocument( elem );
	            }
	
	            // Make sure that attribute selectors are quoted
	            expr = expr.replace( rattributeQuotes, "='$1']" );
	
	            if ( support.matchesSelector && documentIsHTML &&
	                ( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
	                ( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {
	
	                try {
	                    var ret = matches.call( elem, expr );
	
	                    // IE 9's matchesSelector returns false on disconnected nodes
	                    if ( ret || support.disconnectedMatch ||
	                        // As well, disconnected nodes are said to be in a document
	                        // fragment in IE 9
	                        elem.document && elem.document.nodeType !== 11 ) {
	                        return ret;
	                    }
	                } catch(e) {}
	            }
	
	            return Sizzle( expr, document, null, [elem] ).length > 0;
	        };
	
	        Sizzle.contains = function( context, elem ) {
	            // Set document vars if needed
	            if ( ( context.ownerDocument || context ) !== document ) {
	                setDocument( context );
	            }
	            return contains( context, elem );
	        };
	
	        Sizzle.attr = function( elem, name ) {
	            // Set document vars if needed
	            if ( ( elem.ownerDocument || elem ) !== document ) {
	                setDocument( elem );
	            }
	
	            var fn = Expr.attrHandle[ name.toLowerCase() ],
	            // Don't get fooled by Object.prototype properties (jQuery #13807)
	                val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
	                    fn( elem, name, !documentIsHTML ) :
	                    undefined;
	
	            return val === undefined ?
	                support.attributes || !documentIsHTML ?
	                    elem.getAttribute( name ) :
	                    (val = elem.getAttributeNode(name)) && val.specified ?
	                        val.value :
	                        null :
	                val;
	        };
	
	        Sizzle.error = function( msg ) {
	            throw new Error( "Syntax error, unrecognized expression: " + msg );
	        };
	
	        /**
	         * Document sorting and removing duplicates
	         * @param {ArrayLike} results
	         */
	        Sizzle.uniqueSort = function( results ) {
	            var elem,
	                duplicates = [],
	                j = 0,
	                i = 0;
	
	            // Unless we *know* we can detect duplicates, assume their presence
	            hasDuplicate = !support.detectDuplicates;
	            sortInput = !support.sortStable && results.slice( 0 );
	            results.sort( sortOrder );
	
	            if ( hasDuplicate ) {
	                while ( (elem = results[i++]) ) {
	                    if ( elem === results[ i ] ) {
	                        j = duplicates.push( i );
	                    }
	                }
	                while ( j-- ) {
	                    results.splice( duplicates[ j ], 1 );
	                }
	            }
	
	            return results;
	        };
	
	        /**
	         * Utility function for retrieving the text value of an array of DOM nodes
	         * @param {Array|Element} elem
	         */
	        getText = Sizzle.getText = function( elem ) {
	            var node,
	                ret = "",
	                i = 0,
	                nodeType = elem.nodeType;
	
	            if ( !nodeType ) {
	                // If no nodeType, this is expected to be an array
	                for ( ; (node = elem[i]); i++ ) {
	                    // Do not traverse comment nodes
	                    ret += getText( node );
	                }
	            } else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
	                // Use textContent for elements
	                // innerText usage removed for consistency of new lines (see #11153)
	                if ( typeof elem.textContent === "string" ) {
	                    return elem.textContent;
	                } else {
	                    // Traverse its children
	                    for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
	                        ret += getText( elem );
	                    }
	                }
	            } else if ( nodeType === 3 || nodeType === 4 ) {
	                return elem.nodeValue;
	            }
	            // Do not include comment or processing instruction nodes
	
	            return ret;
	        };
	
	        Expr = Sizzle.selectors = {
	
	            // Can be adjusted by the user
	            cacheLength: 50,
	
	            createPseudo: markFunction,
	
	            match: matchExpr,
	
	            attrHandle: {},
	
	            find: {},
	
	            relative: {
	                ">": { dir: "parentNode", first: true },
	                " ": { dir: "parentNode" },
	                "+": { dir: "previousSibling", first: true },
	                "~": { dir: "previousSibling" }
	            },
	
	            preFilter: {
	                "ATTR": function( match ) {
	                    match[1] = match[1].replace( runescape, funescape );
	
	                    // Move the given value to match[3] whether quoted or unquoted
	                    match[3] = ( match[4] || match[5] || "" ).replace( runescape, funescape );
	
	                    if ( match[2] === "~=" ) {
	                        match[3] = " " + match[3] + " ";
	                    }
	
	                    return match.slice( 0, 4 );
	                },
	
	                "CHILD": function( match ) {
	                    /* matches from matchExpr["CHILD"]
	                     1 type (only|nth|...)
	                     2 what (child|of-type)
	                     3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
	                     4 xn-component of xn+y argument ([+-]?\d*n|)
	                     5 sign of xn-component
	                     6 x of xn-component
	                     7 sign of y-component
	                     8 y of y-component
	                     */
	                    match[1] = match[1].toLowerCase();
	
	                    if ( match[1].slice( 0, 3 ) === "nth" ) {
	                        // nth-* requires argument
	                        if ( !match[3] ) {
	                            Sizzle.error( match[0] );
	                        }
	
	                        // numeric x and y parameters for Expr.filter.CHILD
	                        // remember that false/true cast respectively to 0/1
	                        match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
	                        match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );
	
	                        // other types prohibit arguments
	                    } else if ( match[3] ) {
	                        Sizzle.error( match[0] );
	                    }
	
	                    return match;
	                },
	
	                "PSEUDO": function( match ) {
	                    var excess,
	                        unquoted = !match[5] && match[2];
	
	                    if ( matchExpr["CHILD"].test( match[0] ) ) {
	                        return null;
	                    }
	
	                    // Accept quoted arguments as-is
	                    if ( match[3] && match[4] !== undefined ) {
	                        match[2] = match[4];
	
	                        // Strip excess characters from unquoted arguments
	                    } else if ( unquoted && rpseudo.test( unquoted ) &&
	                        // Get excess from tokenize (recursively)
	                        (excess = tokenize( unquoted, true )) &&
	                        // advance to the next closing parenthesis
	                        (excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {
	
	                        // excess is a negative index
	                        match[0] = match[0].slice( 0, excess );
	                        match[2] = unquoted.slice( 0, excess );
	                    }
	
	                    // Return only captures needed by the pseudo filter method (type and argument)
	                    return match.slice( 0, 3 );
	                }
	            },
	
	            filter: {
	
	                "TAG": function( nodeNameSelector ) {
	                    var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
	                    return nodeNameSelector === "*" ?
	                        function() { return true; } :
	                        function( elem ) {
	                            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
	                        };
	                },
	
	                "CLASS": function( className ) {
	                    var pattern = classCache[ className + " " ];
	
	                    return pattern ||
	                        (pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
	                        classCache( className, function( elem ) {
	                            return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute("class") || "" );
	                        });
	                },
	
	                "ATTR": function( name, operator, check ) {
	                    return function( elem ) {
	                        var result = Sizzle.attr( elem, name );
	
	                        if ( result == null ) {
	                            return operator === "!=";
	                        }
	                        if ( !operator ) {
	                            return true;
	                        }
	
	                        result += "";
	
	                        return operator === "=" ? result === check :
	                            operator === "!=" ? result !== check :
	                                operator === "^=" ? check && result.indexOf( check ) === 0 :
	                                    operator === "*=" ? check && result.indexOf( check ) > -1 :
	                                        operator === "$=" ? check && result.slice( -check.length ) === check :
	                                            operator === "~=" ? ( " " + result + " " ).indexOf( check ) > -1 :
	                                                operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
	                                                    false;
	                    };
	                },
	
	                "CHILD": function( type, what, argument, first, last ) {
	                    var simple = type.slice( 0, 3 ) !== "nth",
	                        forward = type.slice( -4 ) !== "last",
	                        ofType = what === "of-type";
	
	                    return first === 1 && last === 0 ?
	
	                        // Shortcut for :nth-*(n)
	                        function( elem ) {
	                            return !!elem.parentNode;
	                        } :
	
	                        function( elem, context, xml ) {
	                            var cache, outerCache, node, diff, nodeIndex, start,
	                                dir = simple !== forward ? "nextSibling" : "previousSibling",
	                                parent = elem.parentNode,
	                                name = ofType && elem.nodeName.toLowerCase(),
	                                useCache = !xml && !ofType;
	
	                            if ( parent ) {
	
	                                // :(first|last|only)-(child|of-type)
	                                if ( simple ) {
	                                    while ( dir ) {
	                                        node = elem;
	                                        while ( (node = node[ dir ]) ) {
	                                            if ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {
	                                                return false;
	                                            }
	                                        }
	                                        // Reverse direction for :only-* (if we haven't yet done so)
	                                        start = dir = type === "only" && !start && "nextSibling";
	                                    }
	                                    return true;
	                                }
	
	                                start = [ forward ? parent.firstChild : parent.lastChild ];
	
	                                // non-xml :nth-child(...) stores cache data on `parent`
	                                if ( forward && useCache ) {
	                                    // Seek `elem` from a previously-cached index
	                                    outerCache = parent[ expando ] || (parent[ expando ] = {});
	                                    cache = outerCache[ type ] || [];
	                                    nodeIndex = cache[0] === dirruns && cache[1];
	                                    diff = cache[0] === dirruns && cache[2];
	                                    node = nodeIndex && parent.childNodes[ nodeIndex ];
	
	                                    while ( (node = ++nodeIndex && node && node[ dir ] ||
	
	                                        // Fallback to seeking `elem` from the start
	                                        (diff = nodeIndex = 0) || start.pop()) ) {
	
	                                        // When found, cache indexes on `parent` and break
	                                        if ( node.nodeType === 1 && ++diff && node === elem ) {
	                                            outerCache[ type ] = [ dirruns, nodeIndex, diff ];
	                                            break;
	                                        }
	                                    }
	
	                                    // Use previously-cached element index if available
	                                } else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {
	                                    diff = cache[1];
	
	                                    // xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)
	                                } else {
	                                    // Use the same loop as above to seek `elem` from the start
	                                    while ( (node = ++nodeIndex && node && node[ dir ] ||
	                                        (diff = nodeIndex = 0) || start.pop()) ) {
	
	                                        if ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {
	                                            // Cache the index of each encountered element
	                                            if ( useCache ) {
	                                                (node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];
	                                            }
	
	                                            if ( node === elem ) {
	                                                break;
	                                            }
	                                        }
	                                    }
	                                }
	
	                                // Incorporate the offset, then check against cycle size
	                                diff -= last;
	                                return diff === first || ( diff % first === 0 && diff / first >= 0 );
	                            }
	                        };
	                },
	
	                "PSEUDO": function( pseudo, argument ) {
	                    // pseudo-class names are case-insensitive
	                    // http://www.w3.org/TR/selectors/#pseudo-classes
	                    // Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
	                    // Remember that setFilters inherits from pseudos
	                    var args,
	                        fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
	                            Sizzle.error( "unsupported pseudo: " + pseudo );
	
	                    // The user may use createPseudo to indicate that
	                    // arguments are needed to create the filter function
	                    // just as Sizzle does
	                    if ( fn[ expando ] ) {
	                        return fn( argument );
	                    }
	
	                    // But maintain support for old signatures
	                    if ( fn.length > 1 ) {
	                        args = [ pseudo, pseudo, "", argument ];
	                        return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
	                            markFunction(function( seed, matches ) {
	                                var idx,
	                                    matched = fn( seed, argument ),
	                                    i = matched.length;
	                                while ( i-- ) {
	                                    idx = indexOf.call( seed, matched[i] );
	                                    seed[ idx ] = !( matches[ idx ] = matched[i] );
	                                }
	                            }) :
	                            function( elem ) {
	                                return fn( elem, 0, args );
	                            };
	                    }
	
	                    return fn;
	                }
	            },
	
	            pseudos: {
	                // Potentially complex pseudos
	                "not": markFunction(function( selector ) {
	                    // Trim the selector passed to compile
	                    // to avoid treating leading and trailing
	                    // spaces as combinators
	                    var input = [],
	                        results = [],
	                        matcher = compile( selector.replace( rtrim, "$1" ) );
	
	                    return matcher[ expando ] ?
	                        markFunction(function( seed, matches, context, xml ) {
	                            var elem,
	                                unmatched = matcher( seed, null, xml, [] ),
	                                i = seed.length;
	
	                            // Match elements unmatched by `matcher`
	                            while ( i-- ) {
	                                if ( (elem = unmatched[i]) ) {
	                                    seed[i] = !(matches[i] = elem);
	                                }
	                            }
	                        }) :
	                        function( elem, context, xml ) {
	                            input[0] = elem;
	                            matcher( input, null, xml, results );
	                            return !results.pop();
	                        };
	                }),
	
	                "has": markFunction(function( selector ) {
	                    return function( elem ) {
	                        return Sizzle( selector, elem ).length > 0;
	                    };
	                }),
	
	                "contains": markFunction(function( text ) {
	                    return function( elem ) {
	                        return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
	                    };
	                }),
	
	                // "Whether an element is represented by a :lang() selector
	                // is based solely on the element's language value
	                // being equal to the identifier C,
	                // or beginning with the identifier C immediately followed by "-".
	                // The matching of C against the element's language value is performed case-insensitively.
	                // The identifier C does not have to be a valid language name."
	                // http://www.w3.org/TR/selectors/#lang-pseudo
	                "lang": markFunction( function( lang ) {
	                    // lang value must be a valid identifier
	                    if ( !ridentifier.test(lang || "") ) {
	                        Sizzle.error( "unsupported lang: " + lang );
	                    }
	                    lang = lang.replace( runescape, funescape ).toLowerCase();
	                    return function( elem ) {
	                        var elemLang;
	                        do {
	                            if ( (elemLang = documentIsHTML ?
	                                    elem.lang :
	                                elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {
	
	                                elemLang = elemLang.toLowerCase();
	                                return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
	                            }
	                        } while ( (elem = elem.parentNode) && elem.nodeType === 1 );
	                        return false;
	                    };
	                }),
	
	                // Miscellaneous
	                "target": function( elem ) {
	                    var hash = window.location && window.location.hash;
	                    return hash && hash.slice( 1 ) === elem.id;
	                },
	
	                "root": function( elem ) {
	                    return elem === docElem;
	                },
	
	                "focus": function( elem ) {
	                    return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
	                },
	
	                // Boolean properties
	                "enabled": function( elem ) {
	                    return elem.disabled === false;
	                },
	
	                "disabled": function( elem ) {
	                    return elem.disabled === true;
	                },
	
	                "checked": function( elem ) {
	                    // In CSS3, :checked should return both checked and selected elements
	                    // http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
	                    var nodeName = elem.nodeName.toLowerCase();
	                    return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
	                },
	
	                "selected": function( elem ) {
	                    // Accessing this property makes selected-by-default
	                    // options in Safari work properly
	                    if ( elem.parentNode ) {
	                        elem.parentNode.selectedIndex;
	                    }
	
	                    return elem.selected === true;
	                },
	
	                // Contents
	                "empty": function( elem ) {
	                    // http://www.w3.org/TR/selectors/#empty-pseudo
	                    // :empty is only affected by element nodes and content nodes(including text(3), cdata(4)),
	                    //   not comment, processing instructions, or others
	                    // Thanks to Diego Perini for the nodeName shortcut
	                    //   Greater than "@" means alpha characters (specifically not starting with "#" or "?")
	                    for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
	                        if ( elem.nodeName > "@" || elem.nodeType === 3 || elem.nodeType === 4 ) {
	                            return false;
	                        }
	                    }
	                    return true;
	                },
	
	                "parent": function( elem ) {
	                    return !Expr.pseudos["empty"]( elem );
	                },
	
	                // Element/input types
	                "header": function( elem ) {
	                    return rheader.test( elem.nodeName );
	                },
	
	                "input": function( elem ) {
	                    return rinputs.test( elem.nodeName );
	                },
	
	                "button": function( elem ) {
	                    var name = elem.nodeName.toLowerCase();
	                    return name === "input" && elem.type === "button" || name === "button";
	                },
	
	                "text": function( elem ) {
	                    var attr;
	                    // IE6 and 7 will map elem.type to 'text' for new HTML5 types (search, etc)
	                    // use getAttribute instead to test this case
	                    return elem.nodeName.toLowerCase() === "input" &&
	                        elem.type === "text" &&
	                        ( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === elem.type );
	                },
	
	                // Position-in-collection
	                "first": createPositionalPseudo(function() {
	                    return [ 0 ];
	                }),
	
	                "last": createPositionalPseudo(function( matchIndexes, length ) {
	                    return [ length - 1 ];
	                }),
	
	                "eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
	                    return [ argument < 0 ? argument + length : argument ];
	                }),
	
	                "even": createPositionalPseudo(function( matchIndexes, length ) {
	                    var i = 0;
	                    for ( ; i < length; i += 2 ) {
	                        matchIndexes.push( i );
	                    }
	                    return matchIndexes;
	                }),
	
	                "odd": createPositionalPseudo(function( matchIndexes, length ) {
	                    var i = 1;
	                    for ( ; i < length; i += 2 ) {
	                        matchIndexes.push( i );
	                    }
	                    return matchIndexes;
	                }),
	
	                "lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
	                    var i = argument < 0 ? argument + length : argument;
	                    for ( ; --i >= 0; ) {
	                        matchIndexes.push( i );
	                    }
	                    return matchIndexes;
	                }),
	
	                "gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
	                    var i = argument < 0 ? argument + length : argument;
	                    for ( ; ++i < length; ) {
	                        matchIndexes.push( i );
	                    }
	                    return matchIndexes;
	                })
	            }
	        };
	
	        Expr.pseudos["nth"] = Expr.pseudos["eq"];
	
	// Add button/input type pseudos
	        for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	            Expr.pseudos[ i ] = createInputPseudo( i );
	        }
	        for ( i in { submit: true, reset: true } ) {
	            Expr.pseudos[ i ] = createButtonPseudo( i );
	        }
	
	// Easy API for creating new setFilters
	        function setFilters() {}
	        setFilters.prototype = Expr.filters = Expr.pseudos;
	        Expr.setFilters = new setFilters();
	
	        function tokenize( selector, parseOnly ) {
	            var matched, match, tokens, type,
	                soFar, groups, preFilters,
	                cached = tokenCache[ selector + " " ];
	
	            if ( cached ) {
	                return parseOnly ? 0 : cached.slice( 0 );
	            }
	
	            soFar = selector;
	            groups = [];
	            preFilters = Expr.preFilter;
	
	            while ( soFar ) {
	
	                // Comma and first run
	                if ( !matched || (match = rcomma.exec( soFar )) ) {
	                    if ( match ) {
	                        // Don't consume trailing commas as valid
	                        soFar = soFar.slice( match[0].length ) || soFar;
	                    }
	                    groups.push( tokens = [] );
	                }
	
	                matched = false;
	
	                // Combinators
	                if ( (match = rcombinators.exec( soFar )) ) {
	                    matched = match.shift();
	                    tokens.push({
	                        value: matched,
	                        // Cast descendant combinators to space
	                        type: match[0].replace( rtrim, " " )
	                    });
	                    soFar = soFar.slice( matched.length );
	                }
	
	                // Filters
	                for ( type in Expr.filter ) {
	                    if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
	                        (match = preFilters[ type ]( match ))) ) {
	                        matched = match.shift();
	                        tokens.push({
	                            value: matched,
	                            type: type,
	                            matches: match
	                        });
	                        soFar = soFar.slice( matched.length );
	                    }
	                }
	
	                if ( !matched ) {
	                    break;
	                }
	            }
	
	            // Return the length of the invalid excess
	            // if we're just parsing
	            // Otherwise, throw an error or return tokens
	            return parseOnly ?
	                soFar.length :
	                soFar ?
	                    Sizzle.error( selector ) :
	                    // Cache the tokens
	                    tokenCache( selector, groups ).slice( 0 );
	        }
	
	        function toSelector( tokens ) {
	            var i = 0,
	                len = tokens.length,
	                selector = "";
	            for ( ; i < len; i++ ) {
	                selector += tokens[i].value;
	            }
	            return selector;
	        }
	
	        function addCombinator( matcher, combinator, base ) {
	            var dir = combinator.dir,
	                checkNonElements = base && dir === "parentNode",
	                doneName = done++;
	
	            return combinator.first ?
	                // Check against closest ancestor/preceding element
	                function( elem, context, xml ) {
	                    while ( (elem = elem[ dir ]) ) {
	                        if ( elem.nodeType === 1 || checkNonElements ) {
	                            return matcher( elem, context, xml );
	                        }
	                    }
	                } :
	
	                // Check against all ancestor/preceding elements
	                function( elem, context, xml ) {
	                    var data, cache, outerCache,
	                        dirkey = dirruns + " " + doneName;
	
	                    // We can't set arbitrary data on XML nodes, so they don't benefit from dir caching
	                    if ( xml ) {
	                        while ( (elem = elem[ dir ]) ) {
	                            if ( elem.nodeType === 1 || checkNonElements ) {
	                                if ( matcher( elem, context, xml ) ) {
	                                    return true;
	                                }
	                            }
	                        }
	                    } else {
	                        while ( (elem = elem[ dir ]) ) {
	                            if ( elem.nodeType === 1 || checkNonElements ) {
	                                outerCache = elem[ expando ] || (elem[ expando ] = {});
	                                if ( (cache = outerCache[ dir ]) && cache[0] === dirkey ) {
	                                    if ( (data = cache[1]) === true || data === cachedruns ) {
	                                        return data === true;
	                                    }
	                                } else {
	                                    cache = outerCache[ dir ] = [ dirkey ];
	                                    cache[1] = matcher( elem, context, xml ) || cachedruns;
	                                    if ( cache[1] === true ) {
	                                        return true;
	                                    }
	                                }
	                            }
	                        }
	                    }
	                };
	        }
	
	        function elementMatcher( matchers ) {
	            return matchers.length > 1 ?
	                function( elem, context, xml ) {
	                    var i = matchers.length;
	                    while ( i-- ) {
	                        if ( !matchers[i]( elem, context, xml ) ) {
	                            return false;
	                        }
	                    }
	                    return true;
	                } :
	                matchers[0];
	        }
	
	        function condense( unmatched, map, filter, context, xml ) {
	            var elem,
	                newUnmatched = [],
	                i = 0,
	                len = unmatched.length,
	                mapped = map != null;
	
	            for ( ; i < len; i++ ) {
	                if ( (elem = unmatched[i]) ) {
	                    if ( !filter || filter( elem, context, xml ) ) {
	                        newUnmatched.push( elem );
	                        if ( mapped ) {
	                            map.push( i );
	                        }
	                    }
	                }
	            }
	
	            return newUnmatched;
	        }
	
	        function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	            if ( postFilter && !postFilter[ expando ] ) {
	                postFilter = setMatcher( postFilter );
	            }
	            if ( postFinder && !postFinder[ expando ] ) {
	                postFinder = setMatcher( postFinder, postSelector );
	            }
	            return markFunction(function( seed, results, context, xml ) {
	                var temp, i, elem,
	                    preMap = [],
	                    postMap = [],
	                    preexisting = results.length,
	
	                // Get initial elements from seed or context
	                    elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),
	
	                // Prefilter to get matcher input, preserving a map for seed-results synchronization
	                    matcherIn = preFilter && ( seed || !selector ) ?
	                        condense( elems, preMap, preFilter, context, xml ) :
	                        elems,
	
	                    matcherOut = matcher ?
	                        // If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
	                        postFinder || ( seed ? preFilter : preexisting || postFilter ) ?
	
	                            // ...intermediate processing is necessary
	                            [] :
	
	                            // ...otherwise use results directly
	                            results :
	                        matcherIn;
	
	                // Find primary matches
	                if ( matcher ) {
	                    matcher( matcherIn, matcherOut, context, xml );
	                }
	
	                // Apply postFilter
	                if ( postFilter ) {
	                    temp = condense( matcherOut, postMap );
	                    postFilter( temp, [], context, xml );
	
	                    // Un-match failing elements by moving them back to matcherIn
	                    i = temp.length;
	                    while ( i-- ) {
	                        if ( (elem = temp[i]) ) {
	                            matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
	                        }
	                    }
	                }
	
	                if ( seed ) {
	                    if ( postFinder || preFilter ) {
	                        if ( postFinder ) {
	                            // Get the final matcherOut by condensing this intermediate into postFinder contexts
	                            temp = [];
	                            i = matcherOut.length;
	                            while ( i-- ) {
	                                if ( (elem = matcherOut[i]) ) {
	                                    // Restore matcherIn since elem is not yet a final match
	                                    temp.push( (matcherIn[i] = elem) );
	                                }
	                            }
	                            postFinder( null, (matcherOut = []), temp, xml );
	                        }
	
	                        // Move matched elements from seed to results to keep them synchronized
	                        i = matcherOut.length;
	                        while ( i-- ) {
	                            if ( (elem = matcherOut[i]) &&
	                                (temp = postFinder ? indexOf.call( seed, elem ) : preMap[i]) > -1 ) {
	
	                                seed[temp] = !(results[temp] = elem);
	                            }
	                        }
	                    }
	
	                    // Add elements to results, through postFinder if defined
	                } else {
	                    matcherOut = condense(
	                        matcherOut === results ?
	                            matcherOut.splice( preexisting, matcherOut.length ) :
	                            matcherOut
	                    );
	                    if ( postFinder ) {
	                        postFinder( null, results, matcherOut, xml );
	                    } else {
	                        push.apply( results, matcherOut );
	                    }
	                }
	            });
	        }
	
	        function matcherFromTokens( tokens ) {
	            var checkContext, matcher, j,
	                len = tokens.length,
	                leadingRelative = Expr.relative[ tokens[0].type ],
	                implicitRelative = leadingRelative || Expr.relative[" "],
	                i = leadingRelative ? 1 : 0,
	
	            // The foundational matcher ensures that elements are reachable from top-level context(s)
	                matchContext = addCombinator( function( elem ) {
	                    return elem === checkContext;
	                }, implicitRelative, true ),
	                matchAnyContext = addCombinator( function( elem ) {
	                    return indexOf.call( checkContext, elem ) > -1;
	                }, implicitRelative, true ),
	                matchers = [ function( elem, context, xml ) {
	                    return ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
	                            (checkContext = context).nodeType ?
	                                matchContext( elem, context, xml ) :
	                                matchAnyContext( elem, context, xml ) );
	                } ];
	
	            for ( ; i < len; i++ ) {
	                if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
	                    matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
	                } else {
	                    matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );
	
	                    // Return special upon seeing a positional matcher
	                    if ( matcher[ expando ] ) {
	                        // Find the next relative operator (if any) for proper handling
	                        j = ++i;
	                        for ( ; j < len; j++ ) {
	                            if ( Expr.relative[ tokens[j].type ] ) {
	                                break;
	                            }
	                        }
	                        return setMatcher(
	                            i > 1 && elementMatcher( matchers ),
	                            i > 1 && toSelector(
	                                // If the preceding token was a descendant combinator, insert an implicit any-element `*`
	                                tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
	                            ).replace( rtrim, "$1" ),
	                            matcher,
	                            i < j && matcherFromTokens( tokens.slice( i, j ) ),
	                            j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
	                            j < len && toSelector( tokens )
	                        );
	                    }
	                    matchers.push( matcher );
	                }
	            }
	
	            return elementMatcher( matchers );
	        }
	
	        function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	            // A counter to specify which element is currently being matched
	            var matcherCachedRuns = 0,
	                bySet = setMatchers.length > 0,
	                byElement = elementMatchers.length > 0,
	                superMatcher = function( seed, context, xml, results, expandContext ) {
	                    var elem, j, matcher,
	                        setMatched = [],
	                        matchedCount = 0,
	                        i = "0",
	                        unmatched = seed && [],
	                        outermost = expandContext != null,
	                        contextBackup = outermostContext,
	                    // We must always have either seed elements or context
	                        elems = seed || byElement && Expr.find["TAG"]( "*", expandContext && context.parentNode || context ),
	                    // Use integer dirruns iff this is the outermost matcher
	                        dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1);
	
	                    if ( outermost ) {
	                        outermostContext = context !== document && context;
	                        cachedruns = matcherCachedRuns;
	                    }
	
	                    // Add elements passing elementMatchers directly to results
	                    // Keep `i` a string if there are no elements so `matchedCount` will be "00" below
	                    for ( ; (elem = elems[i]) != null; i++ ) {
	                        if ( byElement && elem ) {
	                            j = 0;
	                            while ( (matcher = elementMatchers[j++]) ) {
	                                if ( matcher( elem, context, xml ) ) {
	                                    results.push( elem );
	                                    break;
	                                }
	                            }
	                            if ( outermost ) {
	                                dirruns = dirrunsUnique;
	                                cachedruns = ++matcherCachedRuns;
	                            }
	                        }
	
	                        // Track unmatched elements for set filters
	                        if ( bySet ) {
	                            // They will have gone through all possible matchers
	                            if ( (elem = !matcher && elem) ) {
	                                matchedCount--;
	                            }
	
	                            // Lengthen the array for every element, matched or not
	                            if ( seed ) {
	                                unmatched.push( elem );
	                            }
	                        }
	                    }
	
	                    // Apply set filters to unmatched elements
	                    matchedCount += i;
	                    if ( bySet && i !== matchedCount ) {
	                        j = 0;
	                        while ( (matcher = setMatchers[j++]) ) {
	                            matcher( unmatched, setMatched, context, xml );
	                        }
	
	                        if ( seed ) {
	                            // Reintegrate element matches to eliminate the need for sorting
	                            if ( matchedCount > 0 ) {
	                                while ( i-- ) {
	                                    if ( !(unmatched[i] || setMatched[i]) ) {
	                                        setMatched[i] = pop.call( results );
	                                    }
	                                }
	                            }
	
	                            // Discard index placeholder values to get only actual matches
	                            setMatched = condense( setMatched );
	                        }
	
	                        // Add matches to results
	                        push.apply( results, setMatched );
	
	                        // Seedless set matches succeeding multiple successful matchers stipulate sorting
	                        if ( outermost && !seed && setMatched.length > 0 &&
	                            ( matchedCount + setMatchers.length ) > 1 ) {
	
	                            Sizzle.uniqueSort( results );
	                        }
	                    }
	
	                    // Override manipulation of globals by nested matchers
	                    if ( outermost ) {
	                        dirruns = dirrunsUnique;
	                        outermostContext = contextBackup;
	                    }
	
	                    return unmatched;
	                };
	
	            return bySet ?
	                markFunction( superMatcher ) :
	                superMatcher;
	        }
	
	        compile = Sizzle.compile = function( selector, group /* Internal Use Only */ ) {
	            var i,
	                setMatchers = [],
	                elementMatchers = [],
	                cached = compilerCache[ selector + " " ];
	
	            if ( !cached ) {
	                // Generate a function of recursive functions that can be used to check each element
	                if ( !group ) {
	                    group = tokenize( selector );
	                }
	                i = group.length;
	                while ( i-- ) {
	                    cached = matcherFromTokens( group[i] );
	                    if ( cached[ expando ] ) {
	                        setMatchers.push( cached );
	                    } else {
	                        elementMatchers.push( cached );
	                    }
	                }
	
	                // Cache the compiled function
	                cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );
	            }
	            return cached;
	        };
	
	        function multipleContexts( selector, contexts, results ) {
	            var i = 0,
	                len = contexts.length;
	            for ( ; i < len; i++ ) {
	                Sizzle( selector, contexts[i], results );
	            }
	            return results;
	        }
	
	        function select( selector, context, results, seed ) {
	            var i, tokens, token, type, find,
	                match = tokenize( selector );
	
	            if ( !seed ) {
	                // Try to minimize operations if there is only one group
	                if ( match.length === 1 ) {
	
	                    // Take a shortcut and set the context if the root selector is an ID
	                    tokens = match[0] = match[0].slice( 0 );
	                    if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
	                        support.getById && context.nodeType === 9 && documentIsHTML &&
	                        Expr.relative[ tokens[1].type ] ) {
	
	                        context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
	                        if ( !context ) {
	                            return results;
	                        }
	                        selector = selector.slice( tokens.shift().value.length );
	                    }
	
	                    // Fetch a seed set for right-to-left matching
	                    i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
	                    while ( i-- ) {
	                        token = tokens[i];
	
	                        // Abort if we hit a combinator
	                        if ( Expr.relative[ (type = token.type) ] ) {
	                            break;
	                        }
	                        if ( (find = Expr.find[ type ]) ) {
	                            // Search, expanding context for leading sibling combinators
	                            if ( (seed = find(
	                                    token.matches[0].replace( runescape, funescape ),
	                                    rsibling.test( tokens[0].type ) && context.parentNode || context
	                                )) ) {
	
	                                // If seed is empty or no tokens remain, we can return early
	                                tokens.splice( i, 1 );
	                                selector = seed.length && toSelector( tokens );
	                                if ( !selector ) {
	                                    push.apply( results, seed );
	                                    return results;
	                                }
	
	                                break;
	                            }
	                        }
	                    }
	                }
	            }
	
	            // Compile and execute a filtering function
	            // Provide `match` to avoid retokenization if we modified the selector above
	            compile( selector, match )(
	                seed,
	                context,
	                !documentIsHTML,
	                results,
	                rsibling.test( selector )
	            );
	            return results;
	        }
	
	// One-time assignments
	
	// Sort stability
	        support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;
	
	// Support: Chrome<14
	// Always assume duplicates if they aren't passed to the comparison function
	        support.detectDuplicates = hasDuplicate;
	
	// Initialize against the default document
	        setDocument();
	
	// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
	// Detached nodes confoundingly follow *each other*
	        support.sortDetached = assert(function( div1 ) {
	            // Should return 1, but returns 4 (following)
	            return div1.compareDocumentPosition( document.createElement("div") ) & 1;
	        });
	
	// Support: IE<8
	// Prevent attribute/property "interpolation"
	// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
	        if ( !assert(function( div ) {
	                div.innerHTML = "<a href='#'></a>";
	                return div.firstChild.getAttribute("href") === "#" ;
	            }) ) {
	            addHandle( "type|href|height|width", function( elem, name, isXML ) {
	                if ( !isXML ) {
	                    return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
	                }
	            });
	        }
	
	// Support: IE<9
	// Use defaultValue in place of getAttribute("value")
	        if ( !support.attributes || !assert(function( div ) {
	                div.innerHTML = "<input/>";
	                div.firstChild.setAttribute( "value", "" );
	                return div.firstChild.getAttribute( "value" ) === "";
	            }) ) {
	            addHandle( "value", function( elem, name, isXML ) {
	                if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
	                    return elem.defaultValue;
	                }
	            });
	        }
	
	// Support: IE<9
	// Use getAttributeNode to fetch booleans when getAttribute lies
	        if ( !assert(function( div ) {
	                return div.getAttribute("disabled") == null;
	            }) ) {
	            addHandle( booleans, function( elem, name, isXML ) {
	                var val;
	                if ( !isXML ) {
	                    return (val = elem.getAttributeNode( name )) && val.specified ?
	                        val.value :
	                        elem[ name ] === true ? name.toLowerCase() : null;
	                }
	            });
	        }
	
	        jQuery.find = Sizzle;
	        jQuery.expr = Sizzle.selectors;
	        jQuery.expr[":"] = jQuery.expr.pseudos;
	        jQuery.unique = Sizzle.uniqueSort;
	        jQuery.text = Sizzle.getText;
	        jQuery.isXMLDoc = Sizzle.isXML;
	        jQuery.contains = Sizzle.contains;
	
	
	    })( window );
	// String to Object options format cache
	    var optionsCache = {};
	
	// Convert String-formatted options into Object-formatted ones and store in cache
	    function createOptions( options ) {
	        var object = optionsCache[ options ] = {};
	        jQuery.each( options.match( core_rnotwhite ) || [], function( _, flag ) {
	            object[ flag ] = true;
	        });
	        return object;
	    }
	
	    /*
	     * Create a callback list using the following parameters:
	     *
	     *	options: an optional list of space-separated options that will change how
	     *			the callback list behaves or a more traditional option object
	     *
	     * By default a callback list will act like an event callback list and can be
	     * "fired" multiple times.
	     *
	     * Possible options:
	     *
	     *	once:			will ensure the callback list can only be fired once (like a Deferred)
	     *
	     *	memory:			will keep track of previous values and will call any callback added
	     *					after the list has been fired right away with the latest "memorized"
	     *					values (like a Deferred)
	     *
	     *	unique:			will ensure a callback can only be added once (no duplicate in the list)
	     *
	     *	stopOnFalse:	interrupt callings when a callback returns false
	     *
	     */
	    jQuery.Callbacks = function( options ) {
	
	        // Convert options from String-formatted to Object-formatted if needed
	        // (we check in cache first)
	        options = typeof options === "string" ?
	            ( optionsCache[ options ] || createOptions( options ) ) :
	            jQuery.extend( {}, options );
	
	        var // Flag to know if list is currently firing
	            firing,
	        // Last fire value (for non-forgettable lists)
	            memory,
	        // Flag to know if list was already fired
	            fired,
	        // End of the loop when firing
	            firingLength,
	        // Index of currently firing callback (modified by remove if needed)
	            firingIndex,
	        // First callback to fire (used internally by add and fireWith)
	            firingStart,
	        // Actual callback list
	            list = [],
	        // Stack of fire calls for repeatable lists
	            stack = !options.once && [],
	        // Fire callbacks
	            fire = function( data ) {
	                memory = options.memory && data;
	                fired = true;
	                firingIndex = firingStart || 0;
	                firingStart = 0;
	                firingLength = list.length;
	                firing = true;
	                for ( ; list && firingIndex < firingLength; firingIndex++ ) {
	                    if ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {
	                        memory = false; // To prevent further calls using add
	                        break;
	                    }
	                }
	                firing = false;
	                if ( list ) {
	                    if ( stack ) {
	                        if ( stack.length ) {
	                            fire( stack.shift() );
	                        }
	                    } else if ( memory ) {
	                        list = [];
	                    } else {
	                        self.disable();
	                    }
	                }
	            },
	        // Actual Callbacks object
	            self = {
	                // Add a callback or a collection of callbacks to the list
	                add: function() {
	                    if ( list ) {
	                        // First, we save the current length
	                        var start = list.length;
	                        (function add( args ) {
	                            jQuery.each( args, function( _, arg ) {
	                                var type = jQuery.type( arg );
	                                if ( type === "function" ) {
	                                    if ( !options.unique || !self.has( arg ) ) {
	                                        list.push( arg );
	                                    }
	                                } else if ( arg && arg.length && type !== "string" ) {
	                                    // Inspect recursively
	                                    add( arg );
	                                }
	                            });
	                        })( arguments );
	                        // Do we need to add the callbacks to the
	                        // current firing batch?
	                        if ( firing ) {
	                            firingLength = list.length;
	                            // With memory, if we're not firing then
	                            // we should call right away
	                        } else if ( memory ) {
	                            firingStart = start;
	                            fire( memory );
	                        }
	                    }
	                    return this;
	                },
	                // Remove a callback from the list
	                remove: function() {
	                    if ( list ) {
	                        jQuery.each( arguments, function( _, arg ) {
	                            var index;
	                            while( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
	                                list.splice( index, 1 );
	                                // Handle firing indexes
	                                if ( firing ) {
	                                    if ( index <= firingLength ) {
	                                        firingLength--;
	                                    }
	                                    if ( index <= firingIndex ) {
	                                        firingIndex--;
	                                    }
	                                }
	                            }
	                        });
	                    }
	                    return this;
	                },
	                // Check if a given callback is in the list.
	                // If no argument is given, return whether or not list has callbacks attached.
	                has: function( fn ) {
	                    return fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );
	                },
	                // Remove all callbacks from the list
	                empty: function() {
	                    list = [];
	                    firingLength = 0;
	                    return this;
	                },
	                // Have the list do nothing anymore
	                disable: function() {
	                    list = stack = memory = undefined;
	                    return this;
	                },
	                // Is it disabled?
	                disabled: function() {
	                    return !list;
	                },
	                // Lock the list in its current state
	                lock: function() {
	                    stack = undefined;
	                    if ( !memory ) {
	                        self.disable();
	                    }
	                    return this;
	                },
	                // Is it locked?
	                locked: function() {
	                    return !stack;
	                },
	                // Call all callbacks with the given context and arguments
	                fireWith: function( context, args ) {
	                    if ( list && ( !fired || stack ) ) {
	                        args = args || [];
	                        args = [ context, args.slice ? args.slice() : args ];
	                        if ( firing ) {
	                            stack.push( args );
	                        } else {
	                            fire( args );
	                        }
	                    }
	                    return this;
	                },
	                // Call all the callbacks with the given arguments
	                fire: function() {
	                    self.fireWith( this, arguments );
	                    return this;
	                },
	                // To know if the callbacks have already been called at least once
	                fired: function() {
	                    return !!fired;
	                }
	            };
	
	        return self;
	    };
	    jQuery.extend({
	
	        Deferred: function( func ) {
	            var tuples = [
	                    // action, add listener, listener list, final state
	                    [ "resolve", "done", jQuery.Callbacks("once memory"), "resolved" ],
	                    [ "reject", "fail", jQuery.Callbacks("once memory"), "rejected" ],
	                    [ "notify", "progress", jQuery.Callbacks("memory") ]
	                ],
	                state = "pending",
	                promise = {
	                    state: function() {
	                        return state;
	                    },
	                    always: function() {
	                        deferred.done( arguments ).fail( arguments );
	                        return this;
	                    },
	                    then: function( /* fnDone, fnFail, fnProgress */ ) {
	                        var fns = arguments;
	                        return jQuery.Deferred(function( newDefer ) {
	                            jQuery.each( tuples, function( i, tuple ) {
	                                var action = tuple[ 0 ],
	                                    fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];
	                                // deferred[ done | fail | progress ] for forwarding actions to newDefer
	                                deferred[ tuple[1] ](function() {
	                                    var returned = fn && fn.apply( this, arguments );
	                                    if ( returned && jQuery.isFunction( returned.promise ) ) {
	                                        returned.promise()
	                                            .done( newDefer.resolve )
	                                            .fail( newDefer.reject )
	                                            .progress( newDefer.notify );
	                                    } else {
	                                        newDefer[ action + "With" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );
	                                    }
	                                });
	                            });
	                            fns = null;
	                        }).promise();
	                    },
	                    // Get a promise for this deferred
	                    // If obj is provided, the promise aspect is added to the object
	                    promise: function( obj ) {
	                        return obj != null ? jQuery.extend( obj, promise ) : promise;
	                    }
	                },
	                deferred = {};
	
	            // Keep pipe for back-compat
	            promise.pipe = promise.then;
	
	            // Add list-specific methods
	            jQuery.each( tuples, function( i, tuple ) {
	                var list = tuple[ 2 ],
	                    stateString = tuple[ 3 ];
	
	                // promise[ done | fail | progress ] = list.add
	                promise[ tuple[1] ] = list.add;
	
	                // Handle state
	                if ( stateString ) {
	                    list.add(function() {
	                        // state = [ resolved | rejected ]
	                        state = stateString;
	
	                        // [ reject_list | resolve_list ].disable; progress_list.lock
	                    }, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );
	                }
	
	                // deferred[ resolve | reject | notify ]
	                deferred[ tuple[0] ] = function() {
	                    deferred[ tuple[0] + "With" ]( this === deferred ? promise : this, arguments );
	                    return this;
	                };
	                deferred[ tuple[0] + "With" ] = list.fireWith;
	            });
	
	            // Make the deferred a promise
	            promise.promise( deferred );
	
	            // Call given func if any
	            if ( func ) {
	                func.call( deferred, deferred );
	            }
	
	            // All done!
	            return deferred;
	        },
	
	        // Deferred helper
	        when: function( subordinate /* , ..., subordinateN */ ) {
	            var i = 0,
	                resolveValues = core_slice.call( arguments ),
	                length = resolveValues.length,
	
	            // the count of uncompleted subordinates
	                remaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,
	
	            // the master Deferred. If resolveValues consist of only a single Deferred, just use that.
	                deferred = remaining === 1 ? subordinate : jQuery.Deferred(),
	
	            // Update function for both resolve and progress values
	                updateFunc = function( i, contexts, values ) {
	                    return function( value ) {
	                        contexts[ i ] = this;
	                        values[ i ] = arguments.length > 1 ? core_slice.call( arguments ) : value;
	                        if( values === progressValues ) {
	                            deferred.notifyWith( contexts, values );
	                        } else if ( !( --remaining ) ) {
	                            deferred.resolveWith( contexts, values );
	                        }
	                    };
	                },
	
	                progressValues, progressContexts, resolveContexts;
	
	            // add listeners to Deferred subordinates; treat others as resolved
	            if ( length > 1 ) {
	                progressValues = new Array( length );
	                progressContexts = new Array( length );
	                resolveContexts = new Array( length );
	                for ( ; i < length; i++ ) {
	                    if ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {
	                        resolveValues[ i ].promise()
	                            .done( updateFunc( i, resolveContexts, resolveValues ) )
	                            .fail( deferred.reject )
	                            .progress( updateFunc( i, progressContexts, progressValues ) );
	                    } else {
	                        --remaining;
	                    }
	                }
	            }
	
	            // if we're not waiting on anything, resolve the master
	            if ( !remaining ) {
	                deferred.resolveWith( resolveContexts, resolveValues );
	            }
	
	            return deferred.promise();
	        }
	    });
	    jQuery.support = (function( support ) {
	
	        var all, a, input, select, fragment, opt, eventName, isSupported, i,
	            div = document.createElement("div");
	
	        // Setup
	        div.setAttribute( "className", "t" );
	        div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
	
	        // Finish early in limited (non-browser) environments
	        all = div.getElementsByTagName("*") || [];
	        a = div.getElementsByTagName("a")[ 0 ];
	        if ( !a || !a.style || !all.length ) {
	            return support;
	        }
	
	        // First batch of tests
	        select = document.createElement("select");
	        opt = select.appendChild( document.createElement("option") );
	        input = div.getElementsByTagName("input")[ 0 ];
	
	        a.style.cssText = "top:1px;float:left;opacity:.5";
	
	        // Test setAttribute on camelCase class. If it works, we need attrFixes when doing get/setAttribute (ie6/7)
	        support.getSetAttribute = div.className !== "t";
	
	        // IE strips leading whitespace when .innerHTML is used
	        support.leadingWhitespace = div.firstChild.nodeType === 3;
	
	        // Make sure that tbody elements aren't automatically inserted
	        // IE will insert them into empty tables
	        support.tbody = !div.getElementsByTagName("tbody").length;
	
	        // Make sure that link elements get serialized correctly by innerHTML
	        // This requires a wrapper element in IE
	        support.htmlSerialize = !!div.getElementsByTagName("link").length;
	
	        // Get the style information from getAttribute
	        // (IE uses .cssText instead)
	        support.style = /top/.test( a.getAttribute("style") );
	
	        // Make sure that URLs aren't manipulated
	        // (IE normalizes it by default)
	        support.hrefNormalized = a.getAttribute("href") === "/a";
	
	        // Make sure that element opacity exists
	        // (IE uses filter instead)
	        // Use a regex to work around a WebKit issue. See #5145
	        support.opacity = /^0.5/.test( a.style.opacity );
	
	        // Verify style float existence
	        // (IE uses styleFloat instead of cssFloat)
	        support.cssFloat = !!a.style.cssFloat;
	
	        // Check the default checkbox/radio value ("" on WebKit; "on" elsewhere)
	        support.checkOn = !!input.value;
	
	        // Make sure that a selected-by-default option has a working selected property.
	        // (WebKit defaults to false instead of true, IE too, if it's in an optgroup)
	        support.optSelected = opt.selected;
	
	        // Tests for enctype support on a form (#6743)
	        support.enctype = !!document.createElement("form").enctype;
	
	        // Makes sure cloning an html5 element does not cause problems
	        // Where outerHTML is undefined, this still works
	        support.html5Clone = document.createElement("nav").cloneNode( true ).outerHTML !== "<:nav></:nav>";
	
	        // Will be defined later
	        support.inlineBlockNeedsLayout = false;
	        support.shrinkWrapBlocks = false;
	        support.pixelPosition = false;
	        support.deleteExpando = true;
	        support.noCloneEvent = true;
	        support.reliableMarginRight = true;
	        support.boxSizingReliable = true;
	
	        // Make sure checked status is properly cloned
	        input.checked = true;
	        support.noCloneChecked = input.cloneNode( true ).checked;
	
	        // Make sure that the options inside disabled selects aren't marked as disabled
	        // (WebKit marks them as disabled)
	        select.disabled = true;
	        support.optDisabled = !opt.disabled;
	
	        // Support: IE<9
	        try {
	            delete div.test;
	        } catch( e ) {
	            support.deleteExpando = false;
	        }
	
	        // Check if we can trust getAttribute("value")
	        input = document.createElement("input");
	        input.setAttribute( "value", "" );
	        support.input = input.getAttribute( "value" ) === "";
	
	        // Check if an input maintains its value after becoming a radio
	        input.value = "t";
	        input.setAttribute( "type", "radio" );
	        support.radioValue = input.value === "t";
	
	        // #11217 - WebKit loses check when the name is after the checked attribute
	        input.setAttribute( "checked", "t" );
	        input.setAttribute( "name", "t" );
	
	        fragment = document.createDocumentFragment();
	        fragment.appendChild( input );
	
	        // Check if a disconnected checkbox will retain its checked
	        // value of true after appended to the DOM (IE6/7)
	        support.appendChecked = input.checked;
	
	        // WebKit doesn't clone checked state correctly in fragments
	        support.checkClone = fragment.cloneNode( true ).cloneNode( true ).lastChild.checked;
	
	        // Support: IE<9
	        // Opera does not clone events (and typeof div.attachEvent === undefined).
	        // IE9-10 clones events bound via attachEvent, but they don't trigger with .click()
	        if ( div.attachEvent ) {
	            div.attachEvent( "onclick", function() {
	                support.noCloneEvent = false;
	            });
	
	            div.cloneNode( true ).click();
	        }
	
	        // Support: IE<9 (lack submit/change bubble), Firefox 17+ (lack focusin event)
	        // Beware of CSP restrictions (https://developer.mozilla.org/en/Security/CSP)
	        for ( i in { submit: true, change: true, focusin: true }) {
	            div.setAttribute( eventName = "on" + i, "t" );
	
	            support[ i + "Bubbles" ] = eventName in window || div.attributes[ eventName ].expando === false;
	        }
	
	        div.style.backgroundClip = "content-box";
	        div.cloneNode( true ).style.backgroundClip = "";
	        support.clearCloneStyle = div.style.backgroundClip === "content-box";
	
	        // Support: IE<9
	        // Iteration over object's inherited properties before its own.
	        for ( i in jQuery( support ) ) {
	            break;
	        }
	        support.ownLast = i !== "0";
	
	        // Run tests that need a body at doc ready
	        jQuery(function() {
	            var container, marginDiv, tds,
	                divReset = "padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",
	                body = document.getElementsByTagName("body")[0];
	
	            if ( !body ) {
	                // Return for frameset docs that don't have a body
	                return;
	            }
	
	            container = document.createElement("div");
	            container.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";
	
	            body.appendChild( container ).appendChild( div );
	
	            // Support: IE8
	            // Check if table cells still have offsetWidth/Height when they are set
	            // to display:none and there are still other visible table cells in a
	            // table row; if so, offsetWidth/Height are not reliable for use when
	            // determining if an element has been hidden directly using
	            // display:none (it is still safe to use offsets if a parent element is
	            // hidden; don safety goggles and see bug #4512 for more information).
	            div.innerHTML = "<table><tr><td></td><td>t</td></tr></table>";
	            tds = div.getElementsByTagName("td");
	            tds[ 0 ].style.cssText = "padding:0;margin:0;border:0;display:none";
	            isSupported = ( tds[ 0 ].offsetHeight === 0 );
	
	            tds[ 0 ].style.display = "";
	            tds[ 1 ].style.display = "none";
	
	            // Support: IE8
	            // Check if empty table cells still have offsetWidth/Height
	            support.reliableHiddenOffsets = isSupported && ( tds[ 0 ].offsetHeight === 0 );
	
	            // Check box-sizing and margin behavior.
	            div.innerHTML = "";
	            div.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";
	
	            // Workaround failing boxSizing test due to offsetWidth returning wrong value
	            // with some non-1 values of body zoom, ticket #13543
	            jQuery.swap( body, body.style.zoom != null ? { zoom: 1 } : {}, function() {
	                support.boxSizing = div.offsetWidth === 4;
	            });
	
	            // Use window.getComputedStyle because jsdom on node.js will break without it.
	            if ( window.getComputedStyle ) {
	                support.pixelPosition = ( window.getComputedStyle( div, null ) || {} ).top !== "1%";
	                support.boxSizingReliable = ( window.getComputedStyle( div, null ) || { width: "4px" } ).width === "4px";
	
	                // Check if div with explicit width and no margin-right incorrectly
	                // gets computed margin-right based on width of container. (#3333)
	                // Fails in WebKit before Feb 2011 nightlies
	                // WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
	                marginDiv = div.appendChild( document.createElement("div") );
	                marginDiv.style.cssText = div.style.cssText = divReset;
	                marginDiv.style.marginRight = marginDiv.style.width = "0";
	                div.style.width = "1px";
	
	                support.reliableMarginRight =
	                    !parseFloat( ( window.getComputedStyle( marginDiv, null ) || {} ).marginRight );
	            }
	
	            if ( typeof div.style.zoom !== core_strundefined ) {
	                // Support: IE<8
	                // Check if natively block-level elements act like inline-block
	                // elements when setting their display to 'inline' and giving
	                // them layout
	                div.innerHTML = "";
	                div.style.cssText = divReset + "width:1px;padding:1px;display:inline;zoom:1";
	                support.inlineBlockNeedsLayout = ( div.offsetWidth === 3 );
	
	                // Support: IE6
	                // Check if elements with layout shrink-wrap their children
	                div.style.display = "block";
	                div.innerHTML = "<div></div>";
	                div.firstChild.style.width = "5px";
	                support.shrinkWrapBlocks = ( div.offsetWidth !== 3 );
	
	                if ( support.inlineBlockNeedsLayout ) {
	                    // Prevent IE 6 from affecting layout for positioned elements #11048
	                    // Prevent IE from shrinking the body in IE 7 mode #12869
	                    // Support: IE<8
	                    body.style.zoom = 1;
	                }
	            }
	
	            body.removeChild( container );
	
	            // Null elements to avoid leaks in IE
	            container = div = tds = marginDiv = null;
	        });
	
	        // Null elements to avoid leaks in IE
	        all = select = fragment = opt = a = input = null;
	
	        return support;
	    })({});
	
	    var rbrace = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
	        rmultiDash = /([A-Z])/g;
	
	    function internalData( elem, name, data, pvt /* Internal Use Only */ ){
	        if ( !jQuery.acceptData( elem ) ) {
	            return;
	        }
	
	        var ret, thisCache,
	            internalKey = jQuery.expando,
	
	        // We have to handle DOM nodes and JS objects differently because IE6-7
	        // can't GC object references properly across the DOM-JS boundary
	            isNode = elem.nodeType,
	
	        // Only DOM nodes need the global jQuery cache; JS object data is
	        // attached directly to the object so GC can occur automatically
	            cache = isNode ? jQuery.cache : elem,
	
	        // Only defining an ID for JS objects if its cache already exists allows
	        // the code to shortcut on the same path as a DOM node with no cache
	            id = isNode ? elem[ internalKey ] : elem[ internalKey ] && internalKey;
	
	        // Avoid doing any more work than we need to when trying to get data on an
	        // object that has no data at all
	        if ( (!id || !cache[id] || (!pvt && !cache[id].data)) && data === undefined && typeof name === "string" ) {
	            return;
	        }
	
	        if ( !id ) {
	            // Only DOM nodes need a new unique ID for each element since their data
	            // ends up in the global cache
	            if ( isNode ) {
	                id = elem[ internalKey ] = core_deletedIds.pop() || jQuery.guid++;
	            } else {
	                id = internalKey;
	            }
	        }
	
	        if ( !cache[ id ] ) {
	            // Avoid exposing jQuery metadata on plain JS objects when the object
	            // is serialized using JSON.stringify
	            cache[ id ] = isNode ? {} : { toJSON: jQuery.noop };
	        }
	
	        // An object can be passed to jQuery.data instead of a key/value pair; this gets
	        // shallow copied over onto the existing cache
	        if ( typeof name === "object" || typeof name === "function" ) {
	            if ( pvt ) {
	                cache[ id ] = jQuery.extend( cache[ id ], name );
	            } else {
	                cache[ id ].data = jQuery.extend( cache[ id ].data, name );
	            }
	        }
	
	        thisCache = cache[ id ];
	
	        // jQuery data() is stored in a separate object inside the object's internal data
	        // cache in order to avoid key collisions between internal data and user-defined
	        // data.
	        if ( !pvt ) {
	            if ( !thisCache.data ) {
	                thisCache.data = {};
	            }
	
	            thisCache = thisCache.data;
	        }
	
	        if ( data !== undefined ) {
	            thisCache[ jQuery.camelCase( name ) ] = data;
	        }
	
	        // Check for both converted-to-camel and non-converted data property names
	        // If a data property was specified
	        if ( typeof name === "string" ) {
	
	            // First Try to find as-is property data
	            ret = thisCache[ name ];
	
	            // Test for null|undefined property data
	            if ( ret == null ) {
	
	                // Try to find the camelCased property
	                ret = thisCache[ jQuery.camelCase( name ) ];
	            }
	        } else {
	            ret = thisCache;
	        }
	
	        return ret;
	    }
	
	    function internalRemoveData( elem, name, pvt ) {
	        if ( !jQuery.acceptData( elem ) ) {
	            return;
	        }
	
	        var thisCache, i,
	            isNode = elem.nodeType,
	
	        // See jQuery.data for more information
	            cache = isNode ? jQuery.cache : elem,
	            id = isNode ? elem[ jQuery.expando ] : jQuery.expando;
	
	        // If there is already no cache entry for this object, there is no
	        // purpose in continuing
	        if ( !cache[ id ] ) {
	            return;
	        }
	
	        if ( name ) {
	
	            thisCache = pvt ? cache[ id ] : cache[ id ].data;
	
	            if ( thisCache ) {
	
	                // Support array or space separated string names for data keys
	                if ( !jQuery.isArray( name ) ) {
	
	                    // try the string as a key before any manipulation
	                    if ( name in thisCache ) {
	                        name = [ name ];
	                    } else {
	
	                        // split the camel cased version by spaces unless a key with the spaces exists
	                        name = jQuery.camelCase( name );
	                        if ( name in thisCache ) {
	                            name = [ name ];
	                        } else {
	                            name = name.split(" ");
	                        }
	                    }
	                } else {
	                    // If "name" is an array of keys...
	                    // When data is initially created, via ("key", "val") signature,
	                    // keys will be converted to camelCase.
	                    // Since there is no way to tell _how_ a key was added, remove
	                    // both plain key and camelCase key. #12786
	                    // This will only penalize the array argument path.
	                    name = name.concat( jQuery.map( name, jQuery.camelCase ) );
	                }
	
	                i = name.length;
	                while ( i-- ) {
	                    delete thisCache[ name[i] ];
	                }
	
	                // If there is no data left in the cache, we want to continue
	                // and let the cache object itself get destroyed
	                if ( pvt ? !isEmptyDataObject(thisCache) : !jQuery.isEmptyObject(thisCache) ) {
	                    return;
	                }
	            }
	        }
	
	        // See jQuery.data for more information
	        if ( !pvt ) {
	            delete cache[ id ].data;
	
	            // Don't destroy the parent cache unless the internal data object
	            // had been the only thing left in it
	            if ( !isEmptyDataObject( cache[ id ] ) ) {
	                return;
	            }
	        }
	
	        // Destroy the cache
	        if ( isNode ) {
	            jQuery.cleanData( [ elem ], true );
	
	            // Use delete when supported for expandos or `cache` is not a window per isWindow (#10080)
	            /* jshint eqeqeq: false */
	        } else if ( jQuery.support.deleteExpando || cache != cache.window ) {
	            /* jshint eqeqeq: true */
	            delete cache[ id ];
	
	            // When all else fails, null
	        } else {
	            cache[ id ] = null;
	        }
	    }
	
	    jQuery.extend({
	        cache: {},
	
	        // The following elements throw uncatchable exceptions if you
	        // attempt to add expando properties to them.
	        noData: {
	            "applet": true,
	            "embed": true,
	            // Ban all objects except for Flash (which handle expandos)
	            "object": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
	        },
	
	        hasData: function( elem ) {
	            elem = elem.nodeType ? jQuery.cache[ elem[jQuery.expando] ] : elem[ jQuery.expando ];
	            return !!elem && !isEmptyDataObject( elem );
	        },
	
	        data: function( elem, name, data ) {
	            return internalData( elem, name, data );
	        },
	
	        removeData: function( elem, name ) {
	            return internalRemoveData( elem, name );
	        },
	
	        // For internal use only.
	        _data: function( elem, name, data ) {
	            return internalData( elem, name, data, true );
	        },
	
	        _removeData: function( elem, name ) {
	            return internalRemoveData( elem, name, true );
	        },
	
	        // A method for determining if a DOM node can handle the data expando
	        acceptData: function( elem ) {
	            // Do not set data on non-element because it will not be cleared (#8335).
	            if ( elem.nodeType && elem.nodeType !== 1 && elem.nodeType !== 9 ) {
	                return false;
	            }
	
	            var noData = elem.nodeName && jQuery.noData[ elem.nodeName.toLowerCase() ];
	
	            // nodes accept data unless otherwise specified; rejection can be conditional
	            return !noData || noData !== true && elem.getAttribute("classid") === noData;
	        }
	    });
	
	    jQuery.fn.extend({
	        data: function( key, value ) {
	            var attrs, name,
	                data = null,
	                i = 0,
	                elem = this[0];
	
	            // Special expections of .data basically thwart jQuery.access,
	            // so implement the relevant behavior ourselves
	
	            // Gets all values
	            if ( key === undefined ) {
	                if ( this.length ) {
	                    data = jQuery.data( elem );
	
	                    if ( elem.nodeType === 1 && !jQuery._data( elem, "parsedAttrs" ) ) {
	                        attrs = elem.attributes;
	                        for ( ; i < attrs.length; i++ ) {
	                            name = attrs[i].name;
	
	                            if ( name.indexOf("data-") === 0 ) {
	                                name = jQuery.camelCase( name.slice(5) );
	
	                                dataAttr( elem, name, data[ name ] );
	                            }
	                        }
	                        jQuery._data( elem, "parsedAttrs", true );
	                    }
	                }
	
	                return data;
	            }
	
	            // Sets multiple values
	            if ( typeof key === "object" ) {
	                return this.each(function() {
	                    jQuery.data( this, key );
	                });
	            }
	
	            return arguments.length > 1 ?
	
	                // Sets one value
	                this.each(function() {
	                    jQuery.data( this, key, value );
	                }) :
	
	                // Gets one value
	                // Try to fetch any internally stored data first
	                elem ? dataAttr( elem, key, jQuery.data( elem, key ) ) : null;
	        },
	
	        removeData: function( key ) {
	            return this.each(function() {
	                jQuery.removeData( this, key );
	            });
	        }
	    });
	
	    function dataAttr( elem, key, data ) {
	        // If nothing was found internally, try to fetch any
	        // data from the HTML5 data-* attribute
	        if ( data === undefined && elem.nodeType === 1 ) {
	
	            var name = "data-" + key.replace( rmultiDash, "-$1" ).toLowerCase();
	
	            data = elem.getAttribute( name );
	
	            if ( typeof data === "string" ) {
	                try {
	                    data = data === "true" ? true :
	                        data === "false" ? false :
	                            data === "null" ? null :
	                                // Only convert to a number if it doesn't change the string
	                                +data + "" === data ? +data :
	                                    rbrace.test( data ) ? jQuery.parseJSON( data ) :
	                                        data;
	                } catch( e ) {}
	
	                // Make sure we set the data so it isn't changed later
	                jQuery.data( elem, key, data );
	
	            } else {
	                data = undefined;
	            }
	        }
	
	        return data;
	    }
	
	// checks a cache object for emptiness
	    function isEmptyDataObject( obj ) {
	        var name;
	        for ( name in obj ) {
	
	            // if the public data object is empty, the private is still empty
	            if ( name === "data" && jQuery.isEmptyObject( obj[name] ) ) {
	                continue;
	            }
	            if ( name !== "toJSON" ) {
	                return false;
	            }
	        }
	
	        return true;
	    }
	    jQuery.extend({
	        queue: function( elem, type, data ) {
	            var queue;
	
	            if ( elem ) {
	                type = ( type || "fx" ) + "queue";
	                queue = jQuery._data( elem, type );
	
	                // Speed up dequeue by getting out quickly if this is just a lookup
	                if ( data ) {
	                    if ( !queue || jQuery.isArray(data) ) {
	                        queue = jQuery._data( elem, type, jQuery.makeArray(data) );
	                    } else {
	                        queue.push( data );
	                    }
	                }
	                return queue || [];
	            }
	        },
	
	        dequeue: function( elem, type ) {
	            type = type || "fx";
	
	            var queue = jQuery.queue( elem, type ),
	                startLength = queue.length,
	                fn = queue.shift(),
	                hooks = jQuery._queueHooks( elem, type ),
	                next = function() {
	                    jQuery.dequeue( elem, type );
	                };
	
	            // If the fx queue is dequeued, always remove the progress sentinel
	            if ( fn === "inprogress" ) {
	                fn = queue.shift();
	                startLength--;
	            }
	
	            if ( fn ) {
	
	                // Add a progress sentinel to prevent the fx queue from being
	                // automatically dequeued
	                if ( type === "fx" ) {
	                    queue.unshift( "inprogress" );
	                }
	
	                // clear up the last queue stop function
	                delete hooks.stop;
	                fn.call( elem, next, hooks );
	            }
	
	            if ( !startLength && hooks ) {
	                hooks.empty.fire();
	            }
	        },
	
	        // not intended for public consumption - generates a queueHooks object, or returns the current one
	        _queueHooks: function( elem, type ) {
	            var key = type + "queueHooks";
	            return jQuery._data( elem, key ) || jQuery._data( elem, key, {
	                    empty: jQuery.Callbacks("once memory").add(function() {
	                        jQuery._removeData( elem, type + "queue" );
	                        jQuery._removeData( elem, key );
	                    })
	                });
	        }
	    });
	
	    jQuery.fn.extend({
	        queue: function( type, data ) {
	            var setter = 2;
	
	            if ( typeof type !== "string" ) {
	                data = type;
	                type = "fx";
	                setter--;
	            }
	
	            if ( arguments.length < setter ) {
	                return jQuery.queue( this[0], type );
	            }
	
	            return data === undefined ?
	                this :
	                this.each(function() {
	                    var queue = jQuery.queue( this, type, data );
	
	                    // ensure a hooks for this queue
	                    jQuery._queueHooks( this, type );
	
	                    if ( type === "fx" && queue[0] !== "inprogress" ) {
	                        jQuery.dequeue( this, type );
	                    }
	                });
	        },
	        dequeue: function( type ) {
	            return this.each(function() {
	                jQuery.dequeue( this, type );
	            });
	        },
	        // Based off of the plugin by Clint Helfers, with permission.
	        // http://blindsignals.com/index.php/2009/07/jquery-delay/
	        delay: function( time, type ) {
	            time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
	            type = type || "fx";
	
	            return this.queue( type, function( next, hooks ) {
	                var timeout = setTimeout( next, time );
	                hooks.stop = function() {
	                    clearTimeout( timeout );
	                };
	            });
	        },
	        clearQueue: function( type ) {
	            return this.queue( type || "fx", [] );
	        },
	        // Get a promise resolved when queues of a certain type
	        // are emptied (fx is the type by default)
	        promise: function( type, obj ) {
	            var tmp,
	                count = 1,
	                defer = jQuery.Deferred(),
	                elements = this,
	                i = this.length,
	                resolve = function() {
	                    if ( !( --count ) ) {
	                        defer.resolveWith( elements, [ elements ] );
	                    }
	                };
	
	            if ( typeof type !== "string" ) {
	                obj = type;
	                type = undefined;
	            }
	            type = type || "fx";
	
	            while( i-- ) {
	                tmp = jQuery._data( elements[ i ], type + "queueHooks" );
	                if ( tmp && tmp.empty ) {
	                    count++;
	                    tmp.empty.add( resolve );
	                }
	            }
	            resolve();
	            return defer.promise( obj );
	        }
	    });
	    var nodeHook, boolHook,
	        rclass = /[\t\r\n\f]/g,
	        rreturn = /\r/g,
	        rfocusable = /^(?:input|select|textarea|button|object)$/i,
	        rclickable = /^(?:a|area)$/i,
	        ruseDefault = /^(?:checked|selected)$/i,
	        getSetAttribute = jQuery.support.getSetAttribute,
	        getSetInput = jQuery.support.input;
	
	    jQuery.fn.extend({
	        attr: function( name, value ) {
	            return jQuery.access( this, jQuery.attr, name, value, arguments.length > 1 );
	        },
	
	        removeAttr: function( name ) {
	            return this.each(function() {
	                jQuery.removeAttr( this, name );
	            });
	        },
	
	        prop: function( name, value ) {
	            return jQuery.access( this, jQuery.prop, name, value, arguments.length > 1 );
	        },
	
	        removeProp: function( name ) {
	            name = jQuery.propFix[ name ] || name;
	            return this.each(function() {
	                // try/catch handles cases where IE balks (such as removing a property on window)
	                try {
	                    this[ name ] = undefined;
	                    delete this[ name ];
	                } catch( e ) {}
	            });
	        },
	
	        addClass: function( value ) {
	            var classes, elem, cur, clazz, j,
	                i = 0,
	                len = this.length,
	                proceed = typeof value === "string" && value;
	
	            if ( jQuery.isFunction( value ) ) {
	                return this.each(function( j ) {
	                    jQuery( this ).addClass( value.call( this, j, this.className ) );
	                });
	            }
	
	            if ( proceed ) {
	                // The disjunction here is for better compressibility (see removeClass)
	                classes = ( value || "" ).match( core_rnotwhite ) || [];
	
	                for ( ; i < len; i++ ) {
	                    elem = this[ i ];
	                    cur = elem.nodeType === 1 && ( elem.className ?
	                                ( " " + elem.className + " " ).replace( rclass, " " ) :
	                                " "
	                        );
	
	                    if ( cur ) {
	                        j = 0;
	                        while ( (clazz = classes[j++]) ) {
	                            if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
	                                cur += clazz + " ";
	                            }
	                        }
	                        elem.className = jQuery.trim( cur );
	
	                    }
	                }
	            }
	
	            return this;
	        },
	
	        removeClass: function( value ) {
	            var classes, elem, cur, clazz, j,
	                i = 0,
	                len = this.length,
	                proceed = arguments.length === 0 || typeof value === "string" && value;
	
	            if ( jQuery.isFunction( value ) ) {
	                return this.each(function( j ) {
	                    jQuery( this ).removeClass( value.call( this, j, this.className ) );
	                });
	            }
	            if ( proceed ) {
	                classes = ( value || "" ).match( core_rnotwhite ) || [];
	
	                for ( ; i < len; i++ ) {
	                    elem = this[ i ];
	                    // This expression is here for better compressibility (see addClass)
	                    cur = elem.nodeType === 1 && ( elem.className ?
	                                ( " " + elem.className + " " ).replace( rclass, " " ) :
	                                ""
	                        );
	
	                    if ( cur ) {
	                        j = 0;
	                        while ( (clazz = classes[j++]) ) {
	                            // Remove *all* instances
	                            while ( cur.indexOf( " " + clazz + " " ) >= 0 ) {
	                                cur = cur.replace( " " + clazz + " ", " " );
	                            }
	                        }
	                        elem.className = value ? jQuery.trim( cur ) : "";
	                    }
	                }
	            }
	
	            return this;
	        },
	
	        toggleClass: function( value, stateVal ) {
	            var type = typeof value;
	
	            if ( typeof stateVal === "boolean" && type === "string" ) {
	                return stateVal ? this.addClass( value ) : this.removeClass( value );
	            }
	
	            if ( jQuery.isFunction( value ) ) {
	                return this.each(function( i ) {
	                    jQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );
	                });
	            }
	
	            return this.each(function() {
	                if ( type === "string" ) {
	                    // toggle individual class names
	                    var className,
	                        i = 0,
	                        self = jQuery( this ),
	                        classNames = value.match( core_rnotwhite ) || [];
	
	                    while ( (className = classNames[ i++ ]) ) {
	                        // check each className given, space separated list
	                        if ( self.hasClass( className ) ) {
	                            self.removeClass( className );
	                        } else {
	                            self.addClass( className );
	                        }
	                    }
	
	                    // Toggle whole class name
	                } else if ( type === core_strundefined || type === "boolean" ) {
	                    if ( this.className ) {
	                        // store className if set
	                        jQuery._data( this, "__className__", this.className );
	                    }
	
	                    // If the element has a class name or if we're passed "false",
	                    // then remove the whole classname (if there was one, the above saved it).
	                    // Otherwise bring back whatever was previously saved (if anything),
	                    // falling back to the empty string if nothing was stored.
	                    this.className = this.className || value === false ? "" : jQuery._data( this, "__className__" ) || "";
	                }
	            });
	        },
	
	        hasClass: function( selector ) {
	            var className = " " + selector + " ",
	                i = 0,
	                l = this.length;
	            for ( ; i < l; i++ ) {
	                if ( this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf( className ) >= 0 ) {
	                    return true;
	                }
	            }
	
	            return false;
	        },
	
	        val: function( value ) {
	            var ret, hooks, isFunction,
	                elem = this[0];
	
	            if ( !arguments.length ) {
	                if ( elem ) {
	                    hooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];
	
	                    if ( hooks && "get" in hooks && (ret = hooks.get( elem, "value" )) !== undefined ) {
	                        return ret;
	                    }
	
	                    ret = elem.value;
	
	                    return typeof ret === "string" ?
	                        // handle most common string cases
	                        ret.replace(rreturn, "") :
	                        // handle cases where value is null/undef or number
	                        ret == null ? "" : ret;
	                }
	
	                return;
	            }
	
	            isFunction = jQuery.isFunction( value );
	
	            return this.each(function( i ) {
	                var val;
	
	                if ( this.nodeType !== 1 ) {
	                    return;
	                }
	
	                if ( isFunction ) {
	                    val = value.call( this, i, jQuery( this ).val() );
	                } else {
	                    val = value;
	                }
	
	                // Treat null/undefined as ""; convert numbers to string
	                if ( val == null ) {
	                    val = "";
	                } else if ( typeof val === "number" ) {
	                    val += "";
	                } else if ( jQuery.isArray( val ) ) {
	                    val = jQuery.map(val, function ( value ) {
	                        return value == null ? "" : value + "";
	                    });
	                }
	
	                hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];
	
	                // If set returns undefined, fall back to normal setting
	                if ( !hooks || !("set" in hooks) || hooks.set( this, val, "value" ) === undefined ) {
	                    this.value = val;
	                }
	            });
	        }
	    });
	
	    jQuery.extend({
	        valHooks: {
	            option: {
	                get: function( elem ) {
	                    // Use proper attribute retrieval(#6932, #12072)
	                    var val = jQuery.find.attr( elem, "value" );
	                    return val != null ?
	                        val :
	                        elem.text;
	                }
	            },
	            select: {
	                get: function( elem ) {
	                    var value, option,
	                        options = elem.options,
	                        index = elem.selectedIndex,
	                        one = elem.type === "select-one" || index < 0,
	                        values = one ? null : [],
	                        max = one ? index + 1 : options.length,
	                        i = index < 0 ?
	                            max :
	                            one ? index : 0;
	
	                    // Loop through all the selected options
	                    for ( ; i < max; i++ ) {
	                        option = options[ i ];
	
	                        // oldIE doesn't update selected after form reset (#2551)
	                        if ( ( option.selected || i === index ) &&
	                            // Don't return options that are disabled or in a disabled optgroup
	                            ( jQuery.support.optDisabled ? !option.disabled : option.getAttribute("disabled") === null ) &&
	                            ( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, "optgroup" ) ) ) {
	
	                            // Get the specific value for the option
	                            value = jQuery( option ).val();
	
	                            // We don't need an array for one selects
	                            if ( one ) {
	                                return value;
	                            }
	
	                            // Multi-Selects return an array
	                            values.push( value );
	                        }
	                    }
	
	                    return values;
	                },
	
	                set: function( elem, value ) {
	                    var optionSet, option,
	                        options = elem.options,
	                        values = jQuery.makeArray( value ),
	                        i = options.length;
	
	                    while ( i-- ) {
	                        option = options[ i ];
	                        if ( (option.selected = jQuery.inArray( jQuery(option).val(), values ) >= 0) ) {
	                            optionSet = true;
	                        }
	                    }
	
	                    // force browsers to behave consistently when non-matching value is set
	                    if ( !optionSet ) {
	                        elem.selectedIndex = -1;
	                    }
	                    return values;
	                }
	            }
	        },
	
	        attr: function( elem, name, value ) {
	            var hooks, ret,
	                nType = elem.nodeType;
	
	            // don't get/set attributes on text, comment and attribute nodes
	            if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
	                return;
	            }
	
	            // Fallback to prop when attributes are not supported
	            if ( typeof elem.getAttribute === core_strundefined ) {
	                return jQuery.prop( elem, name, value );
	            }
	
	            // All attributes are lowercase
	            // Grab necessary hook if one is defined
	            if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
	                name = name.toLowerCase();
	                hooks = jQuery.attrHooks[ name ] ||
	                    ( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );
	            }
	
	            if ( value !== undefined ) {
	
	                if ( value === null ) {
	                    jQuery.removeAttr( elem, name );
	
	                } else if ( hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {
	                    return ret;
	
	                } else {
	                    elem.setAttribute( name, value + "" );
	                    return value;
	                }
	
	            } else if ( hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ) {
	                return ret;
	
	            } else {
	                ret = jQuery.find.attr( elem, name );
	
	                // Non-existent attributes return null, we normalize to undefined
	                return ret == null ?
	                    undefined :
	                    ret;
	            }
	        },
	
	        removeAttr: function( elem, value ) {
	            var name, propName,
	                i = 0,
	                attrNames = value && value.match( core_rnotwhite );
	
	            if ( attrNames && elem.nodeType === 1 ) {
	                while ( (name = attrNames[i++]) ) {
	                    propName = jQuery.propFix[ name ] || name;
	
	                    // Boolean attributes get special treatment (#10870)
	                    if ( jQuery.expr.match.bool.test( name ) ) {
	                        // Set corresponding property to false
	                        if ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {
	                            elem[ propName ] = false;
	                            // Support: IE<9
	                            // Also clear defaultChecked/defaultSelected (if appropriate)
	                        } else {
	                            elem[ jQuery.camelCase( "default-" + name ) ] =
	                                elem[ propName ] = false;
	                        }
	
	                        // See #9699 for explanation of this approach (setting first, then removal)
	                    } else {
	                        jQuery.attr( elem, name, "" );
	                    }
	
	                    elem.removeAttribute( getSetAttribute ? name : propName );
	                }
	            }
	        },
	
	        attrHooks: {
	            type: {
	                set: function( elem, value ) {
	                    if ( !jQuery.support.radioValue && value === "radio" && jQuery.nodeName(elem, "input") ) {
	                        // Setting the type on a radio button after the value resets the value in IE6-9
	                        // Reset value to default in case type is set after value during creation
	                        var val = elem.value;
	                        elem.setAttribute( "type", value );
	                        if ( val ) {
	                            elem.value = val;
	                        }
	                        return value;
	                    }
	                }
	            }
	        },
	
	        propFix: {
	            "for": "htmlFor",
	            "class": "className"
	        },
	
	        prop: function( elem, name, value ) {
	            var ret, hooks, notxml,
	                nType = elem.nodeType;
	
	            // don't get/set properties on text, comment and attribute nodes
	            if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
	                return;
	            }
	
	            notxml = nType !== 1 || !jQuery.isXMLDoc( elem );
	
	            if ( notxml ) {
	                // Fix name and attach hooks
	                name = jQuery.propFix[ name ] || name;
	                hooks = jQuery.propHooks[ name ];
	            }
	
	            if ( value !== undefined ) {
	                return hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?
	                    ret :
	                    ( elem[ name ] = value );
	
	            } else {
	                return hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ?
	                    ret :
	                    elem[ name ];
	            }
	        },
	
	        propHooks: {
	            tabIndex: {
	                get: function( elem ) {
	                    // elem.tabIndex doesn't always return the correct value when it hasn't been explicitly set
	                    // http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
	                    // Use proper attribute retrieval(#12072)
	                    var tabindex = jQuery.find.attr( elem, "tabindex" );
	
	                    return tabindex ?
	                        parseInt( tabindex, 10 ) :
	                        rfocusable.test( elem.nodeName ) || rclickable.test( elem.nodeName ) && elem.href ?
	                            0 :
	                            -1;
	                }
	            }
	        }
	    });
	
	// Hooks for boolean attributes
	    boolHook = {
	        set: function( elem, value, name ) {
	            if ( value === false ) {
	                // Remove boolean attributes when set to false
	                jQuery.removeAttr( elem, name );
	            } else if ( getSetInput && getSetAttribute || !ruseDefault.test( name ) ) {
	                // IE<8 needs the *property* name
	                elem.setAttribute( !getSetAttribute && jQuery.propFix[ name ] || name, name );
	
	                // Use defaultChecked and defaultSelected for oldIE
	            } else {
	                elem[ jQuery.camelCase( "default-" + name ) ] = elem[ name ] = true;
	            }
	
	            return name;
	        }
	    };
	    jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
	        var getter = jQuery.expr.attrHandle[ name ] || jQuery.find.attr;
	
	        jQuery.expr.attrHandle[ name ] = getSetInput && getSetAttribute || !ruseDefault.test( name ) ?
	            function( elem, name, isXML ) {
	                var fn = jQuery.expr.attrHandle[ name ],
	                    ret = isXML ?
	                        undefined :
	                        /* jshint eqeqeq: false */
	                        (jQuery.expr.attrHandle[ name ] = undefined) !=
	                        getter( elem, name, isXML ) ?
	
	                            name.toLowerCase() :
	                            null;
	                jQuery.expr.attrHandle[ name ] = fn;
	                return ret;
	            } :
	            function( elem, name, isXML ) {
	                return isXML ?
	                    undefined :
	                    elem[ jQuery.camelCase( "default-" + name ) ] ?
	                        name.toLowerCase() :
	                        null;
	            };
	    });
	
	// fix oldIE attroperties
	    if ( !getSetInput || !getSetAttribute ) {
	        jQuery.attrHooks.value = {
	            set: function( elem, value, name ) {
	                if ( jQuery.nodeName( elem, "input" ) ) {
	                    // Does not return so that setAttribute is also used
	                    elem.defaultValue = value;
	                } else {
	                    // Use nodeHook if defined (#1954); otherwise setAttribute is fine
	                    return nodeHook && nodeHook.set( elem, value, name );
	                }
	            }
	        };
	    }
	
	// IE6/7 do not support getting/setting some attributes with get/setAttribute
	    if ( !getSetAttribute ) {
	
	        // Use this for any attribute in IE6/7
	        // This fixes almost every IE6/7 issue
	        nodeHook = {
	            set: function( elem, value, name ) {
	                // Set the existing or create a new attribute node
	                var ret = elem.getAttributeNode( name );
	                if ( !ret ) {
	                    elem.setAttributeNode(
	                        (ret = elem.ownerDocument.createAttribute( name ))
	                    );
	                }
	
	                ret.value = value += "";
	
	                // Break association with cloned elements by also using setAttribute (#9646)
	                return name === "value" || value === elem.getAttribute( name ) ?
	                    value :
	                    undefined;
	            }
	        };
	        jQuery.expr.attrHandle.id = jQuery.expr.attrHandle.name = jQuery.expr.attrHandle.coords =
	            // Some attributes are constructed with empty-string values when not defined
	            function( elem, name, isXML ) {
	                var ret;
	                return isXML ?
	                    undefined :
	                    (ret = elem.getAttributeNode( name )) && ret.value !== "" ?
	                        ret.value :
	                        null;
	            };
	        jQuery.valHooks.button = {
	            get: function( elem, name ) {
	                var ret = elem.getAttributeNode( name );
	                return ret && ret.specified ?
	                    ret.value :
	                    undefined;
	            },
	            set: nodeHook.set
	        };
	
	        // Set contenteditable to false on removals(#10429)
	        // Setting to empty string throws an error as an invalid value
	        jQuery.attrHooks.contenteditable = {
	            set: function( elem, value, name ) {
	                nodeHook.set( elem, value === "" ? false : value, name );
	            }
	        };
	
	        // Set width and height to auto instead of 0 on empty string( Bug #8150 )
	        // This is for removals
	        jQuery.each([ "width", "height" ], function( i, name ) {
	            jQuery.attrHooks[ name ] = {
	                set: function( elem, value ) {
	                    if ( value === "" ) {
	                        elem.setAttribute( name, "auto" );
	                        return value;
	                    }
	                }
	            };
	        });
	    }
	
	
	// Some attributes require a special call on IE
	// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
	    if ( !jQuery.support.hrefNormalized ) {
	        // href/src property should get the full normalized URL (#10299/#12915)
	        jQuery.each([ "href", "src" ], function( i, name ) {
	            jQuery.propHooks[ name ] = {
	                get: function( elem ) {
	                    return elem.getAttribute( name, 4 );
	                }
	            };
	        });
	    }
	
	    if ( !jQuery.support.style ) {
	        jQuery.attrHooks.style = {
	            get: function( elem ) {
	                // Return undefined in the case of empty string
	                // Note: IE uppercases css property names, but if we were to .toLowerCase()
	                // .cssText, that would destroy case senstitivity in URL's, like in "background"
	                return elem.style.cssText || undefined;
	            },
	            set: function( elem, value ) {
	                return ( elem.style.cssText = value + "" );
	            }
	        };
	    }
	
	// Safari mis-reports the default selected property of an option
	// Accessing the parent's selectedIndex property fixes it
	    if ( !jQuery.support.optSelected ) {
	        jQuery.propHooks.selected = {
	            get: function( elem ) {
	                var parent = elem.parentNode;
	
	                if ( parent ) {
	                    parent.selectedIndex;
	
	                    // Make sure that it also works with optgroups, see #5701
	                    if ( parent.parentNode ) {
	                        parent.parentNode.selectedIndex;
	                    }
	                }
	                return null;
	            }
	        };
	    }
	
	    jQuery.each([
	        "tabIndex",
	        "readOnly",
	        "maxLength",
	        "cellSpacing",
	        "cellPadding",
	        "rowSpan",
	        "colSpan",
	        "useMap",
	        "frameBorder",
	        "contentEditable"
	    ], function() {
	        jQuery.propFix[ this.toLowerCase() ] = this;
	    });
	
	// IE6/7 call enctype encoding
	    if ( !jQuery.support.enctype ) {
	        jQuery.propFix.enctype = "encoding";
	    }
	
	// Radios and checkboxes getter/setter
	    jQuery.each([ "radio", "checkbox" ], function() {
	        jQuery.valHooks[ this ] = {
	            set: function( elem, value ) {
	                if ( jQuery.isArray( value ) ) {
	                    return ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );
	                }
	            }
	        };
	        if ( !jQuery.support.checkOn ) {
	            jQuery.valHooks[ this ].get = function( elem ) {
	                // Support: Webkit
	                // "" is returned instead of "on" if a value isn't specified
	                return elem.getAttribute("value") === null ? "on" : elem.value;
	            };
	        }
	    });
	    var rformElems = /^(?:input|select|textarea)$/i,
	        rkeyEvent = /^key/,
	        rmouseEvent = /^(?:mouse|contextmenu)|click/,
	        rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	        rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;
	
	    function returnTrue() {
	        return true;
	    }
	
	    function returnFalse() {
	        return false;
	    }
	
	    function safeActiveElement() {
	        try {
	            return document.activeElement;
	        } catch ( err ) { }
	    }
	
	    /*
	     * Helper functions for managing events -- not part of the public interface.
	     * Props to Dean Edwards' addEvent library for many of the ideas.
	     */
	    jQuery.event = {
	
	        global: {},
	
	        add: function( elem, types, handler, data, selector ) {
	            var tmp, events, t, handleObjIn,
	                special, eventHandle, handleObj,
	                handlers, type, namespaces, origType,
	                elemData = jQuery._data( elem );
	
	            // Don't attach events to noData or text/comment nodes (but allow plain objects)
	            if ( !elemData ) {
	                return;
	            }
	
	            // Caller can pass in an object of custom data in lieu of the handler
	            if ( handler.handler ) {
	                handleObjIn = handler;
	                handler = handleObjIn.handler;
	                selector = handleObjIn.selector;
	            }
	
	            // Make sure that the handler has a unique ID, used to find/remove it later
	            if ( !handler.guid ) {
	                handler.guid = jQuery.guid++;
	            }
	
	            // Init the element's event structure and main handler, if this is the first
	            if ( !(events = elemData.events) ) {
	                events = elemData.events = {};
	            }
	            if ( !(eventHandle = elemData.handle) ) {
	                eventHandle = elemData.handle = function( e ) {
	                    // Discard the second event of a jQuery.event.trigger() and
	                    // when an event is called after a page has unloaded
	                    return typeof jQuery !== core_strundefined && (!e || jQuery.event.triggered !== e.type) ?
	                        jQuery.event.dispatch.apply( eventHandle.elem, arguments ) :
	                        undefined;
	                };
	                // Add elem as a property of the handle fn to prevent a memory leak with IE non-native events
	                eventHandle.elem = elem;
	            }
	
	            // Handle multiple events separated by a space
	            types = ( types || "" ).match( core_rnotwhite ) || [""];
	            t = types.length;
	            while ( t-- ) {
	                tmp = rtypenamespace.exec( types[t] ) || [];
	                type = origType = tmp[1];
	                namespaces = ( tmp[2] || "" ).split( "." ).sort();
	
	                // There *must* be a type, no attaching namespace-only handlers
	                if ( !type ) {
	                    continue;
	                }
	
	                // If event changes its type, use the special event handlers for the changed type
	                special = jQuery.event.special[ type ] || {};
	
	                // If selector defined, determine special event api type, otherwise given type
	                type = ( selector ? special.delegateType : special.bindType ) || type;
	
	                // Update special based on newly reset type
	                special = jQuery.event.special[ type ] || {};
	
	                // handleObj is passed to all event handlers
	                handleObj = jQuery.extend({
	                    type: type,
	                    origType: origType,
	                    data: data,
	                    handler: handler,
	                    guid: handler.guid,
	                    selector: selector,
	                    needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
	                    namespace: namespaces.join(".")
	                }, handleObjIn );
	
	                // Init the event handler queue if we're the first
	                if ( !(handlers = events[ type ]) ) {
	                    handlers = events[ type ] = [];
	                    handlers.delegateCount = 0;
	
	                    // Only use addEventListener/attachEvent if the special events handler returns false
	                    if ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {
	                        // Bind the global event handler to the element
	                        if ( elem.addEventListener ) {
	                            elem.addEventListener( type, eventHandle, false );
	
	                        } else if ( elem.attachEvent ) {
	                            elem.attachEvent( "on" + type, eventHandle );
	                        }
	                    }
	                }
	
	                if ( special.add ) {
	                    special.add.call( elem, handleObj );
	
	                    if ( !handleObj.handler.guid ) {
	                        handleObj.handler.guid = handler.guid;
	                    }
	                }
	
	                // Add to the element's handler list, delegates in front
	                if ( selector ) {
	                    handlers.splice( handlers.delegateCount++, 0, handleObj );
	                } else {
	                    handlers.push( handleObj );
	                }
	
	                // Keep track of which events have ever been used, for event optimization
	                jQuery.event.global[ type ] = true;
	            }
	
	            // Nullify elem to prevent memory leaks in IE
	            elem = null;
	        },
	
	        // Detach an event or set of events from an element
	        remove: function( elem, types, handler, selector, mappedTypes ) {
	            var j, handleObj, tmp,
	                origCount, t, events,
	                special, handlers, type,
	                namespaces, origType,
	                elemData = jQuery.hasData( elem ) && jQuery._data( elem );
	
	            if ( !elemData || !(events = elemData.events) ) {
	                return;
	            }
	
	            // Once for each type.namespace in types; type may be omitted
	            types = ( types || "" ).match( core_rnotwhite ) || [""];
	            t = types.length;
	            while ( t-- ) {
	                tmp = rtypenamespace.exec( types[t] ) || [];
	                type = origType = tmp[1];
	                namespaces = ( tmp[2] || "" ).split( "." ).sort();
	
	                // Unbind all events (on this namespace, if provided) for the element
	                if ( !type ) {
	                    for ( type in events ) {
	                        jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
	                    }
	                    continue;
	                }
	
	                special = jQuery.event.special[ type ] || {};
	                type = ( selector ? special.delegateType : special.bindType ) || type;
	                handlers = events[ type ] || [];
	                tmp = tmp[2] && new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" );
	
	                // Remove matching events
	                origCount = j = handlers.length;
	                while ( j-- ) {
	                    handleObj = handlers[ j ];
	
	                    if ( ( mappedTypes || origType === handleObj.origType ) &&
	                        ( !handler || handler.guid === handleObj.guid ) &&
	                        ( !tmp || tmp.test( handleObj.namespace ) ) &&
	                        ( !selector || selector === handleObj.selector || selector === "**" && handleObj.selector ) ) {
	                        handlers.splice( j, 1 );
	
	                        if ( handleObj.selector ) {
	                            handlers.delegateCount--;
	                        }
	                        if ( special.remove ) {
	                            special.remove.call( elem, handleObj );
	                        }
	                    }
	                }
	
	                // Remove generic event handler if we removed something and no more handlers exist
	                // (avoids potential for endless recursion during removal of special event handlers)
	                if ( origCount && !handlers.length ) {
	                    if ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {
	                        jQuery.removeEvent( elem, type, elemData.handle );
	                    }
	
	                    delete events[ type ];
	                }
	            }
	
	            // Remove the expando if it's no longer used
	            if ( jQuery.isEmptyObject( events ) ) {
	                delete elemData.handle;
	
	                // removeData also checks for emptiness and clears the expando if empty
	                // so use it instead of delete
	                jQuery._removeData( elem, "events" );
	            }
	        },
	
	        trigger: function( event, data, elem, onlyHandlers ) {
	            var handle, ontype, cur,
	                bubbleType, special, tmp, i,
	                eventPath = [ elem || document ],
	                type = core_hasOwn.call( event, "type" ) ? event.type : event,
	                namespaces = core_hasOwn.call( event, "namespace" ) ? event.namespace.split(".") : [];
	
	            cur = tmp = elem = elem || document;
	
	            // Don't do events on text and comment nodes
	            if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
	                return;
	            }
	
	            // focus/blur morphs to focusin/out; ensure we're not firing them right now
	            if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
	                return;
	            }
	
	            if ( type.indexOf(".") >= 0 ) {
	                // Namespaced trigger; create a regexp to match event type in handle()
	                namespaces = type.split(".");
	                type = namespaces.shift();
	                namespaces.sort();
	            }
	            ontype = type.indexOf(":") < 0 && "on" + type;
	
	            // Caller can pass in a jQuery.Event object, Object, or just an event type string
	            event = event[ jQuery.expando ] ?
	                event :
	                new jQuery.Event( type, typeof event === "object" && event );
	
	            // Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
	            event.isTrigger = onlyHandlers ? 2 : 3;
	            event.namespace = namespaces.join(".");
	            event.namespace_re = event.namespace ?
	                new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" ) :
	                null;
	
	            // Clean up the event in case it is being reused
	            event.result = undefined;
	            if ( !event.target ) {
	                event.target = elem;
	            }
	
	            // Clone any incoming data and prepend the event, creating the handler arg list
	            data = data == null ?
	                [ event ] :
	                jQuery.makeArray( data, [ event ] );
	
	            // Allow special events to draw outside the lines
	            special = jQuery.event.special[ type ] || {};
	            if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
	                return;
	            }
	
	            // Determine event propagation path in advance, per W3C events spec (#9951)
	            // Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
	            if ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {
	
	                bubbleType = special.delegateType || type;
	                if ( !rfocusMorph.test( bubbleType + type ) ) {
	                    cur = cur.parentNode;
	                }
	                for ( ; cur; cur = cur.parentNode ) {
	                    eventPath.push( cur );
	                    tmp = cur;
	                }
	
	                // Only add window if we got to document (e.g., not plain obj or detached DOM)
	                if ( tmp === (elem.ownerDocument || document) ) {
	                    eventPath.push( tmp.defaultView || tmp.parentWindow || window );
	                }
	            }
	
	            // Fire handlers on the event path
	            i = 0;
	            while ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {
	
	                event.type = i > 1 ?
	                    bubbleType :
	                special.bindType || type;
	
	                // jQuery handler
	                handle = ( jQuery._data( cur, "events" ) || {} )[ event.type ] && jQuery._data( cur, "handle" );
	                if ( handle ) {
	                    handle.apply( cur, data );
	                }
	
	                // Native handler
	                handle = ontype && cur[ ontype ];
	                if ( handle && jQuery.acceptData( cur ) && handle.apply && handle.apply( cur, data ) === false ) {
	                    event.preventDefault();
	                }
	            }
	            event.type = type;
	
	            // If nobody prevented the default action, do it now
	            if ( !onlyHandlers && !event.isDefaultPrevented() ) {
	
	                if ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&
	                    jQuery.acceptData( elem ) ) {
	
	                    // Call a native DOM method on the target with the same name name as the event.
	                    // Can't use an .isFunction() check here because IE6/7 fails that test.
	                    // Don't do default actions on window, that's where global variables be (#6170)
	                    if ( ontype && elem[ type ] && !jQuery.isWindow( elem ) ) {
	
	                        // Don't re-trigger an onFOO event when we call its FOO() method
	                        tmp = elem[ ontype ];
	
	                        if ( tmp ) {
	                            elem[ ontype ] = null;
	                        }
	
	                        // Prevent re-triggering of the same event, since we already bubbled it above
	                        jQuery.event.triggered = type;
	                        try {
	                            elem[ type ]();
	                        } catch ( e ) {
	                            // IE<9 dies on focus/blur to hidden element (#1486,#12518)
	                            // only reproducible on winXP IE8 native, not IE9 in IE8 mode
	                        }
	                        jQuery.event.triggered = undefined;
	
	                        if ( tmp ) {
	                            elem[ ontype ] = tmp;
	                        }
	                    }
	                }
	            }
	
	            return event.result;
	        },
	
	        dispatch: function( event ) {
	
	            // Make a writable jQuery.Event from the native event object
	            event = jQuery.event.fix( event );
	
	            var i, ret, handleObj, matched, j,
	                handlerQueue = [],
	                args = core_slice.call( arguments ),
	                handlers = ( jQuery._data( this, "events" ) || {} )[ event.type ] || [],
	                special = jQuery.event.special[ event.type ] || {};
	
	            // Use the fix-ed jQuery.Event rather than the (read-only) native event
	            args[0] = event;
	            event.delegateTarget = this;
	
	            // Call the preDispatch hook for the mapped type, and let it bail if desired
	            if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
	                return;
	            }
	
	            // Determine handlers
	            handlerQueue = jQuery.event.handlers.call( this, event, handlers );
	
	            // Run delegates first; they may want to stop propagation beneath us
	            i = 0;
	            while ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {
	                event.currentTarget = matched.elem;
	
	                j = 0;
	                while ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {
	
	                    // Triggered event must either 1) have no namespace, or
	                    // 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).
	                    if ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {
	
	                        event.handleObj = handleObj;
	                        event.data = handleObj.data;
	
	                        ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
	                            .apply( matched.elem, args );
	
	                        if ( ret !== undefined ) {
	                            if ( (event.result = ret) === false ) {
	                                event.preventDefault();
	                                event.stopPropagation();
	                            }
	                        }
	                    }
	                }
	            }
	
	            // Call the postDispatch hook for the mapped type
	            if ( special.postDispatch ) {
	                special.postDispatch.call( this, event );
	            }
	
	            return event.result;
	        },
	
	        handlers: function( event, handlers ) {
	            var sel, handleObj, matches, i,
	                handlerQueue = [],
	                delegateCount = handlers.delegateCount,
	                cur = event.target;
	
	            // Find delegate handlers
	            // Black-hole SVG <use> instance trees (#13180)
	            // Avoid non-left-click bubbling in Firefox (#3861)
	            if ( delegateCount && cur.nodeType && (!event.button || event.type !== "click") ) {
	
	                /* jshint eqeqeq: false */
	                for ( ; cur != this; cur = cur.parentNode || this ) {
	                    /* jshint eqeqeq: true */
	
	                    // Don't check non-elements (#13208)
	                    // Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
	                    if ( cur.nodeType === 1 && (cur.disabled !== true || event.type !== "click") ) {
	                        matches = [];
	                        for ( i = 0; i < delegateCount; i++ ) {
	                            handleObj = handlers[ i ];
	
	                            // Don't conflict with Object.prototype properties (#13203)
	                            sel = handleObj.selector + " ";
	
	                            if ( matches[ sel ] === undefined ) {
	                                matches[ sel ] = handleObj.needsContext ?
	                                jQuery( sel, this ).index( cur ) >= 0 :
	                                    jQuery.find( sel, this, null, [ cur ] ).length;
	                            }
	                            if ( matches[ sel ] ) {
	                                matches.push( handleObj );
	                            }
	                        }
	                        if ( matches.length ) {
	                            handlerQueue.push({ elem: cur, handlers: matches });
	                        }
	                    }
	                }
	            }
	
	            // Add the remaining (directly-bound) handlers
	            if ( delegateCount < handlers.length ) {
	                handlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });
	            }
	
	            return handlerQueue;
	        },
	
	        fix: function( event ) {
	            if ( event[ jQuery.expando ] ) {
	                return event;
	            }
	
	            // Create a writable copy of the event object and normalize some properties
	            var i, prop, copy,
	                type = event.type,
	                originalEvent = event,
	                fixHook = this.fixHooks[ type ];
	
	            if ( !fixHook ) {
	                this.fixHooks[ type ] = fixHook =
	                    rmouseEvent.test( type ) ? this.mouseHooks :
	                        rkeyEvent.test( type ) ? this.keyHooks :
	                        {};
	            }
	            copy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;
	
	            event = new jQuery.Event( originalEvent );
	
	            i = copy.length;
	            while ( i-- ) {
	                prop = copy[ i ];
	                event[ prop ] = originalEvent[ prop ];
	            }
	
	            // Support: IE<9
	            // Fix target property (#1925)
	            if ( !event.target ) {
	                event.target = originalEvent.srcElement || document;
	            }
	
	            // Support: Chrome 23+, Safari?
	            // Target should not be a text node (#504, #13143)
	            if ( event.target.nodeType === 3 ) {
	                event.target = event.target.parentNode;
	            }
	
	            // Support: IE<9
	            // For mouse/key events, metaKey==false if it's undefined (#3368, #11328)
	            event.metaKey = !!event.metaKey;
	
	            return fixHook.filter ? fixHook.filter( event, originalEvent ) : event;
	        },
	
	        // Includes some event props shared by KeyEvent and MouseEvent
	        props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
	
	        fixHooks: {},
	
	        keyHooks: {
	            props: "char charCode key keyCode".split(" "),
	            filter: function( event, original ) {
	
	                // Add which for key events
	                if ( event.which == null ) {
	                    event.which = original.charCode != null ? original.charCode : original.keyCode;
	                }
	
	                return event;
	            }
	        },
	
	        mouseHooks: {
	            props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
	            filter: function( event, original ) {
	                var body, eventDoc, doc,
	                    button = original.button,
	                    fromElement = original.fromElement;
	
	                // Calculate pageX/Y if missing and clientX/Y available
	                if ( event.pageX == null && original.clientX != null ) {
	                    eventDoc = event.target.ownerDocument || document;
	                    doc = eventDoc.documentElement;
	                    body = eventDoc.body;
	
	                    event.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );
	                    event.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );
	                }
	
	                // Add relatedTarget, if necessary
	                if ( !event.relatedTarget && fromElement ) {
	                    event.relatedTarget = fromElement === event.target ? original.toElement : fromElement;
	                }
	
	                // Add which for click: 1 === left; 2 === middle; 3 === right
	                // Note: button is not normalized, so don't use it
	                if ( !event.which && button !== undefined ) {
	                    event.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );
	                }
	
	                return event;
	            }
	        },
	
	        special: {
	            load: {
	                // Prevent triggered image.load events from bubbling to window.load
	                noBubble: true
	            },
	            focus: {
	                // Fire native event if possible so blur/focus sequence is correct
	                trigger: function() {
	                    if ( this !== safeActiveElement() && this.focus ) {
	                        try {
	                            this.focus();
	                            return false;
	                        } catch ( e ) {
	                            // Support: IE<9
	                            // If we error on focus to hidden element (#1486, #12518),
	                            // let .trigger() run the handlers
	                        }
	                    }
	                },
	                delegateType: "focusin"
	            },
	            blur: {
	                trigger: function() {
	                    if ( this === safeActiveElement() && this.blur ) {
	                        this.blur();
	                        return false;
	                    }
	                },
	                delegateType: "focusout"
	            },
	            click: {
	                // For checkbox, fire native event so checked state will be right
	                trigger: function() {
	                    if ( jQuery.nodeName( this, "input" ) && this.type === "checkbox" && this.click ) {
	                        this.click();
	                        return false;
	                    }
	                },
	
	                // For cross-browser consistency, don't fire native .click() on links
	                _default: function( event ) {
	                    return jQuery.nodeName( event.target, "a" );
	                }
	            },
	
	            beforeunload: {
	                postDispatch: function( event ) {
	
	                    // Even when returnValue equals to undefined Firefox will still show alert
	                    if ( event.result !== undefined ) {
	                        event.originalEvent.returnValue = event.result;
	                    }
	                }
	            }
	        },
	
	        simulate: function( type, elem, event, bubble ) {
	            // Piggyback on a donor event to simulate a different one.
	            // Fake originalEvent to avoid donor's stopPropagation, but if the
	            // simulated event prevents default then we do the same on the donor.
	            var e = jQuery.extend(
	                new jQuery.Event(),
	                event,
	                {
	                    type: type,
	                    isSimulated: true,
	                    originalEvent: {}
	                }
	            );
	            if ( bubble ) {
	                jQuery.event.trigger( e, null, elem );
	            } else {
	                jQuery.event.dispatch.call( elem, e );
	            }
	            if ( e.isDefaultPrevented() ) {
	                event.preventDefault();
	            }
	        }
	    };
	
	    jQuery.removeEvent = document.removeEventListener ?
	        function( elem, type, handle ) {
	            if ( elem.removeEventListener ) {
	                elem.removeEventListener( type, handle, false );
	            }
	        } :
	        function( elem, type, handle ) {
	            var name = "on" + type;
	
	            if ( elem.detachEvent ) {
	
	                // #8545, #7054, preventing memory leaks for custom events in IE6-8
	                // detachEvent needed property on element, by name of that event, to properly expose it to GC
	                if ( typeof elem[ name ] === core_strundefined ) {
	                    elem[ name ] = null;
	                }
	
	                elem.detachEvent( name, handle );
	            }
	        };
	
	    jQuery.Event = function( src, props ) {
	        // Allow instantiation without the 'new' keyword
	        if ( !(this instanceof jQuery.Event) ) {
	            return new jQuery.Event( src, props );
	        }
	
	        // Event object
	        if ( src && src.type ) {
	            this.originalEvent = src;
	            this.type = src.type;
	
	            // Events bubbling up the document may have been marked as prevented
	            // by a handler lower down the tree; reflect the correct value.
	            this.isDefaultPrevented = ( src.defaultPrevented || src.returnValue === false ||
	            src.getPreventDefault && src.getPreventDefault() ) ? returnTrue : returnFalse;
	
	            // Event type
	        } else {
	            this.type = src;
	        }
	
	        // Put explicitly provided properties onto the event object
	        if ( props ) {
	            jQuery.extend( this, props );
	        }
	
	        // Create a timestamp if incoming event doesn't have one
	        this.timeStamp = src && src.timeStamp || jQuery.now();
	
	        // Mark it as fixed
	        this[ jQuery.expando ] = true;
	    };
	
	// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
	// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
	    jQuery.Event.prototype = {
	        isDefaultPrevented: returnFalse,
	        isPropagationStopped: returnFalse,
	        isImmediatePropagationStopped: returnFalse,
	
	        preventDefault: function() {
	            var e = this.originalEvent;
	
	            this.isDefaultPrevented = returnTrue;
	            if ( !e ) {
	                return;
	            }
	
	            // If preventDefault exists, run it on the original event
	            if ( e.preventDefault ) {
	                e.preventDefault();
	
	                // Support: IE
	                // Otherwise set the returnValue property of the original event to false
	            } else {
	                e.returnValue = false;
	            }
	        },
	        stopPropagation: function() {
	            var e = this.originalEvent;
	
	            this.isPropagationStopped = returnTrue;
	            if ( !e ) {
	                return;
	            }
	            // If stopPropagation exists, run it on the original event
	            if ( e.stopPropagation ) {
	                e.stopPropagation();
	            }
	
	            // Support: IE
	            // Set the cancelBubble property of the original event to true
	            e.cancelBubble = true;
	        },
	        stopImmediatePropagation: function() {
	            this.isImmediatePropagationStopped = returnTrue;
	            this.stopPropagation();
	        }
	    };
	
	// Create mouseenter/leave events using mouseover/out and event-time checks
	    jQuery.each({
	        mouseenter: "mouseover",
	        mouseleave: "mouseout"
	    }, function( orig, fix ) {
	        jQuery.event.special[ orig ] = {
	            delegateType: fix,
	            bindType: fix,
	
	            handle: function( event ) {
	                var ret,
	                    target = this,
	                    related = event.relatedTarget,
	                    handleObj = event.handleObj;
	
	                // For mousenter/leave call the handler if related is outside the target.
	                // NB: No relatedTarget if the mouse left/entered the browser window
	                if ( !related || (related !== target && !jQuery.contains( target, related )) ) {
	                    event.type = handleObj.origType;
	                    ret = handleObj.handler.apply( this, arguments );
	                    event.type = fix;
	                }
	                return ret;
	            }
	        };
	    });
	
	// IE submit delegation
	    if ( !jQuery.support.submitBubbles ) {
	
	        jQuery.event.special.submit = {
	            setup: function() {
	                // Only need this for delegated form submit events
	                if ( jQuery.nodeName( this, "form" ) ) {
	                    return false;
	                }
	
	                // Lazy-add a submit handler when a descendant form may potentially be submitted
	                jQuery.event.add( this, "click._submit keypress._submit", function( e ) {
	                    // Node name check avoids a VML-related crash in IE (#9807)
	                    var elem = e.target,
	                        form = jQuery.nodeName( elem, "input" ) || jQuery.nodeName( elem, "button" ) ? elem.form : undefined;
	                    if ( form && !jQuery._data( form, "submitBubbles" ) ) {
	                        jQuery.event.add( form, "submit._submit", function( event ) {
	                            event._submit_bubble = true;
	                        });
	                        jQuery._data( form, "submitBubbles", true );
	                    }
	                });
	                // return undefined since we don't need an event listener
	            },
	
	            postDispatch: function( event ) {
	                // If form was submitted by the user, bubble the event up the tree
	                if ( event._submit_bubble ) {
	                    delete event._submit_bubble;
	                    if ( this.parentNode && !event.isTrigger ) {
	                        jQuery.event.simulate( "submit", this.parentNode, event, true );
	                    }
	                }
	            },
	
	            teardown: function() {
	                // Only need this for delegated form submit events
	                if ( jQuery.nodeName( this, "form" ) ) {
	                    return false;
	                }
	
	                // Remove delegated handlers; cleanData eventually reaps submit handlers attached above
	                jQuery.event.remove( this, "._submit" );
	            }
	        };
	    }
	
	// IE change delegation and checkbox/radio fix
	    if ( !jQuery.support.changeBubbles ) {
	
	        jQuery.event.special.change = {
	
	            setup: function() {
	
	                if ( rformElems.test( this.nodeName ) ) {
	                    // IE doesn't fire change on a check/radio until blur; trigger it on click
	                    // after a propertychange. Eat the blur-change in special.change.handle.
	                    // This still fires onchange a second time for check/radio after blur.
	                    if ( this.type === "checkbox" || this.type === "radio" ) {
	                        jQuery.event.add( this, "propertychange._change", function( event ) {
	                            if ( event.originalEvent.propertyName === "checked" ) {
	                                this._just_changed = true;
	                            }
	                        });
	                        jQuery.event.add( this, "click._change", function( event ) {
	                            if ( this._just_changed && !event.isTrigger ) {
	                                this._just_changed = false;
	                            }
	                            // Allow triggered, simulated change events (#11500)
	                            jQuery.event.simulate( "change", this, event, true );
	                        });
	                    }
	                    return false;
	                }
	                // Delegated event; lazy-add a change handler on descendant inputs
	                jQuery.event.add( this, "beforeactivate._change", function( e ) {
	                    var elem = e.target;
	
	                    if ( rformElems.test( elem.nodeName ) && !jQuery._data( elem, "changeBubbles" ) ) {
	                        jQuery.event.add( elem, "change._change", function( event ) {
	                            if ( this.parentNode && !event.isSimulated && !event.isTrigger ) {
	                                jQuery.event.simulate( "change", this.parentNode, event, true );
	                            }
	                        });
	                        jQuery._data( elem, "changeBubbles", true );
	                    }
	                });
	            },
	
	            handle: function( event ) {
	                var elem = event.target;
	
	                // Swallow native change events from checkbox/radio, we already triggered them above
	                if ( this !== elem || event.isSimulated || event.isTrigger || (elem.type !== "radio" && elem.type !== "checkbox") ) {
	                    return event.handleObj.handler.apply( this, arguments );
	                }
	            },
	
	            teardown: function() {
	                jQuery.event.remove( this, "._change" );
	
	                return !rformElems.test( this.nodeName );
	            }
	        };
	    }
	
	// Create "bubbling" focus and blur events
	    if ( !jQuery.support.focusinBubbles ) {
	        jQuery.each({ focus: "focusin", blur: "focusout" }, function( orig, fix ) {
	
	            // Attach a single capturing handler while someone wants focusin/focusout
	            var attaches = 0,
	                handler = function( event ) {
	                    jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );
	                };
	
	            jQuery.event.special[ fix ] = {
	                setup: function() {
	                    if ( attaches++ === 0 ) {
	                        document.addEventListener( orig, handler, true );
	                    }
	                },
	                teardown: function() {
	                    if ( --attaches === 0 ) {
	                        document.removeEventListener( orig, handler, true );
	                    }
	                }
	            };
	        });
	    }
	
	    jQuery.fn.extend({
	
	        on: function( types, selector, data, fn, /*INTERNAL*/ one ) {
	            var type, origFn;
	
	            // Types can be a map of types/handlers
	            if ( typeof types === "object" ) {
	                // ( types-Object, selector, data )
	                if ( typeof selector !== "string" ) {
	                    // ( types-Object, data )
	                    data = data || selector;
	                    selector = undefined;
	                }
	                for ( type in types ) {
	                    this.on( type, selector, data, types[ type ], one );
	                }
	                return this;
	            }
	
	            if ( data == null && fn == null ) {
	                // ( types, fn )
	                fn = selector;
	                data = selector = undefined;
	            } else if ( fn == null ) {
	                if ( typeof selector === "string" ) {
	                    // ( types, selector, fn )
	                    fn = data;
	                    data = undefined;
	                } else {
	                    // ( types, data, fn )
	                    fn = data;
	                    data = selector;
	                    selector = undefined;
	                }
	            }
	            if ( fn === false ) {
	                fn = returnFalse;
	            } else if ( !fn ) {
	                return this;
	            }
	
	            if ( one === 1 ) {
	                origFn = fn;
	                fn = function( event ) {
	                    // Can use an empty set, since event contains the info
	                    jQuery().off( event );
	                    return origFn.apply( this, arguments );
	                };
	                // Use same guid so caller can remove using origFn
	                fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
	            }
	            return this.each( function() {
	                jQuery.event.add( this, types, fn, data, selector );
	            });
	        },
	        one: function( types, selector, data, fn ) {
	            return this.on( types, selector, data, fn, 1 );
	        },
	        off: function( types, selector, fn ) {
	            var handleObj, type;
	            if ( types && types.preventDefault && types.handleObj ) {
	                // ( event )  dispatched jQuery.Event
	                handleObj = types.handleObj;
	                jQuery( types.delegateTarget ).off(
	                    handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType,
	                    handleObj.selector,
	                    handleObj.handler
	                );
	                return this;
	            }
	            if ( typeof types === "object" ) {
	                // ( types-object [, selector] )
	                for ( type in types ) {
	                    this.off( type, selector, types[ type ] );
	                }
	                return this;
	            }
	            if ( selector === false || typeof selector === "function" ) {
	                // ( types [, fn] )
	                fn = selector;
	                selector = undefined;
	            }
	            if ( fn === false ) {
	                fn = returnFalse;
	            }
	            return this.each(function() {
	                jQuery.event.remove( this, types, fn, selector );
	            });
	        },
	
	        trigger: function( type, data ) {
	            return this.each(function() {
	                jQuery.event.trigger( type, data, this );
	            });
	        },
	        triggerHandler: function( type, data ) {
	            var elem = this[0];
	            if ( elem ) {
	                return jQuery.event.trigger( type, data, elem, true );
	            }
	        }
	    });
	    var isSimple = /^.[^:#\[\.,]*$/,
	        rparentsprev = /^(?:parents|prev(?:Until|All))/,
	        rneedsContext = jQuery.expr.match.needsContext,
	    // methods guaranteed to produce a unique set when starting from a unique set
	        guaranteedUnique = {
	            children: true,
	            contents: true,
	            next: true,
	            prev: true
	        };
	
	    jQuery.fn.extend({
	        find: function( selector ) {
	            var i,
	                ret = [],
	                self = this,
	                len = self.length;
	
	            if ( typeof selector !== "string" ) {
	                return this.pushStack( jQuery( selector ).filter(function() {
	                    for ( i = 0; i < len; i++ ) {
	                        if ( jQuery.contains( self[ i ], this ) ) {
	                            return true;
	                        }
	                    }
	                }) );
	            }
	
	            for ( i = 0; i < len; i++ ) {
	                jQuery.find( selector, self[ i ], ret );
	            }
	
	            // Needed because $( selector, context ) becomes $( context ).find( selector )
	            ret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );
	            ret.selector = this.selector ? this.selector + " " + selector : selector;
	            return ret;
	        },
	
	        has: function( target ) {
	            var i,
	                targets = jQuery( target, this ),
	                len = targets.length;
	
	            return this.filter(function() {
	                for ( i = 0; i < len; i++ ) {
	                    if ( jQuery.contains( this, targets[i] ) ) {
	                        return true;
	                    }
	                }
	            });
	        },
	
	        not: function( selector ) {
	            return this.pushStack( winnow(this, selector || [], true) );
	        },
	
	        filter: function( selector ) {
	            return this.pushStack( winnow(this, selector || [], false) );
	        },
	
	        is: function( selector ) {
	            return !!winnow(
	                this,
	
	                // If this is a positional/relative selector, check membership in the returned set
	                // so $("p:first").is("p:last") won't return true for a doc with two "p".
	                typeof selector === "string" && rneedsContext.test( selector ) ?
	                    jQuery( selector ) :
	                selector || [],
	                false
	            ).length;
	        },
	
	        closest: function( selectors, context ) {
	            var cur,
	                i = 0,
	                l = this.length,
	                ret = [],
	                pos = rneedsContext.test( selectors ) || typeof selectors !== "string" ?
	                    jQuery( selectors, context || this.context ) :
	                    0;
	
	            for ( ; i < l; i++ ) {
	                for ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {
	                    // Always skip document fragments
	                    if ( cur.nodeType < 11 && (pos ?
	                        pos.index(cur) > -1 :
	
	                            // Don't pass non-elements to Sizzle
	                        cur.nodeType === 1 &&
	                        jQuery.find.matchesSelector(cur, selectors)) ) {
	
	                        cur = ret.push( cur );
	                        break;
	                    }
	                }
	            }
	
	            return this.pushStack( ret.length > 1 ? jQuery.unique( ret ) : ret );
	        },
	
	        // Determine the position of an element within
	        // the matched set of elements
	        index: function( elem ) {
	
	            // No argument, return index in parent
	            if ( !elem ) {
	                return ( this[0] && this[0].parentNode ) ? this.first().prevAll().length : -1;
	            }
	
	            // index in selector
	            if ( typeof elem === "string" ) {
	                return jQuery.inArray( this[0], jQuery( elem ) );
	            }
	
	            // Locate the position of the desired element
	            return jQuery.inArray(
	                // If it receives a jQuery object, the first element is used
	                elem.jquery ? elem[0] : elem, this );
	        },
	
	        add: function( selector, context ) {
	            var set = typeof selector === "string" ?
	                    jQuery( selector, context ) :
	                    jQuery.makeArray( selector && selector.nodeType ? [ selector ] : selector ),
	                all = jQuery.merge( this.get(), set );
	
	            return this.pushStack( jQuery.unique(all) );
	        },
	
	        addBack: function( selector ) {
	            return this.add( selector == null ?
	                this.prevObject : this.prevObject.filter(selector)
	            );
	        }
	    });
	
	    function sibling( cur, dir ) {
	        do {
	            cur = cur[ dir ];
	        } while ( cur && cur.nodeType !== 1 );
	
	        return cur;
	    }
	
	    jQuery.each({
	        parent: function( elem ) {
	            var parent = elem.parentNode;
	            return parent && parent.nodeType !== 11 ? parent : null;
	        },
	        parents: function( elem ) {
	            return jQuery.dir( elem, "parentNode" );
	        },
	        parentsUntil: function( elem, i, until ) {
	            return jQuery.dir( elem, "parentNode", until );
	        },
	        next: function( elem ) {
	            return sibling( elem, "nextSibling" );
	        },
	        prev: function( elem ) {
	            return sibling( elem, "previousSibling" );
	        },
	        nextAll: function( elem ) {
	            return jQuery.dir( elem, "nextSibling" );
	        },
	        prevAll: function( elem ) {
	            return jQuery.dir( elem, "previousSibling" );
	        },
	        nextUntil: function( elem, i, until ) {
	            return jQuery.dir( elem, "nextSibling", until );
	        },
	        prevUntil: function( elem, i, until ) {
	            return jQuery.dir( elem, "previousSibling", until );
	        },
	        siblings: function( elem ) {
	            return jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );
	        },
	        children: function( elem ) {
	            return jQuery.sibling( elem.firstChild );
	        },
	        contents: function( elem ) {
	            return jQuery.nodeName( elem, "iframe" ) ?
	            elem.contentDocument || elem.contentWindow.document :
	                jQuery.merge( [], elem.childNodes );
	        }
	    }, function( name, fn ) {
	        jQuery.fn[ name ] = function( until, selector ) {
	            var ret = jQuery.map( this, fn, until );
	
	            if ( name.slice( -5 ) !== "Until" ) {
	                selector = until;
	            }
	
	            if ( selector && typeof selector === "string" ) {
	                ret = jQuery.filter( selector, ret );
	            }
	
	            if ( this.length > 1 ) {
	                // Remove duplicates
	                if ( !guaranteedUnique[ name ] ) {
	                    ret = jQuery.unique( ret );
	                }
	
	                // Reverse order for parents* and prev-derivatives
	                if ( rparentsprev.test( name ) ) {
	                    ret = ret.reverse();
	                }
	            }
	
	            return this.pushStack( ret );
	        };
	    });
	
	    jQuery.extend({
	        filter: function( expr, elems, not ) {
	            var elem = elems[ 0 ];
	
	            if ( not ) {
	                expr = ":not(" + expr + ")";
	            }
	
	            return elems.length === 1 && elem.nodeType === 1 ?
	                jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :
	                jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
	                    return elem.nodeType === 1;
	                }));
	        },
	
	        dir: function( elem, dir, until ) {
	            var matched = [],
	                cur = elem[ dir ];
	
	            while ( cur && cur.nodeType !== 9 && (until === undefined || cur.nodeType !== 1 || !jQuery( cur ).is( until )) ) {
	                if ( cur.nodeType === 1 ) {
	                    matched.push( cur );
	                }
	                cur = cur[dir];
	            }
	            return matched;
	        },
	
	        sibling: function( n, elem ) {
	            var r = [];
	
	            for ( ; n; n = n.nextSibling ) {
	                if ( n.nodeType === 1 && n !== elem ) {
	                    r.push( n );
	                }
	            }
	
	            return r;
	        }
	    });
	
	// Implement the identical functionality for filter and not
	    function winnow( elements, qualifier, not ) {
	        if ( jQuery.isFunction( qualifier ) ) {
	            return jQuery.grep( elements, function( elem, i ) {
	                /* jshint -W018 */
	                return !!qualifier.call( elem, i, elem ) !== not;
	            });
	
	        }
	
	        if ( qualifier.nodeType ) {
	            return jQuery.grep( elements, function( elem ) {
	                return ( elem === qualifier ) !== not;
	            });
	
	        }
	
	        if ( typeof qualifier === "string" ) {
	            if ( isSimple.test( qualifier ) ) {
	                return jQuery.filter( qualifier, elements, not );
	            }
	
	            qualifier = jQuery.filter( qualifier, elements );
	        }
	
	        return jQuery.grep( elements, function( elem ) {
	            return ( jQuery.inArray( elem, qualifier ) >= 0 ) !== not;
	        });
	    }
	    function createSafeFragment( document ) {
	        var list = nodeNames.split( "|" ),
	            safeFrag = document.createDocumentFragment();
	
	        if ( safeFrag.createElement ) {
	            while ( list.length ) {
	                safeFrag.createElement(
	                    list.pop()
	                );
	            }
	        }
	        return safeFrag;
	    }
	
	    var nodeNames = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|" +
	            "header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
	        rinlinejQuery = / jQuery\d+="(?:null|\d+)"/g,
	        rnoshimcache = new RegExp("<(?:" + nodeNames + ")[\\s/>]", "i"),
	        rleadingWhitespace = /^\s+/,
	        rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
	        rtagName = /<([\w:]+)/,
	        rtbody = /<tbody/i,
	        rhtml = /<|&#?\w+;/,
	        rnoInnerhtml = /<(?:script|style|link)/i,
	        manipulation_rcheckableType = /^(?:checkbox|radio)$/i,
	    // checked="checked" or checked
	        rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	        rscriptType = /^$|\/(?:java|ecma)script/i,
	        rscriptTypeMasked = /^true\/(.*)/,
	        rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
	
	    // We have to close these tags to support XHTML (#13200)
	        wrapMap = {
	            option: [ 1, "<select multiple='multiple'>", "</select>" ],
	            legend: [ 1, "<fieldset>", "</fieldset>" ],
	            area: [ 1, "<map>", "</map>" ],
	            param: [ 1, "<object>", "</object>" ],
	            thead: [ 1, "<table>", "</table>" ],
	            tr: [ 2, "<table><tbody>", "</tbody></table>" ],
	            col: [ 2, "<table><tbody></tbody><colgroup>", "</colgroup></table>" ],
	            td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],
	
	            // IE6-8 can't serialize link, script, style, or any html5 (NoScope) tags,
	            // unless wrapped in a div with non-breaking characters in front of it.
	            _default: jQuery.support.htmlSerialize ? [ 0, "", "" ] : [ 1, "X<div>", "</div>"  ]
	        },
	        safeFragment = createSafeFragment( document ),
	        fragmentDiv = safeFragment.appendChild( document.createElement("div") );
	
	    wrapMap.optgroup = wrapMap.option;
	    wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
	    wrapMap.th = wrapMap.td;
	
	    jQuery.fn.extend({
	        text: function( value ) {
	            return jQuery.access( this, function( value ) {
	                return value === undefined ?
	                    jQuery.text( this ) :
	                    this.empty().append( ( this[0] && this[0].ownerDocument || document ).createTextNode( value ) );
	            }, null, value, arguments.length );
	        },
	
	        append: function() {
	            return this.domManip( arguments, function( elem ) {
	                if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
	                    var target = manipulationTarget( this, elem );
	                    target.appendChild( elem );
	                }
	            });
	        },
	
	        prepend: function() {
	            return this.domManip( arguments, function( elem ) {
	                if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
	                    var target = manipulationTarget( this, elem );
	                    target.insertBefore( elem, target.firstChild );
	                }
	            });
	        },
	
	        before: function() {
	            return this.domManip( arguments, function( elem ) {
	                if ( this.parentNode ) {
	                    this.parentNode.insertBefore( elem, this );
	                }
	            });
	        },
	
	        after: function() {
	            return this.domManip( arguments, function( elem ) {
	                if ( this.parentNode ) {
	                    this.parentNode.insertBefore( elem, this.nextSibling );
	                }
	            });
	        },
	
	        // keepData is for internal use only--do not document
	        remove: function( selector, keepData ) {
	            var elem,
	                elems = selector ? jQuery.filter( selector, this ) : this,
	                i = 0;
	
	            for ( ; (elem = elems[i]) != null; i++ ) {
	
	                if ( !keepData && elem.nodeType === 1 ) {
	                    jQuery.cleanData( getAll( elem ) );
	                }
	
	                if ( elem.parentNode ) {
	                    if ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {
	                        setGlobalEval( getAll( elem, "script" ) );
	                    }
	                    elem.parentNode.removeChild( elem );
	                }
	            }
	
	            return this;
	        },
	
	        empty: function() {
	            var elem,
	                i = 0;
	
	            for ( ; (elem = this[i]) != null; i++ ) {
	                // Remove element nodes and prevent memory leaks
	                if ( elem.nodeType === 1 ) {
	                    jQuery.cleanData( getAll( elem, false ) );
	                }
	
	                // Remove any remaining nodes
	                while ( elem.firstChild ) {
	                    elem.removeChild( elem.firstChild );
	                }
	
	                // If this is a select, ensure that it displays empty (#12336)
	                // Support: IE<9
	                if ( elem.options && jQuery.nodeName( elem, "select" ) ) {
	                    elem.options.length = 0;
	                }
	            }
	
	            return this;
	        },
	
	        clone: function( dataAndEvents, deepDataAndEvents ) {
	            dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
	            deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;
	
	            return this.map( function () {
	                return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
	            });
	        },
	
	        html: function( value ) {
	            return jQuery.access( this, function( value ) {
	                var elem = this[0] || {},
	                    i = 0,
	                    l = this.length;
	
	                if ( value === undefined ) {
	                    return elem.nodeType === 1 ?
	                        elem.innerHTML.replace( rinlinejQuery, "" ) :
	                        undefined;
	                }
	
	                // See if we can take a shortcut and just use innerHTML
	                if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
	                    ( jQuery.support.htmlSerialize || !rnoshimcache.test( value )  ) &&
	                    ( jQuery.support.leadingWhitespace || !rleadingWhitespace.test( value ) ) &&
	                    !wrapMap[ ( rtagName.exec( value ) || ["", ""] )[1].toLowerCase() ] ) {
	
	                    value = value.replace( rxhtmlTag, "<$1></$2>" );
	
	                    try {
	                        for (; i < l; i++ ) {
	                            // Remove element nodes and prevent memory leaks
	                            elem = this[i] || {};
	                            if ( elem.nodeType === 1 ) {
	                                jQuery.cleanData( getAll( elem, false ) );
	                                elem.innerHTML = value;
	                            }
	                        }
	
	                        elem = 0;
	
	                        // If using innerHTML throws an exception, use the fallback method
	                    } catch(e) {}
	                }
	
	                if ( elem ) {
	                    this.empty().append( value );
	                }
	            }, null, value, arguments.length );
	        },
	
	        replaceWith: function() {
	            var
	            // Snapshot the DOM in case .domManip sweeps something relevant into its fragment
	                args = jQuery.map( this, function( elem ) {
	                    return [ elem.nextSibling, elem.parentNode ];
	                }),
	                i = 0;
	
	            // Make the changes, replacing each context element with the new content
	            this.domManip( arguments, function( elem ) {
	                var next = args[ i++ ],
	                    parent = args[ i++ ];
	
	                if ( parent ) {
	                    // Don't use the snapshot next if it has moved (#13810)
	                    if ( next && next.parentNode !== parent ) {
	                        next = this.nextSibling;
	                    }
	                    jQuery( this ).remove();
	                    parent.insertBefore( elem, next );
	                }
	                // Allow new content to include elements from the context set
	            }, true );
	
	            // Force removal if there was no new content (e.g., from empty arguments)
	            return i ? this : this.remove();
	        },
	
	        detach: function( selector ) {
	            return this.remove( selector, true );
	        },
	
	        domManip: function( args, callback, allowIntersection ) {
	
	            // Flatten any nested arrays
	            args = core_concat.apply( [], args );
	
	            var first, node, hasScripts,
	                scripts, doc, fragment,
	                i = 0,
	                l = this.length,
	                set = this,
	                iNoClone = l - 1,
	                value = args[0],
	                isFunction = jQuery.isFunction( value );
	
	            // We can't cloneNode fragments that contain checked, in WebKit
	            if ( isFunction || !( l <= 1 || typeof value !== "string" || jQuery.support.checkClone || !rchecked.test( value ) ) ) {
	                return this.each(function( index ) {
	                    var self = set.eq( index );
	                    if ( isFunction ) {
	                        args[0] = value.call( this, index, self.html() );
	                    }
	                    self.domManip( args, callback, allowIntersection );
	                });
	            }
	
	            if ( l ) {
	                fragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, !allowIntersection && this );
	                first = fragment.firstChild;
	
	                if ( fragment.childNodes.length === 1 ) {
	                    fragment = first;
	                }
	
	                if ( first ) {
	                    scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
	                    hasScripts = scripts.length;
	
	                    // Use the original fragment for the last item instead of the first because it can end up
	                    // being emptied incorrectly in certain situations (#8070).
	                    for ( ; i < l; i++ ) {
	                        node = fragment;
	
	                        if ( i !== iNoClone ) {
	                            node = jQuery.clone( node, true, true );
	
	                            // Keep references to cloned scripts for later restoration
	                            if ( hasScripts ) {
	                                jQuery.merge( scripts, getAll( node, "script" ) );
	                            }
	                        }
	
	                        callback.call( this[i], node, i );
	                    }
	
	                    if ( hasScripts ) {
	                        doc = scripts[ scripts.length - 1 ].ownerDocument;
	
	                        // Reenable scripts
	                        jQuery.map( scripts, restoreScript );
	
	                        // Evaluate executable scripts on first document insertion
	                        for ( i = 0; i < hasScripts; i++ ) {
	                            node = scripts[ i ];
	                            if ( rscriptType.test( node.type || "" ) &&
	                                !jQuery._data( node, "globalEval" ) && jQuery.contains( doc, node ) ) {
	
	                                if ( node.src ) {
	                                    // Hope ajax is available...
	                                    jQuery._evalUrl( node.src );
	                                } else {
	                                    jQuery.globalEval( ( node.text || node.textContent || node.innerHTML || "" ).replace( rcleanScript, "" ) );
	                                }
	                            }
	                        }
	                    }
	
	                    // Fix #11809: Avoid leaking memory
	                    fragment = first = null;
	                }
	            }
	
	            return this;
	        }
	    });
	
	// Support: IE<8
	// Manipulating tables requires a tbody
	    function manipulationTarget( elem, content ) {
	        return jQuery.nodeName( elem, "table" ) &&
	        jQuery.nodeName( content.nodeType === 1 ? content : content.firstChild, "tr" ) ?
	
	        elem.getElementsByTagName("tbody")[0] ||
	        elem.appendChild( elem.ownerDocument.createElement("tbody") ) :
	            elem;
	    }
	
	// Replace/restore the type attribute of script elements for safe DOM manipulation
	    function disableScript( elem ) {
	        elem.type = (jQuery.find.attr( elem, "type" ) !== null) + "/" + elem.type;
	        return elem;
	    }
	    function restoreScript( elem ) {
	        var match = rscriptTypeMasked.exec( elem.type );
	        if ( match ) {
	            elem.type = match[1];
	        } else {
	            elem.removeAttribute("type");
	        }
	        return elem;
	    }
	
	// Mark scripts as having already been evaluated
	    function setGlobalEval( elems, refElements ) {
	        var elem,
	            i = 0;
	        for ( ; (elem = elems[i]) != null; i++ ) {
	            jQuery._data( elem, "globalEval", !refElements || jQuery._data( refElements[i], "globalEval" ) );
	        }
	    }
	
	    function cloneCopyEvent( src, dest ) {
	
	        if ( dest.nodeType !== 1 || !jQuery.hasData( src ) ) {
	            return;
	        }
	
	        var type, i, l,
	            oldData = jQuery._data( src ),
	            curData = jQuery._data( dest, oldData ),
	            events = oldData.events;
	
	        if ( events ) {
	            delete curData.handle;
	            curData.events = {};
	
	            for ( type in events ) {
	                for ( i = 0, l = events[ type ].length; i < l; i++ ) {
	                    jQuery.event.add( dest, type, events[ type ][ i ] );
	                }
	            }
	        }
	
	        // make the cloned public data object a copy from the original
	        if ( curData.data ) {
	            curData.data = jQuery.extend( {}, curData.data );
	        }
	    }
	
	    function fixCloneNodeIssues( src, dest ) {
	        var nodeName, e, data;
	
	        // We do not need to do anything for non-Elements
	        if ( dest.nodeType !== 1 ) {
	            return;
	        }
	
	        nodeName = dest.nodeName.toLowerCase();
	
	        // IE6-8 copies events bound via attachEvent when using cloneNode.
	        if ( !jQuery.support.noCloneEvent && dest[ jQuery.expando ] ) {
	            data = jQuery._data( dest );
	
	            for ( e in data.events ) {
	                jQuery.removeEvent( dest, e, data.handle );
	            }
	
	            // Event data gets referenced instead of copied if the expando gets copied too
	            dest.removeAttribute( jQuery.expando );
	        }
	
	        // IE blanks contents when cloning scripts, and tries to evaluate newly-set text
	        if ( nodeName === "script" && dest.text !== src.text ) {
	            disableScript( dest ).text = src.text;
	            restoreScript( dest );
	
	            // IE6-10 improperly clones children of object elements using classid.
	            // IE10 throws NoModificationAllowedError if parent is null, #12132.
	        } else if ( nodeName === "object" ) {
	            if ( dest.parentNode ) {
	                dest.outerHTML = src.outerHTML;
	            }
	
	            // This path appears unavoidable for IE9. When cloning an object
	            // element in IE9, the outerHTML strategy above is not sufficient.
	            // If the src has innerHTML and the destination does not,
	            // copy the src.innerHTML into the dest.innerHTML. #10324
	            if ( jQuery.support.html5Clone && ( src.innerHTML && !jQuery.trim(dest.innerHTML) ) ) {
	                dest.innerHTML = src.innerHTML;
	            }
	
	        } else if ( nodeName === "input" && manipulation_rcheckableType.test( src.type ) ) {
	            // IE6-8 fails to persist the checked state of a cloned checkbox
	            // or radio button. Worse, IE6-7 fail to give the cloned element
	            // a checked appearance if the defaultChecked value isn't also set
	
	            dest.defaultChecked = dest.checked = src.checked;
	
	            // IE6-7 get confused and end up setting the value of a cloned
	            // checkbox/radio button to an empty string instead of "on"
	            if ( dest.value !== src.value ) {
	                dest.value = src.value;
	            }
	
	            // IE6-8 fails to return the selected option to the default selected
	            // state when cloning options
	        } else if ( nodeName === "option" ) {
	            dest.defaultSelected = dest.selected = src.defaultSelected;
	
	            // IE6-8 fails to set the defaultValue to the correct value when
	            // cloning other types of input fields
	        } else if ( nodeName === "input" || nodeName === "textarea" ) {
	            dest.defaultValue = src.defaultValue;
	        }
	    }
	
	    jQuery.each({
	        appendTo: "append",
	        prependTo: "prepend",
	        insertBefore: "before",
	        insertAfter: "after",
	        replaceAll: "replaceWith"
	    }, function( name, original ) {
	        jQuery.fn[ name ] = function( selector ) {
	            var elems,
	                i = 0,
	                ret = [],
	                insert = jQuery( selector ),
	                last = insert.length - 1;
	
	            for ( ; i <= last; i++ ) {
	                elems = i === last ? this : this.clone(true);
	                jQuery( insert[i] )[ original ]( elems );
	
	                // Modern browsers can apply jQuery collections as arrays, but oldIE needs a .get()
	                core_push.apply( ret, elems.get() );
	            }
	
	            return this.pushStack( ret );
	        };
	    });
	
	    function getAll( context, tag ) {
	        var elems, elem,
	            i = 0,
	            found = typeof context.getElementsByTagName !== core_strundefined ? context.getElementsByTagName( tag || "*" ) :
	                typeof context.querySelectorAll !== core_strundefined ? context.querySelectorAll( tag || "*" ) :
	                    undefined;
	
	        if ( !found ) {
	            for ( found = [], elems = context.childNodes || context; (elem = elems[i]) != null; i++ ) {
	                if ( !tag || jQuery.nodeName( elem, tag ) ) {
	                    found.push( elem );
	                } else {
	                    jQuery.merge( found, getAll( elem, tag ) );
	                }
	            }
	        }
	
	        return tag === undefined || tag && jQuery.nodeName( context, tag ) ?
	            jQuery.merge( [ context ], found ) :
	            found;
	    }
	
	// Used in buildFragment, fixes the defaultChecked property
	    function fixDefaultChecked( elem ) {
	        if ( manipulation_rcheckableType.test( elem.type ) ) {
	            elem.defaultChecked = elem.checked;
	        }
	    }
	
	    jQuery.extend({
	        clone: function( elem, dataAndEvents, deepDataAndEvents ) {
	            var destElements, node, clone, i, srcElements,
	                inPage = jQuery.contains( elem.ownerDocument, elem );
	
	            if ( jQuery.support.html5Clone || jQuery.isXMLDoc(elem) || !rnoshimcache.test( "<" + elem.nodeName + ">" ) ) {
	                clone = elem.cloneNode( true );
	
	                // IE<=8 does not properly clone detached, unknown element nodes
	            } else {
	                fragmentDiv.innerHTML = elem.outerHTML;
	                fragmentDiv.removeChild( clone = fragmentDiv.firstChild );
	            }
	
	            if ( (!jQuery.support.noCloneEvent || !jQuery.support.noCloneChecked) &&
	                (elem.nodeType === 1 || elem.nodeType === 11) && !jQuery.isXMLDoc(elem) ) {
	
	                // We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2
	                destElements = getAll( clone );
	                srcElements = getAll( elem );
	
	                // Fix all IE cloning issues
	                for ( i = 0; (node = srcElements[i]) != null; ++i ) {
	                    // Ensure that the destination node is not null; Fixes #9587
	                    if ( destElements[i] ) {
	                        fixCloneNodeIssues( node, destElements[i] );
	                    }
	                }
	            }
	
	            // Copy the events from the original to the clone
	            if ( dataAndEvents ) {
	                if ( deepDataAndEvents ) {
	                    srcElements = srcElements || getAll( elem );
	                    destElements = destElements || getAll( clone );
	
	                    for ( i = 0; (node = srcElements[i]) != null; i++ ) {
	                        cloneCopyEvent( node, destElements[i] );
	                    }
	                } else {
	                    cloneCopyEvent( elem, clone );
	                }
	            }
	
	            // Preserve script evaluation history
	            destElements = getAll( clone, "script" );
	            if ( destElements.length > 0 ) {
	                setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
	            }
	
	            destElements = srcElements = node = null;
	
	            // Return the cloned set
	            return clone;
	        },
	
	        buildFragment: function( elems, context, scripts, selection ) {
	            var j, elem, contains,
	                tmp, tag, tbody, wrap,
	                l = elems.length,
	
	            // Ensure a safe fragment
	                safe = createSafeFragment( context ),
	
	                nodes = [],
	                i = 0;
	
	            for ( ; i < l; i++ ) {
	                elem = elems[ i ];
	
	                if ( elem || elem === 0 ) {
	
	                    // Add nodes directly
	                    if ( jQuery.type( elem ) === "object" ) {
	                        jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );
	
	                        // Convert non-html into a text node
	                    } else if ( !rhtml.test( elem ) ) {
	                        nodes.push( context.createTextNode( elem ) );
	
	                        // Convert html into DOM nodes
	                    } else {
	                        tmp = tmp || safe.appendChild( context.createElement("div") );
	
	                        // Deserialize a standard representation
	                        tag = ( rtagName.exec( elem ) || ["", ""] )[1].toLowerCase();
	                        wrap = wrapMap[ tag ] || wrapMap._default;
	
	                        tmp.innerHTML = wrap[1] + elem.replace( rxhtmlTag, "<$1></$2>" ) + wrap[2];
	
	                        // Descend through wrappers to the right content
	                        j = wrap[0];
	                        while ( j-- ) {
	                            tmp = tmp.lastChild;
	                        }
	
	                        // Manually add leading whitespace removed by IE
	                        if ( !jQuery.support.leadingWhitespace && rleadingWhitespace.test( elem ) ) {
	                            nodes.push( context.createTextNode( rleadingWhitespace.exec( elem )[0] ) );
	                        }
	
	                        // Remove IE's autoinserted <tbody> from table fragments
	                        if ( !jQuery.support.tbody ) {
	
	                            // String was a <table>, *may* have spurious <tbody>
	                            elem = tag === "table" && !rtbody.test( elem ) ?
	                                tmp.firstChild :
	
	                                // String was a bare <thead> or <tfoot>
	                                wrap[1] === "<table>" && !rtbody.test( elem ) ?
	                                    tmp :
	                                    0;
	
	                            j = elem && elem.childNodes.length;
	                            while ( j-- ) {
	                                if ( jQuery.nodeName( (tbody = elem.childNodes[j]), "tbody" ) && !tbody.childNodes.length ) {
	                                    elem.removeChild( tbody );
	                                }
	                            }
	                        }
	
	                        jQuery.merge( nodes, tmp.childNodes );
	
	                        // Fix #12392 for WebKit and IE > 9
	                        tmp.textContent = "";
	
	                        // Fix #12392 for oldIE
	                        while ( tmp.firstChild ) {
	                            tmp.removeChild( tmp.firstChild );
	                        }
	
	                        // Remember the top-level container for proper cleanup
	                        tmp = safe.lastChild;
	                    }
	                }
	            }
	
	            // Fix #11356: Clear elements from fragment
	            if ( tmp ) {
	                safe.removeChild( tmp );
	            }
	
	            // Reset defaultChecked for any radios and checkboxes
	            // about to be appended to the DOM in IE 6/7 (#8060)
	            if ( !jQuery.support.appendChecked ) {
	                jQuery.grep( getAll( nodes, "input" ), fixDefaultChecked );
	            }
	
	            i = 0;
	            while ( (elem = nodes[ i++ ]) ) {
	
	                // #4087 - If origin and destination elements are the same, and this is
	                // that element, do not do anything
	                if ( selection && jQuery.inArray( elem, selection ) !== -1 ) {
	                    continue;
	                }
	
	                contains = jQuery.contains( elem.ownerDocument, elem );
	
	                // Append to fragment
	                tmp = getAll( safe.appendChild( elem ), "script" );
	
	                // Preserve script evaluation history
	                if ( contains ) {
	                    setGlobalEval( tmp );
	                }
	
	                // Capture executables
	                if ( scripts ) {
	                    j = 0;
	                    while ( (elem = tmp[ j++ ]) ) {
	                        if ( rscriptType.test( elem.type || "" ) ) {
	                            scripts.push( elem );
	                        }
	                    }
	                }
	            }
	
	            tmp = null;
	
	            return safe;
	        },
	
	        cleanData: function( elems, /* internal */ acceptData ) {
	            var elem, type, id, data,
	                i = 0,
	                internalKey = jQuery.expando,
	                cache = jQuery.cache,
	                deleteExpando = jQuery.support.deleteExpando,
	                special = jQuery.event.special;
	
	            for ( ; (elem = elems[i]) != null; i++ ) {
	
	                if ( acceptData || jQuery.acceptData( elem ) ) {
	
	                    id = elem[ internalKey ];
	                    data = id && cache[ id ];
	
	                    if ( data ) {
	                        if ( data.events ) {
	                            for ( type in data.events ) {
	                                if ( special[ type ] ) {
	                                    jQuery.event.remove( elem, type );
	
	                                    // This is a shortcut to avoid jQuery.event.remove's overhead
	                                } else {
	                                    jQuery.removeEvent( elem, type, data.handle );
	                                }
	                            }
	                        }
	
	                        // Remove cache only if it was not already removed by jQuery.event.remove
	                        if ( cache[ id ] ) {
	
	                            delete cache[ id ];
	
	                            // IE does not allow us to delete expando properties from nodes,
	                            // nor does it have a removeAttribute function on Document nodes;
	                            // we must handle all of these cases
	                            if ( deleteExpando ) {
	                                delete elem[ internalKey ];
	
	                            } else if ( typeof elem.removeAttribute !== core_strundefined ) {
	                                elem.removeAttribute( internalKey );
	
	                            } else {
	                                elem[ internalKey ] = null;
	                            }
	
	                            core_deletedIds.push( id );
	                        }
	                    }
	                }
	            }
	        },
	
	        _evalUrl: function( url ) {
	            return jQuery.ajax({
	                url: url,
	                type: "GET",
	                dataType: "script",
	                async: false,
	                global: false,
	                "throws": true
	            });
	        }
	    });
	    jQuery.fn.extend({
	        wrapAll: function( html ) {
	            if ( jQuery.isFunction( html ) ) {
	                return this.each(function(i) {
	                    jQuery(this).wrapAll( html.call(this, i) );
	                });
	            }
	
	            if ( this[0] ) {
	                // The elements to wrap the target around
	                var wrap = jQuery( html, this[0].ownerDocument ).eq(0).clone(true);
	
	                if ( this[0].parentNode ) {
	                    wrap.insertBefore( this[0] );
	                }
	
	                wrap.map(function() {
	                    var elem = this;
	
	                    while ( elem.firstChild && elem.firstChild.nodeType === 1 ) {
	                        elem = elem.firstChild;
	                    }
	
	                    return elem;
	                }).append( this );
	            }
	
	            return this;
	        },
	
	        wrapInner: function( html ) {
	            if ( jQuery.isFunction( html ) ) {
	                return this.each(function(i) {
	                    jQuery(this).wrapInner( html.call(this, i) );
	                });
	            }
	
	            return this.each(function() {
	                var self = jQuery( this ),
	                    contents = self.contents();
	
	                if ( contents.length ) {
	                    contents.wrapAll( html );
	
	                } else {
	                    self.append( html );
	                }
	            });
	        },
	
	        wrap: function( html ) {
	            var isFunction = jQuery.isFunction( html );
	
	            return this.each(function(i) {
	                jQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );
	            });
	        },
	
	        unwrap: function() {
	            return this.parent().each(function() {
	                if ( !jQuery.nodeName( this, "body" ) ) {
	                    jQuery( this ).replaceWith( this.childNodes );
	                }
	            }).end();
	        }
	    });
	    var iframe, getStyles, curCSS,
	        ralpha = /alpha\([^)]*\)/i,
	        ropacity = /opacity\s*=\s*([^)]*)/,
	        rposition = /^(top|right|bottom|left)$/,
	    // swappable if display is none or starts with table except "table", "table-cell", or "table-caption"
	    // see here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	        rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	        rmargin = /^margin/,
	        rnumsplit = new RegExp( "^(" + core_pnum + ")(.*)$", "i" ),
	        rnumnonpx = new RegExp( "^(" + core_pnum + ")(?!px)[a-z%]+$", "i" ),
	        rrelNum = new RegExp( "^([+-])=(" + core_pnum + ")", "i" ),
	        elemdisplay = { BODY: "block" },
	
	        cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	        cssNormalTransform = {
	            letterSpacing: 0,
	            fontWeight: 400
	        },
	
	        cssExpand = [ "Top", "Right", "Bottom", "Left" ],
	        cssPrefixes = [ "Webkit", "O", "Moz", "ms" ];
	
	// return a css property mapped to a potentially vendor prefixed property
	    function vendorPropName( style, name ) {
	
	        // shortcut for names that are not vendor prefixed
	        if ( name in style ) {
	            return name;
	        }
	
	        // check for vendor prefixed names
	        var capName = name.charAt(0).toUpperCase() + name.slice(1),
	            origName = name,
	            i = cssPrefixes.length;
	
	        while ( i-- ) {
	            name = cssPrefixes[ i ] + capName;
	            if ( name in style ) {
	                return name;
	            }
	        }
	
	        return origName;
	    }
	
	    function isHidden( elem, el ) {
	        // isHidden might be called from jQuery#filter function;
	        // in that case, element will be second argument
	        elem = el || elem;
	        return jQuery.css( elem, "display" ) === "none" || !jQuery.contains( elem.ownerDocument, elem );
	    }
	
	    function showHide( elements, show ) {
	        var display, elem, hidden,
	            values = [],
	            index = 0,
	            length = elements.length;
	
	        for ( ; index < length; index++ ) {
	            elem = elements[ index ];
	            if ( !elem.style ) {
	                continue;
	            }
	
	            values[ index ] = jQuery._data( elem, "olddisplay" );
	            display = elem.style.display;
	            if ( show ) {
	                // Reset the inline display of this element to learn if it is
	                // being hidden by cascaded rules or not
	                if ( !values[ index ] && display === "none" ) {
	                    elem.style.display = "";
	                }
	
	                // Set elements which have been overridden with display: none
	                // in a stylesheet to whatever the default browser style is
	                // for such an element
	                if ( elem.style.display === "" && isHidden( elem ) ) {
	                    values[ index ] = jQuery._data( elem, "olddisplay", css_defaultDisplay(elem.nodeName) );
	                }
	            } else {
	
	                if ( !values[ index ] ) {
	                    hidden = isHidden( elem );
	
	                    if ( display && display !== "none" || !hidden ) {
	                        jQuery._data( elem, "olddisplay", hidden ? display : jQuery.css( elem, "display" ) );
	                    }
	                }
	            }
	        }
	
	        // Set the display of most of the elements in a second loop
	        // to avoid the constant reflow
	        for ( index = 0; index < length; index++ ) {
	            elem = elements[ index ];
	            if ( !elem.style ) {
	                continue;
	            }
	            if ( !show || elem.style.display === "none" || elem.style.display === "" ) {
	                elem.style.display = show ? values[ index ] || "" : "none";
	            }
	        }
	
	        return elements;
	    }
	
	    jQuery.fn.extend({
	        css: function( name, value ) {
	            return jQuery.access( this, function( elem, name, value ) {
	                var len, styles,
	                    map = {},
	                    i = 0;
	
	                if ( jQuery.isArray( name ) ) {
	                    styles = getStyles( elem );
	                    len = name.length;
	
	                    for ( ; i < len; i++ ) {
	                        map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
	                    }
	
	                    return map;
	                }
	
	                return value !== undefined ?
	                    jQuery.style( elem, name, value ) :
	                    jQuery.css( elem, name );
	            }, name, value, arguments.length > 1 );
	        },
	        show: function() {
	            return showHide( this, true );
	        },
	        hide: function() {
	            return showHide( this );
	        },
	        toggle: function( state ) {
	            if ( typeof state === "boolean" ) {
	                return state ? this.show() : this.hide();
	            }
	
	            return this.each(function() {
	                if ( isHidden( this ) ) {
	                    jQuery( this ).show();
	                } else {
	                    jQuery( this ).hide();
	                }
	            });
	        }
	    });
	
	    jQuery.extend({
	        // Add in style property hooks for overriding the default
	        // behavior of getting and setting a style property
	        cssHooks: {
	            opacity: {
	                get: function( elem, computed ) {
	                    if ( computed ) {
	                        // We should always get a number back from opacity
	                        var ret = curCSS( elem, "opacity" );
	                        return ret === "" ? "1" : ret;
	                    }
	                }
	            }
	        },
	
	        // Don't automatically add "px" to these possibly-unitless properties
	        cssNumber: {
	            "columnCount": true,
	            "fillOpacity": true,
	            "fontWeight": true,
	            "lineHeight": true,
	            "opacity": true,
	            "order": true,
	            "orphans": true,
	            "widows": true,
	            "zIndex": true,
	            "zoom": true
	        },
	
	        // Add in properties whose names you wish to fix before
	        // setting or getting the value
	        cssProps: {
	            // normalize float css property
	            "float": jQuery.support.cssFloat ? "cssFloat" : "styleFloat"
	        },
	
	        // Get and set the style property on a DOM Node
	        style: function( elem, name, value, extra ) {
	            // Don't set styles on text and comment nodes
	            if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
	                return;
	            }
	
	            // Make sure that we're working with the right name
	            var ret, type, hooks,
	                origName = jQuery.camelCase( name ),
	                style = elem.style;
	
	            name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );
	
	            // gets hook for the prefixed version
	            // followed by the unprefixed version
	            hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];
	
	            // Check if we're setting a value
	            if ( value !== undefined ) {
	                type = typeof value;
	
	                // convert relative number strings (+= or -=) to relative numbers. #7345
	                if ( type === "string" && (ret = rrelNum.exec( value )) ) {
	                    value = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );
	                    // Fixes bug #9237
	                    type = "number";
	                }
	
	                // Make sure that NaN and null values aren't set. See: #7116
	                if ( value == null || type === "number" && isNaN( value ) ) {
	                    return;
	                }
	
	                // If a number was passed in, add 'px' to the (except for certain CSS properties)
	                if ( type === "number" && !jQuery.cssNumber[ origName ] ) {
	                    value += "px";
	                }
	
	                // Fixes #8908, it can be done more correctly by specifing setters in cssHooks,
	                // but it would mean to define eight (for every problematic property) identical functions
	                if ( !jQuery.support.clearCloneStyle && value === "" && name.indexOf("background") === 0 ) {
	                    style[ name ] = "inherit";
	                }
	
	                // If a hook was provided, use that value, otherwise just set the specified value
	                if ( !hooks || !("set" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {
	
	                    // Wrapped to prevent IE from throwing errors when 'invalid' values are provided
	                    // Fixes bug #5509
	                    try {
	                        style[ name ] = value;
	                    } catch(e) {}
	                }
	
	            } else {
	                // If a hook was provided get the non-computed value from there
	                if ( hooks && "get" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {
	                    return ret;
	                }
	
	                // Otherwise just get the value from the style object
	                return style[ name ];
	            }
	        },
	
	        css: function( elem, name, extra, styles ) {
	            var num, val, hooks,
	                origName = jQuery.camelCase( name );
	
	            // Make sure that we're working with the right name
	            name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );
	
	            // gets hook for the prefixed version
	            // followed by the unprefixed version
	            hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];
	
	            // If a hook was provided get the computed value from there
	            if ( hooks && "get" in hooks ) {
	                val = hooks.get( elem, true, extra );
	            }
	
	            // Otherwise, if a way to get the computed value exists, use that
	            if ( val === undefined ) {
	                val = curCSS( elem, name, styles );
	            }
	
	            //convert "normal" to computed value
	            if ( val === "normal" && name in cssNormalTransform ) {
	                val = cssNormalTransform[ name ];
	            }
	
	            // Return, converting to number if forced or a qualifier was provided and val looks numeric
	            if ( extra === "" || extra ) {
	                num = parseFloat( val );
	                return extra === true || jQuery.isNumeric( num ) ? num || 0 : val;
	            }
	            return val;
	        }
	    });
	
	// NOTE: we've included the "window" in window.getComputedStyle
	// because jsdom on node.js will break without it.
	    if ( window.getComputedStyle ) {
	        getStyles = function( elem ) {
	            return window.getComputedStyle( elem, null );
	        };
	
	        curCSS = function( elem, name, _computed ) {
	            var width, minWidth, maxWidth,
	                computed = _computed || getStyles( elem ),
	
	            // getPropertyValue is only needed for .css('filter') in IE9, see #12537
	                ret = computed ? computed.getPropertyValue( name ) || computed[ name ] : undefined,
	                style = elem.style;
	
	            if ( computed ) {
	
	                if ( ret === "" && !jQuery.contains( elem.ownerDocument, elem ) ) {
	                    ret = jQuery.style( elem, name );
	                }
	
	                // A tribute to the "awesome hack by Dean Edwards"
	                // Chrome < 17 and Safari 5.0 uses "computed value" instead of "used value" for margin-right
	                // Safari 5.1.7 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels
	                // this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values
	                if ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {
	
	                    // Remember the original values
	                    width = style.width;
	                    minWidth = style.minWidth;
	                    maxWidth = style.maxWidth;
	
	                    // Put in the new values to get a computed value out
	                    style.minWidth = style.maxWidth = style.width = ret;
	                    ret = computed.width;
	
	                    // Revert the changed values
	                    style.width = width;
	                    style.minWidth = minWidth;
	                    style.maxWidth = maxWidth;
	                }
	            }
	
	            return ret;
	        };
	    } else if ( document.documentElement.currentStyle ) {
	        getStyles = function( elem ) {
	            return elem.currentStyle;
	        };
	
	        curCSS = function( elem, name, _computed ) {
	            var left, rs, rsLeft,
	                computed = _computed || getStyles( elem ),
	                ret = computed ? computed[ name ] : undefined,
	                style = elem.style;
	
	            // Avoid setting ret to empty string here
	            // so we don't default to auto
	            if ( ret == null && style && style[ name ] ) {
	                ret = style[ name ];
	            }
	
	            // From the awesome hack by Dean Edwards
	            // http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291
	
	            // If we're not dealing with a regular pixel number
	            // but a number that has a weird ending, we need to convert it to pixels
	            // but not position css attributes, as those are proportional to the parent element instead
	            // and we can't measure the parent instead because it might trigger a "stacking dolls" problem
	            if ( rnumnonpx.test( ret ) && !rposition.test( name ) ) {
	
	                // Remember the original values
	                left = style.left;
	                rs = elem.runtimeStyle;
	                rsLeft = rs && rs.left;
	
	                // Put in the new values to get a computed value out
	                if ( rsLeft ) {
	                    rs.left = elem.currentStyle.left;
	                }
	                style.left = name === "fontSize" ? "1em" : ret;
	                ret = style.pixelLeft + "px";
	
	                // Revert the changed values
	                style.left = left;
	                if ( rsLeft ) {
	                    rs.left = rsLeft;
	                }
	            }
	
	            return ret === "" ? "auto" : ret;
	        };
	    }
	
	    function setPositiveNumber( elem, value, subtract ) {
	        var matches = rnumsplit.exec( value );
	        return matches ?
	            // Guard against undefined "subtract", e.g., when used as in cssHooks
	        Math.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || "px" ) :
	            value;
	    }
	
	    function augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {
	        var i = extra === ( isBorderBox ? "border" : "content" ) ?
	                // If we already have the right measurement, avoid augmentation
	                4 :
	                // Otherwise initialize for horizontal or vertical properties
	                name === "width" ? 1 : 0,
	
	            val = 0;
	
	        for ( ; i < 4; i += 2 ) {
	            // both box models exclude margin, so add it if we want it
	            if ( extra === "margin" ) {
	                val += jQuery.css( elem, extra + cssExpand[ i ], true, styles );
	            }
	
	            if ( isBorderBox ) {
	                // border-box includes padding, so remove it if we want content
	                if ( extra === "content" ) {
	                    val -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
	                }
	
	                // at this point, extra isn't border nor margin, so remove border
	                if ( extra !== "margin" ) {
	                    val -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
	                }
	            } else {
	                // at this point, extra isn't content, so add padding
	                val += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
	
	                // at this point, extra isn't content nor padding, so add border
	                if ( extra !== "padding" ) {
	                    val += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
	                }
	            }
	        }
	
	        return val;
	    }
	
	    function getWidthOrHeight( elem, name, extra ) {
	
	        // Start with offset property, which is equivalent to the border-box value
	        var valueIsBorderBox = true,
	            val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
	            styles = getStyles( elem ),
	            isBorderBox = jQuery.support.boxSizing && jQuery.css( elem, "boxSizing", false, styles ) === "border-box";
	
	        // some non-html elements return undefined for offsetWidth, so check for null/undefined
	        // svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285
	        // MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668
	        if ( val <= 0 || val == null ) {
	            // Fall back to computed then uncomputed css if necessary
	            val = curCSS( elem, name, styles );
	            if ( val < 0 || val == null ) {
	                val = elem.style[ name ];
	            }
	
	            // Computed unit is not pixels. Stop here and return.
	            if ( rnumnonpx.test(val) ) {
	                return val;
	            }
	
	            // we need the check for style in case a browser which returns unreliable values
	            // for getComputedStyle silently falls back to the reliable elem.style
	            valueIsBorderBox = isBorderBox && ( jQuery.support.boxSizingReliable || val === elem.style[ name ] );
	
	            // Normalize "", auto, and prepare for extra
	            val = parseFloat( val ) || 0;
	        }
	
	        // use the active box-sizing model to add/subtract irrelevant styles
	        return ( val +
	                augmentWidthOrHeight(
	                    elem,
	                    name,
	                    extra || ( isBorderBox ? "border" : "content" ),
	                    valueIsBorderBox,
	                    styles
	                )
	            ) + "px";
	    }
	
	// Try to determine the default display value of an element
	    function css_defaultDisplay( nodeName ) {
	        var doc = document,
	            display = elemdisplay[ nodeName ];
	
	        if ( !display ) {
	            display = actualDisplay( nodeName, doc );
	
	            // If the simple way fails, read from inside an iframe
	            if ( display === "none" || !display ) {
	                // Use the already-created iframe if possible
	                iframe = ( iframe ||
	                    jQuery("<iframe frameborder='0' width='0' height='0'/>")
	                        .css( "cssText", "display:block !important" )
	                ).appendTo( doc.documentElement );
	
	                // Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse
	                doc = ( iframe[0].contentWindow || iframe[0].contentDocument ).document;
	                doc.write("<!doctype html><html><body>");
	                doc.close();
	
	                display = actualDisplay( nodeName, doc );
	                iframe.detach();
	            }
	
	            // Store the correct default display
	            elemdisplay[ nodeName ] = display;
	        }
	
	        return display;
	    }
	
	// Called ONLY from within css_defaultDisplay
	    function actualDisplay( name, doc ) {
	        var elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),
	            display = jQuery.css( elem[0], "display" );
	        elem.remove();
	        return display;
	    }
	
	    jQuery.each([ "height", "width" ], function( i, name ) {
	        jQuery.cssHooks[ name ] = {
	            get: function( elem, computed, extra ) {
	                if ( computed ) {
	                    // certain elements can have dimension info if we invisibly show them
	                    // however, it must have a current display style that would benefit from this
	                    return elem.offsetWidth === 0 && rdisplayswap.test( jQuery.css( elem, "display" ) ) ?
	                        jQuery.swap( elem, cssShow, function() {
	                            return getWidthOrHeight( elem, name, extra );
	                        }) :
	                        getWidthOrHeight( elem, name, extra );
	                }
	            },
	
	            set: function( elem, value, extra ) {
	                var styles = extra && getStyles( elem );
	                return setPositiveNumber( elem, value, extra ?
	                    augmentWidthOrHeight(
	                        elem,
	                        name,
	                        extra,
	                        jQuery.support.boxSizing && jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
	                        styles
	                    ) : 0
	                );
	            }
	        };
	    });
	
	    if ( !jQuery.support.opacity ) {
	        jQuery.cssHooks.opacity = {
	            get: function( elem, computed ) {
	                // IE uses filters for opacity
	                return ropacity.test( (computed && elem.currentStyle ? elem.currentStyle.filter : elem.style.filter) || "" ) ?
	                ( 0.01 * parseFloat( RegExp.$1 ) ) + "" :
	                    computed ? "1" : "";
	            },
	
	            set: function( elem, value ) {
	                var style = elem.style,
	                    currentStyle = elem.currentStyle,
	                    opacity = jQuery.isNumeric( value ) ? "alpha(opacity=" + value * 100 + ")" : "",
	                    filter = currentStyle && currentStyle.filter || style.filter || "";
	
	                // IE has trouble with opacity if it does not have layout
	                // Force it by setting the zoom level
	                style.zoom = 1;
	
	                // if setting opacity to 1, and no other filters exist - attempt to remove filter attribute #6652
	                // if value === "", then remove inline opacity #12685
	                if ( ( value >= 1 || value === "" ) &&
	                    jQuery.trim( filter.replace( ralpha, "" ) ) === "" &&
	                    style.removeAttribute ) {
	
	                    // Setting style.filter to null, "" & " " still leave "filter:" in the cssText
	                    // if "filter:" is present at all, clearType is disabled, we want to avoid this
	                    // style.removeAttribute is IE Only, but so apparently is this code path...
	                    style.removeAttribute( "filter" );
	
	                    // if there is no filter style applied in a css rule or unset inline opacity, we are done
	                    if ( value === "" || currentStyle && !currentStyle.filter ) {
	                        return;
	                    }
	                }
	
	                // otherwise, set new filter values
	                style.filter = ralpha.test( filter ) ?
	                    filter.replace( ralpha, opacity ) :
	                filter + " " + opacity;
	            }
	        };
	    }
	
	// These hooks cannot be added until DOM ready because the support test
	// for it is not run until after DOM ready
	    jQuery(function() {
	        if ( !jQuery.support.reliableMarginRight ) {
	            jQuery.cssHooks.marginRight = {
	                get: function( elem, computed ) {
	                    if ( computed ) {
	                        // WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
	                        // Work around by temporarily setting element display to inline-block
	                        return jQuery.swap( elem, { "display": "inline-block" },
	                            curCSS, [ elem, "marginRight" ] );
	                    }
	                }
	            };
	        }
	
	        // Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
	        // getComputedStyle returns percent when specified for top/left/bottom/right
	        // rather than make the css module depend on the offset module, we just check for it here
	        if ( !jQuery.support.pixelPosition && jQuery.fn.position ) {
	            jQuery.each( [ "top", "left" ], function( i, prop ) {
	                jQuery.cssHooks[ prop ] = {
	                    get: function( elem, computed ) {
	                        if ( computed ) {
	                            computed = curCSS( elem, prop );
	                            // if curCSS returns percentage, fallback to offset
	                            return rnumnonpx.test( computed ) ?
	                            jQuery( elem ).position()[ prop ] + "px" :
	                                computed;
	                        }
	                    }
	                };
	            });
	        }
	
	    });
	
	    if ( jQuery.expr && jQuery.expr.filters ) {
	        jQuery.expr.filters.hidden = function( elem ) {
	            // Support: Opera <= 12.12
	            // Opera reports offsetWidths and offsetHeights less than zero on some elements
	            return elem.offsetWidth <= 0 && elem.offsetHeight <= 0 ||
	                (!jQuery.support.reliableHiddenOffsets && ((elem.style && elem.style.display) || jQuery.css( elem, "display" )) === "none");
	        };
	
	        jQuery.expr.filters.visible = function( elem ) {
	            return !jQuery.expr.filters.hidden( elem );
	        };
	    }
	
	// These hooks are used by animate to expand properties
	    jQuery.each({
	        margin: "",
	        padding: "",
	        border: "Width"
	    }, function( prefix, suffix ) {
	        jQuery.cssHooks[ prefix + suffix ] = {
	            expand: function( value ) {
	                var i = 0,
	                    expanded = {},
	
	                // assumes a single number if not a string
	                    parts = typeof value === "string" ? value.split(" ") : [ value ];
	
	                for ( ; i < 4; i++ ) {
	                    expanded[ prefix + cssExpand[ i ] + suffix ] =
	                        parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
	                }
	
	                return expanded;
	            }
	        };
	
	        if ( !rmargin.test( prefix ) ) {
	            jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	        }
	    });
	    var r20 = /%20/g,
	        rbracket = /\[\]$/,
	        rCRLF = /\r?\n/g,
	        rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	        rsubmittable = /^(?:input|select|textarea|keygen)/i;
	
	    jQuery.fn.extend({
	        serialize: function() {
	            return jQuery.param( this.serializeArray() );
	        },
	        serializeArray: function() {
	            return this.map(function(){
	                    // Can add propHook for "elements" to filter or add form elements
	                    var elements = jQuery.prop( this, "elements" );
	                    return elements ? jQuery.makeArray( elements ) : this;
	                })
	                .filter(function(){
	                    var type = this.type;
	                    // Use .is(":disabled") so that fieldset[disabled] works
	                    return this.name && !jQuery( this ).is( ":disabled" ) &&
	                        rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
	                        ( this.checked || !manipulation_rcheckableType.test( type ) );
	                })
	                .map(function( i, elem ){
	                    var val = jQuery( this ).val();
	
	                    return val == null ?
	                        null :
	                        jQuery.isArray( val ) ?
	                            jQuery.map( val, function( val ){
	                                return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
	                            }) :
	                        { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
	                }).get();
	        }
	    });
	
	//Serialize an array of form elements or a set of
	//key/values into a query string
	    jQuery.param = function( a, traditional ) {
	        var prefix,
	            s = [],
	            add = function( key, value ) {
	                // If value is a function, invoke it and return its value
	                value = jQuery.isFunction( value ) ? value() : ( value == null ? "" : value );
	                s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );
	            };
	
	        // Set traditional to true for jQuery <= 1.3.2 behavior.
	        if ( traditional === undefined ) {
	            traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
	        }
	
	        // If an array was passed in, assume that it is an array of form elements.
	        if ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {
	            // Serialize the form elements
	            jQuery.each( a, function() {
	                add( this.name, this.value );
	            });
	
	        } else {
	            // If traditional, encode the "old" way (the way 1.3.2 or older
	            // did it), otherwise encode params recursively.
	            for ( prefix in a ) {
	                buildParams( prefix, a[ prefix ], traditional, add );
	            }
	        }
	
	        // Return the resulting serialization
	        return s.join( "&" ).replace( r20, "+" );
	    };
	
	    function buildParams( prefix, obj, traditional, add ) {
	        var name;
	
	        if ( jQuery.isArray( obj ) ) {
	            // Serialize array item.
	            jQuery.each( obj, function( i, v ) {
	                if ( traditional || rbracket.test( prefix ) ) {
	                    // Treat each array item as a scalar.
	                    add( prefix, v );
	
	                } else {
	                    // Item is non-scalar (array or object), encode its numeric index.
	                    buildParams( prefix + "[" + ( typeof v === "object" ? i : "" ) + "]", v, traditional, add );
	                }
	            });
	
	        } else if ( !traditional && jQuery.type( obj ) === "object" ) {
	            // Serialize object item.
	            for ( name in obj ) {
	                buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
	            }
	
	        } else {
	            // Serialize scalar item.
	            add( prefix, obj );
	        }
	    }
	    jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
	    "mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	    "change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {
	
	        // Handle event binding
	        jQuery.fn[ name ] = function( data, fn ) {
	            return arguments.length > 0 ?
	                this.on( name, null, data, fn ) :
	                this.trigger( name );
	        };
	    });
	
	    jQuery.fn.extend({
	        hover: function( fnOver, fnOut ) {
	            return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	        },
	
	        bind: function( types, data, fn ) {
	            return this.on( types, null, data, fn );
	        },
	        unbind: function( types, fn ) {
	            return this.off( types, null, fn );
	        },
	
	        delegate: function( selector, types, data, fn ) {
	            return this.on( types, selector, data, fn );
	        },
	        undelegate: function( selector, types, fn ) {
	            // ( namespace ) or ( selector, types [, fn] )
	            return arguments.length === 1 ? this.off( selector, "**" ) : this.off( types, selector || "**", fn );
	        }
	    });
	    var
	    // Document location
	        ajaxLocParts,
	        ajaxLocation,
	        ajax_nonce = jQuery.now(),
	
	        ajax_rquery = /\?/,
	        rhash = /#.*$/,
	        rts = /([?&])_=[^&]*/,
	        rheaders = /^(.*?):[ \t]*([^\r\n]*)\r?$/mg, // IE leaves an \r character at EOL
	    // #7653, #8125, #8152: local protocol detection
	        rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	        rnoContent = /^(?:GET|HEAD)$/,
	        rprotocol = /^\/\//,
	        rurl = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,
	
	    // Keep a copy of the old load method
	        _load = jQuery.fn.load,
	
	    /* Prefilters
	     * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	     * 2) These are called:
	     *    - BEFORE asking for a transport
	     *    - AFTER param serialization (s.data is a string if s.processData is true)
	     * 3) key is the dataType
	     * 4) the catchall symbol "*" can be used
	     * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	     */
	        prefilters = {},
	
	    /* Transports bindings
	     * 1) key is the dataType
	     * 2) the catchall symbol "*" can be used
	     * 3) selection will start with transport dataType and THEN go to "*" if needed
	     */
	        transports = {},
	
	    // Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	        allTypes = "*/".concat("*");
	
	// #8138, IE may throw an exception when accessing
	// a field from window.location if document.domain has been set
	    try {
	        ajaxLocation = location.href;
	    } catch( e ) {
	        // Use the href attribute of an A element
	        // since IE will modify it given document.location
	        ajaxLocation = document.createElement( "a" );
	        ajaxLocation.href = "";
	        ajaxLocation = ajaxLocation.href;
	    }
	
	// Segment location into parts
	    ajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];
	
	// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
	    function addToPrefiltersOrTransports( structure ) {
	
	        // dataTypeExpression is optional and defaults to "*"
	        return function( dataTypeExpression, func ) {
	
	            if ( typeof dataTypeExpression !== "string" ) {
	                func = dataTypeExpression;
	                dataTypeExpression = "*";
	            }
	
	            var dataType,
	                i = 0,
	                dataTypes = dataTypeExpression.toLowerCase().match( core_rnotwhite ) || [];
	
	            if ( jQuery.isFunction( func ) ) {
	                // For each dataType in the dataTypeExpression
	                while ( (dataType = dataTypes[i++]) ) {
	                    // Prepend if requested
	                    if ( dataType[0] === "+" ) {
	                        dataType = dataType.slice( 1 ) || "*";
	                        (structure[ dataType ] = structure[ dataType ] || []).unshift( func );
	
	                        // Otherwise append
	                    } else {
	                        (structure[ dataType ] = structure[ dataType ] || []).push( func );
	                    }
	                }
	            }
	        };
	    }
	
	// Base inspection function for prefilters and transports
	    function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {
	
	        var inspected = {},
	            seekingTransport = ( structure === transports );
	
	        function inspect( dataType ) {
	            var selected;
	            inspected[ dataType ] = true;
	            jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
	                var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
	                if( typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {
	                    options.dataTypes.unshift( dataTypeOrTransport );
	                    inspect( dataTypeOrTransport );
	                    return false;
	                } else if ( seekingTransport ) {
	                    return !( selected = dataTypeOrTransport );
	                }
	            });
	            return selected;
	        }
	
	        return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
	    }
	
	// A special extend for ajax options
	// that takes "flat" options (not to be deep extended)
	// Fixes #9887
	    function ajaxExtend( target, src ) {
	        var deep, key,
	            flatOptions = jQuery.ajaxSettings.flatOptions || {};
	
	        for ( key in src ) {
	            if ( src[ key ] !== undefined ) {
	                ( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];
	            }
	        }
	        if ( deep ) {
	            jQuery.extend( true, target, deep );
	        }
	
	        return target;
	    }
	
	    jQuery.fn.load = function( url, params, callback ) {
	        if ( typeof url !== "string" && _load ) {
	            return _load.apply( this, arguments );
	        }
	
	        var selector, response, type,
	            self = this,
	            off = url.indexOf(" ");
	
	        if ( off >= 0 ) {
	            selector = url.slice( off, url.length );
	            url = url.slice( 0, off );
	        }
	
	        // If it's a function
	        if ( jQuery.isFunction( params ) ) {
	
	            // We assume that it's the callback
	            callback = params;
	            params = undefined;
	
	            // Otherwise, build a param string
	        } else if ( params && typeof params === "object" ) {
	            type = "POST";
	        }
	
	        // If we have elements to modify, make the request
	        if ( self.length > 0 ) {
	            jQuery.ajax({
	                url: url,
	
	                // if "type" variable is undefined, then "GET" method will be used
	                type: type,
	                dataType: "html",
	                data: params
	            }).done(function( responseText ) {
	
	                // Save response for use in complete callback
	                response = arguments;
	
	                self.html( selector ?
	
	                    // If a selector was specified, locate the right elements in a dummy div
	                    // Exclude scripts to avoid IE 'Permission Denied' errors
	                    jQuery("<div>").append( jQuery.parseHTML( responseText ) ).find( selector ) :
	
	                    // Otherwise use the full result
	                    responseText );
	
	            }).complete( callback && function( jqXHR, status ) {
	                    self.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );
	                });
	        }
	
	        return this;
	    };
	
	// Attach a bunch of functions for handling common AJAX events
	    jQuery.each( [ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function( i, type ){
	        jQuery.fn[ type ] = function( fn ){
	            return this.on( type, fn );
	        };
	    });
	
	    jQuery.extend({
	
	        // Counter for holding the number of active queries
	        active: 0,
	
	        // Last-Modified header cache for next request
	        lastModified: {},
	        etag: {},
	
	        ajaxSettings: {
	            url: ajaxLocation,
	            type: "GET",
	            isLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),
	            global: true,
	            processData: true,
	            async: true,
	            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
	            /*
	             timeout: 0,
	             data: null,
	             dataType: null,
	             username: null,
	             password: null,
	             cache: null,
	             throws: false,
	             traditional: false,
	             headers: {},
	             */
	
	            accepts: {
	                "*": allTypes,
	                text: "text/plain",
	                html: "text/html",
	                xml: "application/xml, text/xml",
	                json: "application/json, text/javascript"
	            },
	
	            contents: {
	                xml: /xml/,
	                html: /html/,
	                json: /json/
	            },
	
	            responseFields: {
	                xml: "responseXML",
	                text: "responseText",
	                json: "responseJSON"
	            },
	
	            // Data converters
	            // Keys separate source (or catchall "*") and destination types with a single space
	            converters: {
	
	                // Convert anything to text
	                "* text": String,
	
	                // Text to html (true = no transformation)
	                "text html": true,
	
	                // Evaluate text as a json expression
	                "text json": jQuery.parseJSON,
	
	                // Parse text as xml
	                "text xml": jQuery.parseXML
	            },
	
	            // For options that shouldn't be deep extended:
	            // you can add your own custom options here if
	            // and when you create one that shouldn't be
	            // deep extended (see ajaxExtend)
	            flatOptions: {
	                url: true,
	                context: true
	            }
	        },
	
	        // Creates a full fledged settings object into target
	        // with both ajaxSettings and settings fields.
	        // If target is omitted, writes into ajaxSettings.
	        ajaxSetup: function( target, settings ) {
	            return settings ?
	
	                // Building a settings object
	                ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :
	
	                // Extending ajaxSettings
	                ajaxExtend( jQuery.ajaxSettings, target );
	        },
	
	        ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	        ajaxTransport: addToPrefiltersOrTransports( transports ),
	
	        // Main method
	        ajax: function( url, options ) {
	
	            // If url is an object, simulate pre-1.5 signature
	            if ( typeof url === "object" ) {
	                options = url;
	                url = undefined;
	            }
	
	            // Force options to be an object
	            options = options || {};
	
	            var // Cross-domain detection vars
	                parts,
	            // Loop variable
	                i,
	            // URL without anti-cache param
	                cacheURL,
	            // Response headers as string
	                responseHeadersString,
	            // timeout handle
	                timeoutTimer,
	
	            // To know if global events are to be dispatched
	                fireGlobals,
	
	                transport,
	            // Response headers
	                responseHeaders,
	            // Create the final options object
	                s = jQuery.ajaxSetup( {}, options ),
	            // Callbacks context
	                callbackContext = s.context || s,
	            // Context for global events is callbackContext if it is a DOM node or jQuery collection
	                globalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?
	                    jQuery( callbackContext ) :
	                    jQuery.event,
	            // Deferreds
	                deferred = jQuery.Deferred(),
	                completeDeferred = jQuery.Callbacks("once memory"),
	            // Status-dependent callbacks
	                statusCode = s.statusCode || {},
	            // Headers (they are sent all at once)
	                requestHeaders = {},
	                requestHeadersNames = {},
	            // The jqXHR state
	                state = 0,
	            // Default abort message
	                strAbort = "canceled",
	            // Fake xhr
	                jqXHR = {
	                    readyState: 0,
	
	                    // Builds headers hashtable if needed
	                    getResponseHeader: function( key ) {
	                        var match;
	                        if ( state === 2 ) {
	                            if ( !responseHeaders ) {
	                                responseHeaders = {};
	                                while ( (match = rheaders.exec( responseHeadersString )) ) {
	                                    responseHeaders[ match[1].toLowerCase() ] = match[ 2 ];
	                                }
	                            }
	                            match = responseHeaders[ key.toLowerCase() ];
	                        }
	                        return match == null ? null : match;
	                    },
	
	                    // Raw string
	                    getAllResponseHeaders: function() {
	                        return state === 2 ? responseHeadersString : null;
	                    },
	
	                    // Caches the header
	                    setRequestHeader: function( name, value ) {
	                        var lname = name.toLowerCase();
	                        if ( !state ) {
	                            name = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;
	                            requestHeaders[ name ] = value;
	                        }
	                        return this;
	                    },
	
	                    // Overrides response content-type header
	                    overrideMimeType: function( type ) {
	                        if ( !state ) {
	                            s.mimeType = type;
	                        }
	                        return this;
	                    },
	
	                    // Status-dependent callbacks
	                    statusCode: function( map ) {
	                        var code;
	                        if ( map ) {
	                            if ( state < 2 ) {
	                                for ( code in map ) {
	                                    // Lazy-add the new callback in a way that preserves old ones
	                                    statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
	                                }
	                            } else {
	                                // Execute the appropriate callbacks
	                                jqXHR.always( map[ jqXHR.status ] );
	                            }
	                        }
	                        return this;
	                    },
	
	                    // Cancel the request
	                    abort: function( statusText ) {
	                        var finalText = statusText || strAbort;
	                        if ( transport ) {
	                            transport.abort( finalText );
	                        }
	                        done( 0, finalText );
	                        return this;
	                    }
	                };
	
	            // Attach deferreds
	            deferred.promise( jqXHR ).complete = completeDeferred.add;
	            jqXHR.success = jqXHR.done;
	            jqXHR.error = jqXHR.fail;
	
	            // Remove hash character (#7531: and string promotion)
	            // Add protocol if not provided (#5866: IE7 issue with protocol-less urls)
	            // Handle falsy url in the settings object (#10093: consistency with old signature)
	            // We also use the url parameter if available
	            s.url = ( ( url || s.url || ajaxLocation ) + "" ).replace( rhash, "" ).replace( rprotocol, ajaxLocParts[ 1 ] + "//" );
	
	            // Alias method option to type as per ticket #12004
	            s.type = options.method || options.type || s.method || s.type;
	
	            // Extract dataTypes list
	            s.dataTypes = jQuery.trim( s.dataType || "*" ).toLowerCase().match( core_rnotwhite ) || [""];
	
	            // A cross-domain request is in order when we have a protocol:host:port mismatch
	            if ( s.crossDomain == null ) {
	                parts = rurl.exec( s.url.toLowerCase() );
	                s.crossDomain = !!( parts &&
	                    ( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||
	                    ( parts[ 3 ] || ( parts[ 1 ] === "http:" ? "80" : "443" ) ) !==
	                    ( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === "http:" ? "80" : "443" ) ) )
	                );
	            }
	
	            // Convert data if not already a string
	            if ( s.data && s.processData && typeof s.data !== "string" ) {
	                s.data = jQuery.param( s.data, s.traditional );
	            }
	
	            // Apply prefilters
	            inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );
	
	            // If request was aborted inside a prefilter, stop there
	            if ( state === 2 ) {
	                return jqXHR;
	            }
	
	            // We can fire global events as of now if asked to
	            fireGlobals = s.global;
	
	            // Watch for a new set of requests
	            if ( fireGlobals && jQuery.active++ === 0 ) {
	                jQuery.event.trigger("ajaxStart");
	            }
	
	            // Uppercase the type
	            s.type = s.type.toUpperCase();
	
	            // Determine if request has content
	            s.hasContent = !rnoContent.test( s.type );
	
	            // Save the URL in case we're toying with the If-Modified-Since
	            // and/or If-None-Match header later on
	            cacheURL = s.url;
	
	            // More options handling for requests with no content
	            if ( !s.hasContent ) {
	
	                // If data is available, append data to url
	                if ( s.data ) {
	                    cacheURL = ( s.url += ( ajax_rquery.test( cacheURL ) ? "&" : "?" ) + s.data );
	                    // #9682: remove data so that it's not used in an eventual retry
	                    delete s.data;
	                }
	
	                // Add anti-cache in url if needed
	                if ( s.cache === false ) {
	                    s.url = rts.test( cacheURL ) ?
	
	                        // If there is already a '_' parameter, set its value
	                        cacheURL.replace( rts, "$1_=" + ajax_nonce++ ) :
	
	                        // Otherwise add one to the end
	                    cacheURL + ( ajax_rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + ajax_nonce++;
	                }
	            }
	
	            // Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
	            if ( s.ifModified ) {
	                if ( jQuery.lastModified[ cacheURL ] ) {
	                    jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
	                }
	                if ( jQuery.etag[ cacheURL ] ) {
	                    jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
	                }
	            }
	
	            // Set the correct header, if data is being sent
	            if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
	                jqXHR.setRequestHeader( "Content-Type", s.contentType );
	            }
	
	            // Set the Accepts header for the server, depending on the dataType
	            jqXHR.setRequestHeader(
	                "Accept",
	                s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?
	                s.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
	                    s.accepts[ "*" ]
	            );
	
	            // Check for headers option
	            for ( i in s.headers ) {
	                jqXHR.setRequestHeader( i, s.headers[ i ] );
	            }
	
	            // Allow custom headers/mimetypes and early abort
	            if ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {
	                // Abort if not done already and return
	                return jqXHR.abort();
	            }
	
	            // aborting is no longer a cancellation
	            strAbort = "abort";
	
	            // Install callbacks on deferreds
	            for ( i in { success: 1, error: 1, complete: 1 } ) {
	                jqXHR[ i ]( s[ i ] );
	            }
	
	            // Get transport
	            transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );
	
	            // If no transport, we auto-abort
	            if ( !transport ) {
	                done( -1, "No Transport" );
	            } else {
	                jqXHR.readyState = 1;
	
	                // Send global event
	                if ( fireGlobals ) {
	                    globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
	                }
	                // Timeout
	                if ( s.async && s.timeout > 0 ) {
	                    timeoutTimer = setTimeout(function() {
	                        jqXHR.abort("timeout");
	                    }, s.timeout );
	                }
	
	                try {
	                    state = 1;
	                    transport.send( requestHeaders, done );
	                } catch ( e ) {
	                    // Propagate exception as error if not done
	                    if ( state < 2 ) {
	                        done( -1, e );
	                        // Simply rethrow otherwise
	                    } else {
	                        throw e;
	                    }
	                }
	            }
	
	            // Callback for when everything is done
	            function done( status, nativeStatusText, responses, headers ) {
	                var isSuccess, success, error, response, modified,
	                    statusText = nativeStatusText;
	
	                // Called once
	                if ( state === 2 ) {
	                    return;
	                }
	
	                // State is "done" now
	                state = 2;
	
	                // Clear timeout if it exists
	                if ( timeoutTimer ) {
	                    clearTimeout( timeoutTimer );
	                }
	
	                // Dereference transport for early garbage collection
	                // (no matter how long the jqXHR object will be used)
	                transport = undefined;
	
	                // Cache response headers
	                responseHeadersString = headers || "";
	
	                // Set readyState
	                jqXHR.readyState = status > 0 ? 4 : 0;
	
	                // Determine if successful
	                isSuccess = status >= 200 && status < 300 || status === 304;
	
	                // Get response data
	                if ( responses ) {
	                    response = ajaxHandleResponses( s, jqXHR, responses );
	                }
	
	                // Convert no matter what (that way responseXXX fields are always set)
	                response = ajaxConvert( s, response, jqXHR, isSuccess );
	
	                // If successful, handle type chaining
	                if ( isSuccess ) {
	
	                    // Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
	                    if ( s.ifModified ) {
	                        modified = jqXHR.getResponseHeader("Last-Modified");
	                        if ( modified ) {
	                            jQuery.lastModified[ cacheURL ] = modified;
	                        }
	                        modified = jqXHR.getResponseHeader("etag");
	                        if ( modified ) {
	                            jQuery.etag[ cacheURL ] = modified;
	                        }
	                    }
	
	                    // if no content
	                    if ( status === 204 || s.type === "HEAD" ) {
	                        statusText = "nocontent";
	
	                        // if not modified
	                    } else if ( status === 304 ) {
	                        statusText = "notmodified";
	
	                        // If we have data, let's convert it
	                    } else {
	                        statusText = response.state;
	                        success = response.data;
	                        error = response.error;
	                        isSuccess = !error;
	                    }
	                } else {
	                    // We extract error from statusText
	                    // then normalize statusText and status for non-aborts
	                    error = statusText;
	                    if ( status || !statusText ) {
	                        statusText = "error";
	                        if ( status < 0 ) {
	                            status = 0;
	                        }
	                    }
	                }
	
	                // Set data for the fake xhr object
	                jqXHR.status = status;
	                jqXHR.statusText = ( nativeStatusText || statusText ) + "";
	
	                // Success/Error
	                if ( isSuccess ) {
	                    deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
	                } else {
	                    deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
	                }
	
	                // Status-dependent callbacks
	                jqXHR.statusCode( statusCode );
	                statusCode = undefined;
	
	                if ( fireGlobals ) {
	                    globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
	                        [ jqXHR, s, isSuccess ? success : error ] );
	                }
	
	                // Complete
	                completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );
	
	                if ( fireGlobals ) {
	                    globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );
	                    // Handle the global AJAX counter
	                    if ( !( --jQuery.active ) ) {
	                        jQuery.event.trigger("ajaxStop");
	                    }
	                }
	            }
	
	            return jqXHR;
	        },
	
	        getJSON: function( url, data, callback ) {
	            return jQuery.get( url, data, callback, "json" );
	        },
	
	        getScript: function( url, callback ) {
	            return jQuery.get( url, undefined, callback, "script" );
	        }
	    });
	
	    jQuery.each( [ "get", "post" ], function( i, method ) {
	        jQuery[ method ] = function( url, data, callback, type ) {
	            // shift arguments if data argument was omitted
	            if ( jQuery.isFunction( data ) ) {
	                type = type || callback;
	                callback = data;
	                data = undefined;
	            }
	
	            return jQuery.ajax({
	                url: url,
	                type: method,
	                dataType: type,
	                data: data,
	                success: callback
	            });
	        };
	    });
	
	    /* Handles responses to an ajax request:
	     * - finds the right dataType (mediates between content-type and expected dataType)
	     * - returns the corresponding response
	     */
	    function ajaxHandleResponses( s, jqXHR, responses ) {
	        var firstDataType, ct, finalDataType, type,
	            contents = s.contents,
	            dataTypes = s.dataTypes;
	
	        // Remove auto dataType and get content-type in the process
	        while( dataTypes[ 0 ] === "*" ) {
	            dataTypes.shift();
	            if ( ct === undefined ) {
	                ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
	            }
	        }
	
	        // Check if we're dealing with a known content-type
	        if ( ct ) {
	            for ( type in contents ) {
	                if ( contents[ type ] && contents[ type ].test( ct ) ) {
	                    dataTypes.unshift( type );
	                    break;
	                }
	            }
	        }
	
	        // Check to see if we have a response for the expected dataType
	        if ( dataTypes[ 0 ] in responses ) {
	            finalDataType = dataTypes[ 0 ];
	        } else {
	            // Try convertible dataTypes
	            for ( type in responses ) {
	                if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[0] ] ) {
	                    finalDataType = type;
	                    break;
	                }
	                if ( !firstDataType ) {
	                    firstDataType = type;
	                }
	            }
	            // Or just use first one
	            finalDataType = finalDataType || firstDataType;
	        }
	
	        // If we found a dataType
	        // We add the dataType to the list if needed
	        // and return the corresponding response
	        if ( finalDataType ) {
	            if ( finalDataType !== dataTypes[ 0 ] ) {
	                dataTypes.unshift( finalDataType );
	            }
	            return responses[ finalDataType ];
	        }
	    }
	
	    /* Chain conversions given the request and the original response
	     * Also sets the responseXXX fields on the jqXHR instance
	     */
	    function ajaxConvert( s, response, jqXHR, isSuccess ) {
	        var conv2, current, conv, tmp, prev,
	            converters = {},
	        // Work with a copy of dataTypes in case we need to modify it for conversion
	            dataTypes = s.dataTypes.slice();
	
	        // Create converters map with lowercased keys
	        if ( dataTypes[ 1 ] ) {
	            for ( conv in s.converters ) {
	                converters[ conv.toLowerCase() ] = s.converters[ conv ];
	            }
	        }
	
	        current = dataTypes.shift();
	
	        // Convert to each sequential dataType
	        while ( current ) {
	
	            if ( s.responseFields[ current ] ) {
	                jqXHR[ s.responseFields[ current ] ] = response;
	            }
	
	            // Apply the dataFilter if provided
	            if ( !prev && isSuccess && s.dataFilter ) {
	                response = s.dataFilter( response, s.dataType );
	            }
	
	            prev = current;
	            current = dataTypes.shift();
	
	            if ( current ) {
	
	                // There's only work to do if current dataType is non-auto
	                if ( current === "*" ) {
	
	                    current = prev;
	
	                    // Convert response if prev dataType is non-auto and differs from current
	                } else if ( prev !== "*" && prev !== current ) {
	
	                    // Seek a direct converter
	                    conv = converters[ prev + " " + current ] || converters[ "* " + current ];
	
	                    // If none found, seek a pair
	                    if ( !conv ) {
	                        for ( conv2 in converters ) {
	
	                            // If conv2 outputs current
	                            tmp = conv2.split( " " );
	                            if ( tmp[ 1 ] === current ) {
	
	                                // If prev can be converted to accepted input
	                                conv = converters[ prev + " " + tmp[ 0 ] ] ||
	                                    converters[ "* " + tmp[ 0 ] ];
	                                if ( conv ) {
	                                    // Condense equivalence converters
	                                    if ( conv === true ) {
	                                        conv = converters[ conv2 ];
	
	                                        // Otherwise, insert the intermediate dataType
	                                    } else if ( converters[ conv2 ] !== true ) {
	                                        current = tmp[ 0 ];
	                                        dataTypes.unshift( tmp[ 1 ] );
	                                    }
	                                    break;
	                                }
	                            }
	                        }
	                    }
	
	                    // Apply converter (if not an equivalence)
	                    if ( conv !== true ) {
	
	                        // Unless errors are allowed to bubble, catch and return them
	                        if ( conv && s[ "throws" ] ) {
	                            response = conv( response );
	                        } else {
	                            try {
	                                response = conv( response );
	                            } catch ( e ) {
	                                return { state: "parsererror", error: conv ? e : "No conversion from " + prev + " to " + current };
	                            }
	                        }
	                    }
	                }
	            }
	        }
	
	        return { state: "success", data: response };
	    }
	// Install script dataType
	    jQuery.ajaxSetup({
	        accepts: {
	            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
	        },
	        contents: {
	            script: /(?:java|ecma)script/
	        },
	        converters: {
	            "text script": function( text ) {
	                jQuery.globalEval( text );
	                return text;
	            }
	        }
	    });
	
	// Handle cache's special case and global
	    jQuery.ajaxPrefilter( "script", function( s ) {
	        if ( s.cache === undefined ) {
	            s.cache = false;
	        }
	        if ( s.crossDomain ) {
	            s.type = "GET";
	            s.global = false;
	        }
	    });
	
	// Bind script tag hack transport
	    jQuery.ajaxTransport( "script", function(s) {
	
	        // This transport only deals with cross domain requests
	        if ( s.crossDomain ) {
	
	            var script,
	                head = document.head || jQuery("head")[0] || document.documentElement;
	
	            return {
	
	                send: function( _, callback ) {
	
	                    script = document.createElement("script");
	
	                    script.async = true;
	
	                    if ( s.scriptCharset ) {
	                        script.charset = s.scriptCharset;
	                    }
	
	                    script.src = s.url;
	
	                    // Attach handlers for all browsers
	                    script.onload = script.onreadystatechange = function( _, isAbort ) {
	
	                        if ( isAbort || !script.readyState || /loaded|complete/.test( script.readyState ) ) {
	
	                            // Handle memory leak in IE
	                            script.onload = script.onreadystatechange = null;
	
	                            // Remove the script
	                            if ( script.parentNode ) {
	                                script.parentNode.removeChild( script );
	                            }
	
	                            // Dereference the script
	                            script = null;
	
	                            // Callback if not abort
	                            if ( !isAbort ) {
	                                callback( 200, "success" );
	                            }
	                        }
	                    };
	
	                    // Circumvent IE6 bugs with base elements (#2709 and #4378) by prepending
	                    // Use native DOM manipulation to avoid our domManip AJAX trickery
	                    head.insertBefore( script, head.firstChild );
	                },
	
	                abort: function() {
	                    if ( script ) {
	                        script.onload( undefined, true );
	                    }
	                }
	            };
	        }
	    });
	    var oldCallbacks = [],
	        rjsonp = /(=)\?(?=&|$)|\?\?/;
	
	// Default jsonp settings
	    jQuery.ajaxSetup({
	        jsonp: "callback",
	        jsonpCallback: function() {
	            var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( ajax_nonce++ ) );
	            this[ callback ] = true;
	            return callback;
	        }
	    });
	
	// Detect, normalize options and install callbacks for jsonp requests
	    jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {
	
	        var callbackName, overwritten, responseContainer,
	            jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
	                        "url" :
	                    typeof s.data === "string" && !( s.contentType || "" ).indexOf("application/x-www-form-urlencoded") && rjsonp.test( s.data ) && "data"
	                );
	
	        // Handle iff the expected data type is "jsonp" or we have a parameter to set
	        if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {
	
	            // Get callback name, remembering preexisting value associated with it
	            callbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?
	                s.jsonpCallback() :
	                s.jsonpCallback;
	
	            // Insert callback into url or form data
	            if ( jsonProp ) {
	                s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
	            } else if ( s.jsonp !== false ) {
	                s.url += ( ajax_rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
	            }
	
	            // Use data converter to retrieve json after script execution
	            s.converters["script json"] = function() {
	                if ( !responseContainer ) {
	                    jQuery.error( callbackName + " was not called" );
	                }
	                return responseContainer[ 0 ];
	            };
	
	            // force json dataType
	            s.dataTypes[ 0 ] = "json";
	
	            // Install callback
	            overwritten = window[ callbackName ];
	            window[ callbackName ] = function() {
	                responseContainer = arguments;
	            };
	
	            // Clean-up function (fires after converters)
	            jqXHR.always(function() {
	                // Restore preexisting value
	                window[ callbackName ] = overwritten;
	
	                // Save back as free
	                if ( s[ callbackName ] ) {
	                    // make sure that re-using the options doesn't screw things around
	                    s.jsonpCallback = originalSettings.jsonpCallback;
	
	                    // save the callback name for future use
	                    oldCallbacks.push( callbackName );
	                }
	
	                // Call if it was a function and we have a response
	                if ( responseContainer && jQuery.isFunction( overwritten ) ) {
	                    overwritten( responseContainer[ 0 ] );
	                }
	
	                responseContainer = overwritten = undefined;
	            });
	
	            // Delegate to script
	            return "script";
	        }
	    });
	    var xhrCallbacks, xhrSupported,
	        xhrId = 0,
	    // #5280: Internet Explorer will keep connections alive if we don't abort on unload
	        xhrOnUnloadAbort = window.ActiveXObject && function() {
	                // Abort all pending requests
	                var key;
	                for ( key in xhrCallbacks ) {
	                    xhrCallbacks[ key ]( undefined, true );
	                }
	            };
	
	// Functions to create xhrs
	    function createStandardXHR() {
	        try {
	            return new window.XMLHttpRequest();
	        } catch( e ) {}
	    }
	
	    function createActiveXHR() {
	        try {
	            return new window.ActiveXObject("Microsoft.XMLHTTP");
	        } catch( e ) {}
	    }
	
	// Create the request object
	// (This is still attached to ajaxSettings for backward compatibility)
	    jQuery.ajaxSettings.xhr = window.ActiveXObject ?
	        /* Microsoft failed to properly
	         * implement the XMLHttpRequest in IE7 (can't request local files),
	         * so we use the ActiveXObject when it is available
	         * Additionally XMLHttpRequest can be disabled in IE7/IE8 so
	         * we need a fallback.
	         */
	        function() {
	            return !this.isLocal && createStandardXHR() || createActiveXHR();
	        } :
	        // For all other browsers, use the standard XMLHttpRequest object
	        createStandardXHR;
	
	// Determine support properties
	    xhrSupported = jQuery.ajaxSettings.xhr();
	    jQuery.support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
	    xhrSupported = jQuery.support.ajax = !!xhrSupported;
	
	// Create transport if the browser can provide an xhr
	    if ( xhrSupported ) {
	
	        jQuery.ajaxTransport(function( s ) {
	            // Cross domain only allowed if supported through XMLHttpRequest
	            if ( !s.crossDomain || jQuery.support.cors ) {
	
	                var callback;
	
	                return {
	                    send: function( headers, complete ) {
	
	                        // Get a new xhr
	                        var handle, i,
	                            xhr = s.xhr();
	
	                        // Open the socket
	                        // Passing null username, generates a login popup on Opera (#2865)
	                        if ( s.username ) {
	                            xhr.open( s.type, s.url, s.async, s.username, s.password );
	                        } else {
	                            xhr.open( s.type, s.url, s.async );
	                        }
	
	                        // Apply custom fields if provided
	                        if ( s.xhrFields ) {
	                            for ( i in s.xhrFields ) {
	                                xhr[ i ] = s.xhrFields[ i ];
	                            }
	                        }
	
	                        // Override mime type if needed
	                        if ( s.mimeType && xhr.overrideMimeType ) {
	                            xhr.overrideMimeType( s.mimeType );
	                        }
	
	                        // X-Requested-With header
	                        // For cross-domain requests, seeing as conditions for a preflight are
	                        // akin to a jigsaw puzzle, we simply never set it to be sure.
	                        // (it can always be set on a per-request basis or even using ajaxSetup)
	                        // For same-domain requests, won't change header if already provided.
	                        if ( !s.crossDomain && !headers["X-Requested-With"] ) {
	                            headers["X-Requested-With"] = "XMLHttpRequest";
	                        }
	
	                        // Need an extra try/catch for cross domain requests in Firefox 3
	                        try {
	                            for ( i in headers ) {
	                                xhr.setRequestHeader( i, headers[ i ] );
	                            }
	                        } catch( err ) {}
	
	                        // Do send the request
	                        // This may raise an exception which is actually
	                        // handled in jQuery.ajax (so no try/catch here)
	                        xhr.send( ( s.hasContent && s.data ) || null );
	
	                        // Listener
	                        callback = function( _, isAbort ) {
	                            var status, responseHeaders, statusText, responses;
	
	                            // Firefox throws exceptions when accessing properties
	                            // of an xhr when a network error occurred
	                            // http://helpful.knobs-dials.com/index.php/Component_returned_failure_code:_0x80040111_(NS_ERROR_NOT_AVAILABLE)
	                            try {
	
	                                // Was never called and is aborted or complete
	                                if ( callback && ( isAbort || xhr.readyState === 4 ) ) {
	
	                                    // Only called once
	                                    callback = undefined;
	
	                                    // Do not keep as active anymore
	                                    if ( handle ) {
	                                        xhr.onreadystatechange = jQuery.noop;
	                                        if ( xhrOnUnloadAbort ) {
	                                            delete xhrCallbacks[ handle ];
	                                        }
	                                    }
	
	                                    // If it's an abort
	                                    if ( isAbort ) {
	                                        // Abort it manually if needed
	                                        if ( xhr.readyState !== 4 ) {
	                                            xhr.abort();
	                                        }
	                                    } else {
	                                        responses = {};
	                                        status = xhr.status;
	                                        responseHeaders = xhr.getAllResponseHeaders();
	
	                                        // When requesting binary data, IE6-9 will throw an exception
	                                        // on any attempt to access responseText (#11426)
	                                        if ( typeof xhr.responseText === "string" ) {
	                                            responses.text = xhr.responseText;
	                                        }
	
	                                        // Firefox throws an exception when accessing
	                                        // statusText for faulty cross-domain requests
	                                        try {
	                                            statusText = xhr.statusText;
	                                        } catch( e ) {
	                                            // We normalize with Webkit giving an empty statusText
	                                            statusText = "";
	                                        }
	
	                                        // Filter status for non standard behaviors
	
	                                        // If the request is local and we have data: assume a success
	                                        // (success with no data won't get notified, that's the best we
	                                        // can do given current implementations)
	                                        if ( !status && s.isLocal && !s.crossDomain ) {
	                                            status = responses.text ? 200 : 404;
	                                            // IE - #1450: sometimes returns 1223 when it should be 204
	                                        } else if ( status === 1223 ) {
	                                            status = 204;
	                                        }
	                                    }
	                                }
	                            } catch( firefoxAccessException ) {
	                                if ( !isAbort ) {
	                                    complete( -1, firefoxAccessException );
	                                }
	                            }
	
	                            // Call complete if needed
	                            if ( responses ) {
	                                complete( status, statusText, responses, responseHeaders );
	                            }
	                        };
	
	                        if ( !s.async ) {
	                            // if we're in sync mode we fire the callback
	                            callback();
	                        } else if ( xhr.readyState === 4 ) {
	                            // (IE6 & IE7) if it's in cache and has been
	                            // retrieved directly we need to fire the callback
	                            setTimeout( callback );
	                        } else {
	                            handle = ++xhrId;
	                            if ( xhrOnUnloadAbort ) {
	                                // Create the active xhrs callbacks list if needed
	                                // and attach the unload handler
	                                if ( !xhrCallbacks ) {
	                                    xhrCallbacks = {};
	                                    jQuery( window ).unload( xhrOnUnloadAbort );
	                                }
	                                // Add to list of active xhrs callbacks
	                                xhrCallbacks[ handle ] = callback;
	                            }
	                            xhr.onreadystatechange = callback;
	                        }
	                    },
	
	                    abort: function() {
	                        if ( callback ) {
	                            callback( undefined, true );
	                        }
	                    }
	                };
	            }
	        });
	    }
	    var fxNow, timerId,
	        rfxtypes = /^(?:toggle|show|hide)$/,
	        rfxnum = new RegExp( "^(?:([+-])=|)(" + core_pnum + ")([a-z%]*)$", "i" ),
	        rrun = /queueHooks$/,
	        animationPrefilters = [ defaultPrefilter ],
	        tweeners = {
	            "*": [function( prop, value ) {
	                var tween = this.createTween( prop, value ),
	                    target = tween.cur(),
	                    parts = rfxnum.exec( value ),
	                    unit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),
	
	                // Starting value computation is required for potential unit mismatches
	                    start = ( jQuery.cssNumber[ prop ] || unit !== "px" && +target ) &&
	                        rfxnum.exec( jQuery.css( tween.elem, prop ) ),
	                    scale = 1,
	                    maxIterations = 20;
	
	                if ( start && start[ 3 ] !== unit ) {
	                    // Trust units reported by jQuery.css
	                    unit = unit || start[ 3 ];
	
	                    // Make sure we update the tween properties later on
	                    parts = parts || [];
	
	                    // Iteratively approximate from a nonzero starting point
	                    start = +target || 1;
	
	                    do {
	                        // If previous iteration zeroed out, double until we get *something*
	                        // Use a string for doubling factor so we don't accidentally see scale as unchanged below
	                        scale = scale || ".5";
	
	                        // Adjust and apply
	                        start = start / scale;
	                        jQuery.style( tween.elem, prop, start + unit );
	
	                        // Update scale, tolerating zero or NaN from tween.cur()
	                        // And breaking the loop if scale is unchanged or perfect, or if we've just had enough
	                    } while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );
	                }
	
	                // Update tween properties
	                if ( parts ) {
	                    start = tween.start = +start || +target || 0;
	                    tween.unit = unit;
	                    // If a +=/-= token was provided, we're doing a relative animation
	                    tween.end = parts[ 1 ] ?
	                    start + ( parts[ 1 ] + 1 ) * parts[ 2 ] :
	                        +parts[ 2 ];
	                }
	
	                return tween;
	            }]
	        };
	
	// Animations created synchronously will run synchronously
	    function createFxNow() {
	        setTimeout(function() {
	            fxNow = undefined;
	        });
	        return ( fxNow = jQuery.now() );
	    }
	
	    function createTween( value, prop, animation ) {
	        var tween,
	            collection = ( tweeners[ prop ] || [] ).concat( tweeners[ "*" ] ),
	            index = 0,
	            length = collection.length;
	        for ( ; index < length; index++ ) {
	            if ( (tween = collection[ index ].call( animation, prop, value )) ) {
	
	                // we're done with this property
	                return tween;
	            }
	        }
	    }
	
	    function Animation( elem, properties, options ) {
	        var result,
	            stopped,
	            index = 0,
	            length = animationPrefilters.length,
	            deferred = jQuery.Deferred().always( function() {
	                // don't match elem in the :animated selector
	                delete tick.elem;
	            }),
	            tick = function() {
	                if ( stopped ) {
	                    return false;
	                }
	                var currentTime = fxNow || createFxNow(),
	                    remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),
	                // archaic crash bug won't allow us to use 1 - ( 0.5 || 0 ) (#12497)
	                    temp = remaining / animation.duration || 0,
	                    percent = 1 - temp,
	                    index = 0,
	                    length = animation.tweens.length;
	
	                for ( ; index < length ; index++ ) {
	                    animation.tweens[ index ].run( percent );
	                }
	
	                deferred.notifyWith( elem, [ animation, percent, remaining ]);
	
	                if ( percent < 1 && length ) {
	                    return remaining;
	                } else {
	                    deferred.resolveWith( elem, [ animation ] );
	                    return false;
	                }
	            },
	            animation = deferred.promise({
	                elem: elem,
	                props: jQuery.extend( {}, properties ),
	                opts: jQuery.extend( true, { specialEasing: {} }, options ),
	                originalProperties: properties,
	                originalOptions: options,
	                startTime: fxNow || createFxNow(),
	                duration: options.duration,
	                tweens: [],
	                createTween: function( prop, end ) {
	                    var tween = jQuery.Tween( elem, animation.opts, prop, end,
	                        animation.opts.specialEasing[ prop ] || animation.opts.easing );
	                    animation.tweens.push( tween );
	                    return tween;
	                },
	                stop: function( gotoEnd ) {
	                    var index = 0,
	                    // if we are going to the end, we want to run all the tweens
	                    // otherwise we skip this part
	                        length = gotoEnd ? animation.tweens.length : 0;
	                    if ( stopped ) {
	                        return this;
	                    }
	                    stopped = true;
	                    for ( ; index < length ; index++ ) {
	                        animation.tweens[ index ].run( 1 );
	                    }
	
	                    // resolve when we played the last frame
	                    // otherwise, reject
	                    if ( gotoEnd ) {
	                        deferred.resolveWith( elem, [ animation, gotoEnd ] );
	                    } else {
	                        deferred.rejectWith( elem, [ animation, gotoEnd ] );
	                    }
	                    return this;
	                }
	            }),
	            props = animation.props;
	
	        propFilter( props, animation.opts.specialEasing );
	
	        for ( ; index < length ; index++ ) {
	            result = animationPrefilters[ index ].call( animation, elem, props, animation.opts );
	            if ( result ) {
	                return result;
	            }
	        }
	
	        jQuery.map( props, createTween, animation );
	
	        if ( jQuery.isFunction( animation.opts.start ) ) {
	            animation.opts.start.call( elem, animation );
	        }
	
	        jQuery.fx.timer(
	            jQuery.extend( tick, {
	                elem: elem,
	                anim: animation,
	                queue: animation.opts.queue
	            })
	        );
	
	        // attach callbacks from options
	        return animation.progress( animation.opts.progress )
	            .done( animation.opts.done, animation.opts.complete )
	            .fail( animation.opts.fail )
	            .always( animation.opts.always );
	    }
	
	    function propFilter( props, specialEasing ) {
	        var index, name, easing, value, hooks;
	
	        // camelCase, specialEasing and expand cssHook pass
	        for ( index in props ) {
	            name = jQuery.camelCase( index );
	            easing = specialEasing[ name ];
	            value = props[ index ];
	            if ( jQuery.isArray( value ) ) {
	                easing = value[ 1 ];
	                value = props[ index ] = value[ 0 ];
	            }
	
	            if ( index !== name ) {
	                props[ name ] = value;
	                delete props[ index ];
	            }
	
	            hooks = jQuery.cssHooks[ name ];
	            if ( hooks && "expand" in hooks ) {
	                value = hooks.expand( value );
	                delete props[ name ];
	
	                // not quite $.extend, this wont overwrite keys already present.
	                // also - reusing 'index' from above because we have the correct "name"
	                for ( index in value ) {
	                    if ( !( index in props ) ) {
	                        props[ index ] = value[ index ];
	                        specialEasing[ index ] = easing;
	                    }
	                }
	            } else {
	                specialEasing[ name ] = easing;
	            }
	        }
	    }
	
	    jQuery.Animation = jQuery.extend( Animation, {
	
	        tweener: function( props, callback ) {
	            if ( jQuery.isFunction( props ) ) {
	                callback = props;
	                props = [ "*" ];
	            } else {
	                props = props.split(" ");
	            }
	
	            var prop,
	                index = 0,
	                length = props.length;
	
	            for ( ; index < length ; index++ ) {
	                prop = props[ index ];
	                tweeners[ prop ] = tweeners[ prop ] || [];
	                tweeners[ prop ].unshift( callback );
	            }
	        },
	
	        prefilter: function( callback, prepend ) {
	            if ( prepend ) {
	                animationPrefilters.unshift( callback );
	            } else {
	                animationPrefilters.push( callback );
	            }
	        }
	    });
	
	    function defaultPrefilter( elem, props, opts ) {
	        /* jshint validthis: true */
	        var prop, value, toggle, tween, hooks, oldfire,
	            anim = this,
	            orig = {},
	            style = elem.style,
	            hidden = elem.nodeType && isHidden( elem ),
	            dataShow = jQuery._data( elem, "fxshow" );
	
	        // handle queue: false promises
	        if ( !opts.queue ) {
	            hooks = jQuery._queueHooks( elem, "fx" );
	            if ( hooks.unqueued == null ) {
	                hooks.unqueued = 0;
	                oldfire = hooks.empty.fire;
	                hooks.empty.fire = function() {
	                    if ( !hooks.unqueued ) {
	                        oldfire();
	                    }
	                };
	            }
	            hooks.unqueued++;
	
	            anim.always(function() {
	                // doing this makes sure that the complete handler will be called
	                // before this completes
	                anim.always(function() {
	                    hooks.unqueued--;
	                    if ( !jQuery.queue( elem, "fx" ).length ) {
	                        hooks.empty.fire();
	                    }
	                });
	            });
	        }
	
	        // height/width overflow pass
	        if ( elem.nodeType === 1 && ( "height" in props || "width" in props ) ) {
	            // Make sure that nothing sneaks out
	            // Record all 3 overflow attributes because IE does not
	            // change the overflow attribute when overflowX and
	            // overflowY are set to the same value
	            opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];
	
	            // Set display property to inline-block for height/width
	            // animations on inline elements that are having width/height animated
	            if ( jQuery.css( elem, "display" ) === "inline" &&
	                jQuery.css( elem, "float" ) === "none" ) {
	
	                // inline-level elements accept inline-block;
	                // block-level elements need to be inline with layout
	                if ( !jQuery.support.inlineBlockNeedsLayout || css_defaultDisplay( elem.nodeName ) === "inline" ) {
	                    style.display = "inline-block";
	
	                } else {
	                    style.zoom = 1;
	                }
	            }
	        }
	
	        if ( opts.overflow ) {
	            style.overflow = "hidden";
	            if ( !jQuery.support.shrinkWrapBlocks ) {
	                anim.always(function() {
	                    style.overflow = opts.overflow[ 0 ];
	                    style.overflowX = opts.overflow[ 1 ];
	                    style.overflowY = opts.overflow[ 2 ];
	                });
	            }
	        }
	
	
	        // show/hide pass
	        for ( prop in props ) {
	            value = props[ prop ];
	            if ( rfxtypes.exec( value ) ) {
	                delete props[ prop ];
	                toggle = toggle || value === "toggle";
	                if ( value === ( hidden ? "hide" : "show" ) ) {
	                    continue;
	                }
	                orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );
	            }
	        }
	
	        if ( !jQuery.isEmptyObject( orig ) ) {
	            if ( dataShow ) {
	                if ( "hidden" in dataShow ) {
	                    hidden = dataShow.hidden;
	                }
	            } else {
	                dataShow = jQuery._data( elem, "fxshow", {} );
	            }
	
	            // store state if its toggle - enables .stop().toggle() to "reverse"
	            if ( toggle ) {
	                dataShow.hidden = !hidden;
	            }
	            if ( hidden ) {
	                jQuery( elem ).show();
	            } else {
	                anim.done(function() {
	                    jQuery( elem ).hide();
	                });
	            }
	            anim.done(function() {
	                var prop;
	                jQuery._removeData( elem, "fxshow" );
	                for ( prop in orig ) {
	                    jQuery.style( elem, prop, orig[ prop ] );
	                }
	            });
	            for ( prop in orig ) {
	                tween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );
	
	                if ( !( prop in dataShow ) ) {
	                    dataShow[ prop ] = tween.start;
	                    if ( hidden ) {
	                        tween.end = tween.start;
	                        tween.start = prop === "width" || prop === "height" ? 1 : 0;
	                    }
	                }
	            }
	        }
	    }
	
	    function Tween( elem, options, prop, end, easing ) {
	        return new Tween.prototype.init( elem, options, prop, end, easing );
	    }
	    jQuery.Tween = Tween;
	
	    Tween.prototype = {
	        constructor: Tween,
	        init: function( elem, options, prop, end, easing, unit ) {
	            this.elem = elem;
	            this.prop = prop;
	            this.easing = easing || "swing";
	            this.options = options;
	            this.start = this.now = this.cur();
	            this.end = end;
	            this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	        },
	        cur: function() {
	            var hooks = Tween.propHooks[ this.prop ];
	
	            return hooks && hooks.get ?
	                hooks.get( this ) :
	                Tween.propHooks._default.get( this );
	        },
	        run: function( percent ) {
	            var eased,
	                hooks = Tween.propHooks[ this.prop ];
	
	            if ( this.options.duration ) {
	                this.pos = eased = jQuery.easing[ this.easing ](
	                    percent, this.options.duration * percent, 0, 1, this.options.duration
	                );
	            } else {
	                this.pos = eased = percent;
	            }
	            this.now = ( this.end - this.start ) * eased + this.start;
	
	            if ( this.options.step ) {
	                this.options.step.call( this.elem, this.now, this );
	            }
	
	            if ( hooks && hooks.set ) {
	                hooks.set( this );
	            } else {
	                Tween.propHooks._default.set( this );
	            }
	            return this;
	        }
	    };
	
	    Tween.prototype.init.prototype = Tween.prototype;
	
	    Tween.propHooks = {
	        _default: {
	            get: function( tween ) {
	                var result;
	
	                if ( tween.elem[ tween.prop ] != null &&
	                    (!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {
	                    return tween.elem[ tween.prop ];
	                }
	
	                // passing an empty string as a 3rd parameter to .css will automatically
	                // attempt a parseFloat and fallback to a string if the parse fails
	                // so, simple values such as "10px" are parsed to Float.
	                // complex values such as "rotate(1rad)" are returned as is.
	                result = jQuery.css( tween.elem, tween.prop, "" );
	                // Empty strings, null, undefined and "auto" are converted to 0.
	                return !result || result === "auto" ? 0 : result;
	            },
	            set: function( tween ) {
	                // use step hook for back compat - use cssHook if its there - use .style if its
	                // available and use plain properties where available
	                if ( jQuery.fx.step[ tween.prop ] ) {
	                    jQuery.fx.step[ tween.prop ]( tween );
	                } else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {
	                    jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
	                } else {
	                    tween.elem[ tween.prop ] = tween.now;
	                }
	            }
	        }
	    };
	
	// Support: IE <=9
	// Panic based approach to setting things on disconnected nodes
	
	    Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	        set: function( tween ) {
	            if ( tween.elem.nodeType && tween.elem.parentNode ) {
	                tween.elem[ tween.prop ] = tween.now;
	            }
	        }
	    };
	
	    jQuery.each([ "toggle", "show", "hide" ], function( i, name ) {
	        var cssFn = jQuery.fn[ name ];
	        jQuery.fn[ name ] = function( speed, easing, callback ) {
	            return speed == null || typeof speed === "boolean" ?
	                cssFn.apply( this, arguments ) :
	                this.animate( genFx( name, true ), speed, easing, callback );
	        };
	    });
	
	    jQuery.fn.extend({
	        fadeTo: function( speed, to, easing, callback ) {
	
	            // show any hidden elements after setting opacity to 0
	            return this.filter( isHidden ).css( "opacity", 0 ).show()
	
	                // animate to the value specified
	                .end().animate({ opacity: to }, speed, easing, callback );
	        },
	        animate: function( prop, speed, easing, callback ) {
	            var empty = jQuery.isEmptyObject( prop ),
	                optall = jQuery.speed( speed, easing, callback ),
	                doAnimation = function() {
	                    // Operate on a copy of prop so per-property easing won't be lost
	                    var anim = Animation( this, jQuery.extend( {}, prop ), optall );
	
	                    // Empty animations, or finishing resolves immediately
	                    if ( empty || jQuery._data( this, "finish" ) ) {
	                        anim.stop( true );
	                    }
	                };
	            doAnimation.finish = doAnimation;
	
	            return empty || optall.queue === false ?
	                this.each( doAnimation ) :
	                this.queue( optall.queue, doAnimation );
	        },
	        stop: function( type, clearQueue, gotoEnd ) {
	            var stopQueue = function( hooks ) {
	                var stop = hooks.stop;
	                delete hooks.stop;
	                stop( gotoEnd );
	            };
	
	            if ( typeof type !== "string" ) {
	                gotoEnd = clearQueue;
	                clearQueue = type;
	                type = undefined;
	            }
	            if ( clearQueue && type !== false ) {
	                this.queue( type || "fx", [] );
	            }
	
	            return this.each(function() {
	                var dequeue = true,
	                    index = type != null && type + "queueHooks",
	                    timers = jQuery.timers,
	                    data = jQuery._data( this );
	
	                if ( index ) {
	                    if ( data[ index ] && data[ index ].stop ) {
	                        stopQueue( data[ index ] );
	                    }
	                } else {
	                    for ( index in data ) {
	                        if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
	                            stopQueue( data[ index ] );
	                        }
	                    }
	                }
	
	                for ( index = timers.length; index--; ) {
	                    if ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {
	                        timers[ index ].anim.stop( gotoEnd );
	                        dequeue = false;
	                        timers.splice( index, 1 );
	                    }
	                }
	
	                // start the next in the queue if the last step wasn't forced
	                // timers currently will call their complete callbacks, which will dequeue
	                // but only if they were gotoEnd
	                if ( dequeue || !gotoEnd ) {
	                    jQuery.dequeue( this, type );
	                }
	            });
	        },
	        finish: function( type ) {
	            if ( type !== false ) {
	                type = type || "fx";
	            }
	            return this.each(function() {
	                var index,
	                    data = jQuery._data( this ),
	                    queue = data[ type + "queue" ],
	                    hooks = data[ type + "queueHooks" ],
	                    timers = jQuery.timers,
	                    length = queue ? queue.length : 0;
	
	                // enable finishing flag on private data
	                data.finish = true;
	
	                // empty the queue first
	                jQuery.queue( this, type, [] );
	
	                if ( hooks && hooks.stop ) {
	                    hooks.stop.call( this, true );
	                }
	
	                // look for any active animations, and finish them
	                for ( index = timers.length; index--; ) {
	                    if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
	                        timers[ index ].anim.stop( true );
	                        timers.splice( index, 1 );
	                    }
	                }
	
	                // look for any animations in the old queue and finish them
	                for ( index = 0; index < length; index++ ) {
	                    if ( queue[ index ] && queue[ index ].finish ) {
	                        queue[ index ].finish.call( this );
	                    }
	                }
	
	                // turn off finishing flag
	                delete data.finish;
	            });
	        }
	    });
	
	// Generate parameters to create a standard animation
	    function genFx( type, includeWidth ) {
	        var which,
	            attrs = { height: type },
	            i = 0;
	
	        // if we include width, step value is 1 to do all cssExpand values,
	        // if we don't include width, step value is 2 to skip over Left and Right
	        includeWidth = includeWidth? 1 : 0;
	        for( ; i < 4 ; i += 2 - includeWidth ) {
	            which = cssExpand[ i ];
	            attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	        }
	
	        if ( includeWidth ) {
	            attrs.opacity = attrs.width = type;
	        }
	
	        return attrs;
	    }
	
	// Generate shortcuts for custom animations
	    jQuery.each({
	        slideDown: genFx("show"),
	        slideUp: genFx("hide"),
	        slideToggle: genFx("toggle"),
	        fadeIn: { opacity: "show" },
	        fadeOut: { opacity: "hide" },
	        fadeToggle: { opacity: "toggle" }
	    }, function( name, props ) {
	        jQuery.fn[ name ] = function( speed, easing, callback ) {
	            return this.animate( props, speed, easing, callback );
	        };
	    });
	
	    jQuery.speed = function( speed, easing, fn ) {
	        var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
	            complete: fn || !fn && easing ||
	            jQuery.isFunction( speed ) && speed,
	            duration: speed,
	            easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
	        };
	
	        opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration :
	            opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;
	
	        // normalize opt.queue - true/undefined/null -> "fx"
	        if ( opt.queue == null || opt.queue === true ) {
	            opt.queue = "fx";
	        }
	
	        // Queueing
	        opt.old = opt.complete;
	
	        opt.complete = function() {
	            if ( jQuery.isFunction( opt.old ) ) {
	                opt.old.call( this );
	            }
	
	            if ( opt.queue ) {
	                jQuery.dequeue( this, opt.queue );
	            }
	        };
	
	        return opt;
	    };
	
	    jQuery.easing = {
	        linear: function( p ) {
	            return p;
	        },
	        swing: function( p ) {
	            return 0.5 - Math.cos( p*Math.PI ) / 2;
	        }
	    };
	
	    jQuery.timers = [];
	    jQuery.fx = Tween.prototype.init;
	    jQuery.fx.tick = function() {
	        var timer,
	            timers = jQuery.timers,
	            i = 0;
	
	        fxNow = jQuery.now();
	
	        for ( ; i < timers.length; i++ ) {
	            timer = timers[ i ];
	            // Checks the timer has not already been removed
	            if ( !timer() && timers[ i ] === timer ) {
	                timers.splice( i--, 1 );
	            }
	        }
	
	        if ( !timers.length ) {
	            jQuery.fx.stop();
	        }
	        fxNow = undefined;
	    };
	
	    jQuery.fx.timer = function( timer ) {
	        if ( timer() && jQuery.timers.push( timer ) ) {
	            jQuery.fx.start();
	        }
	    };
	
	    jQuery.fx.interval = 13;
	
	    jQuery.fx.start = function() {
	        if ( !timerId ) {
	            timerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );
	        }
	    };
	
	    jQuery.fx.stop = function() {
	        clearInterval( timerId );
	        timerId = null;
	    };
	
	    jQuery.fx.speeds = {
	        slow: 600,
	        fast: 200,
	        // Default speed
	        _default: 400
	    };
	
	// Back Compat <1.8 extension point
	    jQuery.fx.step = {};
	
	    if ( jQuery.expr && jQuery.expr.filters ) {
	        jQuery.expr.filters.animated = function( elem ) {
	            return jQuery.grep(jQuery.timers, function( fn ) {
	                return elem === fn.elem;
	            }).length;
	        };
	    }
	    jQuery.fn.offset = function( options ) {
	        if ( arguments.length ) {
	            return options === undefined ?
	                this :
	                this.each(function( i ) {
	                    jQuery.offset.setOffset( this, options, i );
	                });
	        }
	
	        var docElem, win,
	            box = { top: 0, left: 0 },
	            elem = this[ 0 ],
	            doc = elem && elem.ownerDocument;
	
	        if ( !doc ) {
	            return;
	        }
	
	        docElem = doc.documentElement;
	
	        // Make sure it's not a disconnected DOM node
	        if ( !jQuery.contains( docElem, elem ) ) {
	            return box;
	        }
	
	        // If we don't have gBCR, just use 0,0 rather than error
	        // BlackBerry 5, iOS 3 (original iPhone)
	        if ( typeof elem.getBoundingClientRect !== core_strundefined ) {
	            box = elem.getBoundingClientRect();
	        }
	        win = getWindow( doc );
	        return {
	            top: box.top  + ( win.pageYOffset || docElem.scrollTop )  - ( docElem.clientTop  || 0 ),
	            left: box.left + ( win.pageXOffset || docElem.scrollLeft ) - ( docElem.clientLeft || 0 )
	        };
	    };
	
	    jQuery.offset = {
	
	        setOffset: function( elem, options, i ) {
	            var position = jQuery.css( elem, "position" );
	
	            // set position first, in-case top/left are set even on static elem
	            if ( position === "static" ) {
	                elem.style.position = "relative";
	            }
	
	            var curElem = jQuery( elem ),
	                curOffset = curElem.offset(),
	                curCSSTop = jQuery.css( elem, "top" ),
	                curCSSLeft = jQuery.css( elem, "left" ),
	                calculatePosition = ( position === "absolute" || position === "fixed" ) && jQuery.inArray("auto", [curCSSTop, curCSSLeft]) > -1,
	                props = {}, curPosition = {}, curTop, curLeft;
	
	            // need to be able to calculate position if either top or left is auto and position is either absolute or fixed
	            if ( calculatePosition ) {
	                curPosition = curElem.position();
	                curTop = curPosition.top;
	                curLeft = curPosition.left;
	            } else {
	                curTop = parseFloat( curCSSTop ) || 0;
	                curLeft = parseFloat( curCSSLeft ) || 0;
	            }
	
	            if ( jQuery.isFunction( options ) ) {
	                options = options.call( elem, i, curOffset );
	            }
	
	            if ( options.top != null ) {
	                props.top = ( options.top - curOffset.top ) + curTop;
	            }
	            if ( options.left != null ) {
	                props.left = ( options.left - curOffset.left ) + curLeft;
	            }
	
	            if ( "using" in options ) {
	                options.using.call( elem, props );
	            } else {
	                curElem.css( props );
	            }
	        }
	    };
	
	
	    jQuery.fn.extend({
	
	        position: function() {
	            if ( !this[ 0 ] ) {
	                return;
	            }
	
	            var offsetParent, offset,
	                parentOffset = { top: 0, left: 0 },
	                elem = this[ 0 ];
	
	            // fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is it's only offset parent
	            if ( jQuery.css( elem, "position" ) === "fixed" ) {
	                // we assume that getBoundingClientRect is available when computed position is fixed
	                offset = elem.getBoundingClientRect();
	            } else {
	                // Get *real* offsetParent
	                offsetParent = this.offsetParent();
	
	                // Get correct offsets
	                offset = this.offset();
	                if ( !jQuery.nodeName( offsetParent[ 0 ], "html" ) ) {
	                    parentOffset = offsetParent.offset();
	                }
	
	                // Add offsetParent borders
	                parentOffset.top  += jQuery.css( offsetParent[ 0 ], "borderTopWidth", true );
	                parentOffset.left += jQuery.css( offsetParent[ 0 ], "borderLeftWidth", true );
	            }
	
	            // Subtract parent offsets and element margins
	            // note: when an element has margin: auto the offsetLeft and marginLeft
	            // are the same in Safari causing offset.left to incorrectly be 0
	            return {
	                top:  offset.top  - parentOffset.top - jQuery.css( elem, "marginTop", true ),
	                left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true)
	            };
	        },
	
	        offsetParent: function() {
	            return this.map(function() {
	                var offsetParent = this.offsetParent || docElem;
	                while ( offsetParent && ( !jQuery.nodeName( offsetParent, "html" ) && jQuery.css( offsetParent, "position") === "static" ) ) {
	                    offsetParent = offsetParent.offsetParent;
	                }
	                return offsetParent || docElem;
	            });
	        }
	    });
	
	
	// Create scrollLeft and scrollTop methods
	    jQuery.each( {scrollLeft: "pageXOffset", scrollTop: "pageYOffset"}, function( method, prop ) {
	        var top = /Y/.test( prop );
	
	        jQuery.fn[ method ] = function( val ) {
	            return jQuery.access( this, function( elem, method, val ) {
	                var win = getWindow( elem );
	
	                if ( val === undefined ) {
	                    return win ? (prop in win) ? win[ prop ] :
	                        win.document.documentElement[ method ] :
	                        elem[ method ];
	                }
	
	                if ( win ) {
	                    win.scrollTo(
	                        !top ? val : jQuery( win ).scrollLeft(),
	                        top ? val : jQuery( win ).scrollTop()
	                    );
	
	                } else {
	                    elem[ method ] = val;
	                }
	            }, method, val, arguments.length, null );
	        };
	    });
	
	    function getWindow( elem ) {
	        return jQuery.isWindow( elem ) ?
	            elem :
	            elem.nodeType === 9 ?
	            elem.defaultView || elem.parentWindow :
	                false;
	    }
	// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
	    jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	        jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name }, function( defaultExtra, funcName ) {
	            // margin is only for outerHeight, outerWidth
	            jQuery.fn[ funcName ] = function( margin, value ) {
	                var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
	                    extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );
	
	                return jQuery.access( this, function( elem, type, value ) {
	                    var doc;
	
	                    if ( jQuery.isWindow( elem ) ) {
	                        // As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
	                        // isn't a whole lot we can do. See pull request at this URL for discussion:
	                        // https://github.com/jquery/jquery/pull/764
	                        return elem.document.documentElement[ "client" + name ];
	                    }
	
	                    // Get document width or height
	                    if ( elem.nodeType === 9 ) {
	                        doc = elem.documentElement;
	
	                        // Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height], whichever is greatest
	                        // unfortunately, this causes bug #3838 in IE6/8 only, but there is currently no good, small way to fix it.
	                        return Math.max(
	                            elem.body[ "scroll" + name ], doc[ "scroll" + name ],
	                            elem.body[ "offset" + name ], doc[ "offset" + name ],
	                            doc[ "client" + name ]
	                        );
	                    }
	
	                    return value === undefined ?
	                        // Get width or height on the element, requesting but not forcing parseFloat
	                        jQuery.css( elem, type, extra ) :
	
	                        // Set width or height on the element
	                        jQuery.style( elem, type, value, extra );
	                }, type, chainable ? margin : undefined, chainable, null );
	            };
	        });
	    });
	// Limit scope pollution from any deprecated API
	// (function() {
	
	// The number of elements contained in the matched element set
	    jQuery.fn.size = function() {
	        return this.length;
	    };
	
	    jQuery.fn.andSelf = jQuery.fn.addBack;
	
	// })();
	    if ( typeof module === "object" && module && typeof module.exports === "object" ) {
	        // Expose jQuery as module.exports in loaders that implement the Node
	        // module pattern (including browserify). Do not create the global, since
	        // the user will be storing it themselves locally, and globals are frowned
	        // upon in the Node module world.
	        module.exports = jQuery;
	    } else {
	        // Otherwise expose jQuery to the global object as usual
	        window.jQuery = window.$ = jQuery;
	
	        // Register as a named AMD module, since jQuery can be concatenated with other
	        // files that may use define, but not via a proper concatenation script that
	        // understands anonymous AMD modules. A named AMD is safest and most robust
	        // way to register. Lowercase jquery is used because AMD module names are
	        // derived from file names, and jQuery is normally delivered in a lowercase
	        // file name. Do this after creating the global so that if an AMD module wants
	        // to call noConflict to hide this version of jQuery, it will work.
	        if ( true ) {
	            !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () { return jQuery; }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	        }
	    }
	
	})( window );
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(3)(module)))

/***/ }),
/* 3 */
/***/ (function(module, exports) {

	module.exports = function(module) {
		if(!module.webpackPolyfill) {
			module.deprecate = function() {};
			module.paths = [];
			// module.parent = undefined by default
			module.children = [];
			module.webpackPolyfill = 1;
		}
		return module;
	}


/***/ }),
/* 4 */
/***/ (function(module, exports) {

	/*! jQuery UI - v1.10.3 - 2013-11-18
	* http://jqueryui.com
	* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.resizable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.tabs.js
	* Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
	
	(function(e,t){function i(t,i){var s,n,r,o=t.nodeName.toLowerCase();return"area"===o?(s=t.parentNode,n=s.name,t.href&&n&&"map"===s.nodeName.toLowerCase()?(r=e("img[usemap=#"+n+"]")[0],!!r&&a(r)):!1):(/input|select|textarea|button|object/.test(o)?!t.disabled:"a"===o?t.href||i:i)&&a(t)}function a(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,n=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,a){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),a&&a.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var a,s,n=e(this[0]);n.length&&n[0]!==document;){if(a=n.css("position"),("absolute"===a||"relative"===a||"fixed"===a)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){n.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,a){return!!e.data(t,a[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var a=e.attr(t,"tabindex"),s=isNaN(a);return(s||a>=0)&&i(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,a){function s(t,i,a,s){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,a&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===a?["Left","Right"]:["Top","Bottom"],r=a.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+a]=function(i){return i===t?o["inner"+a].call(this):this.each(function(){e(this).css(r,s(this,i)+"px")})},e.fn["outer"+a]=function(t,i){return"number"!=typeof t?o["outer"+a].call(this,t):this.each(function(){e(this).css(r,s(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,a){var s,n=e.ui[t].prototype;for(s in a)n.plugins[s]=n.plugins[s]||[],n.plugins[s].push([i,a[s]])},call:function(e,t,i){var a,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(a=0;s.length>a;a++)e.options[s[a][0]]&&s[a][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var a=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[a]>0?!0:(t[a]=1,s=t[a]>0,t[a]=0,s)}})})(jQuery);(function(e,t){var i=0,s=Array.prototype.slice,a=e.cleanData;e.cleanData=function(t){for(var i,s=0;null!=(i=t[s]);s++)try{e(i).triggerHandler("remove")}catch(n){}a(t)},e.widget=function(i,s,a){var n,r,o,h,l={},u=i.split(".")[0];i=i.split(".")[1],n=u+"-"+i,a||(a=s,s=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[u]=e[u]||{},r=e[u][i],o=e[u][i]=function(e,i){return this._createWidget?(arguments.length&&this._createWidget(e,i),t):new o(e,i)},e.extend(o,r,{version:a.version,_proto:e.extend({},a),_childConstructors:[]}),h=new s,h.options=e.widget.extend({},h.options),e.each(a,function(i,a){return e.isFunction(a)?(l[i]=function(){var e=function(){return s.prototype[i].apply(this,arguments)},t=function(e){return s.prototype[i].apply(this,e)};return function(){var i,s=this._super,n=this._superApply;return this._super=e,this._superApply=t,i=a.apply(this,arguments),this._super=s,this._superApply=n,i}}(),t):(l[i]=a,t)}),o.prototype=e.widget.extend(h,{widgetEventPrefix:r?h.widgetEventPrefix:i},l,{constructor:o,namespace:u,widgetName:i,widgetFullName:n}),r?(e.each(r._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete r._childConstructors):s._childConstructors.push(o),e.widget.bridge(i,o)},e.widget.extend=function(i){for(var a,n,r=s.call(arguments,1),o=0,h=r.length;h>o;o++)for(a in r[o])n=r[o][a],r[o].hasOwnProperty(a)&&n!==t&&(i[a]=e.isPlainObject(n)?e.isPlainObject(i[a])?e.widget.extend({},i[a],n):e.widget.extend({},n):n);return i},e.widget.bridge=function(i,a){var n=a.prototype.widgetFullName||i;e.fn[i]=function(r){var o="string"==typeof r,h=s.call(arguments,1),l=this;return r=!o&&h.length?e.widget.extend.apply(null,[r].concat(h)):r,o?this.each(function(){var s,a=e.data(this,n);return a?e.isFunction(a[r])&&"_"!==r.charAt(0)?(s=a[r].apply(a,h),s!==a&&s!==t?(l=s&&s.jquery?l.pushStack(s.get()):s,!1):t):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+r+"'")}):this.each(function(){var t=e.data(this,n);t?t.option(r||{})._init():e.data(this,n,new a(r,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,s){var a,n,r,o=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(o={},a=i.split("."),i=a.shift(),a.length){for(n=o[i]=e.widget.extend({},this.options[i]),r=0;a.length-1>r;r++)n[a[r]]=n[a[r]]||{},n=n[a[r]];if(i=a.pop(),s===t)return n[i]===t?null:n[i];n[i]=s}else{if(s===t)return this.options[i]===t?null:this.options[i];o[i]=s}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,a){var n,r=this;"boolean"!=typeof i&&(a=s,s=i,i=!1),a?(s=n=e(s),this.bindings=this.bindings.add(s)):(a=s,s=this.element,n=this.widget()),e.each(a,function(a,o){function h(){return i||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):t}"string"!=typeof o&&(h.guid=o.guid=o.guid||h.guid||e.guid++);var l=a.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?n.delegate(c,u,h):s.bind(u,h)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var a,n,r=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(a in n)a in i||(i[a]=n[a]);return this.element.trigger(i,s),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,a,n){"string"==typeof a&&(a={effect:a});var r,o=a?a===!0||"number"==typeof a?i:a.effect||i:t;a=a||{},"number"==typeof a&&(a={duration:a}),r=!e.isEmptyObject(a),a.complete=n,a.delay&&s.delay(a.delay),r&&e.effects&&e.effects.effect[o]?s[t](a):o!==t&&s[o]?s[o](a.duration,a.easing,n):s.queue(function(i){e(this)[t](),n&&n.call(s[0]),i()})}})})(jQuery);(function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,a=1===i.which,n="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return a&&!n&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return s._mouseMove(e)},this._mouseUpDelegate=function(e){return s._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);(function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function s(t,i){return parseInt(e.css(t,i),10)||0}function a(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,r=Math.max,o=Math.abs,h=Math.round,l=/left|center|right/,u=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var i,s,a=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=a.children()[0];return e("body").append(a),i=r.offsetWidth,a.css("overflow","scroll"),s=r.offsetWidth,i===s&&(s=a[0].clientWidth),a.remove(),n=i-s},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),s=t.isWindow?"":t.element.css("overflow-y"),a="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,n="scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight;return{width:n?e.position.scrollbarWidth():0,height:a?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var n,p,m,g,v,y,b=e(t.of),_=e.position.getWithinInfo(t.within),x=e.position.getScrollInfo(_),k=(t.collision||"flip").split(" "),w={};return y=a(b),b[0].preventDefault&&(t.at="left top"),p=y.width,m=y.height,g=y.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,s=(t[this]||"").split(" ");1===s.length&&(s=l.test(s[0])?s.concat(["center"]):u.test(s[0])?["center"].concat(s):["center","center"]),s[0]=l.test(s[0])?s[0]:"center",s[1]=u.test(s[1])?s[1]:"center",e=c.exec(s[0]),i=c.exec(s[1]),w[this]=[e?e[0]:0,i?i[0]:0],t[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),n=i(w.at,p,m),v.left+=n[0],v.top+=n[1],this.each(function(){var a,l,u=e(this),c=u.outerWidth(),d=u.outerHeight(),f=s(this,"marginLeft"),y=s(this,"marginTop"),D=c+f+s(this,"marginRight")+x.width,T=d+y+s(this,"marginBottom")+x.height,M=e.extend({},v),S=i(w.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?M.left-=c:"center"===t.my[0]&&(M.left-=c/2),"bottom"===t.my[1]?M.top-=d:"center"===t.my[1]&&(M.top-=d/2),M.left+=S[0],M.top+=S[1],e.support.offsetFractions||(M.left=h(M.left),M.top=h(M.top)),a={marginLeft:f,marginTop:y},e.each(["left","top"],function(i,s){e.ui.position[k[i]]&&e.ui.position[k[i]][s](M,{targetWidth:p,targetHeight:m,elemWidth:c,elemHeight:d,collisionPosition:a,collisionWidth:D,collisionHeight:T,offset:[n[0]+S[0],n[1]+S[1]],my:t.my,at:t.at,within:_,elem:u})}),t.using&&(l=function(e){var i=g.left-M.left,s=i+p-c,a=g.top-M.top,n=a+m-d,h={target:{element:b,left:g.left,top:g.top,width:p,height:m},element:{element:u,left:M.left,top:M.top,width:c,height:d},horizontal:0>s?"left":i>0?"right":"center",vertical:0>n?"top":a>0?"bottom":"middle"};c>p&&p>o(i+s)&&(h.horizontal="center"),d>m&&m>o(a+n)&&(h.vertical="middle"),h.important=r(o(i),o(s))>r(o(a),o(n))?"horizontal":"vertical",t.using.call(this,e,h)}),u.offset(e.extend(M,{using:l}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,a=s.isWindow?s.scrollLeft:s.offset.left,n=s.width,o=e.left-t.collisionPosition.marginLeft,h=a-o,l=o+t.collisionWidth-n-a;t.collisionWidth>n?h>0&&0>=l?(i=e.left+h+t.collisionWidth-n-a,e.left+=h-i):e.left=l>0&&0>=h?a:h>l?a+n-t.collisionWidth:a:h>0?e.left+=h:l>0?e.left-=l:e.left=r(e.left-o,e.left)},top:function(e,t){var i,s=t.within,a=s.isWindow?s.scrollTop:s.offset.top,n=t.within.height,o=e.top-t.collisionPosition.marginTop,h=a-o,l=o+t.collisionHeight-n-a;t.collisionHeight>n?h>0&&0>=l?(i=e.top+h+t.collisionHeight-n-a,e.top+=h-i):e.top=l>0&&0>=h?a:h>l?a+n-t.collisionHeight:a:h>0?e.top+=h:l>0?e.top-=l:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var i,s,a=t.within,n=a.offset.left+a.scrollLeft,r=a.width,h=a.isWindow?a.scrollLeft:a.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-h,c=l+t.collisionWidth-r-h,d="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+d+p+f+t.collisionWidth-r-n,(0>i||o(u)>i)&&(e.left+=d+p+f)):c>0&&(s=e.left-t.collisionPosition.marginLeft+d+p+f-h,(s>0||c>o(s))&&(e.left+=d+p+f))},top:function(e,t){var i,s,a=t.within,n=a.offset.top+a.scrollTop,r=a.height,h=a.isWindow?a.scrollTop:a.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-h,c=l+t.collisionHeight-r-h,d="top"===t.my[1],p=d?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(s=e.top+p+f+m+t.collisionHeight-r-n,e.top+p+f+m>u&&(0>s||o(u)>s)&&(e.top+=p+f+m)):c>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-h,e.top+p+f+m>c&&(i>0||c>o(i))&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,a,n,r=document.getElementsByTagName("body")[0],o=document.createElement("div");t=document.createElement(r?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(n in s)t.style[n]=s[n];t.appendChild(o),i=r||document.documentElement,i.insertBefore(t,i.firstChild),o.style.cssText="position: absolute; left: 10.7432222px;",a=e(o).offset().left,e.support.offsetFractions=a>10&&11>a,t.innerHTML="",i.removeChild(t)}()})(jQuery);(function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var a=this._uiHash();if(this._trigger("drag",t,a)===!1)return this._mouseUp({}),!1;this.position=a.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,a=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(a=e.ui.ddmanager.drop(this,t)),this.dropped&&(a=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!a||"valid"===this.options.revert&&a||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,a)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,a=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return a.parents("body").length||a.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),a[0]===this.element[0]||/(fixed|absolute)/.test(a.css("position"))||a.css("position","absolute"),a},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,a,s=this.options;return s.containment?"window"===s.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):"document"===s.containment?(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],undefined):s.containment.constructor===Array?(this.containment=s.containment,undefined):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=e(s.containment),a=i[0],a&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i),undefined):(this.containment=null,undefined)},_convertPositionTo:function(t,i){i||(i=this.position);var a="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),{top:i.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*a,left:i.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*a}},_generatePosition:function(t){var i,a,s,n,r=this.options,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,h=t.pageY;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(a=this.relative_container.offset(),i=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),r.grid&&(s=r.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,h=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-r.grid[1]:s+r.grid[1]:s,n=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?n-this.offset.click.left>=i[0]||n-this.offset.click.left>i[2]?n:n-this.offset.click.left>=i[0]?n-r.grid[0]:n+r.grid[0]:n)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,a){return a=a||this._uiHash(),e.ui.plugin.call(this,t,[i,a]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,a)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var a=e(this).data("ui-draggable"),s=a.options,n=e.extend({},i,{item:a.element});a.sortables=[],e(s.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(a.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,n))})},stop:function(t,i){var a=e(this).data("ui-draggable"),s=e.extend({},i,{item:a.element});e.each(a.sortables,function(){this.instance.isOver?(this.instance.isOver=0,a.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===a.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(t,i){var a=e(this).data("ui-draggable"),s=this;e.each(a.sortables,function(){var n=!1,r=this;this.instance.positionAbs=a.positionAbs,this.instance.helperProportions=a.helperProportions,this.instance.offset.click=a.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(n=!0,e.each(a.sortables,function(){return this.instance.positionAbs=a.positionAbs,this.instance.helperProportions=a.helperProportions,this.instance.offset.click=a.offset.click,this!==r&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(r.instance.element[0],this.instance.element[0])&&(n=!1),n})),n?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=a.offset.click.top,this.instance.offset.click.left=a.offset.click.left,this.instance.offset.parent.left-=a.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=a.offset.parent.top-this.instance.offset.parent.top,a._trigger("toSortable",t),a.dropped=this.instance.element,a.currentItem=a.element,this.instance.fromOutside=a),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),a._trigger("fromSortable",t),a.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var a=e(i.helper),s=e(this).data("ui-draggable").options;a.css("opacity")&&(s._opacity=a.css("opacity")),a.css("opacity",s.opacity)},stop:function(t,i){var a=e(this).data("ui-draggable").options;a._opacity&&e(i.helper).css("opacity",a._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),a=i.options,s=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(a.axis&&"x"===a.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-i.overflowOffset.top<a.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-a.scrollSpeed)),a.axis&&"y"===a.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-i.overflowOffset.left<a.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-a.scrollSpeed))):(a.axis&&"x"===a.axis||(t.pageY-e(document).scrollTop()<a.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<a.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed))),a.axis&&"y"===a.axis||(t.pageX-e(document).scrollLeft()<a.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<a.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),a=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:a.top,left:a.left})})},drag:function(t,i){var a,s,n,r,o,l,h,u,d,c,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,y=i.offset.top,b=y+p.helperProportions.height;for(d=p.snapElements.length-1;d>=0;d--)o=p.snapElements[d].left,l=o+p.snapElements[d].width,h=p.snapElements[d].top,u=h+p.snapElements[d].height,o-m>v||g>l+m||h-m>b||y>u+m||!e.contains(p.snapElements[d].item.ownerDocument,p.snapElements[d].item)?(p.snapElements[d].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(a=m>=Math.abs(h-b),s=m>=Math.abs(u-y),n=m>=Math.abs(o-v),r=m>=Math.abs(l-g),a&&(i.position.top=p._convertPositionTo("relative",{top:h-p.helperProportions.height,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),n&&(i.position.left=p._convertPositionTo("relative",{top:0,left:o-p.helperProportions.width}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),c=a||s||n||r,"outer"!==f.snapMode&&(a=m>=Math.abs(h-y),s=m>=Math.abs(u-b),n=m>=Math.abs(o-g),r=m>=Math.abs(l-v),a&&(i.position.top=p._convertPositionTo("relative",{top:h,left:0}).top-p.margins.top),s&&(i.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.left=p._convertPositionTo("relative",{top:0,left:o}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[d].snapping&&(a||s||n||r||c)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=a||s||n||r||c)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,a=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});a.length&&(t=parseInt(e(a[0]).css("zIndex"),10)||0,e(a).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+a.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var a=e(i.helper),s=e(this).data("ui-draggable").options;a.css("zIndex")&&(s._zIndex=a.css("zIndex")),a.css("zIndex",s.zIndex)},stop:function(t,i){var a=e(this).data("ui-draggable").options;a._zIndex&&e(i.helper).css("zIndex",a._zIndex)}})})(jQuery);(function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,s,a,n,r=this,o=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),n="ui-resizable-"+s,a=e("<div class='ui-resizable-handle "+n+"'></div>"),a.css({zIndex:o.zIndex}),"se"===s&&a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(a);this._renderAxis=function(t){var i,s,a,n;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=e(this.handles[i],this.element),n=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),a=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(a,n),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){r.resizing||(this.className&&(a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=a&&a[1]?a[1]:"se")}),o.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){o.disabled||(e(this).removeClass("ui-resizable-autohide"),r._handles.show())}).mouseleave(function(){o.disabled||r.resizing||(e(this).addClass("ui-resizable-autohide"),r._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,a=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(a=!0);return!this.options.disabled&&a},_mouseStart:function(i){var s,a,n,r=this.options,o=this.element.position(),h=this.element;return this.resizing=!0,/absolute/.test(h.css("position"))?h.css({position:"absolute",top:h.css("top"),left:h.css("left")}):h.is(".ui-draggable")&&h.css({position:"absolute",top:o.top,left:o.left}),this._renderProxy(),s=t(this.helper.css("left")),a=t(this.helper.css("top")),r.containment&&(s+=e(r.containment).scrollLeft()||0,a+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:a},this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()},this.originalPosition={left:s,top:a},this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),h.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,s=this.helper,a={},n=this.originalMousePosition,r=this.axis,o=this.position.top,h=this.position.left,l=this.size.width,u=this.size.height,c=t.pageX-n.left||0,d=t.pageY-n.top||0,p=this._change[r];return p?(i=p.apply(this,[t,c,d]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==o&&(a.top=this.position.top+"px"),this.position.left!==h&&(a.left=this.position.left+"px"),this.size.width!==l&&(a.width=this.size.width+"px"),this.size.height!==u&&(a.height=this.size.height+"px"),s.css(a),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(a)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,a,n,r,o,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),a=s&&e.ui.hasScroll(i[0],"left")?0:u.sizeDiff.height,n=s?0:u.sizeDiff.width,r={width:u.helper.width()-n,height:u.helper.height()-a},o=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(r,{top:h,left:o})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,s,a,n,r,o=this.options;r={minWidth:i(o.minWidth)?o.minWidth:0,maxWidth:i(o.maxWidth)?o.maxWidth:1/0,minHeight:i(o.minHeight)?o.minHeight:0,maxHeight:i(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,a=r.minWidth/this.aspectRatio,s=r.maxHeight*this.aspectRatio,n=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),a>r.minHeight&&(r.minHeight=a),r.maxWidth>s&&(r.maxWidth=s),r.maxHeight>n&&(r.maxHeight=n)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,s=this.size,a=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===a&&(e.left=t.left+(s.width-e.width),e.top=null),"nw"===a&&(e.top=t.top+(s.height-e.height),e.left=t.left+(s.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,s=this.axis,a=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=i(e.width)&&t.minWidth&&t.minWidth>e.width,o=i(e.height)&&t.minHeight&&t.minHeight>e.height,h=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,u=/sw|nw|w/.test(s),c=/nw|ne|n/.test(s);return r&&(e.width=t.minWidth),o&&(e.height=t.minHeight),a&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),r&&u&&(e.left=h-t.minWidth),a&&u&&(e.left=h-t.maxWidth),o&&c&&(e.top=l-t.minHeight),n&&c&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,s,a,n=this.helper||this.element;for(e=0;this._proportionallyResizeElements.length>e;e++){if(a=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],s=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")],t=0;i.length>t;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(s[t],10)||0);a.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,a=this.originalPosition;return{top:a.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),s=i.options,a=i._proportionallyResizeElements,n=a.length&&/textarea/i.test(a[0].nodeName),r=n&&e.ui.hasScroll(a[0],"left")?0:i.sizeDiff.height,o=n?0:i.sizeDiff.width,h={width:i.size.width-o,height:i.size.height-r},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};a&&a.length&&e(a[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,s,a,n,r,o,h,l=e(this).data("ui-resizable"),u=l.options,c=l.element,d=u.containment,p=d instanceof e?d.get(0):/parent/.test(d)?c.parent().get(0):d;p&&(l.containerElement=e(p),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(p),s=[],e(["Top","Right","Left","Bottom"]).each(function(e,a){s[e]=t(i.css("padding"+a))}),l.containerOffset=i.offset(),l.containerPosition=i.position(),l.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},a=l.containerOffset,n=l.containerSize.height,r=l.containerSize.width,o=e.ui.hasScroll(p,"left")?p.scrollWidth:r,h=e.ui.hasScroll(p)?p.scrollHeight:n,l.parentData={element:p,left:a.left,top:a.top,width:o,height:h}))},resize:function(t){var i,s,a,n,r=e(this).data("ui-resizable"),o=r.options,h=r.containerOffset,l=r.position,u=r._aspectRatio||t.shiftKey,c={top:0,left:0},d=r.containerElement;d[0]!==document&&/static/.test(d.css("position"))&&(c=h),l.left<(r._helper?h.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-h.left:r.position.left-c.left),u&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=o.helper?h.left:0),l.top<(r._helper?h.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-h.top:r.position.top),u&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?h.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top,i=Math.abs((r._helper?r.offset.left-c.left:r.offset.left-c.left)+r.sizeDiff.width),s=Math.abs((r._helper?r.offset.top-c.top:r.offset.top-h.top)+r.sizeDiff.height),a=r.containerElement.get(0)===r.element.parent().get(0),n=/relative|absolute/.test(r.containerElement.css("position")),a&&n&&(i-=r.parentData.left),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,u&&(r.size.height=r.size.width/r.aspectRatio)),s+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-s,u&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.containerOffset,a=t.containerPosition,n=t.containerElement,r=e(t.helper),o=r.offset(),h=r.outerWidth()-t.sizeDiff.width,l=r.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(n.css("position"))&&e(this).css({left:o.left-a.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(n.css("position"))&&e(this).css({left:o.left-a.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)})},resize:function(t,i){var s=e(this).data("ui-resizable"),a=s.options,n=s.originalSize,r=s.originalPosition,o={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-r.top||0,left:s.position.left-r.left||0},h=function(t,s){e(t).each(function(){var t=e(this),a=e(this).data("ui-resizable-alsoresize"),n={},r=s&&s.length?s:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var i=(a[t]||0)+(o[t]||0);i&&i>=0&&(n[t]=i||null)}),t.css(n)})};"object"!=typeof a.alsoResize||a.alsoResize.nodeType?h(a.alsoResize):e.each(a.alsoResize,function(e,t){h(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size,a=t.originalSize,n=t.originalPosition,r=t.axis,o="number"==typeof i.grid?[i.grid,i.grid]:i.grid,h=o[0]||1,l=o[1]||1,u=Math.round((s.width-a.width)/h)*h,c=Math.round((s.height-a.height)/l)*l,d=a.width+u,p=a.height+c,f=i.maxWidth&&d>i.maxWidth,m=i.maxHeight&&p>i.maxHeight,g=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>p;i.grid=o,g&&(d+=h),v&&(p+=l),f&&(d-=h),m&&(p-=l),/^(se|s|e)$/.test(r)?(t.size.width=d,t.size.height=p):/^(ne)$/.test(r)?(t.size.width=d,t.size.height=p,t.position.top=n.top-c):/^(sw)$/.test(r)?(t.size.width=d,t.size.height=p,t.position.left=n.left-u):(t.size.width=d,t.size.height=p,t.position.top=n.top-c,t.position.left=n.left-u)}})})(jQuery);(function(e){var t=0,i={},a={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",a.height=a.paddingTop=a.paddingBottom=a.borderTopWidth=a.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.3",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),0>t.active&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?(this._activate(t),undefined):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t),undefined)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,a=this.headers.length,s=this.headers.index(t.target),n=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:n=this.headers[(s+1)%a];break;case i.LEFT:case i.UP:n=this.headers[(s-1+a)%a];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:n=this.headers[0];break;case i.END:n=this.headers[a-1]}n&&(e(t.target).attr("tabIndex",-1),e(n).attr("tabIndex",0),n.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,a=this.options,s=a.heightStyle,n=this.element.parent(),r=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(a.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),a=i.attr("id"),s=i.next(),n=s.attr("id");a||(a=r+"-header-"+t,i.attr("id",a)),n||(n=r+"-panel-"+t,s.attr("id",n)),i.attr("aria-controls",n),s.attr("aria-labelledby",a)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(a.event),"fill"===s?(i=n.height(),this.element.siblings(":visible").each(function(){var t=e(this),a=t.css("position");"absolute"!==a&&"fixed"!==a&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===s&&(i=0,this.headers.next().each(function(){i=Math.max(i,e(this).css("height","").height())}).height(i))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,a=this.active,s=e(t.currentTarget),n=s[0]===a[0],r=n&&i.collapsible,o=r?e():s.next(),h=a.next(),l={oldHeader:a,oldPanel:h,newHeader:r?e():s,newPanel:o};t.preventDefault(),n&&!i.collapsible||this._trigger("beforeActivate",t,l)===!1||(i.active=r?!1:this.headers.index(s),this.active=n?e():s,this._toggle(l),a.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&a.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),n||(s.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),s.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,a=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=a,this.options.animate?this._animate(i,a,t):(a.hide(),i.show(),this._toggleComplete(t)),a.attr({"aria-expanded":"false","aria-hidden":"true"}),a.prev().attr("aria-selected","false"),i.length&&a.length?a.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,s){var n,r,o,h=this,l=0,u=e.length&&(!t.length||e.index()<t.index()),d=this.options.animate||{},c=u&&d.down||d,p=function(){h._toggleComplete(s)};return"number"==typeof c&&(o=c),"string"==typeof c&&(r=c),r=r||c.easing||d.easing,o=o||c.duration||d.duration,t.length?e.length?(n=e.show().outerHeight(),t.animate(i,{duration:o,easing:r,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(a,{duration:o,easing:r,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?l+=i.now:"content"!==h.options.heightStyle&&(i.now=Math.round(n-t.outerHeight()-l),l=0)}}),undefined):t.animate(i,o,r,p):e.animate(a,o,r,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})})(jQuery);(function(e){var t=0;e.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,a,s=this.element[0].nodeName.toLowerCase(),n="textarea"===s,r="input"===s;this.isMultiLine=n?!0:r?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[n||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return t=!0,a=!0,i=!0,undefined;t=!1,a=!1,i=!1;var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:t=!0,this._move("previousPage",s);break;case n.PAGE_DOWN:t=!0,this._move("nextPage",s);break;case n.UP:t=!0,this._keyEvent("previous",s);break;case n.DOWN:t=!0,this._keyEvent("next",s);break;case n.ENTER:case n.NUMPAD_ENTER:this.menu.active&&(t=!0,s.preventDefault(),this.menu.select(s));break;case n.TAB:this.menu.active&&this.menu.select(s);break;case n.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(a){if(t)return t=!1,(!this.isMultiLine||this.menu.element.is(":visible"))&&a.preventDefault(),undefined;if(!i){var s=e.ui.keyCode;switch(a.keyCode){case s.PAGE_UP:this._move("previousPage",a);break;case s.PAGE_DOWN:this._move("nextPage",a);break;case s.UP:this._keyEvent("previous",a);break;case s.DOWN:this._keyEvent("next",a)}}},input:function(e){return a?(a=!1,e.preventDefault(),undefined):(this._searchTimeout(e),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(e),this._change(e),undefined)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(a){a.target===t.element[0]||a.target===i||e.contains(i,a.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)}),undefined;var a=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:a})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(a.value):this.liveRegion.text(a.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),a=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=a,this._delay(function(){this.previous=a,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,a=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,a){a(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,s){a.xhr&&a.xhr.abort(),a.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){s(e)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):undefined},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,i=++t;return function(a){i===t&&e.__response(a),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var a=this;e.each(i,function(e,i){a._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[e](t),undefined):(this.search(null,t),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var a=RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return a.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})})(jQuery);(function(e){var t,i,a,s,n="ui-button ui-widget ui-state-default ui-corner-all",r="ui-state-hover ui-state-active ",o="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},l=function(t){var i=t.name,a=t.form,s=e([]);return i&&(i=i.replace(/'/g,"\\'"),s=a?e(a).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),s};e.widget("ui.button",{version:"1.10.3",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var r=this,o=this.options,u="checkbox"===this.type||"radio"===this.type,d=u?"":"ui-state-active",c="ui-state-focus";null===o.label&&(o.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(n).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){o.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){o.disabled||e(this).removeClass(d)}).bind("click"+this.eventNamespace,function(e){o.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){r.buttonElement.addClass(c)}).bind("blur"+this.eventNamespace,function(){r.buttonElement.removeClass(c)}),u&&(this.element.bind("change"+this.eventNamespace,function(){s||r.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){o.disabled||(s=!1,i=e.pageX,a=e.pageY)}).bind("mouseup"+this.eventNamespace,function(e){o.disabled||(i!==e.pageX||a!==e.pageY)&&(s=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return o.disabled||s?!1:undefined}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(o.disabled||s)return!1;e(this).addClass("ui-state-active"),r.buttonElement.attr("aria-pressed","true");var t=r.element[0];l(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return o.disabled?!1:(e(this).addClass("ui-state-active"),t=this,r.document.one("mouseup",function(){t=null}),undefined)}).bind("mouseup"+this.eventNamespace,function(){return o.disabled?!1:(e(this).removeClass("ui-state-active"),undefined)}).bind("keydown"+this.eventNamespace,function(t){return o.disabled?!1:((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"),undefined)}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",o.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(n+" "+r+" "+o).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(t?this.element.prop("disabled",!0):this.element.prop("disabled",!1),undefined):(this._resetButton(),undefined)},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return this.options.label&&this.element.val(this.options.label),undefined;var t=this.buttonElement.removeClass(o),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),a=this.options.icons,s=a.primary&&a.secondary,n=[];a.primary||a.secondary?(this.options.text&&n.push("ui-button-text-icon"+(s?"s":a.primary?"-primary":"-secondary")),a.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+a.primary+"'></span>"),a.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+a.secondary+"'></span>"),this.options.text||(n.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):n.push("ui-button-text-only"),t.addClass(n.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.3",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(n.inline?t.parent()[0]:n.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function s(t,i){e.extend(t,i);for(var a in i)null==i[a]&&(t[a]=i[a]);return t}e.extend(e.ui,{datepicker:{version:"1.10.3"}});var n,r="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return s(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var a,s,n;a=t.nodeName.toLowerCase(),s="div"===a||"span"===a,t.id||(this.uuid+=1,t.id="dp"+this.uuid),n=this._newInst(e(t),s),n.settings=e.extend({},i||{}),"input"===a?this._connectDatepicker(t,n):s&&this._inlineDatepicker(t,n)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var a=e(t);i.append=e([]),i.trigger=e([]),a.hasClass(this.markerClassName)||(this._attachments(a,i),a.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,r,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var a,s,n,r=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=e("<span class='"+this._appendClass+"'>"+r+"</span>"),t[o?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),a=this._get(i,"showOn"),("focus"===a||"both"===a)&&t.focus(this._showDatepicker),("button"===a||"both"===a)&&(s=this._get(i,"buttonText"),n=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:n,alt:s,title:s}):e("<button type='button'></button>").addClass(this._triggerClass).html(n?e("<img/>").attr({src:n,alt:s,title:s}):s)),t[o?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,a,s,n=new Date(2009,11,20),r=this._get(e,"dateFormat");r.match(/[DM]/)&&(t=function(e){for(i=0,a=0,s=0;e.length>s;s++)e[s].length>i&&(i=e[s].length,a=s);return a},n.setMonth(t(this._get(e,r.match(/MM/)?"monthNames":"monthNamesShort"))),n.setDate(t(this._get(e,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())),e.input.attr("size",this._formatDate(e,n).length)}},_inlineDatepicker:function(t,i){var a=e(t);a.hasClass(this.markerClassName)||(a.addClass(this.markerClassName).append(i.dpDiv),e.data(t,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,a,n,o){var h,l,u,d,c,p=this._dialogInst;return p||(this.uuid+=1,h="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+h+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],r,p)),s(p.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(l=document.documentElement.clientWidth,u=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+d,u/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=a,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],r,p),this},_destroyDatepicker:function(t){var i,a=e(t),s=e.data(t,r);a.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,r),"input"===i?(s.append.remove(),s.trigger.remove(),a.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&a.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,a,s=e(t),n=e.data(t,r);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(a=s.children("."+this._inlineClass),a.children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,a,s=e(t),n=e.data(t,r);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(a=s.children("."+this._inlineClass),a.children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,r)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,a,n){var r,o,h,l,u=this._getInst(i);return 2===arguments.length&&"string"==typeof a?"defaults"===a?e.extend({},e.datepicker._defaults):u?"all"===a?e.extend({},u.settings):this._get(u,a):null:(r=a||{},"string"==typeof a&&(r={},r[a]=n),u&&(this._curInst===u&&this._hideDatepicker(),o=this._getDateDatepicker(i,!0),h=this._getMinMaxDate(u,"min"),l=this._getMinMaxDate(u,"max"),s(u.settings,r),null!==h&&r.dateFormat!==t&&r.minDate===t&&(u.settings.minDate=this._formatDate(u,h)),null!==l&&r.dateFormat!==t&&r.maxDate===t&&(u.settings.maxDate=this._formatDate(u,l)),"disabled"in r&&(r.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),u),this._autoSize(u),this._setDate(u,o),this._updateAlternate(u),this._updateDatepicker(u)),t)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,a,s,n=e.datepicker._getInst(t.target),r=!0,o=n.dpDiv.is(".ui-datepicker-rtl");if(n._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),r=!1;break;case 13:return s=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",n.dpDiv),s[0]&&e.datepicker._selectDay(t.target,n.selectedMonth,n.selectedYear,s[0]),i=e.datepicker._get(n,"onSelect"),i?(a=e.datepicker._formatDate(n),i.apply(n.input?n.input[0]:null,[a,n])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(n,"stepBigMonths"):-e.datepicker._get(n,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,o?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(n,"stepBigMonths"):+e.datepicker._get(n,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(i){var a,s,n=e.datepicker._getInst(i.target);return e.datepicker._get(n,"constrainInput")?(a=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">s||!a||a.indexOf(s)>-1):t},_doKeyUp:function(t){var i,a=e.datepicker._getInst(t.target);if(a.input.val()!==a.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,e.datepicker._getFormatConfig(a)),i&&(e.datepicker._setDateFromField(a),e.datepicker._updateAlternate(a),e.datepicker._updateDatepicker(a))}catch(s){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,a,n,r,o,h,l;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),a=e.datepicker._get(i,"beforeShow"),n=a?a.apply(t,[t,i]):{},n!==!1&&(s(i.settings,n),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),r=!1,e(t).parents().each(function(){return r|="fixed"===e(this).css("position"),!r}),o={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),o=e.datepicker._checkOffset(i,o,r),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),i.inline||(h=e.datepicker._get(i,"showAnim"),l=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[h]?i.dpDiv.show(h,e.datepicker._get(i,"showOptions"),l):i.dpDiv[h||"show"](h?l:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,n=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,a=this._getNumberOfMonths(t),s=a[1],r=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",r*s+"em"),t.dpDiv[(1!==a[0]||1!==a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,a){var s=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(a?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(a?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?s-r:0,i.left-=a&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=a&&i.top===t.input.offset().top+o?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+s>h&&h>s?Math.abs(i.left+s-h):0),i.top-=Math.min(i.top,i.top+n>l&&l>n?Math.abs(n+o):0),i},_findPos:function(t){for(var i,a=this._getInst(t),s=this._get(a,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[s?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,a,s,n,o=this._curInst;!o||t&&o!==e.data(t,r)||this._datepickerShowing&&(i=this._get(o,"showAnim"),a=this._get(o,"duration"),s=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),a,s):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?a:null,s),i||s(),this._datepickerShowing=!1,n=this._get(o,"onClose"),n&&n.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),a=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==a)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,a){var s=e(t),n=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(n,i+("M"===a?this._get(n,"showCurrentAtPos"):0),a),this._updateDatepicker(n))},_gotoToday:function(t){var i,a=e(t),s=this._getInst(a[0]);this._get(s,"gotoCurrent")&&s.currentDay?(s.selectedDay=s.currentDay,s.drawMonth=s.selectedMonth=s.currentMonth,s.drawYear=s.selectedYear=s.currentYear):(i=new Date,s.selectedDay=i.getDate(),s.drawMonth=s.selectedMonth=i.getMonth(),s.drawYear=s.selectedYear=i.getFullYear()),this._notifyChange(s),this._adjustDate(a)},_selectMonthYear:function(t,i,a){var s=e(t),n=this._getInst(s[0]);n["selected"+("M"===a?"Month":"Year")]=n["draw"+("M"===a?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(s)},_selectDay:function(t,i,a,s){var n,r=e(t);e(s).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(n=this._getInst(r[0]),n.selectedDay=n.currentDay=e("a",s).html(),n.selectedMonth=n.currentMonth=i,n.selectedYear=n.currentYear=a,this._selectDate(t,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var a,s=e(t),n=this._getInst(s[0]);i=null!=i?i:this._formatDate(n),n.input&&n.input.val(i),this._updateAlternate(n),a=this._get(n,"onSelect"),a?a.apply(n.input?n.input[0]:null,[i,n]):n.input&&n.input.trigger("change"),n.inline?this._updateDatepicker(n):(this._hideDatepicker(),this._lastInput=n.input[0],"object"!=typeof n.input[0]&&n.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,a,s,n=this._get(t,"altField");n&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),a=this._getDate(t),s=this.formatDate(i,a,this._getFormatConfig(t)),e(n).each(function(){e(this).val(s)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(i,a,s){if(null==i||null==a)throw"Invalid arguments";if(a="object"==typeof a?""+a:a+"",""===a)return null;var n,r,o,h,l=0,u=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof u?u:(new Date).getFullYear()%100+parseInt(u,10),c=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,p=(s?s.dayNames:null)||this._defaults.dayNames,m=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,g=-1,v=-1,y=-1,b=-1,_=!1,k=function(e){var t=i.length>n+1&&i.charAt(n+1)===e;return t&&n++,t},x=function(e){var t=k(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,s=RegExp("^\\d{1,"+i+"}"),n=a.substring(l).match(s);if(!n)throw"Missing number at position "+l;return l+=n[0].length,parseInt(n[0],10)},D=function(i,s,n){var r=-1,o=e.map(k(i)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,i){var s=i[1];return a.substr(l,s.length).toLowerCase()===s.toLowerCase()?(r=i[0],l+=s.length,!1):t}),-1!==r)return r+1;throw"Unknown name at position "+l},w=function(){if(a.charAt(l)!==i.charAt(n))throw"Unexpected literal at position "+l;l++};for(n=0;i.length>n;n++)if(_)"'"!==i.charAt(n)||k("'")?w():_=!1;else switch(i.charAt(n)){case"d":y=x("d");break;case"D":D("D",c,p);break;case"o":b=x("o");break;case"m":v=x("m");break;case"M":v=D("M",m,f);break;case"y":g=x("y");break;case"@":h=new Date(x("@")),g=h.getFullYear(),v=h.getMonth()+1,y=h.getDate();break;case"!":h=new Date((x("!")-this._ticksTo1970)/1e4),g=h.getFullYear(),v=h.getMonth()+1,y=h.getDate();break;case"'":k("'")?w():_=!0;break;default:w()}if(a.length>l&&(o=a.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d>=g?0:-100)),b>-1)for(v=1,y=b;;){if(r=this._getDaysInMonth(g,v-1),r>=y)break;v++,y-=r}if(h=this._daylightSavingAdjust(new Date(g,v-1,y)),h.getFullYear()!==g||h.getMonth()+1!==v||h.getDate()!==y)throw"Invalid date";return h},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var a,s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>a+1&&e.charAt(a+1)===t;return i&&a++,i},l=function(e,t,i){var a=""+t;if(h(e))for(;i>a.length;)a="0"+a;return a},u=function(e,t,i,a){return h(e)?a[t]:i[t]},d="",c=!1;if(t)for(a=0;e.length>a;a++)if(c)"'"!==e.charAt(a)||h("'")?d+=e.charAt(a):c=!1;else switch(e.charAt(a)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),s,n);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),r,o);break;case"y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(a)}return d},_possibleChars:function(e){var t,i="",a=!1,s=function(i){var a=e.length>t+1&&e.charAt(t+1)===i;return a&&t++,a};for(t=0;e.length>t;t++)if(a)"'"!==e.charAt(t)||s("'")?i+=e.charAt(t):a=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":s("'")?i+="'":a=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),a=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),n=s,r=this._getFormatConfig(e);try{n=this.parseDate(i,a,r)||s}catch(o){a=t?"":a}e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),e.currentDay=a?n.getDate():0,e.currentMonth=a?n.getMonth():0,e.currentYear=a?n.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,a){var s=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},n=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(a){}for(var s=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,n=s.getFullYear(),r=s.getMonth(),o=s.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":r+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,r));break;case"y":case"Y":n+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,r))}l=h.exec(i)}return new Date(n,r,o)},r=null==i||""===i?a:"string"==typeof i?n(i):"number"==typeof i?isNaN(i)?a:s(i):new Date(i.getTime());return r=r&&"Invalid Date"==""+r?a:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var a=!t,s=e.selectedMonth,n=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),s===e.selectedMonth&&n===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(a?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),a="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(a,-i,"M")},next:function(){e.datepicker._adjustDate(a,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(a)},selectDay:function(){return e.datepicker._selectDay(a,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(a,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(a,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,a,s,n,r,o,h,l,u,d,c,p,m,f,g,v,y,b,_,k,x,D,w,T,M,S,N,C,A,P,I,F,j,H,E,z,L,O,R=new Date,W=this._daylightSavingAdjust(new Date(R.getFullYear(),R.getMonth(),R.getDate())),Y=this._get(e,"isRTL"),J=this._get(e,"showButtonPanel"),$=this._get(e,"hideIfNoPrevNext"),Q=this._get(e,"navigationAsDateFormat"),B=this._getNumberOfMonths(e),K=this._get(e,"showCurrentAtPos"),V=this._get(e,"stepMonths"),U=1!==B[0]||1!==B[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),q=this._getMinMaxDate(e,"min"),X=this._getMinMaxDate(e,"max"),Z=e.drawMonth-K,et=e.drawYear;if(0>Z&&(Z+=12,et--),X)for(t=this._daylightSavingAdjust(new Date(X.getFullYear(),X.getMonth()-B[0]*B[1]+1,X.getDate())),t=q&&q>t?q:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=Q?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-V,1)),this._getFormatConfig(e)):i,a=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":$?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",s=this._get(e,"nextText"),s=Q?this.formatDate(s,this._daylightSavingAdjust(new Date(et,Z+V,1)),this._getFormatConfig(e)):s,n=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+s+"</span></a>":$?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+s+"</span></a>",r=this._get(e,"currentText"),o=this._get(e,"gotoCurrent")&&e.currentDay?G:W,r=Q?this.formatDate(r,o,this._getFormatConfig(e)):r,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=J?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),m=this._get(e,"monthNames"),f=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",x=0;B[0]>x;x++){for(D="",this.maxRows=4,w=0;B[1]>w;w++){if(T=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),M=" ui-corner-all",S="",U){if(S+="<div class='ui-datepicker-group",B[1]>1)switch(w){case 0:S+=" ui-datepicker-group-first",M=" ui-corner-"+(Y?"right":"left");break;case B[1]-1:S+=" ui-datepicker-group-last",M=" ui-corner-"+(Y?"left":"right");break;default:S+=" ui-datepicker-group-middle",M=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+M+"'>"+(/all|left/.test(M)&&0===x?Y?n:a:"")+(/all|right/.test(M)&&0===x?Y?a:n:"")+this._generateMonthYearHeader(e,Z,et,q,X,x>0||w>0,m,f)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",N=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",k=0;7>k;k++)C=(k+u)%7,N+="<th"+((k+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+c[C]+"'>"+p[C]+"</span></th>";for(S+=N+"</tr></thead><tbody>",A=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,A)),P=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((P+A)/7),F=U?this.maxRows>I?this.maxRows:I:I,this.maxRows=F,j=this._daylightSavingAdjust(new Date(et,Z,1-P)),H=0;F>H;H++){for(S+="<tr>",E=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(j)+"</td>":"",k=0;7>k;k++)z=g?g.apply(e.input?e.input[0]:null,[j]):[!0,""],L=j.getMonth()!==Z,O=L&&!y||!z[0]||q&&q>j||X&&j>X,E+="<td class='"+((k+u+6)%7>=5?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+(j.getTime()===T.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===j.getTime()&&b.getTime()===T.getTime()?" "+this._dayOverClass:"")+(O?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!v?"":" "+z[1]+(j.getTime()===G.getTime()?" "+this._currentClass:"")+(j.getTime()===W.getTime()?" ui-datepicker-today":""))+"'"+(L&&!v||!z[2]?"":" title='"+z[2].replace(/'/g,"&#39;")+"'")+(O?"":" data-handler='selectDay' data-event='click' data-month='"+j.getMonth()+"' data-year='"+j.getFullYear()+"'")+">"+(L&&!v?"&#xa0;":O?"<span class='ui-state-default'>"+j.getDate()+"</span>":"<a class='ui-state-default"+(j.getTime()===W.getTime()?" ui-state-highlight":"")+(j.getTime()===G.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+j.getDate()+"</a>")+"</td>",j.setDate(j.getDate()+1),j=this._daylightSavingAdjust(j);S+=E+"</tr>"}Z++,Z>11&&(Z=0,et++),S+="</tbody></table>"+(U?"</div>"+(B[0]>0&&w===B[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),D+=S}_+=D}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,a,s,n,r,o){var h,l,u,d,c,p,m,f,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(n||!g)_+="<span class='ui-datepicker-month'>"+r[t]+"</span>";else{for(h=a&&a.getFullYear()===i,l=s&&s.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=a.getMonth())&&(!l||s.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+o[u]+"</option>");_+="</select>"}if(y||(b+=_+(!n&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",n||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);
	return isNaN(t)?c:t},m=p(d[0]),f=Math.max(m,p(d[1]||"")),m=a?Math.max(m,a.getFullYear()):m,f=s?Math.min(f,s.getFullYear()):f,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f>=m;m++)e.yearshtml+="<option value='"+m+"'"+(m===i?" selected='selected'":"")+">"+m+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!n&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var a=e.drawYear+("Y"===i?t:0),s=e.drawMonth+("M"===i?t:0),n=Math.min(e.selectedDay,this._getDaysInMonth(a,s))+("D"===i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(a,s,n)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),s=i&&i>t?i:t;return a&&s>a?a:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,a){var s=this._getNumberOfMonths(e),n=this._daylightSavingAdjust(new Date(i,a+(0>t?t:s[0]*s[1]),1));return 0>t&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(e,n)},_isInRange:function(e,t){var i,a,s=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=null,o=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),a=(new Date).getFullYear(),r=parseInt(i[0],10),o=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=a),i[1].match(/[+\-].*/)&&(o+=a)),(!s||t.getTime()>=s.getTime())&&(!n||t.getTime()<=n.getTime())&&(!r||t.getFullYear()>=r)&&(!o||o>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,a){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(a,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.3"})(jQuery);(function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),this.close(t),undefined;if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),a=i.filter(":first"),s=i.filter(":last");t.target!==s[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==a[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(s.focus(1),t.preventDefault()):(a.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(e.each(i,function(i,a){var s,n;a=e.isFunction(a)?{click:a,text:i}:a,a=e.extend({type:"button"},a),s=a.click,a.click=function(){s.apply(t.element[0],arguments)},n={icons:a.icons,text:a.showText},delete a.icons,delete a.showText,e("<button></button>",a).button(n).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,a=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(a,s){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",a,t(s))},drag:function(e,a){i._trigger("drag",e,t(a))},stop:function(s,n){a.position=[n.position.left-i.document.scrollLeft(),n.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",s,t(n))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,a=this.options,s=a.resizable,n=this.uiDialog.css("position"),r="string"==typeof s?s:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:r,start:function(a,s){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",a,t(s))},resize:function(e,a){i._trigger("resize",e,t(a))},stop:function(s,n){a.height=e(this).height(),a.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",s,t(n))}}).css("position",n)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(a){var s=this,n=!1,r={};e.each(a,function(e,a){s._setOption(e,a),e in t&&(n=!0),e in i&&(r[e]=a)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,t){var i,a,s=this.uiDialog;"dialogClass"===e&&s.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=s.is(":data(ui-draggable)"),i&&!t&&s.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(a=s.is(":data(ui-resizable)"),a&&!t&&s.resizable("destroy"),a&&"string"==typeof t&&s.resizable("option","handles",t),a||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,a=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),a.minWidth>a.width&&(a.width=a.minWidth),e=this.uiDialog.css({height:"auto",width:a.width}).outerHeight(),t=Math.max(0,a.minHeight-e),i="number"==typeof a.maxHeight?Math.max(0,a.maxHeight-e):"none","auto"===a.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,a.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(a){t._allowInteraction(a)||(a.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,a=[],s=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(a=i.split?i.split(" "):[i[0],i[1]],1===a.length&&(a[1]=a[0]),e.each(["left","top"],function(e,t){+a[e]===a[e]&&(s[e]=a[e],a[e]=t)}),i={my:a[0]+(0>s[0]?s[0]:"+"+s[0])+" "+a[1]+(0>s[1]?s[1]:"+"+s[1]),at:a.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})})(jQuery);(function(e){e.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),i.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,a,n,r,o,h=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:h=!1,a=this.previousFilter||"",n=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),n===a?r=!0:n=a+n,o=RegExp("^"+i(n),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),s=r&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s,s.length||(n=String.fromCharCode(t.keyCode),o=RegExp("^"+i(n),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),s.length?(this.focus(t,s),s.length>1?(this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,s=this.element.find(this.options.menus);s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),s=t.prev("a"),a=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(a),t.attr("aria-labelledby",s.attr("id"))}),t=s.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,a,n,r,o;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,a=t.offset().top-this.activeMenu.offset().top-i-s,n=this.activeMenu.scrollTop(),r=this.activeMenu.height(),o=t.height(),0>a?this.activeMenu.scrollTop(n+a):a+o>r&&this.activeMenu.scrollTop(n+a-r+o))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,s)},nextPage:function(t){var i,s,a;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,a=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),0>i.offset().top-s-a}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())),undefined):(this.next(t),undefined)},previousPage:function(t){var i,s,a;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,a=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+a>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())),undefined):(this.next(t),undefined)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})})(jQuery);(function(e,t){function i(){return++a}function s(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(n,""))===decodeURIComponent(location.href.replace(n,""))}var a=0,n=/#.*$/;e.widget("ui.tabs",{version:"1.10.3",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var i=this.options.active,s=this.options.collapsible,a=location.hash.substring(1);return null===i&&(a&&this.tabs.each(function(s,n){return e(n).attr("aria-controls")===a?(i=s,!1):t}),null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===i||-1===i)&&(i=this.tabs.length?0:!1)),i!==!1&&(i=this.tabs.index(this.tabs.eq(i)),-1===i&&(i=s?!1:0)),!s&&i===!1&&this.anchors.length&&(i=0),i},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(i){var s=e(this.document[0].activeElement).closest("li"),a=this.tabs.index(s),n=!0;if(!this._handlePageNav(i)){switch(i.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:a++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,a--;break;case e.ui.keyCode.END:a=this.anchors.length-1;break;case e.ui.keyCode.HOME:a=0;break;case e.ui.keyCode.SPACE:return i.preventDefault(),clearTimeout(this.activating),this._activate(a),t;case e.ui.keyCode.ENTER:return i.preventDefault(),clearTimeout(this.activating),this._activate(a===this.options.active?!1:a),t;default:return}i.preventDefault(),clearTimeout(this.activating),a=this._focusNextTab(a,n),i.ctrlKey||(s.attr("aria-selected","false"),this.tabs.eq(a).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",a)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(i){return i.altKey&&i.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):i.altKey&&i.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):t},_findNextTab:function(t,i){function s(){return t>a&&(t=0),0>t&&(t=a),t}for(var a=this.tabs.length-1;-1!==e.inArray(s(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,i){return"active"===e?(this._activate(i),t):"disabled"===e?(this._setupDisabled(i),t):(this._super(e,i),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",i),i||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(i),"heightStyle"===e&&this._setupHeightStyle(i),t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,a){var n,r,o,h=e(a).uniqueId().attr("id"),l=e(a).closest("li"),u=l.attr("aria-controls");s(a)?(n=a.hash,r=t.element.find(t._sanitizeSelector(n))):(o=t._tabId(l),n="#"+o,r=t.element.find(n),r.length||(r=t._createPanel(o),r.insertAfter(t.panels[i-1]||t.tablist)),r.attr("aria-live","polite")),r.length&&(t.panels=t.panels.add(r)),u&&l.data("ui-tabs-aria-controls",u),l.attr({"aria-controls":n.substring(1),"aria-labelledby":h}),r.attr("aria-labelledby",h)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,s=0;i=this.tabs[s];s++)t===!0||-1!==e.inArray(s,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,s=this.element.parent();"fill"===t?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,s=this.active,a=e(t.currentTarget),n=a.closest("li"),r=n[0]===s[0],o=r&&i.collapsible,h=o?e():this._getPanelForTab(n),l=s.length?this._getPanelForTab(s):e(),u={oldTab:s,oldPanel:l,newTab:o?e():n,newPanel:h};t.preventDefault(),n.hasClass("ui-state-disabled")||n.hasClass("ui-tabs-loading")||this.running||r&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=o?!1:this.tabs.index(n),this.active=r?e():n,this.xhr&&this.xhr.abort(),l.length||h.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),h.length&&this.load(this.tabs.index(n),t),this._toggle(t,u))},_toggle:function(t,i){function s(){n.running=!1,n._trigger("activate",t,i)}function a(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&n.options.show?n._show(r,n.options.show,s):(r.show(),s())}var n=this,r=i.newPanel,o=i.oldPanel;this.running=!0,o.length&&this.options.hide?this._hide(o,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o.hide(),a()),o.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),r.length&&o.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var s=this.options.disabled;s!==!1&&(i===t?s=!1:(i=this._getIndex(i),s=e.isArray(s)?e.map(s,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(s!==!0){if(i===t)s=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,s))return;s=e.isArray(s)?e.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(t,i){t=this._getIndex(t);var a=this,n=this.tabs.eq(t),r=n.find(".ui-tabs-anchor"),o=this._getPanelForTab(n),h={tab:n,panel:o};s(r[0])||(this.xhr=e.ajax(this._ajaxSettings(r,i,h)),this.xhr&&"canceled"!==this.xhr.statusText&&(n.addClass("ui-tabs-loading"),o.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){o.html(e),a._trigger("load",i,h)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&a.panels.stop(!1,!0),n.removeClass("ui-tabs-loading"),o.removeAttr("aria-busy"),e===a.xhr&&delete a.xhr},1)})))},_ajaxSettings:function(t,i,s){var a=this;return{url:t.attr("href"),beforeSend:function(t,n){return a._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:n},s))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})})(jQuery);


/***/ }),
/* 5 */
/***/ (function(module, exports) {

	/*
	 * jQuery plugin to wrap elements
	 *
	 * http://jsbin.com/idize
	 *
	 */
	(function(a) {
	    a.fn.wrapChildren = function(b) {
	        var b = a.extend({childElem: undefined, sets: 1, wrapper: "div"}, b || {});
	        if (b.childElem === undefined) {
	            return this
	        }
	        return this.each(function() {
	            var d = a(this).children(b.childElem);
	            var c = [];
	            d.each(function(e, f) {
	                c.push(f);
	                if (((e + 1) % b.sets === 0) || (e === d.length - 1)) {
	                    var g = a(c);
	                    c = [];
	                    g.wrapAll(a("<" + b.wrapper + ">"))
	                }
	            })
	        })
	    }
	})(jQuery);


/***/ }),
/* 6 */
/***/ (function(module, exports) {

	/**
	 * BxSlider v4.0 - Fully loaded, responsive content slider
	 * http://bxslider.com
	 *
	 * Copyright 2012, Steven Wanderski - http://stevenwanderski.com - http://bxcreative.com
	 * Written while drinking Belgian ales and listening to jazz
	 *
	 * Released under the WTFPL license - http://sam.zoy.org/wtfpl/
	 */
	
	;(function($){
	
	    var plugin = {};
	    
	    var defaults = {
	        
	        // GENERAL
	        mode: 'horizontal',
	        slideSelector: '',
	        infiniteLoop: true,
	        hideControlOnEnd: false,
	        speed: 500,
	        easing: null,
	        slideMargin: 0,
	        startSlide: 0,
	        randomStart: false,
	        captions: false,
	        ticker: false,
	        tickerHover: false,
	        adaptiveHeight: false,
	        adaptiveHeightSpeed: 500,
	        touchEnabled: true,
	        swipeThreshold: 50,
	        video: false,
	        useCSS: true,
	        
	        // PAGER
	        pager: true,
	        pagerType: 'full',
	        pagerShortSeparator: ' / ',
	        pagerSelector: null,
	        buildPager: null,
	        pagerCustom: null,
	        
	        // CONTROLS
	        controls: true,
	        nextText: 'Next',
	        prevText: 'Prev',
	        nextSelector: null,
	        prevSelector: null,
	        autoControls: false,
	        startText: 'Start',
	        stopText: 'Stop',
	        autoControlsCombine: false,
	        autoControlsSelector: null,
	        
	        // AUTO
	        auto: false,
	        pause: 4000,
	        autoStart: true,
	        autoDirection: 'next',
	        autoHover: false,
	        autoDelay: 0,
	        
	        // CAROUSEL
	        minSlides: 1,
	        maxSlides: 1,
	        moveSlides: 0,
	        slideWidth: 0,
	        
	        // CALLBACKS
	        onSliderLoad: function() {},
	        onSlideBefore: function() {},
	        onSlideAfter: function() {},
	        onSlideNext: function() {},
	        onSlidePrev: function() {}
	    }
	
	    $.fn.bxSlider = function(options){
	        
	        if(this.length == 0) return;
	        
	        // support mutltiple elements
	        if(this.length > 1){
	            this.each(function(){$(this).bxSlider(options)});
	            return this;
	        }
	        
	        // create a namespace to be used throughout the plugin
	        var slider = {};
	        // set a reference to our slider element
	        var el = this;
	        plugin.el = this;
	        
	        /**
	         * ===================================================================================
	         * = PRIVATE FUNCTIONS
	         * ===================================================================================
	         */
	        
	        /**
	         * Initializes namespace settings to be used throughout plugin
	         */
	        var init = function(){
	            // merge user-supplied options with the defaults
	            slider.settings = $.extend({}, defaults, options);
	            // store the original children
	            slider.children = el.children(slider.settings.slideSelector);
	            // if random start, set the startSlide setting to random number
	            if(slider.settings.randomStart) slider.settings.startSlide = Math.floor(Math.random() * slider.children.length);
	            // store active slide information
	            slider.active = { index: slider.settings.startSlide }
	            // store if the slider is in carousel mode (displaying / moving multiple slides)
	            slider.carousel = slider.settings.minSlides > 1 || slider.settings.maxSlides > 1;
	            // calculate the min / max width thresholds based on min / max number of slides
	            // used to setup and update carousel slides dimensions
	            slider.minThreshold = (slider.settings.minSlides * slider.settings.slideWidth) + ((slider.settings.minSlides - 1) * slider.settings.slideMargin);
	            slider.maxThreshold = (slider.settings.maxSlides * slider.settings.slideWidth) + ((slider.settings.maxSlides - 1) * slider.settings.slideMargin);
	            // store the current state of the slider (if currently animating, working is true)
	            slider.working = false;
	            // initialize the controls object
	            slider.controls = {};
	            // determine which property to use for transitions
	            slider.animProp = slider.settings.mode == 'vertical' ? 'top' : 'left';
	            // determine if hardware acceleration can be used
	            slider.usingCSS = slider.settings.useCSS && slider.settings.mode != 'fade' && (function(){
	                // create our test div element
	                var div = document.createElement('div');
	                // css transition properties
	                var props = ['WebkitPerspective', 'MozPerspective', 'OPerspective', 'msPerspective'];
	                // test for each property
	                for(var i in props){
	                    if(div.style[props[i]] !== undefined){
	                        slider.cssPrefix = props[i].replace('Perspective', '').toLowerCase();
	                        slider.animProp = '-' + slider.cssPrefix + '-transform';
	                        return true;
	                    }
	                }
	                return false;
	            }());
	            // if vertical mode always make maxSlides and minSlides equal
	            if(slider.settings.mode == 'vertical') slider.settings.maxSlides = slider.settings.minSlides;
	            // perform all DOM / CSS modifications
	            setup();
	        }
	
	        /**
	         * Performs all DOM and CSS modifications
	         */
	        var setup = function(){
	            // wrap el in a wrapper
	            el.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>');
	            // store a namspace reference to .bx-viewport
	            slider.viewport = el.parent();
	            // add a loading div to display while images are loading
	            slider.loader = $('<div class="bx-loading" />');
	            slider.viewport.prepend(slider.loader);
	            // set el to a massive width, to hold any needed slides
	            // also strip any margin and padding from el
	            el.css({
	                width: slider.settings.mode == 'horizontal' ? slider.children.length * 215 + '%' : 'auto',
	                position: 'relative',
	            });
	            // if using CSS, add the easing property
	            if(slider.usingCSS && slider.settings.easing){
	                el.css('-' + slider.cssPrefix + '-transition-timing-function', slider.settings.easing);
	            // if not using CSS and no easing value was supplied, use the default JS animation easing (swing)
	            }else if(!slider.settings.easing){
	                slider.settings.easing = 'swing';
	            }
	            // make modifications to the viewport (.bx-viewport)
	            slider.viewport.css({
	                width: '100%',
	                overflow: 'hidden',
	                position: 'relative'
	            });
	            // apply css to all slider children
	            slider.children.css({
	                float: slider.settings.mode == 'horizontal' ? 'left' : 'none',
	                listStyle: 'none',
	            });
	            // apply the calculated width after the float is applied to prevent scrollbar interference
	            slider.children.width(getSlideWidth());
	            // if slideMargin is supplied, add the css
	            if(slider.settings.mode == 'horizontal' && slider.settings.slideMargin > 0) slider.children.css('marginRight', slider.settings.slideMargin);
	            if(slider.settings.mode == 'vertical' && slider.settings.slideMargin > 0) slider.children.css('marginBottom', slider.settings.slideMargin);
	            // if "fade" mode, add positioning and z-index CSS
	            if(slider.settings.mode == 'fade'){
	                slider.children.css({
	                    position: 'absolute',
	                    zIndex: 0,
	                    display: 'none'
	                });
	                // prepare the z-index on the showing element
	                slider.children.eq(slider.settings.startSlide).css({zIndex: 50, display: 'block'});
	            }
	            // create an element to contain all slider controls (pager, start / stop, etc)
	            slider.controls.el = $('<div class="bx-controls" />');
	            // if captions are requested, add them
	            if(slider.settings.captions) appendCaptions();
	            // if infinite loop, prepare additional slides
	            if(slider.settings.infiniteLoop && slider.settings.mode != 'fade' && !slider.settings.ticker){
	                var slice = slider.settings.mode == 'vertical' ? slider.settings.minSlides : slider.settings.maxSlides;
	                var sliceAppend = slider.children.slice(0, slice).clone().addClass('bx-clone');
	                var slicePrepend = slider.children.slice(-slice).clone().addClass('bx-clone');
	                el.append(sliceAppend).prepend(slicePrepend);
	            }
	            // check if startSlide is last slide
	            slider.active.last = slider.settings.startSlide == getPagerQty() - 1;
	            // if video is true, set up the fitVids plugin
	            if(slider.settings.video) el.fitVids();
	            // only check for control addition if not in "ticker" mode
	            if(!slider.settings.ticker){
	                // if pager is requested, add it
	                if(slider.settings.pager) appendPager();
	                // if controls are requested, add them
	                if(slider.settings.controls) appendControls();
	                // if auto is true, and auto controls are requested, add them
	                if(slider.settings.auto && slider.settings.autoControls) appendControlsAuto();
	                // if any control option is requested, add the controls wrapper
	                if(slider.settings.controls || slider.settings.autoControls || slider.settings.pager) slider.viewport.after(slider.controls.el);
	            }
	            // preload all images, then perform final DOM / CSS modifications that depend on images being loaded
	            el.children().imagesLoaded(function(){
	                // remove the loading DOM element
	                slider.loader.remove();
	                // set the left / top position of "el"
	                setSlidePosition();
	                // if "vertical" mode, always use adaptiveHeight to prevent odd behavior
	                if (slider.settings.mode == 'vertical') slider.settings.adaptiveHeight = true;
	                // set the viewport height
	                slider.viewport.height(getViewportHeight());
	                // onSliderLoad callback
	                slider.settings.onSliderLoad(slider.active.index);
	                // if auto is true, start the show
	                if (slider.settings.auto && slider.settings.autoStart) initAuto();
	                // if ticker is true, start the ticker
	                if (slider.settings.ticker) initTicker();
	                // if pager is requested, make the appropriate pager link active
	                if (slider.settings.pager) updatePagerActive(slider.settings.startSlide);
	                // check for any updates to the controls (like hideControlOnEnd updates)
	                if (slider.settings.controls) updateDirectionControls();
	                // if touchEnabled is true, setup the touch events
	                if (slider.settings.touchEnabled && !slider.settings.ticker) initTouch();
	            });
	        }
	        
	        /**
	         * Returns the calculated height of the viewport, used to determine either adaptiveHeight or the maxHeight value
	         */
	        var getViewportHeight = function(){
	            var height = 0;
	            // first determine which children (slides) should be used in our height calculation
	            var children = $();
	            // if mode is not "vertical", adaptiveHeight is always false, so return all children
	            if(slider.settings.mode != 'vertical' && !slider.settings.adaptiveHeight){
	                children = slider.children;
	            }else{
	                // if not carousel, return the single active child
	                if(!slider.carousel){
	                    children = slider.children.eq(slider.active.index);
	                // if carousel, return a slice of children
	                }else{
	                    // get the individual slide index
	                    var currentIndex = slider.settings.moveSlides == 1 ? slider.active.index : slider.active.index * getMoveBy();
	                    // add the current slide to the children
	                    children = slider.children.eq(currentIndex);
	                    // cycle through the remaining "showing" slides
	                    for (i = 1; i <= slider.settings.maxSlides - 1; i++){
	                        // if looped back to the start
	                        if(currentIndex + i >= slider.children.length){
	                            children = children.add(slider.children.eq(i - 1));
	                        }else{
	                            children = children.add(slider.children.eq(currentIndex + i));
	                        }
	                    }
	                }
	            }
	            // if "vertical" mode, calculate the sum of the heights of the children
	            if(slider.settings.mode == 'vertical'){
	                children.each(function(index) {
	                  height += $(this).outerHeight();
	                });
	                // add user-supplied margins
	                if(slider.settings.slideMargin > 0){
	                    height += slider.settings.slideMargin * (slider.settings.minSlides - 1);
	                }
	            // if not "vertical" mode, calculate the max height of the children
	            }else{
	                height = Math.max.apply(Math, children.map(function(){
	                    return $(this).outerHeight(false);
	                }).get());
	            }
	            return height;
	        }
	        
	        /**
	         * Returns the calculated width to be applied to each slide
	         */
	        var getSlideWidth = function(){
	            // start with any user-supplied slide width
	            var newElWidth = slider.settings.slideWidth;
	            // get the current viewport width
	            var wrapWidth = slider.viewport.width();
	            // if slide width was not supplied, use the viewport width (means not carousel)
	            if(slider.settings.slideWidth == 0){
	                newElWidth = wrapWidth;
	            // if carousel, use the thresholds to determine the width
	            }else{
	                if(wrapWidth > slider.maxThreshold){
	                    newElWidth = (wrapWidth - (slider.settings.slideMargin * (slider.settings.maxSlides - 1))) / slider.settings.maxSlides;
	                }else if(wrapWidth < slider.minThreshold){
	                    newElWidth = (wrapWidth - (slider.settings.slideMargin * (slider.settings.minSlides - 1))) / slider.settings.minSlides;
	                }
	            }
	            return newElWidth;
	        }
	        
	        /**
	         * Returns the number of slides currently visible in the viewport (includes partially visible slides)
	         */
	        var getNumberSlidesShowing = function(){
	            var slidesShowing = 1;
	            if(slider.settings.mode == 'horizontal'){
	                // if viewport is smaller than minThreshold, return minSlides
	                if(slider.viewport.width() < slider.minThreshold){
	                    slidesShowing = slider.settings.minSlides;
	                // if viewport is larger than minThreshold, return maxSlides
	                }else if(slider.viewport.width() > slider.maxThreshold){
	                    slidesShowing = slider.settings.maxSlides;
	                // if viewport is between min / max thresholds, divide viewport width by first child width
	                }else{
	                    var childWidth = slider.children.first().width();
	                    slidesShowing = Math.floor(slider.viewport.width() / childWidth);
	                }
	            // if "vertical" mode, slides showing will always be minSlides
	            }else if(slider.settings.mode == 'vertical'){
	                slidesShowing = slider.settings.minSlides;
	            }
	            return slidesShowing;
	        }
	        
	        /**
	         * Returns the number of pages (one full viewport of slides is one "page")
	         */
	        var getPagerQty = function(){
	            var pagerQty = 0;
	            // if moveSlides is specified by the user
	            if(slider.settings.moveSlides > 0){
	                if(slider.settings.infiniteLoop){
	                    pagerQty = slider.children.length / getMoveBy();
	                }else{
	                    // use a while loop to determine pages
	                    var breakPoint = 0;
	                    var counter = 0
	                    // when breakpoint goes above children length, counter is the number of pages
	                    while (breakPoint < slider.children.length){
	                        ++pagerQty;
	                        breakPoint = counter + getNumberSlidesShowing();
	                        counter += slider.settings.moveSlides <= getNumberSlidesShowing() ? slider.settings.moveSlides : getNumberSlidesShowing();
	                    }
	                }
	            // if moveSlides is 0 (auto) divide children length by sides showing, then round up
	            }else{
	                pagerQty = Math.ceil(slider.children.length / getNumberSlidesShowing());
	            }
	            return pagerQty;
	        }
	        
	        /**
	         * Returns the number of indivual slides by which to shift the slider
	         */
	        var getMoveBy = function(){
	            // if moveSlides was set by the user and moveSlides is less than number of slides showing
	            if(slider.settings.moveSlides > 0 && slider.settings.moveSlides <= getNumberSlidesShowing()){
	                return slider.settings.moveSlides;
	            }
	            // if moveSlides is 0 (auto)
	            return getNumberSlidesShowing();
	        }
	        
	        /**
	         * Sets the slider's (el) left or top position
	         */
	        var setSlidePosition = function(){
	            // if last slide
	            if(slider.active.last){
	                if (slider.settings.mode == 'horizontal'){
	                    // get the last child's position
	                    var lastChild = slider.children.last();
	                    var position = lastChild.position();
	                    // set the left position
	                    setPositionProperty(-(position.left - (slider.viewport.width() - lastChild.width())), 'reset', 0);
	                }else if(slider.settings.mode == 'vertical'){
	                    // get the last showing index's position
	                    var lastShowingIndex = slider.children.length - slider.settings.minSlides;
	                    var position = slider.children.eq(lastShowingIndex).position();
	                    // set the top position
	                    setPositionProperty(-position.top, 'reset', 0);
	                }
	            // if not last slide
	            }else{
	                // get the position of the first showing slide
	                var position = slider.children.eq(slider.active.index * getMoveBy()).position();
	                // check for last slide
	                if (slider.active.index == getPagerQty() - 1) slider.active.last = true;
	                // set the repective position
	                if (position != undefined){
	                    if (slider.settings.mode == 'horizontal') setPositionProperty(-position.left, 'reset', 0);
	                    else if (slider.settings.mode == 'vertical') setPositionProperty(-position.top, 'reset', 0);
	                }
	            }
	        }
	        
	        /**
	         * Sets the el's animating property position (which in turn will sometimes animate el).
	         * If using CSS, sets the transform property. If not using CSS, sets the top / left property.
	         *
	         * @param value (int) 
	         *  - the animating property's value
	         *
	         * @param type (string) 'slider', 'reset', 'ticker'
	         *  - the type of instance for which the function is being
	         *
	         * @param duration (int) 
	         *  - the amount of time (in ms) the transition should occupy
	         *
	         * @param params (array) optional
	         *  - an optional parameter containing any variables that need to be passed in
	         */
	        var setPositionProperty = function(value, type, duration, params){
	            // use CSS transform
	            if(slider.usingCSS){
	                // determine the translate3d value
	                var propValue = slider.settings.mode == 'vertical' ? 'translate3d(0, ' + value + 'px, 0)' : 'translate3d(' + value + 'px, 0, 0)';
	                // add the CSS transition-duration
	                el.css('-' + slider.cssPrefix + '-transition-duration', duration / 1000 + 's');
	                if(type == 'slide'){
	                    // set the property value
	                    el.css(slider.animProp, propValue);
	                    // bind a callback method - executes when CSS transition completes
	                    el.bind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function(){
	                        // unbind the callback
	                        el.unbind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');
	                        updateAfterSlideTransition();
	                    });
	                }else if(type == 'reset'){
	                    el.css(slider.animProp, propValue);
	                }else if(type == 'ticker'){
	                    // make the transition use 'linear'
	                    el.css('-' + slider.cssPrefix + '-transition-timing-function', 'linear');
	                    el.css(slider.animProp, propValue);
	                    // bind a callback method - executes when CSS transition completes
	                    el.bind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd', function(){
	                        // unbind the callback
	                        el.unbind('transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd');
	                        // reset the position
	                        setPositionProperty(params['resetValue'], 'reset', 0);
	                        // start the loop again
	                        tickerLoop();
	                    });
	                }
	            // use JS animate
	            }else{
	                var animateObj = {};
	                animateObj[slider.animProp] = value;
	                if(type == 'slide'){
	                    el.animate(animateObj, duration, slider.settings.easing, function(){
	                        updateAfterSlideTransition();
	                    });
	                }else if(type == 'reset'){
	                    el.css(slider.animProp, value)
	                }else if(type == 'ticker'){
	                    el.animate(animateObj, speed, 'linear', function(){
	                        setPositionProperty(params['resetValue'], 'reset', 0);
	                        // run the recursive loop after animation
	                        tickerLoop();
	                    });
	                }
	            }
	        }
	        
	        /**
	         * Populates the pager with proper amount of pages
	         */
	        var populatePager = function(){
	            var pagerHtml = '';
	            pagerQty = getPagerQty();
	            // loop through each pager item
	            for(var i=0; i < pagerQty; i++){
	                var linkContent = '';
	                // if a buildPager function is supplied, use it to get pager link value, else use index + 1
	                if(slider.settings.buildPager && $.isFunction(slider.settings.buildPager)){
	                    linkContent = slider.settings.buildPager(i);
	                    slider.pagerEl.addClass('bx-custom-pager');
	                }else{
	                    linkContent = i + 1;
	                    slider.pagerEl.addClass('bx-default-pager');
	                }
	                // var linkContent = slider.settings.buildPager && $.isFunction(slider.settings.buildPager) ? slider.settings.buildPager(i) : i + 1;
	                // add the markup to the string
	                pagerHtml += '<div class="bx-pager-item"><a href="" data-slide-index="' + i + '" class="bx-pager-link">' + linkContent + '</a></div>';
	            };
	            // populate the pager element with pager links
	            slider.pagerEl.html(pagerHtml);
	        }
	        
	        /**
	         * Appends the pager to the controls element
	         */
	        var appendPager = function(){
	            if(!slider.settings.pagerCustom){
	                // create the pager DOM element
	                slider.pagerEl = $('<div class="bx-pager" />');
	                // if a pager selector was supplied, populate it with the pager
	                if(slider.settings.pagerSelector){
	                    $(slider.settings.pagerSelector).html(slider.pagerEl);
	                // if no pager selector was supplied, add it after the wrapper
	                }else{
	                    slider.controls.el.addClass('bx-has-pager').append(slider.pagerEl);
	                }
	                // populate the pager
	                populatePager();
	            }else{
	                slider.pagerEl = $(slider.settings.pagerCustom);
	            }
	            // assign the pager click binding
	            slider.pagerEl.delegate('a', 'click', clickPagerBind);
	        }
	        
	        /**
	         * Appends prev / next controls to the controls element
	         */
	        var appendControls = function(){
	            slider.controls.next = $('<a class="bx-next" href="">' + slider.settings.nextText + '</a>');
	            slider.controls.prev = $('<a class="bx-prev" href="">' + slider.settings.prevText + '</a>');
	            // bind click actions to the controls
	            slider.controls.next.bind('click', clickNextBind);
	            slider.controls.prev.bind('click', clickPrevBind);
	            // if nextSlector was supplied, populate it
	            if(slider.settings.nextSelector){
	                $(slider.settings.nextSelector).append(slider.controls.next);
	            }
	            // if prevSlector was supplied, populate it
	            if(slider.settings.prevSelector){
	                $(slider.settings.prevSelector).append(slider.controls.prev);
	            }
	            // if no custom selectors were supplied
	            if(!slider.settings.nextSelector && !slider.settings.prevSelector){
	                // add the controls to the DOM
	                slider.controls.directionEl = $('<div class="bx-controls-direction" />');
	                // add the control elements to the directionEl
	                slider.controls.directionEl.append(slider.controls.prev).append(slider.controls.next);
	                // slider.viewport.append(slider.controls.directionEl);
	                slider.controls.el.addClass('bx-has-controls-direction').append(slider.controls.directionEl);
	            }
	        }
	        
	        /**
	         * Appends start / stop auto controls to the controls element
	         */
	        var appendControlsAuto = function(){
	            slider.controls.start = $('<div class="bx-controls-auto-item"><a class="bx-start" href="">' + slider.settings.startText + '</a></div>');
	            slider.controls.stop = $('<div class="bx-controls-auto-item"><a class="bx-stop" href="">' + slider.settings.stopText + '</a></div>');
	            // add the controls to the DOM
	            slider.controls.autoEl = $('<div class="bx-controls-auto" />');
	            // bind click actions to the controls
	            slider.controls.autoEl.delegate('.bx-start', 'click', clickStartBind);
	            slider.controls.autoEl.delegate('.bx-stop', 'click', clickStopBind);
	            // if autoControlsCombine, insert only the "start" control
	            if(slider.settings.autoControlsCombine){
	                slider.controls.autoEl.append(slider.controls.start);
	            // if autoControlsCombine is false, insert both controls
	            }else{
	                slider.controls.autoEl.append(slider.controls.start).append(slider.controls.stop);
	            }
	            // if auto controls selector was supplied, populate it with the controls
	            if(slider.settings.autoControlsSelector){
	                $(slider.settings.autoControlsSelector).html(slider.controls.autoEl);
	            // if auto controls selector was not supplied, add it after the wrapper
	            }else{
	                slider.controls.el.addClass('bx-has-controls-auto').append(slider.controls.autoEl);
	            }
	            // update the auto controls
	            updateAutoControls(slider.settings.autoStart ? 'stop' : 'start');
	        }
	        
	        /**
	         * Appends image captions to the DOM
	         */
	        var appendCaptions = function(){
	            // cycle through each child
	            slider.children.each(function(index){
	                // get the image title attribute
	                var title = $(this).find('img:first').attr('title');
	                // append the caption
	                if (title != undefined) $(this).append('<div class="bx-caption"><span>' + title + '</span></div>');
	            });
	        }
	        
	        /**
	         * Click next binding
	         *
	         * @param e (event) 
	         *  - DOM event object
	         */
	        var clickNextBind = function(e){
	            // if auto show is running, stop it
	            if (slider.settings.auto) el.stopAuto();
	            el.goToNextSlide();
	            e.preventDefault();
	        }
	        
	        /**
	         * Click prev binding
	         *
	         * @param e (event) 
	         *  - DOM event object
	         */
	        var clickPrevBind = function(e){
	            // if auto show is running, stop it
	            if (slider.settings.auto) el.stopAuto();
	            el.goToPrevSlide();
	            e.preventDefault();
	        }
	        
	        /**
	         * Click start binding
	         *
	         * @param e (event) 
	         *  - DOM event object
	         */
	        var clickStartBind = function(e){
	            el.startAuto();
	            e.preventDefault();
	        }
	        
	        /**
	         * Click stop binding
	         *
	         * @param e (event) 
	         *  - DOM event object
	         */
	        var clickStopBind = function(e){
	            el.stopAuto();
	            e.preventDefault();
	        }
	
	        /**
	         * Click pager binding
	         *
	         * @param e (event) 
	         *  - DOM event object
	         */
	        var clickPagerBind = function(e){
	            // if auto show is running, stop it
	            if (slider.settings.auto) el.stopAuto();
	            var pagerLink = $(e.currentTarget);
	            var pagerIndex = parseInt(pagerLink.attr('data-slide-index'));
	            // if clicked pager link is not active, continue with the goToSlide call
	            if(pagerIndex != slider.active.index) el.goToSlide(pagerIndex);
	            e.preventDefault();
	        }
	        
	        /**
	         * Updates the pager links with an active class
	         *
	         * @param slideIndex (int) 
	         *  - index of slide to make active
	         */
	        var updatePagerActive = function(slideIndex){
	            // if "short" pager type
	            if(slider.settings.pagerType == 'short'){
	                slider.pagerEl.html((slideIndex + 1) + slider.settings.pagerShortSeparator + slider.children.length);
	                return;
	            }
	            // remove all pager active classes
	            slider.pagerEl.find('a').removeClass('active');
	            // apply the active class
	            slider.pagerEl.find('a').eq(slideIndex).addClass('active');
	        }
	        
	        /**
	         * Performs needed actions after a slide transition
	         */
	        var updateAfterSlideTransition = function(){
	            // if infinte loop is true
	            if(slider.settings.infiniteLoop){
	                var position = '';
	                // first slide
	                if(slider.active.index == 0){
	                    // set the new position
	                    position = slider.children.eq(0).position();
	                // carousel, last slide
	                }else if(slider.active.index == getPagerQty() - 1 && slider.carousel){
	                    position = slider.children.eq((getPagerQty() - 1) * getMoveBy()).position();
	                // last slide
	                }else if(slider.active.index == slider.children.length - 1){
	                    position = slider.children.eq(slider.children.length - 1).position();
	                }
	                if (slider.settings.mode == 'horizontal') { setPositionProperty(-position.left, 'reset', 0);; }
	                else if (slider.settings.mode == 'vertical') { setPositionProperty(-position.top, 'reset', 0);; }
	            }
	            // declare that the transition is complete
	            slider.working = false;
	            // onSlideAfter callback
	            slider.settings.onSlideAfter(slider.children.eq(slider.active.index), slider.oldIndex, slider.active.index);
	        }
	        
	        /**
	         * Updates the auto controls state (either active, or combined switch)
	         *
	         * @param state (string) "start", "stop"
	         *  - the new state of the auto show
	         */
	        var updateAutoControls = function(state){
	            // if autoControlsCombine is true, replace the current control with the new state 
	            if(slider.settings.autoControlsCombine){
	                slider.controls.autoEl.html(slider.controls[state]);
	            // if autoControlsCombine is false, apply the "active" class to the appropriate control 
	            }else{
	                slider.controls.autoEl.find('a').removeClass('active');
	                slider.controls.autoEl.find('a:not(.bx-' + state + ')').addClass('active');
	            }
	        }
	        
	        /**
	         * Updates the direction controls (checks if either should be hidden)
	         */
	        var updateDirectionControls = function(){
	            // if infiniteLoop is false and hideControlOnEnd is true
	            if(!slider.settings.infiniteLoop && slider.settings.hideControlOnEnd){
	                // if first slide
	                if (slider.active.index == 0){
	                    slider.controls.prev.addClass('disabled');
	                    slider.controls.next.removeClass('disabled');
	                // if last slide
	                }else if(slider.active.index == getPagerQty() - 1){
	                    slider.controls.next.addClass('disabled');
	                    slider.controls.prev.removeClass('disabled');
	                // if any slide in the middle
	                }else{
	                    slider.controls.prev.removeClass('disabled');
	                    slider.controls.next.removeClass('disabled');
	                }
	            }
	        }
	        
	        /**
	         * Initialzes the auto process
	         */
	        var initAuto = function(){
	            // if autoDelay was supplied, launch the auto show using a setTimeout() call
	            if(slider.settings.autoDelay > 0){
	                var timeout = setTimeout(el.startAuto, slider.settings.autoDelay);
	            // if autoDelay was not supplied, start the auto show normally
	            }else{
	                el.startAuto();
	            }
	            // if autoHover is requested
	            if(slider.settings.autoHover){
	                // on el hover
	                el.hover(function(){
	                    // if the auto show is currently playing (has an active interval)
	                    if(slider.interval){
	                        // stop the auto show and pass true agument which will prevent control update
	                        el.stopAuto(true);
	                        // create a new autoPaused value which will be used by the relative "mouseout" event
	                        slider.autoPaused = true;
	                    }
	                }, function(){
	                    // if the autoPaused value was created be the prior "mouseover" event
	                    if(slider.autoPaused){
	                        // start the auto show and pass true agument which will prevent control update
	                        el.startAuto(true);
	                        // reset the autoPaused value
	                        slider.autoPaused = null;
	                    }
	                });
	            }
	        }
	        
	        /**
	         * Initialzes the ticker process
	         */
	        var initTicker = function(){
	            var startPosition = 0;
	            // if autoDirection is "next", append a clone of the entire slider
	            if(slider.settings.autoDirection == 'next'){
	                el.append(slider.children.clone().addClass('bx-clone'));
	            // if autoDirection is "prev", prepend a clone of the entire slider, and set the left position
	            }else{
	                el.prepend(slider.children.clone().addClass('bx-clone'));
	                var position = slider.children.first().position();
	                startPosition = slider.settings.mode == 'horizontal' ? -position.left : -position.top;
	            }
	            setPositionProperty(startPosition, 'reset', 0);
	            // do not allow controls in ticker mode
	            slider.settings.pager = false;
	            slider.settings.controls = false;
	            slider.settings.autoControls = false;
	            // if autoHover is requested
	            if(slider.settings.tickerHover && !slider.usingCSS){
	                // on el hover
	                slider.viewport.hover(function(){
	                    el.stop();
	                }, function(){
	                    // calculate the total width of children (used to calculate the speed ratio)
	                    var totalDimens = 0;
	                    slider.children.each(function(index){
	                      totalDimens += slider.settings.mode == 'horizontal' ? $(this).outerWidth(true) : $(this).outerHeight(true);
	                    });
	                    // calculate the speed ratio (used to determine the new speed to finish the paused animation)
	                    var ratio = slider.settings.speed / totalDimens;
	                    // determine which property to use
	                    var property = slider.settings.mode == 'horizontal' ? 'left' : 'top';
	                    // calculate the new speed
	                    var newSpeed = ratio * (totalDimens - (Math.abs(parseInt(el.css(property)))));
	                    tickerLoop(newSpeed);
	                });
	            }
	            // start the ticker loop
	            tickerLoop();
	        }
	        
	        /**
	         * Runs a continuous loop, news ticker-style
	         */
	        var tickerLoop = function(resumeSpeed){
	            speed = resumeSpeed ? resumeSpeed : slider.settings.speed;
	            var position = {left: 0, top: 0};
	            var reset = {left: 0, top: 0};
	            // if "next" animate left position to last child, then reset left to 0
	            if(slider.settings.autoDirection == 'next'){
	                position = el.find('.bx-clone').first().position();
	            // if "prev" animate left position to 0, then reset left to first non-clone child
	            }else{
	                reset = slider.children.first().position();
	            }
	            var animateProperty = slider.settings.mode == 'horizontal' ? -position.left : -position.top;
	            var resetValue = slider.settings.mode == 'horizontal' ? -reset.left : -reset.top;
	            var params = {resetValue: resetValue};
	            setPositionProperty(animateProperty, 'ticker', speed, params);
	        }
	        
	        /**
	         * Initializes touch events
	         */
	        var initTouch = function(){
	            // initialize object to contain all touch values
	            slider.touch = {
	                start: {x: 0, y: 0},
	                end: {x: 0, y: 0}
	            }
	            slider.viewport.bind('touchstart', onTouchStart);
	        }
	        
	        /**
	         * Event handler for "touchstart"
	         *
	         * @param e (event) 
	         *  - DOM event object
	         */
	        var onTouchStart = function(e){
	            if(slider.working){
	                e.preventDefault();
	            }else{
	                // record the original position when touch starts
	                slider.touch.originalPos = el.position();
	                var orig = e.originalEvent;
	                // record the starting touch x, y coordinates
	                slider.touch.start.x = orig.changedTouches[0].pageX;
	                slider.touch.start.y = orig.changedTouches[0].pageY;
	                // bind a "touchmove" event to the viewport
	                slider.viewport.bind('touchmove', onTouchMove);
	                // bind a "touchend" event to the viewport
	                slider.viewport.bind('touchend', onTouchEnd);
	            }
	        }
	        
	        /**
	         * Event handler for "touchmove"
	         *
	         * @param e (event) 
	         *  - DOM event object
	         */
	        var onTouchMove = function(e){
	            e.preventDefault();
	            if(slider.settings.mode != 'fade'){
	                var orig = e.originalEvent;
	                var value = 0;
	                // if horizontal, drag along x axis
	                if(slider.settings.mode == 'horizontal'){
	                    var change = orig.changedTouches[0].pageX - slider.touch.start.x;
	                    value = slider.touch.originalPos.left + change;
	                // if vertical, drag along y axis
	                }else{
	                    var change = orig.changedTouches[0].pageY - slider.touch.start.y;
	                    value = slider.touch.originalPos.top + change;
	                }
	                setPositionProperty(value, 'reset', 0);
	            }
	        }
	        
	        /**
	         * Event handler for "touchend"
	         *
	         * @param e (event) 
	         *  - DOM event object
	         */
	        var onTouchEnd = function(e){
	            slider.viewport.unbind('touchmove', onTouchMove);
	            var orig = e.originalEvent;
	            var value = 0;
	            // record end x, y positions
	            slider.touch.end.x = orig.changedTouches[0].pageX;
	            slider.touch.end.y = orig.changedTouches[0].pageY;
	            // if fade mode, check if absolute x distance clears the threshold
	            if(slider.settings.mode == 'fade'){
	                var distance = Math.abs(slider.touch.start.x - slider.touch.end.x);
	                if(distance >= slider.settings.swipeThreshold){
	                    slider.touch.start.x > slider.touch.end.x ? el.goToNextSlide() : el.goToPrevSlide();
	                    el.stopAuto();
	                }
	            // not fade mode
	            }else{
	                var distance = 0;
	                // calculate distance and el's animate property
	                if(slider.settings.mode == 'horizontal'){
	                    distance = slider.touch.end.x - slider.touch.start.x;
	                    value = slider.touch.originalPos.left;
	                }else{
	                    distance = slider.touch.end.y - slider.touch.start.y;
	                    value = slider.touch.originalPos.top;
	                }
	                // if not infinite loop and first / last slide, do not attempt a slide transition
	                if(!slider.settings.infiniteLoop && ((slider.active.index == 0 && distance > 0) || (slider.active.last && distance < 0))){
	                    setPositionProperty(value, 'reset', 200);
	                }else{
	                    // check if distance clears threshold
	                    if(Math.abs(distance) >= slider.settings.swipeThreshold){
	                        distance < 0 ? el.goToNextSlide() : el.goToPrevSlide();
	                        el.stopAuto();
	                    }else{
	                        // el.animate(property, 200);
	                        setPositionProperty(value, 'reset', 200);
	                    }
	                }
	            }
	            slider.viewport.unbind('touchend', onTouchEnd);
	        }
	        
	        /**
	         * ===================================================================================
	         * = PUBLIC FUNCTIONS
	         * ===================================================================================
	         */
	        
	        /**
	         * Performs slide transition to the specified slide
	         *
	         * @param slideIndex (int) 
	         *  - the destination slide's index (zero-based)
	         *
	         * @param direction (string) 
	         *  - INTERNAL USE ONLY - the direction of travel ("prev" / "next")
	         */
	        el.goToSlide = function(slideIndex, direction){
	            // if plugin is currently in motion, ignore request
	            if(slider.working || slider.active.index == slideIndex) return;
	            // declare that plugin is in motion
	            slider.working = true;
	            // store the old index
	            slider.oldIndex = slider.active.index;
	            // if slideIndex is less than zero, set active index to last child (this happens during infinite loop)
	            if(slideIndex < 0){
	                slider.active.index = getPagerQty() - 1;
	            // if slideIndex is greater than children length, set active index to 0 (this happens during infinite loop)
	            }else if(slideIndex >= getPagerQty()){
	                slider.active.index = 0;
	            // set active index to requested slide
	            }else{
	                slider.active.index = slideIndex;
	            }
	            // onSlideBefore, onSlideNext, onSlidePrev callbacks
	            slider.settings.onSlideBefore(slider.children.eq(slider.active.index), slider.oldIndex, slider.active.index);
	            if(direction == 'next'){
	                slider.settings.onSlideNext(slider.children.eq(slider.active.index), slider.oldIndex, slider.active.index);
	            }else if(direction == 'prev'){
	                slider.settings.onSlidePrev(slider.children.eq(slider.active.index), slider.oldIndex, slider.active.index);
	            }
	            // check if last slide
	            slider.active.last = slider.active.index >= getPagerQty() - 1;
	            // update the pager with active class
	            if(slider.settings.pager) updatePagerActive(slider.active.index);
	            // // check for direction control update
	            if(slider.settings.controls) updateDirectionControls();
	            // if slider is set to mode: "fade"
	            if(slider.settings.mode == 'fade'){
	                // if adaptiveHeight is true and next height is different from current height, animate to the new height
	                if(slider.settings.adaptiveHeight && slider.viewport.height() != getViewportHeight()){
	                    slider.viewport.animate({height: getViewportHeight()}, slider.settings.adaptiveHeightSpeed);
	                }
	                // fade out the visible child and reset its z-index value
	                slider.children.filter(':visible').fadeOut(slider.settings.speed).css({zIndex: 0});
	                // fade in the newly requested slide
	                slider.children.eq(slider.active.index).css('zIndex', 51).fadeIn(slider.settings.speed, function(){
	                    $(this).css('zIndex', 50);
	                    updateAfterSlideTransition();
	                });
	            // slider mode is not "fade"
	            }else{
	                // if adaptiveHeight is true and next height is different from current height, animate to the new height
	                if(slider.settings.adaptiveHeight && slider.viewport.height() != getViewportHeight()){
	                    slider.viewport.animate({height: getViewportHeight()}, slider.settings.adaptiveHeightSpeed);
	                }
	                var moveBy = 0;
	                var position = {left: 0, top: 0};
	                // if carousel and not infinite loop
	                if(!slider.settings.infiniteLoop && slider.carousel && slider.active.last){
	                    if(slider.settings.mode == 'horizontal'){
	                        // get the last child position
	                        var lastChild = slider.children.eq(slider.children.length - 1);
	                        position = lastChild.position();
	                        // calculate the position of the last slide
	                        moveBy = slider.viewport.width() - lastChild.width();
	                    }else{
	                        // get last showing index position
	                        var lastShowingIndex = slider.children.length - slider.settings.minSlides;
	                        position = slider.children.eq(lastShowingIndex).position();
	                    }
	                    // horizontal carousel, going previous while on first slide (infiniteLoop mode)
	                }else if(slider.carousel && slider.active.last && direction == 'prev'){
	                    // get the last child position
	                    var eq = slider.settings.moveSlides == 1 ? slider.settings.maxSlides - getMoveBy() : ((getPagerQty() - 1) * getMoveBy()) - (slider.children.length - slider.settings.maxSlides);
	                    var lastChild = el.children('.bx-clone').eq(eq);
	                    position = lastChild.position();
	                // if infinite loop and "Next" is clicked on the last slide
	                }else if(direction == 'next' && slider.active.index == 0){
	                    // get the last clone position
	                    position = el.find('.bx-clone').eq(slider.settings.maxSlides).position();
	                    slider.active.last = false;
	                // normal non-zero requests
	                }else if(slideIndex >= 0){
	                    var requestEl = slideIndex * getMoveBy();
	                    position = slider.children.eq(requestEl).position();
	                }
	                // plugin values to be animated
	                var value = slider.settings.mode == 'horizontal' ? -(position.left - moveBy) : -position.top;
	                setPositionProperty(value, 'slide', slider.settings.speed);
	            }
	        }
	        
	        /**
	         * Transitions to the next slide in the show
	         */
	        el.goToNextSlide = function(){
	            // if infiniteLoop is false and last page is showing, disregard call
	            if (!slider.settings.infiniteLoop && slider.active.last) return;
	            var pagerIndex = slider.active.index + 1;
	            el.goToSlide(pagerIndex, 'next');
	        }
	        
	        /**
	         * Transitions to the prev slide in the show
	         */
	        el.goToPrevSlide = function(){
	            // if infiniteLoop is false and last page is showing, disregard call
	            if (!slider.settings.infiniteLoop && slider.active.index == 0) return;
	            var pagerIndex = slider.active.index - 1;
	            el.goToSlide(pagerIndex, 'prev');
	        }
	        
	        /**
	         * Starts the auto show
	         *
	         * @param preventControlUpdate (boolean) 
	         *  - if true, auto controls state will not be updated
	         */
	        el.startAuto = function(preventControlUpdate){
	            // if an interval already exists, disregard call
	            if(slider.interval) return;
	            // create an interval
	            slider.interval = setInterval(function(){
	                slider.settings.autoDirection == 'next' ? el.goToNextSlide() : el.goToPrevSlide();
	            }, slider.settings.pause);
	            // if auto controls are displayed and preventControlUpdate is not true
	            if (slider.settings.autoControls && preventControlUpdate != true) updateAutoControls('stop');
	        }
	        
	        /**
	         * Stops the auto show
	         *
	         * @param preventControlUpdate (boolean) 
	         *  - if true, auto controls state will not be updated
	         */
	        el.stopAuto = function(preventControlUpdate){
	            // if no interval exists, disregard call
	            if(!slider.interval) return;
	            // clear the interval
	            clearInterval(slider.interval);
	            slider.interval = null;
	            // if auto controls are displayed and preventControlUpdate is not true
	            if (slider.settings.autoControls && preventControlUpdate != true) updateAutoControls('start');
	        }
	        
	        /**
	         * Returns current slide index (zero-based)
	         */
	        el.getCurrentSlide = function(){
	            return slider.active.index;
	        }
	        
	        /**
	         * Returns number of slides in show
	         */
	        el.getSlideCount = function(){
	            return slider.children.length;
	        }
	        
	        /**
	         * Makes slideshow responsive
	         */
	        // first get the original window dimens (thanks alot IE)
	        var windowWidth = $(window).width();
	        var windowHeight = $(window).height();
	        $(window).resize(function(){
	            // get the new window dimens (again, thank you IE)
	            var windowWidthNew = $(window).width();
	            var windowHeightNew = $(window).height();
	            // make sure that it is a true window resize
	            // *we must check this because our dinosaur friend IE fires a window resize event when certain DOM elements
	            // are resized. Can you just die already?*
	            if(windowWidth != windowWidthNew || windowHeight != windowHeightNew){
	                // set the new window dimens
	                windowWidth = windowWidthNew;
	                windowHeight = windowHeightNew;
	                // resize all children in ratio to new screen size
	                slider.children.add(el.find('.bx-clone')).width(getSlideWidth());
	                // adjust the height
	                slider.viewport.css('height', getViewportHeight());
	                // if active.last was true before the screen resize, we want
	                // to keep it last no matter what screen size we end on
	                if (slider.active.last) slider.active.index = getPagerQty() - 1;
	                // if the active index (page) no longer exists due to the resize, simply set the index as last
	                if (slider.active.index >= getPagerQty()) slider.active.last = true;
	                // if a pager is being displayed and a custom pager is not being used, update it
	                if(slider.settings.pager && !slider.settings.pagerCustom){
	                    populatePager();
	                    updatePagerActive(slider.active.index);
	                }
	                // update the slide position
	                if(!slider.settings.ticker) setSlidePosition();
	            }
	        });
	        
	        init();
	        
	        // returns the current jQuery object
	        return this;
	    }
	
	})(jQuery);
	
	/*!
	 * jQuery imagesLoaded plugin v2.1.0
	 * http://github.com/desandro/imagesloaded
	 *
	 * MIT License. by Paul Irish et al.
	 */
	
	/*jshint curly: true, eqeqeq: true, noempty: true, strict: true, undef: true, browser: true */
	/*global jQuery: false */
	
	(function(c,n){var l="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";c.fn.imagesLoaded=function(f){function m(){var b=c(i),a=c(h);d&&(h.length?d.reject(e,b,a):d.resolve(e));c.isFunction(f)&&f.call(g,e,b,a)}function j(b,a){b.src===l||-1!==c.inArray(b,k)||(k.push(b),a?h.push(b):i.push(b),c.data(b,"imagesLoaded",{isBroken:a,src:b.src}),o&&d.notifyWith(c(b),[a,e,c(i),c(h)]),e.length===k.length&&(setTimeout(m),e.unbind(".imagesLoaded")))}var g=this,d=c.isFunction(c.Deferred)?c.Deferred():
	0,o=c.isFunction(d.notify),e=g.find("img").add(g.filter("img")),k=[],i=[],h=[];c.isPlainObject(f)&&c.each(f,function(b,a){if("callback"===b)f=a;else if(d)d[b](a)});e.length?e.bind("load.imagesLoaded error.imagesLoaded",function(b){j(b.target,"error"===b.type)}).each(function(b,a){var d=a.src,e=c.data(a,"imagesLoaded");if(e&&e.src===d)j(a,e.isBroken);else if(a.complete&&a.naturalWidth!==n)j(a,0===a.naturalWidth||0===a.naturalHeight);else if(a.readyState||a.complete)a.src=l,a.src=d}):m();return d?d.promise(g):
	g}})(jQuery);

/***/ }),
/* 7 */
/***/ (function(module, exports) {

	module.exports = function ($) {
	    var access = false,
	        log = function (m) {
	            if (typeof console !== 'undefined' && console.log) {
	                console.log(m);
	            }
	        },
	
	        init = function (videoContainers, opt) {
	            videoContainers.not('[data-video-id-ready]').each(function () {
	                var container = $(this).attr('data-video-id-ready', 1),
	                    imgGroup = container.find('.youtube-preview'),
	                    iframeId = container.attr('data-video-iframe-id'),
	                    anchor = imgGroup.children('a'),
	                    clickable = anchor.length > 0 ? anchor : imgGroup,
	
	                    load = function () {
	                        var mode = access == 'youku' && container.attr('data-youku-id') ? 'youku' : 'youtube',
	                            src;
	
	                        if (mode === 'youtube') {
	                            src = 'https://www.youtube.com/embed/' + container.attr('data-video-id') +
	                                '?rel=0&autoplay=1&wmode=transparent&controls=' + opt.controls +
	                                '&showinfo=' + opt.showInfo;
	                            if (opt.autoPlay) {
	                                src += '&enablejsapi=1&version=3'
	                            }
	                        } else {
	                            src = 'http://player.youku.com/embed/' + container.attr('data-youku-id');
	                            if (opt.autoPlay) {
	                                src += '&autoplay=1'
	                            }
	                        }
	
	                        log(mode);
	                        log(src);
	
	                        var iframe = $('<iframe></iframe>').attr('id', iframeId).attr('src', src).attr('frameborder', 0);
	                        if (opt.allowFullscreen) {
	                            iframe.attr('allowfullscreen', 1);
	                        }
	                        iframe.appendTo(container);
	                        if (opt.callback) {
	                            opt.callback();
	                        }
	                        if (mode === 'youtube' && opt.autoPlay && typeof YT !== 'undefined') {
	                            new YT.Player(iframeId, {
	                                events: {
	                                    'onReady': function (event) {
	                                        event.target.playVideo();
	                                        setTimeout(function () {
	                                            iframe.focus();
	                                        }, 100);
	                                    }
	                                }
	                            });
	                        }
	
	                    };
	
	                clickable.bind('click', function (e) {
	                    e.preventDefault();
	
	                    clickable.unbind().click(function (e) {
	                        e.preventDefault();
	                    });
	
	
	                    if (access === false) {
	                        var test = new Image();
	                        test.onload = function () {
	                            access = 'youtube';
	                            load();
	                        };
	                        test.onerror = function () {
	                            access = 'youku';
	                            load();
	                        };
	                        test.src = "http://youtube.com/favicon.ico";
	                    } else {
	                        load();
	                    }
	                });
	            });
	        };
	
	    $.fn.videoPreview = function (opt) {
	        init(this, $.extend({
	            autoPlay: true,
	            allowFullscreen: false,
	            controls: 2,
	            showInfo: 1
	        }, opt));
	        return this;
	    };
	};


/***/ }),
/* 8 */
/***/ (function(module, exports) {

	/*
	 * Shadowbox.js, version 3.0.3
	 * http://shadowbox-js.com/
	 *
	 * Copyright 2007-2010, Michael J. I. Jackson
	 * Date: 2011-02-24 01:23:38 +0000
	 */
	(function(window,undefined){var S={version:"3.0.3"};var ua=navigator.userAgent.toLowerCase();if(ua.indexOf("windows")>-1||ua.indexOf("win32")>-1){S.isWindows=true}else{if(ua.indexOf("macintosh")>-1||ua.indexOf("mac os x")>-1){S.isMac=true}else{if(ua.indexOf("linux")>-1){S.isLinux=true}}}S.isIE=ua.indexOf("msie")>-1;S.isIE6=ua.indexOf("msie 6")>-1;S.isIE7=ua.indexOf("msie 7")>-1;S.isGecko=ua.indexOf("gecko")>-1&&ua.indexOf("safari")==-1;S.isWebKit=ua.indexOf("applewebkit/")>-1;var inlineId=/#(.+)$/,galleryName=/^(light|shadow)box\[(.*?)\]/i,inlineParam=/\s*([a-z_]*?)\s*=\s*(.+)\s*/,fileExtension=/[0-9a-z]+$/i,scriptPath=/(.+\/)shadowbox\.js/i;var open=false,initialized=false,lastOptions={},slideDelay=0,slideStart,slideTimer;S.current=-1;S.dimensions=null;S.ease=function(state){return 1+Math.pow(state-1,3)};S.errorInfo={fla:{name:"Flash",url:"http://www.adobe.com/products/flashplayer/"},qt:{name:"QuickTime",url:"http://www.apple.com/quicktime/download/"},wmp:{name:"Windows Media Player",url:"http://www.microsoft.com/windows/windowsmedia/"},f4m:{name:"Flip4Mac",url:"http://www.flip4mac.com/wmv_download.htm"}};S.gallery=[];S.onReady=noop;S.path=null;S.player=null;S.playerId="sb-player";S.options={animate:true,animateFade:true,autoplayMovies:true,continuous:false,enableKeys:true,flashParams:{bgcolor:"#000000",allowfullscreen:true},flashVars:{},flashVersion:"9.0.115",handleOversize:"resize",handleUnsupported:"link",onChange:noop,onClose:noop,onFinish:noop,onOpen:noop,showMovieControls:true,skipSetup:false,slideshowDelay:0,viewportPadding:20};S.getCurrent=function(){return S.current>-1?S.gallery[S.current]:null};S.hasNext=function(){return S.gallery.length>1&&(S.current!=S.gallery.length-1||S.options.continuous)};S.isOpen=function(){return open};S.isPaused=function(){return slideTimer=="pause"};S.applyOptions=function(options){lastOptions=apply({},S.options);apply(S.options,options)};S.revertOptions=function(){apply(S.options,lastOptions)};S.init=function(options,callback){if(initialized){return}initialized=true;if(S.skin.options){apply(S.options,S.skin.options)}if(options){apply(S.options,options)}if(!S.path){var path,scripts=document.getElementsByTagName("script");for(var i=0,len=scripts.length;i<len;++i){path=scriptPath.exec(scripts[i].src);if(path){S.path=path[1];break}}}if(callback){S.onReady=callback}bindLoad()};S.open=function(obj){if(open){return}var gc=S.makeGallery(obj);S.gallery=gc[0];S.current=gc[1];obj=S.getCurrent();if(obj==null){return}S.applyOptions(obj.options||{});filterGallery();if(S.gallery.length){obj=S.getCurrent();if(S.options.onOpen(obj)===false){return}open=true;S.skin.onOpen(obj,load)}};S.close=function(){if(!open){return}open=false;if(S.player){S.player.remove();S.player=null}if(typeof slideTimer=="number"){clearTimeout(slideTimer);slideTimer=null}slideDelay=0;listenKeys(false);S.options.onClose(S.getCurrent());S.skin.onClose();S.revertOptions()};S.play=function(){if(!S.hasNext()){return}if(!slideDelay){slideDelay=S.options.slideshowDelay*1000}if(slideDelay){slideStart=now();slideTimer=setTimeout(function(){slideDelay=slideStart=0;S.next()},slideDelay);if(S.skin.onPlay){S.skin.onPlay()}}};S.pause=function(){if(typeof slideTimer!="number"){return}slideDelay=Math.max(0,slideDelay-(now()-slideStart));if(slideDelay){clearTimeout(slideTimer);slideTimer="pause";if(S.skin.onPause){S.skin.onPause()}}};S.change=function(index){if(!(index in S.gallery)){if(S.options.continuous){index=(index<0?S.gallery.length+index:0);if(!(index in S.gallery)){return}}else{return}}S.current=index;if(typeof slideTimer=="number"){clearTimeout(slideTimer);slideTimer=null;slideDelay=slideStart=0}S.options.onChange(S.getCurrent());load(true)};S.next=function(){S.change(S.current+1)};S.previous=function(){S.change(S.current-1)};S.setDimensions=function(height,width,maxHeight,maxWidth,topBottom,leftRight,padding,preserveAspect){var originalHeight=height,originalWidth=width;var extraHeight=2*padding+topBottom;if(height+extraHeight>maxHeight){height=maxHeight-extraHeight}var extraWidth=2*padding+leftRight;if(width+extraWidth>maxWidth){width=maxWidth-extraWidth}var changeHeight=(originalHeight-height)/originalHeight,changeWidth=(originalWidth-width)/originalWidth,oversized=(changeHeight>0||changeWidth>0);if(preserveAspect&&oversized){if(changeHeight>changeWidth){width=Math.round((originalWidth/originalHeight)*height)}else{if(changeWidth>changeHeight){height=Math.round((originalHeight/originalWidth)*width)}}}S.dimensions={height:height+topBottom,width:width+leftRight,innerHeight:height,innerWidth:width,top:Math.floor((maxHeight-(height+extraHeight))/2+padding),left:Math.floor((maxWidth-(width+extraWidth))/2+padding),oversized:oversized};return S.dimensions};S.makeGallery=function(obj){var gallery=[],current=-1;if(typeof obj=="string"){obj=[obj]}if(typeof obj.length=="number"){each(obj,function(i,o){if(o.content){gallery[i]=o}else{gallery[i]={content:o}}});current=0}else{if(obj.tagName){var cacheObj=S.getCache(obj);obj=cacheObj?cacheObj:S.makeObject(obj)}if(obj.gallery){gallery=[];var o;for(var key in S.cache){o=S.cache[key];if(o.gallery&&o.gallery==obj.gallery){if(current==-1&&o.content==obj.content){current=gallery.length}gallery.push(o)}}if(current==-1){gallery.unshift(obj);current=0}}else{gallery=[obj];current=0}}each(gallery,function(i,o){gallery[i]=apply({},o)});return[gallery,current]};S.makeObject=function(link,options){var obj={content:link.href,title:link.getAttribute("title")||"",link:link};if(options){options=apply({},options);each(["player","title","height","width","gallery"],function(i,o){if(typeof options[o]!="undefined"){obj[o]=options[o];delete options[o]}});obj.options=options}else{obj.options={}}if(!obj.player){obj.player=S.getPlayer(obj.content)}var rel=link.getAttribute("rel");if(rel){var match=rel.match(galleryName);if(match){obj.gallery=escape(match[2])}each(rel.split(";"),function(i,p){match=p.match(inlineParam);if(match){obj[match[1]]=match[2]}})}return obj};S.getPlayer=function(content){if(content.indexOf("#")>-1&&content.indexOf(document.location.href)==0){return"inline"}var q=content.indexOf("?");if(q>-1){content=content.substring(0,q)}var ext,m=content.match(fileExtension);if(m){ext=m[0].toLowerCase()}if(ext){if(S.img&&S.img.ext.indexOf(ext)>-1){return"img"}if(S.swf&&S.swf.ext.indexOf(ext)>-1){return"swf"}if(S.flv&&S.flv.ext.indexOf(ext)>-1){return"flv"}if(S.qt&&S.qt.ext.indexOf(ext)>-1){if(S.wmp&&S.wmp.ext.indexOf(ext)>-1){return"qtwmp"}else{return"qt"}}if(S.wmp&&S.wmp.ext.indexOf(ext)>-1){return"wmp"}}return"iframe"};function filterGallery(){var err=S.errorInfo,plugins=S.plugins,obj,remove,needed,m,format,replace,inlineEl,flashVersion;for(var i=0;i<S.gallery.length;++i){obj=S.gallery[i];remove=false;needed=null;switch(obj.player){case"flv":case"swf":if(!plugins.fla){needed="fla"}break;case"qt":if(!plugins.qt){needed="qt"}break;case"wmp":if(S.isMac){if(plugins.qt&&plugins.f4m){obj.player="qt"}else{needed="qtf4m"}}else{if(!plugins.wmp){needed="wmp"}}break;case"qtwmp":if(plugins.qt){obj.player="qt"}else{if(plugins.wmp){obj.player="wmp"}else{needed="qtwmp"}}break}if(needed){if(S.options.handleUnsupported=="link"){switch(needed){case"qtf4m":format="shared";replace=[err.qt.url,err.qt.name,err.f4m.url,err.f4m.name];break;case"qtwmp":format="either";replace=[err.qt.url,err.qt.name,err.wmp.url,err.wmp.name];break;default:format="single";replace=[err[needed].url,err[needed].name]}obj.player="html";obj.content='<div class="sb-message">'+sprintf(S.lang.errors[format],replace)+"</div>"}else{remove=true}}else{if(obj.player=="inline"){m=inlineId.exec(obj.content);if(m){inlineEl=get(m[1]);if(inlineEl){obj.content=inlineEl.innerHTML}else{remove=true}}else{remove=true}}else{if(obj.player=="swf"||obj.player=="flv"){flashVersion=(obj.options&&obj.options.flashVersion)||S.options.flashVersion;if(S.flash&&!S.flash.hasFlashPlayerVersion(flashVersion)){obj.width=310;obj.height=177}}}}if(remove){S.gallery.splice(i,1);if(i<S.current){--S.current}else{if(i==S.current){S.current=i>0?i-1:i}}--i}}}function listenKeys(on){if(!S.options.enableKeys){return}(on?addEvent:removeEvent)(document,"keydown",handleKey)}function handleKey(e){if(e.metaKey||e.shiftKey||e.altKey||e.ctrlKey){return}var code=keyCode(e),handler;switch(code){case 81:case 88:case 27:handler=S.close;break;case 37:handler=S.previous;break;case 39:handler=S.next;break;case 32:handler=typeof slideTimer=="number"?S.pause:S.play;break}if(handler){preventDefault(e);handler()}}function load(changing){listenKeys(false);var obj=S.getCurrent();var player=(obj.player=="inline"?"html":obj.player);if(typeof S[player]!="function"){throw"unknown player "+player}if(changing){S.player.remove();S.revertOptions();S.applyOptions(obj.options||{})}S.player=new S[player](obj,S.playerId);if(S.gallery.length>1){var next=S.gallery[S.current+1]||S.gallery[0];if(next.player=="img"){var a=new Image();a.src=next.content}var prev=S.gallery[S.current-1]||S.gallery[S.gallery.length-1];if(prev.player=="img"){var b=new Image();b.src=prev.content}}S.skin.onLoad(changing,waitReady)}function waitReady(){if(!open){return}if(typeof S.player.ready!="undefined"){var timer=setInterval(function(){if(open){if(S.player.ready){clearInterval(timer);timer=null;S.skin.onReady(show)}}else{clearInterval(timer);timer=null}},10)}else{S.skin.onReady(show)}}function show(){if(!open){return}S.player.append(S.skin.body,S.dimensions);S.skin.onShow(finish)}function finish(){if(!open){return}if(S.player.onLoad){S.player.onLoad()}S.options.onFinish(S.getCurrent());if(!S.isPaused()){S.play()}listenKeys(true)}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(obj,from){var len=this.length>>>0;from=from||0;if(from<0){from+=len}for(;from<len;++from){if(from in this&&this[from]===obj){return from}}return -1}}function now(){return(new Date).getTime()}function apply(original,extension){for(var property in extension){original[property]=extension[property]}return original}function each(obj,callback){var i=0,len=obj.length;for(var value=obj[0];i<len&&callback.call(value,i,value)!==false;value=obj[++i]){}}function sprintf(str,replace){return str.replace(/\{(\w+?)\}/g,function(match,i){return replace[i]})}function noop(){}function get(id){return document.getElementById(id)}function remove(el){el.parentNode.removeChild(el)}var supportsOpacity=true,supportsFixed=true;function checkSupport(){var body=document.body,div=document.createElement("div");supportsOpacity=typeof div.style.opacity==="string";div.style.position="fixed";div.style.margin=0;div.style.top="20px";body.appendChild(div,body.firstChild);supportsFixed=div.offsetTop==20;body.removeChild(div)}S.getStyle=(function(){var opacity=/opacity=([^)]*)/,getComputedStyle=document.defaultView&&document.defaultView.getComputedStyle;return function(el,style){var ret;if(!supportsOpacity&&style=="opacity"&&el.currentStyle){ret=opacity.test(el.currentStyle.filter||"")?(parseFloat(RegExp.$1)/100)+"":"";return ret===""?"1":ret}if(getComputedStyle){var computedStyle=getComputedStyle(el,null);if(computedStyle){ret=computedStyle[style]}if(style=="opacity"&&ret==""){ret="1"}}else{ret=el.currentStyle[style]}return ret}})();S.appendHTML=function(el,html){if(el.insertAdjacentHTML){el.insertAdjacentHTML("BeforeEnd",html)}else{if(el.lastChild){var range=el.ownerDocument.createRange();range.setStartAfter(el.lastChild);var frag=range.createContextualFragment(html);el.appendChild(frag)}else{el.innerHTML=html}}};S.getWindowSize=function(dimension){if(document.compatMode==="CSS1Compat"){return document.documentElement["client"+dimension]}return document.body["client"+dimension]};S.setOpacity=function(el,opacity){var style=el.style;if(supportsOpacity){style.opacity=(opacity==1?"":opacity)}else{style.zoom=1;if(opacity==1){if(typeof style.filter=="string"&&(/alpha/i).test(style.filter)){style.filter=style.filter.replace(/\s*[\w\.]*alpha\([^\)]*\);?/gi,"")}}else{style.filter=(style.filter||"").replace(/\s*[\w\.]*alpha\([^\)]*\)/gi,"")+" alpha(opacity="+(opacity*100)+")"}}};S.clearOpacity=function(el){S.setOpacity(el,1)};function getTarget(e){return e.target}function getPageXY(e){return[e.pageX,e.pageY]}function preventDefault(e){e.preventDefault()}function keyCode(e){return e.keyCode}function addEvent(el,type,handler){jQuery(el).bind(type,handler)}function removeEvent(el,type,handler){jQuery(el).unbind(type,handler)}jQuery.fn.shadowbox=function(options){return this.each(function(){var el=jQuery(this);var opts=jQuery.extend({},options||{},jQuery.metadata?el.metadata():jQuery.meta?el.data():{});var cls=this.className||"";opts.width=parseInt((cls.match(/w:(\d+)/)||[])[1])||opts.width;opts.height=parseInt((cls.match(/h:(\d+)/)||[])[1])||opts.height;Shadowbox.setup(el,opts)})};var loaded=false,DOMContentLoaded;if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);S.load()}}else{if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);S.load()}}}}function doScrollCheck(){if(loaded){return}try{document.documentElement.doScroll("left")}catch(e){setTimeout(doScrollCheck,1);return}S.load()}function bindLoad(){if(document.readyState==="complete"){return S.load()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",S.load,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",S.load);var topLevel=false;try{topLevel=window.frameElement===null}catch(e){}if(document.documentElement.doScroll&&topLevel){doScrollCheck()}}}}S.load=function(){if(loaded){return}if(!document.body){return setTimeout(S.load,13)}loaded=true;checkSupport();S.onReady();if(!S.options.skipSetup){S.setup()}S.skin.init()};S.plugins={};if(navigator.plugins&&navigator.plugins.length){var names=[];each(navigator.plugins,function(i,p){names.push(p.name)});names=names.join(",");var f4m=names.indexOf("Flip4Mac")>-1;S.plugins={fla:names.indexOf("Shockwave Flash")>-1,qt:names.indexOf("QuickTime")>-1,wmp:!f4m&&names.indexOf("Windows Media")>-1,f4m:f4m}}else{var detectPlugin=function(name){var axo;try{axo=new ActiveXObject(name)}catch(e){}return !!axo};S.plugins={fla:detectPlugin("ShockwaveFlash.ShockwaveFlash"),qt:detectPlugin("QuickTime.QuickTime"),wmp:detectPlugin("wmplayer.ocx"),f4m:false}}var relAttr=/^(light|shadow)box/i,expando="shadowboxCacheKey",cacheKey=1;S.cache={};S.select=function(selector){var links=[];if(!selector){var rel;each(document.getElementsByTagName("a"),function(i,el){rel=el.getAttribute("rel");if(rel&&relAttr.test(rel)){links.push(el)}})}else{var length=selector.length;if(length){if(typeof selector=="string"){if(S.find){links=S.find(selector)}}else{if(length==2&&typeof selector[0]=="string"&&selector[1].nodeType){if(S.find){links=S.find(selector[0],selector[1])}}else{for(var i=0;i<length;++i){links[i]=selector[i]}}}}else{links.push(selector)}}return links};S.setup=function(selector,options){each(S.select(selector),function(i,link){S.addCache(link,options)})};S.teardown=function(selector){each(S.select(selector),function(i,link){S.removeCache(link)})};S.addCache=function(link,options){var key=link[expando];if(key==undefined){key=cacheKey++;link[expando]=key;addEvent(link,"click",handleClick)}S.cache[key]=S.makeObject(link,options)};S.removeCache=function(link){removeEvent(link,"click",handleClick);delete S.cache[link[expando]];link[expando]=null};S.getCache=function(link){var key=link[expando];return(key in S.cache&&S.cache[key])};S.clearCache=function(){for(var key in S.cache){S.removeCache(S.cache[key].link)}S.cache={}};function handleClick(e){S.open(this);if(S.gallery.length){preventDefault(e)}}
	/*
	 * Sizzle CSS Selector Engine - v1.0
	 *  Copyright 2009, The Dojo Foundation
	 *  Released under the MIT, BSD, and GPL Licenses.
	 *  More information: http://sizzlejs.com/
	 *
	 * Modified for inclusion in Shadowbox.js
	 */
	S.find=(function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true;[0,0].sort(function(){baseHasDuplicate=false;return 0});var Sizzle=function(selector,context,results,seed){results=results||[];var origContext=context=context||document;if(context.nodeType!==1&&context.nodeType!==9){return[]}if(!selector||typeof selector!=="string"){return results}var parts=[],m,set,checkSet,extra,prune=true,contextXML=isXML(context),soFar=selector;while((chunker.exec(""),m=chunker.exec(soFar))!==null){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break}}if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context)}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift()}set=posProcess(selector,set)}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){var ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0]}if(context){var ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set)}else{prune=false}while(parts.length){var cur=parts.pop(),pop=cur;if(!Expr.relative[cur]){cur=""}else{pop=parts.pop()}if(pop==null){pop=context}Expr.relative[cur](checkSet,pop,contextXML)}}else{checkSet=parts=[]}}if(!checkSet){checkSet=set}if(!checkSet){throw"Syntax error, unrecognized expression: "+(cur||selector)}if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet)}else{if(context&&context.nodeType===1){for(var i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&contains(context,checkSet[i]))){results.push(set[i])}}}else{for(var i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i])}}}}}else{makeArray(checkSet,results)}if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results)}return results};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1)}}}}return results};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)};Sizzle.find=function(expr,context,isXML){var set,match;if(!expr){return[]}for(var i=0,l=Expr.order.length;i<l;i++){var type=Expr.order[i],match;if((match=Expr.leftMatch[type].exec(expr))){var left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(/\\/g,"");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break}}}}if(!set){set=context.getElementsByTagName("*")}return{set:set,expr:expr}};Sizzle.filter=function(expr,set,inplace,not){var old=expr,result=[],curLoop=set,match,anyFound,isXMLFilter=set&&set[0]&&isXML(set[0]);while(expr&&set.length){for(var type in Expr.filter){if((match=Expr.match[type].exec(expr))!=null){var filter=Expr.filter[type],found,item;anyFound=false;if(curLoop===result){result=[]}if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true}else{if(match===true){continue}}}if(match){for(var i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);var pass=not^!!found;if(inplace&&found!=null){if(pass){anyFound=true}else{curLoop[i]=false}}else{if(pass){result.push(item);anyFound=true}}}}}if(found!==undefined){if(!inplace){curLoop=result}expr=expr.replace(Expr.match[type],"");if(!anyFound){return[]}break}}}if(expr===old){if(anyFound==null){throw"Syntax error, unrecognized expression: "+expr}else{break}}old=expr}return curLoop};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!/\W/.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase()}for(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part}}if(isPartStrNotTag){Sizzle.filter(part,checkSet,true)}},">":function(checkSet,part){var isPartStr=typeof part==="string";if(isPartStr&&!/\W/.test(part)){part=part.toLowerCase();for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false}}}else{for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part}}if(isPartStr){Sizzle.filter(part,checkSet,true)}}},"":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){var nodeCheck=part=part.toLowerCase();checkFn=dirNodeCheck}checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){var nodeCheck=part=part.toLowerCase();checkFn=dirNodeCheck}checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?[m]:[]}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i])}}return ret.length===0?null:ret}},TAG:function(match,context){return context.getElementsByTagName(match[1])}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(/\\/g,"")+" ";if(isXML){return match}for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n]/g," ").indexOf(match)>=0)){if(!inplace){result.push(elem)}}else{if(inplace){curLoop[i]=false}}}}return false},ID:function(match){return match[1].replace(/\\/g,"")},TAG:function(match,curLoop){return match[1].toLowerCase()},CHILD:function(match){if(match[1]==="nth"){var test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0}match[0]=done++;return match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1].replace(/\\/g,"");if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name]}if(match[2]==="~="){match[4]=" "+match[4]+" "}return match},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop)}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret)}return false}}else{if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true}}return match},POS:function(match){match.unshift(true);return match}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden"},disabled:function(elem){return elem.disabled===true},checked:function(elem){return elem.checked===true},selected:function(elem){elem.parentNode.selectedIndex;return elem.selected===true},parent:function(elem){return !!elem.firstChild},empty:function(elem){return !elem.firstChild},has:function(elem,i,match){return !!Sizzle(match[3],elem).length},header:function(elem){return/h\d/i.test(elem.nodeName)},text:function(elem){return"text"===elem.type},radio:function(elem){return"radio"===elem.type},checkbox:function(elem){return"checkbox"===elem.type},file:function(elem){return"file"===elem.type},password:function(elem){return"password"===elem.type},submit:function(elem){return"submit"===elem.type},image:function(elem){return"image"===elem.type},reset:function(elem){return"reset"===elem.type},button:function(elem){return"button"===elem.type||elem.nodeName.toLowerCase()==="button"},input:function(elem){return/input|select|textarea|button/i.test(elem.nodeName)}},setFilters:{first:function(elem,i){return i===0},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2===0},odd:function(elem,i){return i%2===1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0===i},eq:function(elem,i,match){return match[3]-0===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array)}else{if(name==="contains"){return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0}else{if(name==="not"){var not=match[3];for(var i=0,l=not.length;i<l;i++){if(not[i]===elem){return false}}return true}else{throw"Syntax error, unrecognized expression: "+name}}}},CHILD:function(elem,match){var type=match[1],node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false}}if(type==="first"){return true}node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false}}return true;case"nth":var first=match[2],last=match[3];if(first===1&&last===0){return true}var doneName=match[0],parent=elem.parentNode;if(parent&&(parent.sizcache!==doneName||!elem.nodeIndex)){var count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count}}parent.sizcache=doneName}var diff=elem.nodeIndex-last;if(first===0){return diff===0}else{return(diff%first===0&&diff/first>=0)}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match},TAG:function(elem,match){return(match==="*"&&elem.nodeType===1)||elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array)}}}};var origPOS=Expr.match.POS;for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+/(?![^\[]*\])(?![^\(]*\))/.source);Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source)}var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results}return array};try{Array.prototype.slice.call(document.documentElement.childNodes,0)}catch(e){makeArray=function(array,results){var ret=results||[];if(toString.call(array)==="[object Array]"){Array.prototype.push.apply(ret,array)}else{if(typeof array.length==="number"){for(var i=0,l=array.length;i<l;i++){ret.push(array[i])}}else{for(var i=0;array[i];i++){ret.push(array[i])}}}return ret}}var sortOrder;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition){if(a==b){hasDuplicate=true}return a.compareDocumentPosition?-1:1}var ret=a.compareDocumentPosition(b)&4?-1:a===b?0:1;if(ret===0){hasDuplicate=true}return ret}}else{if("sourceIndex" in document.documentElement){sortOrder=function(a,b){if(!a.sourceIndex||!b.sourceIndex){if(a==b){hasDuplicate=true}return a.sourceIndex?-1:1}var ret=a.sourceIndex-b.sourceIndex;if(ret===0){hasDuplicate=true}return ret}}else{if(document.createRange){sortOrder=function(a,b){if(!a.ownerDocument||!b.ownerDocument){if(a==b){hasDuplicate=true}return a.ownerDocument?-1:1}var aRange=a.ownerDocument.createRange(),bRange=b.ownerDocument.createRange();aRange.setStart(a,0);aRange.setEnd(a,0);bRange.setStart(b,0);bRange.setEnd(b,0);var ret=aRange.compareBoundaryPoints(Range.START_TO_END,bRange);if(ret===0){hasDuplicate=true}return ret}}}}function getText(elems){var ret="",elem;for(var i=0;elems[i];i++){elem=elems[i];if(elem.nodeType===3||elem.nodeType===4){ret+=elem.nodeValue}else{if(elem.nodeType!==8){ret+=getText(elem.childNodes)}}}return ret}(function(){var form=document.createElement("div"),id="script"+(new Date).getTime();form.innerHTML="<a name='"+id+"'/>";var root=document.documentElement;root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match}}root.removeChild(form);root=form=null})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i])}}results=tmp}return results}}div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&div.firstChild.getAttribute("href")!=="#"){Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)}}div=null})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement("div");div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0){return}Sizzle=function(query,context,extra,seed){context=context||document;if(!seed&&context.nodeType===9&&!isXML(context)){try{return makeArray(context.querySelectorAll(query),extra)}catch(e){}}return oldSizzle(query,context,extra,seed)};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop]}div=null})()}(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return}div.lastChild.className="e";if(div.getElementsByClassName("e").length===1){return}Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML){return context.getElementsByClassName(match[1])}};div=null})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1&&!isXML){elem.sizcache=doneName;elem.sizset=i}if(elem.nodeName.toLowerCase()===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1){if(!isXML){elem.sizcache=doneName;elem.sizset=i}if(typeof cur!=="string"){if(elem===cur){match=true;break}}else{if(Sizzle.filter(cur,[elem]).length>0){match=elem;break}}}elem=elem[dir]}checkSet[i]=match}}}var contains=document.compareDocumentPosition?function(a,b){return a.compareDocumentPosition(b)&16}:function(a,b){return a!==b&&(a.contains?a.contains(b):true)};var isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};var posProcess=function(selector,context){var tmpSet=[],later="",match,root=context.nodeType?[context]:context;while((match=Expr.match.PSEUDO.exec(selector))){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,"")}selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet)}return Sizzle.filter(later,tmpSet)};return Sizzle})();
	/*
	 * SWFObject v2.1 <http://code.google.com/p/swfobject/>
	 * Copyright (c) 2007-2008 Geoff Stearns, Michael Williams, and Bobby van der Sluis
	 * This software is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
	 *
	 * Modified for inclusion in Shadowbox.js
	 */
	S.flash=(function(){var swfobject=function(){var UNDEF="undefined",OBJECT="object",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash",EXPRESS_INSTALL_ID="SWFObjectExprInst",win=window,doc=document,nav=navigator,domLoadFnArr=[],regObjArr=[],objIdArr=[],listenersArr=[],script,timer=null,storedAltContent=null,storedAltContentId=null,isDomLoaded=false,isExpressInstallActive=false;var ua=function(){var w3cdom=typeof doc.getElementById!=UNDEF&&typeof doc.getElementsByTagName!=UNDEF&&typeof doc.createElement!=UNDEF,playerVersion=[0,0,0],d=null;if(typeof nav.plugins!=UNDEF&&typeof nav.plugins[SHOCKWAVE_FLASH]==OBJECT){d=nav.plugins[SHOCKWAVE_FLASH].description;if(d&&!(typeof nav.mimeTypes!=UNDEF&&nav.mimeTypes[FLASH_MIME_TYPE]&&!nav.mimeTypes[FLASH_MIME_TYPE].enabledPlugin)){d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1");playerVersion[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10);playerVersion[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10);playerVersion[2]=/r/.test(d)?parseInt(d.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof win.ActiveXObject!=UNDEF){var a=null,fp6Crash=false;try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".7")}catch(e){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX+".6");playerVersion=[6,0,21];a.AllowScriptAccess="always"}catch(e){if(playerVersion[0]==6){fp6Crash=true}}if(!fp6Crash){try{a=new ActiveXObject(SHOCKWAVE_FLASH_AX)}catch(e){}}}if(!fp6Crash&&a){try{d=a.GetVariable("$version");if(d){d=d.split(" ")[1].split(",");playerVersion=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]}}catch(e){}}}}var u=nav.userAgent.toLowerCase(),p=nav.platform.toLowerCase(),webkit=/webkit/.test(u)?parseFloat(u.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,ie=false,windows=p?/win/.test(p):/win/.test(u),mac=p?/mac/.test(p):/mac/.test(u);
	/*@cc_on
				ie = true;
				@if (@_win32)
					windows = true;
				@elif (@_mac)
					mac = true;
				@end
			@*/
	return{w3cdom:w3cdom,pv:playerVersion,webkit:webkit,ie:ie,win:windows,mac:mac}}();var onDomLoad=function(){if(!ua.w3cdom){return}addDomLoadEvent(main);if(ua.ie&&ua.win){try{doc.write("<script id=__ie_ondomload defer=true src=//:><\/script>");script=getElementById("__ie_ondomload");if(script){addListener(script,"onreadystatechange",checkReadyState)}}catch(e){}}if(ua.webkit&&typeof doc.readyState!=UNDEF){timer=setInterval(function(){if(/loaded|complete/.test(doc.readyState)){callDomLoadFunctions()}},10)}if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("DOMContentLoaded",callDomLoadFunctions,null)}addLoadEvent(callDomLoadFunctions)}();function checkReadyState(){if(script.readyState=="complete"){script.parentNode.removeChild(script);callDomLoadFunctions()}}function callDomLoadFunctions(){if(isDomLoaded){return}if(ua.ie&&ua.win){var s=createElement("span");try{var t=doc.getElementsByTagName("body")[0].appendChild(s);t.parentNode.removeChild(t)}catch(e){return}}isDomLoaded=true;if(timer){clearInterval(timer);timer=null}var dl=domLoadFnArr.length;for(var i=0;i<dl;i++){domLoadFnArr[i]()}}function addDomLoadEvent(fn){if(isDomLoaded){fn()}else{domLoadFnArr[domLoadFnArr.length]=fn}}function addLoadEvent(fn){if(typeof win.addEventListener!=UNDEF){win.addEventListener("load",fn,false)}else{if(typeof doc.addEventListener!=UNDEF){doc.addEventListener("load",fn,false)}else{if(typeof win.attachEvent!=UNDEF){addListener(win,"onload",fn)}else{if(typeof win.onload=="function"){var fnOld=win.onload;win.onload=function(){fnOld();fn()}}else{win.onload=fn}}}}}function main(){var rl=regObjArr.length;for(var i=0;i<rl;i++){var id=regObjArr[i].id;if(ua.pv[0]>0){var obj=getElementById(id);if(obj){regObjArr[i].width=obj.getAttribute("width")?obj.getAttribute("width"):"0";regObjArr[i].height=obj.getAttribute("height")?obj.getAttribute("height"):"0";if(hasPlayerVersion(regObjArr[i].swfVersion)){if(ua.webkit&&ua.webkit<312){fixParams(obj)}setVisibility(id,true)}else{if(regObjArr[i].expressInstall&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){showExpressInstall(regObjArr[i])}else{displayAltContent(obj)}}}}else{setVisibility(id,true)}}}function fixParams(obj){var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var e=createElement("embed"),a=nestedObj.attributes;if(a){var al=a.length;for(var i=0;i<al;i++){if(a[i].nodeName=="DATA"){e.setAttribute("src",a[i].nodeValue)}else{e.setAttribute(a[i].nodeName,a[i].nodeValue)}}}var c=nestedObj.childNodes;if(c){var cl=c.length;for(var j=0;j<cl;j++){if(c[j].nodeType==1&&c[j].nodeName=="PARAM"){e.setAttribute(c[j].getAttribute("name"),c[j].getAttribute("value"))}}}obj.parentNode.replaceChild(e,obj)}}function showExpressInstall(regObj){isExpressInstallActive=true;var obj=getElementById(regObj.id);if(obj){if(regObj.altContentId){var ac=getElementById(regObj.altContentId);if(ac){storedAltContent=ac;storedAltContentId=regObj.altContentId}}else{storedAltContent=abstractAltContent(obj)}if(!(/%$/.test(regObj.width))&&parseInt(regObj.width,10)<310){regObj.width="310"}if(!(/%$/.test(regObj.height))&&parseInt(regObj.height,10)<137){regObj.height="137"}doc.title=doc.title.slice(0,47)+" - Flash Player Installation";var pt=ua.ie&&ua.win?"ActiveX":"PlugIn",dt=doc.title,fv="MMredirectURL="+win.location+"&MMplayerType="+pt+"&MMdoctitle="+dt,replaceId=regObj.id;if(ua.ie&&ua.win&&obj.readyState!=4){var newObj=createElement("div");replaceId+="SWFObjectNew";newObj.setAttribute("id",replaceId);obj.parentNode.insertBefore(newObj,obj);obj.style.display="none";var fn=function(){obj.parentNode.removeChild(obj)};addListener(win,"onload",fn)}createSWF({data:regObj.expressInstall,id:EXPRESS_INSTALL_ID,width:regObj.width,height:regObj.height},{flashvars:fv},replaceId)}}function displayAltContent(obj){if(ua.ie&&ua.win&&obj.readyState!=4){var el=createElement("div");obj.parentNode.insertBefore(el,obj);el.parentNode.replaceChild(abstractAltContent(obj),el);obj.style.display="none";var fn=function(){obj.parentNode.removeChild(obj)};addListener(win,"onload",fn)}else{obj.parentNode.replaceChild(abstractAltContent(obj),obj)}}function abstractAltContent(obj){var ac=createElement("div");if(ua.win&&ua.ie){ac.innerHTML=obj.innerHTML}else{var nestedObj=obj.getElementsByTagName(OBJECT)[0];if(nestedObj){var c=nestedObj.childNodes;if(c){var cl=c.length;for(var i=0;i<cl;i++){if(!(c[i].nodeType==1&&c[i].nodeName=="PARAM")&&!(c[i].nodeType==8)){ac.appendChild(c[i].cloneNode(true))}}}}}return ac}function createSWF(attObj,parObj,id){var r,el=getElementById(id);if(el){if(typeof attObj.id==UNDEF){attObj.id=id}if(ua.ie&&ua.win){var att="";for(var i in attObj){if(attObj[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){parObj.movie=attObj[i]}else{if(i.toLowerCase()=="styleclass"){att+=' class="'+attObj[i]+'"'}else{if(i.toLowerCase()!="classid"){att+=" "+i+'="'+attObj[i]+'"'}}}}}var par="";for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par+='<param name="'+j+'" value="'+parObj[j]+'" />'}}el.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+att+">"+par+"</object>";objIdArr[objIdArr.length]=attObj.id;r=getElementById(attObj.id)}else{if(ua.webkit&&ua.webkit<312){var e=createElement("embed");e.setAttribute("type",FLASH_MIME_TYPE);for(var k in attObj){if(attObj[k]!=Object.prototype[k]){if(k.toLowerCase()=="data"){e.setAttribute("src",attObj[k])}else{if(k.toLowerCase()=="styleclass"){e.setAttribute("class",attObj[k])}else{if(k.toLowerCase()!="classid"){e.setAttribute(k,attObj[k])}}}}}for(var l in parObj){if(parObj[l]!=Object.prototype[l]){if(l.toLowerCase()!="movie"){e.setAttribute(l,parObj[l])}}}el.parentNode.replaceChild(e,el);r=e}else{var o=createElement(OBJECT);o.setAttribute("type",FLASH_MIME_TYPE);for(var m in attObj){if(attObj[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){o.setAttribute("class",attObj[m])}else{if(m.toLowerCase()!="classid"){o.setAttribute(m,attObj[m])}}}}for(var n in parObj){if(parObj[n]!=Object.prototype[n]&&n.toLowerCase()!="movie"){createObjParam(o,n,parObj[n])}}el.parentNode.replaceChild(o,el);r=o}}}return r}function createObjParam(el,pName,pValue){var p=createElement("param");p.setAttribute("name",pName);p.setAttribute("value",pValue);el.appendChild(p)}function removeSWF(id){var obj=getElementById(id);if(obj&&(obj.nodeName=="OBJECT"||obj.nodeName=="EMBED")){if(ua.ie&&ua.win){if(obj.readyState==4){removeObjectInIE(id)}else{win.attachEvent("onload",function(){removeObjectInIE(id)})}}else{obj.parentNode.removeChild(obj)}}}function removeObjectInIE(id){var obj=getElementById(id);if(obj){for(var i in obj){if(typeof obj[i]=="function"){obj[i]=null}}obj.parentNode.removeChild(obj)}}function getElementById(id){var el=null;try{el=doc.getElementById(id)}catch(e){}return el}function createElement(el){return doc.createElement(el)}function addListener(target,eventType,fn){target.attachEvent(eventType,fn);listenersArr[listenersArr.length]=[target,eventType,fn]}function hasPlayerVersion(rv){var pv=ua.pv,v=rv.split(".");v[0]=parseInt(v[0],10);v[1]=parseInt(v[1],10)||0;v[2]=parseInt(v[2],10)||0;return(pv[0]>v[0]||(pv[0]==v[0]&&pv[1]>v[1])||(pv[0]==v[0]&&pv[1]==v[1]&&pv[2]>=v[2]))?true:false}function createCSS(sel,decl){if(ua.ie&&ua.mac){return}var h=doc.getElementsByTagName("head")[0],s=createElement("style");s.setAttribute("type","text/css");s.setAttribute("media","screen");if(!(ua.ie&&ua.win)&&typeof doc.createTextNode!=UNDEF){s.appendChild(doc.createTextNode(sel+" {"+decl+"}"))}h.appendChild(s);if(ua.ie&&ua.win&&typeof doc.styleSheets!=UNDEF&&doc.styleSheets.length>0){var ls=doc.styleSheets[doc.styleSheets.length-1];if(typeof ls.addRule==OBJECT){ls.addRule(sel,decl)}}}function setVisibility(id,isVisible){var v=isVisible?"visible":"hidden";if(isDomLoaded&&getElementById(id)){getElementById(id).style.visibility=v}else{createCSS("#"+id,"visibility:"+v)}}function urlEncodeIfNecessary(s){var regex=/[\\\"<>\.;]/;var hasBadChars=regex.exec(s)!=null;return hasBadChars?encodeURIComponent(s):s}var cleanup=function(){if(ua.ie&&ua.win){window.attachEvent("onunload",function(){var ll=listenersArr.length;for(var i=0;i<ll;i++){listenersArr[i][0].detachEvent(listenersArr[i][1],listenersArr[i][2])}var il=objIdArr.length;for(var j=0;j<il;j++){removeSWF(objIdArr[j])}for(var k in ua){ua[k]=null}ua=null;for(var l in swfobject){swfobject[l]=null}swfobject=null})}}();return{registerObject:function(objectIdStr,swfVersionStr,xiSwfUrlStr){if(!ua.w3cdom||!objectIdStr||!swfVersionStr){return}var regObj={};regObj.id=objectIdStr;regObj.swfVersion=swfVersionStr;regObj.expressInstall=xiSwfUrlStr?xiSwfUrlStr:false;regObjArr[regObjArr.length]=regObj;setVisibility(objectIdStr,false)},getObjectById:function(objectIdStr){var r=null;if(ua.w3cdom){var o=getElementById(objectIdStr);if(o){var n=o.getElementsByTagName(OBJECT)[0];if(!n||(n&&typeof o.SetVariable!=UNDEF)){r=o}else{if(typeof n.SetVariable!=UNDEF){r=n}}}}return r},embedSWF:function(swfUrlStr,replaceElemIdStr,widthStr,heightStr,swfVersionStr,xiSwfUrlStr,flashvarsObj,parObj,attObj){if(!ua.w3cdom||!swfUrlStr||!replaceElemIdStr||!widthStr||!heightStr||!swfVersionStr){return}widthStr+="";heightStr+="";if(hasPlayerVersion(swfVersionStr)){setVisibility(replaceElemIdStr,false);var att={};if(attObj&&typeof attObj===OBJECT){for(var i in attObj){if(attObj[i]!=Object.prototype[i]){att[i]=attObj[i]}}}att.data=swfUrlStr;att.width=widthStr;att.height=heightStr;var par={};if(parObj&&typeof parObj===OBJECT){for(var j in parObj){if(parObj[j]!=Object.prototype[j]){par[j]=parObj[j]}}}if(flashvarsObj&&typeof flashvarsObj===OBJECT){for(var k in flashvarsObj){if(flashvarsObj[k]!=Object.prototype[k]){if(typeof par.flashvars!=UNDEF){par.flashvars+="&"+k+"="+flashvarsObj[k]}else{par.flashvars=k+"="+flashvarsObj[k]}}}}addDomLoadEvent(function(){createSWF(att,par,replaceElemIdStr);if(att.id==replaceElemIdStr){setVisibility(replaceElemIdStr,true)}})}else{if(xiSwfUrlStr&&!isExpressInstallActive&&hasPlayerVersion("6.0.65")&&(ua.win||ua.mac)){isExpressInstallActive=true;setVisibility(replaceElemIdStr,false);addDomLoadEvent(function(){var regObj={};regObj.id=regObj.altContentId=replaceElemIdStr;regObj.width=widthStr;regObj.height=heightStr;regObj.expressInstall=xiSwfUrlStr;showExpressInstall(regObj)})}}},getFlashPlayerVersion:function(){return{major:ua.pv[0],minor:ua.pv[1],release:ua.pv[2]}},hasFlashPlayerVersion:hasPlayerVersion,createSWF:function(attObj,parObj,replaceElemIdStr){if(ua.w3cdom){return createSWF(attObj,parObj,replaceElemIdStr)}else{return undefined}},removeSWF:function(objElemIdStr){if(ua.w3cdom){removeSWF(objElemIdStr)}},createCSS:function(sel,decl){if(ua.w3cdom){createCSS(sel,decl)}},addDomLoadEvent:addDomLoadEvent,addLoadEvent:addLoadEvent,getQueryParamValue:function(param){var q=doc.location.search||doc.location.hash;if(param==null){return urlEncodeIfNecessary(q)}if(q){var pairs=q.substring(1).split("&");for(var i=0;i<pairs.length;i++){if(pairs[i].substring(0,pairs[i].indexOf("="))==param){return urlEncodeIfNecessary(pairs[i].substring((pairs[i].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(isExpressInstallActive&&storedAltContent){var obj=getElementById(EXPRESS_INSTALL_ID);if(obj){obj.parentNode.replaceChild(storedAltContent,obj);if(storedAltContentId){setVisibility(storedAltContentId,true);if(ua.ie&&ua.win){storedAltContent.style.display="block"}}storedAltContent=null;storedAltContentId=null;isExpressInstallActive=false}}}}}();return swfobject})();S.lang={code:"en",of:"of",loading:"loading",cancel:"Cancel",next:"Next",previous:"Previous",play:"Play",pause:"Pause",close:"Close",errors:{single:'You must install the <a href="{0}">{1}</a> browser plugin to view this content.',shared:'You must install both the <a href="{0}">{1}</a> and <a href="{2}">{3}</a> browser plugins to view this content.',either:'You must install either the <a href="{0}">{1}</a> or the <a href="{2}">{3}</a> browser plugin to view this content.'}};var pre,proxyId="sb-drag-proxy",dragData,dragProxy,dragTarget;function resetDrag(){dragData={x:0,y:0,startX:null,startY:null}}function updateProxy(){var dims=S.dimensions;apply(dragProxy.style,{height:dims.innerHeight+"px",width:dims.innerWidth+"px"})}function enableDrag(){resetDrag();var style=["position:absolute","cursor:"+(S.isGecko?"-moz-grab":"move"),"background-color:"+(S.isIE?"#fff;filter:alpha(opacity=0)":"transparent")].join(";");S.appendHTML(S.skin.body,'<div id="'+proxyId+'" style="'+style+'"></div>');dragProxy=get(proxyId);updateProxy();addEvent(dragProxy,"mousedown",startDrag)}function disableDrag(){if(dragProxy){removeEvent(dragProxy,"mousedown",startDrag);remove(dragProxy);dragProxy=null}dragTarget=null}function startDrag(e){preventDefault(e);var xy=getPageXY(e);dragData.startX=xy[0];dragData.startY=xy[1];dragTarget=get(S.player.id);addEvent(document,"mousemove",positionDrag);addEvent(document,"mouseup",endDrag);if(S.isGecko){dragProxy.style.cursor="-moz-grabbing"}}function positionDrag(e){var player=S.player,dims=S.dimensions,xy=getPageXY(e);var moveX=xy[0]-dragData.startX;dragData.startX+=moveX;dragData.x=Math.max(Math.min(0,dragData.x+moveX),dims.innerWidth-player.width);var moveY=xy[1]-dragData.startY;dragData.startY+=moveY;dragData.y=Math.max(Math.min(0,dragData.y+moveY),dims.innerHeight-player.height);apply(dragTarget.style,{left:dragData.x+"px",top:dragData.y+"px"})}function endDrag(){removeEvent(document,"mousemove",positionDrag);removeEvent(document,"mouseup",endDrag);if(S.isGecko){dragProxy.style.cursor="-moz-grab"}}S.img=function(obj,id){this.obj=obj;this.id=id;this.ready=false;var self=this;pre=new Image();pre.onload=function(){self.height=obj.height?parseInt(obj.height,10):pre.height;self.width=obj.width?parseInt(obj.width,10):pre.width;self.ready=true;pre.onload=null;pre=null};pre.src=obj.content};S.img.ext=["bmp","gif","jpg","jpeg","png"];S.img.prototype={append:function(body,dims){var img=document.createElement("img");img.id=this.id;img.src=this.obj.content;img.style.position="absolute";var height,width;if(dims.oversized&&S.options.handleOversize=="resize"){height=dims.innerHeight;width=dims.innerWidth}else{height=this.height;width=this.width}img.setAttribute("height",height);img.setAttribute("width",width);body.appendChild(img)},remove:function(){var el=get(this.id);if(el){remove(el)}disableDrag();if(pre){pre.onload=null;pre=null}},onLoad:function(){var dims=S.dimensions;if(dims.oversized&&S.options.handleOversize=="drag"){enableDrag()}},onWindowResize:function(){var dims=S.dimensions;switch(S.options.handleOversize){case"resize":var el=get(this.id);el.height=dims.innerHeight;el.width=dims.innerWidth;break;case"drag":if(dragTarget){var top=parseInt(S.getStyle(dragTarget,"top")),left=parseInt(S.getStyle(dragTarget,"left"));if(top+this.height<dims.innerHeight){dragTarget.style.top=dims.innerHeight-this.height+"px"}if(left+this.width<dims.innerWidth){dragTarget.style.left=dims.innerWidth-this.width+"px"}updateProxy()}break}}};S.iframe=function(obj,id){this.obj=obj;this.id=id;var overlay=get("sb-overlay");this.height=obj.height?parseInt(obj.height,10):overlay.offsetHeight;this.width=obj.width?parseInt(obj.width,10):overlay.offsetWidth};S.iframe.prototype={append:function(body,dims){var html='<iframe id="'+this.id+'" name="'+this.id+'" height="100%" width="100%" frameborder="0" marginwidth="0" marginheight="0" style="visibility:hidden" onload="this.style.visibility=\'visible\'" scrolling="auto"';if(S.isIE){html+=' allowtransparency="true"';if(S.isIE6){html+=" src=\"javascript:false;document.write('');\""}}html+="></iframe>";body.innerHTML=html},remove:function(){var el=get(this.id);if(el){remove(el);if(S.isGecko){delete window.frames[this.id]}}},onLoad:function(){var win=S.isIE?get(this.id).contentWindow:window.frames[this.id];win.location.href=this.obj.content}};S.html=function(obj,id){this.obj=obj;this.id=id;this.height=obj.height?parseInt(obj.height,10):300;this.width=obj.width?parseInt(obj.width,10):500};S.html.prototype={append:function(body,dims){var div=document.createElement("div");div.id=this.id;div.className="html";div.innerHTML=this.obj.content;body.appendChild(div)},remove:function(){var el=get(this.id);if(el){remove(el)}}};S.swf=function(obj,id){this.obj=obj;this.id=id;this.height=obj.height?parseInt(obj.height,10):300;this.width=obj.width?parseInt(obj.width,10):300};S.swf.ext=["swf"];S.swf.prototype={append:function(body,dims){var tmp=document.createElement("div");tmp.id=this.id;body.appendChild(tmp);var height=dims.innerHeight,width=dims.innerWidth,swf=this.obj.content,version=S.options.flashVersion,express=S.path+"expressInstall.swf",flashvars=S.options.flashVars,params=S.options.flashParams;S.flash.embedSWF(swf,this.id,width,height,version,express,flashvars,params)},remove:function(){S.flash.expressInstallCallback();S.flash.removeSWF(this.id)},onWindowResize:function(){var dims=S.dimensions,el=get(this.id);el.height=dims.innerHeight;el.width=dims.innerWidth}};var overlayOn=false,visibilityCache=[],pngIds=["sb-nav-close","sb-nav-next","sb-nav-play","sb-nav-pause","sb-nav-previous"],container,overlay,wrapper,doWindowResize=true;function animate(el,property,to,duration,callback){var isOpacity=(property=="opacity"),anim=isOpacity?S.setOpacity:function(el,value){el.style[property]=""+value+"px"};if(duration==0||(!isOpacity&&!S.options.animate)||(isOpacity&&!S.options.animateFade)){anim(el,to);if(callback){callback()}return}var from=parseFloat(S.getStyle(el,property))||0;var delta=to-from;if(delta==0){if(callback){callback()}return}duration*=1000;var begin=now(),ease=S.ease,end=begin+duration,time;var interval=setInterval(function(){time=now();if(time>=end){clearInterval(interval);interval=null;anim(el,to);if(callback){callback()}}else{anim(el,from+ease((time-begin)/duration)*delta)}},10)}function setSize(){container.style.height=S.getWindowSize("Height")+"px";container.style.width=S.getWindowSize("Width")+"px"}function setPosition(){container.style.top=document.documentElement.scrollTop+"px";container.style.left=document.documentElement.scrollLeft+"px"}function toggleTroubleElements(on){if(on){each(visibilityCache,function(i,el){el[0].style.visibility=el[1]||""})}else{visibilityCache=[];each(S.options.troubleElements,function(i,tag){each(document.getElementsByTagName(tag),function(j,el){visibilityCache.push([el,el.style.visibility]);el.style.visibility="hidden"})})}}function toggleNav(id,on){var el=get("sb-nav-"+id);if(el){el.style.display=on?"":"none"}}function toggleLoading(on,callback){var loading=get("sb-loading"),playerName=S.getCurrent().player,anim=(playerName=="img"||playerName=="html");if(on){S.setOpacity(loading,0);loading.style.display="block";var wrapped=function(){S.clearOpacity(loading);if(callback){callback()}};if(anim){animate(loading,"opacity",1,S.options.fadeDuration,wrapped)}else{wrapped()}}else{var wrapped=function(){loading.style.display="none";S.clearOpacity(loading);if(callback){callback()}};if(anim){animate(loading,"opacity",0,S.options.fadeDuration,wrapped)}else{wrapped()}}}function buildBars(callback){var obj=S.getCurrent();get("sb-title-inner").innerHTML=obj.title||"";var close,next,play,pause,previous;if(S.options.displayNav){close=true;var len=S.gallery.length;if(len>1){if(S.options.continuous){next=previous=true}else{next=(len-1)>S.current;previous=S.current>0}}if(S.options.slideshowDelay>0&&S.hasNext()){pause=!S.isPaused();play=!pause}}else{close=next=play=pause=previous=false}toggleNav("close",close);toggleNav("next",next);toggleNav("play",play);toggleNav("pause",pause);toggleNav("previous",previous);var counter="";if(S.options.displayCounter&&S.gallery.length>1){var len=S.gallery.length;if(S.options.counterType=="skip"){var i=0,end=len,limit=parseInt(S.options.counterLimit)||0;if(limit<len&&limit>2){var h=Math.floor(limit/2);i=S.current-h;if(i<0){i+=len}end=S.current+(limit-h);if(end>len){end-=len}}while(i!=end){if(i==len){i=0}counter+='<a onclick="Shadowbox.change('+i+');"';if(i==S.current){counter+=' class="sb-counter-current"'}counter+=">"+(++i)+"</a>"}}else{counter=[S.current+1,S.lang.of,len].join(" ")}}get("sb-counter").innerHTML=counter;callback()}function showBars(callback){var titleInner=get("sb-title-inner"),infoInner=get("sb-info-inner"),duration=0.35;titleInner.style.visibility=infoInner.style.visibility="";if(titleInner.innerHTML!=""){animate(titleInner,"marginTop",0,duration)}animate(infoInner,"marginTop",0,duration,callback)}function hideBars(anim,callback){var title=get("sb-title"),info=get("sb-info"),titleHeight=title.offsetHeight,infoHeight=info.offsetHeight,titleInner=get("sb-title-inner"),infoInner=get("sb-info-inner"),duration=(anim?0.35:0);animate(titleInner,"marginTop",titleHeight,duration);animate(infoInner,"marginTop",infoHeight*-1,duration,function(){titleInner.style.visibility=infoInner.style.visibility="hidden";callback()})}function adjustHeight(height,top,anim,callback){var wrapperInner=get("sb-wrapper-inner"),duration=(anim?S.options.resizeDuration:0);animate(wrapper,"top",top,duration);animate(wrapperInner,"height",height,duration,callback)}function adjustWidth(width,left,anim,callback){var duration=(anim?S.options.resizeDuration:0);animate(wrapper,"left",left,duration);animate(wrapper,"width",width,duration,callback)}function setDimensions(height,width){var bodyInner=get("sb-body-inner"),height=parseInt(height),width=parseInt(width),topBottom=wrapper.offsetHeight-bodyInner.offsetHeight,leftRight=wrapper.offsetWidth-bodyInner.offsetWidth,maxHeight=overlay.offsetHeight,maxWidth=overlay.offsetWidth,padding=parseInt(S.options.viewportPadding)||20,preserveAspect=(S.player&&S.options.handleOversize!="drag");return S.setDimensions(height,width,maxHeight,maxWidth,topBottom,leftRight,padding,preserveAspect)}var K={};K.markup='<div id="sb-container"><div id="sb-overlay"></div><div id="sb-wrapper"><div id="sb-title"><div id="sb-title-inner"></div></div><div id="sb-wrapper-inner"><div id="sb-body"><div id="sb-body-inner"></div><div id="sb-loading"><div id="sb-loading-inner"><span>{loading}</span></div></div></div></div><div id="sb-info"><div id="sb-info-inner"><div id="sb-counter"></div><div id="sb-nav"><a id="sb-nav-close" title="{close}" onclick="Shadowbox.close()"></a><a id="sb-nav-next" title="{next}" onclick="Shadowbox.next()"></a><a id="sb-nav-play" title="{play}" onclick="Shadowbox.play()"></a><a id="sb-nav-pause" title="{pause}" onclick="Shadowbox.pause()"></a><a id="sb-nav-previous" title="{previous}" onclick="Shadowbox.previous()"></a></div></div></div></div></div>';K.options={animSequence:"sync",counterLimit:10,counterType:"default",displayCounter:true,displayNav:true,fadeDuration:0.35,initialHeight:160,initialWidth:320,modal:false,overlayColor:"#000",overlayOpacity:0.5,resizeDuration:0.35,showOverlay:true,troubleElements:["select","object","embed","canvas"]};K.init=function(){S.appendHTML(document.body,sprintf(K.markup,S.lang));K.body=get("sb-body-inner");container=get("sb-container");overlay=get("sb-overlay");wrapper=get("sb-wrapper");if(!supportsFixed){container.style.position="absolute"}if(!supportsOpacity){var el,m,re=/url\("(.*\.png)"\)/;each(pngIds,function(i,id){el=get(id);if(el){m=S.getStyle(el,"backgroundImage").match(re);if(m){el.style.backgroundImage="none";el.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,src="+m[1]+",sizingMethod=scale);"}}})}var timer;addEvent(window,"resize",function(){if(timer){clearTimeout(timer);timer=null}if(open){timer=setTimeout(K.onWindowResize,10)}})};K.onOpen=function(obj,callback){doWindowResize=false;container.style.display="block";setSize();var dims=setDimensions(S.options.initialHeight,S.options.initialWidth);adjustHeight(dims.innerHeight,dims.top);adjustWidth(dims.width,dims.left);if(S.options.showOverlay){overlay.style.backgroundColor=S.options.overlayColor;S.setOpacity(overlay,0);if(!S.options.modal){addEvent(overlay,"click",S.close)}overlayOn=true}if(!supportsFixed){setPosition();addEvent(window,"scroll",setPosition)}toggleTroubleElements();container.style.visibility="visible";if(overlayOn){animate(overlay,"opacity",S.options.overlayOpacity,S.options.fadeDuration,callback)}else{callback()}};K.onLoad=function(changing,callback){toggleLoading(true);while(K.body.firstChild){remove(K.body.firstChild)}hideBars(changing,function(){if(!open){return}if(!changing){wrapper.style.visibility="visible"}buildBars(callback)})};K.onReady=function(callback){if(!open){return}var player=S.player,dims=setDimensions(player.height,player.width);var wrapped=function(){showBars(callback)};switch(S.options.animSequence){case"hw":adjustHeight(dims.innerHeight,dims.top,true,function(){adjustWidth(dims.width,dims.left,true,wrapped)});break;case"wh":adjustWidth(dims.width,dims.left,true,function(){adjustHeight(dims.innerHeight,dims.top,true,wrapped)});break;default:adjustWidth(dims.width,dims.left,true);adjustHeight(dims.innerHeight,dims.top,true,wrapped)}};K.onShow=function(callback){toggleLoading(false,callback);doWindowResize=true};K.onClose=function(){if(!supportsFixed){removeEvent(window,"scroll",setPosition)}removeEvent(overlay,"click",S.close);wrapper.style.visibility="hidden";var callback=function(){container.style.visibility="hidden";container.style.display="none";toggleTroubleElements(true)};if(overlayOn){animate(overlay,"opacity",0,S.options.fadeDuration,callback)}else{callback()}};K.onPlay=function(){toggleNav("play",false);toggleNav("pause",true)};K.onPause=function(){toggleNav("pause",false);toggleNav("play",true)};K.onWindowResize=function(){if(!doWindowResize){return}setSize();var player=S.player,dims=setDimensions(player.height,player.width);adjustWidth(dims.width,dims.left);adjustHeight(dims.innerHeight,dims.top);if(player.onWindowResize){player.onWindowResize()}};S.skin=K;window.Shadowbox=S})(window);

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

	var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
	 * JavaScript Cookie v2.2.0
	 * https://github.com/js-cookie/js-cookie
	 *
	 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
	 * Released under the MIT license
	 */
	;(function (factory) {
		var registeredInModuleLoader = false;
		if (true) {
			!(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
			registeredInModuleLoader = true;
		}
		if (true) {
			module.exports = factory();
			registeredInModuleLoader = true;
		}
		if (!registeredInModuleLoader) {
			var OldCookies = window.Cookies;
			var api = window.Cookies = factory();
			api.noConflict = function () {
				window.Cookies = OldCookies;
				return api;
			};
		}
	}(function () {
		function extend () {
			var i = 0;
			var result = {};
			for (; i < arguments.length; i++) {
				var attributes = arguments[ i ];
				for (var key in attributes) {
					result[key] = attributes[key];
				}
			}
			return result;
		}
	
		function init (converter) {
			function api (key, value, attributes) {
				var result;
				if (typeof document === 'undefined') {
					return;
				}
	
				// Write
	
				if (arguments.length > 1) {
					attributes = extend({
						path: '/'
					}, api.defaults, attributes);
	
					if (typeof attributes.expires === 'number') {
						var expires = new Date();
						expires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);
						attributes.expires = expires;
					}
	
					// We're using "expires" because "max-age" is not supported by IE
					attributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';
	
					try {
						result = JSON.stringify(value);
						if (/^[\{\[]/.test(result)) {
							value = result;
						}
					} catch (e) {}
	
					if (!converter.write) {
						value = encodeURIComponent(String(value))
							.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);
					} else {
						value = converter.write(value, key);
					}
	
					key = encodeURIComponent(String(key));
					key = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);
					key = key.replace(/[\(\)]/g, escape);
	
					var stringifiedAttributes = '';
	
					for (var attributeName in attributes) {
						if (!attributes[attributeName]) {
							continue;
						}
						stringifiedAttributes += '; ' + attributeName;
						if (attributes[attributeName] === true) {
							continue;
						}
						stringifiedAttributes += '=' + attributes[attributeName];
					}
					return (document.cookie = key + '=' + value + stringifiedAttributes);
				}
	
				// Read
	
				if (!key) {
					result = {};
				}
	
				// To prevent the for loop in the first place assign an empty array
				// in case there are no cookies at all. Also prevents odd result when
				// calling "get()"
				var cookies = document.cookie ? document.cookie.split('; ') : [];
				var rdecode = /(%[0-9A-Z]{2})+/g;
				var i = 0;
	
				for (; i < cookies.length; i++) {
					var parts = cookies[i].split('=');
					var cookie = parts.slice(1).join('=');
	
					if (!this.json && cookie.charAt(0) === '"') {
						cookie = cookie.slice(1, -1);
					}
	
					try {
						var name = parts[0].replace(rdecode, decodeURIComponent);
						cookie = converter.read ?
							converter.read(cookie, name) : converter(cookie, name) ||
							cookie.replace(rdecode, decodeURIComponent);
	
						if (this.json) {
							try {
								cookie = JSON.parse(cookie);
							} catch (e) {}
						}
	
						if (key === name) {
							result = cookie;
							break;
						}
	
						if (!key) {
							result[name] = cookie;
						}
					} catch (e) {}
				}
	
				return result;
			}
	
			api.set = api;
			api.get = function (key) {
				return api.call(api, key);
			};
			api.getJSON = function () {
				return api.apply({
					json: true
				}, [].slice.call(arguments));
			};
			api.defaults = {};
	
			api.remove = function (key, attributes) {
				api(key, '', extend(attributes, {
					expires: -1
				}));
			};
	
			api.withConverter = init;
	
			return api;
		}
	
		return init(function () {});
	}));


/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

	module.exports = function () {
	    var Cookies = __webpack_require__(9);
	
	    return function ($) {
	        if (!Cookies.get('cookienoticeshown')) {
	            Cookies.set('cookienoticeshown', '1', {expires: 365});
	
	            $('.cookie-notice').show();
	
	            $('.cookie-notice__dismiss button').click(function (event) {
	                event.preventDefault();
	                $('.cookie-notice').fadeOut('fast');
	            });
	        }
	    };
	}();


/***/ }),
/* 11 */
/***/ (function(module, exports) {

	module.exports = function() {
	  var $globalNavWrapper = $(".global-nav-wrapper"),
	      $globalNavElements = $globalNavWrapper.find(".global-nav__item"),
	      $searchWrapper = $(".header-search-wrapper"),
	      $searchToggler = $(".header-search-toggler"),
	      $globalNavToggler = $(".global-nav-toggler"),
	      $window = $(window),
	      compactWidth = 844,
	      $body = $("body");
	
	  return function($) {
	    $searchToggler.on("click", function(e) {
	      e.preventDefault();
	      $searchWrapper.toggleClass("header-search-wrapper--active");
	      $globalNavWrapper.removeClass("global-nav-wrapper--active");
	    });
	
	    $globalNavToggler.on("click", function(e) {
	      e.preventDefault();
	      $globalNavWrapper.toggleClass("global-nav-wrapper--active");
	      $searchWrapper.removeClass("header-search-wrapper--active");
	    });
	
	    $globalNavElements.on("click", function(e) {
	      var clickedNavItem = $(this),
	          clickedNavItemIsActive = clickedNavItem.hasClass("global-nav__item--active");
	
	      if ($window.width() > compactWidth) {
	        e.stopPropagation();
	        $globalNavElements.removeClass("global-nav__item--active");
	        if (clickedNavItemIsActive) {
	          dataLayer.push({"event": "headerClick",
	                          "headerClickDetails": {
	                            "eventCategory": "Header Click",
	                            "eventAction": this.getElementsByTagName("a")[0].href.replace(/^https:/,"http:"),
	                            "eventLabel": this.getElementsByTagName("a")[0].innerText.trim() + " (follow)"}});
	        } else {
	          e.preventDefault();
	          clickedNavItem.addClass("global-nav__item--active");
	        }
	      }
	    });
	
	    $body.click(function() {
	      $globalNavElements.removeClass("global-nav__item--active");
	    });
	  };
	}();


/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

	/**
	 * Toggle Visibility of Image Credit Component
	 */
	module.exports = function () {
	    'use strict';
	
	    var $ = __webpack_require__(1);
	
	    return function() {
	        var $credits = $(".image-credit"),
	            $creditItems = $(".credits-items"),
	            $scpCreditsTitle = $(".credits-title"),
	            creditButtonClass = ".image-credit__button",
	
	            toggleImageCredit = function(node) {
	                var state = node.attr("aria-pressed") === "true" ? "false" : "true";
	                node.attr("aria-pressed", state);
	                node.parent().attr("aria-expanded", state);
	            };
	
	        $credits.each(function () {
	            $(this).find(creditButtonClass).click(function(event) {
	                event.preventDefault();
	                toggleImageCredit($(this));
	            });
	        });
	
	        $scpCreditsTitle.on("click", function () {
	            $(this).toggleClass("credits-title--active").next(".credits-items").toggleClass("sr-only");
	        });
	    };
	
	}();


/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNDg5MjIwNTk1MjJlMDkwZWE5ODIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21haW4vY2Fzc3JtYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9tYWluL2pxdWVyeS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbWFpbi9qcXVlcnkvbGliL2pxdWVyeS0xLjEwLjIubWluLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21haW4vanF1ZXJ5L2xpYi9qcXVlcnktdWktMS4xMC4zLmN1c3RvbS5taW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21haW4vanF1ZXJ5L2xpYi9qcXVlcnkud3JhcENoaWxkcmVuLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9tYWluL2pxdWVyeS9saWIvanF1ZXJ5LmJ4c2xpZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9tYWluL2pxdWVyeS9qcXVlcnkueW91dHViZXByZXZpZXcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2xpYi9zaGFkb3dib3gvc2hhZG93Ym94LmpzIiwid2VicGFjazovLy8uL34vanMtY29va2llL3NyYy9qcy5jb29raWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21haW4vZnVuY3MvaW5pdC1jb29raWUtbm90aWNlLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9tYWluL2Z1bmNzL2luaXQtaGVhZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9tYWluL2Z1bmNzL2ltYWdlLWNyZWRpdGF0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBZTtBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtB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O0FBQ0EsMEJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBLDJCQUEwQjtBQUMxQixzQkFBcUI7QUFDckI7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7O0FBRWpCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQSxrQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVB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QzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBCQUF5QjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7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RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7O0FBRWpCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNCQUFxQjtBQUNyQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMEJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxrQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCOztBQUVqQjtBQUNBO0FBQ0Esa0JBQWlCOztBQUVqQjtBQUNBO0FBQ0Esa0JBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQSxrQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBaUQsTUFBTTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCOztBQUVqQjtBQUNBO0FBQ0Esa0JBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQSxrQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjs7QUFFakI7QUFDQTtBQUNBLGtCQUFpQjs7QUFFakI7QUFDQTtBQUNBLGtCQUFpQjs7QUFFakI7QUFDQTtBQUNBLDRCQUEyQixZQUFZO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjs7QUFFakI7QUFDQTtBQUNBLDRCQUEyQixZQUFZO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjs7QUFFakI7QUFDQTtBQUNBLDRCQUEyQixVQUFVO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjs7QUFFakI7QUFDQTtBQUNBLDRCQUEyQixjQUFjO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBOztBQUVBOztBQUVBO0FBQ0EscUJBQW9CLHVFQUF1RTtBQUMzRjtBQUNBO0FBQ0EscUJBQW9CLDRCQUE0QjtBQUNoRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBbUIsU0FBUztBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBcUI7QUFDckI7QUFDQTtBQUNBLHNGQUFxRjtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG9CQUFtQixTQUFTO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7O0FBRWpCLG9CQUFtQixTQUFTO0FBQzVCO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBK0IsU0FBUztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWlFLGlEQUFpRDtBQUNsSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRCQUEyQiwyQkFBMkI7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBbUIsU0FBUztBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0EsTUFBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7O0FB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QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7O0FBRWpCO0FBQ0E7O0FBRUEsY0FBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQixrQkFBaUI7QUFDakI7QUFDQSxNQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQixVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2IsVUFBUztBQUNUO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiLFVBQVM7O0FBRVQ7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakIsY0FBYTtBQUNiLFVBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHdCQUF1QixTQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTs7QUFFQSx3QkFBdUIsU0FBUztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYixVQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW1CLE9BQU87QUFDMUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTs7QUFFQSwrQ0FBOEM7QUFDOUM7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0EsTUFBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNEJBQTJCLFNBQVM7QUFDcEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0JBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsa0JBQWlCO0FBQ2pCOztBQUVBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUEsY0FBYTtBQUNiOztBQUVBLGNBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBLGNBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakIsd0RBQXVEO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFTLGdCQUFnQjtBQUN6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFrQjs7QUFFbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsc0RBQXFEO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUNBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEseURBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtB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Q0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpREFBZ0Q7QUFDaEQ7QUFDQTs7QUFFQTtBQUNBLFVBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQSxjQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsOENBQTZDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSwyRUFB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QUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBLDJEQUEwRDtBQUMxRCxVQUFTO0FBQ1Q7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQixVQUFTOztBQUVUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTs7QUFFQSxvQkFBbUIsR0FBRztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhOztBQUViOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7O0FBRWI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBOztBQUVB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QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBLE1BQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQjs7QUFFQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsZ0JBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsY0FBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBbUQsNEJBQTRCO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7O0FBRUEsTUFBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGtDQUFpQzs7QUFFakM7QUFDQTs7QUFFQSx3QkFBdUIsT0FBTztBQUM5QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXdDO0FBQ3hDLDhCQUE2QjtBQUM3QiwwQkFBeUI7QUFDekIsa0JBQWlCO0FBQ2pCO0FBQ0EsTUFBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTs7QUFFYixVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsY0FBYTs7QUFFYixVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBdUI7O0FBRXZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBdUI7O0FBRXZCLG9EQUFtRDtBQUNuRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLDJCQUEwQjtBQUMxQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFFQSxpQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjs7QUFFakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUF5QjtBQUN6QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7O0FBRXpCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXFDO0FBQ3JDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQXlDO0FBQ3pDO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EsMEJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCOztBQUVyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtB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QTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsaUNBQWdDLGNBQWM7QUFDOUMsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBaUU7O0FBRWpFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkNBQTRDLFNBQVM7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYixVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNkNBQTRDLFNBQVM7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlDQUFnQyxnQkFBZ0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBLE1BQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCLGVBQWU7QUFDcEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBYyxRQUFRO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCLGtCQUFrQjtBQUNuQyxtQkFBa0Isa0JBQWtCO0FBQ3BDLHNCQUFxQjtBQUNyQixNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBLHlFQUF3RTtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsZ0JBQWUsbUJBQW1CO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCOztBQUVBO0FBQ0Esb0JBQW1CLGtCQUFrQjtBQUNyQztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEwQixrQkFBa0I7O0FBRTVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQ0FBZ0Msa0JBQWtCO0FBQ2xEOztBQUVBLHVFQUFzRSxlQUFlO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0EsTUFBSzs7O0FBR0w7QUFDQSxtQkFBa0Isb0RBQW9EO0FBQ3RFOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQSxNQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBa0IsbUNBQW1DO0FBQ3JELHVCQUFzQiw2REFBNkQ7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQSxVQUFTO0FBQ1QsTUFBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsS0FBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRkFBK0MsZUFBZSxFQUFFO0FBQ2hFO0FBQ0E7O0FBRUEsRUFBQyxZOzs7Ozs7O0FDNWpURDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQ1RBO0FBQ0E7QUFDQTtBQUNBLDJEQUEwRDs7QUFFMUQsZ0JBQWUsZ0JBQWdCLHFDQUFxQyx5TkFBeU4sY0FBYyw4RUFBOEUsMENBQTBDLFNBQVMsd0JBQXdCLGFBQWEsZ0JBQWdCLDBCQUEwQixpUUFBaVEsZUFBZSxrQkFBa0IscUJBQXFCLDhDQUE4QyxXQUFXLHNCQUFzQiwwQkFBMEIsSUFBSSwyQkFBMkIscUNBQXFDLE1BQU0seUlBQXlJLCtKQUErSix5Q0FBeUMscUdBQXFHLG9FQUFvRSxvQkFBb0IscUNBQXFDLHdDQUF3QywwQkFBMEIsRUFBRSxpSUFBaUksYUFBYSxTQUFTLHFCQUFxQiw0QkFBNEIsaUNBQWlDLEVBQUUsMkJBQTJCLDRCQUE0QiwwQ0FBMEMsR0FBRyx3QkFBd0IseURBQXlELG1CQUFtQixxQkFBcUIsa0JBQWtCLHVCQUF1Qix1QkFBdUIseUNBQXlDLHNCQUFzQixzQ0FBc0MsMEJBQTBCLHlFQUF5RSxvQkFBb0IsMkJBQTJCLDhJQUE4SSxJQUFJLHlFQUF5RSxpSEFBaUgsNEJBQTRCLDBEQUEwRCw4QkFBOEIsRUFBRSwrQkFBK0Isd0VBQXdFLG1DQUFtQyxHQUFHLDBDQUEwQyxtRUFBbUUsdUZBQXVGLG1CQUFtQixrRUFBa0Usc0tBQXNLLDRCQUE0QixzR0FBc0csbUJBQW1CLEVBQUUsNEJBQTRCLDRDQUE0QyxpQkFBaUIsUUFBUSxvQkFBb0IsMEJBQTBCLHFFQUFxRSxzQkFBc0IscUJBQXFCLDZFQUE2RSxXQUFXLG9EQUFvRCx5QkFBeUIsNENBQTRDLGtEQUFrRCw2Q0FBNkMsRUFBRSxVQUFVLGVBQWUsOENBQThDLHdCQUF3QixjQUFjLGVBQWUsUUFBUSw4QkFBOEIsVUFBVSxLQUFLLDBCQUEwQixnQkFBZ0IsbUJBQW1CLHlGQUF5RixvQkFBb0IsY0FBYyxtQ0FBbUMsbUZBQW1GLGVBQWUsb0NBQW9DLDBCQUEwQixzQ0FBc0MsbUNBQW1DLHdDQUF3QyxpQkFBaUIsNENBQTRDLGVBQWUscUNBQXFDLGtCQUFrQix1Q0FBdUMsc0dBQXNHLGlCQUFpQixpQ0FBaUMsMENBQTBDLElBQUksd0RBQXdELCtDQUErQyxrQkFBa0Isa0RBQWtELGlGQUFpRiw2QkFBNkIsaURBQWlELElBQUksNEhBQTRILDJCQUEyQixPQUFPLFNBQVMsK0JBQStCLG9DQUFvQyxvQkFBb0Isc0RBQXNELHlGQUF5Rix1QkFBdUIsc1BBQXNQLHVDQUF1Qyx1QkFBdUIscUJBQXFCLGdCQUFnQix1Q0FBdUMsS0FBSyxzQkFBc0Isb0RBQW9ELHlFQUF5RSx3QkFBd0IsNkJBQTZCLHNKQUFzSiwwS0FBMEssbUJBQW1CLDhCQUE4Qix5TkFBeU4sb0dBQW9HLDhhQUE4YSxtQ0FBbUMsb0JBQW9CLHNCQUFzQixjQUFjLGlEQUFpRCxlQUFlLDZCQUE2QixzQ0FBc0MsNkJBQTZCLHNCQUFzQixhQUFhLHVCQUF1QixXQUFXLDZDQUE2QyxPQUFPLEtBQUsseURBQXlELE9BQU8sZ0NBQWdDLHlCQUF5QixNQUFNLG1DQUFtQyxZQUFZLDBCQUEwQixtUEFBbVAsbUJBQW1CLHNDQUFzQyxvQkFBb0Isc0NBQXNDLHFCQUFxQixhQUFhLGdKQUFnSixhQUFhLDJIQUEySCw2REFBNkQsK0RBQStELGdDQUFnQyxFQUFFLG9CQUFvQixpR0FBaUcsc0JBQXNCLGFBQWEscURBQXFELFdBQVcsMEJBQTBCLHdCQUF3QixpREFBaUQsdUJBQXVCLDhDQUE4Qyx3QkFBd0Isa0RBQWtELEVBQUUsd0JBQXdCLGlEQUFpRCxvQkFBb0IsOENBQThDLHNCQUFzQixrREFBa0QsRUFBRSwwQkFBMEIsMEJBQTBCLFVBQVUscUtBQXFLLDBIQUEwSCxTQUFTLDZCQUE2QixlQUFlLDBDQUEwQyx3QkFBd0IsU0FBUyxFQUFFLHFEQUFxRCxPQUFPLHlCQUF5QixXQUFXLHFLQUFxSyxpQ0FBaUMsR0FBRyxFQUFFLFVBQVUsYUFBYSxTQUFTLCtCQUErQixLQUFLLHVCQUF1QiwwQkFBMEIsZ0VBQWdFLHVCQUF1QixXQUFXLDJEQUEyRCx1QkFBdUIsNENBQTRDLG1LQUFtSyxrQkFBa0IsMEJBQTBCLG9NQUFvTSx3QkFBd0IsT0FBTyw0REFBNEQsc0lBQXNJLDZJQUE2SSxtQkFBbUIsZ1VBQWdVLHVCQUF1QixtQ0FBbUMscUJBQXFCLGdLQUFnSyx3QkFBd0IsNFZBQTRWLHNCQUFzQiw0U0FBNFMsK0JBQStCLGtJQUFrSSwyQkFBMkIsMEJBQTBCLHlCQUF5Qix3QkFBd0Isd0JBQXdCLDBCQUEwQixVQUFVLEVBQUUsVUFBVSxlQUFlLGtCQUFrQix3RkFBd0YsZ0JBQWdCLGtDQUFrQyxjQUFjLFdBQVcsdUJBQXVCLDBDQUEwQyxjQUFjLGdCQUFnQiwwQ0FBMEMsdUNBQXVDLG1CQUFtQix5QkFBeUIsMEJBQTBCLEVBQUUsK0RBQStELGNBQWMsK0lBQStJLFlBQVksMEJBQTBCLGtCQUFrQix1Q0FBdUMsV0FBVyxZQUFZLGdCQUFnQiwyQkFBMkIsV0FBVyxtQ0FBbUMsbUlBQW1JLDJCQUEyQix3TkFBd04sT0FBTyw4RUFBOEUsMkJBQTJCLHNDQUFzQyxPQUFPLHlDQUF5QyxhQUFhLDBIQUEwSCwyQkFBMkIsNENBQTRDLGFBQWEsSUFBSSxxSUFBcUksa0dBQWtHLGtDQUFrQyxtQ0FBbUMsOFFBQThRLG1OQUFtTix5TEFBeUwsNkNBQTZDLG9OQUFvTix5QkFBeUIscUNBQXFDLCtDQUErQywwS0FBMEssRUFBRSwwQkFBMEIscURBQXFELFFBQVEsaURBQWlELFVBQVUsaURBQWlELHNGQUFzRixpS0FBaUssdUJBQXVCLFFBQVEsR0FBRyxFQUFFLGdCQUFnQixLQUFLLG1CQUFtQiwwSUFBMEksK0tBQStLLG1CQUFtQiwrSUFBK0ksMktBQTJLLE9BQU8sbUJBQW1CLDhUQUE4VCwrSkFBK0osbUJBQW1CLGtVQUFrVSwwTEFBMEwsVUFBVSxnQkFBZ0IsMkZBQTJGLGdCQUFnQiwyRkFBMkYsWUFBWSx5RkFBeUYsNENBQTRDLHlFQUF5RSxnQkFBZ0IsaURBQWlELEVBQUUsMkJBQTJCLGtIQUFrSCxvQkFBb0IsNEZBQTRGLEdBQUcsVUFBVSxhQUFhLG9DQUFvQyxtREFBbUQsNFdBQTRXLG9CQUFvQixzUkFBc1IscUJBQXFCLDBHQUEwRywyQkFBMkIsbUJBQW1CLDhMQUE4TCwrREFBK0QsZ0JBQWdCLHlHQUF5Ryx5Q0FBeUMsVUFBVSx5QkFBeUIsbUJBQW1CLCtiQUErYiw2RUFBNkUsNkNBQTZDLE9BQU8sMERBQTBELG1FQUFtRSxzYUFBc2EsMEJBQTBCLHlMQUF5TCxxQkFBcUIseURBQXlELEtBQUsseUJBQXlCLG9QQUFvUCx3QkFBd0IsZ0JBQWdCLDhlQUE4ZSxzQ0FBc0MscURBQXFELHNCQUFzQix1REFBdUQsa0NBQWtDLDZGQUE2RixtQkFBbUIsZ0VBQWdFLHFCQUFxQix3QkFBd0IsbUdBQW1HLDJCQUEyQix5SkFBeUosNE1BQTRNLHFDQUFxQyx1REFBdUQsd0JBQXdCLHFUQUFxVCw2QkFBNkIsaUNBQWlDLG1WQUFtVixhQUFhLEdBQUcsNElBQTRJLCtCQUErQixrQ0FBa0MsOEJBQThCLE9BQU8sdUtBQXVLLE9BQU8sY0FBYywwQkFBMEIsY0FBYyxxTkFBcU4sb0NBQW9DLHdCQUF3QixpRUFBaUUsNEJBQTRCLHlCQUF5QixpaERBQWloRCxrQ0FBa0MscUJBQXFCLHNMQUFzTCxnREFBZ0Qsc0NBQXNDLEdBQUcsNlNBQTZTLCtCQUErQiwyTUFBMk0sZ0RBQWdELHNDQUFzQyxpOUJBQWk5QixxVUFBcVUsbUJBQW1CLCtLQUErSywwQkFBMEIsMEtBQTBLLFdBQVcsb0JBQW9CLE9BQU8sMkdBQTJHLG1EQUFtRCxvQkFBb0IsNERBQTRELElBQUksZUFBZSxFQUFFLHNEQUFzRCxpQ0FBaUMsMkNBQTJDLHlDQUF5QyxtREFBbUQsRUFBRSxvQkFBb0IsZ0RBQWdELElBQUksZUFBZSxFQUFFLDhCQUE4QixvVUFBb1UsdUJBQXVCLG1GQUFtRixFQUFFLG9CQUFvQiwwQ0FBMEMsOEJBQThCLGdCQUFnQix1T0FBdU8seVJBQXlSLDJRQUEyUSxtQkFBbUIscThCQUFxOEIsR0FBRyx3Q0FBd0MsaUJBQWlCLHVEQUF1RCxzRUFBc0UsaUJBQWlCLDJDQUEyQyw4Q0FBOEMseUNBQXlDLG9CQUFvQix5REFBeUQsMkVBQTJFLG9CQUFvQiwyQ0FBMkMsbURBQW1ELHdDQUF3QyxpQkFBaUIsbUNBQW1DLDZHQUE2RyxrQkFBa0Isb0RBQW9ELGl5Q0FBaXlDLHNDQUFzQyxpQkFBaUIsK0NBQStDLDRHQUE0RywyQkFBMkIsMENBQTBDLDRFQUE0RSxFQUFFLEVBQUUsb0JBQW9CLGlMQUFpTCw4QkFBOEIsS0FBSyxzVUFBc1UsZ0NBQWdDLDBMQUEwTCx3Q0FBd0MseUVBQXlFLGFBQWEsMEVBQTBFLHVDQUF1Qyw0RUFBNEUsYUFBYSw0TEFBNEwsYUFBYSx5RUFBeUUsd0NBQXdDLDBFQUEwRSxhQUFhLDRFQUE0RSx1Q0FBdUMsc0pBQXNKLGdDQUFnQyw4Q0FBOEMsdUNBQXVDLGlCQUFpQix1RkFBdUYsZ0ZBQWdGLEVBQUUseUVBQXlFLDBCQUEwQixrQ0FBa0Msd0NBQXdDLG9CQUFvQix5REFBeUQsc0VBQXNFLG9CQUFvQiwyQ0FBMkMsZ0RBQWdELEVBQUUsVUFBVSxhQUFhLGNBQWMseUJBQXlCLGNBQWMsNkJBQTZCLG9DQUFvQyxxREFBcUQsNlBBQTZQLG9CQUFvQixvQ0FBb0Msd0RBQXdELCtMQUErTCxvSkFBb0osZ0JBQWdCLGtLQUFrSyx3SUFBd0ksNE1BQTRNLDRCQUE0QixzREFBc0QsMEtBQTBLLHlDQUF5Qyw2QkFBNkIsMENBQTBDLHdHQUF3Ryx3S0FBd0sscUpBQXFKLEtBQUssV0FBVyxtR0FBbUcsZ0JBQWdCLDBIQUEwSCw2QkFBNkIsWUFBWSxrQkFBa0IsNmRBQTZkLDJJQUEySSx1SEFBdUgsNEdBQTRHLDZFQUE2RSx3QkFBd0Isc0ZBQXNGLHFCQUFxQixxQkFBcUIscUJBQXFCLG9CQUFvQiw0TEFBNEwsd0ZBQXdGLDJHQUEyRyxzSEFBc0gsMkJBQTJCLGFBQWEsNkZBQTZGLGdDQUFnQyx5QkFBeUIsa0VBQWtFLGtFQUFrRSx3REFBd0QsZ0NBQWdDLDBDQUEwQyx1TkFBdU4sYUFBYSx5QkFBeUIsNENBQTRDLEVBQUUsa0NBQWtDLGlDQUFpQyw0Q0FBNEMsRUFBRSxrQ0FBa0Msd0JBQXdCLGFBQWEsZ0JBQWdCLGlFQUFpRSw2QkFBNkIseUJBQXlCLDRSQUE0Uix3QkFBd0Isd0JBQXdCLGlMQUFpTCwya0JBQTJrQix3QkFBd0IsaUJBQWlCLHdDQUF3QyxzTEFBc0wsb0RBQW9ELGdOQUFnTixhQUFhLHdRQUF3USxzQ0FBc0MsNkJBQTZCLEdBQUcsMEpBQTBKLGlTQUFpUywwQkFBMEIsMkxBQTJMLDBCQUEwQiw0Q0FBNEMsME9BQTBPLDBCQUEwQixrV0FBa1csMlRBQTJULGtDQUFrQyw4Q0FBOEMsMENBQTBDLFFBQVEsNENBQTRDLEtBQUsseVJBQXlSLFdBQVcsb0VBQW9FLE9BQU8sZ0hBQWdILElBQUkseUJBQXlCLGtDQUFrQyxvR0FBb0csbURBQW1ELDhLQUE4Syw0RUFBNEUsVUFBVSxnQkFBZ0IsT0FBTyxpQ0FBaUMsaUJBQWlCLGdEQUFnRCxPQUFPLCtCQUErQixtQkFBbUIsZ0RBQWdELE9BQU8sK0JBQStCLG1CQUFtQixPQUFPLG1DQUFtQyxvQkFBb0IseUZBQXlGLG9CQUFvQix5RkFBeUYsb0JBQW9CLHlGQUF5RixvQkFBb0IsMEZBQTBGLDBCQUEwQixrRkFBa0YsV0FBVyxlQUFlLE9BQU8sMkxBQTJMLHlDQUF5QyxpQkFBaUIsNE1BQTRNLDRDQUE0Qyx3S0FBd0ssbUNBQW1DLGFBQWEsR0FBRyxHQUFHLGtFQUFrRSxPQUFPLHFLQUFxSywwQkFBMEIsOEJBQThCLDhDQUE4QyxHQUFHLDZDQUE2QyxpQkFBaUIsd0pBQXdKLGlGQUFpRixhQUFhLHNCQUFzQixhQUFhLGVBQWUsOEhBQThILHFFQUFxRSwyQkFBMkIsaUZBQWlGLHNEQUFzRCxvS0FBb0ssaURBQWlELEdBQUcsb0JBQW9CLHdIQUF3SCxhQUFhLHNCQUFzQix3akNBQXdqQyxpQkFBaUIsK01BQStNLHdFQUF3RSwyQ0FBMkMsd0VBQXdFLDJDQUEyQyxHQUFHLDRDQUE0QyxpQkFBaUIsNkRBQTZELHFCQUFxQixjQUFjLGtDQUFrQywwSEFBMEgsRUFBRSxHQUFHLDBLQUEwSyxLQUFLLEVBQUUsc0JBQXNCLHdGQUF3RiwwSEFBMEgsaUJBQWlCLHFCQUFxQiw0REFBNEQsMkdBQTJHLHVCQUF1QiwwQkFBMEIsd0JBQXdCLFdBQVcsR0FBRyx1R0FBdUcsT0FBTyxFQUFFLGlCQUFpQiw0Q0FBNEMsdUNBQXVDLGlCQUFpQix3REFBd0QsK0NBQStDLG9HQUFvRywwR0FBMEcsbUJBQW1CLG1DQUFtQyxzQkFBc0IsNERBQTRELEVBQUUsaUJBQWlCLG1DQUFtQyxnRUFBZ0Usc0NBQXNDLGtCQUFrQiwrWEFBK1gsNlVBQTZVLEVBQUUsVUFBVSxhQUFhLFlBQVksTUFBTSw2TEFBNkwsMEJBQTBCLG1CQUFtQixxR0FBcUcsa0VBQWtFLG1DQUFtQyxvQkFBb0IsbUJBQW1CLG9RQUFvUSxnQ0FBZ0MsT0FBTyxzSEFBc0gseUJBQXlCLHlCQUF5Qiw2T0FBNk8sMEJBQTBCLDhGQUE4RixxQkFBcUIsTUFBTSxrWEFBa1gsMERBQTBELDJUQUEyVCwwREFBMEQsMkRBQTJELDBCQUEwQix5WUFBeVksc0JBQXNCLDBCQUEwQiw2RUFBNkUsa0JBQWtCLGlEQUFpRCxNQUFNLGdEQUFnRCxNQUFNLGdEQUFnRCxNQUFNLDhCQUE4QixNQUFNLCtCQUErQiwyRkFBMkYsMkJBQTJCLDBFQUEwRSxvQkFBb0IsbUJBQW1CLG9hQUFvYSwyQkFBMkIsK1JBQStSLHFCQUFxQiwrSEFBK0gsNFBBQTRQLHVEQUF1RCwrSEFBK0gscUVBQXFFLG9DQUFvQyxlQUFlLDZDQUE2Qyw4Q0FBOEMsa0NBQWtDLGVBQWUsNkNBQTZDLGtLQUFrSyxrQ0FBa0Msb0RBQW9ELCtCQUErQiwyQkFBMkIsc0NBQXNDLHFFQUFxRSwrRUFBK0UsZ0RBQWdELGFBQWEsdUJBQXVCLDZCQUE2Qiw2REFBNkQsK0NBQStDLEdBQUcseUJBQXlCLGdEQUFnRCwwQkFBMEIsT0FBTyxvQkFBb0IscUNBQXFDLHFCQUFxQiwwR0FBMEcsd0JBQXdCLDhEQUE4RCwyQkFBMkIsc0hBQXNILHFEQUFxRCx3a0JBQXdrQixxQkFBcUIsaUVBQWlFLDJLQUEySyw2Q0FBNkMsa0lBQWtJLG9DQUFvQyw4QkFBOEIsNkNBQTZDLGVBQWUsa0NBQWtDLEVBQUUsMEJBQTBCLDRGQUE0Riw2QkFBNkIsc0JBQXNCLHVLQUF1Syx1Q0FBdUMscUJBQXFCLHNCQUFzQixrREFBa0QsK0hBQStILG1EQUFtRCw2QkFBNkIsaUJBQWlCLHlNQUF5TSxFQUFFLFVBQVUsYUFBYSxRQUFRLDRCQUE0QixtREFBbUQsMkRBQTJELGdEQUFnRCwrRkFBK0YsOEJBQThCLGtGQUFrRixzT0FBc08sb0JBQW9CLGlFQUFpRSxlQUFlLG1CQUFtQixrQkFBa0IsaURBQWlELE1BQU0sK0NBQStDLE1BQU0sNENBQTRDLE1BQU0sMENBQTBDLE1BQU0saUdBQWlHLE1BQU0saURBQWlELE1BQU0sMEdBQTBHLE1BQU0scUNBQXFDLHNCQUFzQixxR0FBcUcsT0FBTyxtQkFBbUIsa0JBQWtCLDRDQUE0QyxNQUFNLDBDQUEwQyxNQUFNLHVDQUF1QyxNQUFNLHVDQUF1QyxtQkFBbUIsZ0ZBQWdGLGtCQUFrQixtREFBbUQsa0JBQWtCLGtJQUFrSSwrR0FBK0csVUFBVSxxREFBcUQsc0JBQXNCLDZEQUE2RCx1QkFBdUIsRUFBRSwyQkFBMkIsb0VBQW9FLFdBQVcsMENBQTBDLHlFQUF5RSxFQUFFLEVBQUUseUJBQXlCLDZKQUE2SixxQ0FBcUMsWUFBWSwwQ0FBMEMsOEJBQThCLE9BQU8seUdBQXlHLDBCQUEwQiwwREFBMEQsK0dBQStHLG9DQUFvQyxrQ0FBa0MsT0FBTyxtRkFBbUYsOEJBQThCLG1DQUFtQywyRkFBMkYsd0JBQXdCLHlDQUF5QyxFQUFFLHFCQUFxQiw4SkFBOEosMEJBQTBCLDZKQUE2SixzQkFBc0IsNEJBQTRCLG1KQUFtSix3QkFBd0IsZUFBZSxnRkFBZ0Ysc0NBQXNDLHdGQUF3RixtQ0FBbUMsaURBQWlELEtBQUssa0JBQWtCLE9BQU8sRUFBRSxrQ0FBa0MsNEJBQTRCLG1FQUFtRSx3RUFBd0UscUJBQXFCLHNCQUFzQixnS0FBZ0sscUJBQXFCLGtHQUFrRyxPQUFPLG1CQUFtQixzQkFBc0IsaUJBQWlCLG1CQUFtQixnR0FBZ0csd0JBQXdCLHlEQUF5RCxVQUFVLGlIQUFpSCxtQkFBbUIsb0NBQW9DLG9CQUFvQix5SEFBeUgscUJBQXFCLHlEQUF5RCx1QkFBdUIsRUFBRSx3QkFBd0IsOERBQThELDBCQUEwQixnQkFBZ0IsV0FBVyw4Q0FBOEMsSUFBSSxFQUFFLHNCQUFzQixnQ0FBZ0MsNkdBQTZHLGdCQUFnQixrRUFBa0Usd0JBQXdCLHdCQUF3Qiw2RUFBNkUsMkJBQTJCLFdBQVcsdUJBQXVCLHVCQUF1QixFQUFFLCtCQUErQiw0REFBNEQsMkJBQTJCLDREQUE0RCxxQkFBcUIsOE9BQThPLG1CQUFtQix5QkFBeUIsbUJBQW1CLHNEQUFzRCx5QkFBeUIsNkZBQTZGLDhCQUE4Qix3QkFBd0IsMkJBQTJCLDRCQUE0QixzQkFBc0IsbURBQW1ELDRCQUE0QixtQ0FBbUMsR0FBRyxnREFBZ0QsU0FBUyxVQUFVLG1EQUFtRCxtR0FBbUcsd0JBQXdCLE1BQU0sdUxBQXVMLEVBQUUsVUFBVSxhQUFhLG9RQUFvUSxjQUFjLHNCQUFzQix1Q0FBdUMsSUFBSSxlQUFlLDhCQUE4Qix5SEFBeUgsaUJBQWlCLE1BQU0sc0JBQXNCLG9EQUFvRCx3Q0FBd0MsNkJBQTZCLG9CQUFvQixvVUFBb1Usb0hBQW9ILDJPQUEyTywwREFBMEQsbURBQW1ELG1DQUFtQywrQ0FBK0MsOERBQThELDJEQUEyRCw0QkFBNEIsNkNBQTZDLCtCQUErQixnRUFBZ0UsZUFBZSxzRUFBc0UsdUNBQXVDLGlEQUFpRCwrQ0FBK0MseUZBQXlGLGtDQUFrQyxxRkFBcUYsMEJBQTBCLGdGQUFnRixtQkFBbUIsMkJBQTJCLG1DQUFtQyw4REFBOEQsc0VBQXNFLHFHQUFxRyxPQUFPLGFBQWEsZ0RBQWdELHdFQUF3RSxpREFBaUQsdUlBQXVJLDBFQUEwRSx1Q0FBdUMsbUVBQW1FLGdEQUFnRCw4REFBOEQsaUNBQWlDLFVBQVUsdXBCQUF1cEIsbUJBQW1CLDBCQUEwQixxQkFBcUIsa1FBQWtRLDBCQUEwQix1SkFBdUosb0JBQW9CLGdIQUFnSCxnSEFBZ0gsNkxBQTZMLGtOQUFrTix5QkFBeUIsaUdBQWlHLGdOQUFnTiwyZEFBMmQsMkJBQTJCLDBCQUEwQix3SUFBd0ksb0JBQW9CLHNDQUFzQyxrQkFBa0IsZUFBZSwwQkFBMEIsbUVBQW1FLG9CQUFvQiw0Q0FBNEMsZ0pBQWdKLG1DQUFtQywrTUFBK00scUJBQXFCLHFFQUFxRSxtQ0FBbUMseUVBQXlFLEVBQUUsVUFBVSxlQUFlLGFBQWEsMGhCQUEwaEIscWpCQUFxakIsaUJBQWlCLCtDQUErQyxta0JBQW1rQix1TEFBdUwsY0FBYyx1RkFBdUYsMENBQTBDLDRPQUE0TyxvQ0FBb0MsK1hBQStYLEVBQUUsZ0JBQWdCLGNBQWMsdUNBQXVDLFNBQVMsZUFBZSxZQUFZLGtCQUFrQixFQUFFLHFCQUFxQixzQkFBc0IsdUVBQXVFLGtCQUFrQix5QkFBeUIsNkJBQTZCLE9BQU8saUNBQWlDLFVBQVUsMElBQTBJLE1BQU0sMEVBQTBFLHdCQUF3QixxREFBcUQsT0FBTywyT0FBMk8sa0NBQWtDLFdBQVcsb1JBQW9SLDRCQUE0Qiw2REFBNkQsc2NBQXNjLG9CQUFvQiw2RkFBNkYsb0JBQW9CLGtFQUFrRSxnUkFBZ1IsR0FBRyx1QkFBdUIsdUNBQXVDLCtEQUErRCxnQ0FBZ0MsZ0JBQWdCLFdBQVcsdUNBQXVDLFNBQVMsZ05BQWdOLGlDQUFpQyxXQUFXLGlSQUFpUix1Q0FBdUMsaUNBQWlDLHNIQUFzSCxhQUFhLFlBQVkseUpBQXlKLHFEQUFxRCxzb0JBQXNvQixnQ0FBZ0MsMkJBQTJCLHNYQUFzWCwrQkFBK0IsNkJBQTZCLG9JQUFvSSxpQkFBaUIsMkJBQTJCLHdCQUF3QixnUUFBZ1Esb0JBQW9CLEdBQUcsZ0NBQWdDLDZCQUE2QixvSUFBb0ksaUJBQWlCLDJCQUEyQiwrQkFBK0IsNlBBQTZQLG9CQUFvQix1REFBdUQsbUNBQW1DLGVBQWUsWUFBWSw4QkFBOEIsNENBQTRDLFNBQVMsc0JBQXNCLElBQUksbUJBQW1CLFNBQVMsa0RBQWtELG1DQUFtQywrQkFBK0IsMEVBQTBFLGdEQUFnRCx5Q0FBeUMsMEJBQTBCLHloQkFBeWhCLG1DQUFtQyw4QkFBOEIsZ0NBQWdDLHVCQUF1Qiw2QkFBNkIsa0NBQWtDLHVCQUF1QiwyRUFBMkUsa0NBQWtDLHVCQUF1Qix5RUFBeUUsd0JBQXdCLG9GQUFvRixvRUFBb0UsMkNBQTJDLE1BQU0sOFRBQThULHVDQUF1QyxNQUFNLGtJQUFrSSxNQUFNLGtJQUFrSSxNQUFNLHlGQUF5RixNQUFNLHlGQUF5RixNQUFNLHVQQUF1UCxNQUFNLGlHQUFpRyxNQUFNLHVQQUF1UCxNQUFNLGdHQUFnRyxNQUFNLGFBQWEsdUVBQXVFLDRDQUE0Qyx5QkFBeUIsMENBQTBDLGdPQUFnTyxzQkFBc0Isd0NBQXdDLGlDQUFpQyxrT0FBa08sVUFBVSxTQUFTLDZCQUE2Qix5SkFBeUosa0JBQWtCLG1SQUFtUixtUkFBbVIsK0NBQStDLEtBQUssbURBQW1ELHFEQUFxRCxrREFBa0Qsb0ZBQW9GLHdIQUF3SCxtVkFBbVYsK0JBQStCLCtJQUErSSwrQ0FBK0Msa2VBQWtlLDBIQUEwSCxLQUFLLCtCQUErQix3RkFBd0YsOEJBQThCLGtRQUFrUSwwU0FBMFMsc0JBQXNCLG9EQUFvRCxpRUFBaUUsd0NBQXdDLHNDQUFzQyw2QkFBNkIsNEJBQTRCLG1IQUFtSCw0QkFBNEIsNldBQTZXLDBDQUEwQyw4RUFBOEUseUJBQXlCLHlFQUF5RSxpQ0FBaUMsMEJBQTBCLGdEQUFnRCxtV0FBbVcsNkJBQTZCLGlDQUFpQyxzSUFBc0ksd0JBQXdCLG1DQUFtQyw2VEFBNlQsa0NBQWtDLGlDQUFpQyxrS0FBa0ssOEJBQThCLGFBQWEsK1JBQStSLHdCQUF3QixXQUFXLHVCQUF1QiwyQkFBMkIsbUNBQW1DLGdWQUFnViw4QkFBOEIsb0NBQW9DLGtKQUFrSixlQUFlLEdBQUcsd0JBQXdCLGlCQUFpQixvQkFBb0IseUJBQXlCLDhCQUE4QixpSUFBaUksMkJBQTJCLDZDQUE2QyxxREFBcUQsK1lBQStZLHNDQUFzQyxnQkFBZ0IsZUFBZSwyRUFBMkUsUUFBUSw2QkFBNkIsMkNBQTJDLHdDQUF3QyxtQkFBbUIsd0NBQXdDLGNBQWMscUJBQXFCLGlDQUFpQyxFQUFFLDBCQUEwQixXQUFXLHNGQUFzRixvQkFBb0IsbUNBQW1DLGNBQWMsc0VBQXNFLEtBQUssUUFBUSxXQUFXLDRDQUE0Qyx5QkFBeUIsaUJBQWlCLE1BQU0sbUJBQW1CLE1BQU0saUJBQWlCLE1BQU0saUJBQWlCLE1BQU0scUJBQXFCLE1BQU0saUJBQWlCLE1BQU0sNEVBQTRFLE1BQU0sb0dBQW9HLE1BQU0sd0JBQXdCLE1BQU0sWUFBWSxrR0FBa0csdUlBQXVJLEVBQUUsNENBQTRDLFNBQVMsZ0lBQWdJLFNBQVMsd1VBQXdVLGVBQWUsNE9BQTRPLHNDQUFzQyxnQkFBZ0IsbUJBQW1CLFdBQVcsYUFBYSxXQUFXLFNBQVMsU0FBUyxxQkFBcUIsc0JBQXNCLFdBQVcsYUFBYSxXQUFXLHVEQUF1RCx5QkFBeUIsZ0NBQWdDLE1BQU0saUNBQWlDLE1BQU0sNklBQTZJLE1BQU0sbUNBQW1DLE1BQU0sbUNBQW1DLE1BQU0sOEVBQThFLE1BQU0sdUJBQXVCLE1BQU0sNkNBQTZDLE1BQU0sMkJBQTJCLE1BQU0sdUJBQXVCLFNBQVMsNEJBQTRCLDhCQUE4QixzQ0FBc0MsaUJBQWlCLFFBQVEsV0FBVyx1REFBdUQseUJBQXlCLGdEQUFnRCxNQUFNLDRCQUE0QiwyQkFBMkIsTUFBTSx1QkFBdUIsU0FBUyxvQkFBb0IseURBQXlELGlDQUFpQyw4QkFBOEIsZ0lBQWdJLElBQUksMkJBQTJCLFNBQVMsU0FBUyxxT0FBcU8sNkJBQTZCLDBGQUEwRixnQ0FBZ0Msa0JBQWtCLGVBQWUsa0NBQWtDLGVBQWUsSUFBSSxvR0FBb0csVUFBVSxvTEFBb0wsRUFBRSxFQUFFLGtCQUFrQixxQ0FBcUMsTUFBTSx1Q0FBdUMsTUFBTSxxRkFBcUYsTUFBTSxxRkFBcUYsWUFBWSx1QkFBdUIsc0dBQXNHLDJJQUEySSxtQ0FBbUMsK0RBQStELDBCQUEwQix3R0FBd0csZ1NBQWdTLHNCQUFzQix1SUFBdUksU0FBUyw2QkFBNkIsaUVBQWlFLDhDQUE4QyxPQUFPLGdCQUFnQixtQ0FBbUMsaUJBQWlCLG1DQUFtQyxpQkFBaUIsK0JBQStCLGtCQUFrQiwyQkFBMkIsc0JBQXNCLDJHQUEyRyx3QkFBd0Isb0RBQW9ELHVCQUF1QixzREFBc0QsbUZBQW1GLEVBQUUsMkJBQTJCLDhtQkFBOG1CLHFJQUFxSSwrQ0FBK0Msc0JBQXNCLHM2REFBczZELE9BQU8sS0FBSyw0QkFBNEIsT0FBTyxLQUFLLHlGQUF5Rix5REFBeUQsMEVBQTBFLE1BQU0sOEVBQThFLE1BQU0sOENBQThDLFFBQVEsdVdBQXVXLElBQUksNkhBQTZILHVUQUF1VCxJQUFJLEtBQUssdUdBQXVHLElBQUksc2tCQUFza0IsOElBQThJLG1VQUFtVSxhQUFhLHNJQUFzSSxLQUFLLDZCQUE2QixvREFBb0QsNEpBQTRKLGdFQUFnRSxLQUFLLG1KQUFtSixLQUFLLHNJQUFzSSxlQUFlLGdDQUFnQyw0RkFBNEYsS0FBSyxtRkFBbUY7QUFDcG4yRyxxQkFBb0IsME1BQTBNLEtBQUssNkZBQTZGLHlEQUF5RCwrREFBK0Qsa0JBQWtCLGlDQUFpQyxtTUFBbU0sdUpBQXVKLCtCQUErQiwrRUFBK0Usa0JBQWtCLDJCQUEyQix1Q0FBdUMseUVBQXlFLGdDQUFnQyxvQ0FBb0MsZ0RBQWdELDhCQUE4Qix5REFBeUQsK0JBQStCLGlFQUFpRSxtQ0FBbUMsZ0NBQWdDLG1DQUFtQyxpR0FBaUcsK0ZBQStGLDBCQUEwQiwrR0FBK0csNlFBQTZRLDhCQUE4QixxQ0FBcUMsMkVBQTJFLG1MQUFtTCwrQkFBK0IsNEZBQTRGLHlKQUF5Siw4RUFBOEUsOEJBQThCLDRCQUE0QixnTUFBZ00sOENBQThDLHdPQUF3TyxnSUFBZ0ksMkVBQTJFLHFIQUFxSCxVQUFVLGFBQWEsT0FBTyxnRkFBZ0YsSUFBSSxtREFBbUQsc0JBQXNCLDBCQUEwQix5TUFBeU0sb0VBQW9FLGtDQUFrQyxpQ0FBaUMsa0xBQWtMLG9CQUFvQixrQkFBa0IsZ01BQWdNLHdCQUF3Qix3RkFBd0YsMmFBQTJhLGtCQUFrQixtQ0FBbUMsc0JBQXNCLDRCQUE0QiwwRUFBMEUscUJBQXFCLDhCQUE4QixvV0FBb1csbUJBQW1CLHFCQUFxQixnREFBZ0QsV0FBVywyT0FBMk8sc0JBQXNCLEdBQUcsbUJBQW1CLG9CQUFvQixzQkFBc0Isa0JBQWtCLDBCQUEwQiw2RUFBNkUseUNBQXlDLGlCQUFpQixXQUFXLDJRQUEyUSx1Q0FBdUMsbUNBQW1DLDJCQUEyQix1Q0FBdUMsOE1BQThNLHdCQUF3QixhQUFhLDRGQUE0Rix5QkFBeUIsK0NBQStDLDJCQUEyQix5SUFBeUksMEJBQTBCLHFEQUFxRCxvQkFBb0IscUpBQXFKLGlDQUFpQywrRUFBK0UscUxBQXFMLHVCQUF1QiwyQ0FBMkMsc0VBQXNFLHNEQUFzRCxFQUFFLDRCQUE0QixNQUFNLDJLQUEySyxzQkFBc0IseUVBQXlFLDREQUE0RCxvQ0FBb0MsNkJBQTZCLFNBQVMsNEdBQTRHLGtCQUFrQixrQ0FBa0MsMkhBQTJILCtCQUErQixFQUFFLG9CQUFvQixrQ0FBa0MsOEJBQThCLDhCQUE4Qiw2TkFBNk4sMkJBQTJCLGtDQUFrQyxnTUFBZ00sUUFBUSxtQkFBbUIsZUFBZSxlQUFlLGNBQWMsaUNBQWlDLGdDQUFnQyxJQUFJLDhCQUE4Qiw2RkFBNkYseUdBQXlHLDJCQUEyQixjQUFjLE9BQU8scUNBQXFDLDBCQUEwQix5QkFBeUIsK0hBQStILHVGQUF1RixvQkFBb0IsMEJBQTBCLG9CQUFvQix1TEFBdUwsRUFBRSwyQkFBMkIsY0FBYyxPQUFPLGlHQUFpRyxxSEFBcUgseUJBQXlCLG1NQUFtTSx5RkFBeUYsc0JBQXNCLDRCQUE0QixvQkFBb0IsZ0pBQWdKLG9CQUFvQix1QkFBdUIsbUJBQW1CLG1FQUFtRSxzQkFBc0IsbUNBQW1DLDhGQUE4Rix5QkFBeUIscUJBQXFCLHVCQUF1QixrREFBa0Qsa0hBQWtILDBCQUEwQix3QkFBd0IsMlBBQTJQLFdBQVcsa1lBQWtZLGtCQUFrQix5QkFBeUIseUJBQXlCLG1EQUFtRCxnRUFBZ0UsNEJBQTRCLGdKQUFnSixzQ0FBc0MsdUpBQXVKLHlCQUF5Qiw4REFBOEQsY0FBYyx1QkFBdUIsZ0VBQWdFLDZDQUE2QyxFQUFFLDJCQUEyQix5RUFBeUUsK0JBQStCLGtHQUFrRywyQkFBMkIsdUJBQXVCLGlDQUFpQyxxREFBcUQsOEVBQThFLHNIQUFzSCxFQUFFLG1IQUFtSCx1QkFBdUIsa0NBQWtDLDRCQUE0QixpTEFBaUwsd0ZBQXdGLHFCQUFxQiwyQ0FBMkMsd0pBQXdKLGlDQUFpQyxLQUFLLDhFQUE4RSxlQUFlLCtMQUErTCxFQUFFLFVBQVUsYUFBYSxvQkFBb0IsMERBQTBELE9BQU8sNEJBQTRCLHNCQUFzQiw2QkFBNkIsOENBQThDLG9CQUFvQixrTkFBa04sa0NBQWtDLHVEQUF1RCwwQ0FBMEMsaUhBQWlILDBDQUEwQyxtQkFBbUIsNENBQTRDLG1CQUFtQiwwQ0FBMEMsMkNBQTJDLHdSQUF3Uix3Q0FBd0MseUJBQXlCLHlGQUF5RixrRkFBa0YsZ0VBQWdFLG1CQUFtQixrQkFBa0IsdUJBQXVCLGdGQUFnRixFQUFFLG9CQUFvQix5Q0FBeUMsa0JBQWtCLGtGQUFrRixFQUFFLHFCQUFxQix1bUJBQXVtQixjQUFjLDRDQUE0Qyx5RkFBeUYsc0JBQXNCLGNBQWMsMkJBQTJCLDRCQUE0QixtQkFBbUIsa0JBQWtCLCtDQUErQyxNQUFNLDZDQUE2QyxNQUFNLHFEQUFxRCxNQUFNLGtEQUFrRCxNQUFNLHNDQUFzQyxNQUFNLG9DQUFvQyxNQUFNLHdDQUF3QyxNQUFNLDJGQUEyRixNQUFNLGtFQUFrRSxNQUFNLDBDQUEwQyxNQUFNLGtOQUFrTiw0Q0FBNEMsZ05BQWdOLDRDQUE0Qyx1R0FBdUcsMkJBQTJCLDhEQUE4RCxzQkFBc0IsdUJBQXVCLDZIQUE2SCxvQkFBb0IsMkVBQTJFLHNHQUFzRyxvRUFBb0Usa0JBQWtCLCtHQUErRyxpRkFBaUYsK0tBQStLLGtDQUFrQyxvREFBb0QsY0FBYyxzRkFBc0Ysc0lBQXNJLHNCQUFzQixPQUFPLGlDQUFpQyxvQkFBb0IsMEJBQTBCLDZIQUE2SCxxQkFBcUIsUUFBUSxxWEFBcVgsY0FBYyxpSkFBaUosT0FBTyxFQUFFLDZCQUE2QixnQkFBZ0IsOFVBQThVLG9CQUFvQiwySUFBMkksaUJBQWlCLEdBQUcsMkJBQTJCLDRGQUE0Riw0QkFBNEIsY0FBYyxtQkFBbUIsZ0JBQWdCLGVBQWUsd0JBQXdCLGdNQUFnTSwyQkFBMkIsMkRBQTJELDJFQUEyRSx5RUFBeUUsYUFBYSxvQkFBb0IsdU1BQXVNLHNCQUFzQiw4RUFBOEUsNkNBQTZDLG9CQUFvQix1RkFBdUYsNERBQTRELGdCQUFnQixHQUFHLGtCQUFrQiw2QkFBNkIsc0JBQXNCLDRCQUE0Qix3QkFBd0IsaUVBQWlFLHVCQUF1QixpRUFBaUUsdUJBQXVCLE1BQU0sdVBBQXVQLHNCQUFzQixVQUFVLG1LQUFtSyxzQ0FBc0MsOElBQThJLDBCQUEwQixVQUFVLG9LQUFvSyxzQ0FBc0Msd0hBQXdILHVCQUF1QixvRUFBb0Usb0JBQW9CLDhEQUE4RCxPQUFPLGtCQUFrQix3RkFBd0YsRUFBRSxVQUFVLGVBQWUsYUFBYSxVQUFVLGNBQWMsbUhBQW1ILGlCQUFpQixvQkFBb0Isb0NBQW9DLCtJQUErSSxvQkFBb0IsMEJBQTBCLHFOQUFxTixxREFBcUQsb0VBQW9FLDREQUE0RCw0S0FBNEssdUJBQXVCLDZKQUE2SiwyQkFBMkIsa0ZBQWtGLGtEQUFrRCxpREFBaUQsNk5BQTZOLGdDQUFnQyxPQUFPLGdGQUFnRix5QkFBeUIsZ0ZBQWdGLDRCQUE0QixrQkFBa0IsbURBQW1ELE1BQU0scURBQXFELE1BQU0sOENBQThDLE1BQU0sMkJBQTJCLE1BQU0sb0dBQW9HLCtIQUErSCxlQUFlLDJNQUEyTSx3QkFBd0IsZUFBZSwyQkFBMkIseUdBQXlHLDRCQUE0QixxT0FBcU8sNEJBQTRCLGFBQWEsK0JBQStCLDZCQUE2QiwwQ0FBMEMsYUFBYSxTQUFTLDZCQUE2QiwwREFBMEQsMEJBQTBCLDZTQUE2UyxvQkFBb0IsK0NBQStDLCtCQUErQixxQ0FBcUMsYUFBYSxFQUFFLGdCQUFnQixvQkFBb0IsNERBQTRELDREQUE0RCxrQkFBa0IsNlVBQTZVLHFCQUFxQixtS0FBbUssb0NBQW9DLGtFQUFrRSw2Q0FBNkMsbUZBQW1GLGtDQUFrQyxpREFBaUQsNkNBQTZDLHNDQUFzQyx5QkFBeUIsV0FBVyxnUEFBZ1AsdUJBQXVCLHdDQUF3QyxzQkFBc0IsbUNBQW1DLGdDQUFnQyxrREFBa0Qsc0ZBQXNGLDRSQUE0UixtREFBbUQsOEJBQThCLG1HQUFtRyxxQkFBcUIsd0NBQXdDLDBCQUEwQix1SEFBdUgsNEJBQTRCLHFFQUFxRSxjQUFjLGVBQWUsa0tBQWtLLHdCQUF3QiwwQkFBMEIsT0FBTyxrQkFBa0IscUJBQXFCLHFDQUFxQyxxQkFBcUIsdUdBQXVHLHNCQUFzQix3QkFBd0Isd0JBQXdCLHdEQUF3RCwrQkFBK0IsOEJBQThCLCtIQUErSCxrQ0FBa0Msb0RBQW9ELDJEQUEyRCwyQkFBMkIsOEJBQThCLHFFQUFxRSx1RUFBdUUsMENBQTBDLGFBQWEsMkJBQTJCLG1MQUFtTCwrQ0FBK0MsNFhBQTRYLHVCQUF1QixhQUFhLHdDQUF3QyxhQUFhLHNJQUFzSSxxQ0FBcUMsc0ZBQXNGLHlFQUF5RSw4RkFBOEYsNkNBQTZDLCtIQUErSCxvQ0FBb0MsOEJBQThCLDZDQUE2QyxpQkFBaUIsa0NBQWtDLEVBQUUsdUJBQXVCLDRCQUE0QixxR0FBcUcsK0NBQStDLEdBQUcseUJBQXlCLGtDQUFrQyx1QkFBdUIsMkZBQTJGLHFCQUFxQiwyWUFBMlksa1pBQWtaLDRCQUE0QixnREFBZ0QsOEZBQThGLHdGQUF3RixvQkFBb0IsNEJBQTRCLDRFQUE0RSxvQkFBb0IsZ0NBQWdDLG9CQUFvQiwyQkFBMkIscUJBQXFCLDRCQUE0QixXQUFXLGNBQWMsS0FBSyxrREFBa0QseUNBQXlDLHdCQUF3QixvQkFBb0Isb0JBQW9CLHNGQUFzRixlQUFlLHdMQUF3TCxzQkFBc0IsaUNBQWlDLElBQUkseUJBQXlCLHNCQUFzQixxSEFBcUgsSUFBSSxJQUFJLCtCQUErQixXQUFXLE9BQU8sNENBQTRDLDJDQUEyQyx1QkFBdUIsT0FBTyw2QkFBNkIsaUNBQWlDLHlEQUF5RCxFQUFFOzs7Ozs7O0FDTmhsbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEwQiw4Q0FBOEMsU0FBUztBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYixVQUFTO0FBQ1Q7QUFDQSxFQUFDOzs7Ozs7O0FDekJEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxFQUFDOztBQUVEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9DQUFtQztBQUNuQyxxQ0FBb0M7QUFDcEMsb0NBQW1DO0FBQ25DLG1DQUFrQztBQUNsQztBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxrQ0FBaUMsMEJBQTBCO0FBQzNEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0EscUVBQW9FLDZCQUE2QjtBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQStCLG9DQUFvQztBQUNuRTtBQUNBO0FBQ0E7QUFDQSwwQkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBcUI7QUFDckIsa0JBQWlCO0FBQ2pCO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBcUI7QUFDckI7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXFCO0FBQ3JCLGtCQUFpQjtBQUNqQjtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBd0IsY0FBYztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBLDREQUEyRCxrREFBa0Q7QUFDN0csK0RBQThELGlEQUFpRDtBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JB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QTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQSw2R0FBNEc7QUFDNUcsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSzs7QUFFTDtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsRUFBQzs7Ozs7OztBQy9DRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYixVQUFTOztBQUVUO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7O0FBRUEsRUFBQyIsImZpbGUiOiJjYXNzcm1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA0ODkyMjA1OTUyMmUwOTBlYTk4MiIsIi8qKlxuICogVGhlIG1haW4gQ0FTUyB3cmFwcGVyIG9iamVjdFxuICogQGF1dGhvciBDaXR5IFdlYiBUZWFtXG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG52YXIgJCA9IHJlcXVpcmUoXCIuL2pxdWVyeVwiKSxcbiAgICBDb29raWVzID0gcmVxdWlyZShcImpzLWNvb2tpZVwiKSxcbiAgICBDQVNTID0gKGZ1bmN0aW9uKHcsIE1vZGVybml6ciwgeWVwbm9wZSkge1xuICAgICAgICB2YXIgaW5pdENvb2tpZU5vdGljZSA9IHJlcXVpcmUoXCIuL2Z1bmNzL2luaXQtY29va2llLW5vdGljZVwiKSxcbiAgICAgICAgICAgIC8vaW5pdENvb2tpZVN1cnZleSA9IHJlcXVpcmUoJy4vZnVuY3MvaW5pdC1jb29raWUtc3VydmV5JyksXG4gICAgICAgICAgICBpbml0SGVhZGVyID0gcmVxdWlyZShcIi4vZnVuY3MvaW5pdC1oZWFkZXJcIiksXG4gICAgICAgICAgICBpbWFnZUNyZWRpdGF0aW9uID0gcmVxdWlyZShcIi4vZnVuY3MvaW1hZ2UtY3JlZGl0YXRpb25cIiksXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBvYmplY3QgdG8gaG9sZCBhbGwgbG9hZGFibGUgc2NyaXB0cywgYWRkIGFuIG9iamVjdCBoZXJlIHRvIGFsbG93IGl0J3MgbG9hZGluZyBpbiBhIHBhZ2VcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBFYWNoIGNoaWxkIG9iamVjdCBoYXMgdGhyZWUgcHJvcGVydGllczpcbiAgICAgICAgICAgICAqICAgZGVzY3JpcHRpb246IGEgc2hvcnQgZGVzY3JpcHRpb24gb2YgdGhlIHNjcmlwdFxuICAgICAgICAgICAgICogICAgICAgICAgIHNyYzogdGhlIGZpbGVuYW1lIG9mIHRoZSBzY3JpcHRcbiAgICAgICAgICAgICAqICAgICAgIFthc3luY106IFdoZXRoZXIgdG8gbG9hZCB0aGUgc2NyaXB0IGFzeW5jaHJvbm91c2x5IChhc3N1bWVkIGZhbHNlIHVubGVzcyBnaXZlbilcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAdmFyIE9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzY3JpcHRzID0ge1xuICAgICAgICAgICAgICAgIGZsb3dwbGF5ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiaW5jbHVkZSBmbG93cGxheWVyIGZvciBwYWdlcyB3aXRoIHZpZGVvc1wiLFxuICAgICAgICAgICAgICAgICAgICBzcmM6IFwibGliL2Zsb3dwbGF5ZXIvZmxvd3BsYXllci0zLjIuNC5taW4uanNcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZmxvd3BsYXllckVtYmVkOiB7XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkVtYmVkIGNvZGUgZm9yIGZsb3dwbGF5ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgc3JjOiBcImxpYi9mbG93cGxheWVyL2Zsb3dwbGF5ZXIuZW1iZWQtMy4wLjMubWluLmpzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN3Zm9iamVjdDoge1xuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJzd2ZvYmplY3QgZm9yIHlvdXR1YmUgdmlkZW8ocylcIixcbiAgICAgICAgICAgICAgICAgICAgc3JjOiBcImxpYi9zd2ZvYmplY3Qvc3dmb2JqZWN0LmpzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdhbGxlcmlhOiB7XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkpRdWVyeSBpbWFnZSBnYWxsZXJ5IHBsdWdpblwiLFxuICAgICAgICAgICAgICAgICAgICBzcmM6IFwibGliL2pxdWVyeS9wbHVnaW5zL2dhbGxlcmlhL2dhbGxlcmlhLTEuMi45L2dhbGxlcmlhLTEuMi45Lm1pbi5qc1wiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnYWxsZXJpYVRoZW1lOiB7XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcImNpdHkgZ2FsbGVyaWEgdGhlbWVcIixcbiAgICAgICAgICAgICAgICAgICAgc3JjOiBcImxpYi9qcXVlcnkvcGx1Z2lucy9nYWxsZXJpYS90aGVtZXMvY2l0eS9nYWxsZXJpYS5jaXR5Lm1pbi5qc1wiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1bmRlcnNjb3JlOiB7XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcInV0aWxpdHkgbGlicmFyeVwiLFxuICAgICAgICAgICAgICAgICAgICBzcmM6IFwibGliL2JhY2tib25lL3VuZGVyc2NvcmUubWluLmpzXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGhhbGx3YXk6IHtcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwic2NyaXB0cyB0byBydW4gb24gaGFsbHdheSBwYWdlc1wiLFxuICAgICAgICAgICAgICAgICAgICBzcmM6IFwibW9kdWxlcy9oYWxsd2F5LmpzXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgICAgKiBHTE9CQUwgVkFSSUFCTEVTXG4gICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogV2hhdCBsZXZlbCBvZiBkZWJ1Z2dpbmcgaXMgcmVxdWlyZWQgKGN1cnJlbnRseSBiaW5hcnkgMCBvciAxLCBubyBkZWJ1ZyBtZXNzYWdlcyBvciBhbGwpXG4gICAgICAgICAgICAgKiBAdmFyIEludGVnZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZGVidWdMZXZlbCA9IDAsXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIGNhY2hlIHdpbmRvdy5sb2NhdGlvblxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB3aW5kb3dMb2NhdGlvbiA9IHcubG9jYXRpb24sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIGNhY2hlIGxvY2F0aW9uLmhhc2hcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbG9jYXRpb25IYXNoID0gbG9jYXRpb24uaGFzaCxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGxvY2F0aW9uIG9mIGV4dGVybmFsIHNjcmlwdHMgKHdpdGggdHJhaWxpbmcgc2xhc2gpXG4gICAgICAgICAgICAgKiBAdmFyIFN0cmluZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzcmNQcmVmaXggPVxuICAgICAgICAgICAgICAgIFwiLy9cIiArIHdpbmRvd0xvY2F0aW9uLmhvc3RuYW1lLnJlcGxhY2UoL3d3d3xpbnRyYW5ldC8sIFwiczFcIikucmVwbGFjZShcImNhc3MuXCIsIFwiXCIpICsgXCIvY2Fzc3JtYWluL2pzL1wiLFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgdmVyc2lvbiBudW1iZXIgdG8gcHJlcGVuZCB0byB0aGUgZmlsZSBuYW1lLCBzZXQgaW4gcGFnZVxuICAgICAgICAgICAgICogQHZhciBTdHJpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmVyc2lvbiA9IHcuQ0lUWV9WRVJTSU9OIHx8IFwiMTIzNDU2Nzg5LlwiLFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAqIHVzZWQgZm9yIGRldGVjdGluZyBkb3dubG9hZCBmaWxldHlwZXMgYnkgZXh0ZW5zaW9uXG4gICAgICAgICAqL1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIGFyZSB3ZSBvbiB0aGUgQ2FzcyBzdWItZG9tYWluP1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpc0Nhc3MgPSB3aW5kb3dMb2NhdGlvbi5ob3N0bmFtZS5pbmRleE9mKFwiY2Fzcy5jaXR5LmFjLnVrXCIpICE9PSAtMSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogYXJlIHdlIG9uIHRoZSBCdW5oaWxsIHN1Yi1kb21haW4/XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlzQnVuaGlsbCA9IHdpbmRvd0xvY2F0aW9uLmhvc3RuYW1lLmluZGV4T2YoXCJidW5oaWxsLmNpdHkuYWMudWtcIikgIT09IC0xLFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBPdXIgZGVzaWduIGJyZWFrcG9pbnRzIGFzIGRlZmluZWQgaW4gX21peGluX3BhZ2VzLnNjc3NcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgYnJlYWtwb2ludHMgPSB7XG4gICAgICAgICAgICAgICAgdGhpbjogMzIwLFxuICAgICAgICAgICAgICAgIG1lZGl1bTogNzY4LFxuICAgICAgICAgICAgICAgIHRoaW5pc2g6IDQ4MCxcbiAgICAgICAgICAgICAgICB3aWRlOiA5ODAsXG4gICAgICAgICAgICAgICAgd2lkZXI6IDEyMDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFNjcmVlbiBzaXplIG9uIGxvYWQsIHNldCBpbiBpbml0UGFnZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzY3JlZW5TaXplLFxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgICAgKiBVU0VGVUwgR0xPQkFMIEZVTkNUSU9OU1xuICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFNlbmRzIGEgbWVzc2FnZSB0byB0aGUgYnJvd3NlciBjb25zb2xlIChHZWNrbywgV2Via2l0KSBvciBpbnRvIHRoZSA8Ym9keT4gKElFKVxuICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2U6IHRoZSBtZXNzYWdlIHRvIHByaW50IG91dFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBkZWJ1ZyA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVidWdDb250YWluZXIsIGVsbXQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoZGVidWdMZXZlbCA+IDAgfHwgbG9jYXRpb24uc2VhcmNoLm1hdGNoKFwiZGVidWdcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZm9yIFNhZmFyaSwgQ2hyb21lLCBGaXJlZm94KHcvIGZpcmVidWcpXG4gICAgICAgICAgICAgICAgICAgICAgICB3LmNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZm9yIE9wZXJhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmEucG9zdEVycm9yLmFwcGx5KG9wZXJhLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9mb3IgSUVcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY3JlYXRlIGEgZGVidWcgY29udGFpbmVyIChpZiBub25lIGV4aXN0cylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVidWdDb250YWluZXJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkZWJ1Z0NvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnQ29udGFpbmVyLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZGVidWdDb250YWluZXJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnQ29udGFpbmVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiaGlkZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pdGVtKDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kQ2hpbGQoZGVidWdDb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbG10ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbG10LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZGVidWdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxtdC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShtZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdDb250YWluZXIuYXBwZW5kQ2hpbGQoZWxtdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gLy9lbmQgSUUgY2F0Y2ggYmxvY2tcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBMYXp5bG9hZCBmdW5jdGlvbiwgbm93IHByb3hpZXMgdG8geWVwbm9wZVxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBqc0hhbmRsZTogVGhlIE9iamVjdCBmcm9tIENBU1Muc2NyaXB0cyB0byBsb2FkXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gY2FsbGJhY2s6IFRoZSBuYW1lIG9mIHRoZSBjYWxsYmFjayB0byBiZSBleGVjdXRlZCBhZnRlciB0aGlzIHNjcmlwdCBoYXMgbG9hZGVkXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGxvYWQgPSBmdW5jdGlvbihqc0hhbmRsZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAvL3dvcmsgb3V0IGZ1bGwgcGF0aFxuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2NyaXB0ID0gc2NyaXB0c1tqc0hhbmRsZV07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKC9eaHR0cHM/OlxcL1xcLy8udGVzdChzY3JpcHQuc3JjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcmlwdC5zcmM7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3JjUHJlZml4ICsgKC9wbHVnaW5zfGxpYi8udGVzdChzY3JpcHQuc3JjKSA/IFwiXCIgOiBcIm1vZHVsZXMvXCIpICsgc2NyaXB0LnNyYztcbiAgICAgICAgICAgICAgICB9KSgpO1xuXG4gICAgICAgICAgICAgICAgeWVwbm9wZSh7XG4gICAgICAgICAgICAgICAgICAgIGxvYWQ6IHBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldFZlcnNpb24gPSBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbiA9IHY7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiByZXR1cm5zIHRoZSBzaXplIG9mIGFuIG9iamVjdFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBvYmplY3RTaXplID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSAwLFxuICAgICAgICAgICAgICAgICAgICBrZXk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIHJldHVybnMgdHJ1ZSBpZiBhIG51bWJlciBpcyBldmVuXG4gICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWVcbiAgICAgICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGlzRXZlbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICUgMiA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmVhZCBhIHBhZ2UncyBHRVQgVVJMIHZhcmlhYmxlcyBhbmQgcmV0dXJuIHRoZW0gYXMgYW4gYXNzb2NpYXRpdmUgYXJyYXkuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldFVybFZhcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFycyA9IFtdLFxuICAgICAgICAgICAgICAgICAgICBoYXNoLFxuICAgICAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICAgICAgaGFzaGVzID0gd2luZG93TG9jYXRpb24uaHJlZi5zbGljZSh3aW5kb3dMb2NhdGlvbi5ocmVmLmluZGV4T2YoXCI/XCIpICsgMSkuc3BsaXQoXCImXCIpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChpOyBpIDwgaGFzaGVzLmxlbmd0aDsgaSA9IGkgKyAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhc2ggPSBoYXNoZXNbaV0uc3BsaXQoXCI9XCIpO1xuICAgICAgICAgICAgICAgICAgICB2YXJzLnB1c2goaGFzaFswXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhcnNbaGFzaFswXV0gPSBoYXNoWzFdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB2YXJzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogcmV0dXJuIGhhc2ggYXMgYXJyYXkgZnJvbSB1cmwgR0VUIHBhcmFtXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldFVybEhhc2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGFzaGVzO1xuXG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uSGFzaC5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzaGVzID0gbG9jYXRpb25IYXNoLnNwbGl0KFwiI1wiKVsxXS5zcGxpdChcIiZcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhc2hlcyB8fCBcIlwiO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogZ2V0cyB3aW5kb3cgd2lkdGhcbiAgICAgICAgICAgICAqIEBwYXJhbToge09iamVjdH0gLSB3aW5kb3cgb2JqZWN0XG4gICAgICAgICAgICAgKiBAcmV0dXJuOiB7TnVtYmVyfSAtIHdpbmRvdyB3aWR0aFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBnZXRXaW5kb3dXaWR0aCA9IGZ1bmN0aW9uKHcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgkKHcpLndpZHRoKCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogYWRkcyBhIGNsYXNzIG9mIGhhcy1sb2FkZWQgdG8gaW1hZ2VzXG4gICAgICAgICAgICAgKiBAcGFyYW06IHtPYmplY3R9IC0gaHRtbCBlbGVtZW50XG4gICAgICAgICAgICAgKiBAcmV0dXJuOiB7T2JqZWN0fSAtIHRoZSBodG1sIGVsZW1lbnQsIHdpdGggbmV3IGNsYXNzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGltYWdlTG9hZGVkID0gZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsID0gYXJnLnRhcmdldCB8fCBhcmc7XG4gICAgICAgICAgICAgICAgJChlbCkuYWRkQ2xhc3MoXCJoYXMtbG9hZGVkXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIHJldHVybnMgdHJ1ZSBpZiB0aGUgdmlld3BvcnQgc2l6ZSBoYXMgY2hhbmdlZCAtXG4gICAgICAgICAgICAgKiB1c2VmdWwgaW4gcmVzcG9uc2l2ZSBsYXlvdXQsIHNlZVxuICAgICAgICAgICAgICogc25vb2suY2EvYXJjaGl2ZXMvamF2YXNjcmlwdC9pZTZfZmlyZXNfb25yZXNpemVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmlld3BvcnRDaGFuZ2VkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoYW5nZWQgPSBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZG9jRWwgPSB3LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgY29vbE9mZiA9IDIwLCAvL2Z1cnRoZXIgY2FsbHMgd2l0aGluIHRoaXMgd2luZG93IGdldFxuICAgICAgICAgICAgICAgICAgICAvL3RoZSBzYW1lIHJldHVybiB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBub3cgPSBEYXRlLm5vd1xuICAgICAgICAgICAgICAgICAgICAgICAgPyBEYXRlLm5vdygpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLnZhbHVlT2YoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSkoKTtcblxuICAgICAgICAgICAgICAgIC8vc2V0IHVwIGEgaG9sZGVyIG9iamVjdCAoaWYgaXQgZG9lc24ndCBleGlzdClcbiAgICAgICAgICAgICAgICB3LnZpZXdwb3J0ID0gdy52aWV3cG9ydCB8fCB7fTtcblxuICAgICAgICAgICAgICAgIC8vdGhlc2UgbmVlZCB6ZXJvaW5nIGJlZm9yZSB3ZSBiZWdpbiAoaWYgbm90IGFscmVhZHkgc2V0KVxuICAgICAgICAgICAgICAgIHcudmlld3BvcnQuZGltZW5zaW9ucyA9IHcudmlld3BvcnQuZGltZW5zaW9ucyB8fCB7IGhlaWdodDogbnVsbCwgd2lkdGg6IG51bGwgfTtcblxuICAgICAgICAgICAgICAgIC8vbmVlZCB0byBoYW5kbGUgdGhlIHNpdHVhdGlvbiB3aGVyZSBtYW55IGNhbGxzIHRvIHRoaXNcbiAgICAgICAgICAgICAgICAvL2Z1bmN0aW9uIGhhcHBlbiBpbiBxdWljayBzdWNjZXNzaW9uXG4gICAgICAgICAgICAgICAgaWYgKHcudmlld3BvcnQudGltZVN0YW1wICYmIG5vdyAtIHcudmlld3BvcnQudGltZVN0YW1wIDwgY29vbE9mZikge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1ZyhcIndpdGhpbiB3aW5kb3csIHJldHVybmluZyBcIiArIHcudmlld3BvcnQuc3RvcmVkUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHcudmlld3BvcnQuc3RvcmVkUmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vc3RvcmUgdGhlIHRpbWUgb2YgdGhpcyBjYWxsXG4gICAgICAgICAgICAgICAgdy52aWV3cG9ydC50aW1lU3RhbXAgPSBub3c7XG5cbiAgICAgICAgICAgICAgICAvL2hhdmUgd2UgY2hhbmdlZCB2aWV3cG9ydCBzaXplP1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgdy52aWV3cG9ydC5kaW1lbnNpb25zLndpZHRoICE9PSBkb2NFbC5jbGllbnRXaWR0aCB8fFxuICAgICAgICAgICAgICAgICAgICB3LnZpZXdwb3J0LmRpbWVuc2lvbnMuaGVpZ2h0ICE9PSBkb2NFbC5jbGllbnRIZWlnaHRcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9zdG9yZSBuZXcgZGltZW5zaW9uc1xuICAgICAgICAgICAgICAgIHcudmlld3BvcnQuZGltZW5zaW9ucy5oZWlnaHQgPSBkb2NFbC5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgdy52aWV3cG9ydC5kaW1lbnNpb25zLndpZHRoID0gZG9jRWwuY2xpZW50V2lkdGg7XG5cbiAgICAgICAgICAgICAgICAvL3N0b3JlIHRoaXMgcmVzdWx0IGluIGNhc2Ugb2YgYSByZS1jYWxsIHdpdGhpbiBjb29sT2ZmXG4gICAgICAgICAgICAgICAgdy52aWV3cG9ydC5zdG9yZWRSZXN1bHQgPSBjaGFuZ2VkO1xuXG4gICAgICAgICAgICAgICAgZGVidWcoXCJ2aWV3cG9ydCBjaGFuZ2VkOiBcIiArIGNoYW5nZWQpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoYW5nZWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgICAgKiBCRUdJTiBDQVNTIE1PRFVMRVNcbiAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgICAgICAgICAgLypcbiAgICAgICAgICogc2V0cyB1cCBhIGNhcm91c2VsIG9uIGEgcGFnZVxuICAgICAgICAgKiBAcGFyYW0gY2Fyb3VzZWxPYmogOiBPYmplY3RcbiAgICAgICAgICpcbiAgICAgICAgICovXG4gICAgICAgICAgICBjcmVhdGVTbGlkZXIgPSBmdW5jdGlvbigkY2Fyb3VzZWxPYmopIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHcuc2xpZGVyRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YUxlbmd0aCA9IGRhdGEubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wT2JqID0ge30sXG4gICAgICAgICAgICAgICAgICAgIHRlbXBFbCA9IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLFxuICAgICAgICAgICAgICAgICAgICBpdGVtLFxuICAgICAgICAgICAgICAgICAgICBjb21waWxlZFRtcGwgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgaSxcbiAgICAgICAgICAgICAgICAgICAgaW5pdFNsaWRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0bzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvQ29udHJvbHM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF1c2U6IDE1MDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Ib3ZlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3VjaEVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHRTd2lwZVk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZTogXCJmYWRlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRUZXh0OiAnPHNwYW4gY2xhc3M9XCJ2aXN1YWxseWhpZGRlblwiPlN0YXJ0IFNsaWRlcjwvc3Bhbj48aSBjbGFzcz1cImljb24tcGxheVwiPjwvaT4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3BUZXh0OiAnPHNwYW4gY2xhc3M9XCJ2aXN1YWxseWhpZGRlblwiPlBhdXNlIFNsaWRlcjwvc3Bhbj48aSBjbGFzcz1cImljb24tcGF1c2VcIj48L2k+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGFwdGl2ZUhlaWdodDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNsaWRlckxvYWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2Fyb3VzZWxPYmoucmVtb3ZlQ2xhc3MoXCJsb2FkaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRjYXJvdXNlbE9iai5ieFNsaWRlcihvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLyoganNoaW50IC1XMDE1ICovXG4gICAgICAgICAgICAgICAgICAgIHRtcGwgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGxpIGNsYXNzPVwiY2ZcIj4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjYXJvdXNlbC1tZWRpYVwiPicsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjwlPSBkYXRhLnNsaWRlck1lZGlhICU+XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjYXJvdXNlbC10ZXh0XCI+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICc8JSBpZiAoZGF0YS5zbGlkZXJUeXBlID09PSBcImV2ZW50XCIpIHsgJT4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJkYXRlXCI+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cImRhdGUtbW9udGhcIj48JT0gZGF0YS5zbGlkZXJEYXRlTW9udGggJT48L3A+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cImRhdGUtZGF5LW5vXCI+PCU9IGRhdGEuc2xpZGVyRGF0ZURheU5vICU+PC9wPicsXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJkYXRlLWRheVwiPjwlPSBkYXRhLnNsaWRlckRhdGVEYXkgJT48L3A+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiPC9kaXY+XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjwlIH0gJT5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiPGgyPjwlPSBkYXRhLnNsaWRlclRpdGxlICU+PC9oMj5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiPCU9IGRhdGEuc2xpZGVyRGVzY3JpcHRpb24gJT5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiPC9kaXY+XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjwvbGk+XCJcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgICAgICAgIC8qIGpzaGludCArVzAxNSAqL1xuXG4gICAgICAgICAgICAgICAgLy9zZXQgdXAgc2xpZGVyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFMZW5ndGggPCAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRoZSBmaXJzdCBzbGlkZSBhcyBpdCBpcyBhbHJlYWR5IGluIHRoIERPTVxuICAgICAgICAgICAgICAgIGRhdGEuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBkYXRhTGVuZ3RoID0gZGF0YS5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICAvLyBlbnVtZXJhdGUgYXJyYXlcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YUxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGl0ZW1zIGlzIGFuIG9iamVjdCByZXByZXNlbnRpbmcgYSBjYXJvdXNlbCBzbGlkZVxuICAgICAgICAgICAgICAgICAgICBpdGVtcyA9IGRhdGFbaV07XG4gICAgICAgICAgICAgICAgICAgIHRlbXBFbCA9IF8udGVtcGxhdGUodG1wbCwgaXRlbXMsIHsgdmFyaWFibGU6IFwiZGF0YVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb21waWxlZFRtcGwucHVzaCh0ZW1wRWwpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRjYXJvdXNlbE9iai5hcHBlbmQoY29tcGlsZWRUbXBsLmpvaW4oXCJcIikpO1xuXG4gICAgICAgICAgICAgICAgaW5pdFNsaWRlcigkY2Fyb3VzZWxPYmopO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ3JlYXRlIGEgaW1hZ2UgR2FsbGVyeVxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhIGpxdWVyeSBvYmplY3QgcmVwcmVzZW50aW5nIGEgc2luZ2xlIGluc3RhbmNlIG9mIGEgZ2FsbGVyeVxuICAgICAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSB0cnVlIGlmIHRoZSBnYWxsZXJ5IGlzIGluIGEgd2lkZ2V0LCBmYWxzZSBpZiBpbiBtYWluIGNvbnRlbnQgYm9keVxuICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0IHx8IFVuZGVmaW5lZH0gcmV0dXJucyB0aGUgZ2FsbGVyaWEgalF1ZXJ5IG9iamVjdCBpZlxuICAgICAgICAgICAgICogc3VjY2Vzc2Z1bCBlbHNlIHVuZGVmaW5lZCAtIGZvciBpbnN0YW5jZSBpZiAkZ2FsbGVyeSBpcyBub3QgYSBqUXVlcnkgb2JqZWN0XG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjcmVhdGVHYWxsZXJ5ID0gZnVuY3Rpb24oJGdhbGxlcnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogXCIvYXBpcy9nYWxsZXJpZXMvZ2FsbGVyaWEtanNvbj9yb290PVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm9vdDogXCJcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAkbG9hZGVyID0gJCgnPHNwYW4gY2xhc3M9XCJsb2FkaW5nXCI+bG9hZGluZzwvc3Bhbj4nKSxcbiAgICAgICAgICAgICAgICAgICAgJGdhbGxlcnlJbm5lcixcbiAgICAgICAgICAgICAgICAgICAgLy9zb21lIGRlZmF1bHQgb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICBnYWxsZXJpYU9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDAuNTYyNSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpZ2h0Ym94OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFNjYWxlUmF0aW86IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVsb2FkOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0luZm86IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VDcm9wOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZW5kOiBmdW5jdGlvbigvKiBkZWZpbmVkIGJ1dCBub3QgdXNlZDogb3B0aW9ucyAqLykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcImNpdHlcIiA9PT0gJGdhbGxlcnkuYXR0cihcImRhdGEtdGhlbWVcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGdhbGxlcnkucHJlcGVuZChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCI8ZGl2Lz5cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcImNnLWNhcHRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKmxvYWRzdGFydCBpcyB0cmlnZ2VyZWQgZXZlcnkgdGltZSBnYWxsZXJpYSBsb2FkcyBhbiBpbWFnZSovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZChcImxvYWRzdGFydFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMuX2RhdGFbZS5pbmRleF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kY2FwdGlvbiBpcyByZWZvdW5kIGhlcmUgYXMgaXQgbmVlZHMgdG8gYmUgc2NvcGVkIHRvIHRoaXMgZ2FsbGVyeVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjYXB0aW9uID0gJGdhbGxlcnkuZmluZChcIi5jZy1jYXB0aW9uXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5tX2NhcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2FwdGlvbi5odG1sKGRhdGEubV9jYXB0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNhcHRpb24uaHRtbChcIiZuYnNwO1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBnYWxsZXJpYVRoZW1lQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZ2V0IGlkIG9mIHJvb3QgZnJvbSBpZCBvZiBnYWxsZXJ5IGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5yb290ID0gJGdhbGxlcnkuYXR0cihcImlkXCIpLnJlcGxhY2UoXCJnYWxsZXJ5LVwiLCBcIlwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJC5nZXRKU09OKGRhdGEuc3JjICsgZGF0YS5yb290LCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZW1vdmUgbG9hZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxvYWRlci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGdhbGxlcnkuY3NzKFwib3BhY2l0eVwiLCBcIjFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FsbGVyaWFPcHRpb25zLmRhdGFfc291cmNlID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZ2FsbGVyeUlubmVyLmdhbGxlcmlhKGdhbGxlcmlhT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRnYWxsZXJ5SW5uZXI7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy9lbmQgdmFyc1xuXG4gICAgICAgICAgICAgICAgLy9zb21lIGNoZWNrcyBiZWZvcmUgd2UgZ28gZnVydGhlclxuICAgICAgICAgICAgICAgIGlmICghJGdhbGxlcnkgfHwgJGdhbGxlcnkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKFwiJGdhbGxlcnkgaXMgdW5kZWZpbmVkIG9yIG5vdCBhIGpRdWVyeSBvYmplY3RcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkZ2FsbGVyeUlubmVyID0gJGdhbGxlcnkuZmluZChcIi5nYWxsZXJ5LWlubmVyXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vcmV0dXJuIGlmIG5vIHN0YWdlIGZvdW5kXG4gICAgICAgICAgICAgICAgaWYgKCRnYWxsZXJ5SW5uZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnKFwibm8gc3RhZ2UgZm91bmRcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL3NldCBzb21lIG9wdGlvbnMgZnJvbSAkZ2FsbGVyeUlubmVyIGNsYXNzZXMgLSB0aGlzIGFyZSBzZXQgYXMgbWV0YWRhdGEgb24gdGhlIGdhbGxlcnkgZm9sZGVyXG4gICAgICAgICAgICAgICAgaWYgKCRnYWxsZXJ5SW5uZXIuaGFzQ2xhc3MoXCJsaWdodGJveFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBnYWxsZXJpYU9wdGlvbnMubGlnaHRib3ggPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICgkZ2FsbGVyeUlubmVyLmhhc0NsYXNzKFwiY2FwdGlvblwiKSkge1xuICAgICAgICAgICAgICAgICAgICBnYWxsZXJpYU9wdGlvbnMuc2hvd0luZm8gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vYWRkIGxvYWRpbmcgZ2lmXG4gICAgICAgICAgICAgICAgJGdhbGxlcnkucHJlcGVuZCgkbG9hZGVyKTtcblxuICAgICAgICAgICAgICAgIHllcG5vcGUoe1xuICAgICAgICAgICAgICAgICAgICBsb2FkOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBcImxpYi9qcXVlcnkvcGx1Z2lucy9nYWxsZXJpYS9nYWxsZXJpYS0xLjQuMi9nYWxsZXJpYS0xLjQuMi5taW4uanNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibGliL2pxdWVyeS9wbHVnaW5zL2dhbGxlcmlhL2dhbGxlcmlhLTEuNC4yL3RoZW1lcy9jbGFzc2ljL2dhbGxlcmlhLmNsYXNzaWMubWluLmpzXCJcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGdhbGxlcmlhVGhlbWVDYWxsYmFja1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgLy9lbmQgY3JlYXRlR2FsbGVyeVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBhZGRzIGF1dG9jb21wbGV0ZSBmdW5jdGlvbmFsaXR5IHRvIHRoZSBtYWluIHNlYXJjaCBiYXIsIHVzaW5nIGpRdWVyeSBVSVxuICAgICAgICAgICAgICogQHBhcmFtOiB7T2JqZWN0fSBmb3JtIC0galF1ZXJ5IG9iamVjdCBmb3IgZm9ybSB0byBydW4gYXV0b1N1Z2dlc3Qgb25cbiAgICAgICAgICAgICAqIEBwYXJhbToge09iamVjdH0gaW5wdXQgLSBqUXVlcnkgb2JqZWN0IGZvciBpbnB1dCBlbGVtZW50cyB0byBydW4gYXV0b1N1Z2dlc3Qgb25cbiAgICAgICAgICAgICAqIEBwYXJhbToge1N0cmluZ30gY29sbGVjdGlvbiAtIHRoZSBuYW1lIG9mIHRoZSBGdW5uZWxiYWNrIGNvbGxlY3Rpb24gdG8gcXVlcnlcbiAgICAgICAgICAgICAqIEByZXR1bjoge1VuZGVmaW5lZH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc2VhcmNoQXV0b0NvbXBsZXRlID0gZnVuY3Rpb24oZm9ybSwgaW5wdXQsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5hdXRvY29tcGxldGUoe1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IGZ1bmN0aW9uKHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogXCIvZmIvc3VnZ2VzdC5qc29uP2NvbGxlY3Rpb249XCIgKyBjb2xsZWN0aW9uICsgXCImZm10PWpzb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWFsX3F1ZXJ5OiByZXF1ZXN0LnRlcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLm1hcChkYXRhLCBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTsgLy9lbmQgJC5hamF4XG4gICAgICAgICAgICAgICAgICAgIH0sIC8vZW5kIHNvdXJjZSBmdW5jdGlvblxuXG4gICAgICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogMixcbiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDIwLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vd2hlbiB5b3UgaGF2ZSBzZWxlY3RlZCBzb21ldGhpbmdcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0OiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY2xvc2UgdGhlIGRyb3AgZG93blxuICAgICAgICAgICAgICAgICAgICAgICAgLy9uZWVkIHRvIGNyZWF0ZSBhIGR1bW15IGFzc2lnbm1lbnQsIHRvIHBsZWFzZSBqc2xpbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY2xvc2UgaXMgc3RpbGwgcGVyZm9ybWVkXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gdGhpcy5jbG9zZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9tYWtlIHN1cmUgb24gY2xpY2sgdGhlIHNlbGVjdGVkIHZhbHVlIHJlcGxhY2VzIHRoZSB0eXBlIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnZhbCh1aS5pdGVtLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uc3VibWl0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC8vc2hvdyB0aGUgZHJvcCBkb3duXG4gICAgICAgICAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhcInVpLWNvcm5lci1hbGxcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJ1aS1jb3JuZXItdG9wXCIpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvL2Nsb3NlIHRoZSBkcm9wIGRvd25cbiAgICAgICAgICAgICAgICAgICAgY2xvc2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhcInVpLWNvcm5lci10b3BcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJ1aS1jb3JuZXItYWxsXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBGaW5kcyBhbnkgdmlkIGltYWdlcyBvbiBhIHBhZ2UgYW5kIHJlcGxhY2VzIHRoZW0gd2l0aCBlaXRoZXIgYSBZb3VUdWJlIGlmcmFtZSBvciBTV0ZPYmplY3QgZm9yIEZNUyB2aWRzXG4gICAgICAgICAgICAgKiBAcmV0dXJuOiBVbmRlZmluZWRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmlkZW9zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyICR5b3V0dWJlVmlkcyA9ICQoXCJpbWcueW91dHViZVwiKSxcbiAgICAgICAgICAgICAgICAgICAgJGZtc1ZpZHMgPSAkKFwiaW1nLmZtc1wiKSxcbiAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgKiBSZXBsYWNlcyBhbiBpbWFnZSBlbGVtZW50IHdpdGggWW91VHViZSBpRnJhbWVcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW06IHtPYmplY3R9IDogJGVsIC0galF1ZXJ5IG9iamVjdCBmb3IgeW91VHViZSBpbWFnZXMgdG8gYmUgcmVwbGFjZWRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dW46IHtVbmRlZmluZWR9XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGVtYmVkWW91dHViZSA9IGZ1bmN0aW9uKCR5b3V0dWJlVmlkcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHlvdXR1YmVWaWRzLmVhY2goZnVuY3Rpb24oaSwgZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGVsID0gJChlbCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZFdpZHRoID0gNTAwLCAvLyBkZWZhdWx0IHdpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZEhlaWdodCA9IDMyMCwgLy8gZGVmYXVsdCBoZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9JRCA9ICRlbC5hdHRyKFwiaWRcIikucmVwbGFjZShcInZpZF9cIiwgXCJcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWQgPSBmdW5jdGlvbihhdXRvcGxheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVsLnJlcGxhY2VXaXRoKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZW1iZWQtd3JhcHBlclwiPjxkaXYgY2xhc3M9XCJlbWJlZC1jb250YWluZXJcIj48aWZyYW1lIGhlaWdodD0nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkSGVpZ2h0ICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgd2lkdGg9IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkV2lkdGggK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIHNyYz1cImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLycgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRlb0lEICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI/cmVsPTBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhdXRvcGxheSA/IFwiJmF1dG9wbGF5PTFcIiA6IFwiXCIpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXFwiIGZyYW1lYm9yZGVyPScwJyBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+PC9kaXY+PC9kaXY+XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXcgPSAkZWwuaGFzQ2xhc3MoXCJwcmV2aWV3XCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVsLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZCh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZChmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICogUmVwbGFjZXMgYW4gaW1hZ2UgZWxlbWVudCB3aXRoIFNXRiBPYmplY3RcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW06IHtPYmplY3R9IDogJGVsIC0galF1ZXJ5IG9iamVjdCBmb3IgYWxsIGZtcyBpbWFnZXMgdG8gYmUgcmVwbGFjZWRcbiAgICAgICAgICAgICAgICAgKiBAcmV0dW46IHtVbmRlZmluZWR9XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIGVtYmVkRm1zID0gZnVuY3Rpb24oJGZtc1ZpZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGxhc2hJbWFnZXMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2Fzc1N0YW5kYXJkOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi8vczEuY2l0eS5hYy51ay9jYXNzcm1haW4vaS92aWRlby1vdmVybGF5cy9mbG93cGxheWVyLWNhc3MtNTAweDMyMC5qcGc/dj04MTA1XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2Fzc1N0YW5kYXJkV3M6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLy9zMS5jaXR5LmFjLnVrL2Nhc3NybWFpbi9pL3ZpZGVvLW92ZXJsYXlzL2Zsb3dwbGF5ZXItY2Fzcy02ODd4NDE5LmpwZz92PTgxMDVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNzUmV0aW5hOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi8vczEuY2l0eS5hYy51ay9jYXNzcm1haW4vaS92aWRlby1vdmVybGF5cy9mbG93cGxheWVyLWNhc3MtNTAweDMyMEB4Mi5qcGc/dj04MTA1XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2Fzc1JldGluYVdzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi8vczEuY2l0eS5hYy51ay9jYXNzcm1haW4vaS92aWRlby1vdmVybGF5cy9mbG93cGxheWVyLWNhc3MtNjg3eDQxOUB4Mi5qcGc/dj04MTA1XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRmbXNWaWRzLmVhY2goZnVuY3Rpb24oaSwgZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGVsID0gJChlbCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZFdpZHRoID0gNjg3LCAvL2RlZmF1bHQgd2lkdGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkSGVpZ2h0ID0gNDE5LCAvLyBkZWZhdWx0IGhlaWdodFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbElkID0gJGVsLmF0dHIoXCJpZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkSWQgPSBlbElkLnJlcGxhY2UoXCJ2aWRfXCIsIFwiXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHByZXNzSW5zdGFsbCA9IFwiLy9zMS5jaXR5LmFjLnVrL2pzL3N3Zm9iamVjdC9leHByZXNzSW5zdGFsbC5zd2ZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhc2h0YXJnZXR2ZXJzaW9uID0gXCI5LjAuMjhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhc2h2YXJzID0gbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dTY3JpcHRBY2Nlc3M6IFwiYWx3YXlzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd2Z1bGxzY3JlZW46IFwidHJ1ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd21vZGU6IFwidHJhbnNwYXJlbnRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxhc2hJbWFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dmQ2FsbEJhY2sgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGUucmVmKS53cmFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZW1iZWQtd3JhcHBlclwiIHN0eWxlPVwibWF4LXdpZHRoOicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRXaWR0aCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdweFwiPjxkaXYgY2xhc3M9XCJlbWJlZC1jb250YWluZXJcIj48L2Rpdj48L2Rpdj4nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiB2aWRlbyBpcyBpbmNsdWRlZCBpbiB0aGUgY291cnNlIGRlc2NyaXB0aW9uIGRpdiBvZiBhIGNvdXJzZSBOIHBhZ2UsIHdpZHRoIG5lZWRzIHRvIGJlIDQxOVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkZWwucGFyZW50cyhcIi5jb3Vyc2UtZGVzY3JpcHRpb25cIikubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZFdpZHRoID0gNDE5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdmlkcyBoYXZlIGRpZmZlcmVudCBzaXplcyBkZXBlbmRpbmcgb24gdGhlIHNpemUgb2YgdGhlIGNvbnRlbnQgZGl2IGFuZCBpZiB0aGV5IGFyZSB3aWRlc2NyZWVuIG9uIHNxdWFyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkZWwuaGFzQ2xhc3MoXCJ3aWRlc2NyZWVuXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZEhlaWdodCA9IHZpZFdpZHRoICogMC42MTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXNoSW1hZ2UgPSBzcGxhc2hJbWFnZXMuY2Fzc1N0YW5kYXJkV3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkV2lkdGggPSA1MDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZEhlaWdodCA9IDMyMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BsYXNoSW1hZ2UgPSBzcGxhc2hJbWFnZXMuY2Fzc1N0YW5kYXJkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3dmb2JqZWN0Lmhhc0ZsYXNoUGxheWVyVmVyc2lvbihmbGFzaHRhcmdldHZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZXhwbGFpbiB3aHkgdGhlcmUgaXMgbm8gdmlkZW9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVsLmFmdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxwIGNsYXNzPVwibm90aWNlLW1lc3NhZ2VcIj48aSBjbGFzcz1cImljb24td2FybmluZy1zaWduXCIgc3R5bGU9XCJjb2xvciA6ICNDQ0NDMDBcIj48L2k+IFlvdSBuZWVkIHRvIGhhdmUgZmxhc2ggcGxheWVyICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYXNodGFyZ2V0dmVyc2lvbiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgb3IgZ3JlYXRlciBpbnN0YWxsZWQgdG8gc2VlIHRoZSB2aWRlby48L3A+XCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8cD48YSBocmVmPVwiaHR0cDovL2dldC5hZG9iZS5jb20vZmxhc2hwbGF5ZXIvXCI+R2V0IEZsYXNoIFBsYXllcjwvYT48L3A+J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uZmlnIGhhcyB0byBiZSBpbiBhIHN0cmluZyBhbmQga2V5IGFuZCB2YWx1ZXMgaGF2ZSB0byBiZSBcInF1b3RlZFwiIC0gbmlnaHRtYXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0cnVjdCBhbGwgdGhlIHZhcmlhYmxlcyB0byBwYXNzIHRvIHRoZSBwbGF5ZXIgLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0cmllZCB0byBtYWtlIHRoaXMgYSBwcm9wZXIganNvbiBhcnJheSwgZGlkbid0IHdvcmsgOihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUUgZG9lc24ndCBsaWtlIGRvdWJsZSBxdW90ZXMgaGVyZSBzbyBpZ25vcmUgSlNIaW50IGVycm9yXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoganNoaW50IC1XMDE4ICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYXNodmFycyA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInsnY2xpcCc6IHsncHJvdmlkZXInOiAncnRtcCd9LCAncGxheWxpc3QnOiBbeyd1cmwnOidcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxhc2hJbWFnZSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIicsICdhdXRvUGxheSc6IHRydWV9LCB7J3VybCc6ICdcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRJZC5yZXBsYWNlKFwidmlkX1wiLCBcIlwiKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi9IaV9iYW5kd2lkdGgnLCAnYXV0b1BsYXknOiBmYWxzZSwgJ3NjYWxpbmcnOiAnZml0J31dLCAncGx1Z2lucyc6IHsncnRtcCc6IHsndXJsJzogJ2h0dHBzOi8vczEuY2l0eS5hYy51ay9qcy9mbG93cGxheWVyL2Zsb3dwbGF5ZXIucnRtcC0zLjIuMy5zd2YnLCAnbmV0Q29ubmVjdGlvblVybCc6ICdydG1wOi8vbWVkaWEuY2l0eS5hYy51ay9mbG93cGxheWVyJywgJ29iamVjdEVuY29kaW5nJzogJzAnLCAncHJveHlUeXBlJzogJ25vbmUnIH0sICdjb250cm9scyc6IHsndXJsJzogJ2Zsb3dwbGF5ZXIuY29udHJvbHMuc3dmJ30gfSB9XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGpzaGludCArVzAxOCAqL1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluaXRpYXRlIHRoZSBwbGF5ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dmb2JqZWN0LmVtYmVkU1dGKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJodHRwczovL3MxLmNpdHkuYWMudWsvanMvZmxvd3BsYXllci9mbG93cGxheWVyLTMuMi41LnN3ZlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI5LjAuMFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc0luc3RhbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNvbmZpZzogZmxhc2h2YXJzIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3ZkNhbGxCYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAvL2VuZCBoYXMgZmxhc2ggaWZcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaWYgKCR5b3V0dWJlVmlkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1iZWRZb3V0dWJlKCR5b3V0dWJlVmlkcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgkZm1zVmlkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgeWVwbm9wZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkOiBzY3JpcHRzLnN3Zm9iamVjdC5zcmMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24odXJsLCByZXN1bHQsIGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYmVkRm1zKCRmbXNWaWRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgLy8gZW5kIHZpZGVvc1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBjcmVhdGVzIHRoZSBZb3UgVHViZSBtb2R1bGUgLSBhIFVJIGNvbXBvbmVudCBmZWF0dXJpbmcgYSBjYXJvdXNlbCBvZiB2aWRlb3MgYW5kIGEgZmVhdHVyZWQgdmlkZW8gYXJlYS4gQ2xpY2tpbmcgb24gb25lIG9mIHRoZSBzbGlkZXNcbiAgICAgICAgICAgICAqIHVwZGF0ZXMgdGhlIGZlYXR1cmVkIHZpZGVvLCBwbHVzIHRoZSB0aXRsZSwgZGVzY3JpcHRpb24sIHZpZXdzIGFuZCBzaGFyZSBsaW5rcy4gUmVxdWlyZXMgVW5kZXJzY29yZS5qc1xuICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHl0TW9kdWxlIGEgalF1ZXJ5IE9iamVjdCByZXByZXNlbnRpbmcgdGhlIGNvbnRhaW5lciBmb3IgdGhlIHl0TW9kdWxlLlxuICAgICAgICAgICAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB5dE1vZHVsZSA9IGZ1bmN0aW9uKCR5dE1vZHVsZSkge1xuICAgICAgICAgICAgICAgIHZhciB5dFVybCxcbiAgICAgICAgICAgICAgICAgICAgdmwsXG4gICAgICAgICAgICAgICAgICAgIGZ2LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2ssXG4gICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICogY29uc3RydWN0b3IgZm9yIEZlYXR1cmVkVmlkZW8gb2JqXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGVsIC0gYSBqUXVlcnkgc2VsZWN0b3IgZm9yIHRoZSBGZWF0dXJlZFZpZGVvIGNvbnRhaW5lclxuICAgICAgICAgICAgICAgICAqIEByZXR1cm4ge09iamVjdH0gUmV0dXJucyBhIG5ld2EgRmVhdHVyZWRWaWRlbyBvYmpcbiAgICAgICAgICAgICAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgRmVhdHVyZWRWaWRlbyA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRmVhdHVyZWRWaWRlbykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZlYXR1cmVkVmlkZW8oZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbCA9IGVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWwgPSAkKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGxheWVyID0gJChcIiN5dC12aWRlby1wbGF5ZXJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBqc2hpbnQgLVcwMTUgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG1wbCA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInNwYW4xNFwiPicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgaWQ9XCJ5dC12aWRlby1wbGF5ZXJcIiBjbGFzcz1cInl0LXZpZGVvLXBsYXllclwiPicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJlbWJlZC13cmFwcGVyXCI+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImVtYmVkLWNvbnRhaW5lclwiPicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxpZnJhbWUgc3JjPVwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvPCU9IGRhdGEuaWQgJT4/cmVsPTBcIiBmcmFtZWJvcmRlcj1cIjBcIiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPC9kaXY+XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8L2Rpdj5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic3BhbjEwXCI+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInZpZGVvLW1ldGFcIj4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aDIgY2xhc3M9XCJ2aWRlby10aXRsZVwiPjwlPSBkYXRhLnRpdGxlICU+PC9oMj4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cInZpZGVvLWRlc2NyaXB0aW9uXCI+PCU9IGRhdGEuZGVzY3JpcHRpb24gJT48L3A+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJ2aWRlby12aWV3c1wiPlZpZXdzIDogPCU9IGRhdGEudmlld3MgJT48L3A+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJzb2NpYWwtZmxhdC1saW5rc1wiPicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiZmFjZWJvb2sgc29jaWFsLWJ0blwiPjxhIGhyZWY9XCJodHRwczovL3d3dy5mYWNlYm9vay5jb20vZGlhbG9nL2ZlZWQ/YXBwX2lkPTE0MTk5NjgzOTE2NTUxNSZhbXA7cmVkaXJlY3RfdXJpPTwlIHdpbmRvdy5sb2NhdGlvbi5ocmVmICU+JmFtcDtsaW5rPTwlPSBkYXRhLnBsYXllciAlPlwiPjxpIGNsYXNzPVwiaWNvbi1mYWNlYm9va1wiPjwvaT5GYWNlYm9vazwvYT48L3NwYW4+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJ0d2l0dGVyIHNvY2lhbC1idG5cIj48YSBocmVmPVwiaHR0cHM6Ly90d2l0dGVyLmNvbS9pbnRlbnQvdHdlZXQ/dXJsPTwlPSBkYXRhLnBsYXllciAlPiZhbXA7dGl0bGU9PCU9IGRhdGEudGl0bGUgJT5cIj48aSBjbGFzcz1cImljb24tdHdpdHRlclwiPjwvaT5Ud2l0dGVyPC9hPjwvc3Bhbj4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImdvb2dsZSBzb2NpYWwtYnRuXCI+PGEgaHJlZj1cImh0dHBzOi8vcGx1cy5nb29nbGUuY29tL3NoYXJlP3VybD08JT0gZGF0YS5wbGF5ZXIgJT5cIj48aSBjbGFzcz1cImljb24tZ29vZ2xlLXBsdXNcIj48L2k+R29vZ2xlICs8L2E+PC9zcGFuPicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8L3A+XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8L2Rpdj5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxkaXY+XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbihcIlxcblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGpzaGludCArVzAxNSAqL1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgKiBjb25zdHJ1Y3RvciBmb3IgVmlkZW9zTGlzdCBvYmpcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZWwgLSBhIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIFZpZGVvc0xpc3QgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSBSZXR1cm5zIGEgbmV3IFZpZGVvc0xpc3Qgb2JqXG4gICAgICAgICAgICAgICAgICogQGNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIFZpZGVvc0xpc3QgPSBmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFZpZGVvc0xpc3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBWaWRlb3NMaXN0KGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWwgPSBlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsID0gJChlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiBqc2hpbnQgLVcwMTUgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG1wbCA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGxpIGRhdGEtdmlkZW8taWQ9XCI8JT0gZGF0YS5pZCAlPlwiIGRhdGEtdmlkZW8tdGl0bGU9XCI8JT0gZGF0YS50aXRsZSAlPlwiIGRhdGEtdmlkZW8tZGVzY3JpcHRpb249XCI8JT0gZGF0YS5kZXNjcmlwdGlvbiAlPlwiIGRhdGEtdmlkZW8tcGxheWVyPVwiPCU9IGRhdGEucGxheWVyICU+XCIgZGF0YS12aWRlby12aWV3cz1cIjwlPSBkYXRhLnZpZXdzICU+XCIgY2xhc3M9XCJ2aWRlbyBldmVudCBldmVudC12aWRlbyA8JT0gZGF0YS5hY3RpdmVDbGFzcyAlPlwiPicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxhIGhyZWY9XCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC88JT0gZGF0YS5pZCAlPlwiIGNsYXNzPVwidmlkZW8tbGlua1wiPicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxpbWcgc3JjPVwiPCU9IGRhdGEudGh1bWJuYWlsICU+XCIgLz4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPC9hPlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cInZpZGVvLXRpdGxlXCI+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGEgaHJlZj1cImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2VtYmVkLzwlPSBkYXRhLmlkICU+XCIgY2xhc3M9XCJ2aWRlby1saW5rXCI+PCU9IGRhdGEudGl0bGUgJT48L2E+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjwvcD5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHAgY2xhc3M9XCJ2aWRlby12aWV3c1wiPjxzcGFuIGNsYXNzPVwidmlldy1jb3VudFwiPjwlPSBkYXRhLnZpZXdzICU+PC9zcGFuPiB2aWV3czwvcD4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPC9saT5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyoganNoaW50ICtXMDE1ICovXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLy8gZW5kIHl0TW9kdWxlIHZhclxuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgKiBAbWV0aG9kXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHZpZGVvRGF0ZSAtIHVwZGF0ZXMgdGhlIGZlYXR1cmVkIHZpZGVvXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgRmVhdHVyZWRWaWRlby5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24odmlkZW9EYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdGZWF0dXJlZCA9IF8udGVtcGxhdGUodGhpcy50bXBsLCB2aWRlb0RhdGEsIHsgdmFyaWFibGU6IFwiZGF0YVwiIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJsb2FkaW5nXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZW1wdHkoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChuZXdGZWF0dXJlZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhcImxvYWRpbmdcIik7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAqIEBtZXRob2RcbiAgICAgICAgICAgICAgICAgKiB7QXJyYXl9IHNsaWRlc0FycmF5IC0gZWFjaCBlbGVtZW50IGNvbnRhaW5zIGh0bWwgZm9yIGluZGl2aWR1YWwgc2xpZGVzXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgVmlkZW9zTGlzdC5wcm90b3R5cGUuYnVpbGRMaXN0ID0gZnVuY3Rpb24oc2xpZGVzQXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYXR0YWNoIHRvIERPTVxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbC5hcHBlbmQoJzx1bCBjbGFzcz1cInl0LXZpZGVvcy1saXN0XCI+JyArIHNsaWRlc0FycmF5LmpvaW4oXCJcIikgKyBcIjwvdWw+XCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGF0dGFjaCBjbGljayBoYW5kbGVyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlkZW9MaW5rcyA9IHRoaXMuJGVsLmZpbmQoXCIudmlkZW8tbGlua1wiKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbC5vbihcImNsaWNrXCIsIFwiLnZpZGVvLWxpbmtcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRzZWxmID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2VsZlBhcmVudCA9ICRzZWxmLnBhcmVudHMoXCIudmlkZW9cIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9EYXRhID0ge307XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9EYXRhLnRpdGxlID0gJHNlbGZQYXJlbnQuZGF0YShcInZpZGVvLXRpdGxlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9EYXRhLmRlc2NyaXB0aW9uID0gJHNlbGZQYXJlbnQuZGF0YShcInZpZGVvLWRlc2NyaXB0aW9uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9EYXRhLnZpZXdzID0gJHNlbGZQYXJlbnQuZGF0YShcInZpZGVvLXZpZXdzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9EYXRhLnNyYyA9ICRzZWxmLmF0dHIoXCJocmVmXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9EYXRhLmlkID0gJHNlbGZQYXJlbnQuZGF0YShcInZpZGVvLWlkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlkZW9EYXRhLnBsYXllciA9ICRzZWxmUGFyZW50LmRhdGEoXCJ2aWRlby1wbGF5ZXJcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudmlkZW8tbGlua1wiKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhcmVudChcIi52aWRlb1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGZQYXJlbnQuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBmZWF0dXJlIHZpZCBvYmplY3RcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ2LnVwZGF0ZSh2aWRlb0RhdGEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3Njcm9sbCB1cCB0byBwbGF5ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCJodG1sLCBib2R5XCIpLmFuaW1hdGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQoXCIjeXQtdmlkZW8tcGxheWVyXCIpLm9mZnNldCgpLnRvcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgNTAwXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBpbml0IHNsaWRlclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbC5maW5kKFwidWxcIikuYnhTbGlkZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVXaWR0aDogMjAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluU2xpZGVzOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4U2xpZGVzOiAxMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlTWFyZ2luOiAxMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVTbGlkZXM6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZpbml0ZUxvb3A6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFRleHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwidmlzdWFsbHloaWRkZW5cIj5OZXh0IHNldCBvZiBzbGlkZXM8L3NwYW4+PGkgY2xhc3M9XCJpY29uLWNhcmV0LXJpZ2h0XCI+PC9pPicsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2VGV4dDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJ2aXN1YWxseWhpZGRlblwiPlByZXZpb3VzIHNldCBvZiBzbGlkZXM8L3NwYW4+PGkgY2xhc3M9XCJpY29uLWNhcmV0LWxlZnRcIj48L2k+JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdWNoRW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0U3dpcGVZOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWRhcHRpdmVIZWlnaHQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8vIGJlZ2luXG5cbiAgICAgICAgICAgICAgICAvL2JhaWwgaWYgdW5kZXJzY29yZS5qcyBpc24ndCBsb2FkZWRcbiAgICAgICAgICAgICAgICBpZiAoIXdpbmRvdy5fKSB7XG4gICAgICAgICAgICAgICAgICAgIENBU1MuZGVidWcoXCJ5dE1vZHVsZSByZXF1aXJlcyBVbmRlcnNjb3JlLmpzIHRvIGJlIGxvYWRlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICR5dE1vZHVsZSA9ICR5dE1vZHVsZSB8fCAkKFwiI3l0LW1vZHVsZVwiKTtcbiAgICAgICAgICAgICAgICBmdiA9IG5ldyBGZWF0dXJlZFZpZGVvKFwiI3l0LWZlYXR1cmVkLXZpZGVvXCIpO1xuICAgICAgICAgICAgICAgIHZsID0gbmV3IFZpZGVvc0xpc3QoXCIjeXQtdmlkZW9zLWxpc3RcIik7XG4gICAgICAgICAgICAgICAgeXRVcmwgPSAkeXRNb2R1bGUuZGF0YShcInl0LXBsYXlsaXN0XCIpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCF5dFVybCkge1xuICAgICAgICAgICAgICAgICAgICBDQVNTLmRlYnVnKFwiTmVlZHMgYSBZb3VUdWJlIHBsYXlsaXN0XCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHl0VXJsLmluZGV4T2YoXCIveW91dHViZS92My9cIikgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2sgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSBkYXRhLml0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zTGVuZ3RoID0gaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcEFycmF5ID0gW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGlsZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUZvclRlbXBsYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBpdGVtc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNuaXBwZXQgPSBpdGVtc1tpXS5zbmlwcGV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByaXZhdGUgdmlkZW9zIHdvbid0IGhhdmUgYSB0aHVtYm5haWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc25pcHBldC50aHVtYm5haWxzICYmIHNuaXBwZXQudGh1bWJuYWlscy5oaWdoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFGb3JUZW1wbGF0ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBzbmlwcGV0LnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHNuaXBwZXQuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogc25pcHBldC5yZXNvdXJjZUlkLnZpZGVvSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXI6IFwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvXCIgKyBzbmlwcGV0LnJlc291cmNlSWQudmlkZW9JZCArIFwiP3JlbD0wXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWw6IHNuaXBwZXQudGh1bWJuYWlscy5oaWdoLnVybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUNsYXNzOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhRm9yVGVtcGxhdGUuYWN0aXZlQ2xhc3MgPSBcImFjdGl2ZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdXBkYXRlIGZlYXR1cmVkIHZpZCBET01cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ2LnVwZGF0ZShkYXRhRm9yVGVtcGxhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUZvclRlbXBsYXRlLmFjdGl2ZUNsYXNzID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21waWxlZCA9IF8udGVtcGxhdGUodmwudG1wbCwgZGF0YUZvclRlbXBsYXRlLCB7IHZhcmlhYmxlOiBcImRhdGFcIiB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGNvbXBpbGVkIHN0cmluZyB0byBhcnJheVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBBcnJheVtpXSA9IGNvbXBpbGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB2aWRlb3MgbGlzdCBET01cbiAgICAgICAgICAgICAgICAgICAgICAgIHZsLmJ1aWxkTGlzdCh0bXBBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gZGF0YS5kYXRhLml0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zTGVuZ3RoID0gaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcEFycmF5ID0gW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGlsZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUZvclRlbXBsYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBpdGVtc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJpdmF0ZSB2aWRlb3Mgd29uJ3QgaGF2ZSBhIHRodW1ibmFpbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtc1tpXS52aWRlby50aHVtYm5haWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUZvclRlbXBsYXRlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGl0ZW1zW2ldLnZpZGVvLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGl0ZW1zW2ldLnZpZGVvLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld3M6IGl0ZW1zW2ldLnZpZGVvLnZpZXdDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpdGVtc1tpXS52aWRlby5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcjogZW5jb2RlVVJJKGl0ZW1zW2ldLnZpZGVvLnBsYXllcltcImRlZmF1bHRcIl0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsOiBpdGVtc1tpXS52aWRlby50aHVtYm5haWwuaHFEZWZhdWx0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlQ2xhc3M6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFGb3JUZW1wbGF0ZS5hY3RpdmVDbGFzcyA9IFwiYWN0aXZlXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgZmVhdHVyZWQgdmlkIERPTVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnYudXBkYXRlKGRhdGFGb3JUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhRm9yVGVtcGxhdGUuYWN0aXZlQ2xhc3MgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSh2bC50bXBsLCBkYXRhRm9yVGVtcGxhdGUsIHsgdmFyaWFibGU6IFwiZGF0YVwiIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgY29tcGlsZWQgc3RyaW5nIHRvIGFycmF5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcEFycmF5W2ldID0gY29tcGlsZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdmlkZW9zIGxpc3QgRE9NXG4gICAgICAgICAgICAgICAgICAgICAgICB2bC5idWlsZExpc3QodG1wQXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogeXRVcmwsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25wXCIsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3NDYWxsYmFjayxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHl0TW9kdWxlLnJlbW92ZUNsYXNzKFwibG9hZGluZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGpxWEhSLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bikge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ0FTUy5kZWJ1ZyhqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBjcmVhdGVzIGFuZCBhZGRzIGEgZnVuY3Rpb24gYXMgdGhlIGRlZmF1bHQgZXJyb3IgaGFuZGxlciBmb3IgalF1ZXJ5IGFqYXggb3BlcmF0aW9uc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpbml0SnNGYWlsdXJlTm90aWZpZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgd2ViU2VydmljZSA9IFwiLy93ZWJhcHBzLmNpdHkuYWMudWsvbWF0cml4L3NlcnZpY2VzL2pRdWVyeUVycm9yLnBocFwiLFxuICAgICAgICAgICAgICAgICAgICBub3RpZnkgPSBmdW5jdGlvbihldmVudCwganFYSFIsIGFqYXhTZXR0aW5ncywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaW5zZXJ0IGFuIFwiaW1hZ2VcIiB3aGljaCBoYXMgYSB3ZWIgc2VydmljZSBhcyB0aGUgc3JjLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy90aGUgd2ViIHNlcnZpY2Ugc2VuZHMgZW1haWwgdG8gdWNzLXdlYnRlYW1cbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCI8aW1nIC8+XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlYlNlcnZpY2UgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIj91PVwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXNjYXBlKHdpbmRvd0xvY2F0aW9uLmhyZWYpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCImcz1cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzY2FwZShhamF4U2V0dGluZ3MudXJsKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiJnQ9XCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhamF4U2V0dGluZ3MudHlwZSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiJmU9XCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlc2NhcGUoZXJyb3JUaHJvd24pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBcImRpc3BsYXk6IG5vbmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgfSkuYXBwZW5kVG8oXCIjZm9vdGVyXCIpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLy9yZWdpc3RlciB0aGlzIGFzIGEgZ2xvYmFsIGFqYXggZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLmFqYXhFcnJvcihub3RpZnkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhpcyBpcyBvdXIgeWVwbm9wZSBmaWx0ZXJcbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBzcGxpY2VzIGluIHRoZSB2ZXJzaW9uIHN0cmluZyB3ZSBoYXZlIHNldCB1cCBpbiBzZXRWZXJzaW9uXG4gICAgICAgICAgICAgKiBwcmVwZW5kcyB0aGUgY29ycmVjdCBzMSBkb21haW4sIHdoZXJlIGl0IGhhc24ndCBiZWVuIHByb3ZpZGVkXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogTi5CLiB3aWxsIGZhaWwgaWYgd2UgaGF2ZSBhbiBzMSB0b3AgbGV2ZWwgZm9sZGVyIGNvbnRhaW5pbmdcbiAgICAgICAgICAgICAqIGRvdHMgKHNlZSBjb21tZW50IGJlbG93KVxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgeWVwbm9wZUZpbHRlciA9IGZ1bmN0aW9uKHJlc291cmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxvYywgbGFzdEl0ZW07XG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgSWYgd2UgYXJlIGxvYWRpbmcgaW4gYW4gYWJzb2x1dGUgdXJsLCBkb24ndCB0b3VjaCBpdFxuICAgICAgICAgICAgICAgICAqIHRoaXMgaXMgdGhlIHJlZ2V4IHdoaWNoIGZhaWxzIG9uIGEgdG9wIGxldmVsIGZvbGRlciB3aXRoIGRvdHNcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIG1hdGNoZXM6XG4gICAgICAgICAgICAgICAgICogaHR0cDovL3d3dy5leHRlcm5hbC5jb20vc2NyaXB0cy9zY3JpcHQuanNcbiAgICAgICAgICAgICAgICAgKiB3d3cuZXh0ZXJuYWwuY29tL3NjcmlwdHMvc2NyaXB0LmpzXG4gICAgICAgICAgICAgICAgICogYWJzb2x1dGUud2l0aC5tYW55LnN1Yi5kb21haW5zLmRvbWFpbi5jb20vc2NyaXB0cy9zY3JpcHQuanNcbiAgICAgICAgICAgICAgICAgKiBodHRwczovL2Fic291bHRlLndpdGgubWFueS5zdWIuZG9tYWlucy5kb21haW4uY29tL3NjcmlwdHMvc2NyaXB0LmpzXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiBkb2Vzbid0IG1hdGNoOlxuICAgICAgICAgICAgICAgICAqIG1vZHVsZXMvdGVzdC5qc1xuICAgICAgICAgICAgICAgICAqIGxpYi9zdWJkaXIvc2NyaXB0LmpzXG4gICAgICAgICAgICAgICAgICogbGliL3N1YmRpci4xMjMvc2NyaXB0LmpzXG4gICAgICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAgICAgKiB3aWxsIG1hdGNoIHdoZW4gd2UgZG9uJ3Qgd2FudCB0bzpcbiAgICAgICAgICAgICAgICAgKiB0b3BsZXZlbC53aXRoLmRvdHMvc2NyaXB0LmpzXG4gICAgICAgICAgICAgICAgICogbGliLnYyL2pxdWVyeS9zY3JpcHQuanNcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEkgdGhpbmsgaXQncyBhbiB1bmxpa2VseSBpc3N1ZSwgYnV0IGlmIGFueW9uZSBjYW4gdHdlYWsgdGhlIHJlZ2V4XG4gICAgICAgICAgICAgICAgICogdG8gcHJldmVudCB0aGlzIHBsZWFzZSBkby5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgaWYgKC9eKGh0dHBzPzpcXC9cXC8pPyhbXlxcLy5dK1xcLikrW15cXC9dK1xcLy8udGVzdChyZXNvdXJjZS51cmwpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvdXJjZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsb2MgPVxuICAgICAgICAgICAgICAgICAgICAvL2FscmVhZHkgY29udGFpbnMgczE/IC0gZG9uJ3QgYWRkIHByZWZpeFxuICAgICAgICAgICAgICAgICAgICAoKC9zMS8udGVzdChyZXNvdXJjZS51cmwpID8gXCJcIiA6IHNyY1ByZWZpeCkgKyByZXNvdXJjZS51cmwpXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3NwbGl0IGZvciBzcGxpY2luZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFwiL1wiKTtcblxuICAgICAgICAgICAgICAgIC8vc3BsaWNlIGluIHZlcnNpb25cbiAgICAgICAgICAgICAgICBsYXN0SXRlbSA9IGxvYy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIGxvY1tsYXN0SXRlbV0gPSB2ZXJzaW9uICsgbG9jW2xhc3RJdGVtXTtcblxuICAgICAgICAgICAgICAgIHJlc291cmNlLnVybCA9IGxvYy5qb2luKFwiL1wiKTtcblxuICAgICAgICAgICAgICAgIC8vIGlmIG9uIHByb2QgYW5kIHdlIGFyZSBsb2FkaW5nIGEgbW9kdWxlLy5qcyBmaWxlXG4gICAgICAgICAgICAgICAgLy8gd2Ugd2FudCAubWluLmpzIHJhdGhlciB0aGFuIC5qc1xuICAgICAgICAgICAgICAgIGlmICgvczFcXC5jaXR5Ly50ZXN0KHJlc291cmNlLnVybCkgJiYgIS9qc1xcL2xpYi8udGVzdChyZXNvdXJjZS51cmwpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlLnVybCA9IHJlc291cmNlLnVybC5yZXBsYWNlKC9qcyQvLCBcIm1pbi5qc1wiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogV2hhdCBuZWVkcyB0byBoYXBwZW4gYWZ0ZXIgYSBieHNsaWRlciBjYXJvdXNlbCBoYXMgZmluaXNoZWQgbG9hZGluZzpcbiAgICAgICAgICAgICAqIDEuIGluamVjdCBjb250cm9scyBpbnRvIEB3aWRnZXQuIGZpbmRzIGRlZmF1bHQgYnhzbGlkZXIgY29udHJvbHMsIHJlcGxhY2Ugd2l0aCBmb250IGF3ZXNvbWUgaWNvbnMgYW5kIGFwcGVuZCBpbiB3aWRnZXRcbiAgICAgICAgICAgICAqIDIuIGFkZCBzY3JvbGxhYmxlIGNsYXNzIHRvIHdpZGdldCBjb250ZW50XG4gICAgICAgICAgICAgKiAzLiByZW1vdmUgbG9hZGluZyBzcGlubmVyXG4gICAgICAgICAgICAgKiBAcGFyYW0galF1ZXJ5IHdpZGdldDogYSBqcXVlcnkgd3JhcHBlZCAud2lkZ2V0IChuZWVkZWQgZm9yIHdpZGdldCBjb250cm9scylcbiAgICAgICAgICAgICAqIEBwYXJhbSBzdHJpbmcgbWlkZGxlQnV0dG9uVGV4dDogd2hhdCB0byB3cml0ZSBvbiB0aGUgbWlkZGxlIGJ1dHRvbiAoZGVmYXVsdHMgdG8gXCJBbGxcIikgKG5lZWRlZCBmb3Igd2lkZ2V0IGNvbnRyb2xzKVxuICAgICAgICAgICAgICogQHBhcmFtIHN0cmluZyBhbGxMaW5rOiB0aGUgXCJhbGxcIiBtaWRkbGUgYnV0dG9uIGhyZWYgKG5lZWRlZCBmb3Igd2lkZ2V0IGNvbnRyb2xzKVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBhZnRlckJ4U2xpZGVyTG9hZGVkID0gZnVuY3Rpb24oJHdpZGdldCwgYWxsTGluaywgbWlkZGxlQnV0dG9uVGV4dCkge1xuICAgICAgICAgICAgICAgIHZhciAvLyBjYXJvdXNlbCBjb250cm9sc1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0J1dHRvbiA9ICR3aWRnZXQuZmluZChcIi5ieC1wcmV2XCIpLFxuICAgICAgICAgICAgICAgICAgICBuZXh0QnV0dG9uID0gJHdpZGdldC5maW5kKFwiLmJ4LW5leHRcIiksXG4gICAgICAgICAgICAgICAgICAgIGlucHV0TWlkZGxlQnV0dG9uVGV4dCA9IG1pZGRsZUJ1dHRvblRleHQgPyBtaWRkbGVCdXR0b25UZXh0IDogXCJBbGxcIjtcblxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB3aWRnZXQgbG9hZGluZyBzcGlubmVyXG4gICAgICAgICAgICAgICAgJHdpZGdldC5yZW1vdmVDbGFzcyhcIndpZGdldC1sb2FkaW5nXCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBcImFsbFwiIGJ1dHRvbiBiZXR3ZWVuIHByZXZpb3VzIGFuZCBuZXh0IGJ1dHRvbnMgaWYgaXQgaXMgbmVlZGVkXG4gICAgICAgICAgICAgICAgaWYgKGFsbExpbmspIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNCdXR0b24uYWZ0ZXIoJzxhIGhyZWY9XCInICsgYWxsTGluayArICdcIiBjbGFzcz1cImJ4LWFsbFwiID4nICsgaW5wdXRNaWRkbGVCdXR0b25UZXh0ICsgXCI8L2E+XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIGNyZWF0ZXMgYSBzdGFuZGFyZCBjYXJvdXNlbCB3aWRnZXQsIGUuZy4gZXZlbnRzLCBuZXdzXG4gICAgICAgICAgICAgKiBAcGFyYW0gT2JqZWN0IC0gdGhlIHdpZGdldCBjb250YWluZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc3RhbmRhcmRDYXJvdXNlbFdpZGdldCA9IGZ1bmN0aW9uKCR3aWRnZXQsIGFsbExpbmssIHNob3dBbW91bnQsIHdyYXApIHtcbiAgICAgICAgICAgICAgICB2YXIgJGxpc3QsIHdpZGdldEJ4T3B0aW9ucztcblxuICAgICAgICAgICAgICAgIGlmICghJHdpZGdldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc2hvd0Ftb3VudCA9IHNob3dBbW91bnQgfHwgMztcbiAgICAgICAgICAgICAgICAkbGlzdCA9ICR3aWRnZXQuZmluZChcIi5pdGVtc1wiKTtcbiAgICAgICAgICAgICAgICB3cmFwID0gd3JhcCB8fCBmYWxzZTtcblxuICAgICAgICAgICAgICAgIC8vcmVmb3JtYXQgdGhlIGNvbnRlbnQgaW50byBjb2x1bW4gc2l6ZXMgYmFzZWQgb24gZGV0ZXJtaW5lZCBzaXplLCBpZiB0aGVyZSBhcmUgbW9yZSB0aGFuIHNob3dBbW91bnQgaXRlbXNcbiAgICAgICAgICAgICAgICBpZiAoJGxpc3QuZmluZChcIj4gLml0ZW1cIikuc2l6ZSgpID4gc2hvd0Ftb3VudCkge1xuICAgICAgICAgICAgICAgICAgICB3aWRnZXRCeE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9Db250cm9sczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXVzZTogMTUwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRvSG92ZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3VjaEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5maW5pdGVMb29wOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVDb250cm9sT25FbmQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGFwdGl2ZUhlaWdodDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRUZXh0OiAnPHNwYW4gY2xhc3M9XCJ2aXN1YWxseWhpZGRlblwiPk5leHQ8L3NwYW4+PGkgY2xhc3M9XCJpY29uLWNhcmV0LXJpZ2h0XCI+PC9pPicsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2VGV4dDogJzxzcGFuIGNsYXNzPVwidmlzdWFsbHloaWRkZW5cIj5QcmV2aW91czwvc3Bhbj48aSBjbGFzcz1cImljb24tY2FyZXQtbGVmdFwiPjwvaT4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25TbGlkZXJMb2FkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZnRlckJ4U2xpZGVyTG9hZGVkKCR3aWRnZXQsIGFsbExpbmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh3cmFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3NldCB1cCBzb3J0YWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgJGxpc3Qud3JhcENoaWxkcmVuKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZEVsZW06IFwibGlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRzOiBzaG93QW1vdW50XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICRsaXN0LmJ4U2xpZGVyKHdpZGdldEJ4T3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9yZW1vdmUgd2lkZ2V0IGxvYWRpbmcgc3Bpbm5lciwgY2FzZSB3aGVyZSB0aGUgY2Fyb3VzZWwgaXNuJ3QgbmVlZGVkXG4gICAgICAgICAgICAgICAgICAgICR3aWRnZXQucmVtb3ZlQ2xhc3MoXCJ3aWRnZXQtbG9hZGluZ1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLypcbiAgICAgICAgIFRha2luZyB0aGlzIG91dCBhcyBub3QgY29udmluY2VkIGl0IHN0aWxsIHdvcmtzLCBwdXQgaXQgYmFjayBpZiBzb21lb25lIGV2ZXIgYXNrcyBmb3IgYSBGbGlja3Igd2lkZ2V0XG4gICAgICAgICBpbml0RmxpY2tyID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICB2YXIgJHdpZGdldCA9ICQoXCIjZmxpY2tyLXdpZGdldFwiKSxcbiAgICAgICAgICRzbGlkZVdyYXBwZXIgPSAkd2lkZ2V0LmZpbmQoXCJ1bFwiKSxcbiAgICAgICAgIGxvYWRlZE90aGVyUGljcyxcbiAgICAgICAgIGJ4U2xpZGVyQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgIGRlYnVnKFwiZmxpY2tyIGNhbGxiYWNrLi4uXCIpO1xuXG4gICAgICAgICAkKFwiLndpZGdldC1jb250ZW50XCIsICR3aWRnZXQpLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAvL2ZpbmQgdGhlIHVsXG4gICAgICAgICB2YXIgZmlyc3RkaXYgPSAkKFwidWwgZGl2OmZpcnN0LWNoaWxkXCIsIHRoaXMpLFxuICAgICAgICAgLy91bCA9ICQoXCJ1bFwiLCB0aGlzKSwgZGVmaW5lZCBub3QgdXNlZFxuICAgICAgICAgdGhpc0pxID0gJCh0aGlzKSxcbiAgICAgICAgIGhlaWdodCA9IGZpcnN0ZGl2LmhlaWdodCgpLFxuICAgICAgICAgd2lkdGggPSBmaXJzdGRpdi53aWR0aCgpO1xuXG4gICAgICAgICAvL2FkZCBjbGFzc2VzXG4gICAgICAgICB0aGlzSnEuYWRkQ2xhc3MoXCJzY3JvbGxhYmxlXCIpO1xuXG4gICAgICAgICAvL2FkZCBjc3MgdG8gLndpZGdldC1jb250ZW50XG4gICAgICAgICB0aGlzSnEuc3RvcCgpLmFuaW1hdGUoe1xuICAgICAgICAgXCJtaW4taGVpZ2h0XCI6IGhlaWdodFxuICAgICAgICAgfSk7XG4gICAgICAgICB0aGlzSnEuY3NzKFwid2lkdGhcIiwgd2lkdGgpO1xuXG4gICAgICAgICAvL3JlbW92ZSBsb2FkaW5nIGljb24gd2hlbiB0aGUgY29udGVudCBpcyByZWFkeVxuICAgICAgICAgJHdpZGdldC5yZW1vdmVDbGFzcyhcIndpZGdldC1sb2FkaW5nXCIpO1xuXG4gICAgICAgICB9KTtcblxuICAgICAgICAgYWZ0ZXJCeFNsaWRlckxvYWRlZCgkd2lkZ2V0KTtcblxuICAgICAgICAgfTtcblxuICAgICAgICAgLy9hdHRhY2ggYW4gZXZlbnQgdG8gaW5pdCB0aGUgcmVzdCBvZiB0aGUgcGljc1xuICAgICAgICAgJHdpZGdldC5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgLy93ZSBvbmx5IHdhbnQgdG8gcnVuIHRoaXMgb25jZVxuICAgICAgICAgaWYgKGxvYWRlZE90aGVyUGljcykge1xuICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgfVxuXG4gICAgICAgICBsb2FkZWRPdGhlclBpY3MgPSB0cnVlO1xuXG4gICAgICAgICAvL3RyYW5zbGF0ZSBhbGwgdGhlIHNwYW4uaW1hZ2V1cmxcInMgaW50byBhY3R1YWwgaW1hZ2VzXG4gICAgICAgICAvLyhzYXZlcyBzb21lIHJlbmRlcmluZyB0aW1lKVxuICAgICAgICAgJChcImEgLmltYWdldXJsXCIsICR3aWRnZXQpLmVhY2goZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICB2YXIgdGhpc0pxID0gJCh0aGlzKSxcbiAgICAgICAgIHRleHQgPSB0aGlzSnEudGV4dCgpLFxuICAgICAgICAgaW1nVGFnID0gXCI8aW1nIHNyYz1cXFwiXCIgKyB0ZXh0ICsgXCJcXFwiIGFsdD1cXFwiXFxcIj5cIjtcblxuICAgICAgICAgdGhpc0pxLnBhcmVudCgpLnRleHQoXCJcIikucHJlcGVuZChpbWdUYWcpO1xuXG4gICAgICAgICB9KTtcblxuICAgICAgICAgJChcInAgLmltYWdldXJsXCIsICR3aWRnZXQpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgdmFyIHRoaXNKcSA9ICQodGhpcyksXG4gICAgICAgICB0ZXh0ID0gdGhpc0pxLnRleHQoKSxcbiAgICAgICAgIHN0eWxlQXR0ciA9IFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiICsgdGV4dCArIFwiKTtcIjtcblxuICAgICAgICAgdGhpc0pxLnBhcmVudCgpLmF0dHIoXCJzdHlsZVwiLCBzdHlsZUF0dHIpO1xuICAgICAgICAgdGhpc0pxLnJlbW92ZSgpO1xuXG4gICAgICAgICB9KTtcblxuICAgICAgICAgfSk7XG5cbiAgICAgICAgIC8vc2V0IHVwIHNjcm9sbGFibGVcbiAgICAgICAgICRzbGlkZVdyYXBwZXIuYnhTbGlkZXIoe1xuICAgICAgICAgYXV0bzogZmFsc2UsXG4gICAgICAgICBhdXRvQ29udHJvbHM6IGZhbHNlLFxuICAgICAgICAgcGF1c2U6IDE1MDAwLFxuICAgICAgICAgYXV0b0hvdmVyOiB0cnVlLFxuICAgICAgICAgdG91Y2hFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgIHBhZ2VyOiBmYWxzZSxcbiAgICAgICAgIGluZmluaXRlTG9vcDogZmFsc2UsXG4gICAgICAgICBoaWRlQ29udHJvbE9uRW5kOiB0cnVlLFxuICAgICAgICAgYWRhcHRpdmVIZWlnaHQ6IHRydWUsXG4gICAgICAgICBuZXh0VGV4dCA6IFwiPHNwYW4gY2xhc3M9XFxcInZpc3VhbGx5aGlkZGVuXFxcIj5OZXh0PC9zcGFuPjxpIGNsYXNzPVxcXCJpY29uLWNhcmV0LXJpZ2h0XFxcIj48L2k+XCIsXG4gICAgICAgICBwcmV2VGV4dCA6IFwiPHNwYW4gY2xhc3M9XFxcInZpc3VhbGx5aGlkZGVuXFxcIj5QcmV2aW91czwvc3Bhbj48aSBjbGFzcz1cXFwiaWNvbi1jYXJldC1sZWZ0XFxcIj48L2k+XCIsXG4gICAgICAgICBvblNsaWRlckxvYWQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgICBieFNsaWRlckNhbGxiYWNrKCk7XG4gICAgICAgICB9XG4gICAgICAgICB9KTtcblxuICAgICAgICAgfSwvLyBlbmQgaW5pdEZsaWNrciovXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogbWFwIHdpZGdldFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpbml0TWFwID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdvb2dsZU1hcHNNYXJrZXJzID0ge30sXG4gICAgICAgICAgICAgICAgICAgICRtYXBKc0RhdGEgPSAkKFwiLm1hcEpzRGF0YVwiKSxcbiAgICAgICAgICAgICAgICAgICAgbWFwc0NhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlhbG9nUHJvcGVydGllcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b09wZW46IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RhbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA1MDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBbXCJ0b3BcIiwgXCJyaWdodFwiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiRmluZCBVc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNpemFibGU6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JlZ2lzdGVyIHRoZSBsb25nL2xhdCBmb3IgdGhpcyBwYWdlIGFzIGEgZ29vZ2xlIG1hcHMgTG9uZ0xhdCBvYmplY3QsIHRha2UgZnJvbSBmaXJzdCBtYXJrZXIgKHNob3VsZCBhbHdheXMgYmUgYXQgbGVhc3Qgb25lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpc0xhdExuZyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoZ29vZ2xlTWFwc01hcmtlcnMubWFya2VyMC5nZW9sYXQsIGdvb2dsZU1hcHNNYXJrZXJzLm1hcmtlcjAuZ2VvbG9uZyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0xhdExuZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBQcm9wZXJ0aWVzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxNSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jZW50ZXI6IHRoaXNMYXRMbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVEZWZhdWx0VUk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRpb25Db250cm9sOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZUNvbnRyb2w6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcFR5cGVJZDogZ29vZ2xlLm1hcHMuTWFwVHlwZUlkLlJPQURNQVAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVldFZpZXdDb250cm9sOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWFwT3ZlcmxheVBhbmUgPSAkKFwiPGRpdj5cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIk1hcCBoZXJlIVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogXCJtYXBCaWdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9lbmQgdmFyc1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiZWdpblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3BvcHVsYXRlIGdvb2dsZU1hcHNNYXJrZXJzIG9iamVjdCB3aXRoIGdlbyB2YXJzIGZyb20gdGhlIHBhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICRtYXBKc0RhdGEuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlTWFwc01hcmtlcnNbXCJtYXJrZXJcIiArIGldID0ge307XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwibGkubWFwLXBhcmFtXCIsIHRoaXMpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50TmFtZSA9ICQodGhpcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwiYXNzZXRfbWV0YWRhdGFfXCIsIFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShcIi5cIiwgXCJcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKFwibWFwLXBhcmFtXCIsIFwiXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShcIiBcIiwgXCJcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnROYW1lID09PSBcImdlb2Rlc2NyaXB0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZU1hcHNNYXJrZXJzW1wibWFya2VyXCIgKyBpXVtlbGVtZW50TmFtZV0gPSAkKHRoaXMpLmh0bWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZU1hcHNNYXJrZXJzW1wibWFya2VyXCIgKyBpXVtlbGVtZW50TmFtZV0gPSAkKHRoaXMpLnRleHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlZ2lzdGVyIHRoZSBsb25nL2xhdCBmb3IgdGhpcyBwYWdlIGFzIGEgZ29vZ2xlIG1hcHMgTG9uZ0xhdCBvYmplY3QsIHRha2UgZnJvbSBmaXJzdCBtYXJrZXIgKHNob3VsZCBhbHdheXMgYmUgYXQgbGVhc3Qgb25lKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0xhdExuZyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlTWFwc01hcmtlcnMubWFya2VyMC5nZW9sYXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ29vZ2xlTWFwc01hcmtlcnMubWFya2VyMC5nZW9sb25nXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBQcm9wZXJ0aWVzLmNlbnRlciA9IHRoaXNMYXRMbmc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRtYXBPdmVybGF5UGFuZS5hcHBlbmRUbyhcImJvZHlcIikuZGlhbG9nKGRpYWxvZ1Byb3BlcnRpZXMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2JpbmQgZXZlbnRzXG4gICAgICAgICAgICAgICAgICAgICAgICAkbWFwT3ZlcmxheVBhbmUub24oXCJkaWFsb2dvcGVuXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcHJvYmFibHkgbm90IGJlc3QgdGhhdCB3ZSBkbyB0aGlzIG9uIGV2ZXJ5IG9wZW4sIGJ1dCBkb24ndCB0aGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhlcmUgaXMgYSBnb29nbGUgTWFwIGRlc3RydWN0b3IgYW5kIGl0IGRvZXNuJ3Qgc2VlbSB0byBjYXVzZSBpc3N1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcEJpZ1wiKSwgbWFwUHJvcGVydGllcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaW5pdGxhaXNlIGluZm9XaW5kb3dcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiA0MDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYmluZCBpbmZvIHdpbmRvdyB0byBtYXJrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluZEluZm9XaW5kb3cgPSBmdW5jdGlvbihtYXJrZXIsIGRlc2NyaXB0aW9uLCBtYXAsIGluZm9XaW5kb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvV2luZG93LnNldENvbnRlbnQoZGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9XaW5kb3cub3BlbihtYXAsIG1hcmtlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgLy9lbmQgYmluZCBpbmZvIHdpbmRvd1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVNYXJrZXIgPSBmdW5jdGlvbihwb2ludCwgbmFtZSwgZGVzY3JpcHRpb24sIGljb24sIG1hcCwgaW5mb1dpbmRvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcDogbWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBwb2ludCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBpY29uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluZEluZm9XaW5kb3cobWFya2VyLCBkZXNjcmlwdGlvbiwgbWFwLCBpbmZvV2luZG93KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsgLy9lbmQgY3JlYXRlTWFya2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5kIHZhcnNcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuZWFjaChnb29nbGVNYXBzTWFya2VycywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcodGhpcy5nZW9sYXQsIHRoaXMuZ2VvbG9uZyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlTWFya2VyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdlb3BsYWNlbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VvZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdlb2ljb25VcmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvV2luZG93XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTsgLy9lbmQgJG1hcE92ZXJsYXlQYW5lLm9uXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vb3ZlcnJpZGUgdGhlIG1hcCBjbGlja3NcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIud2lkZ2V0IC5tYXBcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtYXBPdmVybGF5UGFuZS5kaWFsb2coXCJvcGVuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07IC8vZW5kIG1hcHNDYWxsYmFja1xuXG4gICAgICAgICAgICAgICAgaWYgKCRtYXBKc0RhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcHNDYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIGNvdXJzZXMgd2lkZ2V0XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGluaXRDb3Vyc2VzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyICR3aWRnZXQgPSAkKFwiI2NvdXJzZXMtd2lkZ2V0XCIpLFxuICAgICAgICAgICAgICAgICAgICAkd2lkZ2V0Q29udGVudCA9ICR3aWRnZXQuZmluZChcIi53aWRnZXQtY29udGVudFwiKTtcblxuICAgICAgICAgICAgICAgICR3aWRnZXRDb250ZW50LmFjY29yZGlvbih7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodFN0eWxlOiBcImNvbnRlbnRcIixcbiAgICAgICAgICAgICAgICAgICAgY29sbGFwc2libGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpY29uczogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZnRlckJ4U2xpZGVyTG9hZGVkKCR3aWRnZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCAvL2VuZCBpbml0Q291cnNlc1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDYWxsIHRvIGFjdGlvbiB3aWRnZXRcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaW5pdENhbGxUb0FjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBzdGFydF9kYXRlID0gJChcIiNzdGFydF9kYXRlXCIpLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICBlbmRfZGF0ZSA9ICQoXCIjZW5kX2RhdGVcIikudmFsKCksXG4gICAgICAgICAgICAgICAgICAgIHNkID0gbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgZWQgPSBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICAgICBjZCxcbiAgICAgICAgICAgICAgICAgICAgc3BsaXREYXRlID0gZnVuY3Rpb24oZHQsIGlkdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGVBcnJheSA9IGR0LnNwbGl0KFwiL1wiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRvZkFycmF5ID0gZGF0ZUFycmF5WzJdLnNwbGl0KFwiIFwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWR0LnNldEZ1bGxZZWFyKGVuZG9mQXJyYXlbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWR0LnNldE1vbnRoKGRhdGVBcnJheVsxXSAtIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWR0LnNldERhdGUoZGF0ZUFycmF5WzBdKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkdDtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHNkID0gc3BsaXREYXRlKHN0YXJ0X2RhdGUsIHNkKTtcbiAgICAgICAgICAgICAgICBlZCA9IHNwbGl0RGF0ZShlbmRfZGF0ZSwgZWQpO1xuXG4gICAgICAgICAgICAgICAgLy9jdXJyZW50IGRhdGVcbiAgICAgICAgICAgICAgICBjZCA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZWQgPj0gY2QgJiYgc2QgPD0gY2QpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9TaG93IHRoZSBvbiBkYXRlXG4gICAgICAgICAgICAgICAgICAgICQoXCIjY29udGVudF9vbl9kYXRlXCIpLmF0dHIoXCJjbGFzc1wiLCBcIndpZGdldC1jb250ZW50IGN0YS13aWRnZXQtc2hvd1wiKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNjb250ZW50X291dF9vZl9kYXRlXCIpLmF0dHIoXCJjbGFzc1wiLCBcImN0YS13aWRnZXQtaGlkZVwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL1Nob3cgb3V0IG9mIGRhdGVcbiAgICAgICAgICAgICAgICAgICAgJChcIiNjb250ZW50X291dF9vZl9kYXRlXCIpLmF0dHIoXCJjbGFzc1wiLCBcIndpZGdldC1jb250ZW50IGN0YS13aWRnZXQtc2hvd1wiKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNjb250ZW50X29uX2RhdGVcIikuYXR0cihcImNsYXNzXCIsIFwiY3RhLXdpZGdldC1oaWRlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIGluaXRpYXRlcyBhbiBpbWFnZSBnYWxsZXJ5IHdpZGdldFxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEByZXR1cm4ge29iamVjdCB8fCB1bmRlZmluZWR9IHJldHVybnMgdGhlIGdhbGxlcmlhIGpRdWVyeSBvYmplY3QgaWZcbiAgICAgICAgICAgICAqIHN1Y2Nlc3NmdWwgZWxzZSB1bmRlZmluZWQgLSBmb3IgaW5zdGFuY2UgaWYgJGdhbGxlcnkgaXMgbm90IGEgalF1ZXJ5IG9iamVjdFxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaW5pdEdhbGxlcnkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGdhbGxlcnkgPSAkKFwiI2dhbGxlcnktd2lkZ2V0IC5nYWxsZXJ5XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVHYWxsZXJ5KCRnYWxsZXJ5LCB0cnVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBtYXN0ZXIgd2lkZ2V0IGluaXRpYWxpc2VyLCBjYWxscyBhbGwgdGhlIG90aGVyIGluaXR7bWFwLGV2ZW50cy4uLn0gZnVuY3Rpb25zXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGluaXRXaWRnZXRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdpZGdldHMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmOiBpbml0TWFwXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY291cnNlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGY6IGluaXRDb3Vyc2VzXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZjogc3RhbmRhcmRDYXJvdXNlbFdpZGdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxMaW5rOiBcIi8vd3d3LmNhc3MuY2l0eS5hYy51ay9ldmVudHNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QW1vdW50OiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXA6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZjogc3RhbmRhcmRDYXJvdXNlbFdpZGdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxMaW5rOiBcIi8vd3d3LmNhc3MuY2l0eS5hYy51ay9uZXdzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Ftb3VudDogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVzdGltb25pYWxzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZjogc3RhbmRhcmRDYXJvdXNlbFdpZGdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QW1vdW50OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJzcG90bGlnaHQtcmVzZWFyY2hcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGY6IHN0YW5kYXJkQ2Fyb3VzZWxXaWRnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Ftb3VudDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJzczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGY6IHN0YW5kYXJkQ2Fyb3VzZWxXaWRnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Ftb3VudDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZjogc3RhbmRhcmRDYXJvdXNlbFdpZGdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QW1vdW50OiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FsbGVyeToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGY6IGluaXRHYWxsZXJ5XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgY3RhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZjogaW5pdENhbGxUb0FjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgfSAvKixcbiAgICAgICAgICAgICAgICAgICAgICAgICBcImZsaWNrclwiIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgIGY6IGluaXRGbGlja3JcbiAgICAgICAgICAgICAgICAgICAgICAgICB9LCovXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHdpZGdldCxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFdpZGdldCxcbiAgICAgICAgICAgICAgICAgICAgaW5pdEZuO1xuXG4gICAgICAgICAgICAgICAgZGVidWcoXCJpbml0IHdpZGdldCByZWxhdGVkIHNjcmlwdHNcIik7XG5cbiAgICAgICAgICAgICAgICAvLyBsb29wIHRocm91Z2ggZWFjaCB3aWRnZXQgdHlwZSBhbmQgaW5pdCBpZiBwcmVzZW50XG4gICAgICAgICAgICAgICAgZm9yICh3aWRnZXQgaW4gd2lkZ2V0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHdpZGdldHNbd2lkZ2V0XSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2RlYnVnKFwic2VhcmNoaW5nIGZvciBcIiArIGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFdpZGdldCA9ICQoXCIjXCIgKyB3aWRnZXQgKyBcIi13aWRnZXRcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYmFpbCBoZXJlIGlmIHRoZSB3aWRnZXQgaXMgbm90IHByZXNlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50V2lkZ2V0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKFwibm8gXCIgKyB3aWRnZXQgKyBcIiB3aWRnZXRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRGbiA9IHdpZGdldHNbd2lkZ2V0XS5mO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2JhaWwgaGVyZSBpZiB3ZSBjYW4ndCBmaW5kIGluaXQgZnVuY1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbml0Rm4gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnKFwiY2FuJ3QgZmluZCBpbml0IGZ1bmMgb2YgXCIgKyB3aWRnZXQgKyBcIiB3aWRnZXRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJ1biB0aGUgaW5pdFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWcoXCJydW5uaW5nIGluaXQgZnVuYyBvZiBcIiArIHdpZGdldCArIFwiIHdpZGdldFwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluaXRGbiA9PT0gc3RhbmRhcmRDYXJvdXNlbFdpZGdldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRGbi5hcHBseSh0aGlzLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaWRnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldHNbd2lkZ2V0XS5hbGxMaW5rLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRzW3dpZGdldF0uc2hvd0Ftb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0c1t3aWRnZXRdLndyYXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdEZuLmFwcGx5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAvLyBlbmQgaW5pdFdpZGdldHNcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU3R1ZmYgbmVlZGVkIG9uIGV2ZXJ5cGFnZSAtIGV4cGxvcmUgY2l0eSwgbG9naW4gZXRjLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpbml0UGFnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciAkd2luZG93T2JqID0gJCh3KSxcbiAgICAgICAgICAgICAgICAgICAgJGJvZHkgPSAkKFwiYm9keVwiKSxcbiAgICAgICAgICAgICAgICAgICAgLy8gc2VhcmNoXG4gICAgICAgICAgICAgICAgICAgICRmb3JtID0gJGJvZHkuZmluZChcIi5oZWFkZXItc2VhcmNoXCIpLFxuICAgICAgICAgICAgICAgICAgICAkcXVlcnkgPSAkZm9ybS5maW5kKFwiLmhlYWRlci1zZWFyY2hfX3F1ZXJ5XCIpLFxuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gXCJtYWluLWFsbFwiLFxuICAgICAgICAgICAgICAgICAgICAvLyBuYXZpZ2F0aW9uXG4gICAgICAgICAgICAgICAgICAgIC8vVkkgJGdsb2JhbE5hdiA9ICRib2R5LmZpbmQoXCIjZ2xvYmFsLW5hdlwiKSxcbiAgICAgICAgICAgICAgICAgICAgJGJyZWFkY3J1bWJzTmF2ID0gJChcIiNicmVhZGNydW1icy1uYXZcIiksXG4gICAgICAgICAgICAgICAgICAgICRyZXNwb25zaXZlVG9nZ2xlcnMgPSAkKFwiLnJlc3BvbnNpdmUtdG9nZ2xlclwiKSwgLy8gYnV0dG9ucyB0byBoaWRlL3Nob3cgbmF2aWdhdGlvbiBtZW51c1xuICAgICAgICAgICAgICAgICAgICAvL1ZJICR0b2dnbGVlcyA9ICQoXCIudG9nZ2xlXCIpLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgYXJlYXMgdG8gYmUgc2hvd24vaGlkZGVuIHdoZW4gdGhlIGFib3ZlIGJ1dHRvbiBpcyBjbGlja2VkXG4gICAgICAgICAgICAgICAgICAgIC8qIFZJICRnbG9iYWxOYXZBY2NvcmRpb25PcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBcIi5oZWFkZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXBzaWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dG9IZWlnaHQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb25zOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9LCovXG4gICAgICAgICAgICAgICAgICAgIC8vIGluIHBhZ2UgVUkgZWxlbWVudHNcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRlbnQgPSAkKFwiI2NvbnRlbnRcIiksXG4gICAgICAgICAgICAgICAgICAgICRjYXJvdXNlbE9iaiA9ICQoXCIjcHJvbW8tYXJlYVwiKSwgLy8gY2Fyb3VzZWwgY29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgICRhY2NvcmRpb25zID0gJGJvZHkuZmluZChcIi5hY2NvcmRpb25cIiksXG4gICAgICAgICAgICAgICAgICAgICR0YWJzID0gJGJvZHkuZmluZChcIi50YWJzXCIpLFxuICAgICAgICAgICAgICAgICAgICAkeXRNb2R1bGUgPSAkKFwiLnl0LW1vZHVsZVwiKSxcbiAgICAgICAgICAgICAgICAgICAgJGdhbGxlcmllcyA9ICRjb250ZW50LmZpbmQoXCIuZ2FsbGVyeVwiKSxcbiAgICAgICAgICAgICAgICAgICAgJGltYWdlcyA9ICRjb250ZW50LmZpbmQoXCJpbWdcIik7XG4gICAgICAgICAgICAgICAgLy9lbmQgaW5pdFBhZ2UgdmFyc1xuXG4gICAgICAgICAgICAgICAgLy8gZnVua3kgbG9hZGluZyBpbWFnZXNcbiAgICAgICAgICAgICAgICBpZiAoJGltYWdlcy5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZUxvYWRlZCgkaW1hZ2VzKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkaW1hZ2VzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZUxvYWRlZCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLm9uKFwibG9hZFwiLCBpbWFnZUxvYWRlZCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBzZXQgc2NyZWVuc2l6ZVxuICAgICAgICAgICAgICAgIHNjcmVlblNpemUgPSBnZXRXaW5kb3dXaWR0aCh3aW5kb3cpID49IGJyZWFrcG9pbnRzLndpZGUgPyBcIndpZGVcIiA6IFwibW9iaWxlXCI7XG5cbiAgICAgICAgICAgICAgICAvLyBhdHRhY2ggY2xpY2sgZXZlbnRzIG9uIG1vYmlsZSBuYXZpZ2F0aW9uIHRvZ2dsZXJzXG4gICAgICAgICAgICAgICAgJHJlc3BvbnNpdmVUb2dnbGVycy5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRzZWxmID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICR0b2dnbGUgPSAkc2VsZi5uZXh0KFwiLnRvZ2dsZVwiKTtcblxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICRzZWxmLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgICAgICAkdG9nZ2xlLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vaWYgKCRzZWxmLmhhc0NsYXNzKFwiZ2xvYmFsLW5hdi1idHRuXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIC8vIG5lZWQgdG8gcmVmZXNoIHRvIGNhbGN1bGF0ZSBoZWlnaHQgd2hlbiBhY2NvcmRpb24gaXMgdmlzaWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAkZ2xvYmFsTmF2LmFjY29yZGlvbihcInJlZnJlc2hcIik7XG4gICAgICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFNb2Rlcm5penIuc3ZnKSB7XG4gICAgICAgICAgICAgICAgICAgICQoXCIubG9nbyBpbWdcIikuYXR0cihcInNyY1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJzcmNcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShcIi5zdmdcIiwgXCIucG5nXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBpZiBjdXJyZW50LXBhZ2UgaXMgZmlyc3QgaW4gdGhlIG1lbnUsIGl0IG5lZWRzIGRpZmZlcmVudCBwYWRkaW5nXG4gICAgICAgICAgICAgICAgaWYgKCRicmVhZGNydW1ic05hdi5maW5kKFwibGlcIikubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQoXCIuY3VycmVudC1wYWdlXCIpLmFkZENsYXNzKFwiZmlyc3RcIik7XG4gICAgICAgICAgICAgICAgICAgICRicmVhZGNydW1ic05hdi5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBrZXlib2FyZCBhY2Nlc3NpYmxlIGRyb3Bkb3duc1xuICAgICAgICAgICAgICAgIC8qIFZJXG4gICAgICAgICAgICAgICAgJGdsb2JhbE5hdi5maW5kKFwiYVwiKS5mb2N1cyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50cyhcIi5kZFwiKS5hZGRDbGFzcyhcImhvdmVyXCIpO1xuICAgICAgICAgICAgICAgIH0pLmJsdXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoXCIuZGRcIikucmVtb3ZlQ2xhc3MoXCJob3ZlclwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICAgICAgLy8gb24gcGFnZSBsb2FkIGlmIHdlIHN0YXJ0IHdpdGggd2lkZSBzaXplZCBicm93c2VyIHdlIHdhbnRcbiAgICAgICAgICAgICAgICAvLyB0aGUgbWVnYSBkcm9wZG93bnNcbiAgICAgICAgICAgICAgICAvKiBWSVxuICAgICAgICAgICAgICAgIGlmIChzY3JlZW5TaXplID09PSBcIndpZGVcIikge1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJGdsb2JhbE5hdi5kYXRhKFwidWlcIiwgXCJhY2NvcmRpb25cIik7XG4gICAgICAgICAgICAgICAgICAgICRnbG9iYWxOYXYuYWNjb3JkaW9uKCRnbG9iYWxOYXZBY2NvcmRpb25PcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgIC8vIGF0dGFjaCByZXNpemUgZXZlbnQgdG8gd2luZG93XG4gICAgICAgICAgICAgICAgLyogVklcbiAgICAgICAgICAgICAgICAkd2luZG93T2JqLnJlc2l6ZShmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF2aWV3cG9ydENoYW5nZWQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdldFdpbmRvd1dpZHRoKHdpbmRvdykgPj0gYnJlYWtwb2ludHMud2lkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9iaWcgdG8gc21hbGw/XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JlZW5TaXplID0gXCJ3aWRlXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwic21hbGwgdG8gYmlnLCBUT0RPOiBraWxsIGFjY29yZGlvblwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVzdHJveSBhY2NvcmRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkZ2xvYmFsTmF2LmRhdGEoXCJ1aVwiKSA9PT0gXCJhY2NvcmRpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRnbG9iYWxOYXYuZGF0YShcInVpXCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRnbG9iYWxOYXYuYWNjb3JkaW9uKFwiZGVzdHJveVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xvc2UgYW55IG9wZW5lcnMgd2hpY2ggd2VyZSBvcGVuIGJlZm9yZSB3aWR0aCBjaGFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICRyZXNwb25zaXZlVG9nZ2xlcnMucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdG9nZ2xlZXMucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJiaWcgdG8gc21hbGxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JlZW5TaXplID0gXCJtb2JpbGVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICRnbG9iYWxOYXYuZGF0YShcInVpXCIsIFwiYWNjb3JkaW9uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGdsb2JhbE5hdi5hY2NvcmRpb24oJGdsb2JhbE5hdkFjY29yZGlvbk9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvLyBpbml0YWxpc2UgYW55IGFjY29yZGlvbnMgZm91bmRcbiAgICAgICAgICAgICAgICAkYWNjb3JkaW9ucy5hY2NvcmRpb24oe1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHRTdHlsZTogXCJjb250ZW50XCIsXG4gICAgICAgICAgICAgICAgICAgIGNvbGxhcHNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBhbmltYXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaWNvbnM6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBpbml0YWxpc2UgYW55IHRhYnMgZm91bmRcbiAgICAgICAgICAgICAgICAvLyBtYWtlIHN1cmUgd2UgdHJpZ2dlciBzdGF0ZWZ1bGwgdGFicyBpZiBuZWVkZWRcbiAgICAgICAgICAgICAgICBpZiAoJHRhYnMuaGFzQ2xhc3MoXCJzdGF0ZWZ1bGwtdGFic1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAkdGFicy50YWJzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhc2ggPSBnZXRVcmxIYXNoKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZEhhc2g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc2gubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZEhhc2ggPSBwYXJzZUludChoYXNoWzBdLnNwbGl0KFwiPVwiKVsxXSkgLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGFicy5maW5kKFwiYTplcShcIiArIHBhcnNlSW50KGFwcGVuZEhhc2gpICsgXCIpXCIpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2YXRlOiBmdW5jdGlvbihldmVudCwgdWkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3SGFzaCA9IFwiI2NvdXJzZXMtZGV0YWlscz1cIiArICgkKHVpLm5ld1RhYlswXSkuaW5kZXgoKSArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoaXN0b3J5LnB1c2hTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBudWxsLCBuZXdIYXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gbmV3SGFzaDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICR0YWJzLnRhYnMoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBpZiB3ZSBoYXZlIGEgY2Fyb3VzZWwgLSBzZXQgaXQgdXBcbiAgICAgICAgICAgICAgICBpZiAoJGNhcm91c2VsT2JqLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB5ZXBub3BlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWQ6IHNjcmlwdHMudW5kZXJzY29yZS5zcmMsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlU2xpZGVyKCRjYXJvdXNlbE9iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGlmIGEgZ2FsbGVyeSBpcyBmb3VuZCBpbnZva2UgaW5pdEdhbGxlcnkgZm9yIGVhY2hcbiAgICAgICAgICAgICAgICBpZiAoJGdhbGxlcmllcy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJGdhbGxlcmllcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlR2FsbGVyeSgkKHRoaXMpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGZhbGxiYWNrIGZvciBicm93c2VycyB0aGF0IGRvbid0IHVuZGVyc3RhbmQgcGxhY2Vob2xkZXIgYXR0cmlidXRlXG4gICAgICAgICAgICAgICAgaWYgKCFNb2Rlcm5penIuaW5wdXQucGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgJChcIltwbGFjZWhvbGRlcl1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5mb2N1cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dC52YWwoKSA9PT0gaW5wdXQuYXR0cihcInBsYWNlaG9sZGVyXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQucmVtb3ZlQ2xhc3MoXCJwbGFjZWhvbGRlclwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmJsdXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQudmFsKCkgPT09IFwiXCIgfHwgaW5wdXQudmFsKCkgPT09IGlucHV0LmF0dHIoXCJwbGFjZWhvbGRlclwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5hZGRDbGFzcyhcInBsYWNlaG9sZGVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWwoaW5wdXQuYXR0cihcInBsYWNlaG9sZGVyXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmJsdXIoKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIltwbGFjZWhvbGRlcl1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wYXJlbnRzKFwiZm9ybVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1Ym1pdChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKFwiW3BsYWNlaG9sZGVyXVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQudmFsKCkgPT09IGlucHV0LmF0dHIoXCJwbGFjZWhvbGRlclwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnZhbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL3NldCB1cCBhdXRvY29tcGxldGUgb24gc2VhcmNoIGJveFxuICAgICAgICAgICAgICAgIHNlYXJjaEF1dG9Db21wbGV0ZSgkZm9ybSwgJHF1ZXJ5LCBjb2xsZWN0aW9uKTtcblxuICAgICAgICAgICAgICAgIC8vY2F0Y2ggYW55IGhhbGx3YXkgc3R5bGUgY2FsbCB0byBhY3Rpb24gb3IgYmFubmVyIGFjdGlvblxuICAgICAgICAgICAgICAgIGlmICgkY29udGVudC5maW5kKFwiLmFjdGlvbi1oYWxsd2F5LCAuYmFubmVyLWhhbGx3YXlcIikubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIENBU1MubG9hZChcImhhbGx3YXlcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gY2F0Y2ggYW55IHZpZGVvcyB0aGF0IGhhdmUgYmVlbiBtYW51YWxseSBpbnB1dFxuICAgICAgICAgICAgICAgICQoXCJpZnJhbWVbc3JjKj0neW91dHViZSddXCIpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkZWxlbWVudCA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRXaWR0aCA9ICRlbGVtZW50Lm91dGVyV2lkdGgoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICRwYXJlbnQgPSAkZWxlbWVudC5wYXJlbnQoKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBkb3VibGUgd3JhcCBhbiBpZnJhbWVcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkcGFyZW50Lmhhc0NsYXNzKFwiZW1iZWQtY29udGFpbmVyXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgZWxhc3RpYyBvYmplY3RzLCB3ZSBuZWVkIDIgKCEpIHdyYXBwZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC53cmFwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZW1iZWQtd3JhcHBlclwiIHN0eWxlPVwibWF4LXdpZHRoOicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWRXaWR0aCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdweFwiPjxkaXYgY2xhc3M9XCJlbWJlZC1jb250YWluZXJcIj48L2Rpdj48L2Rpdj4nXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBZb3VUdWJlIG1vZHVsZVxuICAgICAgICAgICAgICAgIGlmICgkeXRNb2R1bGUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHllcG5vcGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZDogc2NyaXB0cy51bmRlcnNjb3JlLnNyYyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5dE1vZHVsZSgkeXRNb2R1bGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAvL2VuZCBpbml0UGFnZVxuICAgICAgICAgICAgLyoqIGRlZmVycmVkIGZ1bmN0aW9ucyAqKi9cbiAgICAgICAgICAgIGluaXREZWZlcnJlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgQ0lUWV9PUFRJT05TICE9PSBcInVuZGVmaW5lZFwiICYmIENJVFlfT1BUSU9OUy5kZWZlcikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IENJVFlfT1BUSU9OUy5kZWZlci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgQ0lUWV9PUFRJT05TLmRlZmVyW2ldKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJbml0aWFsaXNhdGlvbiBmdW5jdGlvbiwgY2FsbGVkIGltbWVkaWF0ZWx5IGFmdGVyIENBU1MgZGVjbGFyYXRpb24gYmVsb3dcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGRlYnVnKFwiQ0FTUyByZWFkeSAod2UgYXJlIGluIFwiICsgZG9jdW1lbnQuY29tcGF0TW9kZSArIFwiKVwiKTtcbiAgICAgICAgICAgICAgICB5ZXBub3BlLmFkZEZpbHRlcih5ZXBub3BlRmlsdGVyKTtcblxuICAgICAgICAgICAgICAgIC8vIHRoZSBmb2xsb3dpbmcgbmVlZHMgZG9tcmVhZHlcbiAgICAgICAgICAgICAgICAkKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpbml0UGFnZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGluaXRIZWFkZXIoJCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VDcmVkaXRhdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgICAgIGluaXREZWZlcnJlZCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGluaXRXaWRnZXRzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9zZXQgdXAgYW55IHZpZGVvcyBvbiBwYWdlXG4gICAgICAgICAgICAgICAgICAgIHZpZGVvcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCB1cCBzaGFkb3dib3hcbiAgICAgICAgICAgICAgICAgICAgU2hhZG93Ym94LmluaXQoeyBvdmVybGF5T3BhY2l0eTogMC45IH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGluaXRDb29raWVOb3RpY2UoJCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9pbml0Q29va2llU3VydmV5KCQpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vd2hpbGUgd2UgYXJlIGRldmVsb3BpbmcsIGxldHMgaW5jbHVkZSB0aGUgZGV2c3R1ZmZcbiAgICAgICAgICAgICAgICAgICAgLy8gbG9hZChcImRldlN0dWZmXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vc2V0IHVwIHRoZSBqcyBmYWlsdXJlIG5vdGlmaWNhdGlvblxuICAgICAgICAgICAgICAgICAgICBpbml0SnNGYWlsdXJlTm90aWZpZXIoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy8gZW5kIENBU1MgdmFyXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqICBUaGlzIGxpdGVyYWwgZGVmaW5lcyB3aGF0IG1ldGhvZHMgdG8gbWFrZSBwdWJsaWNseSBhY2Nlc3NpYmxlXG4gICAgICAgICAqICBvdXRzaXRlIENBU1NcbiAgICAgICAgICovXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbml0OiBpbml0LFxuICAgICAgICAgICAgbG9hZDogbG9hZCxcbiAgICAgICAgICAgIGRlYnVnOiBkZWJ1ZyxcbiAgICAgICAgICAgIHNldFZlcnNpb246IHNldFZlcnNpb24sXG4gICAgICAgICAgICBpc0V2ZW46IGlzRXZlbixcbiAgICAgICAgICAgIGdldFVybFZhcnM6IGdldFVybFZhcnMsXG4gICAgICAgICAgICBvYmplY3RTaXplOiBvYmplY3RTaXplLFxuICAgICAgICAgICAgZ2V0V2luZG93V2lkdGg6IGdldFdpbmRvd1dpZHRoLFxuICAgICAgICAgICAgczFTZXJ2ZXI6IHNyY1ByZWZpeCxcbiAgICAgICAgICAgIGlzQ2FzczogaXNDYXNzLFxuICAgICAgICAgICAgaXNCdW5oaWxsOiBpc0J1bmhpbGxcbiAgICAgICAgfTtcbiAgICB9KSh3aW5kb3csIE1vZGVybml6ciwgeWVwbm9wZSk7XG4vLyBlbmQgQ0FTU1xuXG53aW5kb3cuQ0FTUyA9IENBU1M7XG53aW5kb3cuQ29va2llcyA9IENvb2tpZXM7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9tYWluL2Nhc3NybWFpbi5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBqUXVlcnkgPSByZXF1aXJlKCcuL2xpYi9qcXVlcnktMS4xMC4yLm1pbicpO1xuICAgIHdpbmRvdy5qUXVlcnkgPSB3aW5kb3cuJCA9IGpRdWVyeTtcbiAgICBcbiAgICByZXF1aXJlKCcuL2xpYi9qcXVlcnktdWktMS4xMC4zLmN1c3RvbS5taW4nKTtcbiAgICByZXF1aXJlKCcuL2xpYi9qcXVlcnkud3JhcENoaWxkcmVuJyk7XG4gICAgcmVxdWlyZSgnLi9saWIvanF1ZXJ5LmJ4c2xpZGVyJyk7XG5cbiAgICByZXF1aXJlKCcuL2pxdWVyeS55b3V0dWJlcHJldmlldycpKHdpbmRvdy5qUXVlcnkpO1xuXG4gICAgcmVxdWlyZSgnLi4vLi4vbGliL3NoYWRvd2JveC9zaGFkb3dib3gnKTtcblxuICAgIHJldHVybiB3aW5kb3cualF1ZXJ5O1xufSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL21haW4vanF1ZXJ5L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIVxuICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2MS4xMC4yXG4gKiBodHRwOi8vanF1ZXJ5LmNvbS9cbiAqXG4gKiBJbmNsdWRlcyBTaXp6bGUuanNcbiAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vXG4gKlxuICogQ29weXJpZ2h0IDIwMDUsIDIwMTMgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogRGF0ZTogMjAxMy0wNy0wM1QxMzo0OFpcbiAqL1xuKGZ1bmN0aW9uKCB3aW5kb3csIHVuZGVmaW5lZCApIHtcblxuLy8gQ2FuJ3QgZG8gdGhpcyBiZWNhdXNlIHNldmVyYWwgYXBwcyBpbmNsdWRpbmcgQVNQLk5FVCB0cmFjZVxuLy8gdGhlIHN0YWNrIHZpYSBhcmd1bWVudHMuY2FsbGVyLmNhbGxlZSBhbmQgRmlyZWZveCBkaWVzIGlmXG4vLyB5b3UgdHJ5IHRvIHRyYWNlIHRocm91Z2ggXCJ1c2Ugc3RyaWN0XCIgY2FsbCBjaGFpbnMuICgjMTMzMzUpXG4vLyBTdXBwb3J0OiBGaXJlZm94IDE4K1xuLy9cInVzZSBzdHJpY3RcIjtcbiAgICB2YXJcbiAgICAvLyBUaGUgZGVmZXJyZWQgdXNlZCBvbiBET00gcmVhZHlcbiAgICAgICAgcmVhZHlMaXN0LFxuXG4gICAgLy8gQSBjZW50cmFsIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBqUXVlcnkoZG9jdW1lbnQpXG4gICAgICAgIHJvb3RqUXVlcnksXG5cbiAgICAvLyBTdXBwb3J0OiBJRTwxMFxuICAgIC8vIEZvciBgdHlwZW9mIHhtbE5vZGUubWV0aG9kYCBpbnN0ZWFkIG9mIGB4bWxOb2RlLm1ldGhvZCAhPT0gdW5kZWZpbmVkYFxuICAgICAgICBjb3JlX3N0cnVuZGVmaW5lZCA9IHR5cGVvZiB1bmRlZmluZWQsXG5cbiAgICAvLyBVc2UgdGhlIGNvcnJlY3QgZG9jdW1lbnQgYWNjb3JkaW5nbHkgd2l0aCB3aW5kb3cgYXJndW1lbnQgKHNhbmRib3gpXG4gICAgICAgIGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLFxuICAgICAgICBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudCxcbiAgICAgICAgZG9jRWxlbSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcblxuICAgIC8vIE1hcCBvdmVyIGpRdWVyeSBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuICAgICAgICBfalF1ZXJ5ID0gd2luZG93LmpRdWVyeSxcblxuICAgIC8vIE1hcCBvdmVyIHRoZSAkIGluIGNhc2Ugb2Ygb3ZlcndyaXRlXG4gICAgICAgIF8kID0gd2luZG93LiQsXG5cbiAgICAvLyBbW0NsYXNzXV0gLT4gdHlwZSBwYWlyc1xuICAgICAgICBjbGFzczJ0eXBlID0ge30sXG5cbiAgICAvLyBMaXN0IG9mIGRlbGV0ZWQgZGF0YSBjYWNoZSBpZHMsIHNvIHdlIGNhbiByZXVzZSB0aGVtXG4gICAgICAgIGNvcmVfZGVsZXRlZElkcyA9IFtdLFxuXG4gICAgICAgIGNvcmVfdmVyc2lvbiA9IFwiMS4xMC4yXCIsXG5cbiAgICAvLyBTYXZlIGEgcmVmZXJlbmNlIHRvIHNvbWUgY29yZSBtZXRob2RzXG4gICAgICAgIGNvcmVfY29uY2F0ID0gY29yZV9kZWxldGVkSWRzLmNvbmNhdCxcbiAgICAgICAgY29yZV9wdXNoID0gY29yZV9kZWxldGVkSWRzLnB1c2gsXG4gICAgICAgIGNvcmVfc2xpY2UgPSBjb3JlX2RlbGV0ZWRJZHMuc2xpY2UsXG4gICAgICAgIGNvcmVfaW5kZXhPZiA9IGNvcmVfZGVsZXRlZElkcy5pbmRleE9mLFxuICAgICAgICBjb3JlX3RvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZyxcbiAgICAgICAgY29yZV9oYXNPd24gPSBjbGFzczJ0eXBlLmhhc093blByb3BlcnR5LFxuICAgICAgICBjb3JlX3RyaW0gPSBjb3JlX3ZlcnNpb24udHJpbSxcblxuICAgIC8vIERlZmluZSBhIGxvY2FsIGNvcHkgb2YgalF1ZXJ5XG4gICAgICAgIGpRdWVyeSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcbiAgICAgICAgICAgIC8vIFRoZSBqUXVlcnkgb2JqZWN0IGlzIGFjdHVhbGx5IGp1c3QgdGhlIGluaXQgY29uc3RydWN0b3IgJ2VuaGFuY2VkJ1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBqUXVlcnkuZm4uaW5pdCggc2VsZWN0b3IsIGNvbnRleHQsIHJvb3RqUXVlcnkgKTtcbiAgICAgICAgfSxcblxuICAgIC8vIFVzZWQgZm9yIG1hdGNoaW5nIG51bWJlcnNcbiAgICAgICAgY29yZV9wbnVtID0gL1srLV0/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS8uc291cmNlLFxuXG4gICAgLy8gVXNlZCBmb3Igc3BsaXR0aW5nIG9uIHdoaXRlc3BhY2VcbiAgICAgICAgY29yZV9ybm90d2hpdGUgPSAvXFxTKy9nLFxuXG4gICAgLy8gTWFrZSBzdXJlIHdlIHRyaW0gQk9NIGFuZCBOQlNQIChoZXJlJ3MgbG9va2luZyBhdCB5b3UsIFNhZmFyaSA1LjAgYW5kIElFKVxuICAgICAgICBydHJpbSA9IC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxcblxuICAgIC8vIEEgc2ltcGxlIHdheSB0byBjaGVjayBmb3IgSFRNTCBzdHJpbmdzXG4gICAgLy8gUHJpb3JpdGl6ZSAjaWQgb3ZlciA8dGFnPiB0byBhdm9pZCBYU1MgdmlhIGxvY2F0aW9uLmhhc2ggKCM5NTIxKVxuICAgIC8vIFN0cmljdCBIVE1MIHJlY29nbml0aW9uICgjMTEyOTA6IG11c3Qgc3RhcnQgd2l0aCA8KVxuICAgICAgICBycXVpY2tFeHByID0gL14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKikpJC8sXG5cbiAgICAvLyBNYXRjaCBhIHN0YW5kYWxvbmUgdGFnXG4gICAgICAgIHJzaW5nbGVUYWcgPSAvXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8sXG5cbiAgICAvLyBKU09OIFJlZ0V4cFxuICAgICAgICBydmFsaWRjaGFycyA9IC9eW1xcXSw6e31cXHNdKiQvLFxuICAgICAgICBydmFsaWRicmFjZXMgPSAvKD86Xnw6fCwpKD86XFxzKlxcWykrL2csXG4gICAgICAgIHJ2YWxpZGVzY2FwZSA9IC9cXFxcKD86W1wiXFxcXFxcL2JmbnJ0XXx1W1xcZGEtZkEtRl17NH0pL2csXG4gICAgICAgIHJ2YWxpZHRva2VucyA9IC9cIlteXCJcXFxcXFxyXFxuXSpcInx0cnVlfGZhbHNlfG51bGx8LT8oPzpcXGQrXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpL2csXG5cbiAgICAvLyBNYXRjaGVzIGRhc2hlZCBzdHJpbmcgZm9yIGNhbWVsaXppbmdcbiAgICAgICAgcm1zUHJlZml4ID0gL14tbXMtLyxcbiAgICAgICAgcmRhc2hBbHBoYSA9IC8tKFtcXGRhLXpdKS9naSxcblxuICAgIC8vIFVzZWQgYnkgalF1ZXJ5LmNhbWVsQ2FzZSBhcyBjYWxsYmFjayB0byByZXBsYWNlKClcbiAgICAgICAgZmNhbWVsQ2FzZSA9IGZ1bmN0aW9uKCBhbGwsIGxldHRlciApIHtcbiAgICAgICAgICAgIHJldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTtcbiAgICAgICAgfSxcblxuICAgIC8vIFRoZSByZWFkeSBldmVudCBoYW5kbGVyXG4gICAgICAgIGNvbXBsZXRlZCA9IGZ1bmN0aW9uKCBldmVudCApIHtcblxuICAgICAgICAgICAgLy8gcmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiIGlzIGdvb2QgZW5vdWdoIGZvciB1cyB0byBjYWxsIHRoZSBkb20gcmVhZHkgaW4gb2xkSUVcbiAgICAgICAgICAgIGlmICggZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciB8fCBldmVudC50eXBlID09PSBcImxvYWRcIiB8fCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgKSB7XG4gICAgICAgICAgICAgICAgZGV0YWNoKCk7XG4gICAgICAgICAgICAgICAgalF1ZXJ5LnJlYWR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgLy8gQ2xlYW4tdXAgbWV0aG9kIGZvciBkb20gcmVhZHkgZXZlbnRzXG4gICAgICAgIGRldGFjaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwiRE9NQ29udGVudExvYWRlZFwiLCBjb21wbGV0ZWQsIGZhbHNlICk7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwibG9hZFwiLCBjb21wbGV0ZWQsIGZhbHNlICk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZGV0YWNoRXZlbnQoIFwib25yZWFkeXN0YXRlY2hhbmdlXCIsIGNvbXBsZXRlZCApO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5kZXRhY2hFdmVudCggXCJvbmxvYWRcIiwgY29tcGxldGVkICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICBqUXVlcnkuZm4gPSBqUXVlcnkucHJvdG90eXBlID0ge1xuICAgICAgICAvLyBUaGUgY3VycmVudCB2ZXJzaW9uIG9mIGpRdWVyeSBiZWluZyB1c2VkXG4gICAgICAgIGpxdWVyeTogY29yZV92ZXJzaW9uLFxuXG4gICAgICAgIGNvbnN0cnVjdG9yOiBqUXVlcnksXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcm9vdGpRdWVyeSApIHtcbiAgICAgICAgICAgIHZhciBtYXRjaCwgZWxlbTtcblxuICAgICAgICAgICAgLy8gSEFORExFOiAkKFwiXCIpLCAkKG51bGwpLCAkKHVuZGVmaW5lZCksICQoZmFsc2UpXG4gICAgICAgICAgICBpZiAoICFzZWxlY3RvciApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSGFuZGxlIEhUTUwgc3RyaW5nc1xuICAgICAgICAgICAgaWYgKCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCBzZWxlY3Rvci5jaGFyQXQoMCkgPT09IFwiPFwiICYmIHNlbGVjdG9yLmNoYXJBdCggc2VsZWN0b3IubGVuZ3RoIC0gMSApID09PSBcIj5cIiAmJiBzZWxlY3Rvci5sZW5ndGggPj0gMyApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXNzdW1lIHRoYXQgc3RyaW5ncyB0aGF0IHN0YXJ0IGFuZCBlbmQgd2l0aCA8PiBhcmUgSFRNTCBhbmQgc2tpcCB0aGUgcmVnZXggY2hlY2tcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSBbIG51bGwsIHNlbGVjdG9yLCBudWxsIF07XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBNYXRjaCBodG1sIG9yIG1ha2Ugc3VyZSBubyBjb250ZXh0IGlzIHNwZWNpZmllZCBmb3IgI2lkXG4gICAgICAgICAgICAgICAgaWYgKCBtYXRjaCAmJiAobWF0Y2hbMV0gfHwgIWNvbnRleHQpICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEhBTkRMRTogJChodG1sKSAtPiAkKGFycmF5KVxuICAgICAgICAgICAgICAgICAgICBpZiAoIG1hdGNoWzFdICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCA9IGNvbnRleHQgaW5zdGFuY2VvZiBqUXVlcnkgPyBjb250ZXh0WzBdIDogY29udGV4dDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2NyaXB0cyBpcyB0cnVlIGZvciBiYWNrLWNvbXBhdFxuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5Lm1lcmdlKCB0aGlzLCBqUXVlcnkucGFyc2VIVE1MKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoWzFdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQgJiYgY29udGV4dC5ub2RlVHlwZSA/IGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0IDogZG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIQU5ETEU6ICQoaHRtbCwgcHJvcHMpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHJzaW5nbGVUYWcudGVzdCggbWF0Y2hbMV0gKSAmJiBqUXVlcnkuaXNQbGFpbk9iamVjdCggY29udGV4dCApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIG1hdGNoIGluIGNvbnRleHQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByb3BlcnRpZXMgb2YgY29udGV4dCBhcmUgY2FsbGVkIGFzIG1ldGhvZHMgaWYgcG9zc2libGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdGhpc1sgbWF0Y2ggXSApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1sgbWF0Y2ggXSggY29udGV4dFsgbWF0Y2ggXSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAuLi5hbmQgb3RoZXJ3aXNlIHNldCBhcyBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dHIoIG1hdGNoLCBjb250ZXh0WyBtYXRjaCBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIQU5ETEU6ICQoI2lkKVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBtYXRjaFsyXSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBwYXJlbnROb2RlIHRvIGNhdGNoIHdoZW4gQmxhY2tiZXJyeSA0LjYgcmV0dXJuc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9kZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIGluIHRoZSBkb2N1bWVudCAjNjk2M1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBlbGVtICYmIGVsZW0ucGFyZW50Tm9kZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgdGhlIGNhc2Ugd2hlcmUgSUUgYW5kIE9wZXJhIHJldHVybiBpdGVtc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZWxlbS5pZCAhPT0gbWF0Y2hbMl0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByb290alF1ZXJ5LmZpbmQoIHNlbGVjdG9yICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSBpbmplY3QgdGhlIGVsZW1lbnQgZGlyZWN0bHkgaW50byB0aGUgalF1ZXJ5IG9iamVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzWzBdID0gZWxlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gZG9jdW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEhBTkRMRTogJChleHByLCAkKC4uLikpXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggIWNvbnRleHQgfHwgY29udGV4dC5qcXVlcnkgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoIGNvbnRleHQgfHwgcm9vdGpRdWVyeSApLmZpbmQoIHNlbGVjdG9yICk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSEFORExFOiAkKGV4cHIsIGNvbnRleHQpXG4gICAgICAgICAgICAgICAgICAgIC8vICh3aGljaCBpcyBqdXN0IGVxdWl2YWxlbnQgdG86ICQoY29udGV4dCkuZmluZChleHByKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBIQU5ETEU6ICQoRE9NRWxlbWVudClcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHNlbGVjdG9yLm5vZGVUeXBlICkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IHRoaXNbMF0gPSBzZWxlY3RvcjtcbiAgICAgICAgICAgICAgICB0aGlzLmxlbmd0aCA9IDE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgICAgICAgICAvLyBIQU5ETEU6ICQoZnVuY3Rpb24pXG4gICAgICAgICAgICAgICAgLy8gU2hvcnRjdXQgZm9yIGRvY3VtZW50IHJlYWR5XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggc2VsZWN0b3IgKSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcm9vdGpRdWVyeS5yZWFkeSggc2VsZWN0b3IgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCBzZWxlY3Rvci5zZWxlY3RvciAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3Rvci5zZWxlY3RvcjtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBzZWxlY3Rvci5jb250ZXh0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5Lm1ha2VBcnJheSggc2VsZWN0b3IsIHRoaXMgKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBTdGFydCB3aXRoIGFuIGVtcHR5IHNlbGVjdG9yXG4gICAgICAgIHNlbGVjdG9yOiBcIlwiLFxuXG4gICAgICAgIC8vIFRoZSBkZWZhdWx0IGxlbmd0aCBvZiBhIGpRdWVyeSBvYmplY3QgaXMgMFxuICAgICAgICBsZW5ndGg6IDAsXG5cbiAgICAgICAgdG9BcnJheTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gY29yZV9zbGljZS5jYWxsKCB0aGlzICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gR2V0IHRoZSBOdGggZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBlbGVtZW50IHNldCBPUlxuICAgICAgICAvLyBHZXQgdGhlIHdob2xlIG1hdGNoZWQgZWxlbWVudCBzZXQgYXMgYSBjbGVhbiBhcnJheVxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCBudW0gKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVtID09IG51bGwgP1xuXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIGEgJ2NsZWFuJyBhcnJheVxuICAgICAgICAgICAgICAgIHRoaXMudG9BcnJheSgpIDpcblxuICAgICAgICAgICAgICAgIC8vIFJldHVybiBqdXN0IHRoZSBvYmplY3RcbiAgICAgICAgICAgICAgICAoIG51bSA8IDAgPyB0aGlzWyB0aGlzLmxlbmd0aCArIG51bSBdIDogdGhpc1sgbnVtIF0gKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBUYWtlIGFuIGFycmF5IG9mIGVsZW1lbnRzIGFuZCBwdXNoIGl0IG9udG8gdGhlIHN0YWNrXG4gICAgICAgIC8vIChyZXR1cm5pbmcgdGhlIG5ldyBtYXRjaGVkIGVsZW1lbnQgc2V0KVxuICAgICAgICBwdXNoU3RhY2s6IGZ1bmN0aW9uKCBlbGVtcyApIHtcblxuICAgICAgICAgICAgLy8gQnVpbGQgYSBuZXcgalF1ZXJ5IG1hdGNoZWQgZWxlbWVudCBzZXRcbiAgICAgICAgICAgIHZhciByZXQgPSBqUXVlcnkubWVyZ2UoIHRoaXMuY29uc3RydWN0b3IoKSwgZWxlbXMgKTtcblxuICAgICAgICAgICAgLy8gQWRkIHRoZSBvbGQgb2JqZWN0IG9udG8gdGhlIHN0YWNrIChhcyBhIHJlZmVyZW5jZSlcbiAgICAgICAgICAgIHJldC5wcmV2T2JqZWN0ID0gdGhpcztcbiAgICAgICAgICAgIHJldC5jb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuXG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIG5ld2x5LWZvcm1lZCBlbGVtZW50IHNldFxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBFeGVjdXRlIGEgY2FsbGJhY2sgZm9yIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgc2V0LlxuICAgICAgICAvLyAoWW91IGNhbiBzZWVkIHRoZSBhcmd1bWVudHMgd2l0aCBhbiBhcnJheSBvZiBhcmdzLCBidXQgdGhpcyBpc1xuICAgICAgICAvLyBvbmx5IHVzZWQgaW50ZXJuYWxseS4pXG4gICAgICAgIGVhY2g6IGZ1bmN0aW9uKCBjYWxsYmFjaywgYXJncyApIHtcbiAgICAgICAgICAgIHJldHVybiBqUXVlcnkuZWFjaCggdGhpcywgY2FsbGJhY2ssIGFyZ3MgKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZWFkeTogZnVuY3Rpb24oIGZuICkge1xuICAgICAgICAgICAgLy8gQWRkIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgalF1ZXJ5LnJlYWR5LnByb21pc2UoKS5kb25lKCBmbiApO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcblxuICAgICAgICBzbGljZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoU3RhY2soIGNvcmVfc2xpY2UuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZmlyc3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXEoIDAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBsYXN0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVxKCAtMSApO1xuICAgICAgICB9LFxuXG4gICAgICAgIGVxOiBmdW5jdGlvbiggaSApIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSB0aGlzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBqID0gK2kgKyAoIGkgPCAwID8gbGVuIDogMCApO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqID49IDAgJiYgaiA8IGxlbiA/IFsgdGhpc1tqXSBdIDogW10gKTtcbiAgICAgICAgfSxcblxuICAgICAgICBtYXA6IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5Lm1hcCh0aGlzLCBmdW5jdGlvbiggZWxlbSwgaSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCggZWxlbSwgaSwgZWxlbSApO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGVuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmV2T2JqZWN0IHx8IHRoaXMuY29uc3RydWN0b3IobnVsbCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gRm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAgICAvLyBCZWhhdmVzIGxpa2UgYW4gQXJyYXkncyBtZXRob2QsIG5vdCBsaWtlIGEgalF1ZXJ5IG1ldGhvZC5cbiAgICAgICAgcHVzaDogY29yZV9wdXNoLFxuICAgICAgICBzb3J0OiBbXS5zb3J0LFxuICAgICAgICBzcGxpY2U6IFtdLnNwbGljZVxuICAgIH07XG5cbi8vIEdpdmUgdGhlIGluaXQgZnVuY3Rpb24gdGhlIGpRdWVyeSBwcm90b3R5cGUgZm9yIGxhdGVyIGluc3RhbnRpYXRpb25cbiAgICBqUXVlcnkuZm4uaW5pdC5wcm90b3R5cGUgPSBqUXVlcnkuZm47XG5cbiAgICBqUXVlcnkuZXh0ZW5kID0galF1ZXJ5LmZuLmV4dGVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc3JjLCBjb3B5SXNBcnJheSwgY29weSwgbmFtZSwgb3B0aW9ucywgY2xvbmUsXG4gICAgICAgICAgICB0YXJnZXQgPSBhcmd1bWVudHNbMF0gfHwge30sXG4gICAgICAgICAgICBpID0gMSxcbiAgICAgICAgICAgIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG4gICAgICAgICAgICBkZWVwID0gZmFsc2U7XG5cbiAgICAgICAgLy8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvblxuICAgICAgICBpZiAoIHR5cGVvZiB0YXJnZXQgPT09IFwiYm9vbGVhblwiICkge1xuICAgICAgICAgICAgZGVlcCA9IHRhcmdldDtcbiAgICAgICAgICAgIHRhcmdldCA9IGFyZ3VtZW50c1sxXSB8fCB7fTtcbiAgICAgICAgICAgIC8vIHNraXAgdGhlIGJvb2xlYW4gYW5kIHRoZSB0YXJnZXRcbiAgICAgICAgICAgIGkgPSAyO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSGFuZGxlIGNhc2Ugd2hlbiB0YXJnZXQgaXMgYSBzdHJpbmcgb3Igc29tZXRoaW5nIChwb3NzaWJsZSBpbiBkZWVwIGNvcHkpXG4gICAgICAgIGlmICggdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIiAmJiAhalF1ZXJ5LmlzRnVuY3Rpb24odGFyZ2V0KSApIHtcbiAgICAgICAgICAgIHRhcmdldCA9IHt9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXh0ZW5kIGpRdWVyeSBpdHNlbGYgaWYgb25seSBvbmUgYXJndW1lbnQgaXMgcGFzc2VkXG4gICAgICAgIGlmICggbGVuZ3RoID09PSBpICkge1xuICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcztcbiAgICAgICAgICAgIC0taTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuICAgICAgICAgICAgLy8gT25seSBkZWFsIHdpdGggbm9uLW51bGwvdW5kZWZpbmVkIHZhbHVlc1xuICAgICAgICAgICAgaWYgKCAob3B0aW9ucyA9IGFyZ3VtZW50c1sgaSBdKSAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgIC8vIEV4dGVuZCB0aGUgYmFzZSBvYmplY3RcbiAgICAgICAgICAgICAgICBmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG4gICAgICAgICAgICAgICAgICAgIHNyYyA9IHRhcmdldFsgbmFtZSBdO1xuICAgICAgICAgICAgICAgICAgICBjb3B5ID0gb3B0aW9uc1sgbmFtZSBdO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0YXJnZXQgPT09IGNvcHkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlY3Vyc2UgaWYgd2UncmUgbWVyZ2luZyBwbGFpbiBvYmplY3RzIG9yIGFycmF5c1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGRlZXAgJiYgY29weSAmJiAoIGpRdWVyeS5pc1BsYWluT2JqZWN0KGNvcHkpIHx8IChjb3B5SXNBcnJheSA9IGpRdWVyeS5pc0FycmF5KGNvcHkpKSApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjb3B5SXNBcnJheSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3B5SXNBcnJheSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lID0gc3JjICYmIGpRdWVyeS5pc0FycmF5KHNyYykgPyBzcmMgOiBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZSA9IHNyYyAmJiBqUXVlcnkuaXNQbGFpbk9iamVjdChzcmMpID8gc3JjIDoge307XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbVxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0WyBuYW1lIF0gPSBqUXVlcnkuZXh0ZW5kKCBkZWVwLCBjbG9uZSwgY29weSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBicmluZyBpbiB1bmRlZmluZWQgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGNvcHkgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFsgbmFtZSBdID0gY29weTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfTtcblxuICAgIGpRdWVyeS5leHRlbmQoe1xuICAgICAgICAvLyBVbmlxdWUgZm9yIGVhY2ggY29weSBvZiBqUXVlcnkgb24gdGhlIHBhZ2VcbiAgICAgICAgLy8gTm9uLWRpZ2l0cyByZW1vdmVkIHRvIG1hdGNoIHJpbmxpbmVqUXVlcnlcbiAgICAgICAgZXhwYW5kbzogXCJqUXVlcnlcIiArICggY29yZV92ZXJzaW9uICsgTWF0aC5yYW5kb20oKSApLnJlcGxhY2UoIC9cXEQvZywgXCJcIiApLFxuXG4gICAgICAgIG5vQ29uZmxpY3Q6IGZ1bmN0aW9uKCBkZWVwICkge1xuICAgICAgICAgICAgaWYgKCB3aW5kb3cuJCA9PT0galF1ZXJ5ICkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy4kID0gXyQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggZGVlcCAmJiB3aW5kb3cualF1ZXJ5ID09PSBqUXVlcnkgKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmpRdWVyeSA9IF9qUXVlcnk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBqUXVlcnk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gSXMgdGhlIERPTSByZWFkeSB0byBiZSB1c2VkPyBTZXQgdG8gdHJ1ZSBvbmNlIGl0IG9jY3Vycy5cbiAgICAgICAgaXNSZWFkeTogZmFsc2UsXG5cbiAgICAgICAgLy8gQSBjb3VudGVyIHRvIHRyYWNrIGhvdyBtYW55IGl0ZW1zIHRvIHdhaXQgZm9yIGJlZm9yZVxuICAgICAgICAvLyB0aGUgcmVhZHkgZXZlbnQgZmlyZXMuIFNlZSAjNjc4MVxuICAgICAgICByZWFkeVdhaXQ6IDEsXG5cbiAgICAgICAgLy8gSG9sZCAob3IgcmVsZWFzZSkgdGhlIHJlYWR5IGV2ZW50XG4gICAgICAgIGhvbGRSZWFkeTogZnVuY3Rpb24oIGhvbGQgKSB7XG4gICAgICAgICAgICBpZiAoIGhvbGQgKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5LnJlYWR5V2FpdCsrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkucmVhZHkoIHRydWUgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvLyBIYW5kbGUgd2hlbiB0aGUgRE9NIGlzIHJlYWR5XG4gICAgICAgIHJlYWR5OiBmdW5jdGlvbiggd2FpdCApIHtcblxuICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhlcmUgYXJlIHBlbmRpbmcgaG9sZHMgb3Igd2UncmUgYWxyZWFkeSByZWFkeVxuICAgICAgICAgICAgaWYgKCB3YWl0ID09PSB0cnVlID8gLS1qUXVlcnkucmVhZHlXYWl0IDogalF1ZXJ5LmlzUmVhZHkgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgYm9keSBleGlzdHMsIGF0IGxlYXN0LCBpbiBjYXNlIElFIGdldHMgYSBsaXR0bGUgb3ZlcnplYWxvdXMgKHRpY2tldCAjNTQ0MykuXG4gICAgICAgICAgICBpZiAoICFkb2N1bWVudC5ib2R5ICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KCBqUXVlcnkucmVhZHkgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmVtZW1iZXIgdGhhdCB0aGUgRE9NIGlzIHJlYWR5XG4gICAgICAgICAgICBqUXVlcnkuaXNSZWFkeSA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIElmIGEgbm9ybWFsIERPTSBSZWFkeSBldmVudCBmaXJlZCwgZGVjcmVtZW50LCBhbmQgd2FpdCBpZiBuZWVkIGJlXG4gICAgICAgICAgICBpZiAoIHdhaXQgIT09IHRydWUgJiYgLS1qUXVlcnkucmVhZHlXYWl0ID4gMCApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBmdW5jdGlvbnMgYm91bmQsIHRvIGV4ZWN1dGVcbiAgICAgICAgICAgIHJlYWR5TGlzdC5yZXNvbHZlV2l0aCggZG9jdW1lbnQsIFsgalF1ZXJ5IF0gKTtcblxuICAgICAgICAgICAgLy8gVHJpZ2dlciBhbnkgYm91bmQgcmVhZHkgZXZlbnRzXG4gICAgICAgICAgICBpZiAoIGpRdWVyeS5mbi50cmlnZ2VyICkge1xuICAgICAgICAgICAgICAgIGpRdWVyeSggZG9jdW1lbnQgKS50cmlnZ2VyKFwicmVhZHlcIikub2ZmKFwicmVhZHlcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gU2VlIHRlc3QvdW5pdC9jb3JlLmpzIGZvciBkZXRhaWxzIGNvbmNlcm5pbmcgaXNGdW5jdGlvbi5cbiAgICAgICAgLy8gU2luY2UgdmVyc2lvbiAxLjMsIERPTSBtZXRob2RzIGFuZCBmdW5jdGlvbnMgbGlrZSBhbGVydFxuICAgICAgICAvLyBhcmVuJ3Qgc3VwcG9ydGVkLiBUaGV5IHJldHVybiBmYWxzZSBvbiBJRSAoIzI5NjgpLlxuICAgICAgICBpc0Z1bmN0aW9uOiBmdW5jdGlvbiggb2JqICkge1xuICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS50eXBlKG9iaikgPT09IFwiZnVuY3Rpb25cIjtcbiAgICAgICAgfSxcblxuICAgICAgICBpc0FycmF5OiBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKCBvYmogKSB7XG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5LnR5cGUob2JqKSA9PT0gXCJhcnJheVwiO1xuICAgICAgICB9LFxuXG4gICAgICAgIGlzV2luZG93OiBmdW5jdGlvbiggb2JqICkge1xuICAgICAgICAgICAgLyoganNoaW50IGVxZXFlcTogZmFsc2UgKi9cbiAgICAgICAgICAgIHJldHVybiBvYmogIT0gbnVsbCAmJiBvYmogPT0gb2JqLndpbmRvdztcbiAgICAgICAgfSxcblxuICAgICAgICBpc051bWVyaWM6IGZ1bmN0aW9uKCBvYmogKSB7XG4gICAgICAgICAgICByZXR1cm4gIWlzTmFOKCBwYXJzZUZsb2F0KG9iaikgKSAmJiBpc0Zpbml0ZSggb2JqICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdHlwZTogZnVuY3Rpb24oIG9iaiApIHtcbiAgICAgICAgICAgIGlmICggb2JqID09IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyggb2JqICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIgP1xuICAgICAgICAgICAgY2xhc3MydHlwZVsgY29yZV90b1N0cmluZy5jYWxsKG9iaikgXSB8fCBcIm9iamVjdFwiIDpcbiAgICAgICAgICAgICAgICB0eXBlb2Ygb2JqO1xuICAgICAgICB9LFxuXG4gICAgICAgIGlzUGxhaW5PYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG4gICAgICAgICAgICB2YXIga2V5O1xuXG4gICAgICAgICAgICAvLyBNdXN0IGJlIGFuIE9iamVjdC5cbiAgICAgICAgICAgIC8vIEJlY2F1c2Ugb2YgSUUsIHdlIGFsc28gaGF2ZSB0byBjaGVjayB0aGUgcHJlc2VuY2Ugb2YgdGhlIGNvbnN0cnVjdG9yIHByb3BlcnR5LlxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgRE9NIG5vZGVzIGFuZCB3aW5kb3cgb2JqZWN0cyBkb24ndCBwYXNzIHRocm91Z2gsIGFzIHdlbGxcbiAgICAgICAgICAgIGlmICggIW9iaiB8fCBqUXVlcnkudHlwZShvYmopICE9PSBcIm9iamVjdFwiIHx8IG9iai5ub2RlVHlwZSB8fCBqUXVlcnkuaXNXaW5kb3coIG9iaiApICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBOb3Qgb3duIGNvbnN0cnVjdG9yIHByb3BlcnR5IG11c3QgYmUgT2JqZWN0XG4gICAgICAgICAgICAgICAgaWYgKCBvYmouY29uc3RydWN0b3IgJiZcbiAgICAgICAgICAgICAgICAgICAgIWNvcmVfaGFzT3duLmNhbGwob2JqLCBcImNvbnN0cnVjdG9yXCIpICYmXG4gICAgICAgICAgICAgICAgICAgICFjb3JlX2hhc093bi5jYWxsKG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIFwiaXNQcm90b3R5cGVPZlwiKSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKCBlICkge1xuICAgICAgICAgICAgICAgIC8vIElFOCw5IFdpbGwgdGhyb3cgZXhjZXB0aW9ucyBvbiBjZXJ0YWluIGhvc3Qgb2JqZWN0cyAjOTg5N1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU3VwcG9ydDogSUU8OVxuICAgICAgICAgICAgLy8gSGFuZGxlIGl0ZXJhdGlvbiBvdmVyIGluaGVyaXRlZCBwcm9wZXJ0aWVzIGJlZm9yZSBvd24gcHJvcGVydGllcy5cbiAgICAgICAgICAgIGlmICggalF1ZXJ5LnN1cHBvcnQub3duTGFzdCApIHtcbiAgICAgICAgICAgICAgICBmb3IgKCBrZXkgaW4gb2JqICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29yZV9oYXNPd24uY2FsbCggb2JqLCBrZXkgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE93biBwcm9wZXJ0aWVzIGFyZSBlbnVtZXJhdGVkIGZpcnN0bHksIHNvIHRvIHNwZWVkIHVwLFxuICAgICAgICAgICAgLy8gaWYgbGFzdCBvbmUgaXMgb3duLCB0aGVuIGFsbCBwcm9wZXJ0aWVzIGFyZSBvd24uXG4gICAgICAgICAgICBmb3IgKCBrZXkgaW4gb2JqICkge31cblxuICAgICAgICAgICAgcmV0dXJuIGtleSA9PT0gdW5kZWZpbmVkIHx8IGNvcmVfaGFzT3duLmNhbGwoIG9iaiwga2V5ICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaXNFbXB0eU9iamVjdDogZnVuY3Rpb24oIG9iaiApIHtcbiAgICAgICAgICAgIHZhciBuYW1lO1xuICAgICAgICAgICAgZm9yICggbmFtZSBpbiBvYmogKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCBtc2cgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIG1zZyApO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIGRhdGE6IHN0cmluZyBvZiBodG1sXG4gICAgICAgIC8vIGNvbnRleHQgKG9wdGlvbmFsKTogSWYgc3BlY2lmaWVkLCB0aGUgZnJhZ21lbnQgd2lsbCBiZSBjcmVhdGVkIGluIHRoaXMgY29udGV4dCwgZGVmYXVsdHMgdG8gZG9jdW1lbnRcbiAgICAgICAgLy8ga2VlcFNjcmlwdHMgKG9wdGlvbmFsKTogSWYgdHJ1ZSwgd2lsbCBpbmNsdWRlIHNjcmlwdHMgcGFzc2VkIGluIHRoZSBodG1sIHN0cmluZ1xuICAgICAgICBwYXJzZUhUTUw6IGZ1bmN0aW9uKCBkYXRhLCBjb250ZXh0LCBrZWVwU2NyaXB0cyApIHtcbiAgICAgICAgICAgIGlmICggIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIHR5cGVvZiBjb250ZXh0ID09PSBcImJvb2xlYW5cIiApIHtcbiAgICAgICAgICAgICAgICBrZWVwU2NyaXB0cyA9IGNvbnRleHQ7XG4gICAgICAgICAgICAgICAgY29udGV4dCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XG5cbiAgICAgICAgICAgIHZhciBwYXJzZWQgPSByc2luZ2xlVGFnLmV4ZWMoIGRhdGEgKSxcbiAgICAgICAgICAgICAgICBzY3JpcHRzID0gIWtlZXBTY3JpcHRzICYmIFtdO1xuXG4gICAgICAgICAgICAvLyBTaW5nbGUgdGFnXG4gICAgICAgICAgICBpZiAoIHBhcnNlZCApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWyBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIHBhcnNlZFsxXSApIF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBhcnNlZCA9IGpRdWVyeS5idWlsZEZyYWdtZW50KCBbIGRhdGEgXSwgY29udGV4dCwgc2NyaXB0cyApO1xuICAgICAgICAgICAgaWYgKCBzY3JpcHRzICkge1xuICAgICAgICAgICAgICAgIGpRdWVyeSggc2NyaXB0cyApLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5tZXJnZSggW10sIHBhcnNlZC5jaGlsZE5vZGVzICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcGFyc2VKU09OOiBmdW5jdGlvbiggZGF0YSApIHtcbiAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gcGFyc2UgdXNpbmcgdGhlIG5hdGl2ZSBKU09OIHBhcnNlciBmaXJzdFxuICAgICAgICAgICAgaWYgKCB3aW5kb3cuSlNPTiAmJiB3aW5kb3cuSlNPTi5wYXJzZSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LkpTT04ucGFyc2UoIGRhdGEgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCBkYXRhID09PSBudWxsICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiICkge1xuXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIGxlYWRpbmcvdHJhaWxpbmcgd2hpdGVzcGFjZSBpcyByZW1vdmVkIChJRSBjYW4ndCBoYW5kbGUgaXQpXG4gICAgICAgICAgICAgICAgZGF0YSA9IGpRdWVyeS50cmltKCBkYXRhICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIGRhdGEgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgaW5jb21pbmcgZGF0YSBpcyBhY3R1YWwgSlNPTlxuICAgICAgICAgICAgICAgICAgICAvLyBMb2dpYyBib3Jyb3dlZCBmcm9tIGh0dHA6Ly9qc29uLm9yZy9qc29uMi5qc1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHJ2YWxpZGNoYXJzLnRlc3QoIGRhdGEucmVwbGFjZSggcnZhbGlkZXNjYXBlLCBcIkBcIiApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoIHJ2YWxpZHRva2VucywgXCJdXCIgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCBydmFsaWRicmFjZXMsIFwiXCIpKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICggbmV3IEZ1bmN0aW9uKCBcInJldHVybiBcIiArIGRhdGEgKSApKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGpRdWVyeS5lcnJvciggXCJJbnZhbGlkIEpTT046IFwiICsgZGF0YSApO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIENyb3NzLWJyb3dzZXIgeG1sIHBhcnNpbmdcbiAgICAgICAgcGFyc2VYTUw6IGZ1bmN0aW9uKCBkYXRhICkge1xuICAgICAgICAgICAgdmFyIHhtbCwgdG1wO1xuICAgICAgICAgICAgaWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCB3aW5kb3cuRE9NUGFyc2VyICkgeyAvLyBTdGFuZGFyZFxuICAgICAgICAgICAgICAgICAgICB0bXAgPSBuZXcgRE9NUGFyc2VyKCk7XG4gICAgICAgICAgICAgICAgICAgIHhtbCA9IHRtcC5wYXJzZUZyb21TdHJpbmcoIGRhdGEgLCBcInRleHQveG1sXCIgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBJRVxuICAgICAgICAgICAgICAgICAgICB4bWwgPSBuZXcgQWN0aXZlWE9iamVjdCggXCJNaWNyb3NvZnQuWE1MRE9NXCIgKTtcbiAgICAgICAgICAgICAgICAgICAgeG1sLmFzeW5jID0gXCJmYWxzZVwiO1xuICAgICAgICAgICAgICAgICAgICB4bWwubG9hZFhNTCggZGF0YSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2goIGUgKSB7XG4gICAgICAgICAgICAgICAgeG1sID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCAheG1sIHx8ICF4bWwuZG9jdW1lbnRFbGVtZW50IHx8IHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJwYXJzZXJlcnJvclwiICkubGVuZ3RoICkge1xuICAgICAgICAgICAgICAgIGpRdWVyeS5lcnJvciggXCJJbnZhbGlkIFhNTDogXCIgKyBkYXRhICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geG1sO1xuICAgICAgICB9LFxuXG4gICAgICAgIG5vb3A6IGZ1bmN0aW9uKCkge30sXG5cbiAgICAgICAgLy8gRXZhbHVhdGVzIGEgc2NyaXB0IGluIGEgZ2xvYmFsIGNvbnRleHRcbiAgICAgICAgLy8gV29ya2Fyb3VuZHMgYmFzZWQgb24gZmluZGluZ3MgYnkgSmltIERyaXNjb2xsXG4gICAgICAgIC8vIGh0dHA6Ly93ZWJsb2dzLmphdmEubmV0L2Jsb2cvZHJpc2NvbGwvYXJjaGl2ZS8yMDA5LzA5LzA4L2V2YWwtamF2YXNjcmlwdC1nbG9iYWwtY29udGV4dFxuICAgICAgICBnbG9iYWxFdmFsOiBmdW5jdGlvbiggZGF0YSApIHtcbiAgICAgICAgICAgIGlmICggZGF0YSAmJiBqUXVlcnkudHJpbSggZGF0YSApICkge1xuICAgICAgICAgICAgICAgIC8vIFdlIHVzZSBleGVjU2NyaXB0IG9uIEludGVybmV0IEV4cGxvcmVyXG4gICAgICAgICAgICAgICAgLy8gV2UgdXNlIGFuIGFub255bW91cyBmdW5jdGlvbiBzbyB0aGF0IGNvbnRleHQgaXMgd2luZG93XG4gICAgICAgICAgICAgICAgLy8gcmF0aGVyIHRoYW4galF1ZXJ5IGluIEZpcmVmb3hcbiAgICAgICAgICAgICAgICAoIHdpbmRvdy5leGVjU2NyaXB0IHx8IGZ1bmN0aW9uKCBkYXRhICkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3dbIFwiZXZhbFwiIF0uY2FsbCggd2luZG93LCBkYXRhICk7XG4gICAgICAgICAgICAgICAgfSApKCBkYXRhICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gQ29udmVydCBkYXNoZWQgdG8gY2FtZWxDYXNlOyB1c2VkIGJ5IHRoZSBjc3MgYW5kIGRhdGEgbW9kdWxlc1xuICAgICAgICAvLyBNaWNyb3NvZnQgZm9yZ290IHRvIGh1bXAgdGhlaXIgdmVuZG9yIHByZWZpeCAoIzk1NzIpXG4gICAgICAgIGNhbWVsQ2FzZTogZnVuY3Rpb24oIHN0cmluZyApIHtcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSggcm1zUHJlZml4LCBcIm1zLVwiICkucmVwbGFjZSggcmRhc2hBbHBoYSwgZmNhbWVsQ2FzZSApO1xuICAgICAgICB9LFxuXG4gICAgICAgIG5vZGVOYW1lOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIGFyZ3MgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcbiAgICAgICAgZWFjaDogZnVuY3Rpb24oIG9iaiwgY2FsbGJhY2ssIGFyZ3MgKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUsXG4gICAgICAgICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gb2JqLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpc0FycmF5ID0gaXNBcnJheWxpa2UoIG9iaiApO1xuXG4gICAgICAgICAgICBpZiAoIGFyZ3MgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCBpc0FycmF5ICkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY2FsbGJhY2suYXBwbHkoIG9ialsgaSBdLCBhcmdzICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICggaSBpbiBvYmogKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrLmFwcGx5KCBvYmpbIGkgXSwgYXJncyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHZhbHVlID09PSBmYWxzZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEEgc3BlY2lhbCwgZmFzdCwgY2FzZSBmb3IgdGhlIG1vc3QgY29tbW9uIHVzZSBvZiBlYWNoXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICggaXNBcnJheSApIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHZhbHVlID09PSBmYWxzZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoIGkgaW4gb2JqICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gVXNlIG5hdGl2ZSBTdHJpbmcudHJpbSBmdW5jdGlvbiB3aGVyZXZlciBwb3NzaWJsZVxuICAgICAgICB0cmltOiBjb3JlX3RyaW0gJiYgIWNvcmVfdHJpbS5jYWxsKFwiXFx1RkVGRlxceEEwXCIpID9cbiAgICAgICAgICAgIGZ1bmN0aW9uKCB0ZXh0ICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0ID09IG51bGwgP1xuICAgICAgICAgICAgICAgICAgICBcIlwiIDpcbiAgICAgICAgICAgICAgICAgICAgY29yZV90cmltLmNhbGwoIHRleHQgKTtcbiAgICAgICAgICAgIH0gOlxuXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgdXNlIG91ciBvd24gdHJpbW1pbmcgZnVuY3Rpb25hbGl0eVxuICAgICAgICAgICAgZnVuY3Rpb24oIHRleHQgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRleHQgPT0gbnVsbCA/XG4gICAgICAgICAgICAgICAgICAgIFwiXCIgOlxuICAgICAgICAgICAgICAgICAgICAoIHRleHQgKyBcIlwiICkucmVwbGFjZSggcnRyaW0sIFwiXCIgKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgLy8gcmVzdWx0cyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seVxuICAgICAgICBtYWtlQXJyYXk6IGZ1bmN0aW9uKCBhcnIsIHJlc3VsdHMgKSB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gcmVzdWx0cyB8fCBbXTtcblxuICAgICAgICAgICAgaWYgKCBhcnIgIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICBpZiAoIGlzQXJyYXlsaWtlKCBPYmplY3QoYXJyKSApICkge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkubWVyZ2UoIHJldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVvZiBhcnIgPT09IFwic3RyaW5nXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFsgYXJyIF0gOiBhcnJcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb3JlX3B1c2guY2FsbCggcmV0LCBhcnIgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5BcnJheTogZnVuY3Rpb24oIGVsZW0sIGFyciwgaSApIHtcbiAgICAgICAgICAgIHZhciBsZW47XG5cbiAgICAgICAgICAgIGlmICggYXJyICkge1xuICAgICAgICAgICAgICAgIGlmICggY29yZV9pbmRleE9mICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29yZV9pbmRleE9mLmNhbGwoIGFyciwgZWxlbSwgaSApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxlbiA9IGFyci5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaSA9IGkgPyBpIDwgMCA/IE1hdGgubWF4KCAwLCBsZW4gKyBpICkgOiBpIDogMDtcblxuICAgICAgICAgICAgICAgIGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGFjY2Vzc2luZyBpbiBzcGFyc2UgYXJyYXlzXG4gICAgICAgICAgICAgICAgICAgIGlmICggaSBpbiBhcnIgJiYgYXJyWyBpIF0gPT09IGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9LFxuXG4gICAgICAgIG1lcmdlOiBmdW5jdGlvbiggZmlyc3QsIHNlY29uZCApIHtcbiAgICAgICAgICAgIHZhciBsID0gc2Vjb25kLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpID0gZmlyc3QubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGogPSAwO1xuXG4gICAgICAgICAgICBpZiAoIHR5cGVvZiBsID09PSBcIm51bWJlclwiICkge1xuICAgICAgICAgICAgICAgIGZvciAoIDsgaiA8IGw7IGorKyApIHtcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RbIGkrKyBdID0gc2Vjb25kWyBqIF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoIHNlY29uZFtqXSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdFsgaSsrIF0gPSBzZWNvbmRbIGorKyBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZmlyc3QubGVuZ3RoID0gaTtcblxuICAgICAgICAgICAgcmV0dXJuIGZpcnN0O1xuICAgICAgICB9LFxuXG4gICAgICAgIGdyZXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGludiApIHtcbiAgICAgICAgICAgIHZhciByZXRWYWwsXG4gICAgICAgICAgICAgICAgcmV0ID0gW10sXG4gICAgICAgICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gZWxlbXMubGVuZ3RoO1xuICAgICAgICAgICAgaW52ID0gISFpbnY7XG5cbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCBvbmx5IHNhdmluZyB0aGUgaXRlbXNcbiAgICAgICAgICAgIC8vIHRoYXQgcGFzcyB0aGUgdmFsaWRhdG9yIGZ1bmN0aW9uXG4gICAgICAgICAgICBmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcbiAgICAgICAgICAgICAgICByZXRWYWwgPSAhIWNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpICk7XG4gICAgICAgICAgICAgICAgaWYgKCBpbnYgIT09IHJldFZhbCApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0LnB1c2goIGVsZW1zWyBpIF0gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gYXJnIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG4gICAgICAgIG1hcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgYXJnICkge1xuICAgICAgICAgICAgdmFyIHZhbHVlLFxuICAgICAgICAgICAgICAgIGkgPSAwLFxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGVsZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpc0FycmF5ID0gaXNBcnJheWxpa2UoIGVsZW1zICksXG4gICAgICAgICAgICAgICAgcmV0ID0gW107XG5cbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCB0cmFuc2xhdGluZyBlYWNoIG9mIHRoZSBpdGVtcyB0byB0aGVpclxuICAgICAgICAgICAgaWYgKCBpc0FycmF5ICkge1xuICAgICAgICAgICAgICAgIGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIHZhbHVlICE9IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXRbIHJldC5sZW5ndGggXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gR28gdGhyb3VnaCBldmVyeSBrZXkgb24gdGhlIG9iamVjdCxcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yICggaSBpbiBlbGVtcyApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBjYWxsYmFjayggZWxlbXNbIGkgXSwgaSwgYXJnICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCB2YWx1ZSAhPSBudWxsICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0WyByZXQubGVuZ3RoIF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5c1xuICAgICAgICAgICAgcmV0dXJuIGNvcmVfY29uY2F0LmFwcGx5KCBbXSwgcmV0ICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gQSBnbG9iYWwgR1VJRCBjb3VudGVyIGZvciBvYmplY3RzXG4gICAgICAgIGd1aWQ6IDEsXG5cbiAgICAgICAgLy8gQmluZCBhIGZ1bmN0aW9uIHRvIGEgY29udGV4dCwgb3B0aW9uYWxseSBwYXJ0aWFsbHkgYXBwbHlpbmcgYW55XG4gICAgICAgIC8vIGFyZ3VtZW50cy5cbiAgICAgICAgcHJveHk6IGZ1bmN0aW9uKCBmbiwgY29udGV4dCApIHtcbiAgICAgICAgICAgIHZhciBhcmdzLCBwcm94eSwgdG1wO1xuXG4gICAgICAgICAgICBpZiAoIHR5cGVvZiBjb250ZXh0ID09PSBcInN0cmluZ1wiICkge1xuICAgICAgICAgICAgICAgIHRtcCA9IGZuWyBjb250ZXh0IF07XG4gICAgICAgICAgICAgICAgY29udGV4dCA9IGZuO1xuICAgICAgICAgICAgICAgIGZuID0gdG1wO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBRdWljayBjaGVjayB0byBkZXRlcm1pbmUgaWYgdGFyZ2V0IGlzIGNhbGxhYmxlLCBpbiB0aGUgc3BlY1xuICAgICAgICAgICAgLy8gdGhpcyB0aHJvd3MgYSBUeXBlRXJyb3IsIGJ1dCB3ZSB3aWxsIGp1c3QgcmV0dXJuIHVuZGVmaW5lZC5cbiAgICAgICAgICAgIGlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCBmbiApICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNpbXVsYXRlZCBiaW5kXG4gICAgICAgICAgICBhcmdzID0gY29yZV9zbGljZS5jYWxsKCBhcmd1bWVudHMsIDIgKTtcbiAgICAgICAgICAgIHByb3h5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KCBjb250ZXh0IHx8IHRoaXMsIGFyZ3MuY29uY2F0KCBjb3JlX3NsaWNlLmNhbGwoIGFyZ3VtZW50cyApICkgKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIFNldCB0aGUgZ3VpZCBvZiB1bmlxdWUgaGFuZGxlciB0byB0aGUgc2FtZSBvZiBvcmlnaW5hbCBoYW5kbGVyLCBzbyBpdCBjYW4gYmUgcmVtb3ZlZFxuICAgICAgICAgICAgcHJveHkuZ3VpZCA9IGZuLmd1aWQgPSBmbi5ndWlkIHx8IGpRdWVyeS5ndWlkKys7XG5cbiAgICAgICAgICAgIHJldHVybiBwcm94eTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBNdWx0aWZ1bmN0aW9uYWwgbWV0aG9kIHRvIGdldCBhbmQgc2V0IHZhbHVlcyBvZiBhIGNvbGxlY3Rpb25cbiAgICAgICAgLy8gVGhlIHZhbHVlL3MgY2FuIG9wdGlvbmFsbHkgYmUgZXhlY3V0ZWQgaWYgaXQncyBhIGZ1bmN0aW9uXG4gICAgICAgIGFjY2VzczogZnVuY3Rpb24oIGVsZW1zLCBmbiwga2V5LCB2YWx1ZSwgY2hhaW5hYmxlLCBlbXB0eUdldCwgcmF3ICkge1xuICAgICAgICAgICAgdmFyIGkgPSAwLFxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IGVsZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBidWxrID0ga2V5ID09IG51bGw7XG5cbiAgICAgICAgICAgIC8vIFNldHMgbWFueSB2YWx1ZXNcbiAgICAgICAgICAgIGlmICggalF1ZXJ5LnR5cGUoIGtleSApID09PSBcIm9iamVjdFwiICkge1xuICAgICAgICAgICAgICAgIGNoYWluYWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgZm9yICggaSBpbiBrZXkgKSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS5hY2Nlc3MoIGVsZW1zLCBmbiwgaSwga2V5W2ldLCB0cnVlLCBlbXB0eUdldCwgcmF3ICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU2V0cyBvbmUgdmFsdWVcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgICAgY2hhaW5hYmxlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIGlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuICAgICAgICAgICAgICAgICAgICByYXcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICggYnVsayApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQnVsayBvcGVyYXRpb25zIHJ1biBhZ2FpbnN0IHRoZSBlbnRpcmUgc2V0XG4gICAgICAgICAgICAgICAgICAgIGlmICggcmF3ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm4uY2FsbCggZWxlbXMsIHZhbHVlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbiA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC4uLmV4Y2VwdCB3aGVuIGV4ZWN1dGluZyBmdW5jdGlvbiB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bGsgPSBmbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuID0gZnVuY3Rpb24oIGVsZW0sIGtleSwgdmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1bGsuY2FsbCggalF1ZXJ5KCBlbGVtICksIHZhbHVlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCBmbiApIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbiggZWxlbXNbaV0sIGtleSwgcmF3ID8gdmFsdWUgOiB2YWx1ZS5jYWxsKCBlbGVtc1tpXSwgaSwgZm4oIGVsZW1zW2ldLCBrZXkgKSApICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjaGFpbmFibGUgP1xuICAgICAgICAgICAgICAgIGVsZW1zIDpcblxuICAgICAgICAgICAgICAgIC8vIEdldHNcbiAgICAgICAgICAgICAgICBidWxrID9cbiAgICAgICAgICAgICAgICAgICAgZm4uY2FsbCggZWxlbXMgKSA6XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA/IGZuKCBlbGVtc1swXSwga2V5ICkgOiBlbXB0eUdldDtcbiAgICAgICAgfSxcblxuICAgICAgICBub3c6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuICggbmV3IERhdGUoKSApLmdldFRpbWUoKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBBIG1ldGhvZCBmb3IgcXVpY2tseSBzd2FwcGluZyBpbi9vdXQgQ1NTIHByb3BlcnRpZXMgdG8gZ2V0IGNvcnJlY3QgY2FsY3VsYXRpb25zLlxuICAgICAgICAvLyBOb3RlOiB0aGlzIG1ldGhvZCBiZWxvbmdzIHRvIHRoZSBjc3MgbW9kdWxlIGJ1dCBpdCdzIG5lZWRlZCBoZXJlIGZvciB0aGUgc3VwcG9ydCBtb2R1bGUuXG4gICAgICAgIC8vIElmIHN1cHBvcnQgZ2V0cyBtb2R1bGFyaXplZCwgdGhpcyBtZXRob2Qgc2hvdWxkIGJlIG1vdmVkIGJhY2sgdG8gdGhlIGNzcyBtb2R1bGUuXG4gICAgICAgIHN3YXA6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBjYWxsYmFjaywgYXJncyApIHtcbiAgICAgICAgICAgIHZhciByZXQsIG5hbWUsXG4gICAgICAgICAgICAgICAgb2xkID0ge307XG5cbiAgICAgICAgICAgIC8vIFJlbWVtYmVyIHRoZSBvbGQgdmFsdWVzLCBhbmQgaW5zZXJ0IHRoZSBuZXcgb25lc1xuICAgICAgICAgICAgZm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuICAgICAgICAgICAgICAgIG9sZFsgbmFtZSBdID0gZWxlbS5zdHlsZVsgbmFtZSBdO1xuICAgICAgICAgICAgICAgIGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9wdGlvbnNbIG5hbWUgXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0ID0gY2FsbGJhY2suYXBwbHkoIGVsZW0sIGFyZ3MgfHwgW10gKTtcblxuICAgICAgICAgICAgLy8gUmV2ZXJ0IHRoZSBvbGQgdmFsdWVzXG4gICAgICAgICAgICBmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG4gICAgICAgICAgICAgICAgZWxlbS5zdHlsZVsgbmFtZSBdID0gb2xkWyBuYW1lIF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGpRdWVyeS5yZWFkeS5wcm9taXNlID0gZnVuY3Rpb24oIG9iaiApIHtcbiAgICAgICAgaWYgKCAhcmVhZHlMaXN0ICkge1xuXG4gICAgICAgICAgICByZWFkeUxpc3QgPSBqUXVlcnkuRGVmZXJyZWQoKTtcblxuICAgICAgICAgICAgLy8gQ2F0Y2ggY2FzZXMgd2hlcmUgJChkb2N1bWVudCkucmVhZHkoKSBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGJyb3dzZXIgZXZlbnQgaGFzIGFscmVhZHkgb2NjdXJyZWQuXG4gICAgICAgICAgICAvLyB3ZSBvbmNlIHRyaWVkIHRvIHVzZSByZWFkeVN0YXRlIFwiaW50ZXJhY3RpdmVcIiBoZXJlLCBidXQgaXQgY2F1c2VkIGlzc3VlcyBsaWtlIHRoZSBvbmVcbiAgICAgICAgICAgIC8vIGRpc2NvdmVyZWQgYnkgQ2hyaXNTIGhlcmU6IGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEyMjgyI2NvbW1lbnQ6MTVcbiAgICAgICAgICAgIGlmICggZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiICkge1xuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBpdCBhc3luY2hyb25vdXNseSB0byBhbGxvdyBzY3JpcHRzIHRoZSBvcHBvcnR1bml0eSB0byBkZWxheSByZWFkeVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGpRdWVyeS5yZWFkeSApO1xuXG4gICAgICAgICAgICAgICAgLy8gU3RhbmRhcmRzLWJhc2VkIGJyb3dzZXJzIHN1cHBvcnQgRE9NQ29udGVudExvYWRlZFxuICAgICAgICAgICAgfSBlbHNlIGlmICggZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciApIHtcbiAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIGhhbmR5IGV2ZW50IGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJET01Db250ZW50TG9hZGVkXCIsIGNvbXBsZXRlZCwgZmFsc2UgKTtcblxuICAgICAgICAgICAgICAgIC8vIEEgZmFsbGJhY2sgdG8gd2luZG93Lm9ubG9hZCwgdGhhdCB3aWxsIGFsd2F5cyB3b3JrXG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIFwibG9hZFwiLCBjb21wbGV0ZWQsIGZhbHNlICk7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiBJRSBldmVudCBtb2RlbCBpcyB1c2VkXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSBmaXJpbmcgYmVmb3JlIG9ubG9hZCwgbWF5YmUgbGF0ZSBidXQgc2FmZSBhbHNvIGZvciBpZnJhbWVzXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYXR0YWNoRXZlbnQoIFwib25yZWFkeXN0YXRlY2hhbmdlXCIsIGNvbXBsZXRlZCApO1xuXG4gICAgICAgICAgICAgICAgLy8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYXR0YWNoRXZlbnQoIFwib25sb2FkXCIsIGNvbXBsZXRlZCApO1xuXG4gICAgICAgICAgICAgICAgLy8gSWYgSUUgYW5kIG5vdCBhIGZyYW1lXG4gICAgICAgICAgICAgICAgLy8gY29udGludWFsbHkgY2hlY2sgdG8gc2VlIGlmIHRoZSBkb2N1bWVudCBpcyByZWFkeVxuICAgICAgICAgICAgICAgIHZhciB0b3AgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcCA9IHdpbmRvdy5mcmFtZUVsZW1lbnQgPT0gbnVsbCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7fVxuXG4gICAgICAgICAgICAgICAgaWYgKCB0b3AgJiYgdG9wLmRvU2Nyb2xsICkge1xuICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24gZG9TY3JvbGxDaGVjaygpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIWpRdWVyeS5pc1JlYWR5ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHRoZSB0cmljayBieSBEaWVnbyBQZXJpbmlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cDovL2phdmFzY3JpcHQubndib3guY29tL0lFQ29udGVudExvYWRlZC9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wLmRvU2Nyb2xsKFwibGVmdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoIGRvU2Nyb2xsQ2hlY2ssIDUwICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGV0YWNoIGFsbCBkb20gcmVhZHkgZXZlbnRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWNoKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgZXhlY3V0ZSBhbnkgd2FpdGluZyBmdW5jdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkucmVhZHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlYWR5TGlzdC5wcm9taXNlKCBvYmogKTtcbiAgICB9O1xuXG4vLyBQb3B1bGF0ZSB0aGUgY2xhc3MydHlwZSBtYXBcbiAgICBqUXVlcnkuZWFjaChcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3JcIi5zcGxpdChcIiBcIiksIGZ1bmN0aW9uKGksIG5hbWUpIHtcbiAgICAgICAgY2xhc3MydHlwZVsgXCJbb2JqZWN0IFwiICsgbmFtZSArIFwiXVwiIF0gPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBpc0FycmF5bGlrZSggb2JqICkge1xuICAgICAgICB2YXIgbGVuZ3RoID0gb2JqLmxlbmd0aCxcbiAgICAgICAgICAgIHR5cGUgPSBqUXVlcnkudHlwZSggb2JqICk7XG5cbiAgICAgICAgaWYgKCBqUXVlcnkuaXNXaW5kb3coIG9iaiApICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCBvYmoubm9kZVR5cGUgPT09IDEgJiYgbGVuZ3RoICkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHlwZSA9PT0gXCJhcnJheVwiIHx8IHR5cGUgIT09IFwiZnVuY3Rpb25cIiAmJlxuICAgICAgICAgICAgKCBsZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgIHR5cGVvZiBsZW5ndGggPT09IFwibnVtYmVyXCIgJiYgbGVuZ3RoID4gMCAmJiAoIGxlbmd0aCAtIDEgKSBpbiBvYmogKTtcbiAgICB9XG5cbi8vIEFsbCBqUXVlcnkgb2JqZWN0cyBzaG91bGQgcG9pbnQgYmFjayB0byB0aGVzZVxuICAgIHJvb3RqUXVlcnkgPSBqUXVlcnkoZG9jdW1lbnQpO1xuICAgIC8qIVxuICAgICAqIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIHYxLjEwLjJcbiAgICAgKiBodHRwOi8vc2l6emxlanMuY29tL1xuICAgICAqXG4gICAgICogQ29weXJpZ2h0IDIwMTMgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICAgICAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICAgICAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAgICAgKlxuICAgICAqIERhdGU6IDIwMTMtMDctMDNcbiAgICAgKi9cbiAgICAoZnVuY3Rpb24oIHdpbmRvdywgdW5kZWZpbmVkICkge1xuXG4gICAgICAgIHZhciBpLFxuICAgICAgICAgICAgc3VwcG9ydCxcbiAgICAgICAgICAgIGNhY2hlZHJ1bnMsXG4gICAgICAgICAgICBFeHByLFxuICAgICAgICAgICAgZ2V0VGV4dCxcbiAgICAgICAgICAgIGlzWE1MLFxuICAgICAgICAgICAgY29tcGlsZSxcbiAgICAgICAgICAgIG91dGVybW9zdENvbnRleHQsXG4gICAgICAgICAgICBzb3J0SW5wdXQsXG5cbiAgICAgICAgLy8gTG9jYWwgZG9jdW1lbnQgdmFyc1xuICAgICAgICAgICAgc2V0RG9jdW1lbnQsXG4gICAgICAgICAgICBkb2N1bWVudCxcbiAgICAgICAgICAgIGRvY0VsZW0sXG4gICAgICAgICAgICBkb2N1bWVudElzSFRNTCxcbiAgICAgICAgICAgIHJidWdneVFTQSxcbiAgICAgICAgICAgIHJidWdneU1hdGNoZXMsXG4gICAgICAgICAgICBtYXRjaGVzLFxuICAgICAgICAgICAgY29udGFpbnMsXG5cbiAgICAgICAgLy8gSW5zdGFuY2Utc3BlY2lmaWMgZGF0YVxuICAgICAgICAgICAgZXhwYW5kbyA9IFwic2l6emxlXCIgKyAtKG5ldyBEYXRlKCkpLFxuICAgICAgICAgICAgcHJlZmVycmVkRG9jID0gd2luZG93LmRvY3VtZW50LFxuICAgICAgICAgICAgZGlycnVucyA9IDAsXG4gICAgICAgICAgICBkb25lID0gMCxcbiAgICAgICAgICAgIGNsYXNzQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuICAgICAgICAgICAgdG9rZW5DYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG4gICAgICAgICAgICBjb21waWxlckNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcbiAgICAgICAgICAgIGhhc0R1cGxpY2F0ZSA9IGZhbHNlLFxuICAgICAgICAgICAgc29ydE9yZGVyID0gZnVuY3Rpb24oIGEsIGIgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCBhID09PSBiICkge1xuICAgICAgICAgICAgICAgICAgICBoYXNEdXBsaWNhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgIC8vIEdlbmVyYWwtcHVycG9zZSBjb25zdGFudHNcbiAgICAgICAgICAgIHN0cnVuZGVmaW5lZCA9IHR5cGVvZiB1bmRlZmluZWQsXG4gICAgICAgICAgICBNQVhfTkVHQVRJVkUgPSAxIDw8IDMxLFxuXG4gICAgICAgIC8vIEluc3RhbmNlIG1ldGhvZHNcbiAgICAgICAgICAgIGhhc093biA9ICh7fSkuaGFzT3duUHJvcGVydHksXG4gICAgICAgICAgICBhcnIgPSBbXSxcbiAgICAgICAgICAgIHBvcCA9IGFyci5wb3AsXG4gICAgICAgICAgICBwdXNoX25hdGl2ZSA9IGFyci5wdXNoLFxuICAgICAgICAgICAgcHVzaCA9IGFyci5wdXNoLFxuICAgICAgICAgICAgc2xpY2UgPSBhcnIuc2xpY2UsXG4gICAgICAgIC8vIFVzZSBhIHN0cmlwcGVkLWRvd24gaW5kZXhPZiBpZiB3ZSBjYW4ndCB1c2UgYSBuYXRpdmUgb25lXG4gICAgICAgICAgICBpbmRleE9mID0gYXJyLmluZGV4T2YgfHwgZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpc1tpXSA9PT0gZWxlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgYm9vbGVhbnMgPSBcImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkXCIsXG5cbiAgICAgICAgLy8gUmVndWxhciBleHByZXNzaW9uc1xuXG4gICAgICAgIC8vIFdoaXRlc3BhY2UgY2hhcmFjdGVycyBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jd2hpdGVzcGFjZVxuICAgICAgICAgICAgd2hpdGVzcGFjZSA9IFwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixcbiAgICAgICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy1zeW50YXgvI2NoYXJhY3RlcnNcbiAgICAgICAgICAgIGNoYXJhY3RlckVuY29kaW5nID0gXCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKStcIixcblxuICAgICAgICAvLyBMb29zZWx5IG1vZGVsZWQgb24gQ1NTIGlkZW50aWZpZXIgY2hhcmFjdGVyc1xuICAgICAgICAvLyBBbiB1bnF1b3RlZCB2YWx1ZSBzaG91bGQgYmUgYSBDU1MgaWRlbnRpZmllciBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jYXR0cmlidXRlLXNlbGVjdG9yc1xuICAgICAgICAvLyBQcm9wZXIgc3ludGF4OiBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjdmFsdWUtZGVmLWlkZW50aWZpZXJcbiAgICAgICAgICAgIGlkZW50aWZpZXIgPSBjaGFyYWN0ZXJFbmNvZGluZy5yZXBsYWNlKCBcIndcIiwgXCJ3I1wiICksXG5cbiAgICAgICAgLy8gQWNjZXB0YWJsZSBvcGVyYXRvcnMgaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNhdHRyaWJ1dGUtc2VsZWN0b3JzXG4gICAgICAgICAgICBhdHRyaWJ1dGVzID0gXCJcXFxcW1wiICsgd2hpdGVzcGFjZSArIFwiKihcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpXCIgKyB3aGl0ZXNwYWNlICtcbiAgICAgICAgICAgICAgICBcIiooPzooWypeJHwhfl0/PSlcIiArIHdoaXRlc3BhY2UgKyBcIiooPzooWydcXFwiXSkoKD86XFxcXFxcXFwufFteXFxcXFxcXFxdKSo/KVxcXFwzfChcIiArIGlkZW50aWZpZXIgKyBcIil8KXwpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXF1cIixcblxuICAgICAgICAvLyBQcmVmZXIgYXJndW1lbnRzIHF1b3RlZCxcbiAgICAgICAgLy8gICB0aGVuIG5vdCBjb250YWluaW5nIHBzZXVkb3MvYnJhY2tldHMsXG4gICAgICAgIC8vICAgdGhlbiBhdHRyaWJ1dGUgc2VsZWN0b3JzL25vbi1wYXJlbnRoZXRpY2FsIGV4cHJlc3Npb25zLFxuICAgICAgICAvLyAgIHRoZW4gYW55dGhpbmcgZWxzZVxuICAgICAgICAvLyBUaGVzZSBwcmVmZXJlbmNlcyBhcmUgaGVyZSB0byByZWR1Y2UgdGhlIG51bWJlciBvZiBzZWxlY3RvcnNcbiAgICAgICAgLy8gICBuZWVkaW5nIHRva2VuaXplIGluIHRoZSBQU0VVRE8gcHJlRmlsdGVyXG4gICAgICAgICAgICBwc2V1ZG9zID0gXCI6KFwiICsgY2hhcmFjdGVyRW5jb2RpbmcgKyBcIikoPzpcXFxcKCgoWydcXFwiXSkoKD86XFxcXFxcXFwufFteXFxcXFxcXFxdKSo/KVxcXFwzfCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpW1xcXFxdXXxcIiArIGF0dHJpYnV0ZXMucmVwbGFjZSggMywgOCApICsgXCIpKil8LiopXFxcXCl8KVwiLFxuXG4gICAgICAgIC8vIExlYWRpbmcgYW5kIG5vbi1lc2NhcGVkIHRyYWlsaW5nIHdoaXRlc3BhY2UsIGNhcHR1cmluZyBzb21lIG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlcnMgcHJlY2VkaW5nIHRoZSBsYXR0ZXJcbiAgICAgICAgICAgIHJ0cmltID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiICsgd2hpdGVzcGFjZSArIFwiKyRcIiwgXCJnXCIgKSxcblxuICAgICAgICAgICAgcmNvbW1hID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqLFwiICsgd2hpdGVzcGFjZSArIFwiKlwiICksXG4gICAgICAgICAgICByY29tYmluYXRvcnMgPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIiooWz4rfl18XCIgKyB3aGl0ZXNwYWNlICsgXCIpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXCIgKSxcblxuICAgICAgICAgICAgcnNpYmxpbmcgPSBuZXcgUmVnRXhwKCB3aGl0ZXNwYWNlICsgXCIqWyt+XVwiICksXG4gICAgICAgICAgICByYXR0cmlidXRlUXVvdGVzID0gbmV3IFJlZ0V4cCggXCI9XCIgKyB3aGl0ZXNwYWNlICsgXCIqKFteXFxcXF0nXFxcIl0qKVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFxdXCIsIFwiZ1wiICksXG5cbiAgICAgICAgICAgIHJwc2V1ZG8gPSBuZXcgUmVnRXhwKCBwc2V1ZG9zICksXG4gICAgICAgICAgICByaWRlbnRpZmllciA9IG5ldyBSZWdFeHAoIFwiXlwiICsgaWRlbnRpZmllciArIFwiJFwiICksXG5cbiAgICAgICAgICAgIG1hdGNoRXhwciA9IHtcbiAgICAgICAgICAgICAgICBcIklEXCI6IG5ldyBSZWdFeHAoIFwiXiMoXCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArIFwiKVwiICksXG4gICAgICAgICAgICAgICAgXCJDTEFTU1wiOiBuZXcgUmVnRXhwKCBcIl5cXFxcLihcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpXCIgKSxcbiAgICAgICAgICAgICAgICBcIlRBR1wiOiBuZXcgUmVnRXhwKCBcIl4oXCIgKyBjaGFyYWN0ZXJFbmNvZGluZy5yZXBsYWNlKCBcIndcIiwgXCJ3KlwiICkgKyBcIilcIiApLFxuICAgICAgICAgICAgICAgIFwiQVRUUlwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIGF0dHJpYnV0ZXMgKSxcbiAgICAgICAgICAgICAgICBcIlBTRVVET1wiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHBzZXVkb3MgKSxcbiAgICAgICAgICAgICAgICBcIkNISUxEXCI6IG5ldyBSZWdFeHAoIFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIiArIHdoaXRlc3BhY2UgK1xuICAgICAgICAgICAgICAgICAgICBcIiooZXZlbnxvZGR8KChbKy1dfCkoXFxcXGQqKW58KVwiICsgd2hpdGVzcGFjZSArIFwiKig/OihbKy1dfClcIiArIHdoaXRlc3BhY2UgK1xuICAgICAgICAgICAgICAgICAgICBcIiooXFxcXGQrKXwpKVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFwpfClcIiwgXCJpXCIgKSxcbiAgICAgICAgICAgICAgICBcImJvb2xcIjogbmV3IFJlZ0V4cCggXCJeKD86XCIgKyBib29sZWFucyArIFwiKSRcIiwgXCJpXCIgKSxcbiAgICAgICAgICAgICAgICAvLyBGb3IgdXNlIGluIGxpYnJhcmllcyBpbXBsZW1lbnRpbmcgLmlzKClcbiAgICAgICAgICAgICAgICAvLyBXZSB1c2UgdGhpcyBmb3IgUE9TIG1hdGNoaW5nIGluIGBzZWxlY3RgXG4gICAgICAgICAgICAgICAgXCJuZWVkc0NvbnRleHRcIjogbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiICtcbiAgICAgICAgICAgICAgICAgICAgd2hpdGVzcGFjZSArIFwiKigoPzotXFxcXGQpP1xcXFxkKilcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpKD89W14tXXwkKVwiLCBcImlcIiApXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBybmF0aXZlID0gL15bXntdK1xce1xccypcXFtuYXRpdmUgXFx3LyxcblxuICAgICAgICAvLyBFYXNpbHktcGFyc2VhYmxlL3JldHJpZXZhYmxlIElEIG9yIFRBRyBvciBDTEFTUyBzZWxlY3RvcnNcbiAgICAgICAgICAgIHJxdWlja0V4cHIgPSAvXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxcblxuICAgICAgICAgICAgcmlucHV0cyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksXG4gICAgICAgICAgICByaGVhZGVyID0gL15oXFxkJC9pLFxuXG4gICAgICAgICAgICByZXNjYXBlID0gLyd8XFxcXC9nLFxuXG4gICAgICAgIC8vIENTUyBlc2NhcGVzIGh0dHA6Ly93d3cudzMub3JnL1RSL0NTUzIxL3N5bmRhdGEuaHRtbCNlc2NhcGVkLWNoYXJhY3RlcnNcbiAgICAgICAgICAgIHJ1bmVzY2FwZSA9IG5ldyBSZWdFeHAoIFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIgKyB3aGl0ZXNwYWNlICsgXCI/fChcIiArIHdoaXRlc3BhY2UgKyBcIil8LilcIiwgXCJpZ1wiICksXG4gICAgICAgICAgICBmdW5lc2NhcGUgPSBmdW5jdGlvbiggXywgZXNjYXBlZCwgZXNjYXBlZFdoaXRlc3BhY2UgKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhpZ2ggPSBcIjB4XCIgKyBlc2NhcGVkIC0gMHgxMDAwMDtcbiAgICAgICAgICAgICAgICAvLyBOYU4gbWVhbnMgbm9uLWNvZGVwb2ludFxuICAgICAgICAgICAgICAgIC8vIFN1cHBvcnQ6IEZpcmVmb3hcbiAgICAgICAgICAgICAgICAvLyBXb3JrYXJvdW5kIGVycm9uZW91cyBudW1lcmljIGludGVycHJldGF0aW9uIG9mICtcIjB4XCJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGlnaCAhPT0gaGlnaCB8fCBlc2NhcGVkV2hpdGVzcGFjZSA/XG4gICAgICAgICAgICAgICAgICAgIGVzY2FwZWQgOlxuICAgICAgICAgICAgICAgICAgICAvLyBCTVAgY29kZXBvaW50XG4gICAgICAgICAgICAgICAgICAgIGhpZ2ggPCAwID9cbiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggKyAweDEwMDAwICkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VwcGxlbWVudGFsIFBsYW5lIGNvZGVwb2ludCAoc3Vycm9nYXRlIHBhaXIpXG4gICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoID4+IDEwIHwgMHhEODAwLCBoaWdoICYgMHgzRkYgfCAweERDMDAgKTtcbiAgICAgICAgICAgIH07XG5cbi8vIE9wdGltaXplIGZvciBwdXNoLmFwcGx5KCBfLCBOb2RlTGlzdCApXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwdXNoLmFwcGx5KFxuICAgICAgICAgICAgICAgIChhcnIgPSBzbGljZS5jYWxsKCBwcmVmZXJyZWREb2MuY2hpbGROb2RlcyApKSxcbiAgICAgICAgICAgICAgICBwcmVmZXJyZWREb2MuY2hpbGROb2Rlc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4wXG4gICAgICAgICAgICAvLyBEZXRlY3Qgc2lsZW50bHkgZmFpbGluZyBwdXNoLmFwcGx5XG4gICAgICAgICAgICBhcnJbIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzLmxlbmd0aCBdLm5vZGVUeXBlO1xuICAgICAgICB9IGNhdGNoICggZSApIHtcbiAgICAgICAgICAgIHB1c2ggPSB7IGFwcGx5OiBhcnIubGVuZ3RoID9cblxuICAgICAgICAgICAgICAgIC8vIExldmVyYWdlIHNsaWNlIGlmIHBvc3NpYmxlXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oIHRhcmdldCwgZWxzICkge1xuICAgICAgICAgICAgICAgICAgICBwdXNoX25hdGl2ZS5hcHBseSggdGFyZ2V0LCBzbGljZS5jYWxsKGVscykgKTtcbiAgICAgICAgICAgICAgICB9IDpcblxuICAgICAgICAgICAgICAgIC8vIFN1cHBvcnQ6IElFPDlcbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgYXBwZW5kIGRpcmVjdGx5XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oIHRhcmdldCwgZWxzICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaiA9IHRhcmdldC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FuJ3QgdHJ1c3QgTm9kZUxpc3QubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICggKHRhcmdldFtqKytdID0gZWxzW2krK10pICkge31cbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Lmxlbmd0aCA9IGogLSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICkge1xuICAgICAgICAgICAgdmFyIG1hdGNoLCBlbGVtLCBtLCBub2RlVHlwZSxcbiAgICAgICAgICAgIC8vIFFTQSB2YXJzXG4gICAgICAgICAgICAgICAgaSwgZ3JvdXBzLCBvbGQsIG5pZCwgbmV3Q29udGV4dCwgbmV3U2VsZWN0b3I7XG5cbiAgICAgICAgICAgIGlmICggKCBjb250ZXh0ID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBwcmVmZXJyZWREb2MgKSAhPT0gZG9jdW1lbnQgKSB7XG4gICAgICAgICAgICAgICAgc2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XG4gICAgICAgICAgICByZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblxuICAgICAgICAgICAgaWYgKCAhc2VsZWN0b3IgfHwgdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiICkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIChub2RlVHlwZSA9IGNvbnRleHQubm9kZVR5cGUpICE9PSAxICYmIG5vZGVUeXBlICE9PSA5ICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCBkb2N1bWVudElzSFRNTCAmJiAhc2VlZCApIHtcblxuICAgICAgICAgICAgICAgIC8vIFNob3J0Y3V0c1xuICAgICAgICAgICAgICAgIGlmICggKG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApKSApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3BlZWQtdXA6IFNpenpsZShcIiNJRFwiKVxuICAgICAgICAgICAgICAgICAgICBpZiAoIChtID0gbWF0Y2hbMV0pICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBub2RlVHlwZSA9PT0gOSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggbSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHBhcmVudE5vZGUgdG8gY2F0Y2ggd2hlbiBCbGFja2JlcnJ5IDQuNiByZXR1cm5zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9kZXMgdGhhdCBhcmUgbm8gbG9uZ2VyIGluIHRoZSBkb2N1bWVudCAjNjk2M1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZWxlbSAmJiBlbGVtLnBhcmVudE5vZGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSB0aGUgY2FzZSB3aGVyZSBJRSwgT3BlcmEsIGFuZCBXZWJraXQgcmV0dXJuIGl0ZW1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGVsZW0uaWQgPT09IG0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goIGVsZW0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb250ZXh0IGlzIG5vdCBhIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgJiYgKGVsZW0gPSBjb250ZXh0Lm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKSAmJiBlbGVtLmlkID09PSBtICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goIGVsZW0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTcGVlZC11cDogU2l6emxlKFwiVEFHXCIpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG1hdGNoWzJdICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggc2VsZWN0b3IgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNwZWVkLXVwOiBTaXp6bGUoXCIuQ0xBU1NcIilcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggKG0gPSBtYXRjaFszXSkgJiYgc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggbSApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFFTQSBwYXRoXG4gICAgICAgICAgICAgICAgaWYgKCBzdXBwb3J0LnFzYSAmJiAoIXJidWdneVFTQSB8fCAhcmJ1Z2d5UVNBLnRlc3QoIHNlbGVjdG9yICkpICkge1xuICAgICAgICAgICAgICAgICAgICBuaWQgPSBvbGQgPSBleHBhbmRvO1xuICAgICAgICAgICAgICAgICAgICBuZXdDb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgICAgICAgICAgICAgbmV3U2VsZWN0b3IgPSBub2RlVHlwZSA9PT0gOSAmJiBzZWxlY3RvcjtcblxuICAgICAgICAgICAgICAgICAgICAvLyBxU0Egd29ya3Mgc3RyYW5nZWx5IG9uIEVsZW1lbnQtcm9vdGVkIHF1ZXJpZXNcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgY2FuIHdvcmsgYXJvdW5kIHRoaXMgYnkgc3BlY2lmeWluZyBhbiBleHRyYSBJRCBvbiB0aGUgcm9vdFxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgd29ya2luZyB1cCBmcm9tIHRoZXJlIChUaGFua3MgdG8gQW5kcmV3IER1cG9udCBmb3IgdGhlIHRlY2huaXF1ZSlcbiAgICAgICAgICAgICAgICAgICAgLy8gSUUgOCBkb2Vzbid0IHdvcmsgb24gb2JqZWN0IGVsZW1lbnRzXG4gICAgICAgICAgICAgICAgICAgIGlmICggbm9kZVR5cGUgPT09IDEgJiYgY29udGV4dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcIm9iamVjdFwiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBzID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKG9sZCA9IGNvbnRleHQuZ2V0QXR0cmlidXRlKFwiaWRcIikpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pZCA9IG9sZC5yZXBsYWNlKCByZXNjYXBlLCBcIlxcXFwkJlwiICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc2V0QXR0cmlidXRlKCBcImlkXCIsIG5pZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbmlkID0gXCJbaWQ9J1wiICsgbmlkICsgXCInXSBcIjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGdyb3Vwcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIGktLSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cHNbaV0gPSBuaWQgKyB0b1NlbGVjdG9yKCBncm91cHNbaV0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbnRleHQgPSByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIGNvbnRleHQucGFyZW50Tm9kZSB8fCBjb250ZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2VsZWN0b3IgPSBncm91cHMuam9pbihcIixcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoIG5ld1NlbGVjdG9yICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXNoLmFwcGx5KCByZXN1bHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdDb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIG5ld1NlbGVjdG9yIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChxc2FFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFvbGQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQucmVtb3ZlQXR0cmlidXRlKFwiaWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBbGwgb3RoZXJzXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0KCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGUga2V5LXZhbHVlIGNhY2hlcyBvZiBsaW1pdGVkIHNpemVcbiAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9uKHN0cmluZywgT2JqZWN0KX0gUmV0dXJucyB0aGUgT2JqZWN0IGRhdGEgYWZ0ZXIgc3RvcmluZyBpdCBvbiBpdHNlbGYgd2l0aFxuICAgICAgICAgKlx0cHJvcGVydHkgbmFtZSB0aGUgKHNwYWNlLXN1ZmZpeGVkKSBzdHJpbmcgYW5kIChpZiB0aGUgY2FjaGUgaXMgbGFyZ2VyIHRoYW4gRXhwci5jYWNoZUxlbmd0aClcbiAgICAgICAgICpcdGRlbGV0aW5nIHRoZSBvbGRlc3QgZW50cnlcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUNhY2hlKCkge1xuICAgICAgICAgICAgdmFyIGtleXMgPSBbXTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gY2FjaGUoIGtleSwgdmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgLy8gVXNlIChrZXkgKyBcIiBcIikgdG8gYXZvaWQgY29sbGlzaW9uIHdpdGggbmF0aXZlIHByb3RvdHlwZSBwcm9wZXJ0aWVzIChzZWUgSXNzdWUgIzE1NylcbiAgICAgICAgICAgICAgICBpZiAoIGtleXMucHVzaCgga2V5ICs9IFwiIFwiICkgPiBFeHByLmNhY2hlTGVuZ3RoICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGtlZXAgdGhlIG1vc3QgcmVjZW50IGVudHJpZXNcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNhY2hlWyBrZXlzLnNoaWZ0KCkgXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIChjYWNoZVsga2V5IF0gPSB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2FjaGU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogTWFyayBhIGZ1bmN0aW9uIGZvciBzcGVjaWFsIHVzZSBieSBTaXp6bGVcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIG1hcmtcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIG1hcmtGdW5jdGlvbiggZm4gKSB7XG4gICAgICAgICAgICBmblsgZXhwYW5kbyBdID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBmbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdXBwb3J0IHRlc3RpbmcgdXNpbmcgYW4gZWxlbWVudFxuICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBQYXNzZWQgdGhlIGNyZWF0ZWQgZGl2IGFuZCBleHBlY3RzIGEgYm9vbGVhbiByZXN1bHRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGFzc2VydCggZm4gKSB7XG4gICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gISFmbiggZGl2ICk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgZnJvbSBpdHMgcGFyZW50IGJ5IGRlZmF1bHRcbiAgICAgICAgICAgICAgICBpZiAoIGRpdi5wYXJlbnROb2RlICkge1xuICAgICAgICAgICAgICAgICAgICBkaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggZGl2ICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJlbGVhc2UgbWVtb3J5IGluIElFXG4gICAgICAgICAgICAgICAgZGl2ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGRzIHRoZSBzYW1lIGhhbmRsZXIgZm9yIGFsbCBvZiB0aGUgc3BlY2lmaWVkIGF0dHJzXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBhdHRycyBQaXBlLXNlcGFyYXRlZCBsaXN0IG9mIGF0dHJpYnV0ZXNcbiAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciBUaGUgbWV0aG9kIHRoYXQgd2lsbCBiZSBhcHBsaWVkXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBhZGRIYW5kbGUoIGF0dHJzLCBoYW5kbGVyICkge1xuICAgICAgICAgICAgdmFyIGFyciA9IGF0dHJzLnNwbGl0KFwifFwiKSxcbiAgICAgICAgICAgICAgICBpID0gYXR0cnMubGVuZ3RoO1xuXG4gICAgICAgICAgICB3aGlsZSAoIGktLSApIHtcbiAgICAgICAgICAgICAgICBFeHByLmF0dHJIYW5kbGVbIGFycltpXSBdID0gaGFuZGxlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVja3MgZG9jdW1lbnQgb3JkZXIgb2YgdHdvIHNpYmxpbmdzXG4gICAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gYVxuICAgICAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGJcbiAgICAgICAgICogQHJldHVybnMge051bWJlcn0gUmV0dXJucyBsZXNzIHRoYW4gMCBpZiBhIHByZWNlZGVzIGIsIGdyZWF0ZXIgdGhhbiAwIGlmIGEgZm9sbG93cyBiXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzaWJsaW5nQ2hlY2soIGEsIGIgKSB7XG4gICAgICAgICAgICB2YXIgY3VyID0gYiAmJiBhLFxuICAgICAgICAgICAgICAgIGRpZmYgPSBjdXIgJiYgYS5ub2RlVHlwZSA9PT0gMSAmJiBiLm5vZGVUeXBlID09PSAxICYmXG4gICAgICAgICAgICAgICAgICAgICggfmIuc291cmNlSW5kZXggfHwgTUFYX05FR0FUSVZFICkgLVxuICAgICAgICAgICAgICAgICAgICAoIH5hLnNvdXJjZUluZGV4IHx8IE1BWF9ORUdBVElWRSApO1xuXG4gICAgICAgICAgICAvLyBVc2UgSUUgc291cmNlSW5kZXggaWYgYXZhaWxhYmxlIG9uIGJvdGggbm9kZXNcbiAgICAgICAgICAgIGlmICggZGlmZiApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGlmZjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYiBmb2xsb3dzIGFcbiAgICAgICAgICAgIGlmICggY3VyICkge1xuICAgICAgICAgICAgICAgIHdoaWxlICggKGN1ciA9IGN1ci5uZXh0U2libGluZykgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggY3VyID09PSBiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYSA/IDEgOiAtMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGlucHV0IHR5cGVzXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVJbnB1dFBzZXVkbyggdHlwZSApIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBidXR0b25zXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8oIHR5cGUgKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChuYW1lID09PSBcImlucHV0XCIgfHwgbmFtZSA9PT0gXCJidXR0b25cIikgJiYgZWxlbS50eXBlID09PSB0eXBlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIHBvc2l0aW9uYWxzXG4gICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmbiApIHtcbiAgICAgICAgICAgIHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIGFyZ3VtZW50ICkge1xuICAgICAgICAgICAgICAgIGFyZ3VtZW50ID0gK2FyZ3VtZW50O1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBqLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hJbmRleGVzID0gZm4oIFtdLCBzZWVkLmxlbmd0aCwgYXJndW1lbnQgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBtYXRjaEluZGV4ZXMubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIE1hdGNoIGVsZW1lbnRzIGZvdW5kIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXhlc1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIGktLSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc2VlZFsgKGogPSBtYXRjaEluZGV4ZXNbaV0pIF0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VlZFtqXSA9ICEobWF0Y2hlc1tqXSA9IHNlZWRbal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlY3QgeG1sXG4gICAgICAgICAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsZW0gQW4gZWxlbWVudCBvciBhIGRvY3VtZW50XG4gICAgICAgICAqL1xuICAgICAgICBpc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgLy8gZG9jdW1lbnRFbGVtZW50IGlzIHZlcmlmaWVkIGZvciBjYXNlcyB3aGVyZSBpdCBkb2Vzbid0IHlldCBleGlzdFxuICAgICAgICAgICAgLy8gKHN1Y2ggYXMgbG9hZGluZyBpZnJhbWVzIGluIElFIC0gIzQ4MzMpXG4gICAgICAgICAgICB2YXIgZG9jdW1lbnRFbGVtZW50ID0gZWxlbSAmJiAoZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0pLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgICAgIHJldHVybiBkb2N1bWVudEVsZW1lbnQgPyBkb2N1bWVudEVsZW1lbnQubm9kZU5hbWUgIT09IFwiSFRNTFwiIDogZmFsc2U7XG4gICAgICAgIH07XG5cbi8vIEV4cG9zZSBzdXBwb3J0IHZhcnMgZm9yIGNvbnZlbmllbmNlXG4gICAgICAgIHN1cHBvcnQgPSBTaXp6bGUuc3VwcG9ydCA9IHt9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIGRvY3VtZW50LXJlbGF0ZWQgdmFyaWFibGVzIG9uY2UgYmFzZWQgb24gdGhlIGN1cnJlbnQgZG9jdW1lbnRcbiAgICAgICAgICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gW2RvY10gQW4gZWxlbWVudCBvciBkb2N1bWVudCBvYmplY3QgdG8gdXNlIHRvIHNldCB0aGUgZG9jdW1lbnRcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudFxuICAgICAgICAgKi9cbiAgICAgICAgc2V0RG9jdW1lbnQgPSBTaXp6bGUuc2V0RG9jdW1lbnQgPSBmdW5jdGlvbiggbm9kZSApIHtcbiAgICAgICAgICAgIHZhciBkb2MgPSBub2RlID8gbm9kZS5vd25lckRvY3VtZW50IHx8IG5vZGUgOiBwcmVmZXJyZWREb2MsXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gZG9jLmRlZmF1bHRWaWV3O1xuXG4gICAgICAgICAgICAvLyBJZiBubyBkb2N1bWVudCBhbmQgZG9jdW1lbnRFbGVtZW50IGlzIGF2YWlsYWJsZSwgcmV0dXJuXG4gICAgICAgICAgICBpZiAoIGRvYyA9PT0gZG9jdW1lbnQgfHwgZG9jLm5vZGVUeXBlICE9PSA5IHx8ICFkb2MuZG9jdW1lbnRFbGVtZW50ICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2V0IG91ciBkb2N1bWVudFxuICAgICAgICAgICAgZG9jdW1lbnQgPSBkb2M7XG4gICAgICAgICAgICBkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuICAgICAgICAgICAgLy8gU3VwcG9ydCB0ZXN0c1xuICAgICAgICAgICAgZG9jdW1lbnRJc0hUTUwgPSAhaXNYTUwoIGRvYyApO1xuXG4gICAgICAgICAgICAvLyBTdXBwb3J0OiBJRT44XG4gICAgICAgICAgICAvLyBJZiBpZnJhbWUgZG9jdW1lbnQgaXMgYXNzaWduZWQgdG8gXCJkb2N1bWVudFwiIHZhcmlhYmxlIGFuZCBpZiBpZnJhbWUgaGFzIGJlZW4gcmVsb2FkZWQsXG4gICAgICAgICAgICAvLyBJRSB3aWxsIHRocm93IFwicGVybWlzc2lvbiBkZW5pZWRcIiBlcnJvciB3aGVuIGFjY2Vzc2luZyBcImRvY3VtZW50XCIgdmFyaWFibGUsIHNlZSBqUXVlcnkgIzEzOTM2XG4gICAgICAgICAgICAvLyBJRTYtOCBkbyBub3Qgc3VwcG9ydCB0aGUgZGVmYXVsdFZpZXcgcHJvcGVydHkgc28gcGFyZW50IHdpbGwgYmUgdW5kZWZpbmVkXG4gICAgICAgICAgICBpZiAoIHBhcmVudCAmJiBwYXJlbnQuYXR0YWNoRXZlbnQgJiYgcGFyZW50ICE9PSBwYXJlbnQudG9wICkge1xuICAgICAgICAgICAgICAgIHBhcmVudC5hdHRhY2hFdmVudCggXCJvbmJlZm9yZXVubG9hZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0RG9jdW1lbnQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogQXR0cmlidXRlc1xuICAgICAgICAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAgICAgICAgICAgLy8gU3VwcG9ydDogSUU8OFxuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoYXQgZ2V0QXR0cmlidXRlIHJlYWxseSByZXR1cm5zIGF0dHJpYnV0ZXMgYW5kIG5vdCBwcm9wZXJ0aWVzIChleGNlcHRpbmcgSUU4IGJvb2xlYW5zKVxuICAgICAgICAgICAgc3VwcG9ydC5hdHRyaWJ1dGVzID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG4gICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9IFwiaVwiO1xuICAgICAgICAgICAgICAgIHJldHVybiAhZGl2LmdldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvKiBnZXRFbGVtZW50KHMpQnkqXG4gICAgICAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBnZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikgcmV0dXJucyBvbmx5IGVsZW1lbnRzXG4gICAgICAgICAgICBzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG4gICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKCBkb2MuY3JlYXRlQ29tbWVudChcIlwiKSApO1xuICAgICAgICAgICAgICAgIHJldHVybiAhZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKS5sZW5ndGg7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSBjYW4gYmUgdHJ1c3RlZFxuICAgICAgICAgICAgc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG4gICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IFwiPGRpdiBjbGFzcz0nYSc+PC9kaXY+PGRpdiBjbGFzcz0nYSBpJz48L2Rpdj5cIjtcblxuICAgICAgICAgICAgICAgIC8vIFN1cHBvcnQ6IFNhZmFyaTw0XG4gICAgICAgICAgICAgICAgLy8gQ2F0Y2ggY2xhc3Mgb3Zlci1jYWNoaW5nXG4gICAgICAgICAgICAgICAgZGl2LmZpcnN0Q2hpbGQuY2xhc3NOYW1lID0gXCJpXCI7XG4gICAgICAgICAgICAgICAgLy8gU3VwcG9ydDogT3BlcmE8MTBcbiAgICAgICAgICAgICAgICAvLyBDYXRjaCBnRUJDTiBmYWlsdXJlIHRvIGZpbmQgbm9uLWxlYWRpbmcgY2xhc3Nlc1xuICAgICAgICAgICAgICAgIHJldHVybiBkaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImlcIikubGVuZ3RoID09PSAyO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFN1cHBvcnQ6IElFPDEwXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBnZXRFbGVtZW50QnlJZCByZXR1cm5zIGVsZW1lbnRzIGJ5IG5hbWVcbiAgICAgICAgICAgIC8vIFRoZSBicm9rZW4gZ2V0RWxlbWVudEJ5SWQgbWV0aG9kcyBkb24ndCBwaWNrIHVwIHByb2dyYW1hdGljYWxseS1zZXQgbmFtZXMsXG4gICAgICAgICAgICAvLyBzbyB1c2UgYSByb3VuZGFib3V0IGdldEVsZW1lbnRzQnlOYW1lIHRlc3RcbiAgICAgICAgICAgIHN1cHBvcnQuZ2V0QnlJZCA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuICAgICAgICAgICAgICAgIGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGRpdiApLmlkID0gZXhwYW5kbztcbiAgICAgICAgICAgICAgICByZXR1cm4gIWRvYy5nZXRFbGVtZW50c0J5TmFtZSB8fCAhZG9jLmdldEVsZW1lbnRzQnlOYW1lKCBleHBhbmRvICkubGVuZ3RoO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIElEIGZpbmQgYW5kIGZpbHRlclxuICAgICAgICAgICAgaWYgKCBzdXBwb3J0LmdldEJ5SWQgKSB7XG4gICAgICAgICAgICAgICAgRXhwci5maW5kW1wiSURcIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQgIT09IHN0cnVuZGVmaW5lZCAmJiBkb2N1bWVudElzSFRNTCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggaWQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHBhcmVudE5vZGUgdG8gY2F0Y2ggd2hlbiBCbGFja2JlcnJ5IDQuNiByZXR1cm5zXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBub2RlcyB0aGF0IGFyZSBubyBsb25nZXIgaW4gdGhlIGRvY3VtZW50ICM2OTYzXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbSAmJiBtLnBhcmVudE5vZGUgPyBbbV0gOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgRXhwci5maWx0ZXJbXCJJRFwiXSA9IGZ1bmN0aW9uKCBpZCApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZShcImlkXCIpID09PSBhdHRySWQ7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU3VwcG9ydDogSUU2LzdcbiAgICAgICAgICAgICAgICAvLyBnZXRFbGVtZW50QnlJZCBpcyBub3QgcmVsaWFibGUgYXMgYSBmaW5kIHNob3J0Y3V0XG4gICAgICAgICAgICAgICAgZGVsZXRlIEV4cHIuZmluZFtcIklEXCJdO1xuXG4gICAgICAgICAgICAgICAgRXhwci5maWx0ZXJbXCJJRFwiXSA9ICBmdW5jdGlvbiggaWQgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUgIT09IHN0cnVuZGVmaW5lZCAmJiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlICYmIG5vZGUudmFsdWUgPT09IGF0dHJJZDtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUYWdcbiAgICAgICAgICAgIEV4cHIuZmluZFtcIlRBR1wiXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgP1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IHN0cnVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gOlxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wID0gW10sXG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgb3V0IHBvc3NpYmxlIGNvbW1lbnRzXG4gICAgICAgICAgICAgICAgICAgIGlmICggdGFnID09PSBcIipcIiApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLnB1c2goIGVsZW0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0bXA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gQ2xhc3NcbiAgICAgICAgICAgIEV4cHIuZmluZFtcIkNMQVNTXCJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGZ1bmN0aW9uKCBjbGFzc05hbWUsIGNvbnRleHQgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAhPT0gc3RydW5kZWZpbmVkICYmIGRvY3VtZW50SXNIVE1MICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggY2xhc3NOYW1lICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvKiBRU0EvbWF0Y2hlc1NlbGVjdG9yXG4gICAgICAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gICAgICAgICAgICAvLyBRU0EgYW5kIG1hdGNoZXNTZWxlY3RvciBzdXBwb3J0XG5cbiAgICAgICAgICAgIC8vIG1hdGNoZXNTZWxlY3Rvcig6YWN0aXZlKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoSUU5L09wZXJhIDExLjUpXG4gICAgICAgICAgICByYnVnZ3lNYXRjaGVzID0gW107XG5cbiAgICAgICAgICAgIC8vIHFTYSg6Zm9jdXMpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChDaHJvbWUgMjEpXG4gICAgICAgICAgICAvLyBXZSBhbGxvdyB0aGlzIGJlY2F1c2Ugb2YgYSBidWcgaW4gSUU4LzkgdGhhdCB0aHJvd3MgYW4gZXJyb3JcbiAgICAgICAgICAgIC8vIHdoZW5ldmVyIGBkb2N1bWVudC5hY3RpdmVFbGVtZW50YCBpcyBhY2Nlc3NlZCBvbiBhbiBpZnJhbWVcbiAgICAgICAgICAgIC8vIFNvLCB3ZSBhbGxvdyA6Zm9jdXMgdG8gcGFzcyB0aHJvdWdoIFFTQSBhbGwgdGhlIHRpbWUgdG8gYXZvaWQgdGhlIElFIGVycm9yXG4gICAgICAgICAgICAvLyBTZWUgaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTMzNzhcbiAgICAgICAgICAgIHJidWdneVFTQSA9IFtdO1xuXG4gICAgICAgICAgICBpZiAoIChzdXBwb3J0LnFzYSA9IHJuYXRpdmUudGVzdCggZG9jLnF1ZXJ5U2VsZWN0b3JBbGwgKSkgKSB7XG4gICAgICAgICAgICAgICAgLy8gQnVpbGQgUVNBIHJlZ2V4XG4gICAgICAgICAgICAgICAgLy8gUmVnZXggc3RyYXRlZ3kgYWRvcHRlZCBmcm9tIERpZWdvIFBlcmluaVxuICAgICAgICAgICAgICAgIGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTZWxlY3QgaXMgc2V0IHRvIGVtcHR5IHN0cmluZyBvbiBwdXJwb3NlXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdG8gdGVzdCBJRSdzIHRyZWF0bWVudCBvZiBub3QgZXhwbGljaXRseVxuICAgICAgICAgICAgICAgICAgICAvLyBzZXR0aW5nIGEgYm9vbGVhbiBjb250ZW50IGF0dHJpYnV0ZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gc2luY2UgaXRzIHByZXNlbmNlIHNob3VsZCBiZSBlbm91Z2hcbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTIzNTlcbiAgICAgICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IFwiPHNlbGVjdD48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PlwiO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFN1cHBvcnQ6IElFOFxuICAgICAgICAgICAgICAgICAgICAvLyBCb29sZWFuIGF0dHJpYnV0ZXMgYW5kIFwidmFsdWVcIiBhcmUgbm90IHRyZWF0ZWQgY29ycmVjdGx5XG4gICAgICAgICAgICAgICAgICAgIGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYnVnZ3lRU0EucHVzaCggXCJcXFxcW1wiICsgd2hpdGVzcGFjZSArIFwiKig/OnZhbHVlfFwiICsgYm9vbGVhbnMgKyBcIilcIiApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gV2Via2l0L09wZXJhIC0gOmNoZWNrZWQgc2hvdWxkIHJldHVybiBzZWxlY3RlZCBvcHRpb24gZWxlbWVudHNcbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYnVnZ3lRU0EucHVzaChcIjpjaGVja2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTdXBwb3J0OiBPcGVyYSAxMC0xMi9JRThcbiAgICAgICAgICAgICAgICAgICAgLy8gXj0gJD0gKj0gYW5kIGVtcHR5IHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAvLyBTaG91bGQgbm90IHNlbGVjdCBhbnl0aGluZ1xuICAgICAgICAgICAgICAgICAgICAvLyBTdXBwb3J0OiBXaW5kb3dzIDggTmF0aXZlIEFwcHNcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHR5cGUgYXR0cmlidXRlIGlzIHJlc3RyaWN0ZWQgZHVyaW5nIC5pbm5lckhUTUwgYXNzaWdubWVudFxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBkb2MuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCBcImhpZGRlblwiICk7XG4gICAgICAgICAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZCggaW5wdXQgKS5zZXRBdHRyaWJ1dGUoIFwidFwiLCBcIlwiICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBkaXYucXVlcnlTZWxlY3RvckFsbChcIlt0Xj0nJ11cIikubGVuZ3RoICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmJ1Z2d5UVNBLnB1c2goIFwiWypeJF09XCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86Jyd8XFxcIlxcXCIpXCIgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEZGIDMuNSAtIDplbmFibGVkLzpkaXNhYmxlZCBhbmQgaGlkZGVuIGVsZW1lbnRzIChoaWRkZW4gZWxlbWVudHMgYXJlIHN0aWxsIGVuYWJsZWQpXG4gICAgICAgICAgICAgICAgICAgIC8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzXG4gICAgICAgICAgICAgICAgICAgIGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiOmVuYWJsZWRcIikubGVuZ3RoICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmJ1Z2d5UVNBLnB1c2goIFwiOmVuYWJsZWRcIiwgXCI6ZGlzYWJsZWRcIiApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gT3BlcmEgMTAtMTEgZG9lcyBub3QgdGhyb3cgb24gcG9zdC1jb21tYSBpbnZhbGlkIHBzZXVkb3NcbiAgICAgICAgICAgICAgICAgICAgZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpO1xuICAgICAgICAgICAgICAgICAgICByYnVnZ3lRU0EucHVzaChcIiwuKjpcIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggKHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yID0gcm5hdGl2ZS50ZXN0KCAobWF0Y2hlcyA9IGRvY0VsZW0ud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICAgICAgICAgIGRvY0VsZW0ubW96TWF0Y2hlc1NlbGVjdG9yIHx8XG4gICAgICAgICAgICAgICAgICAgIGRvY0VsZW0ub01hdGNoZXNTZWxlY3RvciB8fFxuICAgICAgICAgICAgICAgICAgICBkb2NFbGVtLm1zTWF0Y2hlc1NlbGVjdG9yKSApKSApIHtcblxuICAgICAgICAgICAgICAgIGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgaXQncyBwb3NzaWJsZSB0byBkbyBtYXRjaGVzU2VsZWN0b3JcbiAgICAgICAgICAgICAgICAgICAgLy8gb24gYSBkaXNjb25uZWN0ZWQgbm9kZSAoSUUgOSlcbiAgICAgICAgICAgICAgICAgICAgc3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaCA9IG1hdGNoZXMuY2FsbCggZGl2LCBcImRpdlwiICk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBzaG91bGQgZmFpbCB3aXRoIGFuIGV4Y2VwdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyBHZWNrbyBkb2VzIG5vdCBlcnJvciwgcmV0dXJucyBmYWxzZSBpbnN0ZWFkXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZXMuY2FsbCggZGl2LCBcIltzIT0nJ106eFwiICk7XG4gICAgICAgICAgICAgICAgICAgIHJidWdneU1hdGNoZXMucHVzaCggXCIhPVwiLCBwc2V1ZG9zICk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJidWdneVFTQSA9IHJidWdneVFTQS5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5UVNBLmpvaW4oXCJ8XCIpICk7XG4gICAgICAgICAgICByYnVnZ3lNYXRjaGVzID0gcmJ1Z2d5TWF0Y2hlcy5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5TWF0Y2hlcy5qb2luKFwifFwiKSApO1xuXG4gICAgICAgICAgICAvKiBDb250YWluc1xuICAgICAgICAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAgICAgICAgICAgLy8gRWxlbWVudCBjb250YWlucyBhbm90aGVyXG4gICAgICAgICAgICAvLyBQdXJwb3NlZnVsbHkgZG9lcyBub3QgaW1wbGVtZW50IGluY2x1c2l2ZSBkZXNjZW5kZW50XG4gICAgICAgICAgICAvLyBBcyBpbiwgYW4gZWxlbWVudCBkb2VzIG5vdCBjb250YWluIGl0c2VsZlxuICAgICAgICAgICAgY29udGFpbnMgPSBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29udGFpbnMgKSB8fCBkb2NFbGVtLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uID9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiggYSwgYiApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFkb3duID0gYS5ub2RlVHlwZSA9PT0gOSA/IGEuZG9jdW1lbnRFbGVtZW50IDogYSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1cCA9IGIgJiYgYi5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSA9PT0gYnVwIHx8ICEhKCBidXAgJiYgYnVwLm5vZGVUeXBlID09PSAxICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZG93bi5jb250YWlucyA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkb3duLmNvbnRhaW5zKCBidXAgKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAmJiBhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBidXAgKSAmIDE2XG4gICAgICAgICAgICAgICAgICAgICAgICApKTtcbiAgICAgICAgICAgICAgICB9IDpcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiggYSwgYiApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCAoYiA9IGIucGFyZW50Tm9kZSkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBiID09PSBhICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8qIFNvcnRpbmdcbiAgICAgICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgICAgICAgICAgIC8vIERvY3VtZW50IG9yZGVyIHNvcnRpbmdcbiAgICAgICAgICAgIHNvcnRPcmRlciA9IGRvY0VsZW0uY29tcGFyZURvY3VtZW50UG9zaXRpb24gP1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCBhLCBiICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEZsYWcgZm9yIGR1cGxpY2F0ZSByZW1vdmFsXG4gICAgICAgICAgICAgICAgICAgIGlmICggYSA9PT0gYiApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0R1cGxpY2F0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb21wYXJlID0gYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAmJiBhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGIgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIGNvbXBhcmUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEaXNjb25uZWN0ZWQgbm9kZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY29tcGFyZSAmIDEgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIXN1cHBvcnQuc29ydERldGFjaGVkICYmIGIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGEgKSA9PT0gY29tcGFyZSkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaG9vc2UgdGhlIGZpcnN0IGVsZW1lbnQgdGhhdCBpcyByZWxhdGVkIHRvIG91ciBwcmVmZXJyZWQgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGEgPT09IGRvYyB8fCBjb250YWlucyhwcmVmZXJyZWREb2MsIGEpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggYiA9PT0gZG9jIHx8IGNvbnRhaW5zKHByZWZlcnJlZERvYywgYikgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1haW50YWluIG9yaWdpbmFsIG9yZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNvcnRJbnB1dCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggaW5kZXhPZi5jYWxsKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YuY2FsbCggc29ydElucHV0LCBiICkgKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wYXJlICYgNCA/IC0xIDogMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIE5vdCBkaXJlY3RseSBjb21wYXJhYmxlLCBzb3J0IG9uIGV4aXN0ZW5jZSBvZiBtZXRob2RcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gPyAtMSA6IDE7XG4gICAgICAgICAgICAgICAgfSA6XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oIGEsIGIgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1cCA9IGEucGFyZW50Tm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1cCA9IGIucGFyZW50Tm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwID0gWyBhIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBicCA9IFsgYiBdO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEV4aXQgZWFybHkgaWYgdGhlIG5vZGVzIGFyZSBpZGVudGljYWxcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBhID09PSBiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzRHVwbGljYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQYXJlbnRsZXNzIG5vZGVzIGFyZSBlaXRoZXIgZG9jdW1lbnRzIG9yIGRpc2Nvbm5lY3RlZFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCAhYXVwIHx8ICFidXAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSA9PT0gZG9jID8gLTEgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPT09IGRvYyA/IDEgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXAgPyAtMSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXAgPyAxIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3J0SW5wdXQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIGluZGV4T2YuY2FsbCggc29ydElucHV0LCBhICkgLSBpbmRleE9mLmNhbGwoIHNvcnRJbnB1dCwgYiApICkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbm9kZXMgYXJlIHNpYmxpbmdzLCB3ZSBjYW4gZG8gYSBxdWljayBjaGVja1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBhdXAgPT09IGJ1cCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaWJsaW5nQ2hlY2soIGEsIGIgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSB3ZSBuZWVkIGZ1bGwgbGlzdHMgb2YgdGhlaXIgYW5jZXN0b3JzIGZvciBjb21wYXJpc29uXG4gICAgICAgICAgICAgICAgICAgIGN1ciA9IGE7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICggKGN1ciA9IGN1ci5wYXJlbnROb2RlKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwLnVuc2hpZnQoIGN1ciApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGN1ciA9IGI7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICggKGN1ciA9IGN1ci5wYXJlbnROb2RlKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJwLnVuc2hpZnQoIGN1ciApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3lcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCBhcFtpXSA9PT0gYnBbaV0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEbyBhIHNpYmxpbmcgY2hlY2sgaWYgdGhlIG5vZGVzIGhhdmUgYSBjb21tb24gYW5jZXN0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpYmxpbmdDaGVjayggYXBbaV0sIGJwW2ldICkgOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2Ugbm9kZXMgaW4gb3VyIGRvY3VtZW50IHNvcnQgZmlyc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwW2ldID09PSBwcmVmZXJyZWREb2MgPyAtMSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnBbaV0gPT09IHByZWZlcnJlZERvYyA/IDEgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBkb2M7XG4gICAgICAgIH07XG5cbiAgICAgICAgU2l6emxlLm1hdGNoZXMgPSBmdW5jdGlvbiggZXhwciwgZWxlbWVudHMgKSB7XG4gICAgICAgICAgICByZXR1cm4gU2l6emxlKCBleHByLCBudWxsLCBudWxsLCBlbGVtZW50cyApO1xuICAgICAgICB9O1xuXG4gICAgICAgIFNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHtcbiAgICAgICAgICAgIC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuICAgICAgICAgICAgaWYgKCAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtICkgIT09IGRvY3VtZW50ICkge1xuICAgICAgICAgICAgICAgIHNldERvY3VtZW50KCBlbGVtICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IGF0dHJpYnV0ZSBzZWxlY3RvcnMgYXJlIHF1b3RlZFxuICAgICAgICAgICAgZXhwciA9IGV4cHIucmVwbGFjZSggcmF0dHJpYnV0ZVF1b3RlcywgXCI9JyQxJ11cIiApO1xuXG4gICAgICAgICAgICBpZiAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yICYmIGRvY3VtZW50SXNIVE1MICYmXG4gICAgICAgICAgICAgICAgKCAhcmJ1Z2d5TWF0Y2hlcyB8fCAhcmJ1Z2d5TWF0Y2hlcy50ZXN0KCBleHByICkgKSAmJlxuICAgICAgICAgICAgICAgICggIXJidWdneVFTQSAgICAgfHwgIXJidWdneVFTQS50ZXN0KCBleHByICkgKSApIHtcblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXQgPSBtYXRjaGVzLmNhbGwoIGVsZW0sIGV4cHIgKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJRSA5J3MgbWF0Y2hlc1NlbGVjdG9yIHJldHVybnMgZmFsc2Ugb24gZGlzY29ubmVjdGVkIG5vZGVzXG4gICAgICAgICAgICAgICAgICAgIGlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFzIHdlbGwsIGRpc2Nvbm5lY3RlZCBub2RlcyBhcmUgc2FpZCB0byBiZSBpbiBhIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmcmFnbWVudCBpbiBJRSA5XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge31cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFNpenpsZSggZXhwciwgZG9jdW1lbnQsIG51bGwsIFtlbGVtXSApLmxlbmd0aCA+IDA7XG4gICAgICAgIH07XG5cbiAgICAgICAgU2l6emxlLmNvbnRhaW5zID0gZnVuY3Rpb24oIGNvbnRleHQsIGVsZW0gKSB7XG4gICAgICAgICAgICAvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWRcbiAgICAgICAgICAgIGlmICggKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCApICE9PSBkb2N1bWVudCApIHtcbiAgICAgICAgICAgICAgICBzZXREb2N1bWVudCggY29udGV4dCApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICk7XG4gICAgICAgIH07XG5cbiAgICAgICAgU2l6emxlLmF0dHIgPSBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcbiAgICAgICAgICAgIC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuICAgICAgICAgICAgaWYgKCAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtICkgIT09IGRvY3VtZW50ICkge1xuICAgICAgICAgICAgICAgIHNldERvY3VtZW50KCBlbGVtICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBmbiA9IEV4cHIuYXR0ckhhbmRsZVsgbmFtZS50b0xvd2VyQ2FzZSgpIF0sXG4gICAgICAgICAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoalF1ZXJ5ICMxMzgwNylcbiAgICAgICAgICAgICAgICB2YWwgPSBmbiAmJiBoYXNPd24uY2FsbCggRXhwci5hdHRySGFuZGxlLCBuYW1lLnRvTG93ZXJDYXNlKCkgKSA/XG4gICAgICAgICAgICAgICAgICAgIGZuKCBlbGVtLCBuYW1lLCAhZG9jdW1lbnRJc0hUTUwgKSA6XG4gICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgcmV0dXJuIHZhbCA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICBzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWRvY3VtZW50SXNIVE1MID9cbiAgICAgICAgICAgICAgICAgICAgZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKSA6XG4gICAgICAgICAgICAgICAgICAgICh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpICYmIHZhbC5zcGVjaWZpZWQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsLnZhbHVlIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgOlxuICAgICAgICAgICAgICAgIHZhbDtcbiAgICAgICAgfTtcblxuICAgICAgICBTaXp6bGUuZXJyb3IgPSBmdW5jdGlvbiggbXNnICkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCBcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiICsgbXNnICk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERvY3VtZW50IHNvcnRpbmcgYW5kIHJlbW92aW5nIGR1cGxpY2F0ZXNcbiAgICAgICAgICogQHBhcmFtIHtBcnJheUxpa2V9IHJlc3VsdHNcbiAgICAgICAgICovXG4gICAgICAgIFNpenpsZS51bmlxdWVTb3J0ID0gZnVuY3Rpb24oIHJlc3VsdHMgKSB7XG4gICAgICAgICAgICB2YXIgZWxlbSxcbiAgICAgICAgICAgICAgICBkdXBsaWNhdGVzID0gW10sXG4gICAgICAgICAgICAgICAgaiA9IDAsXG4gICAgICAgICAgICAgICAgaSA9IDA7XG5cbiAgICAgICAgICAgIC8vIFVubGVzcyB3ZSAqa25vdyogd2UgY2FuIGRldGVjdCBkdXBsaWNhdGVzLCBhc3N1bWUgdGhlaXIgcHJlc2VuY2VcbiAgICAgICAgICAgIGhhc0R1cGxpY2F0ZSA9ICFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7XG4gICAgICAgICAgICBzb3J0SW5wdXQgPSAhc3VwcG9ydC5zb3J0U3RhYmxlICYmIHJlc3VsdHMuc2xpY2UoIDAgKTtcbiAgICAgICAgICAgIHJlc3VsdHMuc29ydCggc29ydE9yZGVyICk7XG5cbiAgICAgICAgICAgIGlmICggaGFzRHVwbGljYXRlICkge1xuICAgICAgICAgICAgICAgIHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGVsZW0gPT09IHJlc3VsdHNbIGkgXSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGogPSBkdXBsaWNhdGVzLnB1c2goIGkgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB3aGlsZSAoIGotLSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5zcGxpY2UoIGR1cGxpY2F0ZXNbIGogXSwgMSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFV0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHJpZXZpbmcgdGhlIHRleHQgdmFsdWUgb2YgYW4gYXJyYXkgb2YgRE9NIG5vZGVzXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl8RWxlbWVudH0gZWxlbVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0VGV4dCA9IFNpenpsZS5nZXRUZXh0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSxcbiAgICAgICAgICAgICAgICByZXQgPSBcIlwiLFxuICAgICAgICAgICAgICAgIGkgPSAwLFxuICAgICAgICAgICAgICAgIG5vZGVUeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuICAgICAgICAgICAgaWYgKCAhbm9kZVR5cGUgKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgbm8gbm9kZVR5cGUsIHRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgYW4gYXJyYXlcbiAgICAgICAgICAgICAgICBmb3IgKCA7IChub2RlID0gZWxlbVtpXSk7IGkrKyApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG8gbm90IHRyYXZlcnNlIGNvbW1lbnQgbm9kZXNcbiAgICAgICAgICAgICAgICAgICAgcmV0ICs9IGdldFRleHQoIG5vZGUgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCBub2RlVHlwZSA9PT0gMSB8fCBub2RlVHlwZSA9PT0gOSB8fCBub2RlVHlwZSA9PT0gMTEgKSB7XG4gICAgICAgICAgICAgICAgLy8gVXNlIHRleHRDb250ZW50IGZvciBlbGVtZW50c1xuICAgICAgICAgICAgICAgIC8vIGlubmVyVGV4dCB1c2FnZSByZW1vdmVkIGZvciBjb25zaXN0ZW5jeSBvZiBuZXcgbGluZXMgKHNlZSAjMTExNTMpXG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YgZWxlbS50ZXh0Q29udGVudCA9PT0gXCJzdHJpbmdcIiApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0udGV4dENvbnRlbnQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVHJhdmVyc2UgaXRzIGNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0ICs9IGdldFRleHQoIGVsZW0gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAzIHx8IG5vZGVUeXBlID09PSA0ICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtLm5vZGVWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERvIG5vdCBpbmNsdWRlIGNvbW1lbnQgb3IgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBub2Rlc1xuXG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9O1xuXG4gICAgICAgIEV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzID0ge1xuXG4gICAgICAgICAgICAvLyBDYW4gYmUgYWRqdXN0ZWQgYnkgdGhlIHVzZXJcbiAgICAgICAgICAgIGNhY2hlTGVuZ3RoOiA1MCxcblxuICAgICAgICAgICAgY3JlYXRlUHNldWRvOiBtYXJrRnVuY3Rpb24sXG5cbiAgICAgICAgICAgIG1hdGNoOiBtYXRjaEV4cHIsXG5cbiAgICAgICAgICAgIGF0dHJIYW5kbGU6IHt9LFxuXG4gICAgICAgICAgICBmaW5kOiB7fSxcblxuICAgICAgICAgICAgcmVsYXRpdmU6IHtcbiAgICAgICAgICAgICAgICBcIj5cIjogeyBkaXI6IFwicGFyZW50Tm9kZVwiLCBmaXJzdDogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgIFwiIFwiOiB7IGRpcjogXCJwYXJlbnROb2RlXCIgfSxcbiAgICAgICAgICAgICAgICBcIitcIjogeyBkaXI6IFwicHJldmlvdXNTaWJsaW5nXCIsIGZpcnN0OiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgXCJ+XCI6IHsgZGlyOiBcInByZXZpb3VzU2libGluZ1wiIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHByZUZpbHRlcjoge1xuICAgICAgICAgICAgICAgIFwiQVRUUlwiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoWzFdID0gbWF0Y2hbMV0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlIHRoZSBnaXZlbiB2YWx1ZSB0byBtYXRjaFszXSB3aGV0aGVyIHF1b3RlZCBvciB1bnF1b3RlZFxuICAgICAgICAgICAgICAgICAgICBtYXRjaFszXSA9ICggbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIiApLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXRjaFsyXSA9PT0gXCJ+PVwiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hbM10gPSBcIiBcIiArIG1hdGNoWzNdICsgXCIgXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2guc2xpY2UoIDAsIDQgKTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgXCJDSElMRFwiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qIG1hdGNoZXMgZnJvbSBtYXRjaEV4cHJbXCJDSElMRFwiXVxuICAgICAgICAgICAgICAgICAgICAgMSB0eXBlIChvbmx5fG50aHwuLi4pXG4gICAgICAgICAgICAgICAgICAgICAyIHdoYXQgKGNoaWxkfG9mLXR5cGUpXG4gICAgICAgICAgICAgICAgICAgICAzIGFyZ3VtZW50IChldmVufG9kZHxcXGQqfFxcZCpuKFsrLV1cXGQrKT98Li4uKVxuICAgICAgICAgICAgICAgICAgICAgNCB4bi1jb21wb25lbnQgb2YgeG4reSBhcmd1bWVudCAoWystXT9cXGQqbnwpXG4gICAgICAgICAgICAgICAgICAgICA1IHNpZ24gb2YgeG4tY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICA2IHggb2YgeG4tY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICA3IHNpZ24gb2YgeS1jb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgIDggeSBvZiB5LWNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hbMV0gPSBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggbWF0Y2hbMV0uc2xpY2UoIDAsIDMgKSA9PT0gXCJudGhcIiApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG50aC0qIHJlcXVpcmVzIGFyZ3VtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFtYXRjaFszXSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG51bWVyaWMgeCBhbmQgeSBwYXJhbWV0ZXJzIGZvciBFeHByLmZpbHRlci5DSElMRFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVtZW1iZXIgdGhhdCBmYWxzZS90cnVlIGNhc3QgcmVzcGVjdGl2ZWx5IHRvIDAvMVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hbNF0gPSArKCBtYXRjaFs0XSA/IG1hdGNoWzVdICsgKG1hdGNoWzZdIHx8IDEpIDogMiAqICggbWF0Y2hbM10gPT09IFwiZXZlblwiIHx8IG1hdGNoWzNdID09PSBcIm9kZFwiICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoWzVdID0gKyggKCBtYXRjaFs3XSArIG1hdGNoWzhdICkgfHwgbWF0Y2hbM10gPT09IFwib2RkXCIgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXIgdHlwZXMgcHJvaGliaXQgYXJndW1lbnRzXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG1hdGNoWzNdICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgU2l6emxlLmVycm9yKCBtYXRjaFswXSApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBcIlBTRVVET1wiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBleGNlc3MsXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnF1b3RlZCA9ICFtYXRjaFs1XSAmJiBtYXRjaFsyXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIG1hdGNoRXhwcltcIkNISUxEXCJdLnRlc3QoIG1hdGNoWzBdICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFjY2VwdCBxdW90ZWQgYXJndW1lbnRzIGFzLWlzXG4gICAgICAgICAgICAgICAgICAgIGlmICggbWF0Y2hbM10gJiYgbWF0Y2hbNF0gIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoWzJdID0gbWF0Y2hbNF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0cmlwIGV4Y2VzcyBjaGFyYWN0ZXJzIGZyb20gdW5xdW90ZWQgYXJndW1lbnRzXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHVucXVvdGVkICYmIHJwc2V1ZG8udGVzdCggdW5xdW90ZWQgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IGV4Y2VzcyBmcm9tIHRva2VuaXplIChyZWN1cnNpdmVseSlcbiAgICAgICAgICAgICAgICAgICAgICAgIChleGNlc3MgPSB0b2tlbml6ZSggdW5xdW90ZWQsIHRydWUgKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkdmFuY2UgdG8gdGhlIG5leHQgY2xvc2luZyBwYXJlbnRoZXNpc1xuICAgICAgICAgICAgICAgICAgICAgICAgKGV4Y2VzcyA9IHVucXVvdGVkLmluZGV4T2YoIFwiKVwiLCB1bnF1b3RlZC5sZW5ndGggLSBleGNlc3MgKSAtIHVucXVvdGVkLmxlbmd0aCkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4Y2VzcyBpcyBhIG5lZ2F0aXZlIGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwLCBleGNlc3MgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoWzJdID0gdW5xdW90ZWQuc2xpY2UoIDAsIGV4Y2VzcyApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIG9ubHkgY2FwdHVyZXMgbmVlZGVkIGJ5IHRoZSBwc2V1ZG8gZmlsdGVyIG1ldGhvZCAodHlwZSBhbmQgYXJndW1lbnQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaC5zbGljZSggMCwgMyApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGZpbHRlcjoge1xuXG4gICAgICAgICAgICAgICAgXCJUQUdcIjogZnVuY3Rpb24oIG5vZGVOYW1lU2VsZWN0b3IgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBub2RlTmFtZSA9IG5vZGVOYW1lU2VsZWN0b3IucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZU5hbWVTZWxlY3RvciA9PT0gXCIqXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9IDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9kZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBcIkNMQVNTXCI6IGZ1bmN0aW9uKCBjbGFzc05hbWUgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXR0ZXJuID0gY2xhc3NDYWNoZVsgY2xhc3NOYW1lICsgXCIgXCIgXTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGF0dGVybiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgKHBhdHRlcm4gPSBuZXcgUmVnRXhwKCBcIihefFwiICsgd2hpdGVzcGFjZSArIFwiKVwiICsgY2xhc3NOYW1lICsgXCIoXCIgKyB3aGl0ZXNwYWNlICsgXCJ8JClcIiApKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NDYWNoZSggY2xhc3NOYW1lLCBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGF0dGVybi50ZXN0KCB0eXBlb2YgZWxlbS5jbGFzc05hbWUgPT09IFwic3RyaW5nXCIgJiYgZWxlbS5jbGFzc05hbWUgfHwgdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlICE9PSBzdHJ1bmRlZmluZWQgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgXCJBVFRSXCI6IGZ1bmN0aW9uKCBuYW1lLCBvcGVyYXRvciwgY2hlY2sgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBTaXp6bGUuYXR0ciggZWxlbSwgbmFtZSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHJlc3VsdCA9PSBudWxsICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcGVyYXRvciA9PT0gXCIhPVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhb3BlcmF0b3IgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3BlcmF0b3IgPT09IFwiPVwiID8gcmVzdWx0ID09PSBjaGVjayA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0b3IgPT09IFwiIT1cIiA/IHJlc3VsdCAhPT0gY2hlY2sgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRvciA9PT0gXCJePVwiID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPT09IDAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0b3IgPT09IFwiKj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yID09PSBcIiQ9XCIgPyBjaGVjayAmJiByZXN1bHQuc2xpY2UoIC1jaGVjay5sZW5ndGggKSA9PT0gY2hlY2sgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRvciA9PT0gXCJ+PVwiID8gKCBcIiBcIiArIHJlc3VsdCArIFwiIFwiICkuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdG9yID09PSBcInw9XCIgPyByZXN1bHQgPT09IGNoZWNrIHx8IHJlc3VsdC5zbGljZSggMCwgY2hlY2subGVuZ3RoICsgMSApID09PSBjaGVjayArIFwiLVwiIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgXCJDSElMRFwiOiBmdW5jdGlvbiggdHlwZSwgd2hhdCwgYXJndW1lbnQsIGZpcnN0LCBsYXN0ICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2ltcGxlID0gdHlwZS5zbGljZSggMCwgMyApICE9PSBcIm50aFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yd2FyZCA9IHR5cGUuc2xpY2UoIC00ICkgIT09IFwibGFzdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2ZUeXBlID0gd2hhdCA9PT0gXCJvZi10eXBlXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpcnN0ID09PSAxICYmIGxhc3QgPT09IDAgP1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaG9ydGN1dCBmb3IgOm50aC0qKG4pXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISFlbGVtLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IDpcblxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2FjaGUsIG91dGVyQ2FjaGUsIG5vZGUsIGRpZmYsIG5vZGVJbmRleCwgc3RhcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpciA9IHNpbXBsZSAhPT0gZm9yd2FyZCA/IFwibmV4dFNpYmxpbmdcIiA6IFwicHJldmlvdXNTaWJsaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG9mVHlwZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZUNhY2hlID0gIXhtbCAmJiAhb2ZUeXBlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXJlbnQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gOihmaXJzdHxsYXN0fG9ubHkpLShjaGlsZHxvZi10eXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNpbXBsZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICggZGlyICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSBlbGVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICggKG5vZGUgPSBub2RlWyBkaXIgXSkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggb2ZUeXBlID8gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDogbm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXZlcnNlIGRpcmVjdGlvbiBmb3IgOm9ubHktKiAoaWYgd2UgaGF2ZW4ndCB5ZXQgZG9uZSBzbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IGRpciA9IHR5cGUgPT09IFwib25seVwiICYmICFzdGFydCAmJiBcIm5leHRTaWJsaW5nXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gWyBmb3J3YXJkID8gcGFyZW50LmZpcnN0Q2hpbGQgOiBwYXJlbnQubGFzdENoaWxkIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbm9uLXhtbCA6bnRoLWNoaWxkKC4uLikgc3RvcmVzIGNhY2hlIGRhdGEgb24gYHBhcmVudGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBmb3J3YXJkICYmIHVzZUNhY2hlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VlayBgZWxlbWAgZnJvbSBhIHByZXZpb3VzbHktY2FjaGVkIGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRlckNhY2hlID0gcGFyZW50WyBleHBhbmRvIF0gfHwgKHBhcmVudFsgZXhwYW5kbyBdID0ge30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGUgPSBvdXRlckNhY2hlWyB0eXBlIF0gfHwgW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlSW5kZXggPSBjYWNoZVswXSA9PT0gZGlycnVucyAmJiBjYWNoZVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpZmYgPSBjYWNoZVswXSA9PT0gZGlycnVucyAmJiBjYWNoZVsyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlSW5kZXggJiYgcGFyZW50LmNoaWxkTm9kZXNbIG5vZGVJbmRleCBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIChub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gc2Vla2luZyBgZWxlbWAgZnJvbSB0aGUgc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZGlmZiA9IG5vZGVJbmRleCA9IDApIHx8IHN0YXJ0LnBvcCgpKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gZm91bmQsIGNhY2hlIGluZGV4ZXMgb24gYHBhcmVudGAgYW5kIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBub2RlLm5vZGVUeXBlID09PSAxICYmICsrZGlmZiAmJiBub2RlID09PSBlbGVtICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRlckNhY2hlWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIG5vZGVJbmRleCwgZGlmZiBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZSBwcmV2aW91c2x5LWNhY2hlZCBlbGVtZW50IGluZGV4IGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB1c2VDYWNoZSAmJiAoY2FjaGUgPSAoZWxlbVsgZXhwYW5kbyBdIHx8IChlbGVtWyBleHBhbmRvIF0gPSB7fSkpWyB0eXBlIF0pICYmIGNhY2hlWzBdID09PSBkaXJydW5zICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZiA9IGNhY2hlWzFdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB4bWwgOm50aC1jaGlsZCguLi4pIG9yIDpudGgtbGFzdC1jaGlsZCguLi4pIG9yIDpudGgoLWxhc3QpPy1vZi10eXBlKC4uLilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgc2FtZSBsb29wIGFzIGFib3ZlIHRvIHNlZWsgYGVsZW1gIGZyb20gdGhlIHN0YXJ0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIChub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoIG9mVHlwZSA/IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6IG5vZGUubm9kZVR5cGUgPT09IDEgKSAmJiArK2RpZmYgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhY2hlIHRoZSBpbmRleCBvZiBlYWNoIGVuY291bnRlcmVkIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB1c2VDYWNoZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KSlbIHR5cGUgXSA9IFsgZGlycnVucywgZGlmZiBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBub2RlID09PSBlbGVtICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmNvcnBvcmF0ZSB0aGUgb2Zmc2V0LCB0aGVuIGNoZWNrIGFnYWluc3QgY3ljbGUgc2l6ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaWZmIC09IGxhc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkaWZmID09PSBmaXJzdCB8fCAoIGRpZmYgJSBmaXJzdCA9PT0gMCAmJiBkaWZmIC8gZmlyc3QgPj0gMCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIFwiUFNFVURPXCI6IGZ1bmN0aW9uKCBwc2V1ZG8sIGFyZ3VtZW50ICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBwc2V1ZG8tY2xhc3MgbmFtZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmVcbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNwc2V1ZG8tY2xhc3Nlc1xuICAgICAgICAgICAgICAgICAgICAvLyBQcmlvcml0aXplIGJ5IGNhc2Ugc2Vuc2l0aXZpdHkgaW4gY2FzZSBjdXN0b20gcHNldWRvcyBhcmUgYWRkZWQgd2l0aCB1cHBlcmNhc2UgbGV0dGVyc1xuICAgICAgICAgICAgICAgICAgICAvLyBSZW1lbWJlciB0aGF0IHNldEZpbHRlcnMgaW5oZXJpdHMgZnJvbSBwc2V1ZG9zXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm4gPSBFeHByLnBzZXVkb3NbIHBzZXVkbyBdIHx8IEV4cHIuc2V0RmlsdGVyc1sgcHNldWRvLnRvTG93ZXJDYXNlKCkgXSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpenpsZS5lcnJvciggXCJ1bnN1cHBvcnRlZCBwc2V1ZG86IFwiICsgcHNldWRvICk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHVzZXIgbWF5IHVzZSBjcmVhdGVQc2V1ZG8gdG8gaW5kaWNhdGUgdGhhdFxuICAgICAgICAgICAgICAgICAgICAvLyBhcmd1bWVudHMgYXJlIG5lZWRlZCB0byBjcmVhdGUgdGhlIGZpbHRlciBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAvLyBqdXN0IGFzIFNpenpsZSBkb2VzXG4gICAgICAgICAgICAgICAgICAgIGlmICggZm5bIGV4cGFuZG8gXSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmbiggYXJndW1lbnQgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEJ1dCBtYWludGFpbiBzdXBwb3J0IGZvciBvbGQgc2lnbmF0dXJlc1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGZuLmxlbmd0aCA+IDEgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzID0gWyBwc2V1ZG8sIHBzZXVkbywgXCJcIiwgYXJndW1lbnQgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoIHBzZXVkby50b0xvd2VyQ2FzZSgpICkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZWQgPSBmbiggc2VlZCwgYXJndW1lbnQgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBtYXRjaGVkLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCBpLS0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHggPSBpbmRleE9mLmNhbGwoIHNlZWQsIG1hdGNoZWRbaV0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZWRbIGlkeCBdID0gISggbWF0Y2hlc1sgaWR4IF0gPSBtYXRjaGVkW2ldICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmbiggZWxlbSwgMCwgYXJncyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgcHNldWRvczoge1xuICAgICAgICAgICAgICAgIC8vIFBvdGVudGlhbGx5IGNvbXBsZXggcHNldWRvc1xuICAgICAgICAgICAgICAgIFwibm90XCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRyaW0gdGhlIHNlbGVjdG9yIHBhc3NlZCB0byBjb21waWxlXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIGF2b2lkIHRyZWF0aW5nIGxlYWRpbmcgYW5kIHRyYWlsaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIHNwYWNlcyBhcyBjb21iaW5hdG9yc1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXIgPSBjb21waWxlKCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICkgKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlclsgZXhwYW5kbyBdID9cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcywgY29udGV4dCwgeG1sICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bm1hdGNoZWQgPSBtYXRjaGVyKCBzZWVkLCBudWxsLCB4bWwsIFtdICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBzZWVkLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hdGNoIGVsZW1lbnRzIHVubWF0Y2hlZCBieSBgbWF0Y2hlcmBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIGktLSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWVkW2ldID0gIShtYXRjaGVzW2ldID0gZWxlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0WzBdID0gZWxlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVyKCBpbnB1dCwgbnVsbCwgeG1sLCByZXN1bHRzICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFyZXN1bHRzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSxcblxuICAgICAgICAgICAgICAgIFwiaGFzXCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBTaXp6bGUoIHNlbGVjdG9yLCBlbGVtICkubGVuZ3RoID4gMDtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSxcblxuICAgICAgICAgICAgICAgIFwiY29udGFpbnNcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCB0ZXh0ICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCBlbGVtLnRleHRDb250ZW50IHx8IGVsZW0uaW5uZXJUZXh0IHx8IGdldFRleHQoIGVsZW0gKSApLmluZGV4T2YoIHRleHQgKSA+IC0xO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pLFxuXG4gICAgICAgICAgICAgICAgLy8gXCJXaGV0aGVyIGFuIGVsZW1lbnQgaXMgcmVwcmVzZW50ZWQgYnkgYSA6bGFuZygpIHNlbGVjdG9yXG4gICAgICAgICAgICAgICAgLy8gaXMgYmFzZWQgc29sZWx5IG9uIHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWVcbiAgICAgICAgICAgICAgICAvLyBiZWluZyBlcXVhbCB0byB0aGUgaWRlbnRpZmllciBDLFxuICAgICAgICAgICAgICAgIC8vIG9yIGJlZ2lubmluZyB3aXRoIHRoZSBpZGVudGlmaWVyIEMgaW1tZWRpYXRlbHkgZm9sbG93ZWQgYnkgXCItXCIuXG4gICAgICAgICAgICAgICAgLy8gVGhlIG1hdGNoaW5nIG9mIEMgYWdhaW5zdCB0aGUgZWxlbWVudCdzIGxhbmd1YWdlIHZhbHVlIGlzIHBlcmZvcm1lZCBjYXNlLWluc2Vuc2l0aXZlbHkuXG4gICAgICAgICAgICAgICAgLy8gVGhlIGlkZW50aWZpZXIgQyBkb2VzIG5vdCBoYXZlIHRvIGJlIGEgdmFsaWQgbGFuZ3VhZ2UgbmFtZS5cIlxuICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jbGFuZy1wc2V1ZG9cbiAgICAgICAgICAgICAgICBcImxhbmdcIjogbWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggbGFuZyApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbGFuZyB2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgaWRlbnRpZmllclxuICAgICAgICAgICAgICAgICAgICBpZiAoICFyaWRlbnRpZmllci50ZXN0KGxhbmcgfHwgXCJcIikgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgbGFuZzogXCIgKyBsYW5nICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGFuZyA9IGxhbmcucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbUxhbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoZWxlbUxhbmcgPSBkb2N1bWVudElzSFRNTCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmxhbmcgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpIHx8IGVsZW0uZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbUxhbmcgPSBlbGVtTGFuZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbUxhbmcgPT09IGxhbmcgfHwgZWxlbUxhbmcuaW5kZXhPZiggbGFuZyArIFwiLVwiICkgPT09IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoIChlbGVtID0gZWxlbS5wYXJlbnROb2RlKSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSksXG5cbiAgICAgICAgICAgICAgICAvLyBNaXNjZWxsYW5lb3VzXG4gICAgICAgICAgICAgICAgXCJ0YXJnZXRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFzaCAmJiBoYXNoLnNsaWNlKCAxICkgPT09IGVsZW0uaWQ7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIFwicm9vdFwiOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0gPT09IGRvY0VsZW07XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIFwiZm9jdXNcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmICghZG9jdW1lbnQuaGFzRm9jdXMgfHwgZG9jdW1lbnQuaGFzRm9jdXMoKSkgJiYgISEoZWxlbS50eXBlIHx8IGVsZW0uaHJlZiB8fCB+ZWxlbS50YWJJbmRleCk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIC8vIEJvb2xlYW4gcHJvcGVydGllc1xuICAgICAgICAgICAgICAgIFwiZW5hYmxlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBcImRpc2FibGVkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgXCJjaGVja2VkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJbiBDU1MzLCA6Y2hlY2tlZCBzaG91bGQgcmV0dXJuIGJvdGggY2hlY2tlZCBhbmQgc2VsZWN0ZWQgZWxlbWVudHNcbiAgICAgICAgICAgICAgICAgICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWRcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG5vZGVOYW1lID09PSBcImlucHV0XCIgJiYgISFlbGVtLmNoZWNrZWQpIHx8IChub2RlTmFtZSA9PT0gXCJvcHRpb25cIiAmJiAhIWVsZW0uc2VsZWN0ZWQpO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBcInNlbGVjdGVkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBY2Nlc3NpbmcgdGhpcyBwcm9wZXJ0eSBtYWtlcyBzZWxlY3RlZC1ieS1kZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgIC8vIG9wdGlvbnMgaW4gU2FmYXJpIHdvcmsgcHJvcGVybHlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBlbGVtLnBhcmVudE5vZGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtLnNlbGVjdGVkID09PSB0cnVlO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAvLyBDb250ZW50c1xuICAgICAgICAgICAgICAgIFwiZW1wdHlcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jZW1wdHktcHNldWRvXG4gICAgICAgICAgICAgICAgICAgIC8vIDplbXB0eSBpcyBvbmx5IGFmZmVjdGVkIGJ5IGVsZW1lbnQgbm9kZXMgYW5kIGNvbnRlbnQgbm9kZXMoaW5jbHVkaW5nIHRleHQoMyksIGNkYXRhKDQpKSxcbiAgICAgICAgICAgICAgICAgICAgLy8gICBub3QgY29tbWVudCwgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbnMsIG9yIG90aGVyc1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGFua3MgdG8gRGllZ28gUGVyaW5pIGZvciB0aGUgbm9kZU5hbWUgc2hvcnRjdXRcbiAgICAgICAgICAgICAgICAgICAgLy8gICBHcmVhdGVyIHRoYW4gXCJAXCIgbWVhbnMgYWxwaGEgY2hhcmFjdGVycyAoc3BlY2lmaWNhbGx5IG5vdCBzdGFydGluZyB3aXRoIFwiI1wiIG9yIFwiP1wiKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZWxlbS5ub2RlTmFtZSA+IFwiQFwiIHx8IGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gNCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIFwicGFyZW50XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gIUV4cHIucHNldWRvc1tcImVtcHR5XCJdKCBlbGVtICk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIC8vIEVsZW1lbnQvaW5wdXQgdHlwZXNcbiAgICAgICAgICAgICAgICBcImhlYWRlclwiOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJoZWFkZXIudGVzdCggZWxlbS5ub2RlTmFtZSApO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBcImlucHV0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmlucHV0cy50ZXN0KCBlbGVtLm5vZGVOYW1lICk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIFwiYnV0dG9uXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IFwiYnV0dG9uXCIgfHwgbmFtZSA9PT0gXCJidXR0b25cIjtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgXCJ0ZXh0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0cjtcbiAgICAgICAgICAgICAgICAgICAgLy8gSUU2IGFuZCA3IHdpbGwgbWFwIGVsZW0udHlwZSB0byAndGV4dCcgZm9yIG5ldyBIVE1MNSB0eXBlcyAoc2VhcmNoLCBldGMpXG4gICAgICAgICAgICAgICAgICAgIC8vIHVzZSBnZXRBdHRyaWJ1dGUgaW5zdGVhZCB0byB0ZXN0IHRoaXMgY2FzZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImlucHV0XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICggKGF0dHIgPSBlbGVtLmdldEF0dHJpYnV0ZShcInR5cGVcIikpID09IG51bGwgfHwgYXR0ci50b0xvd2VyQ2FzZSgpID09PSBlbGVtLnR5cGUgKTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgLy8gUG9zaXRpb24taW4tY29sbGVjdGlvblxuICAgICAgICAgICAgICAgIFwiZmlyc3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgMCBdO1xuICAgICAgICAgICAgICAgIH0pLFxuXG4gICAgICAgICAgICAgICAgXCJsYXN0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBsZW5ndGggLSAxIF07XG4gICAgICAgICAgICAgICAgfSksXG5cbiAgICAgICAgICAgICAgICBcImVxXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudCBdO1xuICAgICAgICAgICAgICAgIH0pLFxuXG4gICAgICAgICAgICAgICAgXCJldmVuXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hJbmRleGVzO1xuICAgICAgICAgICAgICAgIH0pLFxuXG4gICAgICAgICAgICAgICAgXCJvZGRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0gMTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaEluZGV4ZXM7XG4gICAgICAgICAgICAgICAgfSksXG5cbiAgICAgICAgICAgICAgICBcImx0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50O1xuICAgICAgICAgICAgICAgICAgICBmb3IgKCA7IC0taSA+PSAwOyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoSW5kZXhlcztcbiAgICAgICAgICAgICAgICB9KSxcblxuICAgICAgICAgICAgICAgIFwiZ3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoIDsgKytpIDwgbGVuZ3RoOyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoSW5kZXhlcztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIEV4cHIucHNldWRvc1tcIm50aFwiXSA9IEV4cHIucHNldWRvc1tcImVxXCJdO1xuXG4vLyBBZGQgYnV0dG9uL2lucHV0IHR5cGUgcHNldWRvc1xuICAgICAgICBmb3IgKCBpIGluIHsgcmFkaW86IHRydWUsIGNoZWNrYm94OiB0cnVlLCBmaWxlOiB0cnVlLCBwYXNzd29yZDogdHJ1ZSwgaW1hZ2U6IHRydWUgfSApIHtcbiAgICAgICAgICAgIEV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlSW5wdXRQc2V1ZG8oIGkgKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKCBpIGluIHsgc3VibWl0OiB0cnVlLCByZXNldDogdHJ1ZSB9ICkge1xuICAgICAgICAgICAgRXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVCdXR0b25Qc2V1ZG8oIGkgKTtcbiAgICAgICAgfVxuXG4vLyBFYXN5IEFQSSBmb3IgY3JlYXRpbmcgbmV3IHNldEZpbHRlcnNcbiAgICAgICAgZnVuY3Rpb24gc2V0RmlsdGVycygpIHt9XG4gICAgICAgIHNldEZpbHRlcnMucHJvdG90eXBlID0gRXhwci5maWx0ZXJzID0gRXhwci5wc2V1ZG9zO1xuICAgICAgICBFeHByLnNldEZpbHRlcnMgPSBuZXcgc2V0RmlsdGVycygpO1xuXG4gICAgICAgIGZ1bmN0aW9uIHRva2VuaXplKCBzZWxlY3RvciwgcGFyc2VPbmx5ICkge1xuICAgICAgICAgICAgdmFyIG1hdGNoZWQsIG1hdGNoLCB0b2tlbnMsIHR5cGUsXG4gICAgICAgICAgICAgICAgc29GYXIsIGdyb3VwcywgcHJlRmlsdGVycyxcbiAgICAgICAgICAgICAgICBjYWNoZWQgPSB0b2tlbkNhY2hlWyBzZWxlY3RvciArIFwiIFwiIF07XG5cbiAgICAgICAgICAgIGlmICggY2FjaGVkICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZU9ubHkgPyAwIDogY2FjaGVkLnNsaWNlKCAwICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNvRmFyID0gc2VsZWN0b3I7XG4gICAgICAgICAgICBncm91cHMgPSBbXTtcbiAgICAgICAgICAgIHByZUZpbHRlcnMgPSBFeHByLnByZUZpbHRlcjtcblxuICAgICAgICAgICAgd2hpbGUgKCBzb0ZhciApIHtcblxuICAgICAgICAgICAgICAgIC8vIENvbW1hIGFuZCBmaXJzdCBydW5cbiAgICAgICAgICAgICAgICBpZiAoICFtYXRjaGVkIHx8IChtYXRjaCA9IHJjb21tYS5leGVjKCBzb0ZhciApKSApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXRjaCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvbid0IGNvbnN1bWUgdHJhaWxpbmcgY29tbWFzIGFzIHZhbGlkXG4gICAgICAgICAgICAgICAgICAgICAgICBzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaFswXS5sZW5ndGggKSB8fCBzb0ZhcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBncm91cHMucHVzaCggdG9rZW5zID0gW10gKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtYXRjaGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAvLyBDb21iaW5hdG9yc1xuICAgICAgICAgICAgICAgIGlmICggKG1hdGNoID0gcmNvbWJpbmF0b3JzLmV4ZWMoIHNvRmFyICkpICkge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG1hdGNoZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDYXN0IGRlc2NlbmRhbnQgY29tYmluYXRvcnMgdG8gc3BhY2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IG1hdGNoWzBdLnJlcGxhY2UoIHJ0cmltLCBcIiBcIiApXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEZpbHRlcnNcbiAgICAgICAgICAgICAgICBmb3IgKCB0eXBlIGluIEV4cHIuZmlsdGVyICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIChtYXRjaCA9IG1hdGNoRXhwclsgdHlwZSBdLmV4ZWMoIHNvRmFyICkpICYmICghcHJlRmlsdGVyc1sgdHlwZSBdIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAobWF0Y2ggPSBwcmVGaWx0ZXJzWyB0eXBlIF0oIG1hdGNoICkpKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBtYXRjaGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlczogbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICggIW1hdGNoZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBsZW5ndGggb2YgdGhlIGludmFsaWQgZXhjZXNzXG4gICAgICAgICAgICAvLyBpZiB3ZSdyZSBqdXN0IHBhcnNpbmdcbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgdGhyb3cgYW4gZXJyb3Igb3IgcmV0dXJuIHRva2Vuc1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlT25seSA/XG4gICAgICAgICAgICAgICAgc29GYXIubGVuZ3RoIDpcbiAgICAgICAgICAgICAgICBzb0ZhciA/XG4gICAgICAgICAgICAgICAgICAgIFNpenpsZS5lcnJvciggc2VsZWN0b3IgKSA6XG4gICAgICAgICAgICAgICAgICAgIC8vIENhY2hlIHRoZSB0b2tlbnNcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5DYWNoZSggc2VsZWN0b3IsIGdyb3VwcyApLnNsaWNlKCAwICk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB0b1NlbGVjdG9yKCB0b2tlbnMgKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDAsXG4gICAgICAgICAgICAgICAgbGVuID0gdG9rZW5zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBzZWxlY3RvciA9IFwiXCI7XG4gICAgICAgICAgICBmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvciArPSB0b2tlbnNbaV0udmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0b3I7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBhZGRDb21iaW5hdG9yKCBtYXRjaGVyLCBjb21iaW5hdG9yLCBiYXNlICkge1xuICAgICAgICAgICAgdmFyIGRpciA9IGNvbWJpbmF0b3IuZGlyLFxuICAgICAgICAgICAgICAgIGNoZWNrTm9uRWxlbWVudHMgPSBiYXNlICYmIGRpciA9PT0gXCJwYXJlbnROb2RlXCIsXG4gICAgICAgICAgICAgICAgZG9uZU5hbWUgPSBkb25lKys7XG5cbiAgICAgICAgICAgIHJldHVybiBjb21iaW5hdG9yLmZpcnN0ID9cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBhZ2FpbnN0IGNsb3Nlc3QgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSA6XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBhZ2FpbnN0IGFsbCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudHNcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSwgY2FjaGUsIG91dGVyQ2FjaGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJrZXkgPSBkaXJydW5zICsgXCIgXCIgKyBkb25lTmFtZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBjYW4ndCBzZXQgYXJiaXRyYXJ5IGRhdGEgb24gWE1MIG5vZGVzLCBzbyB0aGV5IGRvbid0IGJlbmVmaXQgZnJvbSBkaXIgY2FjaGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHhtbCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dGVyQ2FjaGUgPSBlbGVtWyBleHBhbmRvIF0gfHwgKGVsZW1bIGV4cGFuZG8gXSA9IHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoY2FjaGUgPSBvdXRlckNhY2hlWyBkaXIgXSkgJiYgY2FjaGVbMF0gPT09IGRpcmtleSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKGRhdGEgPSBjYWNoZVsxXSkgPT09IHRydWUgfHwgZGF0YSA9PT0gY2FjaGVkcnVucyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YSA9PT0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlID0gb3V0ZXJDYWNoZVsgZGlyIF0gPSBbIGRpcmtleSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVbMV0gPSBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB8fCBjYWNoZWRydW5zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjYWNoZVsxXSA9PT0gdHJ1ZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSB7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlcnMubGVuZ3RoID4gMSA/XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBtYXRjaGVycy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICggaS0tICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhbWF0Y2hlcnNbaV0oIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9IDpcbiAgICAgICAgICAgICAgICBtYXRjaGVyc1swXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNvbmRlbnNlKCB1bm1hdGNoZWQsIG1hcCwgZmlsdGVyLCBjb250ZXh0LCB4bWwgKSB7XG4gICAgICAgICAgICB2YXIgZWxlbSxcbiAgICAgICAgICAgICAgICBuZXdVbm1hdGNoZWQgPSBbXSxcbiAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICBsZW4gPSB1bm1hdGNoZWQubGVuZ3RoLFxuICAgICAgICAgICAgICAgIG1hcHBlZCA9IG1hcCAhPSBudWxsO1xuXG4gICAgICAgICAgICBmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcbiAgICAgICAgICAgICAgICBpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhZmlsdGVyIHx8IGZpbHRlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdVbm1hdGNoZWQucHVzaCggZWxlbSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXBwZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwLnB1c2goIGkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5ld1VubWF0Y2hlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldE1hdGNoZXIoIHByZUZpbHRlciwgc2VsZWN0b3IsIG1hdGNoZXIsIHBvc3RGaWx0ZXIsIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApIHtcbiAgICAgICAgICAgIGlmICggcG9zdEZpbHRlciAmJiAhcG9zdEZpbHRlclsgZXhwYW5kbyBdICkge1xuICAgICAgICAgICAgICAgIHBvc3RGaWx0ZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmlsdGVyICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIHBvc3RGaW5kZXIgJiYgIXBvc3RGaW5kZXJbIGV4cGFuZG8gXSApIHtcbiAgICAgICAgICAgICAgICBwb3N0RmluZGVyID0gc2V0TWF0Y2hlciggcG9zdEZpbmRlciwgcG9zdFNlbGVjdG9yICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCByZXN1bHRzLCBjb250ZXh0LCB4bWwgKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXAsIGksIGVsZW0sXG4gICAgICAgICAgICAgICAgICAgIHByZU1hcCA9IFtdLFxuICAgICAgICAgICAgICAgICAgICBwb3N0TWFwID0gW10sXG4gICAgICAgICAgICAgICAgICAgIHByZWV4aXN0aW5nID0gcmVzdWx0cy5sZW5ndGgsXG5cbiAgICAgICAgICAgICAgICAvLyBHZXQgaW5pdGlhbCBlbGVtZW50cyBmcm9tIHNlZWQgb3IgY29udGV4dFxuICAgICAgICAgICAgICAgICAgICBlbGVtcyA9IHNlZWQgfHwgbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IgfHwgXCIqXCIsIGNvbnRleHQubm9kZVR5cGUgPyBbIGNvbnRleHQgXSA6IGNvbnRleHQsIFtdICksXG5cbiAgICAgICAgICAgICAgICAvLyBQcmVmaWx0ZXIgdG8gZ2V0IG1hdGNoZXIgaW5wdXQsIHByZXNlcnZpbmcgYSBtYXAgZm9yIHNlZWQtcmVzdWx0cyBzeW5jaHJvbml6YXRpb25cbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlckluID0gcHJlRmlsdGVyICYmICggc2VlZCB8fCAhc2VsZWN0b3IgKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25kZW5zZSggZWxlbXMsIHByZU1hcCwgcHJlRmlsdGVyLCBjb250ZXh0LCB4bWwgKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtcyxcblxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVyT3V0ID0gbWF0Y2hlciA/XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgcG9zdEZpbmRlciwgb3IgZmlsdGVyZWQgc2VlZCwgb3Igbm9uLXNlZWQgcG9zdEZpbHRlciBvciBwcmVleGlzdGluZyByZXN1bHRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdEZpbmRlciB8fCAoIHNlZWQgPyBwcmVGaWx0ZXIgOiBwcmVleGlzdGluZyB8fCBwb3N0RmlsdGVyICkgP1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLi4uaW50ZXJtZWRpYXRlIHByb2Nlc3NpbmcgaXMgbmVjZXNzYXJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW10gOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLi4ub3RoZXJ3aXNlIHVzZSByZXN1bHRzIGRpcmVjdGx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyA6XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVySW47XG5cbiAgICAgICAgICAgICAgICAvLyBGaW5kIHByaW1hcnkgbWF0Y2hlc1xuICAgICAgICAgICAgICAgIGlmICggbWF0Y2hlciApIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlciggbWF0Y2hlckluLCBtYXRjaGVyT3V0LCBjb250ZXh0LCB4bWwgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBcHBseSBwb3N0RmlsdGVyXG4gICAgICAgICAgICAgICAgaWYgKCBwb3N0RmlsdGVyICkge1xuICAgICAgICAgICAgICAgICAgICB0ZW1wID0gY29uZGVuc2UoIG1hdGNoZXJPdXQsIHBvc3RNYXAgKTtcbiAgICAgICAgICAgICAgICAgICAgcG9zdEZpbHRlciggdGVtcCwgW10sIGNvbnRleHQsIHhtbCApO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFVuLW1hdGNoIGZhaWxpbmcgZWxlbWVudHMgYnkgbW92aW5nIHRoZW0gYmFjayB0byBtYXRjaGVySW5cbiAgICAgICAgICAgICAgICAgICAgaSA9IHRlbXAubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIGktLSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKGVsZW0gPSB0ZW1wW2ldKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVyT3V0WyBwb3N0TWFwW2ldIF0gPSAhKG1hdGNoZXJJblsgcG9zdE1hcFtpXSBdID0gZWxlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIHNlZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggcG9zdEZpbmRlciB8fCBwcmVGaWx0ZXIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHBvc3RGaW5kZXIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBmaW5hbCBtYXRjaGVyT3V0IGJ5IGNvbmRlbnNpbmcgdGhpcyBpbnRlcm1lZGlhdGUgaW50byBwb3N0RmluZGVyIGNvbnRleHRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBtYXRjaGVyT3V0Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIGktLSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoZWxlbSA9IG1hdGNoZXJPdXRbaV0pICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzdG9yZSBtYXRjaGVySW4gc2luY2UgZWxlbSBpcyBub3QgeWV0IGEgZmluYWwgbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXAucHVzaCggKG1hdGNoZXJJbltpXSA9IGVsZW0pICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdEZpbmRlciggbnVsbCwgKG1hdGNoZXJPdXQgPSBbXSksIHRlbXAsIHhtbCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlIG1hdGNoZWQgZWxlbWVudHMgZnJvbSBzZWVkIHRvIHJlc3VsdHMgdG8ga2VlcCB0aGVtIHN5bmNocm9uaXplZFxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCBpLS0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoZWxlbSA9IG1hdGNoZXJPdXRbaV0pICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0ZW1wID0gcG9zdEZpbmRlciA/IGluZGV4T2YuY2FsbCggc2VlZCwgZWxlbSApIDogcHJlTWFwW2ldKSA+IC0xICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZWRbdGVtcF0gPSAhKHJlc3VsdHNbdGVtcF0gPSBlbGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgZWxlbWVudHMgdG8gcmVzdWx0cywgdGhyb3VnaCBwb3N0RmluZGVyIGlmIGRlZmluZWRcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaGVyT3V0ID0gY29uZGVuc2UoXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVyT3V0ID09PSByZXN1bHRzID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVyT3V0LnNwbGljZSggcHJlZXhpc3RpbmcsIG1hdGNoZXJPdXQubGVuZ3RoICkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXJPdXRcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBwb3N0RmluZGVyICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zdEZpbmRlciggbnVsbCwgcmVzdWx0cywgbWF0Y2hlck91dCwgeG1sICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwdXNoLmFwcGx5KCByZXN1bHRzLCBtYXRjaGVyT3V0ICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMgKSB7XG4gICAgICAgICAgICB2YXIgY2hlY2tDb250ZXh0LCBtYXRjaGVyLCBqLFxuICAgICAgICAgICAgICAgIGxlbiA9IHRva2Vucy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgbGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzBdLnR5cGUgXSxcbiAgICAgICAgICAgICAgICBpbXBsaWNpdFJlbGF0aXZlID0gbGVhZGluZ1JlbGF0aXZlIHx8IEV4cHIucmVsYXRpdmVbXCIgXCJdLFxuICAgICAgICAgICAgICAgIGkgPSBsZWFkaW5nUmVsYXRpdmUgPyAxIDogMCxcblxuICAgICAgICAgICAgLy8gVGhlIGZvdW5kYXRpb25hbCBtYXRjaGVyIGVuc3VyZXMgdGhhdCBlbGVtZW50cyBhcmUgcmVhY2hhYmxlIGZyb20gdG9wLWxldmVsIGNvbnRleHQocylcbiAgICAgICAgICAgICAgICBtYXRjaENvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0gPT09IGNoZWNrQ29udGV4dDtcbiAgICAgICAgICAgICAgICB9LCBpbXBsaWNpdFJlbGF0aXZlLCB0cnVlICksXG4gICAgICAgICAgICAgICAgbWF0Y2hBbnlDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbmRleE9mLmNhbGwoIGNoZWNrQ29udGV4dCwgZWxlbSApID4gLTE7XG4gICAgICAgICAgICAgICAgfSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLFxuICAgICAgICAgICAgICAgIG1hdGNoZXJzID0gWyBmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCAhbGVhZGluZ1JlbGF0aXZlICYmICggeG1sIHx8IGNvbnRleHQgIT09IG91dGVybW9zdENvbnRleHQgKSApIHx8IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2hlY2tDb250ZXh0ID0gY29udGV4dCkubm9kZVR5cGUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaENvbnRleHQoIGVsZW0sIGNvbnRleHQsIHhtbCApIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hBbnlDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSApO1xuICAgICAgICAgICAgICAgIH0gXTtcblxuICAgICAgICAgICAgZm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCAobWF0Y2hlciA9IEV4cHIucmVsYXRpdmVbIHRva2Vuc1tpXS50eXBlIF0pICkge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaGVycyA9IFsgYWRkQ29tYmluYXRvcihlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSwgbWF0Y2hlcikgXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaGVyID0gRXhwci5maWx0ZXJbIHRva2Vuc1tpXS50eXBlIF0uYXBwbHkoIG51bGwsIHRva2Vuc1tpXS5tYXRjaGVzICk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIHNwZWNpYWwgdXBvbiBzZWVpbmcgYSBwb3NpdGlvbmFsIG1hdGNoZXJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXRjaGVyWyBleHBhbmRvIF0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBuZXh0IHJlbGF0aXZlIG9wZXJhdG9yIChpZiBhbnkpIGZvciBwcm9wZXIgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIGogPSArK2k7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCA7IGogPCBsZW47IGorKyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIEV4cHIucmVsYXRpdmVbIHRva2Vuc1tqXS50eXBlIF0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRNYXRjaGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPiAxICYmIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPiAxICYmIHRvU2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBwcmVjZWRpbmcgdG9rZW4gd2FzIGEgZGVzY2VuZGFudCBjb21iaW5hdG9yLCBpbnNlcnQgYW4gaW1wbGljaXQgYW55LWVsZW1lbnQgYCpgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2Vucy5zbGljZSggMCwgaSAtIDEgKS5jb25jYXQoeyB2YWx1ZTogdG9rZW5zWyBpIC0gMiBdLnR5cGUgPT09IFwiIFwiID8gXCIqXCIgOiBcIlwiIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpIDwgaiAmJiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zLnNsaWNlKCBpLCBqICkgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqIDwgbGVuICYmIG1hdGNoZXJGcm9tVG9rZW5zKCAodG9rZW5zID0gdG9rZW5zLnNsaWNlKCBqICkpICksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA8IGxlbiAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtYXRjaGVycy5wdXNoKCBtYXRjaGVyICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSB7XG4gICAgICAgICAgICAvLyBBIGNvdW50ZXIgdG8gc3BlY2lmeSB3aGljaCBlbGVtZW50IGlzIGN1cnJlbnRseSBiZWluZyBtYXRjaGVkXG4gICAgICAgICAgICB2YXIgbWF0Y2hlckNhY2hlZFJ1bnMgPSAwLFxuICAgICAgICAgICAgICAgIGJ5U2V0ID0gc2V0TWF0Y2hlcnMubGVuZ3RoID4gMCxcbiAgICAgICAgICAgICAgICBieUVsZW1lbnQgPSBlbGVtZW50TWF0Y2hlcnMubGVuZ3RoID4gMCxcbiAgICAgICAgICAgICAgICBzdXBlck1hdGNoZXIgPSBmdW5jdGlvbiggc2VlZCwgY29udGV4dCwgeG1sLCByZXN1bHRzLCBleHBhbmRDb250ZXh0ICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbSwgaiwgbWF0Y2hlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE1hdGNoZWQgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZWRDb3VudCA9IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gXCIwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB1bm1hdGNoZWQgPSBzZWVkICYmIFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0ZXJtb3N0ID0gZXhwYW5kQ29udGV4dCAhPSBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dEJhY2t1cCA9IG91dGVybW9zdENvbnRleHQsXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIG11c3QgYWx3YXlzIGhhdmUgZWl0aGVyIHNlZWQgZWxlbWVudHMgb3IgY29udGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbXMgPSBzZWVkIHx8IGJ5RWxlbWVudCAmJiBFeHByLmZpbmRbXCJUQUdcIl0oIFwiKlwiLCBleHBhbmRDb250ZXh0ICYmIGNvbnRleHQucGFyZW50Tm9kZSB8fCBjb250ZXh0ICksXG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSBpbnRlZ2VyIGRpcnJ1bnMgaWZmIHRoaXMgaXMgdGhlIG91dGVybW9zdCBtYXRjaGVyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJydW5zVW5pcXVlID0gKGRpcnJ1bnMgKz0gY29udGV4dEJhY2t1cCA9PSBudWxsID8gMSA6IE1hdGgucmFuZG9tKCkgfHwgMC4xKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIG91dGVybW9zdCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0ICE9PSBkb2N1bWVudCAmJiBjb250ZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVkcnVucyA9IG1hdGNoZXJDYWNoZWRSdW5zO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGVsZW1lbnRzIHBhc3NpbmcgZWxlbWVudE1hdGNoZXJzIGRpcmVjdGx5IHRvIHJlc3VsdHNcbiAgICAgICAgICAgICAgICAgICAgLy8gS2VlcCBgaWAgYSBzdHJpbmcgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzIHNvIGBtYXRjaGVkQ291bnRgIHdpbGwgYmUgXCIwMFwiIGJlbG93XG4gICAgICAgICAgICAgICAgICAgIGZvciAoIDsgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBieUVsZW1lbnQgJiYgZWxlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIChtYXRjaGVyID0gZWxlbWVudE1hdGNoZXJzW2orK10pICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKCBlbGVtICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG91dGVybW9zdCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlZHJ1bnMgPSArK21hdGNoZXJDYWNoZWRSdW5zO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJhY2sgdW5tYXRjaGVkIGVsZW1lbnRzIGZvciBzZXQgZmlsdGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBieVNldCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGV5IHdpbGwgaGF2ZSBnb25lIHRocm91Z2ggYWxsIHBvc3NpYmxlIG1hdGNoZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoZWxlbSA9ICFtYXRjaGVyICYmIGVsZW0pICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkQ291bnQtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMZW5ndGhlbiB0aGUgYXJyYXkgZm9yIGV2ZXJ5IGVsZW1lbnQsIG1hdGNoZWQgb3Igbm90XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzZWVkICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bm1hdGNoZWQucHVzaCggZWxlbSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFwcGx5IHNldCBmaWx0ZXJzIHRvIHVubWF0Y2hlZCBlbGVtZW50c1xuICAgICAgICAgICAgICAgICAgICBtYXRjaGVkQ291bnQgKz0gaTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBieVNldCAmJiBpICE9PSBtYXRjaGVkQ291bnQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICggKG1hdGNoZXIgPSBzZXRNYXRjaGVyc1tqKytdKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVyKCB1bm1hdGNoZWQsIHNldE1hdGNoZWQsIGNvbnRleHQsIHhtbCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNlZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVpbnRlZ3JhdGUgZWxlbWVudCBtYXRjaGVzIHRvIGVsaW1pbmF0ZSB0aGUgbmVlZCBmb3Igc29ydGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbWF0Y2hlZENvdW50ID4gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCBpLS0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICEodW5tYXRjaGVkW2ldIHx8IHNldE1hdGNoZWRbaV0pICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGlzY2FyZCBpbmRleCBwbGFjZWhvbGRlciB2YWx1ZXMgdG8gZ2V0IG9ubHkgYWN0dWFsIG1hdGNoZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRNYXRjaGVkID0gY29uZGVuc2UoIHNldE1hdGNoZWQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIG1hdGNoZXMgdG8gcmVzdWx0c1xuICAgICAgICAgICAgICAgICAgICAgICAgcHVzaC5hcHBseSggcmVzdWx0cywgc2V0TWF0Y2hlZCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTZWVkbGVzcyBzZXQgbWF0Y2hlcyBzdWNjZWVkaW5nIG11bHRpcGxlIHN1Y2Nlc3NmdWwgbWF0Y2hlcnMgc3RpcHVsYXRlIHNvcnRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggb3V0ZXJtb3N0ICYmICFzZWVkICYmIHNldE1hdGNoZWQubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICggbWF0Y2hlZENvdW50ICsgc2V0TWF0Y2hlcnMubGVuZ3RoICkgPiAxICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU2l6emxlLnVuaXF1ZVNvcnQoIHJlc3VsdHMgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIE92ZXJyaWRlIG1hbmlwdWxhdGlvbiBvZiBnbG9iYWxzIGJ5IG5lc3RlZCBtYXRjaGVyc1xuICAgICAgICAgICAgICAgICAgICBpZiAoIG91dGVybW9zdCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHRCYWNrdXA7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5tYXRjaGVkO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiBieVNldCA/XG4gICAgICAgICAgICAgICAgbWFya0Z1bmN0aW9uKCBzdXBlck1hdGNoZXIgKSA6XG4gICAgICAgICAgICAgICAgc3VwZXJNYXRjaGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgY29tcGlsZSA9IFNpenpsZS5jb21waWxlID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBncm91cCAvKiBJbnRlcm5hbCBVc2UgT25seSAqLyApIHtcbiAgICAgICAgICAgIHZhciBpLFxuICAgICAgICAgICAgICAgIHNldE1hdGNoZXJzID0gW10sXG4gICAgICAgICAgICAgICAgZWxlbWVudE1hdGNoZXJzID0gW10sXG4gICAgICAgICAgICAgICAgY2FjaGVkID0gY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG4gICAgICAgICAgICBpZiAoICFjYWNoZWQgKSB7XG4gICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBmdW5jdGlvbiBvZiByZWN1cnNpdmUgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2hlY2sgZWFjaCBlbGVtZW50XG4gICAgICAgICAgICAgICAgaWYgKCAhZ3JvdXAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGkgPSBncm91cC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgd2hpbGUgKCBpLS0gKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlZCA9IG1hdGNoZXJGcm9tVG9rZW5zKCBncm91cFtpXSApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGNhY2hlZFsgZXhwYW5kbyBdICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TWF0Y2hlcnMucHVzaCggY2FjaGVkICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50TWF0Y2hlcnMucHVzaCggY2FjaGVkICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDYWNoZSB0aGUgY29tcGlsZWQgZnVuY3Rpb25cbiAgICAgICAgICAgICAgICBjYWNoZWQgPSBjb21waWxlckNhY2hlKCBzZWxlY3RvciwgbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkge1xuICAgICAgICAgICAgdmFyIGkgPSAwLFxuICAgICAgICAgICAgICAgIGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuICAgICAgICAgICAgICAgIFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHRzW2ldLCByZXN1bHRzICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdCggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7XG4gICAgICAgICAgICB2YXIgaSwgdG9rZW5zLCB0b2tlbiwgdHlwZSwgZmluZCxcbiAgICAgICAgICAgICAgICBtYXRjaCA9IHRva2VuaXplKCBzZWxlY3RvciApO1xuXG4gICAgICAgICAgICBpZiAoICFzZWVkICkge1xuICAgICAgICAgICAgICAgIC8vIFRyeSB0byBtaW5pbWl6ZSBvcGVyYXRpb25zIGlmIHRoZXJlIGlzIG9ubHkgb25lIGdyb3VwXG4gICAgICAgICAgICAgICAgaWYgKCBtYXRjaC5sZW5ndGggPT09IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGFrZSBhIHNob3J0Y3V0IGFuZCBzZXQgdGhlIGNvbnRleHQgaWYgdGhlIHJvb3Qgc2VsZWN0b3IgaXMgYW4gSURcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5zID0gbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHRva2Vucy5sZW5ndGggPiAyICYmICh0b2tlbiA9IHRva2Vuc1swXSkudHlwZSA9PT0gXCJJRFwiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0LmdldEJ5SWQgJiYgY29udGV4dC5ub2RlVHlwZSA9PT0gOSAmJiBkb2N1bWVudElzSFRNTCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzFdLnR5cGUgXSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCA9ICggRXhwci5maW5kW1wiSURcIl0oIHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZShydW5lc2NhcGUsIGZ1bmVzY2FwZSksIGNvbnRleHQgKSB8fCBbXSApWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhY29udGV4dCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gc2VsZWN0b3Iuc2xpY2UoIHRva2Vucy5zaGlmdCgpLnZhbHVlLmxlbmd0aCApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRmV0Y2ggYSBzZWVkIHNldCBmb3IgcmlnaHQtdG8tbGVmdCBtYXRjaGluZ1xuICAgICAgICAgICAgICAgICAgICBpID0gbWF0Y2hFeHByW1wibmVlZHNDb250ZXh0XCJdLnRlc3QoIHNlbGVjdG9yICkgPyAwIDogdG9rZW5zLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCBpLS0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbiA9IHRva2Vuc1tpXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgd2UgaGl0IGEgY29tYmluYXRvclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBFeHByLnJlbGF0aXZlWyAodHlwZSA9IHRva2VuLnR5cGUpIF0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIChmaW5kID0gRXhwci5maW5kWyB0eXBlIF0pICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlYXJjaCwgZXhwYW5kaW5nIGNvbnRleHQgZm9yIGxlYWRpbmcgc2libGluZyBjb21iaW5hdG9yc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKHNlZWQgPSBmaW5kKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnNpYmxpbmcudGVzdCggdG9rZW5zWzBdLnR5cGUgKSAmJiBjb250ZXh0LnBhcmVudE5vZGUgfHwgY29udGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBzZWVkIGlzIGVtcHR5IG9yIG5vIHRva2VucyByZW1haW4sIHdlIGNhbiByZXR1cm4gZWFybHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5zLnNwbGljZSggaSwgMSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvciA9IHNlZWQubGVuZ3RoICYmIHRvU2VsZWN0b3IoIHRva2VucyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFzZWxlY3RvciApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1c2guYXBwbHkoIHJlc3VsdHMsIHNlZWQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb21waWxlIGFuZCBleGVjdXRlIGEgZmlsdGVyaW5nIGZ1bmN0aW9uXG4gICAgICAgICAgICAvLyBQcm92aWRlIGBtYXRjaGAgdG8gYXZvaWQgcmV0b2tlbml6YXRpb24gaWYgd2UgbW9kaWZpZWQgdGhlIHNlbGVjdG9yIGFib3ZlXG4gICAgICAgICAgICBjb21waWxlKCBzZWxlY3RvciwgbWF0Y2ggKShcbiAgICAgICAgICAgICAgICBzZWVkLFxuICAgICAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICAgICAgIWRvY3VtZW50SXNIVE1MLFxuICAgICAgICAgICAgICAgIHJlc3VsdHMsXG4gICAgICAgICAgICAgICAgcnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICB9XG5cbi8vIE9uZS10aW1lIGFzc2lnbm1lbnRzXG5cbi8vIFNvcnQgc3RhYmlsaXR5XG4gICAgICAgIHN1cHBvcnQuc29ydFN0YWJsZSA9IGV4cGFuZG8uc3BsaXQoXCJcIikuc29ydCggc29ydE9yZGVyICkuam9pbihcIlwiKSA9PT0gZXhwYW5kbztcblxuLy8gU3VwcG9ydDogQ2hyb21lPDE0XG4vLyBBbHdheXMgYXNzdW1lIGR1cGxpY2F0ZXMgaWYgdGhleSBhcmVuJ3QgcGFzc2VkIHRvIHRoZSBjb21wYXJpc29uIGZ1bmN0aW9uXG4gICAgICAgIHN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcyA9IGhhc0R1cGxpY2F0ZTtcblxuLy8gSW5pdGlhbGl6ZSBhZ2FpbnN0IHRoZSBkZWZhdWx0IGRvY3VtZW50XG4gICAgICAgIHNldERvY3VtZW50KCk7XG5cbi8vIFN1cHBvcnQ6IFdlYmtpdDw1MzcuMzIgLSBTYWZhcmkgNi4wLjMvQ2hyb21lIDI1IChmaXhlZCBpbiBDaHJvbWUgMjcpXG4vLyBEZXRhY2hlZCBub2RlcyBjb25mb3VuZGluZ2x5IGZvbGxvdyAqZWFjaCBvdGhlcipcbiAgICAgICAgc3VwcG9ydC5zb3J0RGV0YWNoZWQgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdjEgKSB7XG4gICAgICAgICAgICAvLyBTaG91bGQgcmV0dXJuIDEsIGJ1dCByZXR1cm5zIDQgKGZvbGxvd2luZylcbiAgICAgICAgICAgIHJldHVybiBkaXYxLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpICkgJiAxO1xuICAgICAgICB9KTtcblxuLy8gU3VwcG9ydDogSUU8OFxuLy8gUHJldmVudCBhdHRyaWJ1dGUvcHJvcGVydHkgXCJpbnRlcnBvbGF0aW9uXCJcbi8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzNjQyOSUyOFZTLjg1JTI5LmFzcHhcbiAgICAgICAgaWYgKCAhYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG4gICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IFwiPGEgaHJlZj0nIyc+PC9hPlwiO1xuICAgICAgICAgICAgICAgIHJldHVybiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpID09PSBcIiNcIiA7XG4gICAgICAgICAgICB9KSApIHtcbiAgICAgICAgICAgIGFkZEhhbmRsZSggXCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoXCIsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcbiAgICAgICAgICAgICAgICBpZiAoICFpc1hNTCApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwidHlwZVwiID8gMSA6IDIgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4vLyBTdXBwb3J0OiBJRTw5XG4vLyBVc2UgZGVmYXVsdFZhbHVlIGluIHBsYWNlIG9mIGdldEF0dHJpYnV0ZShcInZhbHVlXCIpXG4gICAgICAgIGlmICggIXN1cHBvcnQuYXR0cmlidXRlcyB8fCAhYXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG4gICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IFwiPGlucHV0Lz5cIjtcbiAgICAgICAgICAgICAgICBkaXYuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiwgXCJcIiApO1xuICAgICAgICAgICAgICAgIHJldHVybiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiApID09PSBcIlwiO1xuICAgICAgICAgICAgfSkgKSB7XG4gICAgICAgICAgICBhZGRIYW5kbGUoIFwidmFsdWVcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuICAgICAgICAgICAgICAgIGlmICggIWlzWE1MICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS5kZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuLy8gU3VwcG9ydDogSUU8OVxuLy8gVXNlIGdldEF0dHJpYnV0ZU5vZGUgdG8gZmV0Y2ggYm9vbGVhbnMgd2hlbiBnZXRBdHRyaWJ1dGUgbGllc1xuICAgICAgICBpZiAoICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGl2LmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpID09IG51bGw7XG4gICAgICAgICAgICB9KSApIHtcbiAgICAgICAgICAgIGFkZEhhbmRsZSggYm9vbGVhbnMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsO1xuICAgICAgICAgICAgICAgIGlmICggIWlzWE1MICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApKSAmJiB2YWwuc3BlY2lmaWVkID9cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbC52YWx1ZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtWyBuYW1lIF0gPT09IHRydWUgPyBuYW1lLnRvTG93ZXJDYXNlKCkgOiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgalF1ZXJ5LmZpbmQgPSBTaXp6bGU7XG4gICAgICAgIGpRdWVyeS5leHByID0gU2l6emxlLnNlbGVjdG9ycztcbiAgICAgICAgalF1ZXJ5LmV4cHJbXCI6XCJdID0galF1ZXJ5LmV4cHIucHNldWRvcztcbiAgICAgICAgalF1ZXJ5LnVuaXF1ZSA9IFNpenpsZS51bmlxdWVTb3J0O1xuICAgICAgICBqUXVlcnkudGV4dCA9IFNpenpsZS5nZXRUZXh0O1xuICAgICAgICBqUXVlcnkuaXNYTUxEb2MgPSBTaXp6bGUuaXNYTUw7XG4gICAgICAgIGpRdWVyeS5jb250YWlucyA9IFNpenpsZS5jb250YWlucztcblxuXG4gICAgfSkoIHdpbmRvdyApO1xuLy8gU3RyaW5nIHRvIE9iamVjdCBvcHRpb25zIGZvcm1hdCBjYWNoZVxuICAgIHZhciBvcHRpb25zQ2FjaGUgPSB7fTtcblxuLy8gQ29udmVydCBTdHJpbmctZm9ybWF0dGVkIG9wdGlvbnMgaW50byBPYmplY3QtZm9ybWF0dGVkIG9uZXMgYW5kIHN0b3JlIGluIGNhY2hlXG4gICAgZnVuY3Rpb24gY3JlYXRlT3B0aW9ucyggb3B0aW9ucyApIHtcbiAgICAgICAgdmFyIG9iamVjdCA9IG9wdGlvbnNDYWNoZVsgb3B0aW9ucyBdID0ge307XG4gICAgICAgIGpRdWVyeS5lYWNoKCBvcHRpb25zLm1hdGNoKCBjb3JlX3Jub3R3aGl0ZSApIHx8IFtdLCBmdW5jdGlvbiggXywgZmxhZyApIHtcbiAgICAgICAgICAgIG9iamVjdFsgZmxhZyBdID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBDcmVhdGUgYSBjYWxsYmFjayBsaXN0IHVzaW5nIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAgICAgKlxuICAgICAqXHRvcHRpb25zOiBhbiBvcHRpb25hbCBsaXN0IG9mIHNwYWNlLXNlcGFyYXRlZCBvcHRpb25zIHRoYXQgd2lsbCBjaGFuZ2UgaG93XG4gICAgICpcdFx0XHR0aGUgY2FsbGJhY2sgbGlzdCBiZWhhdmVzIG9yIGEgbW9yZSB0cmFkaXRpb25hbCBvcHRpb24gb2JqZWN0XG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0IGEgY2FsbGJhY2sgbGlzdCB3aWxsIGFjdCBsaWtlIGFuIGV2ZW50IGNhbGxiYWNrIGxpc3QgYW5kIGNhbiBiZVxuICAgICAqIFwiZmlyZWRcIiBtdWx0aXBsZSB0aW1lcy5cbiAgICAgKlxuICAgICAqIFBvc3NpYmxlIG9wdGlvbnM6XG4gICAgICpcbiAgICAgKlx0b25jZTpcdFx0XHR3aWxsIGVuc3VyZSB0aGUgY2FsbGJhY2sgbGlzdCBjYW4gb25seSBiZSBmaXJlZCBvbmNlIChsaWtlIGEgRGVmZXJyZWQpXG4gICAgICpcbiAgICAgKlx0bWVtb3J5Olx0XHRcdHdpbGwga2VlcCB0cmFjayBvZiBwcmV2aW91cyB2YWx1ZXMgYW5kIHdpbGwgY2FsbCBhbnkgY2FsbGJhY2sgYWRkZWRcbiAgICAgKlx0XHRcdFx0XHRhZnRlciB0aGUgbGlzdCBoYXMgYmVlbiBmaXJlZCByaWdodCBhd2F5IHdpdGggdGhlIGxhdGVzdCBcIm1lbW9yaXplZFwiXG4gICAgICpcdFx0XHRcdFx0dmFsdWVzIChsaWtlIGEgRGVmZXJyZWQpXG4gICAgICpcbiAgICAgKlx0dW5pcXVlOlx0XHRcdHdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KVxuICAgICAqXG4gICAgICpcdHN0b3BPbkZhbHNlOlx0aW50ZXJydXB0IGNhbGxpbmdzIHdoZW4gYSBjYWxsYmFjayByZXR1cm5zIGZhbHNlXG4gICAgICpcbiAgICAgKi9cbiAgICBqUXVlcnkuQ2FsbGJhY2tzID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cbiAgICAgICAgLy8gQ29udmVydCBvcHRpb25zIGZyb20gU3RyaW5nLWZvcm1hdHRlZCB0byBPYmplY3QtZm9ybWF0dGVkIGlmIG5lZWRlZFxuICAgICAgICAvLyAod2UgY2hlY2sgaW4gY2FjaGUgZmlyc3QpXG4gICAgICAgIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIiA/XG4gICAgICAgICAgICAoIG9wdGlvbnNDYWNoZVsgb3B0aW9ucyBdIHx8IGNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSApIDpcbiAgICAgICAgICAgIGpRdWVyeS5leHRlbmQoIHt9LCBvcHRpb25zICk7XG5cbiAgICAgICAgdmFyIC8vIEZsYWcgdG8ga25vdyBpZiBsaXN0IGlzIGN1cnJlbnRseSBmaXJpbmdcbiAgICAgICAgICAgIGZpcmluZyxcbiAgICAgICAgLy8gTGFzdCBmaXJlIHZhbHVlIChmb3Igbm9uLWZvcmdldHRhYmxlIGxpc3RzKVxuICAgICAgICAgICAgbWVtb3J5LFxuICAgICAgICAvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCB3YXMgYWxyZWFkeSBmaXJlZFxuICAgICAgICAgICAgZmlyZWQsXG4gICAgICAgIC8vIEVuZCBvZiB0aGUgbG9vcCB3aGVuIGZpcmluZ1xuICAgICAgICAgICAgZmlyaW5nTGVuZ3RoLFxuICAgICAgICAvLyBJbmRleCBvZiBjdXJyZW50bHkgZmlyaW5nIGNhbGxiYWNrIChtb2RpZmllZCBieSByZW1vdmUgaWYgbmVlZGVkKVxuICAgICAgICAgICAgZmlyaW5nSW5kZXgsXG4gICAgICAgIC8vIEZpcnN0IGNhbGxiYWNrIHRvIGZpcmUgKHVzZWQgaW50ZXJuYWxseSBieSBhZGQgYW5kIGZpcmVXaXRoKVxuICAgICAgICAgICAgZmlyaW5nU3RhcnQsXG4gICAgICAgIC8vIEFjdHVhbCBjYWxsYmFjayBsaXN0XG4gICAgICAgICAgICBsaXN0ID0gW10sXG4gICAgICAgIC8vIFN0YWNrIG9mIGZpcmUgY2FsbHMgZm9yIHJlcGVhdGFibGUgbGlzdHNcbiAgICAgICAgICAgIHN0YWNrID0gIW9wdGlvbnMub25jZSAmJiBbXSxcbiAgICAgICAgLy8gRmlyZSBjYWxsYmFja3NcbiAgICAgICAgICAgIGZpcmUgPSBmdW5jdGlvbiggZGF0YSApIHtcbiAgICAgICAgICAgICAgICBtZW1vcnkgPSBvcHRpb25zLm1lbW9yeSAmJiBkYXRhO1xuICAgICAgICAgICAgICAgIGZpcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBmaXJpbmdJbmRleCA9IGZpcmluZ1N0YXJ0IHx8IDA7XG4gICAgICAgICAgICAgICAgZmlyaW5nU3RhcnQgPSAwO1xuICAgICAgICAgICAgICAgIGZpcmluZ0xlbmd0aCA9IGxpc3QubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGZpcmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZm9yICggOyBsaXN0ICYmIGZpcmluZ0luZGV4IDwgZmlyaW5nTGVuZ3RoOyBmaXJpbmdJbmRleCsrICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGxpc3RbIGZpcmluZ0luZGV4IF0uYXBwbHkoIGRhdGFbIDAgXSwgZGF0YVsgMSBdICkgPT09IGZhbHNlICYmIG9wdGlvbnMuc3RvcE9uRmFsc2UgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZW1vcnkgPSBmYWxzZTsgLy8gVG8gcHJldmVudCBmdXJ0aGVyIGNhbGxzIHVzaW5nIGFkZFxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmlyaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKCBsaXN0ICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHN0YWNrICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzdGFjay5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyZSggc3RhY2suc2hpZnQoKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBtZW1vcnkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0ID0gW107XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRpc2FibGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIC8vIEFjdHVhbCBDYWxsYmFja3Mgb2JqZWN0XG4gICAgICAgICAgICBzZWxmID0ge1xuICAgICAgICAgICAgICAgIC8vIEFkZCBhIGNhbGxiYWNrIG9yIGEgY29sbGVjdGlvbiBvZiBjYWxsYmFja3MgdG8gdGhlIGxpc3RcbiAgICAgICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGxpc3QgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJzdCwgd2Ugc2F2ZSB0aGUgY3VycmVudCBsZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IGxpc3QubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uIGFkZCggYXJncyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZWFjaCggYXJncywgZnVuY3Rpb24oIF8sIGFyZyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBqUXVlcnkudHlwZSggYXJnICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdHlwZSA9PT0gXCJmdW5jdGlvblwiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhb3B0aW9ucy51bmlxdWUgfHwgIXNlbGYuaGFzKCBhcmcgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0LnB1c2goIGFyZyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBhcmcgJiYgYXJnLmxlbmd0aCAmJiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5zcGVjdCByZWN1cnNpdmVseVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkKCBhcmcgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkoIGFyZ3VtZW50cyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG8gd2UgbmVlZCB0byBhZGQgdGhlIGNhbGxiYWNrcyB0byB0aGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgZmlyaW5nIGJhdGNoP1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBmaXJpbmcgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyaW5nTGVuZ3RoID0gbGlzdC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2l0aCBtZW1vcnksIGlmIHdlJ3JlIG5vdCBmaXJpbmcgdGhlblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIHNob3VsZCBjYWxsIHJpZ2h0IGF3YXlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIG1lbW9yeSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJpbmdTdGFydCA9IHN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcmUoIG1lbW9yeSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGEgY2FsbGJhY2sgZnJvbSB0aGUgbGlzdFxuICAgICAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggbGlzdCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5lYWNoKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlKCAoIGluZGV4ID0galF1ZXJ5LmluQXJyYXkoIGFyZywgbGlzdCwgaW5kZXggKSApID4gLTEgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Quc3BsaWNlKCBpbmRleCwgMSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgZmlyaW5nIGluZGV4ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBmaXJpbmcgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGluZGV4IDw9IGZpcmluZ0xlbmd0aCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJpbmdMZW5ndGgtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaW5kZXggPD0gZmlyaW5nSW5kZXggKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyaW5nSW5kZXgtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYSBnaXZlbiBjYWxsYmFjayBpcyBpbiB0aGUgbGlzdC5cbiAgICAgICAgICAgICAgICAvLyBJZiBubyBhcmd1bWVudCBpcyBnaXZlbiwgcmV0dXJuIHdoZXRoZXIgb3Igbm90IGxpc3QgaGFzIGNhbGxiYWNrcyBhdHRhY2hlZC5cbiAgICAgICAgICAgICAgICBoYXM6IGZ1bmN0aW9uKCBmbiApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuID8galF1ZXJ5LmluQXJyYXkoIGZuLCBsaXN0ICkgPiAtMSA6ICEhKCBsaXN0ICYmIGxpc3QubGVuZ3RoICk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYWxsIGNhbGxiYWNrcyBmcm9tIHRoZSBsaXN0XG4gICAgICAgICAgICAgICAgZW1wdHk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZpcmluZ0xlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gSGF2ZSB0aGUgbGlzdCBkbyBub3RoaW5nIGFueW1vcmVcbiAgICAgICAgICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgbGlzdCA9IHN0YWNrID0gbWVtb3J5ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIElzIGl0IGRpc2FibGVkP1xuICAgICAgICAgICAgICAgIGRpc2FibGVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFsaXN0O1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gTG9jayB0aGUgbGlzdCBpbiBpdHMgY3VycmVudCBzdGF0ZVxuICAgICAgICAgICAgICAgIGxvY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzdGFjayA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhbWVtb3J5ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5kaXNhYmxlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBJcyBpdCBsb2NrZWQ/XG4gICAgICAgICAgICAgICAgbG9ja2VkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFzdGFjaztcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIENhbGwgYWxsIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBjb250ZXh0IGFuZCBhcmd1bWVudHNcbiAgICAgICAgICAgICAgICBmaXJlV2l0aDogZnVuY3Rpb24oIGNvbnRleHQsIGFyZ3MgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggbGlzdCAmJiAoICFmaXJlZCB8fCBzdGFjayApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyA9IGFyZ3MgfHwgW107XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzID0gWyBjb250ZXh0LCBhcmdzLnNsaWNlID8gYXJncy5zbGljZSgpIDogYXJncyBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBmaXJpbmcgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaCggYXJncyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJlKCBhcmdzICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBDYWxsIGFsbCB0aGUgY2FsbGJhY2tzIHdpdGggdGhlIGdpdmVuIGFyZ3VtZW50c1xuICAgICAgICAgICAgICAgIGZpcmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmZpcmVXaXRoKCB0aGlzLCBhcmd1bWVudHMgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBUbyBrbm93IGlmIHRoZSBjYWxsYmFja3MgaGF2ZSBhbHJlYWR5IGJlZW4gY2FsbGVkIGF0IGxlYXN0IG9uY2VcbiAgICAgICAgICAgICAgICBmaXJlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhIWZpcmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfTtcbiAgICBqUXVlcnkuZXh0ZW5kKHtcblxuICAgICAgICBEZWZlcnJlZDogZnVuY3Rpb24oIGZ1bmMgKSB7XG4gICAgICAgICAgICB2YXIgdHVwbGVzID0gW1xuICAgICAgICAgICAgICAgICAgICAvLyBhY3Rpb24sIGFkZCBsaXN0ZW5lciwgbGlzdGVuZXIgbGlzdCwgZmluYWwgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgWyBcInJlc29sdmVcIiwgXCJkb25lXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZXNvbHZlZFwiIF0sXG4gICAgICAgICAgICAgICAgICAgIFsgXCJyZWplY3RcIiwgXCJmYWlsXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZWplY3RlZFwiIF0sXG4gICAgICAgICAgICAgICAgICAgIFsgXCJub3RpZnlcIiwgXCJwcm9ncmVzc1wiLCBqUXVlcnkuQ2FsbGJhY2tzKFwibWVtb3J5XCIpIF1cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHN0YXRlID0gXCJwZW5kaW5nXCIsXG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBhbHdheXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQuZG9uZSggYXJndW1lbnRzICkuZmFpbCggYXJndW1lbnRzICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdGhlbjogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZucyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBqUXVlcnkuRGVmZXJyZWQoZnVuY3Rpb24oIG5ld0RlZmVyICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5lYWNoKCB0dXBsZXMsIGZ1bmN0aW9uKCBpLCB0dXBsZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGlvbiA9IHR1cGxlWyAwIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBmbnNbIGkgXSApICYmIGZuc1sgaSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZlcnJlZFsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdIGZvciBmb3J3YXJkaW5nIGFjdGlvbnMgdG8gbmV3RGVmZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWRbIHR1cGxlWzFdIF0oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV0dXJuZWQgPSBmbiAmJiBmbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHJldHVybmVkICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCByZXR1cm5lZC5wcm9taXNlICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuZWQucHJvbWlzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kb25lKCBuZXdEZWZlci5yZXNvbHZlIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZhaWwoIG5ld0RlZmVyLnJlamVjdCApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wcm9ncmVzcyggbmV3RGVmZXIubm90aWZ5ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RlZmVyWyBhY3Rpb24gKyBcIldpdGhcIiBdKCB0aGlzID09PSBwcm9taXNlID8gbmV3RGVmZXIucHJvbWlzZSgpIDogdGhpcywgZm4gPyBbIHJldHVybmVkIF0gOiBhcmd1bWVudHMgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm5zID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnByb21pc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IGEgcHJvbWlzZSBmb3IgdGhpcyBkZWZlcnJlZFxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBvYmogaXMgcHJvdmlkZWQsIHRoZSBwcm9taXNlIGFzcGVjdCBpcyBhZGRlZCB0byB0aGUgb2JqZWN0XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2U6IGZ1bmN0aW9uKCBvYmogKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqICE9IG51bGwgPyBqUXVlcnkuZXh0ZW5kKCBvYmosIHByb21pc2UgKSA6IHByb21pc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlZmVycmVkID0ge307XG5cbiAgICAgICAgICAgIC8vIEtlZXAgcGlwZSBmb3IgYmFjay1jb21wYXRcbiAgICAgICAgICAgIHByb21pc2UucGlwZSA9IHByb21pc2UudGhlbjtcblxuICAgICAgICAgICAgLy8gQWRkIGxpc3Qtc3BlY2lmaWMgbWV0aG9kc1xuICAgICAgICAgICAgalF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIGksIHR1cGxlICkge1xuICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gdHVwbGVbIDIgXSxcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVTdHJpbmcgPSB0dXBsZVsgMyBdO1xuXG4gICAgICAgICAgICAgICAgLy8gcHJvbWlzZVsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdID0gbGlzdC5hZGRcbiAgICAgICAgICAgICAgICBwcm9taXNlWyB0dXBsZVsxXSBdID0gbGlzdC5hZGQ7XG5cbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgc3RhdGVcbiAgICAgICAgICAgICAgICBpZiAoIHN0YXRlU3RyaW5nICkge1xuICAgICAgICAgICAgICAgICAgICBsaXN0LmFkZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXRlID0gWyByZXNvbHZlZCB8IHJlamVjdGVkIF1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gc3RhdGVTdHJpbmc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFsgcmVqZWN0X2xpc3QgfCByZXNvbHZlX2xpc3QgXS5kaXNhYmxlOyBwcm9ncmVzc19saXN0LmxvY2tcbiAgICAgICAgICAgICAgICAgICAgfSwgdHVwbGVzWyBpIF4gMSBdWyAyIF0uZGlzYWJsZSwgdHVwbGVzWyAyIF1bIDIgXS5sb2NrICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gZGVmZXJyZWRbIHJlc29sdmUgfCByZWplY3QgfCBub3RpZnkgXVxuICAgICAgICAgICAgICAgIGRlZmVycmVkWyB0dXBsZVswXSBdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkWyB0dXBsZVswXSArIFwiV2l0aFwiIF0oIHRoaXMgPT09IGRlZmVycmVkID8gcHJvbWlzZSA6IHRoaXMsIGFyZ3VtZW50cyApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGRlZmVycmVkWyB0dXBsZVswXSArIFwiV2l0aFwiIF0gPSBsaXN0LmZpcmVXaXRoO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIE1ha2UgdGhlIGRlZmVycmVkIGEgcHJvbWlzZVxuICAgICAgICAgICAgcHJvbWlzZS5wcm9taXNlKCBkZWZlcnJlZCApO1xuXG4gICAgICAgICAgICAvLyBDYWxsIGdpdmVuIGZ1bmMgaWYgYW55XG4gICAgICAgICAgICBpZiAoIGZ1bmMgKSB7XG4gICAgICAgICAgICAgICAgZnVuYy5jYWxsKCBkZWZlcnJlZCwgZGVmZXJyZWQgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWxsIGRvbmUhXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gRGVmZXJyZWQgaGVscGVyXG4gICAgICAgIHdoZW46IGZ1bmN0aW9uKCBzdWJvcmRpbmF0ZSAvKiAsIC4uLiwgc3Vib3JkaW5hdGVOICovICkge1xuICAgICAgICAgICAgdmFyIGkgPSAwLFxuICAgICAgICAgICAgICAgIHJlc29sdmVWYWx1ZXMgPSBjb3JlX3NsaWNlLmNhbGwoIGFyZ3VtZW50cyApLFxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IHJlc29sdmVWYWx1ZXMubGVuZ3RoLFxuXG4gICAgICAgICAgICAvLyB0aGUgY291bnQgb2YgdW5jb21wbGV0ZWQgc3Vib3JkaW5hdGVzXG4gICAgICAgICAgICAgICAgcmVtYWluaW5nID0gbGVuZ3RoICE9PSAxIHx8ICggc3Vib3JkaW5hdGUgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHN1Ym9yZGluYXRlLnByb21pc2UgKSApID8gbGVuZ3RoIDogMCxcblxuICAgICAgICAgICAgLy8gdGhlIG1hc3RlciBEZWZlcnJlZC4gSWYgcmVzb2x2ZVZhbHVlcyBjb25zaXN0IG9mIG9ubHkgYSBzaW5nbGUgRGVmZXJyZWQsIGp1c3QgdXNlIHRoYXQuXG4gICAgICAgICAgICAgICAgZGVmZXJyZWQgPSByZW1haW5pbmcgPT09IDEgPyBzdWJvcmRpbmF0ZSA6IGpRdWVyeS5EZWZlcnJlZCgpLFxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgZnVuY3Rpb24gZm9yIGJvdGggcmVzb2x2ZSBhbmQgcHJvZ3Jlc3MgdmFsdWVzXG4gICAgICAgICAgICAgICAgdXBkYXRlRnVuYyA9IGZ1bmN0aW9uKCBpLCBjb250ZXh0cywgdmFsdWVzICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oIHZhbHVlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dHNbIGkgXSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbIGkgXSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gY29yZV9zbGljZS5jYWxsKCBhcmd1bWVudHMgKSA6IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIHZhbHVlcyA9PT0gcHJvZ3Jlc3NWYWx1ZXMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQubm90aWZ5V2l0aCggY29udGV4dHMsIHZhbHVlcyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggISggLS1yZW1haW5pbmcgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlV2l0aCggY29udGV4dHMsIHZhbHVlcyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBwcm9ncmVzc1ZhbHVlcywgcHJvZ3Jlc3NDb250ZXh0cywgcmVzb2x2ZUNvbnRleHRzO1xuXG4gICAgICAgICAgICAvLyBhZGQgbGlzdGVuZXJzIHRvIERlZmVycmVkIHN1Ym9yZGluYXRlczsgdHJlYXQgb3RoZXJzIGFzIHJlc29sdmVkXG4gICAgICAgICAgICBpZiAoIGxlbmd0aCA+IDEgKSB7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NWYWx1ZXMgPSBuZXcgQXJyYXkoIGxlbmd0aCApO1xuICAgICAgICAgICAgICAgIHByb2dyZXNzQ29udGV4dHMgPSBuZXcgQXJyYXkoIGxlbmd0aCApO1xuICAgICAgICAgICAgICAgIHJlc29sdmVDb250ZXh0cyA9IG5ldyBBcnJheSggbGVuZ3RoICk7XG4gICAgICAgICAgICAgICAgZm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggcmVzb2x2ZVZhbHVlc1sgaSBdICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCByZXNvbHZlVmFsdWVzWyBpIF0ucHJvbWlzZSApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZVZhbHVlc1sgaSBdLnByb21pc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kb25lKCB1cGRhdGVGdW5jKCBpLCByZXNvbHZlQ29udGV4dHMsIHJlc29sdmVWYWx1ZXMgKSApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZhaWwoIGRlZmVycmVkLnJlamVjdCApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnByb2dyZXNzKCB1cGRhdGVGdW5jKCBpLCBwcm9ncmVzc0NvbnRleHRzLCBwcm9ncmVzc1ZhbHVlcyApICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAtLXJlbWFpbmluZztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaWYgd2UncmUgbm90IHdhaXRpbmcgb24gYW55dGhpbmcsIHJlc29sdmUgdGhlIG1hc3RlclxuICAgICAgICAgICAgaWYgKCAhcmVtYWluaW5nICkge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmVXaXRoKCByZXNvbHZlQ29udGV4dHMsIHJlc29sdmVWYWx1ZXMgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGpRdWVyeS5zdXBwb3J0ID0gKGZ1bmN0aW9uKCBzdXBwb3J0ICkge1xuXG4gICAgICAgIHZhciBhbGwsIGEsIGlucHV0LCBzZWxlY3QsIGZyYWdtZW50LCBvcHQsIGV2ZW50TmFtZSwgaXNTdXBwb3J0ZWQsIGksXG4gICAgICAgICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgICAgIC8vIFNldHVwXG4gICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NOYW1lXCIsIFwidFwiICk7XG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSBcIiAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Jy9hJz5hPC9hPjxpbnB1dCB0eXBlPSdjaGVja2JveCcvPlwiO1xuXG4gICAgICAgIC8vIEZpbmlzaCBlYXJseSBpbiBsaW1pdGVkIChub24tYnJvd3NlcikgZW52aXJvbm1lbnRzXG4gICAgICAgIGFsbCA9IGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikgfHwgW107XG4gICAgICAgIGEgPSBkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhXCIpWyAwIF07XG4gICAgICAgIGlmICggIWEgfHwgIWEuc3R5bGUgfHwgIWFsbC5sZW5ndGggKSB7XG4gICAgICAgICAgICByZXR1cm4gc3VwcG9ydDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpcnN0IGJhdGNoIG9mIHRlc3RzXG4gICAgICAgIHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XG4gICAgICAgIG9wdCA9IHNlbGVjdC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSApO1xuICAgICAgICBpbnB1dCA9IGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpWyAwIF07XG5cbiAgICAgICAgYS5zdHlsZS5jc3NUZXh0ID0gXCJ0b3A6MXB4O2Zsb2F0OmxlZnQ7b3BhY2l0eTouNVwiO1xuXG4gICAgICAgIC8vIFRlc3Qgc2V0QXR0cmlidXRlIG9uIGNhbWVsQ2FzZSBjbGFzcy4gSWYgaXQgd29ya3MsIHdlIG5lZWQgYXR0ckZpeGVzIHdoZW4gZG9pbmcgZ2V0L3NldEF0dHJpYnV0ZSAoaWU2LzcpXG4gICAgICAgIHN1cHBvcnQuZ2V0U2V0QXR0cmlidXRlID0gZGl2LmNsYXNzTmFtZSAhPT0gXCJ0XCI7XG5cbiAgICAgICAgLy8gSUUgc3RyaXBzIGxlYWRpbmcgd2hpdGVzcGFjZSB3aGVuIC5pbm5lckhUTUwgaXMgdXNlZFxuICAgICAgICBzdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlID0gZGl2LmZpcnN0Q2hpbGQubm9kZVR5cGUgPT09IDM7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGJvZHkgZWxlbWVudHMgYXJlbid0IGF1dG9tYXRpY2FsbHkgaW5zZXJ0ZWRcbiAgICAgICAgLy8gSUUgd2lsbCBpbnNlcnQgdGhlbSBpbnRvIGVtcHR5IHRhYmxlc1xuICAgICAgICBzdXBwb3J0LnRib2R5ID0gIWRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRib2R5XCIpLmxlbmd0aDtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCBsaW5rIGVsZW1lbnRzIGdldCBzZXJpYWxpemVkIGNvcnJlY3RseSBieSBpbm5lckhUTUxcbiAgICAgICAgLy8gVGhpcyByZXF1aXJlcyBhIHdyYXBwZXIgZWxlbWVudCBpbiBJRVxuICAgICAgICBzdXBwb3J0Lmh0bWxTZXJpYWxpemUgPSAhIWRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcImxpbmtcIikubGVuZ3RoO1xuXG4gICAgICAgIC8vIEdldCB0aGUgc3R5bGUgaW5mb3JtYXRpb24gZnJvbSBnZXRBdHRyaWJ1dGVcbiAgICAgICAgLy8gKElFIHVzZXMgLmNzc1RleHQgaW5zdGVhZClcbiAgICAgICAgc3VwcG9ydC5zdHlsZSA9IC90b3AvLnRlc3QoIGEuZ2V0QXR0cmlidXRlKFwic3R5bGVcIikgKTtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCBVUkxzIGFyZW4ndCBtYW5pcHVsYXRlZFxuICAgICAgICAvLyAoSUUgbm9ybWFsaXplcyBpdCBieSBkZWZhdWx0KVxuICAgICAgICBzdXBwb3J0LmhyZWZOb3JtYWxpemVkID0gYS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpID09PSBcIi9hXCI7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgZWxlbWVudCBvcGFjaXR5IGV4aXN0c1xuICAgICAgICAvLyAoSUUgdXNlcyBmaWx0ZXIgaW5zdGVhZClcbiAgICAgICAgLy8gVXNlIGEgcmVnZXggdG8gd29yayBhcm91bmQgYSBXZWJLaXQgaXNzdWUuIFNlZSAjNTE0NVxuICAgICAgICBzdXBwb3J0Lm9wYWNpdHkgPSAvXjAuNS8udGVzdCggYS5zdHlsZS5vcGFjaXR5ICk7XG5cbiAgICAgICAgLy8gVmVyaWZ5IHN0eWxlIGZsb2F0IGV4aXN0ZW5jZVxuICAgICAgICAvLyAoSUUgdXNlcyBzdHlsZUZsb2F0IGluc3RlYWQgb2YgY3NzRmxvYXQpXG4gICAgICAgIHN1cHBvcnQuY3NzRmxvYXQgPSAhIWEuc3R5bGUuY3NzRmxvYXQ7XG5cbiAgICAgICAgLy8gQ2hlY2sgdGhlIGRlZmF1bHQgY2hlY2tib3gvcmFkaW8gdmFsdWUgKFwiXCIgb24gV2ViS2l0OyBcIm9uXCIgZWxzZXdoZXJlKVxuICAgICAgICBzdXBwb3J0LmNoZWNrT24gPSAhIWlucHV0LnZhbHVlO1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IGEgc2VsZWN0ZWQtYnktZGVmYXVsdCBvcHRpb24gaGFzIGEgd29ya2luZyBzZWxlY3RlZCBwcm9wZXJ0eS5cbiAgICAgICAgLy8gKFdlYktpdCBkZWZhdWx0cyB0byBmYWxzZSBpbnN0ZWFkIG9mIHRydWUsIElFIHRvbywgaWYgaXQncyBpbiBhbiBvcHRncm91cClcbiAgICAgICAgc3VwcG9ydC5vcHRTZWxlY3RlZCA9IG9wdC5zZWxlY3RlZDtcblxuICAgICAgICAvLyBUZXN0cyBmb3IgZW5jdHlwZSBzdXBwb3J0IG9uIGEgZm9ybSAoIzY3NDMpXG4gICAgICAgIHN1cHBvcnQuZW5jdHlwZSA9ICEhZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIikuZW5jdHlwZTtcblxuICAgICAgICAvLyBNYWtlcyBzdXJlIGNsb25pbmcgYW4gaHRtbDUgZWxlbWVudCBkb2VzIG5vdCBjYXVzZSBwcm9ibGVtc1xuICAgICAgICAvLyBXaGVyZSBvdXRlckhUTUwgaXMgdW5kZWZpbmVkLCB0aGlzIHN0aWxsIHdvcmtzXG4gICAgICAgIHN1cHBvcnQuaHRtbDVDbG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJuYXZcIikuY2xvbmVOb2RlKCB0cnVlICkub3V0ZXJIVE1MICE9PSBcIjw6bmF2PjwvOm5hdj5cIjtcblxuICAgICAgICAvLyBXaWxsIGJlIGRlZmluZWQgbGF0ZXJcbiAgICAgICAgc3VwcG9ydC5pbmxpbmVCbG9ja05lZWRzTGF5b3V0ID0gZmFsc2U7XG4gICAgICAgIHN1cHBvcnQuc2hyaW5rV3JhcEJsb2NrcyA9IGZhbHNlO1xuICAgICAgICBzdXBwb3J0LnBpeGVsUG9zaXRpb24gPSBmYWxzZTtcbiAgICAgICAgc3VwcG9ydC5kZWxldGVFeHBhbmRvID0gdHJ1ZTtcbiAgICAgICAgc3VwcG9ydC5ub0Nsb25lRXZlbnQgPSB0cnVlO1xuICAgICAgICBzdXBwb3J0LnJlbGlhYmxlTWFyZ2luUmlnaHQgPSB0cnVlO1xuICAgICAgICBzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlID0gdHJ1ZTtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgY2hlY2tlZCBzdGF0dXMgaXMgcHJvcGVybHkgY2xvbmVkXG4gICAgICAgIGlucHV0LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICBzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkID0gaW5wdXQuY2xvbmVOb2RlKCB0cnVlICkuY2hlY2tlZDtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgb3B0aW9ucyBpbnNpZGUgZGlzYWJsZWQgc2VsZWN0cyBhcmVuJ3QgbWFya2VkIGFzIGRpc2FibGVkXG4gICAgICAgIC8vIChXZWJLaXQgbWFya3MgdGhlbSBhcyBkaXNhYmxlZClcbiAgICAgICAgc2VsZWN0LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgc3VwcG9ydC5vcHREaXNhYmxlZCA9ICFvcHQuZGlzYWJsZWQ7XG5cbiAgICAgICAgLy8gU3VwcG9ydDogSUU8OVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVsZXRlIGRpdi50ZXN0O1xuICAgICAgICB9IGNhdGNoKCBlICkge1xuICAgICAgICAgICAgc3VwcG9ydC5kZWxldGVFeHBhbmRvID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiB3ZSBjYW4gdHJ1c3QgZ2V0QXR0cmlidXRlKFwidmFsdWVcIilcbiAgICAgICAgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZSggXCJ2YWx1ZVwiLCBcIlwiICk7XG4gICAgICAgIHN1cHBvcnQuaW5wdXQgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiApID09PSBcIlwiO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIGFuIGlucHV0IG1haW50YWlucyBpdHMgdmFsdWUgYWZ0ZXIgYmVjb21pbmcgYSByYWRpb1xuICAgICAgICBpbnB1dC52YWx1ZSA9IFwidFwiO1xuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCBcInJhZGlvXCIgKTtcbiAgICAgICAgc3VwcG9ydC5yYWRpb1ZhbHVlID0gaW5wdXQudmFsdWUgPT09IFwidFwiO1xuXG4gICAgICAgIC8vICMxMTIxNyAtIFdlYktpdCBsb3NlcyBjaGVjayB3aGVuIHRoZSBuYW1lIGlzIGFmdGVyIHRoZSBjaGVja2VkIGF0dHJpYnV0ZVxuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoIFwiY2hlY2tlZFwiLCBcInRcIiApO1xuICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoIFwibmFtZVwiLCBcInRcIiApO1xuXG4gICAgICAgIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCggaW5wdXQgKTtcblxuICAgICAgICAvLyBDaGVjayBpZiBhIGRpc2Nvbm5lY3RlZCBjaGVja2JveCB3aWxsIHJldGFpbiBpdHMgY2hlY2tlZFxuICAgICAgICAvLyB2YWx1ZSBvZiB0cnVlIGFmdGVyIGFwcGVuZGVkIHRvIHRoZSBET00gKElFNi83KVxuICAgICAgICBzdXBwb3J0LmFwcGVuZENoZWNrZWQgPSBpbnB1dC5jaGVja2VkO1xuXG4gICAgICAgIC8vIFdlYktpdCBkb2Vzbid0IGNsb25lIGNoZWNrZWQgc3RhdGUgY29ycmVjdGx5IGluIGZyYWdtZW50c1xuICAgICAgICBzdXBwb3J0LmNoZWNrQ2xvbmUgPSBmcmFnbWVudC5jbG9uZU5vZGUoIHRydWUgKS5jbG9uZU5vZGUoIHRydWUgKS5sYXN0Q2hpbGQuY2hlY2tlZDtcblxuICAgICAgICAvLyBTdXBwb3J0OiBJRTw5XG4gICAgICAgIC8vIE9wZXJhIGRvZXMgbm90IGNsb25lIGV2ZW50cyAoYW5kIHR5cGVvZiBkaXYuYXR0YWNoRXZlbnQgPT09IHVuZGVmaW5lZCkuXG4gICAgICAgIC8vIElFOS0xMCBjbG9uZXMgZXZlbnRzIGJvdW5kIHZpYSBhdHRhY2hFdmVudCwgYnV0IHRoZXkgZG9uJ3QgdHJpZ2dlciB3aXRoIC5jbGljaygpXG4gICAgICAgIGlmICggZGl2LmF0dGFjaEV2ZW50ICkge1xuICAgICAgICAgICAgZGl2LmF0dGFjaEV2ZW50KCBcIm9uY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgc3VwcG9ydC5ub0Nsb25lRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBkaXYuY2xvbmVOb2RlKCB0cnVlICkuY2xpY2soKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN1cHBvcnQ6IElFPDkgKGxhY2sgc3VibWl0L2NoYW5nZSBidWJibGUpLCBGaXJlZm94IDE3KyAobGFjayBmb2N1c2luIGV2ZW50KVxuICAgICAgICAvLyBCZXdhcmUgb2YgQ1NQIHJlc3RyaWN0aW9ucyAoaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vU2VjdXJpdHkvQ1NQKVxuICAgICAgICBmb3IgKCBpIGluIHsgc3VibWl0OiB0cnVlLCBjaGFuZ2U6IHRydWUsIGZvY3VzaW46IHRydWUgfSkge1xuICAgICAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSggZXZlbnROYW1lID0gXCJvblwiICsgaSwgXCJ0XCIgKTtcblxuICAgICAgICAgICAgc3VwcG9ydFsgaSArIFwiQnViYmxlc1wiIF0gPSBldmVudE5hbWUgaW4gd2luZG93IHx8IGRpdi5hdHRyaWJ1dGVzWyBldmVudE5hbWUgXS5leHBhbmRvID09PSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9IFwiY29udGVudC1ib3hcIjtcbiAgICAgICAgZGl2LmNsb25lTm9kZSggdHJ1ZSApLnN0eWxlLmJhY2tncm91bmRDbGlwID0gXCJcIjtcbiAgICAgICAgc3VwcG9ydC5jbGVhckNsb25lU3R5bGUgPSBkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPT09IFwiY29udGVudC1ib3hcIjtcblxuICAgICAgICAvLyBTdXBwb3J0OiBJRTw5XG4gICAgICAgIC8vIEl0ZXJhdGlvbiBvdmVyIG9iamVjdCdzIGluaGVyaXRlZCBwcm9wZXJ0aWVzIGJlZm9yZSBpdHMgb3duLlxuICAgICAgICBmb3IgKCBpIGluIGpRdWVyeSggc3VwcG9ydCApICkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgc3VwcG9ydC5vd25MYXN0ID0gaSAhPT0gXCIwXCI7XG5cbiAgICAgICAgLy8gUnVuIHRlc3RzIHRoYXQgbmVlZCBhIGJvZHkgYXQgZG9jIHJlYWR5XG4gICAgICAgIGpRdWVyeShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjb250YWluZXIsIG1hcmdpbkRpdiwgdGRzLFxuICAgICAgICAgICAgICAgIGRpdlJlc2V0ID0gXCJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpibG9jaztib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDstd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7XCIsXG4gICAgICAgICAgICAgICAgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXTtcblxuICAgICAgICAgICAgaWYgKCAhYm9keSApIHtcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gZm9yIGZyYW1lc2V0IGRvY3MgdGhhdCBkb24ndCBoYXZlIGEgYm9keVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gXCJib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6LTk5OTlweDttYXJnaW4tdG9wOjFweFwiO1xuXG4gICAgICAgICAgICBib2R5LmFwcGVuZENoaWxkKCBjb250YWluZXIgKS5hcHBlbmRDaGlsZCggZGl2ICk7XG5cbiAgICAgICAgICAgIC8vIFN1cHBvcnQ6IElFOFxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGFibGUgY2VsbHMgc3RpbGwgaGF2ZSBvZmZzZXRXaWR0aC9IZWlnaHQgd2hlbiB0aGV5IGFyZSBzZXRcbiAgICAgICAgICAgIC8vIHRvIGRpc3BsYXk6bm9uZSBhbmQgdGhlcmUgYXJlIHN0aWxsIG90aGVyIHZpc2libGUgdGFibGUgY2VsbHMgaW4gYVxuICAgICAgICAgICAgLy8gdGFibGUgcm93OyBpZiBzbywgb2Zmc2V0V2lkdGgvSGVpZ2h0IGFyZSBub3QgcmVsaWFibGUgZm9yIHVzZSB3aGVuXG4gICAgICAgICAgICAvLyBkZXRlcm1pbmluZyBpZiBhbiBlbGVtZW50IGhhcyBiZWVuIGhpZGRlbiBkaXJlY3RseSB1c2luZ1xuICAgICAgICAgICAgLy8gZGlzcGxheTpub25lIChpdCBpcyBzdGlsbCBzYWZlIHRvIHVzZSBvZmZzZXRzIGlmIGEgcGFyZW50IGVsZW1lbnQgaXNcbiAgICAgICAgICAgIC8vIGhpZGRlbjsgZG9uIHNhZmV0eSBnb2dnbGVzIGFuZCBzZWUgYnVnICM0NTEyIGZvciBtb3JlIGluZm9ybWF0aW9uKS5cbiAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBcIjx0YWJsZT48dHI+PHRkPjwvdGQ+PHRkPnQ8L3RkPjwvdHI+PC90YWJsZT5cIjtcbiAgICAgICAgICAgIHRkcyA9IGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRkXCIpO1xuICAgICAgICAgICAgdGRzWyAwIF0uc3R5bGUuY3NzVGV4dCA9IFwicGFkZGluZzowO21hcmdpbjowO2JvcmRlcjowO2Rpc3BsYXk6bm9uZVwiO1xuICAgICAgICAgICAgaXNTdXBwb3J0ZWQgPSAoIHRkc1sgMCBdLm9mZnNldEhlaWdodCA9PT0gMCApO1xuXG4gICAgICAgICAgICB0ZHNbIDAgXS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgICAgICAgIHRkc1sgMSBdLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgICAgICAgLy8gU3VwcG9ydDogSUU4XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBlbXB0eSB0YWJsZSBjZWxscyBzdGlsbCBoYXZlIG9mZnNldFdpZHRoL0hlaWdodFxuICAgICAgICAgICAgc3VwcG9ydC5yZWxpYWJsZUhpZGRlbk9mZnNldHMgPSBpc1N1cHBvcnRlZCAmJiAoIHRkc1sgMCBdLm9mZnNldEhlaWdodCA9PT0gMCApO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBib3gtc2l6aW5nIGFuZCBtYXJnaW4gYmVoYXZpb3IuXG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgICAgIGRpdi5zdHlsZS5jc3NUZXh0ID0gXCJib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7cGFkZGluZzoxcHg7Ym9yZGVyOjFweDtkaXNwbGF5OmJsb2NrO3dpZHRoOjRweDttYXJnaW4tdG9wOjElO3Bvc2l0aW9uOmFic29sdXRlO3RvcDoxJTtcIjtcblxuICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmYWlsaW5nIGJveFNpemluZyB0ZXN0IGR1ZSB0byBvZmZzZXRXaWR0aCByZXR1cm5pbmcgd3JvbmcgdmFsdWVcbiAgICAgICAgICAgIC8vIHdpdGggc29tZSBub24tMSB2YWx1ZXMgb2YgYm9keSB6b29tLCB0aWNrZXQgIzEzNTQzXG4gICAgICAgICAgICBqUXVlcnkuc3dhcCggYm9keSwgYm9keS5zdHlsZS56b29tICE9IG51bGwgPyB7IHpvb206IDEgfSA6IHt9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzdXBwb3J0LmJveFNpemluZyA9IGRpdi5vZmZzZXRXaWR0aCA9PT0gNDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBVc2Ugd2luZG93LmdldENvbXB1dGVkU3R5bGUgYmVjYXVzZSBqc2RvbSBvbiBub2RlLmpzIHdpbGwgYnJlYWsgd2l0aG91dCBpdC5cbiAgICAgICAgICAgIGlmICggd2luZG93LmdldENvbXB1dGVkU3R5bGUgKSB7XG4gICAgICAgICAgICAgICAgc3VwcG9ydC5waXhlbFBvc2l0aW9uID0gKCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggZGl2LCBudWxsICkgfHwge30gKS50b3AgIT09IFwiMSVcIjtcbiAgICAgICAgICAgICAgICBzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlID0gKCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggZGl2LCBudWxsICkgfHwgeyB3aWR0aDogXCI0cHhcIiB9ICkud2lkdGggPT09IFwiNHB4XCI7XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBkaXYgd2l0aCBleHBsaWNpdCB3aWR0aCBhbmQgbm8gbWFyZ2luLXJpZ2h0IGluY29ycmVjdGx5XG4gICAgICAgICAgICAgICAgLy8gZ2V0cyBjb21wdXRlZCBtYXJnaW4tcmlnaHQgYmFzZWQgb24gd2lkdGggb2YgY29udGFpbmVyLiAoIzMzMzMpXG4gICAgICAgICAgICAgICAgLy8gRmFpbHMgaW4gV2ViS2l0IGJlZm9yZSBGZWIgMjAxMSBuaWdodGxpZXNcbiAgICAgICAgICAgICAgICAvLyBXZWJLaXQgQnVnIDEzMzQzIC0gZ2V0Q29tcHV0ZWRTdHlsZSByZXR1cm5zIHdyb25nIHZhbHVlIGZvciBtYXJnaW4tcmlnaHRcbiAgICAgICAgICAgICAgICBtYXJnaW5EaXYgPSBkaXYuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikgKTtcbiAgICAgICAgICAgICAgICBtYXJnaW5EaXYuc3R5bGUuY3NzVGV4dCA9IGRpdi5zdHlsZS5jc3NUZXh0ID0gZGl2UmVzZXQ7XG4gICAgICAgICAgICAgICAgbWFyZ2luRGl2LnN0eWxlLm1hcmdpblJpZ2h0ID0gbWFyZ2luRGl2LnN0eWxlLndpZHRoID0gXCIwXCI7XG4gICAgICAgICAgICAgICAgZGl2LnN0eWxlLndpZHRoID0gXCIxcHhcIjtcblxuICAgICAgICAgICAgICAgIHN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodCA9XG4gICAgICAgICAgICAgICAgICAgICFwYXJzZUZsb2F0KCAoIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBtYXJnaW5EaXYsIG51bGwgKSB8fCB7fSApLm1hcmdpblJpZ2h0ICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggdHlwZW9mIGRpdi5zdHlsZS56b29tICE9PSBjb3JlX3N0cnVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICAvLyBTdXBwb3J0OiBJRTw4XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgbmF0aXZlbHkgYmxvY2stbGV2ZWwgZWxlbWVudHMgYWN0IGxpa2UgaW5saW5lLWJsb2NrXG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudHMgd2hlbiBzZXR0aW5nIHRoZWlyIGRpc3BsYXkgdG8gJ2lubGluZScgYW5kIGdpdmluZ1xuICAgICAgICAgICAgICAgIC8vIHRoZW0gbGF5b3V0XG4gICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgZGl2LnN0eWxlLmNzc1RleHQgPSBkaXZSZXNldCArIFwid2lkdGg6MXB4O3BhZGRpbmc6MXB4O2Rpc3BsYXk6aW5saW5lO3pvb206MVwiO1xuICAgICAgICAgICAgICAgIHN1cHBvcnQuaW5saW5lQmxvY2tOZWVkc0xheW91dCA9ICggZGl2Lm9mZnNldFdpZHRoID09PSAzICk7XG5cbiAgICAgICAgICAgICAgICAvLyBTdXBwb3J0OiBJRTZcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBlbGVtZW50cyB3aXRoIGxheW91dCBzaHJpbmstd3JhcCB0aGVpciBjaGlsZHJlblxuICAgICAgICAgICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBcIjxkaXY+PC9kaXY+XCI7XG4gICAgICAgICAgICAgICAgZGl2LmZpcnN0Q2hpbGQuc3R5bGUud2lkdGggPSBcIjVweFwiO1xuICAgICAgICAgICAgICAgIHN1cHBvcnQuc2hyaW5rV3JhcEJsb2NrcyA9ICggZGl2Lm9mZnNldFdpZHRoICE9PSAzICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIHN1cHBvcnQuaW5saW5lQmxvY2tOZWVkc0xheW91dCApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCBJRSA2IGZyb20gYWZmZWN0aW5nIGxheW91dCBmb3IgcG9zaXRpb25lZCBlbGVtZW50cyAjMTEwNDhcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCBJRSBmcm9tIHNocmlua2luZyB0aGUgYm9keSBpbiBJRSA3IG1vZGUgIzEyODY5XG4gICAgICAgICAgICAgICAgICAgIC8vIFN1cHBvcnQ6IElFPDhcbiAgICAgICAgICAgICAgICAgICAgYm9keS5zdHlsZS56b29tID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJvZHkucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApO1xuXG4gICAgICAgICAgICAvLyBOdWxsIGVsZW1lbnRzIHRvIGF2b2lkIGxlYWtzIGluIElFXG4gICAgICAgICAgICBjb250YWluZXIgPSBkaXYgPSB0ZHMgPSBtYXJnaW5EaXYgPSBudWxsO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBOdWxsIGVsZW1lbnRzIHRvIGF2b2lkIGxlYWtzIGluIElFXG4gICAgICAgIGFsbCA9IHNlbGVjdCA9IGZyYWdtZW50ID0gb3B0ID0gYSA9IGlucHV0ID0gbnVsbDtcblxuICAgICAgICByZXR1cm4gc3VwcG9ydDtcbiAgICB9KSh7fSk7XG5cbiAgICB2YXIgcmJyYWNlID0gLyg/Olxce1tcXHNcXFNdKlxcfXxcXFtbXFxzXFxTXSpcXF0pJC8sXG4gICAgICAgIHJtdWx0aURhc2ggPSAvKFtBLVpdKS9nO1xuXG4gICAgZnVuY3Rpb24gaW50ZXJuYWxEYXRhKCBlbGVtLCBuYW1lLCBkYXRhLCBwdnQgLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKXtcbiAgICAgICAgaWYgKCAhalF1ZXJ5LmFjY2VwdERhdGEoIGVsZW0gKSApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXQsIHRoaXNDYWNoZSxcbiAgICAgICAgICAgIGludGVybmFsS2V5ID0galF1ZXJ5LmV4cGFuZG8sXG5cbiAgICAgICAgLy8gV2UgaGF2ZSB0byBoYW5kbGUgRE9NIG5vZGVzIGFuZCBKUyBvYmplY3RzIGRpZmZlcmVudGx5IGJlY2F1c2UgSUU2LTdcbiAgICAgICAgLy8gY2FuJ3QgR0Mgb2JqZWN0IHJlZmVyZW5jZXMgcHJvcGVybHkgYWNyb3NzIHRoZSBET00tSlMgYm91bmRhcnlcbiAgICAgICAgICAgIGlzTm9kZSA9IGVsZW0ubm9kZVR5cGUsXG5cbiAgICAgICAgLy8gT25seSBET00gbm9kZXMgbmVlZCB0aGUgZ2xvYmFsIGpRdWVyeSBjYWNoZTsgSlMgb2JqZWN0IGRhdGEgaXNcbiAgICAgICAgLy8gYXR0YWNoZWQgZGlyZWN0bHkgdG8gdGhlIG9iamVjdCBzbyBHQyBjYW4gb2NjdXIgYXV0b21hdGljYWxseVxuICAgICAgICAgICAgY2FjaGUgPSBpc05vZGUgPyBqUXVlcnkuY2FjaGUgOiBlbGVtLFxuXG4gICAgICAgIC8vIE9ubHkgZGVmaW5pbmcgYW4gSUQgZm9yIEpTIG9iamVjdHMgaWYgaXRzIGNhY2hlIGFscmVhZHkgZXhpc3RzIGFsbG93c1xuICAgICAgICAvLyB0aGUgY29kZSB0byBzaG9ydGN1dCBvbiB0aGUgc2FtZSBwYXRoIGFzIGEgRE9NIG5vZGUgd2l0aCBubyBjYWNoZVxuICAgICAgICAgICAgaWQgPSBpc05vZGUgPyBlbGVtWyBpbnRlcm5hbEtleSBdIDogZWxlbVsgaW50ZXJuYWxLZXkgXSAmJiBpbnRlcm5hbEtleTtcblxuICAgICAgICAvLyBBdm9pZCBkb2luZyBhbnkgbW9yZSB3b3JrIHRoYW4gd2UgbmVlZCB0byB3aGVuIHRyeWluZyB0byBnZXQgZGF0YSBvbiBhblxuICAgICAgICAvLyBvYmplY3QgdGhhdCBoYXMgbm8gZGF0YSBhdCBhbGxcbiAgICAgICAgaWYgKCAoIWlkIHx8ICFjYWNoZVtpZF0gfHwgKCFwdnQgJiYgIWNhY2hlW2lkXS5kYXRhKSkgJiYgZGF0YSA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCAhaWQgKSB7XG4gICAgICAgICAgICAvLyBPbmx5IERPTSBub2RlcyBuZWVkIGEgbmV3IHVuaXF1ZSBJRCBmb3IgZWFjaCBlbGVtZW50IHNpbmNlIHRoZWlyIGRhdGFcbiAgICAgICAgICAgIC8vIGVuZHMgdXAgaW4gdGhlIGdsb2JhbCBjYWNoZVxuICAgICAgICAgICAgaWYgKCBpc05vZGUgKSB7XG4gICAgICAgICAgICAgICAgaWQgPSBlbGVtWyBpbnRlcm5hbEtleSBdID0gY29yZV9kZWxldGVkSWRzLnBvcCgpIHx8IGpRdWVyeS5ndWlkKys7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlkID0gaW50ZXJuYWxLZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICFjYWNoZVsgaWQgXSApIHtcbiAgICAgICAgICAgIC8vIEF2b2lkIGV4cG9zaW5nIGpRdWVyeSBtZXRhZGF0YSBvbiBwbGFpbiBKUyBvYmplY3RzIHdoZW4gdGhlIG9iamVjdFxuICAgICAgICAgICAgLy8gaXMgc2VyaWFsaXplZCB1c2luZyBKU09OLnN0cmluZ2lmeVxuICAgICAgICAgICAgY2FjaGVbIGlkIF0gPSBpc05vZGUgPyB7fSA6IHsgdG9KU09OOiBqUXVlcnkubm9vcCB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQW4gb2JqZWN0IGNhbiBiZSBwYXNzZWQgdG8galF1ZXJ5LmRhdGEgaW5zdGVhZCBvZiBhIGtleS92YWx1ZSBwYWlyOyB0aGlzIGdldHNcbiAgICAgICAgLy8gc2hhbGxvdyBjb3BpZWQgb3ZlciBvbnRvIHRoZSBleGlzdGluZyBjYWNoZVxuICAgICAgICBpZiAoIHR5cGVvZiBuYW1lID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBuYW1lID09PSBcImZ1bmN0aW9uXCIgKSB7XG4gICAgICAgICAgICBpZiAoIHB2dCApIHtcbiAgICAgICAgICAgICAgICBjYWNoZVsgaWQgXSA9IGpRdWVyeS5leHRlbmQoIGNhY2hlWyBpZCBdLCBuYW1lICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhY2hlWyBpZCBdLmRhdGEgPSBqUXVlcnkuZXh0ZW5kKCBjYWNoZVsgaWQgXS5kYXRhLCBuYW1lICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzQ2FjaGUgPSBjYWNoZVsgaWQgXTtcblxuICAgICAgICAvLyBqUXVlcnkgZGF0YSgpIGlzIHN0b3JlZCBpbiBhIHNlcGFyYXRlIG9iamVjdCBpbnNpZGUgdGhlIG9iamVjdCdzIGludGVybmFsIGRhdGFcbiAgICAgICAgLy8gY2FjaGUgaW4gb3JkZXIgdG8gYXZvaWQga2V5IGNvbGxpc2lvbnMgYmV0d2VlbiBpbnRlcm5hbCBkYXRhIGFuZCB1c2VyLWRlZmluZWRcbiAgICAgICAgLy8gZGF0YS5cbiAgICAgICAgaWYgKCAhcHZ0ICkge1xuICAgICAgICAgICAgaWYgKCAhdGhpc0NhY2hlLmRhdGEgKSB7XG4gICAgICAgICAgICAgICAgdGhpc0NhY2hlLmRhdGEgPSB7fTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpc0NhY2hlID0gdGhpc0NhY2hlLmRhdGE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgIHRoaXNDYWNoZVsgalF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApIF0gPSBkYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIGJvdGggY29udmVydGVkLXRvLWNhbWVsIGFuZCBub24tY29udmVydGVkIGRhdGEgcHJvcGVydHkgbmFtZXNcbiAgICAgICAgLy8gSWYgYSBkYXRhIHByb3BlcnR5IHdhcyBzcGVjaWZpZWRcbiAgICAgICAgaWYgKCB0eXBlb2YgbmFtZSA9PT0gXCJzdHJpbmdcIiApIHtcblxuICAgICAgICAgICAgLy8gRmlyc3QgVHJ5IHRvIGZpbmQgYXMtaXMgcHJvcGVydHkgZGF0YVxuICAgICAgICAgICAgcmV0ID0gdGhpc0NhY2hlWyBuYW1lIF07XG5cbiAgICAgICAgICAgIC8vIFRlc3QgZm9yIG51bGx8dW5kZWZpbmVkIHByb3BlcnR5IGRhdGFcbiAgICAgICAgICAgIGlmICggcmV0ID09IG51bGwgKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBUcnkgdG8gZmluZCB0aGUgY2FtZWxDYXNlZCBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgIHJldCA9IHRoaXNDYWNoZVsgalF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApIF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXQgPSB0aGlzQ2FjaGU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGludGVybmFsUmVtb3ZlRGF0YSggZWxlbSwgbmFtZSwgcHZ0ICkge1xuICAgICAgICBpZiAoICFqUXVlcnkuYWNjZXB0RGF0YSggZWxlbSApICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRoaXNDYWNoZSwgaSxcbiAgICAgICAgICAgIGlzTm9kZSA9IGVsZW0ubm9kZVR5cGUsXG5cbiAgICAgICAgLy8gU2VlIGpRdWVyeS5kYXRhIGZvciBtb3JlIGluZm9ybWF0aW9uXG4gICAgICAgICAgICBjYWNoZSA9IGlzTm9kZSA/IGpRdWVyeS5jYWNoZSA6IGVsZW0sXG4gICAgICAgICAgICBpZCA9IGlzTm9kZSA/IGVsZW1bIGpRdWVyeS5leHBhbmRvIF0gOiBqUXVlcnkuZXhwYW5kbztcblxuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbHJlYWR5IG5vIGNhY2hlIGVudHJ5IGZvciB0aGlzIG9iamVjdCwgdGhlcmUgaXMgbm9cbiAgICAgICAgLy8gcHVycG9zZSBpbiBjb250aW51aW5nXG4gICAgICAgIGlmICggIWNhY2hlWyBpZCBdICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCBuYW1lICkge1xuXG4gICAgICAgICAgICB0aGlzQ2FjaGUgPSBwdnQgPyBjYWNoZVsgaWQgXSA6IGNhY2hlWyBpZCBdLmRhdGE7XG5cbiAgICAgICAgICAgIGlmICggdGhpc0NhY2hlICkge1xuXG4gICAgICAgICAgICAgICAgLy8gU3VwcG9ydCBhcnJheSBvciBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG5hbWVzIGZvciBkYXRhIGtleXNcbiAgICAgICAgICAgICAgICBpZiAoICFqUXVlcnkuaXNBcnJheSggbmFtZSApICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyeSB0aGUgc3RyaW5nIGFzIGEga2V5IGJlZm9yZSBhbnkgbWFuaXB1bGF0aW9uXG4gICAgICAgICAgICAgICAgICAgIGlmICggbmFtZSBpbiB0aGlzQ2FjaGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gWyBuYW1lIF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNwbGl0IHRoZSBjYW1lbCBjYXNlZCB2ZXJzaW9uIGJ5IHNwYWNlcyB1bmxlc3MgYSBrZXkgd2l0aCB0aGUgc3BhY2VzIGV4aXN0c1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbmFtZSBpbiB0aGlzQ2FjaGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IFsgbmFtZSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5zcGxpdChcIiBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBcIm5hbWVcIiBpcyBhbiBhcnJheSBvZiBrZXlzLi4uXG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gZGF0YSBpcyBpbml0aWFsbHkgY3JlYXRlZCwgdmlhIChcImtleVwiLCBcInZhbFwiKSBzaWduYXR1cmUsXG4gICAgICAgICAgICAgICAgICAgIC8vIGtleXMgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlLlxuICAgICAgICAgICAgICAgICAgICAvLyBTaW5jZSB0aGVyZSBpcyBubyB3YXkgdG8gdGVsbCBfaG93XyBhIGtleSB3YXMgYWRkZWQsIHJlbW92ZVxuICAgICAgICAgICAgICAgICAgICAvLyBib3RoIHBsYWluIGtleSBhbmQgY2FtZWxDYXNlIGtleS4gIzEyNzg2XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBvbmx5IHBlbmFsaXplIHRoZSBhcnJheSBhcmd1bWVudCBwYXRoLlxuICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5jb25jYXQoIGpRdWVyeS5tYXAoIG5hbWUsIGpRdWVyeS5jYW1lbENhc2UgKSApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGkgPSBuYW1lLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoIGktLSApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXNDYWNoZVsgbmFtZVtpXSBdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGRhdGEgbGVmdCBpbiB0aGUgY2FjaGUsIHdlIHdhbnQgdG8gY29udGludWVcbiAgICAgICAgICAgICAgICAvLyBhbmQgbGV0IHRoZSBjYWNoZSBvYmplY3QgaXRzZWxmIGdldCBkZXN0cm95ZWRcbiAgICAgICAgICAgICAgICBpZiAoIHB2dCA/ICFpc0VtcHR5RGF0YU9iamVjdCh0aGlzQ2FjaGUpIDogIWpRdWVyeS5pc0VtcHR5T2JqZWN0KHRoaXNDYWNoZSkgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZWUgalF1ZXJ5LmRhdGEgZm9yIG1vcmUgaW5mb3JtYXRpb25cbiAgICAgICAgaWYgKCAhcHZ0ICkge1xuICAgICAgICAgICAgZGVsZXRlIGNhY2hlWyBpZCBdLmRhdGE7XG5cbiAgICAgICAgICAgIC8vIERvbid0IGRlc3Ryb3kgdGhlIHBhcmVudCBjYWNoZSB1bmxlc3MgdGhlIGludGVybmFsIGRhdGEgb2JqZWN0XG4gICAgICAgICAgICAvLyBoYWQgYmVlbiB0aGUgb25seSB0aGluZyBsZWZ0IGluIGl0XG4gICAgICAgICAgICBpZiAoICFpc0VtcHR5RGF0YU9iamVjdCggY2FjaGVbIGlkIF0gKSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZXN0cm95IHRoZSBjYWNoZVxuICAgICAgICBpZiAoIGlzTm9kZSApIHtcbiAgICAgICAgICAgIGpRdWVyeS5jbGVhbkRhdGEoIFsgZWxlbSBdLCB0cnVlICk7XG5cbiAgICAgICAgICAgIC8vIFVzZSBkZWxldGUgd2hlbiBzdXBwb3J0ZWQgZm9yIGV4cGFuZG9zIG9yIGBjYWNoZWAgaXMgbm90IGEgd2luZG93IHBlciBpc1dpbmRvdyAoIzEwMDgwKVxuICAgICAgICAgICAgLyoganNoaW50IGVxZXFlcTogZmFsc2UgKi9cbiAgICAgICAgfSBlbHNlIGlmICggalF1ZXJ5LnN1cHBvcnQuZGVsZXRlRXhwYW5kbyB8fCBjYWNoZSAhPSBjYWNoZS53aW5kb3cgKSB7XG4gICAgICAgICAgICAvKiBqc2hpbnQgZXFlcWVxOiB0cnVlICovXG4gICAgICAgICAgICBkZWxldGUgY2FjaGVbIGlkIF07XG5cbiAgICAgICAgICAgIC8vIFdoZW4gYWxsIGVsc2UgZmFpbHMsIG51bGxcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlWyBpZCBdID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGpRdWVyeS5leHRlbmQoe1xuICAgICAgICBjYWNoZToge30sXG5cbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBlbGVtZW50cyB0aHJvdyB1bmNhdGNoYWJsZSBleGNlcHRpb25zIGlmIHlvdVxuICAgICAgICAvLyBhdHRlbXB0IHRvIGFkZCBleHBhbmRvIHByb3BlcnRpZXMgdG8gdGhlbS5cbiAgICAgICAgbm9EYXRhOiB7XG4gICAgICAgICAgICBcImFwcGxldFwiOiB0cnVlLFxuICAgICAgICAgICAgXCJlbWJlZFwiOiB0cnVlLFxuICAgICAgICAgICAgLy8gQmFuIGFsbCBvYmplY3RzIGV4Y2VwdCBmb3IgRmxhc2ggKHdoaWNoIGhhbmRsZSBleHBhbmRvcylcbiAgICAgICAgICAgIFwib2JqZWN0XCI6IFwiY2xzaWQ6RDI3Q0RCNkUtQUU2RC0xMWNmLTk2QjgtNDQ0NTUzNTQwMDAwXCJcbiAgICAgICAgfSxcblxuICAgICAgICBoYXNEYXRhOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgIGVsZW0gPSBlbGVtLm5vZGVUeXBlID8galF1ZXJ5LmNhY2hlWyBlbGVtW2pRdWVyeS5leHBhbmRvXSBdIDogZWxlbVsgalF1ZXJ5LmV4cGFuZG8gXTtcbiAgICAgICAgICAgIHJldHVybiAhIWVsZW0gJiYgIWlzRW1wdHlEYXRhT2JqZWN0KCBlbGVtICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJuYWxEYXRhKCBlbGVtLCBuYW1lLCBkYXRhICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJuYWxSZW1vdmVEYXRhKCBlbGVtLCBuYW1lICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gRm9yIGludGVybmFsIHVzZSBvbmx5LlxuICAgICAgICBfZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJuYWxEYXRhKCBlbGVtLCBuYW1lLCBkYXRhLCB0cnVlICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgX3JlbW92ZURhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuICAgICAgICAgICAgcmV0dXJuIGludGVybmFsUmVtb3ZlRGF0YSggZWxlbSwgbmFtZSwgdHJ1ZSApO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIEEgbWV0aG9kIGZvciBkZXRlcm1pbmluZyBpZiBhIERPTSBub2RlIGNhbiBoYW5kbGUgdGhlIGRhdGEgZXhwYW5kb1xuICAgICAgICBhY2NlcHREYXRhOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgIC8vIERvIG5vdCBzZXQgZGF0YSBvbiBub24tZWxlbWVudCBiZWNhdXNlIGl0IHdpbGwgbm90IGJlIGNsZWFyZWQgKCM4MzM1KS5cbiAgICAgICAgICAgIGlmICggZWxlbS5ub2RlVHlwZSAmJiBlbGVtLm5vZGVUeXBlICE9PSAxICYmIGVsZW0ubm9kZVR5cGUgIT09IDkgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbm9EYXRhID0gZWxlbS5ub2RlTmFtZSAmJiBqUXVlcnkubm9EYXRhWyBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuICAgICAgICAgICAgLy8gbm9kZXMgYWNjZXB0IGRhdGEgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQ7IHJlamVjdGlvbiBjYW4gYmUgY29uZGl0aW9uYWxcbiAgICAgICAgICAgIHJldHVybiAhbm9EYXRhIHx8IG5vRGF0YSAhPT0gdHJ1ZSAmJiBlbGVtLmdldEF0dHJpYnV0ZShcImNsYXNzaWRcIikgPT09IG5vRGF0YTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgalF1ZXJ5LmZuLmV4dGVuZCh7XG4gICAgICAgIGRhdGE6IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuICAgICAgICAgICAgdmFyIGF0dHJzLCBuYW1lLFxuICAgICAgICAgICAgICAgIGRhdGEgPSBudWxsLFxuICAgICAgICAgICAgICAgIGkgPSAwLFxuICAgICAgICAgICAgICAgIGVsZW0gPSB0aGlzWzBdO1xuXG4gICAgICAgICAgICAvLyBTcGVjaWFsIGV4cGVjdGlvbnMgb2YgLmRhdGEgYmFzaWNhbGx5IHRod2FydCBqUXVlcnkuYWNjZXNzLFxuICAgICAgICAgICAgLy8gc28gaW1wbGVtZW50IHRoZSByZWxldmFudCBiZWhhdmlvciBvdXJzZWx2ZXNcblxuICAgICAgICAgICAgLy8gR2V0cyBhbGwgdmFsdWVzXG4gICAgICAgICAgICBpZiAoIGtleSA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgIGlmICggdGhpcy5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBqUXVlcnkuZGF0YSggZWxlbSApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAhalF1ZXJ5Ll9kYXRhKCBlbGVtLCBcInBhcnNlZEF0dHJzXCIgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJzID0gZWxlbS5hdHRyaWJ1dGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggOyBpIDwgYXR0cnMubGVuZ3RoOyBpKysgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG5hbWUuaW5kZXhPZihcImRhdGEtXCIpID09PSAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZS5zbGljZSg1KSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFBdHRyKCBlbGVtLCBuYW1lLCBkYXRhWyBuYW1lIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkuX2RhdGEoIGVsZW0sIFwicGFyc2VkQXR0cnNcIiwgdHJ1ZSApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNldHMgbXVsdGlwbGUgdmFsdWVzXG4gICAgICAgICAgICBpZiAoIHR5cGVvZiBrZXkgPT09IFwib2JqZWN0XCIgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LmRhdGEoIHRoaXMsIGtleSApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDEgP1xuXG4gICAgICAgICAgICAgICAgLy8gU2V0cyBvbmUgdmFsdWVcbiAgICAgICAgICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS5kYXRhKCB0aGlzLCBrZXksIHZhbHVlICk7XG4gICAgICAgICAgICAgICAgfSkgOlxuXG4gICAgICAgICAgICAgICAgLy8gR2V0cyBvbmUgdmFsdWVcbiAgICAgICAgICAgICAgICAvLyBUcnkgdG8gZmV0Y2ggYW55IGludGVybmFsbHkgc3RvcmVkIGRhdGEgZmlyc3RcbiAgICAgICAgICAgICAgICBlbGVtID8gZGF0YUF0dHIoIGVsZW0sIGtleSwgalF1ZXJ5LmRhdGEoIGVsZW0sIGtleSApICkgOiBudWxsO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZURhdGE6IGZ1bmN0aW9uKCBrZXkgKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGpRdWVyeS5yZW1vdmVEYXRhKCB0aGlzLCBrZXkgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBkYXRhQXR0ciggZWxlbSwga2V5LCBkYXRhICkge1xuICAgICAgICAvLyBJZiBub3RoaW5nIHdhcyBmb3VuZCBpbnRlcm5hbGx5LCB0cnkgdG8gZmV0Y2ggYW55XG4gICAgICAgIC8vIGRhdGEgZnJvbSB0aGUgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZVxuICAgICAgICBpZiAoIGRhdGEgPT09IHVuZGVmaW5lZCAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXG4gICAgICAgICAgICB2YXIgbmFtZSA9IFwiZGF0YS1cIiArIGtleS5yZXBsYWNlKCBybXVsdGlEYXNoLCBcIi0kMVwiICkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgZGF0YSA9IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICk7XG5cbiAgICAgICAgICAgIGlmICggdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGRhdGEgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID09PSBcImZhbHNlXCIgPyBmYWxzZSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9PT0gXCJudWxsXCIgPyBudWxsIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBjb252ZXJ0IHRvIGEgbnVtYmVyIGlmIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgK2RhdGEgKyBcIlwiID09PSBkYXRhID8gK2RhdGEgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmJyYWNlLnRlc3QoIGRhdGEgKSA/IGpRdWVyeS5wYXJzZUpTT04oIGRhdGEgKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoKCBlICkge31cblxuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBzZXQgdGhlIGRhdGEgc28gaXQgaXNuJ3QgY2hhbmdlZCBsYXRlclxuICAgICAgICAgICAgICAgIGpRdWVyeS5kYXRhKCBlbGVtLCBrZXksIGRhdGEgKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4vLyBjaGVja3MgYSBjYWNoZSBvYmplY3QgZm9yIGVtcHRpbmVzc1xuICAgIGZ1bmN0aW9uIGlzRW1wdHlEYXRhT2JqZWN0KCBvYmogKSB7XG4gICAgICAgIHZhciBuYW1lO1xuICAgICAgICBmb3IgKCBuYW1lIGluIG9iaiApIHtcblxuICAgICAgICAgICAgLy8gaWYgdGhlIHB1YmxpYyBkYXRhIG9iamVjdCBpcyBlbXB0eSwgdGhlIHByaXZhdGUgaXMgc3RpbGwgZW1wdHlcbiAgICAgICAgICAgIGlmICggbmFtZSA9PT0gXCJkYXRhXCIgJiYgalF1ZXJ5LmlzRW1wdHlPYmplY3QoIG9ialtuYW1lXSApICkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCBuYW1lICE9PSBcInRvSlNPTlwiICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBqUXVlcnkuZXh0ZW5kKHtcbiAgICAgICAgcXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBkYXRhICkge1xuICAgICAgICAgICAgdmFyIHF1ZXVlO1xuXG4gICAgICAgICAgICBpZiAoIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgdHlwZSA9ICggdHlwZSB8fCBcImZ4XCIgKSArIFwicXVldWVcIjtcbiAgICAgICAgICAgICAgICBxdWV1ZSA9IGpRdWVyeS5fZGF0YSggZWxlbSwgdHlwZSApO1xuXG4gICAgICAgICAgICAgICAgLy8gU3BlZWQgdXAgZGVxdWV1ZSBieSBnZXR0aW5nIG91dCBxdWlja2x5IGlmIHRoaXMgaXMganVzdCBhIGxvb2t1cFxuICAgICAgICAgICAgICAgIGlmICggZGF0YSApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhcXVldWUgfHwgalF1ZXJ5LmlzQXJyYXkoZGF0YSkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZSA9IGpRdWVyeS5fZGF0YSggZWxlbSwgdHlwZSwgalF1ZXJ5Lm1ha2VBcnJheShkYXRhKSApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaCggZGF0YSApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBxdWV1ZSB8fCBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBkZXF1ZXVlOiBmdW5jdGlvbiggZWxlbSwgdHlwZSApIHtcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuICAgICAgICAgICAgdmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCBlbGVtLCB0eXBlICksXG4gICAgICAgICAgICAgICAgc3RhcnRMZW5ndGggPSBxdWV1ZS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgZm4gPSBxdWV1ZS5zaGlmdCgpLFxuICAgICAgICAgICAgICAgIGhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCB0eXBlICksXG4gICAgICAgICAgICAgICAgbmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZGVxdWV1ZSggZWxlbSwgdHlwZSApO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBmeCBxdWV1ZSBpcyBkZXF1ZXVlZCwgYWx3YXlzIHJlbW92ZSB0aGUgcHJvZ3Jlc3Mgc2VudGluZWxcbiAgICAgICAgICAgIGlmICggZm4gPT09IFwiaW5wcm9ncmVzc1wiICkge1xuICAgICAgICAgICAgICAgIGZuID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgICAgICBzdGFydExlbmd0aC0tO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIGZuICkge1xuXG4gICAgICAgICAgICAgICAgLy8gQWRkIGEgcHJvZ3Jlc3Mgc2VudGluZWwgdG8gcHJldmVudCB0aGUgZnggcXVldWUgZnJvbSBiZWluZ1xuICAgICAgICAgICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgZGVxdWV1ZWRcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGUgPT09IFwiZnhcIiApIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUudW5zaGlmdCggXCJpbnByb2dyZXNzXCIgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBjbGVhciB1cCB0aGUgbGFzdCBxdWV1ZSBzdG9wIGZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgZGVsZXRlIGhvb2tzLnN0b3A7XG4gICAgICAgICAgICAgICAgZm4uY2FsbCggZWxlbSwgbmV4dCwgaG9va3MgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCAhc3RhcnRMZW5ndGggJiYgaG9va3MgKSB7XG4gICAgICAgICAgICAgICAgaG9va3MuZW1wdHkuZmlyZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIG5vdCBpbnRlbmRlZCBmb3IgcHVibGljIGNvbnN1bXB0aW9uIC0gZ2VuZXJhdGVzIGEgcXVldWVIb29rcyBvYmplY3QsIG9yIHJldHVybnMgdGhlIGN1cnJlbnQgb25lXG4gICAgICAgIF9xdWV1ZUhvb2tzOiBmdW5jdGlvbiggZWxlbSwgdHlwZSApIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSB0eXBlICsgXCJxdWV1ZUhvb2tzXCI7XG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5Ll9kYXRhKCBlbGVtLCBrZXkgKSB8fCBqUXVlcnkuX2RhdGEoIGVsZW0sIGtleSwge1xuICAgICAgICAgICAgICAgICAgICBlbXB0eTogalF1ZXJ5LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5fcmVtb3ZlRGF0YSggZWxlbSwgdHlwZSArIFwicXVldWVcIiApO1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5Ll9yZW1vdmVEYXRhKCBlbGVtLCBrZXkgKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgalF1ZXJ5LmZuLmV4dGVuZCh7XG4gICAgICAgIHF1ZXVlOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcbiAgICAgICAgICAgIHZhciBzZXR0ZXIgPSAyO1xuXG4gICAgICAgICAgICBpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSB0eXBlO1xuICAgICAgICAgICAgICAgIHR5cGUgPSBcImZ4XCI7XG4gICAgICAgICAgICAgICAgc2V0dGVyLS07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggYXJndW1lbnRzLmxlbmd0aCA8IHNldHRlciApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4galF1ZXJ5LnF1ZXVlKCB0aGlzWzBdLCB0eXBlICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBkYXRhID09PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgIHRoaXMgOlxuICAgICAgICAgICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBkYXRhICk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gZW5zdXJlIGEgaG9va3MgZm9yIHRoaXMgcXVldWVcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5Ll9xdWV1ZUhvb2tzKCB0aGlzLCB0eXBlICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0eXBlID09PSBcImZ4XCIgJiYgcXVldWVbMF0gIT09IFwiaW5wcm9ncmVzc1wiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZXF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICAvLyBCYXNlZCBvZmYgb2YgdGhlIHBsdWdpbiBieSBDbGludCBIZWxmZXJzLCB3aXRoIHBlcm1pc3Npb24uXG4gICAgICAgIC8vIGh0dHA6Ly9ibGluZHNpZ25hbHMuY29tL2luZGV4LnBocC8yMDA5LzA3L2pxdWVyeS1kZWxheS9cbiAgICAgICAgZGVsYXk6IGZ1bmN0aW9uKCB0aW1lLCB0eXBlICkge1xuICAgICAgICAgICAgdGltZSA9IGpRdWVyeS5meCA/IGpRdWVyeS5meC5zcGVlZHNbIHRpbWUgXSB8fCB0aW1lIDogdGltZTtcbiAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUoIHR5cGUsIGZ1bmN0aW9uKCBuZXh0LCBob29rcyApIHtcbiAgICAgICAgICAgICAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoIG5leHQsIHRpbWUgKTtcbiAgICAgICAgICAgICAgICBob29rcy5zdG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCggdGltZW91dCApO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgY2xlYXJRdWV1ZTogZnVuY3Rpb24oIHR5cGUgKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSB8fCBcImZ4XCIsIFtdICk7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIEdldCBhIHByb21pc2UgcmVzb2x2ZWQgd2hlbiBxdWV1ZXMgb2YgYSBjZXJ0YWluIHR5cGVcbiAgICAgICAgLy8gYXJlIGVtcHRpZWQgKGZ4IGlzIHRoZSB0eXBlIGJ5IGRlZmF1bHQpXG4gICAgICAgIHByb21pc2U6IGZ1bmN0aW9uKCB0eXBlLCBvYmogKSB7XG4gICAgICAgICAgICB2YXIgdG1wLFxuICAgICAgICAgICAgICAgIGNvdW50ID0gMSxcbiAgICAgICAgICAgICAgICBkZWZlciA9IGpRdWVyeS5EZWZlcnJlZCgpLFxuICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gdGhpcyxcbiAgICAgICAgICAgICAgICBpID0gdGhpcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoICEoIC0tY291bnQgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmVXaXRoKCBlbGVtZW50cywgWyBlbGVtZW50cyBdICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuICAgICAgICAgICAgICAgIG9iaiA9IHR5cGU7XG4gICAgICAgICAgICAgICAgdHlwZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuICAgICAgICAgICAgd2hpbGUoIGktLSApIHtcbiAgICAgICAgICAgICAgICB0bXAgPSBqUXVlcnkuX2RhdGEoIGVsZW1lbnRzWyBpIF0sIHR5cGUgKyBcInF1ZXVlSG9va3NcIiApO1xuICAgICAgICAgICAgICAgIGlmICggdG1wICYmIHRtcC5lbXB0eSApIHtcbiAgICAgICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgdG1wLmVtcHR5LmFkZCggcmVzb2x2ZSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlKCBvYmogKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBub2RlSG9vaywgYm9vbEhvb2ssXG4gICAgICAgIHJjbGFzcyA9IC9bXFx0XFxyXFxuXFxmXS9nLFxuICAgICAgICBycmV0dXJuID0gL1xcci9nLFxuICAgICAgICByZm9jdXNhYmxlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdCkkL2ksXG4gICAgICAgIHJjbGlja2FibGUgPSAvXig/OmF8YXJlYSkkL2ksXG4gICAgICAgIHJ1c2VEZWZhdWx0ID0gL14oPzpjaGVja2VkfHNlbGVjdGVkKSQvaSxcbiAgICAgICAgZ2V0U2V0QXR0cmlidXRlID0galF1ZXJ5LnN1cHBvcnQuZ2V0U2V0QXR0cmlidXRlLFxuICAgICAgICBnZXRTZXRJbnB1dCA9IGpRdWVyeS5zdXBwb3J0LmlucHV0O1xuXG4gICAgalF1ZXJ5LmZuLmV4dGVuZCh7XG4gICAgICAgIGF0dHI6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcbiAgICAgICAgICAgIHJldHVybiBqUXVlcnkuYWNjZXNzKCB0aGlzLCBqUXVlcnkuYXR0ciwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlQXR0cjogZnVuY3Rpb24oIG5hbWUgKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGpRdWVyeS5yZW1vdmVBdHRyKCB0aGlzLCBuYW1lICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBwcm9wOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5LmFjY2VzcyggdGhpcywgalF1ZXJ5LnByb3AsIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZVByb3A6IGZ1bmN0aW9uKCBuYW1lICkge1xuICAgICAgICAgICAgbmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gdHJ5L2NhdGNoIGhhbmRsZXMgY2FzZXMgd2hlcmUgSUUgYmFsa3MgKHN1Y2ggYXMgcmVtb3ZpbmcgYSBwcm9wZXJ0eSBvbiB3aW5kb3cpXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc1sgbmFtZSBdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpc1sgbmFtZSBdO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2goIGUgKSB7fVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWRkQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcbiAgICAgICAgICAgIHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGNsYXp6LCBqLFxuICAgICAgICAgICAgICAgIGkgPSAwLFxuICAgICAgICAgICAgICAgIGxlbiA9IHRoaXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHByb2NlZWQgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWU7XG5cbiAgICAgICAgICAgIGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaiApIHtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCB0aGlzICkuYWRkQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIHRoaXMuY2xhc3NOYW1lICkgKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCBwcm9jZWVkICkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBkaXNqdW5jdGlvbiBoZXJlIGlzIGZvciBiZXR0ZXIgY29tcHJlc3NpYmlsaXR5IChzZWUgcmVtb3ZlQ2xhc3MpXG4gICAgICAgICAgICAgICAgY2xhc3NlcyA9ICggdmFsdWUgfHwgXCJcIiApLm1hdGNoKCBjb3JlX3Jub3R3aGl0ZSApIHx8IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0gPSB0aGlzWyBpIF07XG4gICAgICAgICAgICAgICAgICAgIGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKCBlbGVtLmNsYXNzTmFtZSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggXCIgXCIgKyBlbGVtLmNsYXNzTmFtZSArIFwiIFwiICkucmVwbGFjZSggcmNsYXNzLCBcIiBcIiApIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIgXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjdXIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICggKGNsYXp6ID0gY2xhc3Nlc1tqKytdKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGN1ci5pbmRleE9mKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIgKSA8IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ciArPSBjbGF6eiArIFwiIFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NOYW1lID0galF1ZXJ5LnRyaW0oIGN1ciApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUgKSB7XG4gICAgICAgICAgICB2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjbGF6eiwgaixcbiAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICBsZW4gPSB0aGlzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBwcm9jZWVkID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMCB8fCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWU7XG5cbiAgICAgICAgICAgIGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaiApIHtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCB0aGlzICkucmVtb3ZlQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIHRoaXMuY2xhc3NOYW1lICkgKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggcHJvY2VlZCApIHtcbiAgICAgICAgICAgICAgICBjbGFzc2VzID0gKCB2YWx1ZSB8fCBcIlwiICkubWF0Y2goIGNvcmVfcm5vdHdoaXRlICkgfHwgW107XG5cbiAgICAgICAgICAgICAgICBmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbSA9IHRoaXNbIGkgXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBleHByZXNzaW9uIGlzIGhlcmUgZm9yIGJldHRlciBjb21wcmVzc2liaWxpdHkgKHNlZSBhZGRDbGFzcylcbiAgICAgICAgICAgICAgICAgICAgY3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAoIGVsZW0uY2xhc3NOYW1lID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCBcIiBcIiArIGVsZW0uY2xhc3NOYW1lICsgXCIgXCIgKS5yZXBsYWNlKCByY2xhc3MsIFwiIFwiICkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggY3VyICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIChjbGF6eiA9IGNsYXNzZXNbaisrXSkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlICphbGwqIGluc3RhbmNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICggY3VyLmluZGV4T2YoIFwiIFwiICsgY2xhenogKyBcIiBcIiApID49IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1ciA9IGN1ci5yZXBsYWNlKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIsIFwiIFwiICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5jbGFzc05hbWUgPSB2YWx1ZSA/IGpRdWVyeS50cmltKCBjdXIgKSA6IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRvZ2dsZUNsYXNzOiBmdW5jdGlvbiggdmFsdWUsIHN0YXRlVmFsICkge1xuICAgICAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cbiAgICAgICAgICAgIGlmICggdHlwZW9mIHN0YXRlVmFsID09PSBcImJvb2xlYW5cIiAmJiB0eXBlID09PSBcInN0cmluZ1wiICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZVZhbCA/IHRoaXMuYWRkQ2xhc3MoIHZhbHVlICkgOiB0aGlzLnJlbW92ZUNsYXNzKCB2YWx1ZSApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSggdGhpcyApLnRvZ2dsZUNsYXNzKCB2YWx1ZS5jYWxsKHRoaXMsIGksIHRoaXMuY2xhc3NOYW1lLCBzdGF0ZVZhbCksIHN0YXRlVmFsICk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlID09PSBcInN0cmluZ1wiICkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0b2dnbGUgaW5kaXZpZHVhbCBjbGFzcyBuYW1lc1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmID0galF1ZXJ5KCB0aGlzICksXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWVzID0gdmFsdWUubWF0Y2goIGNvcmVfcm5vdHdoaXRlICkgfHwgW107XG5cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCAoY2xhc3NOYW1lID0gY2xhc3NOYW1lc1sgaSsrIF0pICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgZWFjaCBjbGFzc05hbWUgZ2l2ZW4sIHNwYWNlIHNlcGFyYXRlZCBsaXN0XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNlbGYuaGFzQ2xhc3MoIGNsYXNzTmFtZSApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucmVtb3ZlQ2xhc3MoIGNsYXNzTmFtZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFkZENsYXNzKCBjbGFzc05hbWUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRvZ2dsZSB3aG9sZSBjbGFzcyBuYW1lXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggdHlwZSA9PT0gY29yZV9zdHJ1bmRlZmluZWQgfHwgdHlwZSA9PT0gXCJib29sZWFuXCIgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5jbGFzc05hbWUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdG9yZSBjbGFzc05hbWUgaWYgc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkuX2RhdGEoIHRoaXMsIFwiX19jbGFzc05hbWVfX1wiLCB0aGlzLmNsYXNzTmFtZSApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaGFzIGEgY2xhc3MgbmFtZSBvciBpZiB3ZSdyZSBwYXNzZWQgXCJmYWxzZVwiLFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGVuIHJlbW92ZSB0aGUgd2hvbGUgY2xhc3NuYW1lIChpZiB0aGVyZSB3YXMgb25lLCB0aGUgYWJvdmUgc2F2ZWQgaXQpLlxuICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgYnJpbmcgYmFjayB3aGF0ZXZlciB3YXMgcHJldmlvdXNseSBzYXZlZCAoaWYgYW55dGhpbmcpLFxuICAgICAgICAgICAgICAgICAgICAvLyBmYWxsaW5nIGJhY2sgdG8gdGhlIGVtcHR5IHN0cmluZyBpZiBub3RoaW5nIHdhcyBzdG9yZWQuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lID0gdGhpcy5jbGFzc05hbWUgfHwgdmFsdWUgPT09IGZhbHNlID8gXCJcIiA6IGpRdWVyeS5fZGF0YSggdGhpcywgXCJfX2NsYXNzTmFtZV9fXCIgKSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhhc0NsYXNzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG4gICAgICAgICAgICB2YXIgY2xhc3NOYW1lID0gXCIgXCIgKyBzZWxlY3RvciArIFwiIFwiLFxuICAgICAgICAgICAgICAgIGkgPSAwLFxuICAgICAgICAgICAgICAgIGwgPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAoIDsgaSA8IGw7IGkrKyApIHtcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXNbaV0ubm9kZVR5cGUgPT09IDEgJiYgKFwiIFwiICsgdGhpc1tpXS5jbGFzc05hbWUgKyBcIiBcIikucmVwbGFjZShyY2xhc3MsIFwiIFwiKS5pbmRleE9mKCBjbGFzc05hbWUgKSA+PSAwICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcblxuICAgICAgICB2YWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcbiAgICAgICAgICAgIHZhciByZXQsIGhvb2tzLCBpc0Z1bmN0aW9uLFxuICAgICAgICAgICAgICAgIGVsZW0gPSB0aGlzWzBdO1xuXG4gICAgICAgICAgICBpZiAoICFhcmd1bWVudHMubGVuZ3RoICkge1xuICAgICAgICAgICAgICAgIGlmICggZWxlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgaG9va3MgPSBqUXVlcnkudmFsSG9va3NbIGVsZW0udHlwZSBdIHx8IGpRdWVyeS52YWxIb29rc1sgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmIChyZXQgPSBob29rcy5nZXQoIGVsZW0sIFwidmFsdWVcIiApKSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldCA9IGVsZW0udmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiByZXQgPT09IFwic3RyaW5nXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIG1vc3QgY29tbW9uIHN0cmluZyBjYXNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LnJlcGxhY2UocnJldHVybiwgXCJcIikgOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlIGNhc2VzIHdoZXJlIHZhbHVlIGlzIG51bGwvdW5kZWYgb3IgbnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQgPT0gbnVsbCA/IFwiXCIgOiByZXQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbDtcblxuICAgICAgICAgICAgICAgIGlmICggdGhpcy5ub2RlVHlwZSAhPT0gMSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICggaXNGdW5jdGlvbiApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gdmFsdWUuY2FsbCggdGhpcywgaSwgalF1ZXJ5KCB0aGlzICkudmFsKCkgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YWwgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBUcmVhdCBudWxsL3VuZGVmaW5lZCBhcyBcIlwiOyBjb252ZXJ0IG51bWJlcnMgdG8gc3RyaW5nXG4gICAgICAgICAgICAgICAgaWYgKCB2YWwgPT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gXCJcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICkge1xuICAgICAgICAgICAgICAgICAgICB2YWwgKz0gXCJcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBqUXVlcnkuaXNBcnJheSggdmFsICkgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbCA9IGpRdWVyeS5tYXAodmFsLCBmdW5jdGlvbiAoIHZhbHVlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWUgKyBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBob29rcyA9IGpRdWVyeS52YWxIb29rc1sgdGhpcy50eXBlIF0gfHwgalF1ZXJ5LnZhbEhvb2tzWyB0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuICAgICAgICAgICAgICAgIC8vIElmIHNldCByZXR1cm5zIHVuZGVmaW5lZCwgZmFsbCBiYWNrIHRvIG5vcm1hbCBzZXR0aW5nXG4gICAgICAgICAgICAgICAgaWYgKCAhaG9va3MgfHwgIShcInNldFwiIGluIGhvb2tzKSB8fCBob29rcy5zZXQoIHRoaXMsIHZhbCwgXCJ2YWx1ZVwiICkgPT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgalF1ZXJ5LmV4dGVuZCh7XG4gICAgICAgIHZhbEhvb2tzOiB7XG4gICAgICAgICAgICBvcHRpb246IHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBVc2UgcHJvcGVyIGF0dHJpYnV0ZSByZXRyaWV2YWwoIzY5MzIsICMxMjA3MilcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIFwidmFsdWVcIiApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsICE9IG51bGwgP1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0udGV4dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlLCBvcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zID0gZWxlbS5vcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBlbGVtLnNlbGVjdGVkSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmUgPSBlbGVtLnR5cGUgPT09IFwic2VsZWN0LW9uZVwiIHx8IGluZGV4IDwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcyA9IG9uZSA/IG51bGwgOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heCA9IG9uZSA/IGluZGV4ICsgMSA6IG9wdGlvbnMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGluZGV4IDwgMCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmUgPyBpbmRleCA6IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gTG9vcCB0aHJvdWdoIGFsbCB0aGUgc2VsZWN0ZWQgb3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICBmb3IgKCA7IGkgPCBtYXg7IGkrKyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbiA9IG9wdGlvbnNbIGkgXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2xkSUUgZG9lc24ndCB1cGRhdGUgc2VsZWN0ZWQgYWZ0ZXIgZm9ybSByZXNldCAoIzI1NTEpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICggb3B0aW9uLnNlbGVjdGVkIHx8IGkgPT09IGluZGV4ICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCByZXR1cm4gb3B0aW9ucyB0aGF0IGFyZSBkaXNhYmxlZCBvciBpbiBhIGRpc2FibGVkIG9wdGdyb3VwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCBqUXVlcnkuc3VwcG9ydC5vcHREaXNhYmxlZCA/ICFvcHRpb24uZGlzYWJsZWQgOiBvcHRpb24uZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIikgPT09IG51bGwgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICggIW9wdGlvbi5wYXJlbnROb2RlLmRpc2FibGVkIHx8ICFqUXVlcnkubm9kZU5hbWUoIG9wdGlvbi5wYXJlbnROb2RlLCBcIm9wdGdyb3VwXCIgKSApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBzcGVjaWZpYyB2YWx1ZSBmb3IgdGhlIG9wdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0galF1ZXJ5KCBvcHRpb24gKS52YWwoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IG5lZWQgYW4gYXJyYXkgZm9yIG9uZSBzZWxlY3RzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBvbmUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNdWx0aS1TZWxlY3RzIHJldHVybiBhbiBhcnJheVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKCB2YWx1ZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25TZXQsIG9wdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgPSBqUXVlcnkubWFrZUFycmF5KCB2YWx1ZSApLFxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IG9wdGlvbnMubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICggaS0tICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uID0gb3B0aW9uc1sgaSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAob3B0aW9uLnNlbGVjdGVkID0galF1ZXJ5LmluQXJyYXkoIGpRdWVyeShvcHRpb24pLnZhbCgpLCB2YWx1ZXMgKSA+PSAwKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25TZXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yY2UgYnJvd3NlcnMgdG8gYmVoYXZlIGNvbnNpc3RlbnRseSB3aGVuIG5vbi1tYXRjaGluZyB2YWx1ZSBpcyBzZXRcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhb3B0aW9uU2V0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5zZWxlY3RlZEluZGV4ID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgYXR0cjogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuICAgICAgICAgICAgdmFyIGhvb2tzLCByZXQsXG4gICAgICAgICAgICAgICAgblR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG4gICAgICAgICAgICAvLyBkb24ndCBnZXQvc2V0IGF0dHJpYnV0ZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG4gICAgICAgICAgICBpZiAoICFlbGVtIHx8IG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gcHJvcCB3aGVuIGF0dHJpYnV0ZXMgYXJlIG5vdCBzdXBwb3J0ZWRcbiAgICAgICAgICAgIGlmICggdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlID09PSBjb3JlX3N0cnVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4galF1ZXJ5LnByb3AoIGVsZW0sIG5hbWUsIHZhbHVlICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFsbCBhdHRyaWJ1dGVzIGFyZSBsb3dlcmNhc2VcbiAgICAgICAgICAgIC8vIEdyYWIgbmVjZXNzYXJ5IGhvb2sgaWYgb25lIGlzIGRlZmluZWRcbiAgICAgICAgICAgIGlmICggblR5cGUgIT09IDEgfHwgIWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkge1xuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgaG9va3MgPSBqUXVlcnkuYXR0ckhvb2tzWyBuYW1lIF0gfHxcbiAgICAgICAgICAgICAgICAgICAgKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnRlc3QoIG5hbWUgKSA/IGJvb2xIb29rIDogbm9kZUhvb2sgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXG4gICAgICAgICAgICAgICAgaWYgKCB2YWx1ZSA9PT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGhvb2tzICYmIFwic2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSkgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCB2YWx1ZSArIFwiXCIgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSBlbHNlIGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkpICE9PSBudWxsICkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgbmFtZSApO1xuXG4gICAgICAgICAgICAgICAgLy8gTm9uLWV4aXN0ZW50IGF0dHJpYnV0ZXMgcmV0dXJuIG51bGwsIHdlIG5vcm1hbGl6ZSB0byB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0ID09IG51bGwgP1xuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWQgOlxuICAgICAgICAgICAgICAgICAgICByZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlQXR0cjogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuICAgICAgICAgICAgdmFyIG5hbWUsIHByb3BOYW1lLFxuICAgICAgICAgICAgICAgIGkgPSAwLFxuICAgICAgICAgICAgICAgIGF0dHJOYW1lcyA9IHZhbHVlICYmIHZhbHVlLm1hdGNoKCBjb3JlX3Jub3R3aGl0ZSApO1xuXG4gICAgICAgICAgICBpZiAoIGF0dHJOYW1lcyAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuICAgICAgICAgICAgICAgIHdoaWxlICggKG5hbWUgPSBhdHRyTmFtZXNbaSsrXSkgKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BOYW1lID0galF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEJvb2xlYW4gYXR0cmlidXRlcyBnZXQgc3BlY2lhbCB0cmVhdG1lbnQgKCMxMDg3MClcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnRlc3QoIG5hbWUgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBjb3JyZXNwb25kaW5nIHByb3BlcnR5IHRvIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGdldFNldElucHV0ICYmIGdldFNldEF0dHJpYnV0ZSB8fCAhcnVzZURlZmF1bHQudGVzdCggbmFtZSApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1bIHByb3BOYW1lIF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdXBwb3J0OiBJRTw5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxzbyBjbGVhciBkZWZhdWx0Q2hlY2tlZC9kZWZhdWx0U2VsZWN0ZWQgKGlmIGFwcHJvcHJpYXRlKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtWyBqUXVlcnkuY2FtZWxDYXNlKCBcImRlZmF1bHQtXCIgKyBuYW1lICkgXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1bIHByb3BOYW1lIF0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VlICM5Njk5IGZvciBleHBsYW5hdGlvbiBvZiB0aGlzIGFwcHJvYWNoIChzZXR0aW5nIGZpcnN0LCB0aGVuIHJlbW92YWwpXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkuYXR0ciggZWxlbSwgbmFtZSwgXCJcIiApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIGdldFNldEF0dHJpYnV0ZSA/IG5hbWUgOiBwcm9wTmFtZSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBhdHRySG9va3M6IHtcbiAgICAgICAgICAgIHR5cGU6IHtcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhalF1ZXJ5LnN1cHBvcnQucmFkaW9WYWx1ZSAmJiB2YWx1ZSA9PT0gXCJyYWRpb1wiICYmIGpRdWVyeS5ub2RlTmFtZShlbGVtLCBcImlucHV0XCIpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0dGluZyB0aGUgdHlwZSBvbiBhIHJhZGlvIGJ1dHRvbiBhZnRlciB0aGUgdmFsdWUgcmVzZXRzIHRoZSB2YWx1ZSBpbiBJRTYtOVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgdmFsdWUgdG8gZGVmYXVsdCBpbiBjYXNlIHR5cGUgaXMgc2V0IGFmdGVyIHZhbHVlIGR1cmluZyBjcmVhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IGVsZW0udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIHZhbHVlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHZhbCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnZhbHVlID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHByb3BGaXg6IHtcbiAgICAgICAgICAgIFwiZm9yXCI6IFwiaHRtbEZvclwiLFxuICAgICAgICAgICAgXCJjbGFzc1wiOiBcImNsYXNzTmFtZVwiXG4gICAgICAgIH0sXG5cbiAgICAgICAgcHJvcDogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuICAgICAgICAgICAgdmFyIHJldCwgaG9va3MsIG5vdHhtbCxcbiAgICAgICAgICAgICAgICBuVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cbiAgICAgICAgICAgIC8vIGRvbid0IGdldC9zZXQgcHJvcGVydGllcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXNcbiAgICAgICAgICAgIGlmICggIWVsZW0gfHwgblR5cGUgPT09IDMgfHwgblR5cGUgPT09IDggfHwgblR5cGUgPT09IDIgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBub3R4bWwgPSBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICk7XG5cbiAgICAgICAgICAgIGlmICggbm90eG1sICkge1xuICAgICAgICAgICAgICAgIC8vIEZpeCBuYW1lIGFuZCBhdHRhY2ggaG9va3NcbiAgICAgICAgICAgICAgICBuYW1lID0galF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lO1xuICAgICAgICAgICAgICAgIGhvb2tzID0galF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhvb2tzICYmIFwic2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSkgIT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgICAgIHJldCA6XG4gICAgICAgICAgICAgICAgICAgICggZWxlbVsgbmFtZSBdID0gdmFsdWUgKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkpICE9PSBudWxsID9cbiAgICAgICAgICAgICAgICAgICAgcmV0IDpcbiAgICAgICAgICAgICAgICAgICAgZWxlbVsgbmFtZSBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHByb3BIb29rczoge1xuICAgICAgICAgICAgdGFiSW5kZXg6IHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBlbGVtLnRhYkluZGV4IGRvZXNuJ3QgYWx3YXlzIHJldHVybiB0aGUgY29ycmVjdCB2YWx1ZSB3aGVuIGl0IGhhc24ndCBiZWVuIGV4cGxpY2l0bHkgc2V0XG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9mbHVpZHByb2plY3Qub3JnL2Jsb2cvMjAwOC8wMS8wOS9nZXR0aW5nLXNldHRpbmctYW5kLXJlbW92aW5nLXRhYmluZGV4LXZhbHVlcy13aXRoLWphdmFzY3JpcHQvXG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSBwcm9wZXIgYXR0cmlidXRlIHJldHJpZXZhbCgjMTIwNzIpXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWJpbmRleCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIFwidGFiaW5kZXhcIiApO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWJpbmRleCA/XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludCggdGFiaW5kZXgsIDEwICkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmZvY3VzYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgfHwgcmNsaWNrYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgJiYgZWxlbS5ocmVmID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAwIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuLy8gSG9va3MgZm9yIGJvb2xlYW4gYXR0cmlidXRlc1xuICAgIGJvb2xIb29rID0ge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgbmFtZSApIHtcbiAgICAgICAgICAgIGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBib29sZWFuIGF0dHJpYnV0ZXMgd2hlbiBzZXQgdG8gZmFsc2VcbiAgICAgICAgICAgICAgICBqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuICAgICAgICAgICAgfSBlbHNlIGlmICggZ2V0U2V0SW5wdXQgJiYgZ2V0U2V0QXR0cmlidXRlIHx8ICFydXNlRGVmYXVsdC50ZXN0KCBuYW1lICkgKSB7XG4gICAgICAgICAgICAgICAgLy8gSUU8OCBuZWVkcyB0aGUgKnByb3BlcnR5KiBuYW1lXG4gICAgICAgICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoICFnZXRTZXRBdHRyaWJ1dGUgJiYgalF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lLCBuYW1lICk7XG5cbiAgICAgICAgICAgICAgICAvLyBVc2UgZGVmYXVsdENoZWNrZWQgYW5kIGRlZmF1bHRTZWxlY3RlZCBmb3Igb2xkSUVcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbVsgalF1ZXJ5LmNhbWVsQ2FzZSggXCJkZWZhdWx0LVwiICsgbmFtZSApIF0gPSBlbGVtWyBuYW1lIF0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbmFtZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgalF1ZXJ5LmVhY2goIGpRdWVyeS5leHByLm1hdGNoLmJvb2wuc291cmNlLm1hdGNoKCAvXFx3Ky9nICksIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuICAgICAgICB2YXIgZ2V0dGVyID0galF1ZXJ5LmV4cHIuYXR0ckhhbmRsZVsgbmFtZSBdIHx8IGpRdWVyeS5maW5kLmF0dHI7XG5cbiAgICAgICAgalF1ZXJ5LmV4cHIuYXR0ckhhbmRsZVsgbmFtZSBdID0gZ2V0U2V0SW5wdXQgJiYgZ2V0U2V0QXR0cmlidXRlIHx8ICFydXNlRGVmYXVsdC50ZXN0KCBuYW1lICkgP1xuICAgICAgICAgICAgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuICAgICAgICAgICAgICAgIHZhciBmbiA9IGpRdWVyeS5leHByLmF0dHJIYW5kbGVbIG5hbWUgXSxcbiAgICAgICAgICAgICAgICAgICAgcmV0ID0gaXNYTUwgP1xuICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qIGpzaGludCBlcWVxZXE6IGZhbHNlICovXG4gICAgICAgICAgICAgICAgICAgICAgICAoalF1ZXJ5LmV4cHIuYXR0ckhhbmRsZVsgbmFtZSBdID0gdW5kZWZpbmVkKSAhPVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0dGVyKCBlbGVtLCBuYW1lLCBpc1hNTCApID9cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUudG9Mb3dlckNhc2UoKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbDtcbiAgICAgICAgICAgICAgICBqUXVlcnkuZXhwci5hdHRySGFuZGxlWyBuYW1lIF0gPSBmbjtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgfSA6XG4gICAgICAgICAgICBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzWE1MID9cbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkIDpcbiAgICAgICAgICAgICAgICAgICAgZWxlbVsgalF1ZXJ5LmNhbWVsQ2FzZSggXCJkZWZhdWx0LVwiICsgbmFtZSApIF0gP1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZS50b0xvd2VyQ2FzZSgpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGw7XG4gICAgICAgICAgICB9O1xuICAgIH0pO1xuXG4vLyBmaXggb2xkSUUgYXR0cm9wZXJ0aWVzXG4gICAgaWYgKCAhZ2V0U2V0SW5wdXQgfHwgIWdldFNldEF0dHJpYnV0ZSApIHtcbiAgICAgICAgalF1ZXJ5LmF0dHJIb29rcy52YWx1ZSA9IHtcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBuYW1lICkge1xuICAgICAgICAgICAgICAgIGlmICggalF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcImlucHV0XCIgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9lcyBub3QgcmV0dXJuIHNvIHRoYXQgc2V0QXR0cmlidXRlIGlzIGFsc28gdXNlZFxuICAgICAgICAgICAgICAgICAgICBlbGVtLmRlZmF1bHRWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSBub2RlSG9vayBpZiBkZWZpbmVkICgjMTk1NCk7IG90aGVyd2lzZSBzZXRBdHRyaWJ1dGUgaXMgZmluZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZUhvb2sgJiYgbm9kZUhvb2suc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbi8vIElFNi83IGRvIG5vdCBzdXBwb3J0IGdldHRpbmcvc2V0dGluZyBzb21lIGF0dHJpYnV0ZXMgd2l0aCBnZXQvc2V0QXR0cmlidXRlXG4gICAgaWYgKCAhZ2V0U2V0QXR0cmlidXRlICkge1xuXG4gICAgICAgIC8vIFVzZSB0aGlzIGZvciBhbnkgYXR0cmlidXRlIGluIElFNi83XG4gICAgICAgIC8vIFRoaXMgZml4ZXMgYWxtb3N0IGV2ZXJ5IElFNi83IGlzc3VlXG4gICAgICAgIG5vZGVIb29rID0ge1xuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7XG4gICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBleGlzdGluZyBvciBjcmVhdGUgYSBuZXcgYXR0cmlidXRlIG5vZGVcbiAgICAgICAgICAgICAgICB2YXIgcmV0ID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICk7XG4gICAgICAgICAgICAgICAgaWYgKCAhcmV0ICkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZU5vZGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAocmV0ID0gZWxlbS5vd25lckRvY3VtZW50LmNyZWF0ZUF0dHJpYnV0ZSggbmFtZSApKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldC52YWx1ZSA9IHZhbHVlICs9IFwiXCI7XG5cbiAgICAgICAgICAgICAgICAvLyBCcmVhayBhc3NvY2lhdGlvbiB3aXRoIGNsb25lZCBlbGVtZW50cyBieSBhbHNvIHVzaW5nIHNldEF0dHJpYnV0ZSAoIzk2NDYpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hbWUgPT09IFwidmFsdWVcIiB8fCB2YWx1ZSA9PT0gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKSA/XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlIDpcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBqUXVlcnkuZXhwci5hdHRySGFuZGxlLmlkID0galF1ZXJ5LmV4cHIuYXR0ckhhbmRsZS5uYW1lID0galF1ZXJ5LmV4cHIuYXR0ckhhbmRsZS5jb29yZHMgPVxuICAgICAgICAgICAgLy8gU29tZSBhdHRyaWJ1dGVzIGFyZSBjb25zdHJ1Y3RlZCB3aXRoIGVtcHR5LXN0cmluZyB2YWx1ZXMgd2hlbiBub3QgZGVmaW5lZFxuICAgICAgICAgICAgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuICAgICAgICAgICAgICAgIHZhciByZXQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzWE1MID9cbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkIDpcbiAgICAgICAgICAgICAgICAgICAgKHJldCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApKSAmJiByZXQudmFsdWUgIT09IFwiXCIgP1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0LnZhbHVlIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICBqUXVlcnkudmFsSG9va3MuYnV0dG9uID0ge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcbiAgICAgICAgICAgICAgICB2YXIgcmV0ID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldCAmJiByZXQuc3BlY2lmaWVkID9cbiAgICAgICAgICAgICAgICAgICAgcmV0LnZhbHVlIDpcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogbm9kZUhvb2suc2V0XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gU2V0IGNvbnRlbnRlZGl0YWJsZSB0byBmYWxzZSBvbiByZW1vdmFscygjMTA0MjkpXG4gICAgICAgIC8vIFNldHRpbmcgdG8gZW1wdHkgc3RyaW5nIHRocm93cyBhbiBlcnJvciBhcyBhbiBpbnZhbGlkIHZhbHVlXG4gICAgICAgIGpRdWVyeS5hdHRySG9va3MuY29udGVudGVkaXRhYmxlID0ge1xuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7XG4gICAgICAgICAgICAgICAgbm9kZUhvb2suc2V0KCBlbGVtLCB2YWx1ZSA9PT0gXCJcIiA/IGZhbHNlIDogdmFsdWUsIG5hbWUgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBTZXQgd2lkdGggYW5kIGhlaWdodCB0byBhdXRvIGluc3RlYWQgb2YgMCBvbiBlbXB0eSBzdHJpbmcoIEJ1ZyAjODE1MCApXG4gICAgICAgIC8vIFRoaXMgaXMgZm9yIHJlbW92YWxzXG4gICAgICAgIGpRdWVyeS5lYWNoKFsgXCJ3aWR0aFwiLCBcImhlaWdodFwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuICAgICAgICAgICAgalF1ZXJ5LmF0dHJIb29rc1sgbmFtZSBdID0ge1xuICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHZhbHVlID09PSBcIlwiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoIG5hbWUsIFwiYXV0b1wiICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuLy8gU29tZSBhdHRyaWJ1dGVzIHJlcXVpcmUgYSBzcGVjaWFsIGNhbGwgb24gSUVcbi8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzNjQyOSUyOFZTLjg1JTI5LmFzcHhcbiAgICBpZiAoICFqUXVlcnkuc3VwcG9ydC5ocmVmTm9ybWFsaXplZCApIHtcbiAgICAgICAgLy8gaHJlZi9zcmMgcHJvcGVydHkgc2hvdWxkIGdldCB0aGUgZnVsbCBub3JtYWxpemVkIFVSTCAoIzEwMjk5LyMxMjkxNSlcbiAgICAgICAgalF1ZXJ5LmVhY2goWyBcImhyZWZcIiwgXCJzcmNcIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcbiAgICAgICAgICAgIGpRdWVyeS5wcm9wSG9va3NbIG5hbWUgXSA9IHtcbiAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUsIDQgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoICFqUXVlcnkuc3VwcG9ydC5zdHlsZSApIHtcbiAgICAgICAgalF1ZXJ5LmF0dHJIb29rcy5zdHlsZSA9IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIHVuZGVmaW5lZCBpbiB0aGUgY2FzZSBvZiBlbXB0eSBzdHJpbmdcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBJRSB1cHBlcmNhc2VzIGNzcyBwcm9wZXJ0eSBuYW1lcywgYnV0IGlmIHdlIHdlcmUgdG8gLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAvLyAuY3NzVGV4dCwgdGhhdCB3b3VsZCBkZXN0cm95IGNhc2Ugc2Vuc3RpdGl2aXR5IGluIFVSTCdzLCBsaWtlIGluIFwiYmFja2dyb3VuZFwiXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0uc3R5bGUuY3NzVGV4dCB8fCB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICggZWxlbS5zdHlsZS5jc3NUZXh0ID0gdmFsdWUgKyBcIlwiICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4vLyBTYWZhcmkgbWlzLXJlcG9ydHMgdGhlIGRlZmF1bHQgc2VsZWN0ZWQgcHJvcGVydHkgb2YgYW4gb3B0aW9uXG4vLyBBY2Nlc3NpbmcgdGhlIHBhcmVudCdzIHNlbGVjdGVkSW5kZXggcHJvcGVydHkgZml4ZXMgaXRcbiAgICBpZiAoICFqUXVlcnkuc3VwcG9ydC5vcHRTZWxlY3RlZCApIHtcbiAgICAgICAgalF1ZXJ5LnByb3BIb29rcy5zZWxlY3RlZCA9IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblxuICAgICAgICAgICAgICAgIGlmICggcGFyZW50ICkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuc2VsZWN0ZWRJbmRleDtcblxuICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCBpdCBhbHNvIHdvcmtzIHdpdGggb3B0Z3JvdXBzLCBzZWUgIzU3MDFcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBwYXJlbnQucGFyZW50Tm9kZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgalF1ZXJ5LmVhY2goW1xuICAgICAgICBcInRhYkluZGV4XCIsXG4gICAgICAgIFwicmVhZE9ubHlcIixcbiAgICAgICAgXCJtYXhMZW5ndGhcIixcbiAgICAgICAgXCJjZWxsU3BhY2luZ1wiLFxuICAgICAgICBcImNlbGxQYWRkaW5nXCIsXG4gICAgICAgIFwicm93U3BhblwiLFxuICAgICAgICBcImNvbFNwYW5cIixcbiAgICAgICAgXCJ1c2VNYXBcIixcbiAgICAgICAgXCJmcmFtZUJvcmRlclwiLFxuICAgICAgICBcImNvbnRlbnRFZGl0YWJsZVwiXG4gICAgXSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGpRdWVyeS5wcm9wRml4WyB0aGlzLnRvTG93ZXJDYXNlKCkgXSA9IHRoaXM7XG4gICAgfSk7XG5cbi8vIElFNi83IGNhbGwgZW5jdHlwZSBlbmNvZGluZ1xuICAgIGlmICggIWpRdWVyeS5zdXBwb3J0LmVuY3R5cGUgKSB7XG4gICAgICAgIGpRdWVyeS5wcm9wRml4LmVuY3R5cGUgPSBcImVuY29kaW5nXCI7XG4gICAgfVxuXG4vLyBSYWRpb3MgYW5kIGNoZWNrYm94ZXMgZ2V0dGVyL3NldHRlclxuICAgIGpRdWVyeS5lYWNoKFsgXCJyYWRpb1wiLCBcImNoZWNrYm94XCIgXSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGpRdWVyeS52YWxIb29rc1sgdGhpcyBdID0ge1xuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCBqUXVlcnkuaXNBcnJheSggdmFsdWUgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICggZWxlbS5jaGVja2VkID0galF1ZXJ5LmluQXJyYXkoIGpRdWVyeShlbGVtKS52YWwoKSwgdmFsdWUgKSA+PSAwICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAoICFqUXVlcnkuc3VwcG9ydC5jaGVja09uICkge1xuICAgICAgICAgICAgalF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0uZ2V0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgLy8gU3VwcG9ydDogV2Via2l0XG4gICAgICAgICAgICAgICAgLy8gXCJcIiBpcyByZXR1cm5lZCBpbnN0ZWFkIG9mIFwib25cIiBpZiBhIHZhbHVlIGlzbid0IHNwZWNpZmllZFxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpID09PSBudWxsID8gXCJvblwiIDogZWxlbS52YWx1ZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgcmZvcm1FbGVtcyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhKSQvaSxcbiAgICAgICAgcmtleUV2ZW50ID0gL15rZXkvLFxuICAgICAgICBybW91c2VFdmVudCA9IC9eKD86bW91c2V8Y29udGV4dG1lbnUpfGNsaWNrLyxcbiAgICAgICAgcmZvY3VzTW9ycGggPSAvXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sXG4gICAgICAgIHJ0eXBlbmFtZXNwYWNlID0gL14oW14uXSopKD86XFwuKC4rKXwpJC87XG5cbiAgICBmdW5jdGlvbiByZXR1cm5UcnVlKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXR1cm5GYWxzZSgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgIH0gY2F0Y2ggKCBlcnIgKSB7IH1cbiAgICB9XG5cbiAgICAvKlxuICAgICAqIEhlbHBlciBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGV2ZW50cyAtLSBub3QgcGFydCBvZiB0aGUgcHVibGljIGludGVyZmFjZS5cbiAgICAgKiBQcm9wcyB0byBEZWFuIEVkd2FyZHMnIGFkZEV2ZW50IGxpYnJhcnkgZm9yIG1hbnkgb2YgdGhlIGlkZWFzLlxuICAgICAqL1xuICAgIGpRdWVyeS5ldmVudCA9IHtcblxuICAgICAgICBnbG9iYWw6IHt9LFxuXG4gICAgICAgIGFkZDogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBkYXRhLCBzZWxlY3RvciApIHtcbiAgICAgICAgICAgIHZhciB0bXAsIGV2ZW50cywgdCwgaGFuZGxlT2JqSW4sXG4gICAgICAgICAgICAgICAgc3BlY2lhbCwgZXZlbnRIYW5kbGUsIGhhbmRsZU9iaixcbiAgICAgICAgICAgICAgICBoYW5kbGVycywgdHlwZSwgbmFtZXNwYWNlcywgb3JpZ1R5cGUsXG4gICAgICAgICAgICAgICAgZWxlbURhdGEgPSBqUXVlcnkuX2RhdGEoIGVsZW0gKTtcblxuICAgICAgICAgICAgLy8gRG9uJ3QgYXR0YWNoIGV2ZW50cyB0byBub0RhdGEgb3IgdGV4dC9jb21tZW50IG5vZGVzIChidXQgYWxsb3cgcGxhaW4gb2JqZWN0cylcbiAgICAgICAgICAgIGlmICggIWVsZW1EYXRhICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2FsbGVyIGNhbiBwYXNzIGluIGFuIG9iamVjdCBvZiBjdXN0b20gZGF0YSBpbiBsaWV1IG9mIHRoZSBoYW5kbGVyXG4gICAgICAgICAgICBpZiAoIGhhbmRsZXIuaGFuZGxlciApIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVPYmpJbiA9IGhhbmRsZXI7XG4gICAgICAgICAgICAgICAgaGFuZGxlciA9IGhhbmRsZU9iakluLmhhbmRsZXI7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3IgPSBoYW5kbGVPYmpJbi5zZWxlY3RvcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlIGhhbmRsZXIgaGFzIGEgdW5pcXVlIElELCB1c2VkIHRvIGZpbmQvcmVtb3ZlIGl0IGxhdGVyXG4gICAgICAgICAgICBpZiAoICFoYW5kbGVyLmd1aWQgKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlci5ndWlkID0galF1ZXJ5Lmd1aWQrKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSW5pdCB0aGUgZWxlbWVudCdzIGV2ZW50IHN0cnVjdHVyZSBhbmQgbWFpbiBoYW5kbGVyLCBpZiB0aGlzIGlzIHRoZSBmaXJzdFxuICAgICAgICAgICAgaWYgKCAhKGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cykgKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoICEoZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUpICkge1xuICAgICAgICAgICAgICAgIGV2ZW50SGFuZGxlID0gZWxlbURhdGEuaGFuZGxlID0gZnVuY3Rpb24oIGUgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERpc2NhcmQgdGhlIHNlY29uZCBldmVudCBvZiBhIGpRdWVyeS5ldmVudC50cmlnZ2VyKCkgYW5kXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gYW4gZXZlbnQgaXMgY2FsbGVkIGFmdGVyIGEgcGFnZSBoYXMgdW5sb2FkZWRcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBqUXVlcnkgIT09IGNvcmVfc3RydW5kZWZpbmVkICYmICghZSB8fCBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICE9PSBlLnR5cGUpID9cbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5ldmVudC5kaXNwYXRjaC5hcHBseSggZXZlbnRIYW5kbGUuZWxlbSwgYXJndW1lbnRzICkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gQWRkIGVsZW0gYXMgYSBwcm9wZXJ0eSBvZiB0aGUgaGFuZGxlIGZuIHRvIHByZXZlbnQgYSBtZW1vcnkgbGVhayB3aXRoIElFIG5vbi1uYXRpdmUgZXZlbnRzXG4gICAgICAgICAgICAgICAgZXZlbnRIYW5kbGUuZWxlbSA9IGVsZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEhhbmRsZSBtdWx0aXBsZSBldmVudHMgc2VwYXJhdGVkIGJ5IGEgc3BhY2VcbiAgICAgICAgICAgIHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIGNvcmVfcm5vdHdoaXRlICkgfHwgW1wiXCJdO1xuICAgICAgICAgICAgdCA9IHR5cGVzLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlICggdC0tICkge1xuICAgICAgICAgICAgICAgIHRtcCA9IHJ0eXBlbmFtZXNwYWNlLmV4ZWMoIHR5cGVzW3RdICkgfHwgW107XG4gICAgICAgICAgICAgICAgdHlwZSA9IG9yaWdUeXBlID0gdG1wWzFdO1xuICAgICAgICAgICAgICAgIG5hbWVzcGFjZXMgPSAoIHRtcFsyXSB8fCBcIlwiICkuc3BsaXQoIFwiLlwiICkuc29ydCgpO1xuXG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgKm11c3QqIGJlIGEgdHlwZSwgbm8gYXR0YWNoaW5nIG5hbWVzcGFjZS1vbmx5IGhhbmRsZXJzXG4gICAgICAgICAgICAgICAgaWYgKCAhdHlwZSApIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgZXZlbnQgY2hhbmdlcyBpdHMgdHlwZSwgdXNlIHRoZSBzcGVjaWFsIGV2ZW50IGhhbmRsZXJzIGZvciB0aGUgY2hhbmdlZCB0eXBlXG4gICAgICAgICAgICAgICAgc3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cbiAgICAgICAgICAgICAgICAvLyBJZiBzZWxlY3RvciBkZWZpbmVkLCBkZXRlcm1pbmUgc3BlY2lhbCBldmVudCBhcGkgdHlwZSwgb3RoZXJ3aXNlIGdpdmVuIHR5cGVcbiAgICAgICAgICAgICAgICB0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7XG5cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgc3BlY2lhbCBiYXNlZCBvbiBuZXdseSByZXNldCB0eXBlXG4gICAgICAgICAgICAgICAgc3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cbiAgICAgICAgICAgICAgICAvLyBoYW5kbGVPYmogaXMgcGFzc2VkIHRvIGFsbCBldmVudCBoYW5kbGVyc1xuICAgICAgICAgICAgICAgIGhhbmRsZU9iaiA9IGpRdWVyeS5leHRlbmQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgICAgICAgICBvcmlnVHlwZTogb3JpZ1R5cGUsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IGhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIGd1aWQ6IGhhbmRsZXIuZ3VpZCxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yLFxuICAgICAgICAgICAgICAgICAgICBuZWVkc0NvbnRleHQ6IHNlbGVjdG9yICYmIGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApLFxuICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVzcGFjZXMuam9pbihcIi5cIilcbiAgICAgICAgICAgICAgICB9LCBoYW5kbGVPYmpJbiApO1xuXG4gICAgICAgICAgICAgICAgLy8gSW5pdCB0aGUgZXZlbnQgaGFuZGxlciBxdWV1ZSBpZiB3ZSdyZSB0aGUgZmlyc3RcbiAgICAgICAgICAgICAgICBpZiAoICEoaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSkgKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcnMuZGVsZWdhdGVDb3VudCA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB1c2UgYWRkRXZlbnRMaXN0ZW5lci9hdHRhY2hFdmVudCBpZiB0aGUgc3BlY2lhbCBldmVudHMgaGFuZGxlciByZXR1cm5zIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIGlmICggIXNwZWNpYWwuc2V0dXAgfHwgc3BlY2lhbC5zZXR1cC5jYWxsKCBlbGVtLCBkYXRhLCBuYW1lc3BhY2VzLCBldmVudEhhbmRsZSApID09PSBmYWxzZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJpbmQgdGhlIGdsb2JhbCBldmVudCBoYW5kbGVyIHRvIHRoZSBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGVsZW0uYWRkRXZlbnRMaXN0ZW5lciApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoIHR5cGUsIGV2ZW50SGFuZGxlLCBmYWxzZSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBlbGVtLmF0dGFjaEV2ZW50ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uYXR0YWNoRXZlbnQoIFwib25cIiArIHR5cGUsIGV2ZW50SGFuZGxlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIHNwZWNpYWwuYWRkICkge1xuICAgICAgICAgICAgICAgICAgICBzcGVjaWFsLmFkZC5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoICFoYW5kbGVPYmouaGFuZGxlci5ndWlkICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCA9IGhhbmRsZXIuZ3VpZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEFkZCB0byB0aGUgZWxlbWVudCdzIGhhbmRsZXIgbGlzdCwgZGVsZWdhdGVzIGluIGZyb250XG4gICAgICAgICAgICAgICAgaWYgKCBzZWxlY3RvciApIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcnMuc3BsaWNlKCBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50KyssIDAsIGhhbmRsZU9iaiApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzLnB1c2goIGhhbmRsZU9iaiApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2Ygd2hpY2ggZXZlbnRzIGhhdmUgZXZlciBiZWVuIHVzZWQsIGZvciBldmVudCBvcHRpbWl6YXRpb25cbiAgICAgICAgICAgICAgICBqUXVlcnkuZXZlbnQuZ2xvYmFsWyB0eXBlIF0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBOdWxsaWZ5IGVsZW0gdG8gcHJldmVudCBtZW1vcnkgbGVha3MgaW4gSUVcbiAgICAgICAgICAgIGVsZW0gPSBudWxsO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIERldGFjaCBhbiBldmVudCBvciBzZXQgb2YgZXZlbnRzIGZyb20gYW4gZWxlbWVudFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgc2VsZWN0b3IsIG1hcHBlZFR5cGVzICkge1xuICAgICAgICAgICAgdmFyIGosIGhhbmRsZU9iaiwgdG1wLFxuICAgICAgICAgICAgICAgIG9yaWdDb3VudCwgdCwgZXZlbnRzLFxuICAgICAgICAgICAgICAgIHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLFxuICAgICAgICAgICAgICAgIG5hbWVzcGFjZXMsIG9yaWdUeXBlLFxuICAgICAgICAgICAgICAgIGVsZW1EYXRhID0galF1ZXJ5Lmhhc0RhdGEoIGVsZW0gKSAmJiBqUXVlcnkuX2RhdGEoIGVsZW0gKTtcblxuICAgICAgICAgICAgaWYgKCAhZWxlbURhdGEgfHwgIShldmVudHMgPSBlbGVtRGF0YS5ldmVudHMpICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gT25jZSBmb3IgZWFjaCB0eXBlLm5hbWVzcGFjZSBpbiB0eXBlczsgdHlwZSBtYXkgYmUgb21pdHRlZFxuICAgICAgICAgICAgdHlwZXMgPSAoIHR5cGVzIHx8IFwiXCIgKS5tYXRjaCggY29yZV9ybm90d2hpdGUgKSB8fCBbXCJcIl07XG4gICAgICAgICAgICB0ID0gdHlwZXMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKCB0LS0gKSB7XG4gICAgICAgICAgICAgICAgdG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbdF0gKSB8fCBbXTtcbiAgICAgICAgICAgICAgICB0eXBlID0gb3JpZ1R5cGUgPSB0bXBbMV07XG4gICAgICAgICAgICAgICAgbmFtZXNwYWNlcyA9ICggdG1wWzJdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cbiAgICAgICAgICAgICAgICAvLyBVbmJpbmQgYWxsIGV2ZW50cyAob24gdGhpcyBuYW1lc3BhY2UsIGlmIHByb3ZpZGVkKSBmb3IgdGhlIGVsZW1lbnRcbiAgICAgICAgICAgICAgICBpZiAoICF0eXBlICkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKyB0eXBlc1sgdCBdLCBoYW5kbGVyLCBzZWxlY3RvciwgdHJ1ZSApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuICAgICAgICAgICAgICAgIHR5cGUgPSAoIHNlbGVjdG9yID8gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgOiBzcGVjaWFsLmJpbmRUeXBlICkgfHwgdHlwZTtcbiAgICAgICAgICAgICAgICBoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdIHx8IFtdO1xuICAgICAgICAgICAgICAgIHRtcCA9IHRtcFsyXSAmJiBuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikgKyBcIihcXFxcLnwkKVwiICk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgbWF0Y2hpbmcgZXZlbnRzXG4gICAgICAgICAgICAgICAgb3JpZ0NvdW50ID0gaiA9IGhhbmRsZXJzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoIGotLSApIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoICggbWFwcGVkVHlwZXMgfHwgb3JpZ1R5cGUgPT09IGhhbmRsZU9iai5vcmlnVHlwZSApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoICFoYW5kbGVyIHx8IGhhbmRsZXIuZ3VpZCA9PT0gaGFuZGxlT2JqLmd1aWQgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKCAhdG1wIHx8IHRtcC50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgKCAhc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IGhhbmRsZU9iai5zZWxlY3RvciB8fCBzZWxlY3RvciA9PT0gXCIqKlwiICYmIGhhbmRsZU9iai5zZWxlY3RvciApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcnMuc3BsaWNlKCBqLCAxICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaGFuZGxlT2JqLnNlbGVjdG9yICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXJzLmRlbGVnYXRlQ291bnQtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc3BlY2lhbC5yZW1vdmUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlY2lhbC5yZW1vdmUuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgZ2VuZXJpYyBldmVudCBoYW5kbGVyIGlmIHdlIHJlbW92ZWQgc29tZXRoaW5nIGFuZCBubyBtb3JlIGhhbmRsZXJzIGV4aXN0XG4gICAgICAgICAgICAgICAgLy8gKGF2b2lkcyBwb3RlbnRpYWwgZm9yIGVuZGxlc3MgcmVjdXJzaW9uIGR1cmluZyByZW1vdmFsIG9mIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMpXG4gICAgICAgICAgICAgICAgaWYgKCBvcmlnQ291bnQgJiYgIWhhbmRsZXJzLmxlbmd0aCApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCAhc3BlY2lhbC50ZWFyZG93biB8fCBzcGVjaWFsLnRlYXJkb3duLmNhbGwoIGVsZW0sIG5hbWVzcGFjZXMsIGVsZW1EYXRhLmhhbmRsZSApID09PSBmYWxzZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZWxlbURhdGEuaGFuZGxlICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgZXZlbnRzWyB0eXBlIF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGV4cGFuZG8gaWYgaXQncyBubyBsb25nZXIgdXNlZFxuICAgICAgICAgICAgaWYgKCBqUXVlcnkuaXNFbXB0eU9iamVjdCggZXZlbnRzICkgKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGVsZW1EYXRhLmhhbmRsZTtcblxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZURhdGEgYWxzbyBjaGVja3MgZm9yIGVtcHRpbmVzcyBhbmQgY2xlYXJzIHRoZSBleHBhbmRvIGlmIGVtcHR5XG4gICAgICAgICAgICAgICAgLy8gc28gdXNlIGl0IGluc3RlYWQgb2YgZGVsZXRlXG4gICAgICAgICAgICAgICAgalF1ZXJ5Ll9yZW1vdmVEYXRhKCBlbGVtLCBcImV2ZW50c1wiICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdHJpZ2dlcjogZnVuY3Rpb24oIGV2ZW50LCBkYXRhLCBlbGVtLCBvbmx5SGFuZGxlcnMgKSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlLCBvbnR5cGUsIGN1cixcbiAgICAgICAgICAgICAgICBidWJibGVUeXBlLCBzcGVjaWFsLCB0bXAsIGksXG4gICAgICAgICAgICAgICAgZXZlbnRQYXRoID0gWyBlbGVtIHx8IGRvY3VtZW50IF0sXG4gICAgICAgICAgICAgICAgdHlwZSA9IGNvcmVfaGFzT3duLmNhbGwoIGV2ZW50LCBcInR5cGVcIiApID8gZXZlbnQudHlwZSA6IGV2ZW50LFxuICAgICAgICAgICAgICAgIG5hbWVzcGFjZXMgPSBjb3JlX2hhc093bi5jYWxsKCBldmVudCwgXCJuYW1lc3BhY2VcIiApID8gZXZlbnQubmFtZXNwYWNlLnNwbGl0KFwiLlwiKSA6IFtdO1xuXG4gICAgICAgICAgICBjdXIgPSB0bXAgPSBlbGVtID0gZWxlbSB8fCBkb2N1bWVudDtcblxuICAgICAgICAgICAgLy8gRG9uJ3QgZG8gZXZlbnRzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcbiAgICAgICAgICAgIGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4ICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gZm9jdXMvYmx1ciBtb3JwaHMgdG8gZm9jdXNpbi9vdXQ7IGVuc3VyZSB3ZSdyZSBub3QgZmlyaW5nIHRoZW0gcmlnaHQgbm93XG4gICAgICAgICAgICBpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIHR5cGUuaW5kZXhPZihcIi5cIikgPj0gMCApIHtcbiAgICAgICAgICAgICAgICAvLyBOYW1lc3BhY2VkIHRyaWdnZXI7IGNyZWF0ZSBhIHJlZ2V4cCB0byBtYXRjaCBldmVudCB0eXBlIGluIGhhbmRsZSgpXG4gICAgICAgICAgICAgICAgbmFtZXNwYWNlcyA9IHR5cGUuc3BsaXQoXCIuXCIpO1xuICAgICAgICAgICAgICAgIHR5cGUgPSBuYW1lc3BhY2VzLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgbmFtZXNwYWNlcy5zb3J0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvbnR5cGUgPSB0eXBlLmluZGV4T2YoXCI6XCIpIDwgMCAmJiBcIm9uXCIgKyB0eXBlO1xuXG4gICAgICAgICAgICAvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYSBqUXVlcnkuRXZlbnQgb2JqZWN0LCBPYmplY3QsIG9yIGp1c3QgYW4gZXZlbnQgdHlwZSBzdHJpbmdcbiAgICAgICAgICAgIGV2ZW50ID0gZXZlbnRbIGpRdWVyeS5leHBhbmRvIF0gP1xuICAgICAgICAgICAgICAgIGV2ZW50IDpcbiAgICAgICAgICAgICAgICBuZXcgalF1ZXJ5LkV2ZW50KCB0eXBlLCB0eXBlb2YgZXZlbnQgPT09IFwib2JqZWN0XCIgJiYgZXZlbnQgKTtcblxuICAgICAgICAgICAgLy8gVHJpZ2dlciBiaXRtYXNrOiAmIDEgZm9yIG5hdGl2ZSBoYW5kbGVyczsgJiAyIGZvciBqUXVlcnkgKGFsd2F5cyB0cnVlKVxuICAgICAgICAgICAgZXZlbnQuaXNUcmlnZ2VyID0gb25seUhhbmRsZXJzID8gMiA6IDM7XG4gICAgICAgICAgICBldmVudC5uYW1lc3BhY2UgPSBuYW1lc3BhY2VzLmpvaW4oXCIuXCIpO1xuICAgICAgICAgICAgZXZlbnQubmFtZXNwYWNlX3JlID0gZXZlbnQubmFtZXNwYWNlID9cbiAgICAgICAgICAgICAgICBuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikgKyBcIihcXFxcLnwkKVwiICkgOlxuICAgICAgICAgICAgICAgIG51bGw7XG5cbiAgICAgICAgICAgIC8vIENsZWFuIHVwIHRoZSBldmVudCBpbiBjYXNlIGl0IGlzIGJlaW5nIHJldXNlZFxuICAgICAgICAgICAgZXZlbnQucmVzdWx0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaWYgKCAhZXZlbnQudGFyZ2V0ICkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldCA9IGVsZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENsb25lIGFueSBpbmNvbWluZyBkYXRhIGFuZCBwcmVwZW5kIHRoZSBldmVudCwgY3JlYXRpbmcgdGhlIGhhbmRsZXIgYXJnIGxpc3RcbiAgICAgICAgICAgIGRhdGEgPSBkYXRhID09IG51bGwgP1xuICAgICAgICAgICAgICAgIFsgZXZlbnQgXSA6XG4gICAgICAgICAgICAgICAgalF1ZXJ5Lm1ha2VBcnJheSggZGF0YSwgWyBldmVudCBdICk7XG5cbiAgICAgICAgICAgIC8vIEFsbG93IHNwZWNpYWwgZXZlbnRzIHRvIGRyYXcgb3V0c2lkZSB0aGUgbGluZXNcbiAgICAgICAgICAgIHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuICAgICAgICAgICAgaWYgKCAhb25seUhhbmRsZXJzICYmIHNwZWNpYWwudHJpZ2dlciAmJiBzcGVjaWFsLnRyaWdnZXIuYXBwbHkoIGVsZW0sIGRhdGEgKSA9PT0gZmFsc2UgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgZXZlbnQgcHJvcGFnYXRpb24gcGF0aCBpbiBhZHZhbmNlLCBwZXIgVzNDIGV2ZW50cyBzcGVjICgjOTk1MSlcbiAgICAgICAgICAgIC8vIEJ1YmJsZSB1cCB0byBkb2N1bWVudCwgdGhlbiB0byB3aW5kb3c7IHdhdGNoIGZvciBhIGdsb2JhbCBvd25lckRvY3VtZW50IHZhciAoIzk3MjQpXG4gICAgICAgICAgICBpZiAoICFvbmx5SGFuZGxlcnMgJiYgIXNwZWNpYWwubm9CdWJibGUgJiYgIWpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkge1xuXG4gICAgICAgICAgICAgICAgYnViYmxlVHlwZSA9IHNwZWNpYWwuZGVsZWdhdGVUeXBlIHx8IHR5cGU7XG4gICAgICAgICAgICAgICAgaWYgKCAhcmZvY3VzTW9ycGgudGVzdCggYnViYmxlVHlwZSArIHR5cGUgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgY3VyID0gY3VyLnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoIDsgY3VyOyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRQYXRoLnB1c2goIGN1ciApO1xuICAgICAgICAgICAgICAgICAgICB0bXAgPSBjdXI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gT25seSBhZGQgd2luZG93IGlmIHdlIGdvdCB0byBkb2N1bWVudCAoZS5nLiwgbm90IHBsYWluIG9iaiBvciBkZXRhY2hlZCBET00pXG4gICAgICAgICAgICAgICAgaWYgKCB0bXAgPT09IChlbGVtLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQpICkge1xuICAgICAgICAgICAgICAgICAgICBldmVudFBhdGgucHVzaCggdG1wLmRlZmF1bHRWaWV3IHx8IHRtcC5wYXJlbnRXaW5kb3cgfHwgd2luZG93ICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBGaXJlIGhhbmRsZXJzIG9uIHRoZSBldmVudCBwYXRoXG4gICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgIHdoaWxlICggKGN1ciA9IGV2ZW50UGF0aFtpKytdKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnR5cGUgPSBpID4gMSA/XG4gICAgICAgICAgICAgICAgICAgIGJ1YmJsZVR5cGUgOlxuICAgICAgICAgICAgICAgIHNwZWNpYWwuYmluZFR5cGUgfHwgdHlwZTtcblxuICAgICAgICAgICAgICAgIC8vIGpRdWVyeSBoYW5kbGVyXG4gICAgICAgICAgICAgICAgaGFuZGxlID0gKCBqUXVlcnkuX2RhdGEoIGN1ciwgXCJldmVudHNcIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSAmJiBqUXVlcnkuX2RhdGEoIGN1ciwgXCJoYW5kbGVcIiApO1xuICAgICAgICAgICAgICAgIGlmICggaGFuZGxlICkge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIE5hdGl2ZSBoYW5kbGVyXG4gICAgICAgICAgICAgICAgaGFuZGxlID0gb250eXBlICYmIGN1clsgb250eXBlIF07XG4gICAgICAgICAgICAgICAgaWYgKCBoYW5kbGUgJiYgalF1ZXJ5LmFjY2VwdERhdGEoIGN1ciApICYmIGhhbmRsZS5hcHBseSAmJiBoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApID09PSBmYWxzZSApIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmVudC50eXBlID0gdHlwZTtcblxuICAgICAgICAgICAgLy8gSWYgbm9ib2R5IHByZXZlbnRlZCB0aGUgZGVmYXVsdCBhY3Rpb24sIGRvIGl0IG5vd1xuICAgICAgICAgICAgaWYgKCAhb25seUhhbmRsZXJzICYmICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcblxuICAgICAgICAgICAgICAgIGlmICggKCFzcGVjaWFsLl9kZWZhdWx0IHx8IHNwZWNpYWwuX2RlZmF1bHQuYXBwbHkoIGV2ZW50UGF0aC5wb3AoKSwgZGF0YSApID09PSBmYWxzZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LmFjY2VwdERhdGEoIGVsZW0gKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDYWxsIGEgbmF0aXZlIERPTSBtZXRob2Qgb24gdGhlIHRhcmdldCB3aXRoIHRoZSBzYW1lIG5hbWUgbmFtZSBhcyB0aGUgZXZlbnQuXG4gICAgICAgICAgICAgICAgICAgIC8vIENhbid0IHVzZSBhbiAuaXNGdW5jdGlvbigpIGNoZWNrIGhlcmUgYmVjYXVzZSBJRTYvNyBmYWlscyB0aGF0IHRlc3QuXG4gICAgICAgICAgICAgICAgICAgIC8vIERvbid0IGRvIGRlZmF1bHQgYWN0aW9ucyBvbiB3aW5kb3csIHRoYXQncyB3aGVyZSBnbG9iYWwgdmFyaWFibGVzIGJlICgjNjE3MClcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBvbnR5cGUgJiYgZWxlbVsgdHlwZSBdICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgcmUtdHJpZ2dlciBhbiBvbkZPTyBldmVudCB3aGVuIHdlIGNhbGwgaXRzIEZPTygpIG1ldGhvZFxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wID0gZWxlbVsgb250eXBlIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdG1wICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1bIG9udHlwZSBdID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCByZS10cmlnZ2VyaW5nIG9mIHRoZSBzYW1lIGV2ZW50LCBzaW5jZSB3ZSBhbHJlYWR5IGJ1YmJsZWQgaXQgYWJvdmVcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB0eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtWyB0eXBlIF0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKCBlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElFPDkgZGllcyBvbiBmb2N1cy9ibHVyIHRvIGhpZGRlbiBlbGVtZW50ICgjMTQ4NiwjMTI1MTgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25seSByZXByb2R1Y2libGUgb24gd2luWFAgSUU4IG5hdGl2ZSwgbm90IElFOSBpbiBJRTggbW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0bXAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbVsgb250eXBlIF0gPSB0bXA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBldmVudC5yZXN1bHQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuICAgICAgICAgICAgLy8gTWFrZSBhIHdyaXRhYmxlIGpRdWVyeS5FdmVudCBmcm9tIHRoZSBuYXRpdmUgZXZlbnQgb2JqZWN0XG4gICAgICAgICAgICBldmVudCA9IGpRdWVyeS5ldmVudC5maXgoIGV2ZW50ICk7XG5cbiAgICAgICAgICAgIHZhciBpLCByZXQsIGhhbmRsZU9iaiwgbWF0Y2hlZCwgaixcbiAgICAgICAgICAgICAgICBoYW5kbGVyUXVldWUgPSBbXSxcbiAgICAgICAgICAgICAgICBhcmdzID0gY29yZV9zbGljZS5jYWxsKCBhcmd1bWVudHMgKSxcbiAgICAgICAgICAgICAgICBoYW5kbGVycyA9ICggalF1ZXJ5Ll9kYXRhKCB0aGlzLCBcImV2ZW50c1wiICkgfHwge30gKVsgZXZlbnQudHlwZSBdIHx8IFtdLFxuICAgICAgICAgICAgICAgIHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZXZlbnQudHlwZSBdIHx8IHt9O1xuXG4gICAgICAgICAgICAvLyBVc2UgdGhlIGZpeC1lZCBqUXVlcnkuRXZlbnQgcmF0aGVyIHRoYW4gdGhlIChyZWFkLW9ubHkpIG5hdGl2ZSBldmVudFxuICAgICAgICAgICAgYXJnc1swXSA9IGV2ZW50O1xuICAgICAgICAgICAgZXZlbnQuZGVsZWdhdGVUYXJnZXQgPSB0aGlzO1xuXG4gICAgICAgICAgICAvLyBDYWxsIHRoZSBwcmVEaXNwYXRjaCBob29rIGZvciB0aGUgbWFwcGVkIHR5cGUsIGFuZCBsZXQgaXQgYmFpbCBpZiBkZXNpcmVkXG4gICAgICAgICAgICBpZiAoIHNwZWNpYWwucHJlRGlzcGF0Y2ggJiYgc3BlY2lhbC5wcmVEaXNwYXRjaC5jYWxsKCB0aGlzLCBldmVudCApID09PSBmYWxzZSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIERldGVybWluZSBoYW5kbGVyc1xuICAgICAgICAgICAgaGFuZGxlclF1ZXVlID0galF1ZXJ5LmV2ZW50LmhhbmRsZXJzLmNhbGwoIHRoaXMsIGV2ZW50LCBoYW5kbGVycyApO1xuXG4gICAgICAgICAgICAvLyBSdW4gZGVsZWdhdGVzIGZpcnN0OyB0aGV5IG1heSB3YW50IHRvIHN0b3AgcHJvcGFnYXRpb24gYmVuZWF0aCB1c1xuICAgICAgICAgICAgaSA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoIChtYXRjaGVkID0gaGFuZGxlclF1ZXVlWyBpKysgXSkgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldCA9IG1hdGNoZWQuZWxlbTtcblxuICAgICAgICAgICAgICAgIGogPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlICggKGhhbmRsZU9iaiA9IG1hdGNoZWQuaGFuZGxlcnNbIGorKyBdKSAmJiAhZXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyZWQgZXZlbnQgbXVzdCBlaXRoZXIgMSkgaGF2ZSBubyBuYW1lc3BhY2UsIG9yXG4gICAgICAgICAgICAgICAgICAgIC8vIDIpIGhhdmUgbmFtZXNwYWNlKHMpIGEgc3Vic2V0IG9yIGVxdWFsIHRvIHRob3NlIGluIHRoZSBib3VuZCBldmVudCAoYm90aCBjYW4gaGF2ZSBubyBuYW1lc3BhY2UpLlxuICAgICAgICAgICAgICAgICAgICBpZiAoICFldmVudC5uYW1lc3BhY2VfcmUgfHwgZXZlbnQubmFtZXNwYWNlX3JlLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuaGFuZGxlT2JqID0gaGFuZGxlT2JqO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuZGF0YSA9IGhhbmRsZU9iai5kYXRhO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXQgPSAoIChqUXVlcnkuZXZlbnQuc3BlY2lhbFsgaGFuZGxlT2JqLm9yaWdUeXBlIF0gfHwge30pLmhhbmRsZSB8fCBoYW5kbGVPYmouaGFuZGxlciApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGx5KCBtYXRjaGVkLmVsZW0sIGFyZ3MgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCByZXQgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIChldmVudC5yZXN1bHQgPSByZXQpID09PSBmYWxzZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDYWxsIHRoZSBwb3N0RGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlXG4gICAgICAgICAgICBpZiAoIHNwZWNpYWwucG9zdERpc3BhdGNoICkge1xuICAgICAgICAgICAgICAgIHNwZWNpYWwucG9zdERpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBldmVudC5yZXN1bHQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGFuZGxlcnM6IGZ1bmN0aW9uKCBldmVudCwgaGFuZGxlcnMgKSB7XG4gICAgICAgICAgICB2YXIgc2VsLCBoYW5kbGVPYmosIG1hdGNoZXMsIGksXG4gICAgICAgICAgICAgICAgaGFuZGxlclF1ZXVlID0gW10sXG4gICAgICAgICAgICAgICAgZGVsZWdhdGVDb3VudCA9IGhhbmRsZXJzLmRlbGVnYXRlQ291bnQsXG4gICAgICAgICAgICAgICAgY3VyID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgICAgICAgICAvLyBGaW5kIGRlbGVnYXRlIGhhbmRsZXJzXG4gICAgICAgICAgICAvLyBCbGFjay1ob2xlIFNWRyA8dXNlPiBpbnN0YW5jZSB0cmVlcyAoIzEzMTgwKVxuICAgICAgICAgICAgLy8gQXZvaWQgbm9uLWxlZnQtY2xpY2sgYnViYmxpbmcgaW4gRmlyZWZveCAoIzM4NjEpXG4gICAgICAgICAgICBpZiAoIGRlbGVnYXRlQ291bnQgJiYgY3VyLm5vZGVUeXBlICYmICghZXZlbnQuYnV0dG9uIHx8IGV2ZW50LnR5cGUgIT09IFwiY2xpY2tcIikgKSB7XG5cbiAgICAgICAgICAgICAgICAvKiBqc2hpbnQgZXFlcWVxOiBmYWxzZSAqL1xuICAgICAgICAgICAgICAgIGZvciAoIDsgY3VyICE9IHRoaXM7IGN1ciA9IGN1ci5wYXJlbnROb2RlIHx8IHRoaXMgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qIGpzaGludCBlcWVxZXE6IHRydWUgKi9cblxuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBjaGVjayBub24tZWxlbWVudHMgKCMxMzIwOClcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9uJ3QgcHJvY2VzcyBjbGlja3Mgb24gZGlzYWJsZWQgZWxlbWVudHMgKCM2OTExLCAjODE2NSwgIzExMzgyLCAjMTE3NjQpXG4gICAgICAgICAgICAgICAgICAgIGlmICggY3VyLm5vZGVUeXBlID09PSAxICYmIChjdXIuZGlzYWJsZWQgIT09IHRydWUgfHwgZXZlbnQudHlwZSAhPT0gXCJjbGlja1wiKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgZGVsZWdhdGVDb3VudDsgaSsrICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBpIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBjb25mbGljdCB3aXRoIE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoIzEzMjAzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbCA9IGhhbmRsZU9iai5zZWxlY3RvciArIFwiIFwiO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXRjaGVzWyBzZWwgXSA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVzWyBzZWwgXSA9IGhhbmRsZU9iai5uZWVkc0NvbnRleHQgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoIHNlbCwgdGhpcyApLmluZGV4KCBjdXIgKSA+PSAwIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5maW5kKCBzZWwsIHRoaXMsIG51bGwsIFsgY3VyIF0gKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbWF0Y2hlc1sgc2VsIF0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaCggaGFuZGxlT2JqICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBtYXRjaGVzLmxlbmd0aCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyUXVldWUucHVzaCh7IGVsZW06IGN1ciwgaGFuZGxlcnM6IG1hdGNoZXMgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCB0aGUgcmVtYWluaW5nIChkaXJlY3RseS1ib3VuZCkgaGFuZGxlcnNcbiAgICAgICAgICAgIGlmICggZGVsZWdhdGVDb3VudCA8IGhhbmRsZXJzLmxlbmd0aCApIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyUXVldWUucHVzaCh7IGVsZW06IHRoaXMsIGhhbmRsZXJzOiBoYW5kbGVycy5zbGljZSggZGVsZWdhdGVDb3VudCApIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlclF1ZXVlO1xuICAgICAgICB9LFxuXG4gICAgICAgIGZpeDogZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgICAgaWYgKCBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIHdyaXRhYmxlIGNvcHkgb2YgdGhlIGV2ZW50IG9iamVjdCBhbmQgbm9ybWFsaXplIHNvbWUgcHJvcGVydGllc1xuICAgICAgICAgICAgdmFyIGksIHByb3AsIGNvcHksXG4gICAgICAgICAgICAgICAgdHlwZSA9IGV2ZW50LnR5cGUsXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudCA9IGV2ZW50LFxuICAgICAgICAgICAgICAgIGZpeEhvb2sgPSB0aGlzLmZpeEhvb2tzWyB0eXBlIF07XG5cbiAgICAgICAgICAgIGlmICggIWZpeEhvb2sgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maXhIb29rc1sgdHlwZSBdID0gZml4SG9vayA9XG4gICAgICAgICAgICAgICAgICAgIHJtb3VzZUV2ZW50LnRlc3QoIHR5cGUgKSA/IHRoaXMubW91c2VIb29rcyA6XG4gICAgICAgICAgICAgICAgICAgICAgICBya2V5RXZlbnQudGVzdCggdHlwZSApID8gdGhpcy5rZXlIb29rcyA6XG4gICAgICAgICAgICAgICAgICAgICAgICB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvcHkgPSBmaXhIb29rLnByb3BzID8gdGhpcy5wcm9wcy5jb25jYXQoIGZpeEhvb2sucHJvcHMgKSA6IHRoaXMucHJvcHM7XG5cbiAgICAgICAgICAgIGV2ZW50ID0gbmV3IGpRdWVyeS5FdmVudCggb3JpZ2luYWxFdmVudCApO1xuXG4gICAgICAgICAgICBpID0gY29weS5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoIGktLSApIHtcbiAgICAgICAgICAgICAgICBwcm9wID0gY29weVsgaSBdO1xuICAgICAgICAgICAgICAgIGV2ZW50WyBwcm9wIF0gPSBvcmlnaW5hbEV2ZW50WyBwcm9wIF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFN1cHBvcnQ6IElFPDlcbiAgICAgICAgICAgIC8vIEZpeCB0YXJnZXQgcHJvcGVydHkgKCMxOTI1KVxuICAgICAgICAgICAgaWYgKCAhZXZlbnQudGFyZ2V0ICkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldCA9IG9yaWdpbmFsRXZlbnQuc3JjRWxlbWVudCB8fCBkb2N1bWVudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU3VwcG9ydDogQ2hyb21lIDIzKywgU2FmYXJpP1xuICAgICAgICAgICAgLy8gVGFyZ2V0IHNob3VsZCBub3QgYmUgYSB0ZXh0IG5vZGUgKCM1MDQsICMxMzE0MylcbiAgICAgICAgICAgIGlmICggZXZlbnQudGFyZ2V0Lm5vZGVUeXBlID09PSAzICkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTdXBwb3J0OiBJRTw5XG4gICAgICAgICAgICAvLyBGb3IgbW91c2Uva2V5IGV2ZW50cywgbWV0YUtleT09ZmFsc2UgaWYgaXQncyB1bmRlZmluZWQgKCMzMzY4LCAjMTEzMjgpXG4gICAgICAgICAgICBldmVudC5tZXRhS2V5ID0gISFldmVudC5tZXRhS2V5O1xuXG4gICAgICAgICAgICByZXR1cm4gZml4SG9vay5maWx0ZXIgPyBmaXhIb29rLmZpbHRlciggZXZlbnQsIG9yaWdpbmFsRXZlbnQgKSA6IGV2ZW50O1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIEluY2x1ZGVzIHNvbWUgZXZlbnQgcHJvcHMgc2hhcmVkIGJ5IEtleUV2ZW50IGFuZCBNb3VzZUV2ZW50XG4gICAgICAgIHByb3BzOiBcImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaFwiLnNwbGl0KFwiIFwiKSxcblxuICAgICAgICBmaXhIb29rczoge30sXG5cbiAgICAgICAga2V5SG9va3M6IHtcbiAgICAgICAgICAgIHByb3BzOiBcImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGVcIi5zcGxpdChcIiBcIiksXG4gICAgICAgICAgICBmaWx0ZXI6IGZ1bmN0aW9uKCBldmVudCwgb3JpZ2luYWwgKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgd2hpY2ggZm9yIGtleSBldmVudHNcbiAgICAgICAgICAgICAgICBpZiAoIGV2ZW50LndoaWNoID09IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LndoaWNoID0gb3JpZ2luYWwuY2hhckNvZGUgIT0gbnVsbCA/IG9yaWdpbmFsLmNoYXJDb2RlIDogb3JpZ2luYWwua2V5Q29kZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgbW91c2VIb29rczoge1xuICAgICAgICAgICAgcHJvcHM6IFwiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIGZyb21FbGVtZW50IG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50XCIuc3BsaXQoXCIgXCIpLFxuICAgICAgICAgICAgZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkge1xuICAgICAgICAgICAgICAgIHZhciBib2R5LCBldmVudERvYywgZG9jLFxuICAgICAgICAgICAgICAgICAgICBidXR0b24gPSBvcmlnaW5hbC5idXR0b24sXG4gICAgICAgICAgICAgICAgICAgIGZyb21FbGVtZW50ID0gb3JpZ2luYWwuZnJvbUVsZW1lbnQ7XG5cbiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgcGFnZVgvWSBpZiBtaXNzaW5nIGFuZCBjbGllbnRYL1kgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgaWYgKCBldmVudC5wYWdlWCA9PSBudWxsICYmIG9yaWdpbmFsLmNsaWVudFggIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnREb2MgPSBldmVudC50YXJnZXQub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudDtcbiAgICAgICAgICAgICAgICAgICAgZG9jID0gZXZlbnREb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBib2R5ID0gZXZlbnREb2MuYm9keTtcblxuICAgICAgICAgICAgICAgICAgICBldmVudC5wYWdlWCA9IG9yaWdpbmFsLmNsaWVudFggKyAoIGRvYyAmJiBkb2Muc2Nyb2xsTGVmdCB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsTGVmdCB8fCAwICkgLSAoIGRvYyAmJiBkb2MuY2xpZW50TGVmdCB8fCBib2R5ICYmIGJvZHkuY2xpZW50TGVmdCB8fCAwICk7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnBhZ2VZID0gb3JpZ2luYWwuY2xpZW50WSArICggZG9jICYmIGRvYy5zY3JvbGxUb3AgIHx8IGJvZHkgJiYgYm9keS5zY3JvbGxUb3AgIHx8IDAgKSAtICggZG9jICYmIGRvYy5jbGllbnRUb3AgIHx8IGJvZHkgJiYgYm9keS5jbGllbnRUb3AgIHx8IDAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgcmVsYXRlZFRhcmdldCwgaWYgbmVjZXNzYXJ5XG4gICAgICAgICAgICAgICAgaWYgKCAhZXZlbnQucmVsYXRlZFRhcmdldCAmJiBmcm9tRWxlbWVudCApIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucmVsYXRlZFRhcmdldCA9IGZyb21FbGVtZW50ID09PSBldmVudC50YXJnZXQgPyBvcmlnaW5hbC50b0VsZW1lbnQgOiBmcm9tRWxlbWVudDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgd2hpY2ggZm9yIGNsaWNrOiAxID09PSBsZWZ0OyAyID09PSBtaWRkbGU7IDMgPT09IHJpZ2h0XG4gICAgICAgICAgICAgICAgLy8gTm90ZTogYnV0dG9uIGlzIG5vdCBub3JtYWxpemVkLCBzbyBkb24ndCB1c2UgaXRcbiAgICAgICAgICAgICAgICBpZiAoICFldmVudC53aGljaCAmJiBidXR0b24gIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQud2hpY2ggPSAoIGJ1dHRvbiAmIDEgPyAxIDogKCBidXR0b24gJiAyID8gMyA6ICggYnV0dG9uICYgNCA/IDIgOiAwICkgKSApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBldmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzcGVjaWFsOiB7XG4gICAgICAgICAgICBsb2FkOiB7XG4gICAgICAgICAgICAgICAgLy8gUHJldmVudCB0cmlnZ2VyZWQgaW1hZ2UubG9hZCBldmVudHMgZnJvbSBidWJibGluZyB0byB3aW5kb3cubG9hZFxuICAgICAgICAgICAgICAgIG5vQnViYmxlOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9jdXM6IHtcbiAgICAgICAgICAgICAgICAvLyBGaXJlIG5hdGl2ZSBldmVudCBpZiBwb3NzaWJsZSBzbyBibHVyL2ZvY3VzIHNlcXVlbmNlIGlzIGNvcnJlY3RcbiAgICAgICAgICAgICAgICB0cmlnZ2VyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzICE9PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuZm9jdXMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICggZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdXBwb3J0OiBJRTw5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgZXJyb3Igb24gZm9jdXMgdG8gaGlkZGVuIGVsZW1lbnQgKCMxNDg2LCAjMTI1MTgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxldCAudHJpZ2dlcigpIHJ1biB0aGUgaGFuZGxlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVsZWdhdGVUeXBlOiBcImZvY3VzaW5cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJsdXI6IHtcbiAgICAgICAgICAgICAgICB0cmlnZ2VyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzID09PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuYmx1ciApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmx1cigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWxlZ2F0ZVR5cGU6IFwiZm9jdXNvdXRcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsaWNrOiB7XG4gICAgICAgICAgICAgICAgLy8gRm9yIGNoZWNrYm94LCBmaXJlIG5hdGl2ZSBldmVudCBzbyBjaGVja2VkIHN0YXRlIHdpbGwgYmUgcmlnaHRcbiAgICAgICAgICAgICAgICB0cmlnZ2VyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBqUXVlcnkubm9kZU5hbWUoIHRoaXMsIFwiaW5wdXRcIiApICYmIHRoaXMudHlwZSA9PT0gXCJjaGVja2JveFwiICYmIHRoaXMuY2xpY2sgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgLy8gRm9yIGNyb3NzLWJyb3dzZXIgY29uc2lzdGVuY3ksIGRvbid0IGZpcmUgbmF0aXZlIC5jbGljaygpIG9uIGxpbmtzXG4gICAgICAgICAgICAgICAgX2RlZmF1bHQ6IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5ub2RlTmFtZSggZXZlbnQudGFyZ2V0LCBcImFcIiApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGJlZm9yZXVubG9hZDoge1xuICAgICAgICAgICAgICAgIHBvc3REaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEV2ZW4gd2hlbiByZXR1cm5WYWx1ZSBlcXVhbHMgdG8gdW5kZWZpbmVkIEZpcmVmb3ggd2lsbCBzdGlsbCBzaG93IGFsZXJ0XG4gICAgICAgICAgICAgICAgICAgIGlmICggZXZlbnQucmVzdWx0ICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gZXZlbnQucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNpbXVsYXRlOiBmdW5jdGlvbiggdHlwZSwgZWxlbSwgZXZlbnQsIGJ1YmJsZSApIHtcbiAgICAgICAgICAgIC8vIFBpZ2d5YmFjayBvbiBhIGRvbm9yIGV2ZW50IHRvIHNpbXVsYXRlIGEgZGlmZmVyZW50IG9uZS5cbiAgICAgICAgICAgIC8vIEZha2Ugb3JpZ2luYWxFdmVudCB0byBhdm9pZCBkb25vcidzIHN0b3BQcm9wYWdhdGlvbiwgYnV0IGlmIHRoZVxuICAgICAgICAgICAgLy8gc2ltdWxhdGVkIGV2ZW50IHByZXZlbnRzIGRlZmF1bHQgdGhlbiB3ZSBkbyB0aGUgc2FtZSBvbiB0aGUgZG9ub3IuXG4gICAgICAgICAgICB2YXIgZSA9IGpRdWVyeS5leHRlbmQoXG4gICAgICAgICAgICAgICAgbmV3IGpRdWVyeS5FdmVudCgpLFxuICAgICAgICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgaXNTaW11bGF0ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICggYnViYmxlICkge1xuICAgICAgICAgICAgICAgIGpRdWVyeS5ldmVudC50cmlnZ2VyKCBlLCBudWxsLCBlbGVtICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGpRdWVyeS5ldmVudC5kaXNwYXRjaC5jYWxsKCBlbGVtLCBlICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIGUuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBqUXVlcnkucmVtb3ZlRXZlbnQgPSBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyID9cbiAgICAgICAgZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHtcbiAgICAgICAgICAgIGlmICggZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyICkge1xuICAgICAgICAgICAgICAgIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciggdHlwZSwgaGFuZGxlLCBmYWxzZSApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IDpcbiAgICAgICAgZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gXCJvblwiICsgdHlwZTtcblxuICAgICAgICAgICAgaWYgKCBlbGVtLmRldGFjaEV2ZW50ICkge1xuXG4gICAgICAgICAgICAgICAgLy8gIzg1NDUsICM3MDU0LCBwcmV2ZW50aW5nIG1lbW9yeSBsZWFrcyBmb3IgY3VzdG9tIGV2ZW50cyBpbiBJRTYtOFxuICAgICAgICAgICAgICAgIC8vIGRldGFjaEV2ZW50IG5lZWRlZCBwcm9wZXJ0eSBvbiBlbGVtZW50LCBieSBuYW1lIG9mIHRoYXQgZXZlbnQsIHRvIHByb3Blcmx5IGV4cG9zZSBpdCB0byBHQ1xuICAgICAgICAgICAgICAgIGlmICggdHlwZW9mIGVsZW1bIG5hbWUgXSA9PT0gY29yZV9zdHJ1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1bIG5hbWUgXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZWxlbS5kZXRhY2hFdmVudCggbmFtZSwgaGFuZGxlICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICBqUXVlcnkuRXZlbnQgPSBmdW5jdGlvbiggc3JjLCBwcm9wcyApIHtcbiAgICAgICAgLy8gQWxsb3cgaW5zdGFudGlhdGlvbiB3aXRob3V0IHRoZSAnbmV3JyBrZXl3b3JkXG4gICAgICAgIGlmICggISh0aGlzIGluc3RhbmNlb2YgalF1ZXJ5LkV2ZW50KSApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgalF1ZXJ5LkV2ZW50KCBzcmMsIHByb3BzICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdmVudCBvYmplY3RcbiAgICAgICAgaWYgKCBzcmMgJiYgc3JjLnR5cGUgKSB7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbmFsRXZlbnQgPSBzcmM7XG4gICAgICAgICAgICB0aGlzLnR5cGUgPSBzcmMudHlwZTtcblxuICAgICAgICAgICAgLy8gRXZlbnRzIGJ1YmJsaW5nIHVwIHRoZSBkb2N1bWVudCBtYXkgaGF2ZSBiZWVuIG1hcmtlZCBhcyBwcmV2ZW50ZWRcbiAgICAgICAgICAgIC8vIGJ5IGEgaGFuZGxlciBsb3dlciBkb3duIHRoZSB0cmVlOyByZWZsZWN0IHRoZSBjb3JyZWN0IHZhbHVlLlxuICAgICAgICAgICAgdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSAoIHNyYy5kZWZhdWx0UHJldmVudGVkIHx8IHNyYy5yZXR1cm5WYWx1ZSA9PT0gZmFsc2UgfHxcbiAgICAgICAgICAgIHNyYy5nZXRQcmV2ZW50RGVmYXVsdCAmJiBzcmMuZ2V0UHJldmVudERlZmF1bHQoKSApID8gcmV0dXJuVHJ1ZSA6IHJldHVybkZhbHNlO1xuXG4gICAgICAgICAgICAvLyBFdmVudCB0eXBlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnR5cGUgPSBzcmM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQdXQgZXhwbGljaXRseSBwcm92aWRlZCBwcm9wZXJ0aWVzIG9udG8gdGhlIGV2ZW50IG9iamVjdFxuICAgICAgICBpZiAoIHByb3BzICkge1xuICAgICAgICAgICAgalF1ZXJ5LmV4dGVuZCggdGhpcywgcHJvcHMgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBhIHRpbWVzdGFtcCBpZiBpbmNvbWluZyBldmVudCBkb2Vzbid0IGhhdmUgb25lXG4gICAgICAgIHRoaXMudGltZVN0YW1wID0gc3JjICYmIHNyYy50aW1lU3RhbXAgfHwgalF1ZXJ5Lm5vdygpO1xuXG4gICAgICAgIC8vIE1hcmsgaXQgYXMgZml4ZWRcbiAgICAgICAgdGhpc1sgalF1ZXJ5LmV4cGFuZG8gXSA9IHRydWU7XG4gICAgfTtcblxuLy8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nXG4vLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDAzMDMzMS9lY21hLXNjcmlwdC1iaW5kaW5nLmh0bWxcbiAgICBqUXVlcnkuRXZlbnQucHJvdG90eXBlID0ge1xuICAgICAgICBpc0RlZmF1bHRQcmV2ZW50ZWQ6IHJldHVybkZhbHNlLFxuICAgICAgICBpc1Byb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsXG4gICAgICAgIGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblxuICAgICAgICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuICAgICAgICAgICAgdGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSByZXR1cm5UcnVlO1xuICAgICAgICAgICAgaWYgKCAhZSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIHByZXZlbnREZWZhdWx0IGV4aXN0cywgcnVuIGl0IG9uIHRoZSBvcmlnaW5hbCBldmVudFxuICAgICAgICAgICAgaWYgKCBlLnByZXZlbnREZWZhdWx0ICkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIC8vIFN1cHBvcnQ6IElFXG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHNldCB0aGUgcmV0dXJuVmFsdWUgcHJvcGVydHkgb2YgdGhlIG9yaWdpbmFsIGV2ZW50IHRvIGZhbHNlXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXG4gICAgICAgICAgICB0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcbiAgICAgICAgICAgIGlmICggIWUgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgc3RvcFByb3BhZ2F0aW9uIGV4aXN0cywgcnVuIGl0IG9uIHRoZSBvcmlnaW5hbCBldmVudFxuICAgICAgICAgICAgaWYgKCBlLnN0b3BQcm9wYWdhdGlvbiApIHtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTdXBwb3J0OiBJRVxuICAgICAgICAgICAgLy8gU2V0IHRoZSBjYW5jZWxCdWJibGUgcHJvcGVydHkgb2YgdGhlIG9yaWdpbmFsIGV2ZW50IHRvIHRydWVcbiAgICAgICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuICAgICAgICAgICAgdGhpcy5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgIH07XG5cbi8vIENyZWF0ZSBtb3VzZWVudGVyL2xlYXZlIGV2ZW50cyB1c2luZyBtb3VzZW92ZXIvb3V0IGFuZCBldmVudC10aW1lIGNoZWNrc1xuICAgIGpRdWVyeS5lYWNoKHtcbiAgICAgICAgbW91c2VlbnRlcjogXCJtb3VzZW92ZXJcIixcbiAgICAgICAgbW91c2VsZWF2ZTogXCJtb3VzZW91dFwiXG4gICAgfSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHtcbiAgICAgICAgalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIG9yaWcgXSA9IHtcbiAgICAgICAgICAgIGRlbGVnYXRlVHlwZTogZml4LFxuICAgICAgICAgICAgYmluZFR5cGU6IGZpeCxcblxuICAgICAgICAgICAgaGFuZGxlOiBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJldCxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgcmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQsXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZU9iaiA9IGV2ZW50LmhhbmRsZU9iajtcblxuICAgICAgICAgICAgICAgIC8vIEZvciBtb3VzZW50ZXIvbGVhdmUgY2FsbCB0aGUgaGFuZGxlciBpZiByZWxhdGVkIGlzIG91dHNpZGUgdGhlIHRhcmdldC5cbiAgICAgICAgICAgICAgICAvLyBOQjogTm8gcmVsYXRlZFRhcmdldCBpZiB0aGUgbW91c2UgbGVmdC9lbnRlcmVkIHRoZSBicm93c2VyIHdpbmRvd1xuICAgICAgICAgICAgICAgIGlmICggIXJlbGF0ZWQgfHwgKHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhalF1ZXJ5LmNvbnRhaW5zKCB0YXJnZXQsIHJlbGF0ZWQgKSkgKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnR5cGUgPSBoYW5kbGVPYmoub3JpZ1R5cGU7XG4gICAgICAgICAgICAgICAgICAgIHJldCA9IGhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQudHlwZSA9IGZpeDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KTtcblxuLy8gSUUgc3VibWl0IGRlbGVnYXRpb25cbiAgICBpZiAoICFqUXVlcnkuc3VwcG9ydC5zdWJtaXRCdWJibGVzICkge1xuXG4gICAgICAgIGpRdWVyeS5ldmVudC5zcGVjaWFsLnN1Ym1pdCA9IHtcbiAgICAgICAgICAgIHNldHVwOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IG5lZWQgdGhpcyBmb3IgZGVsZWdhdGVkIGZvcm0gc3VibWl0IGV2ZW50c1xuICAgICAgICAgICAgICAgIGlmICggalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImZvcm1cIiApICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gTGF6eS1hZGQgYSBzdWJtaXQgaGFuZGxlciB3aGVuIGEgZGVzY2VuZGFudCBmb3JtIG1heSBwb3RlbnRpYWxseSBiZSBzdWJtaXR0ZWRcbiAgICAgICAgICAgICAgICBqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCBcImNsaWNrLl9zdWJtaXQga2V5cHJlc3MuX3N1Ym1pdFwiLCBmdW5jdGlvbiggZSApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTm9kZSBuYW1lIGNoZWNrIGF2b2lkcyBhIFZNTC1yZWxhdGVkIGNyYXNoIGluIElFICgjOTgwNylcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBlLnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0gPSBqUXVlcnkubm9kZU5hbWUoIGVsZW0sIFwiaW5wdXRcIiApIHx8IGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgXCJidXR0b25cIiApID8gZWxlbS5mb3JtIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGZvcm0gJiYgIWpRdWVyeS5fZGF0YSggZm9ybSwgXCJzdWJtaXRCdWJibGVzXCIgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5ldmVudC5hZGQoIGZvcm0sIFwic3VibWl0Ll9zdWJtaXRcIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50Ll9zdWJtaXRfYnViYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5Ll9kYXRhKCBmb3JtLCBcInN1Ym1pdEJ1YmJsZXNcIiwgdHJ1ZSApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIHVuZGVmaW5lZCBzaW5jZSB3ZSBkb24ndCBuZWVkIGFuIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBwb3N0RGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBmb3JtIHdhcyBzdWJtaXR0ZWQgYnkgdGhlIHVzZXIsIGJ1YmJsZSB0aGUgZXZlbnQgdXAgdGhlIHRyZWVcbiAgICAgICAgICAgICAgICBpZiAoIGV2ZW50Ll9zdWJtaXRfYnViYmxlICkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgZXZlbnQuX3N1Ym1pdF9idWJibGU7XG4gICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5wYXJlbnROb2RlICYmICFldmVudC5pc1RyaWdnZXIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZXZlbnQuc2ltdWxhdGUoIFwic3VibWl0XCIsIHRoaXMucGFyZW50Tm9kZSwgZXZlbnQsIHRydWUgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHRlYXJkb3duOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IG5lZWQgdGhpcyBmb3IgZGVsZWdhdGVkIGZvcm0gc3VibWl0IGV2ZW50c1xuICAgICAgICAgICAgICAgIGlmICggalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImZvcm1cIiApICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGRlbGVnYXRlZCBoYW5kbGVyczsgY2xlYW5EYXRhIGV2ZW50dWFsbHkgcmVhcHMgc3VibWl0IGhhbmRsZXJzIGF0dGFjaGVkIGFib3ZlXG4gICAgICAgICAgICAgICAgalF1ZXJ5LmV2ZW50LnJlbW92ZSggdGhpcywgXCIuX3N1Ym1pdFwiICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4vLyBJRSBjaGFuZ2UgZGVsZWdhdGlvbiBhbmQgY2hlY2tib3gvcmFkaW8gZml4XG4gICAgaWYgKCAhalF1ZXJ5LnN1cHBvcnQuY2hhbmdlQnViYmxlcyApIHtcblxuICAgICAgICBqUXVlcnkuZXZlbnQuc3BlY2lhbC5jaGFuZ2UgPSB7XG5cbiAgICAgICAgICAgIHNldHVwOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIGlmICggcmZvcm1FbGVtcy50ZXN0KCB0aGlzLm5vZGVOYW1lICkgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElFIGRvZXNuJ3QgZmlyZSBjaGFuZ2Ugb24gYSBjaGVjay9yYWRpbyB1bnRpbCBibHVyOyB0cmlnZ2VyIGl0IG9uIGNsaWNrXG4gICAgICAgICAgICAgICAgICAgIC8vIGFmdGVyIGEgcHJvcGVydHljaGFuZ2UuIEVhdCB0aGUgYmx1ci1jaGFuZ2UgaW4gc3BlY2lhbC5jaGFuZ2UuaGFuZGxlLlxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIHN0aWxsIGZpcmVzIG9uY2hhbmdlIGEgc2Vjb25kIHRpbWUgZm9yIGNoZWNrL3JhZGlvIGFmdGVyIGJsdXIuXG4gICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy50eXBlID09PSBcImNoZWNrYm94XCIgfHwgdGhpcy50eXBlID09PSBcInJhZGlvXCIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCBcInByb3BlcnR5Y2hhbmdlLl9jaGFuZ2VcIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZXZlbnQub3JpZ2luYWxFdmVudC5wcm9wZXJ0eU5hbWUgPT09IFwiY2hlY2tlZFwiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9qdXN0X2NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgXCJjbGljay5fY2hhbmdlXCIsIGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMuX2p1c3RfY2hhbmdlZCAmJiAhZXZlbnQuaXNUcmlnZ2VyICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9qdXN0X2NoYW5nZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxsb3cgdHJpZ2dlcmVkLCBzaW11bGF0ZWQgY2hhbmdlIGV2ZW50cyAoIzExNTAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5ldmVudC5zaW11bGF0ZSggXCJjaGFuZ2VcIiwgdGhpcywgZXZlbnQsIHRydWUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRGVsZWdhdGVkIGV2ZW50OyBsYXp5LWFkZCBhIGNoYW5nZSBoYW5kbGVyIG9uIGRlc2NlbmRhbnQgaW5wdXRzXG4gICAgICAgICAgICAgICAgalF1ZXJ5LmV2ZW50LmFkZCggdGhpcywgXCJiZWZvcmVhY3RpdmF0ZS5fY2hhbmdlXCIsIGZ1bmN0aW9uKCBlICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IGUudGFyZ2V0O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggcmZvcm1FbGVtcy50ZXN0KCBlbGVtLm5vZGVOYW1lICkgJiYgIWpRdWVyeS5fZGF0YSggZWxlbSwgXCJjaGFuZ2VCdWJibGVzXCIgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5ldmVudC5hZGQoIGVsZW0sIFwiY2hhbmdlLl9jaGFuZ2VcIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpcy5wYXJlbnROb2RlICYmICFldmVudC5pc1NpbXVsYXRlZCAmJiAhZXZlbnQuaXNUcmlnZ2VyICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZXZlbnQuc2ltdWxhdGUoIFwiY2hhbmdlXCIsIHRoaXMucGFyZW50Tm9kZSwgZXZlbnQsIHRydWUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5fZGF0YSggZWxlbSwgXCJjaGFuZ2VCdWJibGVzXCIsIHRydWUgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgaGFuZGxlOiBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSBldmVudC50YXJnZXQ7XG5cbiAgICAgICAgICAgICAgICAvLyBTd2FsbG93IG5hdGl2ZSBjaGFuZ2UgZXZlbnRzIGZyb20gY2hlY2tib3gvcmFkaW8sIHdlIGFscmVhZHkgdHJpZ2dlcmVkIHRoZW0gYWJvdmVcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMgIT09IGVsZW0gfHwgZXZlbnQuaXNTaW11bGF0ZWQgfHwgZXZlbnQuaXNUcmlnZ2VyIHx8IChlbGVtLnR5cGUgIT09IFwicmFkaW9cIiAmJiBlbGVtLnR5cGUgIT09IFwiY2hlY2tib3hcIikgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBldmVudC5oYW5kbGVPYmouaGFuZGxlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgdGVhcmRvd246IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGpRdWVyeS5ldmVudC5yZW1vdmUoIHRoaXMsIFwiLl9jaGFuZ2VcIiApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuICFyZm9ybUVsZW1zLnRlc3QoIHRoaXMubm9kZU5hbWUgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbi8vIENyZWF0ZSBcImJ1YmJsaW5nXCIgZm9jdXMgYW5kIGJsdXIgZXZlbnRzXG4gICAgaWYgKCAhalF1ZXJ5LnN1cHBvcnQuZm9jdXNpbkJ1YmJsZXMgKSB7XG4gICAgICAgIGpRdWVyeS5lYWNoKHsgZm9jdXM6IFwiZm9jdXNpblwiLCBibHVyOiBcImZvY3Vzb3V0XCIgfSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHtcblxuICAgICAgICAgICAgLy8gQXR0YWNoIGEgc2luZ2xlIGNhcHR1cmluZyBoYW5kbGVyIHdoaWxlIHNvbWVvbmUgd2FudHMgZm9jdXNpbi9mb2N1c291dFxuICAgICAgICAgICAgdmFyIGF0dGFjaGVzID0gMCxcbiAgICAgICAgICAgICAgICBoYW5kbGVyID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZXZlbnQuc2ltdWxhdGUoIGZpeCwgZXZlbnQudGFyZ2V0LCBqUXVlcnkuZXZlbnQuZml4KCBldmVudCApLCB0cnVlICk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGZpeCBdID0ge1xuICAgICAgICAgICAgICAgIHNldHVwOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBhdHRhY2hlcysrID09PSAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0ZWFyZG93bjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggLS1hdHRhY2hlcyA9PT0gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIG9yaWcsIGhhbmRsZXIsIHRydWUgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGpRdWVyeS5mbi5leHRlbmQoe1xuXG4gICAgICAgIG9uOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgLypJTlRFUk5BTCovIG9uZSApIHtcbiAgICAgICAgICAgIHZhciB0eXBlLCBvcmlnRm47XG5cbiAgICAgICAgICAgIC8vIFR5cGVzIGNhbiBiZSBhIG1hcCBvZiB0eXBlcy9oYW5kbGVyc1xuICAgICAgICAgICAgaWYgKCB0eXBlb2YgdHlwZXMgPT09IFwib2JqZWN0XCIgKSB7XG4gICAgICAgICAgICAgICAgLy8gKCB0eXBlcy1PYmplY3QsIHNlbGVjdG9yLCBkYXRhIClcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gKCB0eXBlcy1PYmplY3QsIGRhdGEgKVxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gZGF0YSB8fCBzZWxlY3RvcjtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoIHR5cGUgaW4gdHlwZXMgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub24oIHR5cGUsIHNlbGVjdG9yLCBkYXRhLCB0eXBlc1sgdHlwZSBdLCBvbmUgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggZGF0YSA9PSBudWxsICYmIGZuID09IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgLy8gKCB0eXBlcywgZm4gKVxuICAgICAgICAgICAgICAgIGZuID0gc2VsZWN0b3I7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSBlbHNlIGlmICggZm4gPT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gKCB0eXBlcywgc2VsZWN0b3IsIGZuIClcbiAgICAgICAgICAgICAgICAgICAgZm4gPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICggdHlwZXMsIGRhdGEsIGZuIClcbiAgICAgICAgICAgICAgICAgICAgZm4gPSBkYXRhO1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0gc2VsZWN0b3I7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggZm4gPT09IGZhbHNlICkge1xuICAgICAgICAgICAgICAgIGZuID0gcmV0dXJuRmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCAhZm4gKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggb25lID09PSAxICkge1xuICAgICAgICAgICAgICAgIG9yaWdGbiA9IGZuO1xuICAgICAgICAgICAgICAgIGZuID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDYW4gdXNlIGFuIGVtcHR5IHNldCwgc2luY2UgZXZlbnQgY29udGFpbnMgdGhlIGluZm9cbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCkub2ZmKCBldmVudCApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vIFVzZSBzYW1lIGd1aWQgc28gY2FsbGVyIGNhbiByZW1vdmUgdXNpbmcgb3JpZ0ZuXG4gICAgICAgICAgICAgICAgZm4uZ3VpZCA9IG9yaWdGbi5ndWlkIHx8ICggb3JpZ0ZuLmd1aWQgPSBqUXVlcnkuZ3VpZCsrICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCB0eXBlcywgZm4sIGRhdGEsIHNlbGVjdG9yICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25lOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCAxICk7XG4gICAgICAgIH0sXG4gICAgICAgIG9mZjogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZm4gKSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlT2JqLCB0eXBlO1xuICAgICAgICAgICAgaWYgKCB0eXBlcyAmJiB0eXBlcy5wcmV2ZW50RGVmYXVsdCAmJiB0eXBlcy5oYW5kbGVPYmogKSB7XG4gICAgICAgICAgICAgICAgLy8gKCBldmVudCApICBkaXNwYXRjaGVkIGpRdWVyeS5FdmVudFxuICAgICAgICAgICAgICAgIGhhbmRsZU9iaiA9IHR5cGVzLmhhbmRsZU9iajtcbiAgICAgICAgICAgICAgICBqUXVlcnkoIHR5cGVzLmRlbGVnYXRlVGFyZ2V0ICkub2ZmKFxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVPYmoubmFtZXNwYWNlID8gaGFuZGxlT2JqLm9yaWdUeXBlICsgXCIuXCIgKyBoYW5kbGVPYmoubmFtZXNwYWNlIDogaGFuZGxlT2JqLm9yaWdUeXBlLFxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVPYmouc2VsZWN0b3IsXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZU9iai5oYW5kbGVyXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuICAgICAgICAgICAgICAgIC8vICggdHlwZXMtb2JqZWN0IFssIHNlbGVjdG9yXSApXG4gICAgICAgICAgICAgICAgZm9yICggdHlwZSBpbiB0eXBlcyApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vZmYoIHR5cGUsIHNlbGVjdG9yLCB0eXBlc1sgdHlwZSBdICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCBzZWxlY3RvciA9PT0gZmFsc2UgfHwgdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgKSB7XG4gICAgICAgICAgICAgICAgLy8gKCB0eXBlcyBbLCBmbl0gKVxuICAgICAgICAgICAgICAgIGZuID0gc2VsZWN0b3I7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIGZuID09PSBmYWxzZSApIHtcbiAgICAgICAgICAgICAgICBmbiA9IHJldHVybkZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCB0eXBlcywgZm4sIHNlbGVjdG9yICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICB0cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIHRoaXMgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICB0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG4gICAgICAgICAgICB2YXIgZWxlbSA9IHRoaXNbMF07XG4gICAgICAgICAgICBpZiAoIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCBlbGVtLCB0cnVlICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgaXNTaW1wbGUgPSAvXi5bXjojXFxbXFwuLF0qJC8sXG4gICAgICAgIHJwYXJlbnRzcHJldiA9IC9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLFxuICAgICAgICBybmVlZHNDb250ZXh0ID0galF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LFxuICAgIC8vIG1ldGhvZHMgZ3VhcmFudGVlZCB0byBwcm9kdWNlIGEgdW5pcXVlIHNldCB3aGVuIHN0YXJ0aW5nIGZyb20gYSB1bmlxdWUgc2V0XG4gICAgICAgIGd1YXJhbnRlZWRVbmlxdWUgPSB7XG4gICAgICAgICAgICBjaGlsZHJlbjogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRlbnRzOiB0cnVlLFxuICAgICAgICAgICAgbmV4dDogdHJ1ZSxcbiAgICAgICAgICAgIHByZXY6IHRydWVcbiAgICAgICAgfTtcblxuICAgIGpRdWVyeS5mbi5leHRlbmQoe1xuICAgICAgICBmaW5kOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG4gICAgICAgICAgICB2YXIgaSxcbiAgICAgICAgICAgICAgICByZXQgPSBbXSxcbiAgICAgICAgICAgICAgICBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgICAgICBsZW4gPSBzZWxmLmxlbmd0aDtcblxuICAgICAgICAgICAgaWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkoIHNlbGVjdG9yICkuZmlsdGVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBqUXVlcnkuY29udGFpbnMoIHNlbGZbIGkgXSwgdGhpcyApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkuZmluZCggc2VsZWN0b3IsIHNlbGZbIGkgXSwgcmV0ICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE5lZWRlZCBiZWNhdXNlICQoIHNlbGVjdG9yLCBjb250ZXh0ICkgYmVjb21lcyAkKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKVxuICAgICAgICAgICAgcmV0ID0gdGhpcy5wdXNoU3RhY2soIGxlbiA+IDEgPyBqUXVlcnkudW5pcXVlKCByZXQgKSA6IHJldCApO1xuICAgICAgICAgICAgcmV0LnNlbGVjdG9yID0gdGhpcy5zZWxlY3RvciA/IHRoaXMuc2VsZWN0b3IgKyBcIiBcIiArIHNlbGVjdG9yIDogc2VsZWN0b3I7XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9LFxuXG4gICAgICAgIGhhczogZnVuY3Rpb24oIHRhcmdldCApIHtcbiAgICAgICAgICAgIHZhciBpLFxuICAgICAgICAgICAgICAgIHRhcmdldHMgPSBqUXVlcnkoIHRhcmdldCwgdGhpcyApLFxuICAgICAgICAgICAgICAgIGxlbiA9IHRhcmdldHMubGVuZ3RoO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBqUXVlcnkuY29udGFpbnMoIHRoaXMsIHRhcmdldHNbaV0gKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgbm90OiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyh0aGlzLCBzZWxlY3RvciB8fCBbXSwgdHJ1ZSkgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBmaWx0ZXI6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KHRoaXMsIHNlbGVjdG9yIHx8IFtdLCBmYWxzZSkgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBpczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuICAgICAgICAgICAgcmV0dXJuICEhd2lubm93KFxuICAgICAgICAgICAgICAgIHRoaXMsXG5cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgcG9zaXRpb25hbC9yZWxhdGl2ZSBzZWxlY3RvciwgY2hlY2sgbWVtYmVyc2hpcCBpbiB0aGUgcmV0dXJuZWQgc2V0XG4gICAgICAgICAgICAgICAgLy8gc28gJChcInA6Zmlyc3RcIikuaXMoXCJwOmxhc3RcIikgd29uJ3QgcmV0dXJuIHRydWUgZm9yIGEgZG9jIHdpdGggdHdvIFwicFwiLlxuICAgICAgICAgICAgICAgIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiAmJiBybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICkgP1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoIHNlbGVjdG9yICkgOlxuICAgICAgICAgICAgICAgIHNlbGVjdG9yIHx8IFtdLFxuICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApLmxlbmd0aDtcbiAgICAgICAgfSxcblxuICAgICAgICBjbG9zZXN0OiBmdW5jdGlvbiggc2VsZWN0b3JzLCBjb250ZXh0ICkge1xuICAgICAgICAgICAgdmFyIGN1cixcbiAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICBsID0gdGhpcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgcmV0ID0gW10sXG4gICAgICAgICAgICAgICAgcG9zID0gcm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvcnMgKSB8fCB0eXBlb2Ygc2VsZWN0b3JzICE9PSBcInN0cmluZ1wiID9cbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCBzZWxlY3RvcnMsIGNvbnRleHQgfHwgdGhpcy5jb250ZXh0ICkgOlxuICAgICAgICAgICAgICAgICAgICAwO1xuXG4gICAgICAgICAgICBmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG4gICAgICAgICAgICAgICAgZm9yICggY3VyID0gdGhpc1tpXTsgY3VyICYmIGN1ciAhPT0gY29udGV4dDsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBza2lwIGRvY3VtZW50IGZyYWdtZW50c1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGN1ci5ub2RlVHlwZSA8IDExICYmIChwb3MgP1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zLmluZGV4KGN1cikgPiAtMSA6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBwYXNzIG5vbi1lbGVtZW50cyB0byBTaXp6bGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ci5ub2RlVHlwZSA9PT0gMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKGN1ciwgc2VsZWN0b3JzKSkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ciA9IHJldC5wdXNoKCBjdXIgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoU3RhY2soIHJldC5sZW5ndGggPiAxID8galF1ZXJ5LnVuaXF1ZSggcmV0ICkgOiByZXQgKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIHBvc2l0aW9uIG9mIGFuIGVsZW1lbnQgd2l0aGluXG4gICAgICAgIC8vIHRoZSBtYXRjaGVkIHNldCBvZiBlbGVtZW50c1xuICAgICAgICBpbmRleDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cbiAgICAgICAgICAgIC8vIE5vIGFyZ3VtZW50LCByZXR1cm4gaW5kZXggaW4gcGFyZW50XG4gICAgICAgICAgICBpZiAoICFlbGVtICkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoIHRoaXNbMF0gJiYgdGhpc1swXS5wYXJlbnROb2RlICkgPyB0aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aCA6IC0xO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpbmRleCBpbiBzZWxlY3RvclxuICAgICAgICAgICAgaWYgKCB0eXBlb2YgZWxlbSA9PT0gXCJzdHJpbmdcIiApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4galF1ZXJ5LmluQXJyYXkoIHRoaXNbMF0sIGpRdWVyeSggZWxlbSApICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIExvY2F0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGRlc2lyZWQgZWxlbWVudFxuICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5pbkFycmF5KFxuICAgICAgICAgICAgICAgIC8vIElmIGl0IHJlY2VpdmVzIGEgalF1ZXJ5IG9iamVjdCwgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdXNlZFxuICAgICAgICAgICAgICAgIGVsZW0uanF1ZXJ5ID8gZWxlbVswXSA6IGVsZW0sIHRoaXMgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGQ6IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcbiAgICAgICAgICAgIHZhciBzZXQgPSB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgP1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoIHNlbGVjdG9yLCBjb250ZXh0ICkgOlxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciAmJiBzZWxlY3Rvci5ub2RlVHlwZSA/IFsgc2VsZWN0b3IgXSA6IHNlbGVjdG9yICksXG4gICAgICAgICAgICAgICAgYWxsID0galF1ZXJ5Lm1lcmdlKCB0aGlzLmdldCgpLCBzZXQgKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkudW5pcXVlKGFsbCkgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGRCYWNrOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgP1xuICAgICAgICAgICAgICAgIHRoaXMucHJldk9iamVjdCA6IHRoaXMucHJldk9iamVjdC5maWx0ZXIoc2VsZWN0b3IpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBzaWJsaW5nKCBjdXIsIGRpciApIHtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgY3VyID0gY3VyWyBkaXIgXTtcbiAgICAgICAgfSB3aGlsZSAoIGN1ciAmJiBjdXIubm9kZVR5cGUgIT09IDEgKTtcblxuICAgICAgICByZXR1cm4gY3VyO1xuICAgIH1cblxuICAgIGpRdWVyeS5lYWNoKHtcbiAgICAgICAgcGFyZW50OiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG4gICAgICAgICAgICByZXR1cm4gcGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gMTEgPyBwYXJlbnQgOiBudWxsO1xuICAgICAgICB9LFxuICAgICAgICBwYXJlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgIHJldHVybiBqUXVlcnkuZGlyKCBlbGVtLCBcInBhcmVudE5vZGVcIiApO1xuICAgICAgICB9LFxuICAgICAgICBwYXJlbnRzVW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcbiAgICAgICAgICAgIHJldHVybiBqUXVlcnkuZGlyKCBlbGVtLCBcInBhcmVudE5vZGVcIiwgdW50aWwgKTtcbiAgICAgICAgfSxcbiAgICAgICAgbmV4dDogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICByZXR1cm4gc2libGluZyggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG4gICAgICAgIH0sXG4gICAgICAgIHByZXY6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgcmV0dXJuIHNpYmxpbmcoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcbiAgICAgICAgfSxcbiAgICAgICAgbmV4dEFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG4gICAgICAgIH0sXG4gICAgICAgIHByZXZBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcbiAgICAgICAgfSxcbiAgICAgICAgbmV4dFVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiLCB1bnRpbCApO1xuICAgICAgICB9LFxuICAgICAgICBwcmV2VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcbiAgICAgICAgICAgIHJldHVybiBqUXVlcnkuZGlyKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiLCB1bnRpbCApO1xuICAgICAgICB9LFxuICAgICAgICBzaWJsaW5nczogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5LnNpYmxpbmcoICggZWxlbS5wYXJlbnROb2RlIHx8IHt9ICkuZmlyc3RDaGlsZCwgZWxlbSApO1xuICAgICAgICB9LFxuICAgICAgICBjaGlsZHJlbjogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5LnNpYmxpbmcoIGVsZW0uZmlyc3RDaGlsZCApO1xuICAgICAgICB9LFxuICAgICAgICBjb250ZW50czogZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcImlmcmFtZVwiICkgP1xuICAgICAgICAgICAgZWxlbS5jb250ZW50RG9jdW1lbnQgfHwgZWxlbS5jb250ZW50V2luZG93LmRvY3VtZW50IDpcbiAgICAgICAgICAgICAgICBqUXVlcnkubWVyZ2UoIFtdLCBlbGVtLmNoaWxkTm9kZXMgKTtcbiAgICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uKCBuYW1lLCBmbiApIHtcbiAgICAgICAgalF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggdW50aWwsIHNlbGVjdG9yICkge1xuICAgICAgICAgICAgdmFyIHJldCA9IGpRdWVyeS5tYXAoIHRoaXMsIGZuLCB1bnRpbCApO1xuXG4gICAgICAgICAgICBpZiAoIG5hbWUuc2xpY2UoIC01ICkgIT09IFwiVW50aWxcIiApIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvciA9IHVudGlsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIHNlbGVjdG9yICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcbiAgICAgICAgICAgICAgICByZXQgPSBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgcmV0ICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggdGhpcy5sZW5ndGggPiAxICkge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzXG4gICAgICAgICAgICAgICAgaWYgKCAhZ3VhcmFudGVlZFVuaXF1ZVsgbmFtZSBdICkge1xuICAgICAgICAgICAgICAgICAgICByZXQgPSBqUXVlcnkudW5pcXVlKCByZXQgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBSZXZlcnNlIG9yZGVyIGZvciBwYXJlbnRzKiBhbmQgcHJldi1kZXJpdmF0aXZlc1xuICAgICAgICAgICAgICAgIGlmICggcnBhcmVudHNwcmV2LnRlc3QoIG5hbWUgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0ID0gcmV0LnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnB1c2hTdGFjayggcmV0ICk7XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICBqUXVlcnkuZXh0ZW5kKHtcbiAgICAgICAgZmlsdGVyOiBmdW5jdGlvbiggZXhwciwgZWxlbXMsIG5vdCApIHtcbiAgICAgICAgICAgIHZhciBlbGVtID0gZWxlbXNbIDAgXTtcblxuICAgICAgICAgICAgaWYgKCBub3QgKSB7XG4gICAgICAgICAgICAgICAgZXhwciA9IFwiOm5vdChcIiArIGV4cHIgKyBcIilcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGVsZW1zLmxlbmd0aCA9PT0gMSAmJiBlbGVtLm5vZGVUeXBlID09PSAxID9cbiAgICAgICAgICAgICAgICBqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGVsZW0sIGV4cHIgKSA/IFsgZWxlbSBdIDogW10gOlxuICAgICAgICAgICAgICAgIGpRdWVyeS5maW5kLm1hdGNoZXMoIGV4cHIsIGpRdWVyeS5ncmVwKCBlbGVtcywgZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtLm5vZGVUeXBlID09PSAxO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSxcblxuICAgICAgICBkaXI6IGZ1bmN0aW9uKCBlbGVtLCBkaXIsIHVudGlsICkge1xuICAgICAgICAgICAgdmFyIG1hdGNoZWQgPSBbXSxcbiAgICAgICAgICAgICAgICBjdXIgPSBlbGVtWyBkaXIgXTtcblxuICAgICAgICAgICAgd2hpbGUgKCBjdXIgJiYgY3VyLm5vZGVUeXBlICE9PSA5ICYmICh1bnRpbCA9PT0gdW5kZWZpbmVkIHx8IGN1ci5ub2RlVHlwZSAhPT0gMSB8fCAhalF1ZXJ5KCBjdXIgKS5pcyggdW50aWwgKSkgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCBjdXIubm9kZVR5cGUgPT09IDEgKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZWQucHVzaCggY3VyICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1ciA9IGN1cltkaXJdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoZWQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2libGluZzogZnVuY3Rpb24oIG4sIGVsZW0gKSB7XG4gICAgICAgICAgICB2YXIgciA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKCA7IG47IG4gPSBuLm5leHRTaWJsaW5nICkge1xuICAgICAgICAgICAgICAgIGlmICggbi5ub2RlVHlwZSA9PT0gMSAmJiBuICE9PSBlbGVtICkge1xuICAgICAgICAgICAgICAgICAgICByLnB1c2goIG4gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9XG4gICAgfSk7XG5cbi8vIEltcGxlbWVudCB0aGUgaWRlbnRpY2FsIGZ1bmN0aW9uYWxpdHkgZm9yIGZpbHRlciBhbmQgbm90XG4gICAgZnVuY3Rpb24gd2lubm93KCBlbGVtZW50cywgcXVhbGlmaWVyLCBub3QgKSB7XG4gICAgICAgIGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHF1YWxpZmllciApICkge1xuICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7XG4gICAgICAgICAgICAgICAgLyoganNoaW50IC1XMDE4ICovXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhcXVhbGlmaWVyLmNhbGwoIGVsZW0sIGksIGVsZW0gKSAhPT0gbm90O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggcXVhbGlmaWVyLm5vZGVUeXBlICkge1xuICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICggZWxlbSA9PT0gcXVhbGlmaWVyICkgIT09IG5vdDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIHR5cGVvZiBxdWFsaWZpZXIgPT09IFwic3RyaW5nXCIgKSB7XG4gICAgICAgICAgICBpZiAoIGlzU2ltcGxlLnRlc3QoIHF1YWxpZmllciApICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzLCBub3QgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcXVhbGlmaWVyID0galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cyApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICByZXR1cm4gKCBqUXVlcnkuaW5BcnJheSggZWxlbSwgcXVhbGlmaWVyICkgPj0gMCApICE9PSBub3Q7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVTYWZlRnJhZ21lbnQoIGRvY3VtZW50ICkge1xuICAgICAgICB2YXIgbGlzdCA9IG5vZGVOYW1lcy5zcGxpdCggXCJ8XCIgKSxcbiAgICAgICAgICAgIHNhZmVGcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgICAgIGlmICggc2FmZUZyYWcuY3JlYXRlRWxlbWVudCApIHtcbiAgICAgICAgICAgIHdoaWxlICggbGlzdC5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgc2FmZUZyYWcuY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgbGlzdC5wb3AoKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNhZmVGcmFnO1xuICAgIH1cblxuICAgIHZhciBub2RlTmFtZXMgPSBcImFiYnJ8YXJ0aWNsZXxhc2lkZXxhdWRpb3xiZGl8Y2FudmFzfGRhdGF8ZGF0YWxpc3R8ZGV0YWlsc3xmaWdjYXB0aW9ufGZpZ3VyZXxmb290ZXJ8XCIgK1xuICAgICAgICAgICAgXCJoZWFkZXJ8aGdyb3VwfG1hcmt8bWV0ZXJ8bmF2fG91dHB1dHxwcm9ncmVzc3xzZWN0aW9ufHN1bW1hcnl8dGltZXx2aWRlb1wiLFxuICAgICAgICByaW5saW5lalF1ZXJ5ID0gLyBqUXVlcnlcXGQrPVwiKD86bnVsbHxcXGQrKVwiL2csXG4gICAgICAgIHJub3NoaW1jYWNoZSA9IG5ldyBSZWdFeHAoXCI8KD86XCIgKyBub2RlTmFtZXMgKyBcIilbXFxcXHMvPl1cIiwgXCJpXCIpLFxuICAgICAgICBybGVhZGluZ1doaXRlc3BhY2UgPSAvXlxccysvLFxuICAgICAgICByeGh0bWxUYWcgPSAvPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Ol0rKVtePl0qKVxcLz4vZ2ksXG4gICAgICAgIHJ0YWdOYW1lID0gLzwoW1xcdzpdKykvLFxuICAgICAgICBydGJvZHkgPSAvPHRib2R5L2ksXG4gICAgICAgIHJodG1sID0gLzx8JiM/XFx3KzsvLFxuICAgICAgICBybm9Jbm5lcmh0bWwgPSAvPCg/OnNjcmlwdHxzdHlsZXxsaW5rKS9pLFxuICAgICAgICBtYW5pcHVsYXRpb25fcmNoZWNrYWJsZVR5cGUgPSAvXig/OmNoZWNrYm94fHJhZGlvKSQvaSxcbiAgICAvLyBjaGVja2VkPVwiY2hlY2tlZFwiIG9yIGNoZWNrZWRcbiAgICAgICAgcmNoZWNrZWQgPSAvY2hlY2tlZFxccyooPzpbXj1dfD1cXHMqLmNoZWNrZWQuKS9pLFxuICAgICAgICByc2NyaXB0VHlwZSA9IC9eJHxcXC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksXG4gICAgICAgIHJzY3JpcHRUeXBlTWFza2VkID0gL150cnVlXFwvKC4qKS8sXG4gICAgICAgIHJjbGVhblNjcmlwdCA9IC9eXFxzKjwhKD86XFxbQ0RBVEFcXFt8LS0pfCg/OlxcXVxcXXwtLSk+XFxzKiQvZyxcblxuICAgIC8vIFdlIGhhdmUgdG8gY2xvc2UgdGhlc2UgdGFncyB0byBzdXBwb3J0IFhIVE1MICgjMTMyMDApXG4gICAgICAgIHdyYXBNYXAgPSB7XG4gICAgICAgICAgICBvcHRpb246IFsgMSwgXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsIFwiPC9zZWxlY3Q+XCIgXSxcbiAgICAgICAgICAgIGxlZ2VuZDogWyAxLCBcIjxmaWVsZHNldD5cIiwgXCI8L2ZpZWxkc2V0PlwiIF0sXG4gICAgICAgICAgICBhcmVhOiBbIDEsIFwiPG1hcD5cIiwgXCI8L21hcD5cIiBdLFxuICAgICAgICAgICAgcGFyYW06IFsgMSwgXCI8b2JqZWN0PlwiLCBcIjwvb2JqZWN0PlwiIF0sXG4gICAgICAgICAgICB0aGVhZDogWyAxLCBcIjx0YWJsZT5cIiwgXCI8L3RhYmxlPlwiIF0sXG4gICAgICAgICAgICB0cjogWyAyLCBcIjx0YWJsZT48dGJvZHk+XCIsIFwiPC90Ym9keT48L3RhYmxlPlwiIF0sXG4gICAgICAgICAgICBjb2w6IFsgMiwgXCI8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPlwiLCBcIjwvY29sZ3JvdXA+PC90YWJsZT5cIiBdLFxuICAgICAgICAgICAgdGQ6IFsgMywgXCI8dGFibGU+PHRib2R5Pjx0cj5cIiwgXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIiBdLFxuXG4gICAgICAgICAgICAvLyBJRTYtOCBjYW4ndCBzZXJpYWxpemUgbGluaywgc2NyaXB0LCBzdHlsZSwgb3IgYW55IGh0bWw1IChOb1Njb3BlKSB0YWdzLFxuICAgICAgICAgICAgLy8gdW5sZXNzIHdyYXBwZWQgaW4gYSBkaXYgd2l0aCBub24tYnJlYWtpbmcgY2hhcmFjdGVycyBpbiBmcm9udCBvZiBpdC5cbiAgICAgICAgICAgIF9kZWZhdWx0OiBqUXVlcnkuc3VwcG9ydC5odG1sU2VyaWFsaXplID8gWyAwLCBcIlwiLCBcIlwiIF0gOiBbIDEsIFwiWDxkaXY+XCIsIFwiPC9kaXY+XCIgIF1cbiAgICAgICAgfSxcbiAgICAgICAgc2FmZUZyYWdtZW50ID0gY3JlYXRlU2FmZUZyYWdtZW50KCBkb2N1bWVudCApLFxuICAgICAgICBmcmFnbWVudERpdiA9IHNhZmVGcmFnbWVudC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSApO1xuXG4gICAgd3JhcE1hcC5vcHRncm91cCA9IHdyYXBNYXAub3B0aW9uO1xuICAgIHdyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7XG4gICAgd3JhcE1hcC50aCA9IHdyYXBNYXAudGQ7XG5cbiAgICBqUXVlcnkuZm4uZXh0ZW5kKHtcbiAgICAgICAgdGV4dDogZnVuY3Rpb24oIHZhbHVlICkge1xuICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5hY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS50ZXh0KCB0aGlzICkgOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtcHR5KCkuYXBwZW5kKCAoIHRoaXNbMF0gJiYgdGhpc1swXS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50ICkuY3JlYXRlVGV4dE5vZGUoIHZhbHVlICkgKTtcbiAgICAgICAgICAgIH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYXBwZW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuICAgICAgICAgICAgICAgIGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gbWFuaXB1bGF0aW9uVGFyZ2V0KCB0aGlzLCBlbGVtICk7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZCggZWxlbSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHByZXBlbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Lmluc2VydEJlZm9yZSggZWxlbSwgdGFyZ2V0LmZpcnN0Q2hpbGQgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBiZWZvcmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGVsZW0sIHRoaXMgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZnRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kb21NYW5pcCggYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcy5uZXh0U2libGluZyApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIGtlZXBEYXRhIGlzIGZvciBpbnRlcm5hbCB1c2Ugb25seS0tZG8gbm90IGRvY3VtZW50XG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCBrZWVwRGF0YSApIHtcbiAgICAgICAgICAgIHZhciBlbGVtLFxuICAgICAgICAgICAgICAgIGVsZW1zID0gc2VsZWN0b3IgPyBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgdGhpcyApIDogdGhpcyxcbiAgICAgICAgICAgICAgICBpID0gMDtcblxuICAgICAgICAgICAgZm9yICggOyAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoICFrZWVwRGF0YSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0gKSApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICggZWxlbS5wYXJlbnROb2RlICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIGtlZXBEYXRhICYmIGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRHbG9iYWxFdmFsKCBnZXRBbGwoIGVsZW0sIFwic2NyaXB0XCIgKSApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggZWxlbSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZW1wdHk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGVsZW0sXG4gICAgICAgICAgICAgICAgaSA9IDA7XG5cbiAgICAgICAgICAgIGZvciAoIDsgKGVsZW0gPSB0aGlzW2ldKSAhPSBudWxsOyBpKysgKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzXG4gICAgICAgICAgICAgICAgaWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYW55IHJlbWFpbmluZyBub2Rlc1xuICAgICAgICAgICAgICAgIHdoaWxlICggZWxlbS5maXJzdENoaWxkICkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLnJlbW92ZUNoaWxkKCBlbGVtLmZpcnN0Q2hpbGQgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGEgc2VsZWN0LCBlbnN1cmUgdGhhdCBpdCBkaXNwbGF5cyBlbXB0eSAoIzEyMzM2KVxuICAgICAgICAgICAgICAgIC8vIFN1cHBvcnQ6IElFPDlcbiAgICAgICAgICAgICAgICBpZiAoIGVsZW0ub3B0aW9ucyAmJiBqUXVlcnkubm9kZU5hbWUoIGVsZW0sIFwic2VsZWN0XCIgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5vcHRpb25zLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcblxuICAgICAgICBjbG9uZTogZnVuY3Rpb24oIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICkge1xuICAgICAgICAgICAgZGF0YUFuZEV2ZW50cyA9IGRhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGZhbHNlIDogZGF0YUFuZEV2ZW50cztcbiAgICAgICAgICAgIGRlZXBEYXRhQW5kRXZlbnRzID0gZGVlcERhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGRhdGFBbmRFdmVudHMgOiBkZWVwRGF0YUFuZEV2ZW50cztcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5jbG9uZSggdGhpcywgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGh0bWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcbiAgICAgICAgICAgIHJldHVybiBqUXVlcnkuYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsZW0gPSB0aGlzWzBdIHx8IHt9LFxuICAgICAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICAgICAgbCA9IHRoaXMubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgaWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS5ub2RlVHlwZSA9PT0gMSA/XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmlubmVySFRNTC5yZXBsYWNlKCByaW5saW5lalF1ZXJ5LCBcIlwiICkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNlZSBpZiB3ZSBjYW4gdGFrZSBhIHNob3J0Y3V0IGFuZCBqdXN0IHVzZSBpbm5lckhUTUxcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiAhcm5vSW5uZXJodG1sLnRlc3QoIHZhbHVlICkgJiZcbiAgICAgICAgICAgICAgICAgICAgKCBqUXVlcnkuc3VwcG9ydC5odG1sU2VyaWFsaXplIHx8ICFybm9zaGltY2FjaGUudGVzdCggdmFsdWUgKSAgKSAmJlxuICAgICAgICAgICAgICAgICAgICAoIGpRdWVyeS5zdXBwb3J0LmxlYWRpbmdXaGl0ZXNwYWNlIHx8ICFybGVhZGluZ1doaXRlc3BhY2UudGVzdCggdmFsdWUgKSApICYmXG4gICAgICAgICAgICAgICAgICAgICF3cmFwTWFwWyAoIHJ0YWdOYW1lLmV4ZWMoIHZhbHVlICkgfHwgW1wiXCIsIFwiXCJdIClbMV0udG9Mb3dlckNhc2UoKSBdICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSggcnhodG1sVGFnLCBcIjwkMT48LyQyPlwiICk7XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBpIDwgbDsgaSsrICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBlbGVtZW50IG5vZGVzIGFuZCBwcmV2ZW50IG1lbW9yeSBsZWFrc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0gPSB0aGlzW2ldIHx8IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCBlbGVtLCBmYWxzZSApICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtID0gMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdXNpbmcgaW5uZXJIVE1MIHRocm93cyBhbiBleGNlcHRpb24sIHVzZSB0aGUgZmFsbGJhY2sgbWV0aG9kXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge31cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIGVsZW0gKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1wdHkoKS5hcHBlbmQoIHZhbHVlICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZXBsYWNlV2l0aDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgIC8vIFNuYXBzaG90IHRoZSBET00gaW4gY2FzZSAuZG9tTWFuaXAgc3dlZXBzIHNvbWV0aGluZyByZWxldmFudCBpbnRvIGl0cyBmcmFnbWVudFxuICAgICAgICAgICAgICAgIGFyZ3MgPSBqUXVlcnkubWFwKCB0aGlzLCBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgZWxlbS5uZXh0U2libGluZywgZWxlbS5wYXJlbnROb2RlIF07XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgaSA9IDA7XG5cbiAgICAgICAgICAgIC8vIE1ha2UgdGhlIGNoYW5nZXMsIHJlcGxhY2luZyBlYWNoIGNvbnRleHQgZWxlbWVudCB3aXRoIHRoZSBuZXcgY29udGVudFxuICAgICAgICAgICAgdGhpcy5kb21NYW5pcCggYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV4dCA9IGFyZ3NbIGkrKyBdLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBhcmdzWyBpKysgXTtcblxuICAgICAgICAgICAgICAgIGlmICggcGFyZW50ICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCB1c2UgdGhlIHNuYXBzaG90IG5leHQgaWYgaXQgaGFzIG1vdmVkICgjMTM4MTApXG4gICAgICAgICAgICAgICAgICAgIGlmICggbmV4dCAmJiBuZXh0LnBhcmVudE5vZGUgIT09IHBhcmVudCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQgPSB0aGlzLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSggdGhpcyApLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKCBlbGVtLCBuZXh0ICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEFsbG93IG5ldyBjb250ZW50IHRvIGluY2x1ZGUgZWxlbWVudHMgZnJvbSB0aGUgY29udGV4dCBzZXRcbiAgICAgICAgICAgIH0sIHRydWUgKTtcblxuICAgICAgICAgICAgLy8gRm9yY2UgcmVtb3ZhbCBpZiB0aGVyZSB3YXMgbm8gbmV3IGNvbnRlbnQgKGUuZy4sIGZyb20gZW1wdHkgYXJndW1lbnRzKVxuICAgICAgICAgICAgcmV0dXJuIGkgPyB0aGlzIDogdGhpcy5yZW1vdmUoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBkZXRhY2g6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbW92ZSggc2VsZWN0b3IsIHRydWUgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBkb21NYW5pcDogZnVuY3Rpb24oIGFyZ3MsIGNhbGxiYWNrLCBhbGxvd0ludGVyc2VjdGlvbiApIHtcblxuICAgICAgICAgICAgLy8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5c1xuICAgICAgICAgICAgYXJncyA9IGNvcmVfY29uY2F0LmFwcGx5KCBbXSwgYXJncyApO1xuXG4gICAgICAgICAgICB2YXIgZmlyc3QsIG5vZGUsIGhhc1NjcmlwdHMsXG4gICAgICAgICAgICAgICAgc2NyaXB0cywgZG9jLCBmcmFnbWVudCxcbiAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICBsID0gdGhpcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgc2V0ID0gdGhpcyxcbiAgICAgICAgICAgICAgICBpTm9DbG9uZSA9IGwgLSAxLFxuICAgICAgICAgICAgICAgIHZhbHVlID0gYXJnc1swXSxcbiAgICAgICAgICAgICAgICBpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICk7XG5cbiAgICAgICAgICAgIC8vIFdlIGNhbid0IGNsb25lTm9kZSBmcmFnbWVudHMgdGhhdCBjb250YWluIGNoZWNrZWQsIGluIFdlYktpdFxuICAgICAgICAgICAgaWYgKCBpc0Z1bmN0aW9uIHx8ICEoIGwgPD0gMSB8fCB0eXBlb2YgdmFsdWUgIT09IFwic3RyaW5nXCIgfHwgalF1ZXJ5LnN1cHBvcnQuY2hlY2tDbG9uZSB8fCAhcmNoZWNrZWQudGVzdCggdmFsdWUgKSApICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGluZGV4ICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHNldC5lcSggaW5kZXggKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBpc0Z1bmN0aW9uICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJnc1swXSA9IHZhbHVlLmNhbGwoIHRoaXMsIGluZGV4LCBzZWxmLmh0bWwoKSApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZG9tTWFuaXAoIGFyZ3MsIGNhbGxiYWNrLCBhbGxvd0ludGVyc2VjdGlvbiApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIGwgKSB7XG4gICAgICAgICAgICAgICAgZnJhZ21lbnQgPSBqUXVlcnkuYnVpbGRGcmFnbWVudCggYXJncywgdGhpc1sgMCBdLm93bmVyRG9jdW1lbnQsIGZhbHNlLCAhYWxsb3dJbnRlcnNlY3Rpb24gJiYgdGhpcyApO1xuICAgICAgICAgICAgICAgIGZpcnN0ID0gZnJhZ21lbnQuZmlyc3RDaGlsZDtcblxuICAgICAgICAgICAgICAgIGlmICggZnJhZ21lbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50ID0gZmlyc3Q7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCBmaXJzdCApIHtcbiAgICAgICAgICAgICAgICAgICAgc2NyaXB0cyA9IGpRdWVyeS5tYXAoIGdldEFsbCggZnJhZ21lbnQsIFwic2NyaXB0XCIgKSwgZGlzYWJsZVNjcmlwdCApO1xuICAgICAgICAgICAgICAgICAgICBoYXNTY3JpcHRzID0gc2NyaXB0cy5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBvcmlnaW5hbCBmcmFnbWVudCBmb3IgdGhlIGxhc3QgaXRlbSBpbnN0ZWFkIG9mIHRoZSBmaXJzdCBiZWNhdXNlIGl0IGNhbiBlbmQgdXBcbiAgICAgICAgICAgICAgICAgICAgLy8gYmVpbmcgZW1wdGllZCBpbmNvcnJlY3RseSBpbiBjZXJ0YWluIHNpdHVhdGlvbnMgKCM4MDcwKS5cbiAgICAgICAgICAgICAgICAgICAgZm9yICggOyBpIDwgbDsgaSsrICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IGZyYWdtZW50O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGkgIT09IGlOb0Nsb25lICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSBqUXVlcnkuY2xvbmUoIG5vZGUsIHRydWUsIHRydWUgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgcmVmZXJlbmNlcyB0byBjbG9uZWQgc2NyaXB0cyBmb3IgbGF0ZXIgcmVzdG9yYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGhhc1NjcmlwdHMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5tZXJnZSggc2NyaXB0cywgZ2V0QWxsKCBub2RlLCBcInNjcmlwdFwiICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoIHRoaXNbaV0sIG5vZGUsIGkgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICggaGFzU2NyaXB0cyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYyA9IHNjcmlwdHNbIHNjcmlwdHMubGVuZ3RoIC0gMSBdLm93bmVyRG9jdW1lbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlZW5hYmxlIHNjcmlwdHNcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5tYXAoIHNjcmlwdHMsIHJlc3RvcmVTY3JpcHQgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXZhbHVhdGUgZXhlY3V0YWJsZSBzY3JpcHRzIG9uIGZpcnN0IGRvY3VtZW50IGluc2VydGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPCBoYXNTY3JpcHRzOyBpKysgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IHNjcmlwdHNbIGkgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIG5vZGUudHlwZSB8fCBcIlwiICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWpRdWVyeS5fZGF0YSggbm9kZSwgXCJnbG9iYWxFdmFsXCIgKSAmJiBqUXVlcnkuY29udGFpbnMoIGRvYywgbm9kZSApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbm9kZS5zcmMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIb3BlIGFqYXggaXMgYXZhaWxhYmxlLi4uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkuX2V2YWxVcmwoIG5vZGUuc3JjICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZ2xvYmFsRXZhbCggKCBub2RlLnRleHQgfHwgbm9kZS50ZXh0Q29udGVudCB8fCBub2RlLmlubmVySFRNTCB8fCBcIlwiICkucmVwbGFjZSggcmNsZWFuU2NyaXB0LCBcIlwiICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEZpeCAjMTE4MDk6IEF2b2lkIGxlYWtpbmcgbWVtb3J5XG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50ID0gZmlyc3QgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9KTtcblxuLy8gU3VwcG9ydDogSUU8OFxuLy8gTWFuaXB1bGF0aW5nIHRhYmxlcyByZXF1aXJlcyBhIHRib2R5XG4gICAgZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KCBlbGVtLCBjb250ZW50ICkge1xuICAgICAgICByZXR1cm4galF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcInRhYmxlXCIgKSAmJlxuICAgICAgICBqUXVlcnkubm9kZU5hbWUoIGNvbnRlbnQubm9kZVR5cGUgPT09IDEgPyBjb250ZW50IDogY29udGVudC5maXJzdENoaWxkLCBcInRyXCIgKSA/XG5cbiAgICAgICAgZWxlbS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRib2R5XCIpWzBdIHx8XG4gICAgICAgIGVsZW0uYXBwZW5kQ2hpbGQoIGVsZW0ub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIikgKSA6XG4gICAgICAgICAgICBlbGVtO1xuICAgIH1cblxuLy8gUmVwbGFjZS9yZXN0b3JlIHRoZSB0eXBlIGF0dHJpYnV0ZSBvZiBzY3JpcHQgZWxlbWVudHMgZm9yIHNhZmUgRE9NIG1hbmlwdWxhdGlvblxuICAgIGZ1bmN0aW9uIGRpc2FibGVTY3JpcHQoIGVsZW0gKSB7XG4gICAgICAgIGVsZW0udHlwZSA9IChqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBcInR5cGVcIiApICE9PSBudWxsKSArIFwiL1wiICsgZWxlbS50eXBlO1xuICAgICAgICByZXR1cm4gZWxlbTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcmVzdG9yZVNjcmlwdCggZWxlbSApIHtcbiAgICAgICAgdmFyIG1hdGNoID0gcnNjcmlwdFR5cGVNYXNrZWQuZXhlYyggZWxlbS50eXBlICk7XG4gICAgICAgIGlmICggbWF0Y2ggKSB7XG4gICAgICAgICAgICBlbGVtLnR5cGUgPSBtYXRjaFsxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW0ucmVtb3ZlQXR0cmlidXRlKFwidHlwZVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbTtcbiAgICB9XG5cbi8vIE1hcmsgc2NyaXB0cyBhcyBoYXZpbmcgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZFxuICAgIGZ1bmN0aW9uIHNldEdsb2JhbEV2YWwoIGVsZW1zLCByZWZFbGVtZW50cyApIHtcbiAgICAgICAgdmFyIGVsZW0sXG4gICAgICAgICAgICBpID0gMDtcbiAgICAgICAgZm9yICggOyAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG4gICAgICAgICAgICBqUXVlcnkuX2RhdGEoIGVsZW0sIFwiZ2xvYmFsRXZhbFwiLCAhcmVmRWxlbWVudHMgfHwgalF1ZXJ5Ll9kYXRhKCByZWZFbGVtZW50c1tpXSwgXCJnbG9iYWxFdmFsXCIgKSApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvbmVDb3B5RXZlbnQoIHNyYywgZGVzdCApIHtcblxuICAgICAgICBpZiAoIGRlc3Qubm9kZVR5cGUgIT09IDEgfHwgIWpRdWVyeS5oYXNEYXRhKCBzcmMgKSApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0eXBlLCBpLCBsLFxuICAgICAgICAgICAgb2xkRGF0YSA9IGpRdWVyeS5fZGF0YSggc3JjICksXG4gICAgICAgICAgICBjdXJEYXRhID0galF1ZXJ5Ll9kYXRhKCBkZXN0LCBvbGREYXRhICksXG4gICAgICAgICAgICBldmVudHMgPSBvbGREYXRhLmV2ZW50cztcblxuICAgICAgICBpZiAoIGV2ZW50cyApIHtcbiAgICAgICAgICAgIGRlbGV0ZSBjdXJEYXRhLmhhbmRsZTtcbiAgICAgICAgICAgIGN1ckRhdGEuZXZlbnRzID0ge307XG5cbiAgICAgICAgICAgIGZvciAoIHR5cGUgaW4gZXZlbnRzICkge1xuICAgICAgICAgICAgICAgIGZvciAoIGkgPSAwLCBsID0gZXZlbnRzWyB0eXBlIF0ubGVuZ3RoOyBpIDwgbDsgaSsrICkge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZXZlbnQuYWRkKCBkZXN0LCB0eXBlLCBldmVudHNbIHR5cGUgXVsgaSBdICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gbWFrZSB0aGUgY2xvbmVkIHB1YmxpYyBkYXRhIG9iamVjdCBhIGNvcHkgZnJvbSB0aGUgb3JpZ2luYWxcbiAgICAgICAgaWYgKCBjdXJEYXRhLmRhdGEgKSB7XG4gICAgICAgICAgICBjdXJEYXRhLmRhdGEgPSBqUXVlcnkuZXh0ZW5kKCB7fSwgY3VyRGF0YS5kYXRhICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmaXhDbG9uZU5vZGVJc3N1ZXMoIHNyYywgZGVzdCApIHtcbiAgICAgICAgdmFyIG5vZGVOYW1lLCBlLCBkYXRhO1xuXG4gICAgICAgIC8vIFdlIGRvIG5vdCBuZWVkIHRvIGRvIGFueXRoaW5nIGZvciBub24tRWxlbWVudHNcbiAgICAgICAgaWYgKCBkZXN0Lm5vZGVUeXBlICE9PSAxICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9kZU5hbWUgPSBkZXN0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgLy8gSUU2LTggY29waWVzIGV2ZW50cyBib3VuZCB2aWEgYXR0YWNoRXZlbnQgd2hlbiB1c2luZyBjbG9uZU5vZGUuXG4gICAgICAgIGlmICggIWpRdWVyeS5zdXBwb3J0Lm5vQ2xvbmVFdmVudCAmJiBkZXN0WyBqUXVlcnkuZXhwYW5kbyBdICkge1xuICAgICAgICAgICAgZGF0YSA9IGpRdWVyeS5fZGF0YSggZGVzdCApO1xuXG4gICAgICAgICAgICBmb3IgKCBlIGluIGRhdGEuZXZlbnRzICkge1xuICAgICAgICAgICAgICAgIGpRdWVyeS5yZW1vdmVFdmVudCggZGVzdCwgZSwgZGF0YS5oYW5kbGUgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRXZlbnQgZGF0YSBnZXRzIHJlZmVyZW5jZWQgaW5zdGVhZCBvZiBjb3BpZWQgaWYgdGhlIGV4cGFuZG8gZ2V0cyBjb3BpZWQgdG9vXG4gICAgICAgICAgICBkZXN0LnJlbW92ZUF0dHJpYnV0ZSggalF1ZXJ5LmV4cGFuZG8gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElFIGJsYW5rcyBjb250ZW50cyB3aGVuIGNsb25pbmcgc2NyaXB0cywgYW5kIHRyaWVzIHRvIGV2YWx1YXRlIG5ld2x5LXNldCB0ZXh0XG4gICAgICAgIGlmICggbm9kZU5hbWUgPT09IFwic2NyaXB0XCIgJiYgZGVzdC50ZXh0ICE9PSBzcmMudGV4dCApIHtcbiAgICAgICAgICAgIGRpc2FibGVTY3JpcHQoIGRlc3QgKS50ZXh0ID0gc3JjLnRleHQ7XG4gICAgICAgICAgICByZXN0b3JlU2NyaXB0KCBkZXN0ICk7XG5cbiAgICAgICAgICAgIC8vIElFNi0xMCBpbXByb3Blcmx5IGNsb25lcyBjaGlsZHJlbiBvZiBvYmplY3QgZWxlbWVudHMgdXNpbmcgY2xhc3NpZC5cbiAgICAgICAgICAgIC8vIElFMTAgdGhyb3dzIE5vTW9kaWZpY2F0aW9uQWxsb3dlZEVycm9yIGlmIHBhcmVudCBpcyBudWxsLCAjMTIxMzIuXG4gICAgICAgIH0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSBcIm9iamVjdFwiICkge1xuICAgICAgICAgICAgaWYgKCBkZXN0LnBhcmVudE5vZGUgKSB7XG4gICAgICAgICAgICAgICAgZGVzdC5vdXRlckhUTUwgPSBzcmMub3V0ZXJIVE1MO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUaGlzIHBhdGggYXBwZWFycyB1bmF2b2lkYWJsZSBmb3IgSUU5LiBXaGVuIGNsb25pbmcgYW4gb2JqZWN0XG4gICAgICAgICAgICAvLyBlbGVtZW50IGluIElFOSwgdGhlIG91dGVySFRNTCBzdHJhdGVneSBhYm92ZSBpcyBub3Qgc3VmZmljaWVudC5cbiAgICAgICAgICAgIC8vIElmIHRoZSBzcmMgaGFzIGlubmVySFRNTCBhbmQgdGhlIGRlc3RpbmF0aW9uIGRvZXMgbm90LFxuICAgICAgICAgICAgLy8gY29weSB0aGUgc3JjLmlubmVySFRNTCBpbnRvIHRoZSBkZXN0LmlubmVySFRNTC4gIzEwMzI0XG4gICAgICAgICAgICBpZiAoIGpRdWVyeS5zdXBwb3J0Lmh0bWw1Q2xvbmUgJiYgKCBzcmMuaW5uZXJIVE1MICYmICFqUXVlcnkudHJpbShkZXN0LmlubmVySFRNTCkgKSApIHtcbiAgICAgICAgICAgICAgICBkZXN0LmlubmVySFRNTCA9IHNyYy5pbm5lckhUTUw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiBtYW5pcHVsYXRpb25fcmNoZWNrYWJsZVR5cGUudGVzdCggc3JjLnR5cGUgKSApIHtcbiAgICAgICAgICAgIC8vIElFNi04IGZhaWxzIHRvIHBlcnNpc3QgdGhlIGNoZWNrZWQgc3RhdGUgb2YgYSBjbG9uZWQgY2hlY2tib3hcbiAgICAgICAgICAgIC8vIG9yIHJhZGlvIGJ1dHRvbi4gV29yc2UsIElFNi03IGZhaWwgdG8gZ2l2ZSB0aGUgY2xvbmVkIGVsZW1lbnRcbiAgICAgICAgICAgIC8vIGEgY2hlY2tlZCBhcHBlYXJhbmNlIGlmIHRoZSBkZWZhdWx0Q2hlY2tlZCB2YWx1ZSBpc24ndCBhbHNvIHNldFxuXG4gICAgICAgICAgICBkZXN0LmRlZmF1bHRDaGVja2VkID0gZGVzdC5jaGVja2VkID0gc3JjLmNoZWNrZWQ7XG5cbiAgICAgICAgICAgIC8vIElFNi03IGdldCBjb25mdXNlZCBhbmQgZW5kIHVwIHNldHRpbmcgdGhlIHZhbHVlIG9mIGEgY2xvbmVkXG4gICAgICAgICAgICAvLyBjaGVja2JveC9yYWRpbyBidXR0b24gdG8gYW4gZW1wdHkgc3RyaW5nIGluc3RlYWQgb2YgXCJvblwiXG4gICAgICAgICAgICBpZiAoIGRlc3QudmFsdWUgIT09IHNyYy52YWx1ZSApIHtcbiAgICAgICAgICAgICAgICBkZXN0LnZhbHVlID0gc3JjLnZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJRTYtOCBmYWlscyB0byByZXR1cm4gdGhlIHNlbGVjdGVkIG9wdGlvbiB0byB0aGUgZGVmYXVsdCBzZWxlY3RlZFxuICAgICAgICAgICAgLy8gc3RhdGUgd2hlbiBjbG9uaW5nIG9wdGlvbnNcbiAgICAgICAgfSBlbHNlIGlmICggbm9kZU5hbWUgPT09IFwib3B0aW9uXCIgKSB7XG4gICAgICAgICAgICBkZXN0LmRlZmF1bHRTZWxlY3RlZCA9IGRlc3Quc2VsZWN0ZWQgPSBzcmMuZGVmYXVsdFNlbGVjdGVkO1xuXG4gICAgICAgICAgICAvLyBJRTYtOCBmYWlscyB0byBzZXQgdGhlIGRlZmF1bHRWYWx1ZSB0byB0aGUgY29ycmVjdCB2YWx1ZSB3aGVuXG4gICAgICAgICAgICAvLyBjbG9uaW5nIG90aGVyIHR5cGVzIG9mIGlucHV0IGZpZWxkc1xuICAgICAgICB9IGVsc2UgaWYgKCBub2RlTmFtZSA9PT0gXCJpbnB1dFwiIHx8IG5vZGVOYW1lID09PSBcInRleHRhcmVhXCIgKSB7XG4gICAgICAgICAgICBkZXN0LmRlZmF1bHRWYWx1ZSA9IHNyYy5kZWZhdWx0VmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBqUXVlcnkuZWFjaCh7XG4gICAgICAgIGFwcGVuZFRvOiBcImFwcGVuZFwiLFxuICAgICAgICBwcmVwZW5kVG86IFwicHJlcGVuZFwiLFxuICAgICAgICBpbnNlcnRCZWZvcmU6IFwiYmVmb3JlXCIsXG4gICAgICAgIGluc2VydEFmdGVyOiBcImFmdGVyXCIsXG4gICAgICAgIHJlcGxhY2VBbGw6IFwicmVwbGFjZVdpdGhcIlxuICAgIH0sIGZ1bmN0aW9uKCBuYW1lLCBvcmlnaW5hbCApIHtcbiAgICAgICAgalF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG4gICAgICAgICAgICB2YXIgZWxlbXMsXG4gICAgICAgICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgICAgICAgcmV0ID0gW10sXG4gICAgICAgICAgICAgICAgaW5zZXJ0ID0galF1ZXJ5KCBzZWxlY3RvciApLFxuICAgICAgICAgICAgICAgIGxhc3QgPSBpbnNlcnQubGVuZ3RoIC0gMTtcblxuICAgICAgICAgICAgZm9yICggOyBpIDw9IGxhc3Q7IGkrKyApIHtcbiAgICAgICAgICAgICAgICBlbGVtcyA9IGkgPT09IGxhc3QgPyB0aGlzIDogdGhpcy5jbG9uZSh0cnVlKTtcbiAgICAgICAgICAgICAgICBqUXVlcnkoIGluc2VydFtpXSApWyBvcmlnaW5hbCBdKCBlbGVtcyApO1xuXG4gICAgICAgICAgICAgICAgLy8gTW9kZXJuIGJyb3dzZXJzIGNhbiBhcHBseSBqUXVlcnkgY29sbGVjdGlvbnMgYXMgYXJyYXlzLCBidXQgb2xkSUUgbmVlZHMgYSAuZ2V0KClcbiAgICAgICAgICAgICAgICBjb3JlX3B1c2guYXBwbHkoIHJldCwgZWxlbXMuZ2V0KCkgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaFN0YWNrKCByZXQgKTtcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGdldEFsbCggY29udGV4dCwgdGFnICkge1xuICAgICAgICB2YXIgZWxlbXMsIGVsZW0sXG4gICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgIGZvdW5kID0gdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IGNvcmVfc3RydW5kZWZpbmVkID8gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnIHx8IFwiKlwiICkgOlxuICAgICAgICAgICAgICAgIHR5cGVvZiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwgIT09IGNvcmVfc3RydW5kZWZpbmVkID8gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgfHwgXCIqXCIgKSA6XG4gICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAoICFmb3VuZCApIHtcbiAgICAgICAgICAgIGZvciAoIGZvdW5kID0gW10sIGVsZW1zID0gY29udGV4dC5jaGlsZE5vZGVzIHx8IGNvbnRleHQ7IChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKyApIHtcbiAgICAgICAgICAgICAgICBpZiAoICF0YWcgfHwgalF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCB0YWcgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgZm91bmQucHVzaCggZWxlbSApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS5tZXJnZSggZm91bmQsIGdldEFsbCggZWxlbSwgdGFnICkgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFnID09PSB1bmRlZmluZWQgfHwgdGFnICYmIGpRdWVyeS5ub2RlTmFtZSggY29udGV4dCwgdGFnICkgP1xuICAgICAgICAgICAgalF1ZXJ5Lm1lcmdlKCBbIGNvbnRleHQgXSwgZm91bmQgKSA6XG4gICAgICAgICAgICBmb3VuZDtcbiAgICB9XG5cbi8vIFVzZWQgaW4gYnVpbGRGcmFnbWVudCwgZml4ZXMgdGhlIGRlZmF1bHRDaGVja2VkIHByb3BlcnR5XG4gICAgZnVuY3Rpb24gZml4RGVmYXVsdENoZWNrZWQoIGVsZW0gKSB7XG4gICAgICAgIGlmICggbWFuaXB1bGF0aW9uX3JjaGVja2FibGVUeXBlLnRlc3QoIGVsZW0udHlwZSApICkge1xuICAgICAgICAgICAgZWxlbS5kZWZhdWx0Q2hlY2tlZCA9IGVsZW0uY2hlY2tlZDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGpRdWVyeS5leHRlbmQoe1xuICAgICAgICBjbG9uZTogZnVuY3Rpb24oIGVsZW0sIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICkge1xuICAgICAgICAgICAgdmFyIGRlc3RFbGVtZW50cywgbm9kZSwgY2xvbmUsIGksIHNyY0VsZW1lbnRzLFxuICAgICAgICAgICAgICAgIGluUGFnZSA9IGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7XG5cbiAgICAgICAgICAgIGlmICggalF1ZXJ5LnN1cHBvcnQuaHRtbDVDbG9uZSB8fCBqUXVlcnkuaXNYTUxEb2MoZWxlbSkgfHwgIXJub3NoaW1jYWNoZS50ZXN0KCBcIjxcIiArIGVsZW0ubm9kZU5hbWUgKyBcIj5cIiApICkge1xuICAgICAgICAgICAgICAgIGNsb25lID0gZWxlbS5jbG9uZU5vZGUoIHRydWUgKTtcblxuICAgICAgICAgICAgICAgIC8vIElFPD04IGRvZXMgbm90IHByb3Blcmx5IGNsb25lIGRldGFjaGVkLCB1bmtub3duIGVsZW1lbnQgbm9kZXNcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZnJhZ21lbnREaXYuaW5uZXJIVE1MID0gZWxlbS5vdXRlckhUTUw7XG4gICAgICAgICAgICAgICAgZnJhZ21lbnREaXYucmVtb3ZlQ2hpbGQoIGNsb25lID0gZnJhZ21lbnREaXYuZmlyc3RDaGlsZCApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoICghalF1ZXJ5LnN1cHBvcnQubm9DbG9uZUV2ZW50IHx8ICFqUXVlcnkuc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCkgJiZcbiAgICAgICAgICAgICAgICAoZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBlbGVtLm5vZGVUeXBlID09PSAxMSkgJiYgIWpRdWVyeS5pc1hNTERvYyhlbGVtKSApIHtcblxuICAgICAgICAgICAgICAgIC8vIFdlIGVzY2hldyBTaXp6bGUgaGVyZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29uczogaHR0cDovL2pzcGVyZi5jb20vZ2V0YWxsLXZzLXNpenpsZS8yXG4gICAgICAgICAgICAgICAgZGVzdEVsZW1lbnRzID0gZ2V0QWxsKCBjbG9uZSApO1xuICAgICAgICAgICAgICAgIHNyY0VsZW1lbnRzID0gZ2V0QWxsKCBlbGVtICk7XG5cbiAgICAgICAgICAgICAgICAvLyBGaXggYWxsIElFIGNsb25pbmcgaXNzdWVzXG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IChub2RlID0gc3JjRWxlbWVudHNbaV0pICE9IG51bGw7ICsraSApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRW5zdXJlIHRoYXQgdGhlIGRlc3RpbmF0aW9uIG5vZGUgaXMgbm90IG51bGw7IEZpeGVzICM5NTg3XG4gICAgICAgICAgICAgICAgICAgIGlmICggZGVzdEVsZW1lbnRzW2ldICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZml4Q2xvbmVOb2RlSXNzdWVzKCBub2RlLCBkZXN0RWxlbWVudHNbaV0gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ29weSB0aGUgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIHRvIHRoZSBjbG9uZVxuICAgICAgICAgICAgaWYgKCBkYXRhQW5kRXZlbnRzICkge1xuICAgICAgICAgICAgICAgIGlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7XG4gICAgICAgICAgICAgICAgICAgIHNyY0VsZW1lbnRzID0gc3JjRWxlbWVudHMgfHwgZ2V0QWxsKCBlbGVtICk7XG4gICAgICAgICAgICAgICAgICAgIGRlc3RFbGVtZW50cyA9IGRlc3RFbGVtZW50cyB8fCBnZXRBbGwoIGNsb25lICk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICggaSA9IDA7IChub2RlID0gc3JjRWxlbWVudHNbaV0pICE9IG51bGw7IGkrKyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lQ29weUV2ZW50KCBub2RlLCBkZXN0RWxlbWVudHNbaV0gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuICAgICAgICAgICAgZGVzdEVsZW1lbnRzID0gZ2V0QWxsKCBjbG9uZSwgXCJzY3JpcHRcIiApO1xuICAgICAgICAgICAgaWYgKCBkZXN0RWxlbWVudHMubGVuZ3RoID4gMCApIHtcbiAgICAgICAgICAgICAgICBzZXRHbG9iYWxFdmFsKCBkZXN0RWxlbWVudHMsICFpblBhZ2UgJiYgZ2V0QWxsKCBlbGVtLCBcInNjcmlwdFwiICkgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGVzdEVsZW1lbnRzID0gc3JjRWxlbWVudHMgPSBub2RlID0gbnVsbDtcblxuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBjbG9uZWQgc2V0XG4gICAgICAgICAgICByZXR1cm4gY2xvbmU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYnVpbGRGcmFnbWVudDogZnVuY3Rpb24oIGVsZW1zLCBjb250ZXh0LCBzY3JpcHRzLCBzZWxlY3Rpb24gKSB7XG4gICAgICAgICAgICB2YXIgaiwgZWxlbSwgY29udGFpbnMsXG4gICAgICAgICAgICAgICAgdG1wLCB0YWcsIHRib2R5LCB3cmFwLFxuICAgICAgICAgICAgICAgIGwgPSBlbGVtcy5sZW5ndGgsXG5cbiAgICAgICAgICAgIC8vIEVuc3VyZSBhIHNhZmUgZnJhZ21lbnRcbiAgICAgICAgICAgICAgICBzYWZlID0gY3JlYXRlU2FmZUZyYWdtZW50KCBjb250ZXh0ICksXG5cbiAgICAgICAgICAgICAgICBub2RlcyA9IFtdLFxuICAgICAgICAgICAgICAgIGkgPSAwO1xuXG4gICAgICAgICAgICBmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG4gICAgICAgICAgICAgICAgZWxlbSA9IGVsZW1zWyBpIF07XG5cbiAgICAgICAgICAgICAgICBpZiAoIGVsZW0gfHwgZWxlbSA9PT0gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgbm9kZXMgZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBqUXVlcnkudHlwZSggZWxlbSApID09PSBcIm9iamVjdFwiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5Lm1lcmdlKCBub2RlcywgZWxlbS5ub2RlVHlwZSA/IFsgZWxlbSBdIDogZWxlbSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IG5vbi1odG1sIGludG8gYSB0ZXh0IG5vZGVcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggIXJodG1sLnRlc3QoIGVsZW0gKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzLnB1c2goIGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoIGVsZW0gKSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXNcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IHRtcCB8fCBzYWZlLmFwcGVuZENoaWxkKCBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVzZXJpYWxpemUgYSBzdGFuZGFyZCByZXByZXNlbnRhdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgdGFnID0gKCBydGFnTmFtZS5leGVjKCBlbGVtICkgfHwgW1wiXCIsIFwiXCJdIClbMV0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXAgPSB3cmFwTWFwWyB0YWcgXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0bXAuaW5uZXJIVE1MID0gd3JhcFsxXSArIGVsZW0ucmVwbGFjZSggcnhodG1sVGFnLCBcIjwkMT48LyQyPlwiICkgKyB3cmFwWzJdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZXNjZW5kIHRocm91Z2ggd3JhcHBlcnMgdG8gdGhlIHJpZ2h0IGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGogPSB3cmFwWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCBqLS0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wID0gdG1wLmxhc3RDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFudWFsbHkgYWRkIGxlYWRpbmcgd2hpdGVzcGFjZSByZW1vdmVkIGJ5IElFXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFqUXVlcnkuc3VwcG9ydC5sZWFkaW5nV2hpdGVzcGFjZSAmJiBybGVhZGluZ1doaXRlc3BhY2UudGVzdCggZWxlbSApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzLnB1c2goIGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoIHJsZWFkaW5nV2hpdGVzcGFjZS5leGVjKCBlbGVtIClbMF0gKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgSUUncyBhdXRvaW5zZXJ0ZWQgPHRib2R5PiBmcm9tIHRhYmxlIGZyYWdtZW50c1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhalF1ZXJ5LnN1cHBvcnQudGJvZHkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTdHJpbmcgd2FzIGEgPHRhYmxlPiwgKm1heSogaGF2ZSBzcHVyaW91cyA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbSA9IHRhZyA9PT0gXCJ0YWJsZVwiICYmICFydGJvZHkudGVzdCggZWxlbSApID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLmZpcnN0Q2hpbGQgOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0cmluZyB3YXMgYSBiYXJlIDx0aGVhZD4gb3IgPHRmb290PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwWzFdID09PSBcIjx0YWJsZT5cIiAmJiAhcnRib2R5LnRlc3QoIGVsZW0gKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogPSBlbGVtICYmIGVsZW0uY2hpbGROb2Rlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCBqLS0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggalF1ZXJ5Lm5vZGVOYW1lKCAodGJvZHkgPSBlbGVtLmNoaWxkTm9kZXNbal0pLCBcInRib2R5XCIgKSAmJiAhdGJvZHkuY2hpbGROb2Rlcy5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnJlbW92ZUNoaWxkKCB0Ym9keSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkubWVyZ2UoIG5vZGVzLCB0bXAuY2hpbGROb2RlcyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXggIzEyMzkyIGZvciBXZWJLaXQgYW5kIElFID4gOVxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wLnRleHRDb250ZW50ID0gXCJcIjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRml4ICMxMjM5MiBmb3Igb2xkSUVcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICggdG1wLmZpcnN0Q2hpbGQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wLnJlbW92ZUNoaWxkKCB0bXAuZmlyc3RDaGlsZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1lbWJlciB0aGUgdG9wLWxldmVsIGNvbnRhaW5lciBmb3IgcHJvcGVyIGNsZWFudXBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IHNhZmUubGFzdENoaWxkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBGaXggIzExMzU2OiBDbGVhciBlbGVtZW50cyBmcm9tIGZyYWdtZW50XG4gICAgICAgICAgICBpZiAoIHRtcCApIHtcbiAgICAgICAgICAgICAgICBzYWZlLnJlbW92ZUNoaWxkKCB0bXAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmVzZXQgZGVmYXVsdENoZWNrZWQgZm9yIGFueSByYWRpb3MgYW5kIGNoZWNrYm94ZXNcbiAgICAgICAgICAgIC8vIGFib3V0IHRvIGJlIGFwcGVuZGVkIHRvIHRoZSBET00gaW4gSUUgNi83ICgjODA2MClcbiAgICAgICAgICAgIGlmICggIWpRdWVyeS5zdXBwb3J0LmFwcGVuZENoZWNrZWQgKSB7XG4gICAgICAgICAgICAgICAgalF1ZXJ5LmdyZXAoIGdldEFsbCggbm9kZXMsIFwiaW5wdXRcIiApLCBmaXhEZWZhdWx0Q2hlY2tlZCApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpID0gMDtcbiAgICAgICAgICAgIHdoaWxlICggKGVsZW0gPSBub2Rlc1sgaSsrIF0pICkge1xuXG4gICAgICAgICAgICAgICAgLy8gIzQwODcgLSBJZiBvcmlnaW4gYW5kIGRlc3RpbmF0aW9uIGVsZW1lbnRzIGFyZSB0aGUgc2FtZSwgYW5kIHRoaXMgaXNcbiAgICAgICAgICAgICAgICAvLyB0aGF0IGVsZW1lbnQsIGRvIG5vdCBkbyBhbnl0aGluZ1xuICAgICAgICAgICAgICAgIGlmICggc2VsZWN0aW9uICYmIGpRdWVyeS5pbkFycmF5KCBlbGVtLCBzZWxlY3Rpb24gKSAhPT0gLTEgKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnRhaW5zID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblxuICAgICAgICAgICAgICAgIC8vIEFwcGVuZCB0byBmcmFnbWVudFxuICAgICAgICAgICAgICAgIHRtcCA9IGdldEFsbCggc2FmZS5hcHBlbmRDaGlsZCggZWxlbSApLCBcInNjcmlwdFwiICk7XG5cbiAgICAgICAgICAgICAgICAvLyBQcmVzZXJ2ZSBzY3JpcHQgZXZhbHVhdGlvbiBoaXN0b3J5XG4gICAgICAgICAgICAgICAgaWYgKCBjb250YWlucyApIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0R2xvYmFsRXZhbCggdG1wICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ2FwdHVyZSBleGVjdXRhYmxlc1xuICAgICAgICAgICAgICAgIGlmICggc2NyaXB0cyApIHtcbiAgICAgICAgICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICggKGVsZW0gPSB0bXBbIGorKyBdKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcnNjcmlwdFR5cGUudGVzdCggZWxlbS50eXBlIHx8IFwiXCIgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHRzLnB1c2goIGVsZW0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdG1wID0gbnVsbDtcblxuICAgICAgICAgICAgcmV0dXJuIHNhZmU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2xlYW5EYXRhOiBmdW5jdGlvbiggZWxlbXMsIC8qIGludGVybmFsICovIGFjY2VwdERhdGEgKSB7XG4gICAgICAgICAgICB2YXIgZWxlbSwgdHlwZSwgaWQsIGRhdGEsXG4gICAgICAgICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgICAgICAgaW50ZXJuYWxLZXkgPSBqUXVlcnkuZXhwYW5kbyxcbiAgICAgICAgICAgICAgICBjYWNoZSA9IGpRdWVyeS5jYWNoZSxcbiAgICAgICAgICAgICAgICBkZWxldGVFeHBhbmRvID0galF1ZXJ5LnN1cHBvcnQuZGVsZXRlRXhwYW5kbyxcbiAgICAgICAgICAgICAgICBzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWw7XG5cbiAgICAgICAgICAgIGZvciAoIDsgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrICkge1xuXG4gICAgICAgICAgICAgICAgaWYgKCBhY2NlcHREYXRhIHx8IGpRdWVyeS5hY2NlcHREYXRhKCBlbGVtICkgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWQgPSBlbGVtWyBpbnRlcm5hbEtleSBdO1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0gaWQgJiYgY2FjaGVbIGlkIF07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBkYXRhICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkYXRhLmV2ZW50cyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB0eXBlIGluIGRhdGEuZXZlbnRzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNwZWNpYWxbIHR5cGUgXSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHNob3J0Y3V0IHRvIGF2b2lkIGpRdWVyeS5ldmVudC5yZW1vdmUncyBvdmVyaGVhZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBkYXRhLmhhbmRsZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgY2FjaGUgb25seSBpZiBpdCB3YXMgbm90IGFscmVhZHkgcmVtb3ZlZCBieSBqUXVlcnkuZXZlbnQucmVtb3ZlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGNhY2hlWyBpZCBdICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNhY2hlWyBpZCBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUUgZG9lcyBub3QgYWxsb3cgdXMgdG8gZGVsZXRlIGV4cGFuZG8gcHJvcGVydGllcyBmcm9tIG5vZGVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vciBkb2VzIGl0IGhhdmUgYSByZW1vdmVBdHRyaWJ1dGUgZnVuY3Rpb24gb24gRG9jdW1lbnQgbm9kZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgbXVzdCBoYW5kbGUgYWxsIG9mIHRoZXNlIGNhc2VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkZWxldGVFeHBhbmRvICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZWxlbVsgaW50ZXJuYWxLZXkgXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHR5cGVvZiBlbGVtLnJlbW92ZUF0dHJpYnV0ZSAhPT0gY29yZV9zdHJ1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0ucmVtb3ZlQXR0cmlidXRlKCBpbnRlcm5hbEtleSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbVsgaW50ZXJuYWxLZXkgXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29yZV9kZWxldGVkSWRzLnB1c2goIGlkICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgX2V2YWxVcmw6IGZ1bmN0aW9uKCB1cmwgKSB7XG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5LmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwic2NyaXB0XCIsXG4gICAgICAgICAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGdsb2JhbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgXCJ0aHJvd3NcIjogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBqUXVlcnkuZm4uZXh0ZW5kKHtcbiAgICAgICAgd3JhcEFsbDogZnVuY3Rpb24oIGh0bWwgKSB7XG4gICAgICAgICAgICBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICkgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS53cmFwQWxsKCBodG1sLmNhbGwodGhpcywgaSkgKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCB0aGlzWzBdICkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50cyB0byB3cmFwIHRoZSB0YXJnZXQgYXJvdW5kXG4gICAgICAgICAgICAgICAgdmFyIHdyYXAgPSBqUXVlcnkoIGh0bWwsIHRoaXNbMF0ub3duZXJEb2N1bWVudCApLmVxKDApLmNsb25lKHRydWUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCB0aGlzWzBdLnBhcmVudE5vZGUgKSB7XG4gICAgICAgICAgICAgICAgICAgIHdyYXAuaW5zZXJ0QmVmb3JlKCB0aGlzWzBdICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgd3JhcC5tYXAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtID0gdGhpcztcblxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIGVsZW0uZmlyc3RDaGlsZCAmJiBlbGVtLmZpcnN0Q2hpbGQubm9kZVR5cGUgPT09IDEgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtID0gZWxlbS5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW07XG4gICAgICAgICAgICAgICAgfSkuYXBwZW5kKCB0aGlzICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuXG4gICAgICAgIHdyYXBJbm5lcjogZnVuY3Rpb24oIGh0bWwgKSB7XG4gICAgICAgICAgICBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICkgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSh0aGlzKS53cmFwSW5uZXIoIGh0bWwuY2FsbCh0aGlzLCBpKSApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0galF1ZXJ5KCB0aGlzICksXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzID0gc2VsZi5jb250ZW50cygpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCBjb250ZW50cy5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzLndyYXBBbGwoIGh0bWwgKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuYXBwZW5kKCBodG1sICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgd3JhcDogZnVuY3Rpb24oIGh0bWwgKSB7XG4gICAgICAgICAgICB2YXIgaXNGdW5jdGlvbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSkge1xuICAgICAgICAgICAgICAgIGpRdWVyeSggdGhpcyApLndyYXBBbGwoIGlzRnVuY3Rpb24gPyBodG1sLmNhbGwodGhpcywgaSkgOiBodG1sICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICB1bndyYXA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAoICFqUXVlcnkubm9kZU5hbWUoIHRoaXMsIFwiYm9keVwiICkgKSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSggdGhpcyApLnJlcGxhY2VXaXRoKCB0aGlzLmNoaWxkTm9kZXMgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5lbmQoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBpZnJhbWUsIGdldFN0eWxlcywgY3VyQ1NTLFxuICAgICAgICByYWxwaGEgPSAvYWxwaGFcXChbXildKlxcKS9pLFxuICAgICAgICByb3BhY2l0eSA9IC9vcGFjaXR5XFxzKj1cXHMqKFteKV0qKS8sXG4gICAgICAgIHJwb3NpdGlvbiA9IC9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkLyxcbiAgICAvLyBzd2FwcGFibGUgaWYgZGlzcGxheSBpcyBub25lIG9yIHN0YXJ0cyB3aXRoIHRhYmxlIGV4Y2VwdCBcInRhYmxlXCIsIFwidGFibGUtY2VsbFwiLCBvciBcInRhYmxlLWNhcHRpb25cIlxuICAgIC8vIHNlZSBoZXJlIGZvciBkaXNwbGF5IHZhbHVlczogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9DU1MvZGlzcGxheVxuICAgICAgICByZGlzcGxheXN3YXAgPSAvXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sXG4gICAgICAgIHJtYXJnaW4gPSAvXm1hcmdpbi8sXG4gICAgICAgIHJudW1zcGxpdCA9IG5ldyBSZWdFeHAoIFwiXihcIiArIGNvcmVfcG51bSArIFwiKSguKikkXCIsIFwiaVwiICksXG4gICAgICAgIHJudW1ub25weCA9IG5ldyBSZWdFeHAoIFwiXihcIiArIGNvcmVfcG51bSArIFwiKSg/IXB4KVthLXolXSskXCIsIFwiaVwiICksXG4gICAgICAgIHJyZWxOdW0gPSBuZXcgUmVnRXhwKCBcIl4oWystXSk9KFwiICsgY29yZV9wbnVtICsgXCIpXCIsIFwiaVwiICksXG4gICAgICAgIGVsZW1kaXNwbGF5ID0geyBCT0RZOiBcImJsb2NrXCIgfSxcblxuICAgICAgICBjc3NTaG93ID0geyBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLCB2aXNpYmlsaXR5OiBcImhpZGRlblwiLCBkaXNwbGF5OiBcImJsb2NrXCIgfSxcbiAgICAgICAgY3NzTm9ybWFsVHJhbnNmb3JtID0ge1xuICAgICAgICAgICAgbGV0dGVyU3BhY2luZzogMCxcbiAgICAgICAgICAgIGZvbnRXZWlnaHQ6IDQwMFxuICAgICAgICB9LFxuXG4gICAgICAgIGNzc0V4cGFuZCA9IFsgXCJUb3BcIiwgXCJSaWdodFwiLCBcIkJvdHRvbVwiLCBcIkxlZnRcIiBdLFxuICAgICAgICBjc3NQcmVmaXhlcyA9IFsgXCJXZWJraXRcIiwgXCJPXCIsIFwiTW96XCIsIFwibXNcIiBdO1xuXG4vLyByZXR1cm4gYSBjc3MgcHJvcGVydHkgbWFwcGVkIHRvIGEgcG90ZW50aWFsbHkgdmVuZG9yIHByZWZpeGVkIHByb3BlcnR5XG4gICAgZnVuY3Rpb24gdmVuZG9yUHJvcE5hbWUoIHN0eWxlLCBuYW1lICkge1xuXG4gICAgICAgIC8vIHNob3J0Y3V0IGZvciBuYW1lcyB0aGF0IGFyZSBub3QgdmVuZG9yIHByZWZpeGVkXG4gICAgICAgIGlmICggbmFtZSBpbiBzdHlsZSApIHtcbiAgICAgICAgICAgIHJldHVybiBuYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2hlY2sgZm9yIHZlbmRvciBwcmVmaXhlZCBuYW1lc1xuICAgICAgICB2YXIgY2FwTmFtZSA9IG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpLFxuICAgICAgICAgICAgb3JpZ05hbWUgPSBuYW1lLFxuICAgICAgICAgICAgaSA9IGNzc1ByZWZpeGVzLmxlbmd0aDtcblxuICAgICAgICB3aGlsZSAoIGktLSApIHtcbiAgICAgICAgICAgIG5hbWUgPSBjc3NQcmVmaXhlc1sgaSBdICsgY2FwTmFtZTtcbiAgICAgICAgICAgIGlmICggbmFtZSBpbiBzdHlsZSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvcmlnTmFtZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0hpZGRlbiggZWxlbSwgZWwgKSB7XG4gICAgICAgIC8vIGlzSGlkZGVuIG1pZ2h0IGJlIGNhbGxlZCBmcm9tIGpRdWVyeSNmaWx0ZXIgZnVuY3Rpb247XG4gICAgICAgIC8vIGluIHRoYXQgY2FzZSwgZWxlbWVudCB3aWxsIGJlIHNlY29uZCBhcmd1bWVudFxuICAgICAgICBlbGVtID0gZWwgfHwgZWxlbTtcbiAgICAgICAgcmV0dXJuIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgPT09IFwibm9uZVwiIHx8ICFqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dIaWRlKCBlbGVtZW50cywgc2hvdyApIHtcbiAgICAgICAgdmFyIGRpc3BsYXksIGVsZW0sIGhpZGRlbixcbiAgICAgICAgICAgIHZhbHVlcyA9IFtdLFxuICAgICAgICAgICAgaW5kZXggPSAwLFxuICAgICAgICAgICAgbGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoO1xuXG4gICAgICAgIGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG4gICAgICAgICAgICBlbGVtID0gZWxlbWVudHNbIGluZGV4IF07XG4gICAgICAgICAgICBpZiAoICFlbGVtLnN0eWxlICkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YWx1ZXNbIGluZGV4IF0gPSBqUXVlcnkuX2RhdGEoIGVsZW0sIFwib2xkZGlzcGxheVwiICk7XG4gICAgICAgICAgICBkaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5O1xuICAgICAgICAgICAgaWYgKCBzaG93ICkge1xuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBpbmxpbmUgZGlzcGxheSBvZiB0aGlzIGVsZW1lbnQgdG8gbGVhcm4gaWYgaXQgaXNcbiAgICAgICAgICAgICAgICAvLyBiZWluZyBoaWRkZW4gYnkgY2FzY2FkZWQgcnVsZXMgb3Igbm90XG4gICAgICAgICAgICAgICAgaWYgKCAhdmFsdWVzWyBpbmRleCBdICYmIGRpc3BsYXkgPT09IFwibm9uZVwiICkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNldCBlbGVtZW50cyB3aGljaCBoYXZlIGJlZW4gb3ZlcnJpZGRlbiB3aXRoIGRpc3BsYXk6IG5vbmVcbiAgICAgICAgICAgICAgICAvLyBpbiBhIHN0eWxlc2hlZXQgdG8gd2hhdGV2ZXIgdGhlIGRlZmF1bHQgYnJvd3NlciBzdHlsZSBpc1xuICAgICAgICAgICAgICAgIC8vIGZvciBzdWNoIGFuIGVsZW1lbnRcbiAgICAgICAgICAgICAgICBpZiAoIGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJcIiAmJiBpc0hpZGRlbiggZWxlbSApICkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbIGluZGV4IF0gPSBqUXVlcnkuX2RhdGEoIGVsZW0sIFwib2xkZGlzcGxheVwiLCBjc3NfZGVmYXVsdERpc3BsYXkoZWxlbS5ub2RlTmFtZSkgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgaWYgKCAhdmFsdWVzWyBpbmRleCBdICkge1xuICAgICAgICAgICAgICAgICAgICBoaWRkZW4gPSBpc0hpZGRlbiggZWxlbSApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggZGlzcGxheSAmJiBkaXNwbGF5ICE9PSBcIm5vbmVcIiB8fCAhaGlkZGVuICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5Ll9kYXRhKCBlbGVtLCBcIm9sZGRpc3BsYXlcIiwgaGlkZGVuID8gZGlzcGxheSA6IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCB0aGUgZGlzcGxheSBvZiBtb3N0IG9mIHRoZSBlbGVtZW50cyBpbiBhIHNlY29uZCBsb29wXG4gICAgICAgIC8vIHRvIGF2b2lkIHRoZSBjb25zdGFudCByZWZsb3dcbiAgICAgICAgZm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcbiAgICAgICAgICAgIGVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTtcbiAgICAgICAgICAgIGlmICggIWVsZW0uc3R5bGUgKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoICFzaG93IHx8IGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIgfHwgZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICkge1xuICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUuZGlzcGxheSA9IHNob3cgPyB2YWx1ZXNbIGluZGV4IF0gfHwgXCJcIiA6IFwibm9uZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgIH1cblxuICAgIGpRdWVyeS5mbi5leHRlbmQoe1xuICAgICAgICBjc3M6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcbiAgICAgICAgICAgIHJldHVybiBqUXVlcnkuYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxlbiwgc3R5bGVzLFxuICAgICAgICAgICAgICAgICAgICBtYXAgPSB7fSxcbiAgICAgICAgICAgICAgICAgICAgaSA9IDA7XG5cbiAgICAgICAgICAgICAgICBpZiAoIGpRdWVyeS5pc0FycmF5KCBuYW1lICkgKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlcyA9IGdldFN0eWxlcyggZWxlbSApO1xuICAgICAgICAgICAgICAgICAgICBsZW4gPSBuYW1lLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcFsgbmFtZVsgaSBdIF0gPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lWyBpIF0sIGZhbHNlLCBzdHlsZXMgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUsIHZhbHVlICkgOlxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICk7XG4gICAgICAgICAgICB9LCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2hvdzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gc2hvd0hpZGUoIHRoaXMsIHRydWUgKTtcbiAgICAgICAgfSxcbiAgICAgICAgaGlkZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gc2hvd0hpZGUoIHRoaXMgKTtcbiAgICAgICAgfSxcbiAgICAgICAgdG9nZ2xlOiBmdW5jdGlvbiggc3RhdGUgKSB7XG4gICAgICAgICAgICBpZiAoIHR5cGVvZiBzdGF0ZSA9PT0gXCJib29sZWFuXCIgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlID8gdGhpcy5zaG93KCkgOiB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAoIGlzSGlkZGVuKCB0aGlzICkgKSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeSggdGhpcyApLnNob3coKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoIHRoaXMgKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGpRdWVyeS5leHRlbmQoe1xuICAgICAgICAvLyBBZGQgaW4gc3R5bGUgcHJvcGVydHkgaG9va3MgZm9yIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHRcbiAgICAgICAgLy8gYmVoYXZpb3Igb2YgZ2V0dGluZyBhbmQgc2V0dGluZyBhIHN0eWxlIHByb3BlcnR5XG4gICAgICAgIGNzc0hvb2tzOiB7XG4gICAgICAgICAgICBvcGFjaXR5OiB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggY29tcHV0ZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBzaG91bGQgYWx3YXlzIGdldCBhIG51bWJlciBiYWNrIGZyb20gb3BhY2l0eVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldCA9IGN1ckNTUyggZWxlbSwgXCJvcGFjaXR5XCIgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQgPT09IFwiXCIgPyBcIjFcIiA6IHJldDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvLyBEb24ndCBhdXRvbWF0aWNhbGx5IGFkZCBcInB4XCIgdG8gdGhlc2UgcG9zc2libHktdW5pdGxlc3MgcHJvcGVydGllc1xuICAgICAgICBjc3NOdW1iZXI6IHtcbiAgICAgICAgICAgIFwiY29sdW1uQ291bnRcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiZmlsbE9wYWNpdHlcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiZm9udFdlaWdodFwiOiB0cnVlLFxuICAgICAgICAgICAgXCJsaW5lSGVpZ2h0XCI6IHRydWUsXG4gICAgICAgICAgICBcIm9wYWNpdHlcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwib3JkZXJcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwib3JwaGFuc1wiOiB0cnVlLFxuICAgICAgICAgICAgXCJ3aWRvd3NcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwiekluZGV4XCI6IHRydWUsXG4gICAgICAgICAgICBcInpvb21cIjogdHJ1ZVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIEFkZCBpbiBwcm9wZXJ0aWVzIHdob3NlIG5hbWVzIHlvdSB3aXNoIHRvIGZpeCBiZWZvcmVcbiAgICAgICAgLy8gc2V0dGluZyBvciBnZXR0aW5nIHRoZSB2YWx1ZVxuICAgICAgICBjc3NQcm9wczoge1xuICAgICAgICAgICAgLy8gbm9ybWFsaXplIGZsb2F0IGNzcyBwcm9wZXJ0eVxuICAgICAgICAgICAgXCJmbG9hdFwiOiBqUXVlcnkuc3VwcG9ydC5jc3NGbG9hdCA/IFwiY3NzRmxvYXRcIiA6IFwic3R5bGVGbG9hdFwiXG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gR2V0IGFuZCBzZXQgdGhlIHN0eWxlIHByb3BlcnR5IG9uIGEgRE9NIE5vZGVcbiAgICAgICAgc3R5bGU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSwgZXh0cmEgKSB7XG4gICAgICAgICAgICAvLyBEb24ndCBzZXQgc3R5bGVzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcbiAgICAgICAgICAgIGlmICggIWVsZW0gfHwgZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4IHx8ICFlbGVtLnN0eWxlICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG4gICAgICAgICAgICB2YXIgcmV0LCB0eXBlLCBob29rcyxcbiAgICAgICAgICAgICAgICBvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKSxcbiAgICAgICAgICAgICAgICBzdHlsZSA9IGVsZW0uc3R5bGU7XG5cbiAgICAgICAgICAgIG5hbWUgPSBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gfHwgKCBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggc3R5bGUsIG9yaWdOYW1lICkgKTtcblxuICAgICAgICAgICAgLy8gZ2V0cyBob29rIGZvciB0aGUgcHJlZml4ZWQgdmVyc2lvblxuICAgICAgICAgICAgLy8gZm9sbG93ZWQgYnkgdGhlIHVucHJlZml4ZWQgdmVyc2lvblxuICAgICAgICAgICAgaG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlJ3JlIHNldHRpbmcgYSB2YWx1ZVxuICAgICAgICAgICAgaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cbiAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IHJlbGF0aXZlIG51bWJlciBzdHJpbmdzICgrPSBvciAtPSkgdG8gcmVsYXRpdmUgbnVtYmVycy4gIzczNDVcbiAgICAgICAgICAgICAgICBpZiAoIHR5cGUgPT09IFwic3RyaW5nXCIgJiYgKHJldCA9IHJyZWxOdW0uZXhlYyggdmFsdWUgKSkgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gKCByZXRbMV0gKyAxICkgKiByZXRbMl0gKyBwYXJzZUZsb2F0KCBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICkgKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRml4ZXMgYnVnICM5MjM3XG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSBcIm51bWJlclwiO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IE5hTiBhbmQgbnVsbCB2YWx1ZXMgYXJlbid0IHNldC4gU2VlOiAjNzExNlxuICAgICAgICAgICAgICAgIGlmICggdmFsdWUgPT0gbnVsbCB8fCB0eXBlID09PSBcIm51bWJlclwiICYmIGlzTmFOKCB2YWx1ZSApICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgYSBudW1iZXIgd2FzIHBhc3NlZCBpbiwgYWRkICdweCcgdG8gdGhlIChleGNlcHQgZm9yIGNlcnRhaW4gQ1NTIHByb3BlcnRpZXMpXG4gICAgICAgICAgICAgICAgaWYgKCB0eXBlID09PSBcIm51bWJlclwiICYmICFqUXVlcnkuY3NzTnVtYmVyWyBvcmlnTmFtZSBdICkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSBcInB4XCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gRml4ZXMgIzg5MDgsIGl0IGNhbiBiZSBkb25lIG1vcmUgY29ycmVjdGx5IGJ5IHNwZWNpZmluZyBzZXR0ZXJzIGluIGNzc0hvb2tzLFxuICAgICAgICAgICAgICAgIC8vIGJ1dCBpdCB3b3VsZCBtZWFuIHRvIGRlZmluZSBlaWdodCAoZm9yIGV2ZXJ5IHByb2JsZW1hdGljIHByb3BlcnR5KSBpZGVudGljYWwgZnVuY3Rpb25zXG4gICAgICAgICAgICAgICAgaWYgKCAhalF1ZXJ5LnN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlICYmIHZhbHVlID09PSBcIlwiICYmIG5hbWUuaW5kZXhPZihcImJhY2tncm91bmRcIikgPT09IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlWyBuYW1lIF0gPSBcImluaGVyaXRcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkLCB1c2UgdGhhdCB2YWx1ZSwgb3RoZXJ3aXNlIGp1c3Qgc2V0IHRoZSBzcGVjaWZpZWQgdmFsdWVcbiAgICAgICAgICAgICAgICBpZiAoICFob29rcyB8fCAhKFwic2V0XCIgaW4gaG9va3MpIHx8ICh2YWx1ZSA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIGV4dHJhICkpICE9PSB1bmRlZmluZWQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gV3JhcHBlZCB0byBwcmV2ZW50IElFIGZyb20gdGhyb3dpbmcgZXJyb3JzIHdoZW4gJ2ludmFsaWQnIHZhbHVlcyBhcmUgcHJvdmlkZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gRml4ZXMgYnVnICM1NTA5XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZVsgbmFtZSBdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge31cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIG5vbi1jb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG4gICAgICAgICAgICAgICAgaWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmIChyZXQgPSBob29rcy5nZXQoIGVsZW0sIGZhbHNlLCBleHRyYSApKSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBqdXN0IGdldCB0aGUgdmFsdWUgZnJvbSB0aGUgc3R5bGUgb2JqZWN0XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0eWxlWyBuYW1lIF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgY3NzOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZXh0cmEsIHN0eWxlcyApIHtcbiAgICAgICAgICAgIHZhciBudW0sIHZhbCwgaG9va3MsXG4gICAgICAgICAgICAgICAgb3JpZ05hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICk7XG5cbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZVxuICAgICAgICAgICAgbmFtZSA9IGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSB8fCAoIGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSA9IHZlbmRvclByb3BOYW1lKCBlbGVtLnN0eWxlLCBvcmlnTmFtZSApICk7XG5cbiAgICAgICAgICAgIC8vIGdldHMgaG9vayBmb3IgdGhlIHByZWZpeGVkIHZlcnNpb25cbiAgICAgICAgICAgIC8vIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIHZlcnNpb25cbiAgICAgICAgICAgIGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gfHwgalF1ZXJ5LmNzc0hvb2tzWyBvcmlnTmFtZSBdO1xuXG4gICAgICAgICAgICAvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZVxuICAgICAgICAgICAgaWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICkge1xuICAgICAgICAgICAgICAgIHZhbCA9IGhvb2tzLmdldCggZWxlbSwgdHJ1ZSwgZXh0cmEgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBpZiBhIHdheSB0byBnZXQgdGhlIGNvbXB1dGVkIHZhbHVlIGV4aXN0cywgdXNlIHRoYXRcbiAgICAgICAgICAgIGlmICggdmFsID09PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgICAgdmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9jb252ZXJ0IFwibm9ybWFsXCIgdG8gY29tcHV0ZWQgdmFsdWVcbiAgICAgICAgICAgIGlmICggdmFsID09PSBcIm5vcm1hbFwiICYmIG5hbWUgaW4gY3NzTm9ybWFsVHJhbnNmb3JtICkge1xuICAgICAgICAgICAgICAgIHZhbCA9IGNzc05vcm1hbFRyYW5zZm9ybVsgbmFtZSBdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZXR1cm4sIGNvbnZlcnRpbmcgdG8gbnVtYmVyIGlmIGZvcmNlZCBvciBhIHF1YWxpZmllciB3YXMgcHJvdmlkZWQgYW5kIHZhbCBsb29rcyBudW1lcmljXG4gICAgICAgICAgICBpZiAoIGV4dHJhID09PSBcIlwiIHx8IGV4dHJhICkge1xuICAgICAgICAgICAgICAgIG51bSA9IHBhcnNlRmxvYXQoIHZhbCApO1xuICAgICAgICAgICAgICAgIHJldHVybiBleHRyYSA9PT0gdHJ1ZSB8fCBqUXVlcnkuaXNOdW1lcmljKCBudW0gKSA/IG51bSB8fCAwIDogdmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4vLyBOT1RFOiB3ZSd2ZSBpbmNsdWRlZCB0aGUgXCJ3aW5kb3dcIiBpbiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZVxuLy8gYmVjYXVzZSBqc2RvbSBvbiBub2RlLmpzIHdpbGwgYnJlYWsgd2l0aG91dCBpdC5cbiAgICBpZiAoIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlICkge1xuICAgICAgICBnZXRTdHlsZXMgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggZWxlbSwgbnVsbCApO1xuICAgICAgICB9O1xuXG4gICAgICAgIGN1ckNTUyA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBfY29tcHV0ZWQgKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGgsIG1pbldpZHRoLCBtYXhXaWR0aCxcbiAgICAgICAgICAgICAgICBjb21wdXRlZCA9IF9jb21wdXRlZCB8fCBnZXRTdHlsZXMoIGVsZW0gKSxcblxuICAgICAgICAgICAgLy8gZ2V0UHJvcGVydHlWYWx1ZSBpcyBvbmx5IG5lZWRlZCBmb3IgLmNzcygnZmlsdGVyJykgaW4gSUU5LCBzZWUgIzEyNTM3XG4gICAgICAgICAgICAgICAgcmV0ID0gY29tcHV0ZWQgPyBjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKCBuYW1lICkgfHwgY29tcHV0ZWRbIG5hbWUgXSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBzdHlsZSA9IGVsZW0uc3R5bGU7XG5cbiAgICAgICAgICAgIGlmICggY29tcHV0ZWQgKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoIHJldCA9PT0gXCJcIiAmJiAhalF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0ID0galF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQSB0cmlidXRlIHRvIHRoZSBcImF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHNcIlxuICAgICAgICAgICAgICAgIC8vIENocm9tZSA8IDE3IGFuZCBTYWZhcmkgNS4wIHVzZXMgXCJjb21wdXRlZCB2YWx1ZVwiIGluc3RlYWQgb2YgXCJ1c2VkIHZhbHVlXCIgZm9yIG1hcmdpbi1yaWdodFxuICAgICAgICAgICAgICAgIC8vIFNhZmFyaSA1LjEuNyAoYXQgbGVhc3QpIHJldHVybnMgcGVyY2VudGFnZSBmb3IgYSBsYXJnZXIgc2V0IG9mIHZhbHVlcywgYnV0IHdpZHRoIHNlZW1zIHRvIGJlIHJlbGlhYmx5IHBpeGVsc1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgaXMgYWdhaW5zdCB0aGUgQ1NTT00gZHJhZnQgc3BlYzogaHR0cDovL2Rldi53My5vcmcvY3Nzd2cvY3Nzb20vI3Jlc29sdmVkLXZhbHVlc1xuICAgICAgICAgICAgICAgIGlmICggcm51bW5vbnB4LnRlc3QoIHJldCApICYmIHJtYXJnaW4udGVzdCggbmFtZSApICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBzdHlsZS53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgbWluV2lkdGggPSBzdHlsZS5taW5XaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGggPSBzdHlsZS5tYXhXaWR0aDtcblxuICAgICAgICAgICAgICAgICAgICAvLyBQdXQgaW4gdGhlIG5ldyB2YWx1ZXMgdG8gZ2V0IGEgY29tcHV0ZWQgdmFsdWUgb3V0XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLm1pbldpZHRoID0gc3R5bGUubWF4V2lkdGggPSBzdHlsZS53aWR0aCA9IHJldDtcbiAgICAgICAgICAgICAgICAgICAgcmV0ID0gY29tcHV0ZWQud2lkdGg7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmV2ZXJ0IHRoZSBjaGFuZ2VkIHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS53aWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5taW5XaWR0aCA9IG1pbldpZHRoO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5tYXhXaWR0aCA9IG1heFdpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY3VycmVudFN0eWxlICkge1xuICAgICAgICBnZXRTdHlsZXMgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtLmN1cnJlbnRTdHlsZTtcbiAgICAgICAgfTtcblxuICAgICAgICBjdXJDU1MgPSBmdW5jdGlvbiggZWxlbSwgbmFtZSwgX2NvbXB1dGVkICkge1xuICAgICAgICAgICAgdmFyIGxlZnQsIHJzLCByc0xlZnQsXG4gICAgICAgICAgICAgICAgY29tcHV0ZWQgPSBfY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICksXG4gICAgICAgICAgICAgICAgcmV0ID0gY29tcHV0ZWQgPyBjb21wdXRlZFsgbmFtZSBdIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHN0eWxlID0gZWxlbS5zdHlsZTtcblxuICAgICAgICAgICAgLy8gQXZvaWQgc2V0dGluZyByZXQgdG8gZW1wdHkgc3RyaW5nIGhlcmVcbiAgICAgICAgICAgIC8vIHNvIHdlIGRvbid0IGRlZmF1bHQgdG8gYXV0b1xuICAgICAgICAgICAgaWYgKCByZXQgPT0gbnVsbCAmJiBzdHlsZSAmJiBzdHlsZVsgbmFtZSBdICkge1xuICAgICAgICAgICAgICAgIHJldCA9IHN0eWxlWyBuYW1lIF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEZyb20gdGhlIGF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHNcbiAgICAgICAgICAgIC8vIGh0dHA6Ly9lcmlrLmVhZS5uZXQvYXJjaGl2ZXMvMjAwNy8wNy8yNy8xOC41NC4xNS8jY29tbWVudC0xMDIyOTFcblxuICAgICAgICAgICAgLy8gSWYgd2UncmUgbm90IGRlYWxpbmcgd2l0aCBhIHJlZ3VsYXIgcGl4ZWwgbnVtYmVyXG4gICAgICAgICAgICAvLyBidXQgYSBudW1iZXIgdGhhdCBoYXMgYSB3ZWlyZCBlbmRpbmcsIHdlIG5lZWQgdG8gY29udmVydCBpdCB0byBwaXhlbHNcbiAgICAgICAgICAgIC8vIGJ1dCBub3QgcG9zaXRpb24gY3NzIGF0dHJpYnV0ZXMsIGFzIHRob3NlIGFyZSBwcm9wb3J0aW9uYWwgdG8gdGhlIHBhcmVudCBlbGVtZW50IGluc3RlYWRcbiAgICAgICAgICAgIC8vIGFuZCB3ZSBjYW4ndCBtZWFzdXJlIHRoZSBwYXJlbnQgaW5zdGVhZCBiZWNhdXNlIGl0IG1pZ2h0IHRyaWdnZXIgYSBcInN0YWNraW5nIGRvbGxzXCIgcHJvYmxlbVxuICAgICAgICAgICAgaWYgKCBybnVtbm9ucHgudGVzdCggcmV0ICkgJiYgIXJwb3NpdGlvbi50ZXN0KCBuYW1lICkgKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWVzXG4gICAgICAgICAgICAgICAgbGVmdCA9IHN0eWxlLmxlZnQ7XG4gICAgICAgICAgICAgICAgcnMgPSBlbGVtLnJ1bnRpbWVTdHlsZTtcbiAgICAgICAgICAgICAgICByc0xlZnQgPSBycyAmJiBycy5sZWZ0O1xuXG4gICAgICAgICAgICAgICAgLy8gUHV0IGluIHRoZSBuZXcgdmFsdWVzIHRvIGdldCBhIGNvbXB1dGVkIHZhbHVlIG91dFxuICAgICAgICAgICAgICAgIGlmICggcnNMZWZ0ICkge1xuICAgICAgICAgICAgICAgICAgICBycy5sZWZ0ID0gZWxlbS5jdXJyZW50U3R5bGUubGVmdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3R5bGUubGVmdCA9IG5hbWUgPT09IFwiZm9udFNpemVcIiA/IFwiMWVtXCIgOiByZXQ7XG4gICAgICAgICAgICAgICAgcmV0ID0gc3R5bGUucGl4ZWxMZWZ0ICsgXCJweFwiO1xuXG4gICAgICAgICAgICAgICAgLy8gUmV2ZXJ0IHRoZSBjaGFuZ2VkIHZhbHVlc1xuICAgICAgICAgICAgICAgIHN0eWxlLmxlZnQgPSBsZWZ0O1xuICAgICAgICAgICAgICAgIGlmICggcnNMZWZ0ICkge1xuICAgICAgICAgICAgICAgICAgICBycy5sZWZ0ID0gcnNMZWZ0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJldCA9PT0gXCJcIiA/IFwiYXV0b1wiIDogcmV0O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKSB7XG4gICAgICAgIHZhciBtYXRjaGVzID0gcm51bXNwbGl0LmV4ZWMoIHZhbHVlICk7XG4gICAgICAgIHJldHVybiBtYXRjaGVzID9cbiAgICAgICAgICAgIC8vIEd1YXJkIGFnYWluc3QgdW5kZWZpbmVkIFwic3VidHJhY3RcIiwgZS5nLiwgd2hlbiB1c2VkIGFzIGluIGNzc0hvb2tzXG4gICAgICAgIE1hdGgubWF4KCAwLCBtYXRjaGVzWyAxIF0gLSAoIHN1YnRyYWN0IHx8IDAgKSApICsgKCBtYXRjaGVzWyAyIF0gfHwgXCJweFwiICkgOlxuICAgICAgICAgICAgdmFsdWU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXVnbWVudFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhLCBpc0JvcmRlckJveCwgc3R5bGVzICkge1xuICAgICAgICB2YXIgaSA9IGV4dHJhID09PSAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICkgP1xuICAgICAgICAgICAgICAgIC8vIElmIHdlIGFscmVhZHkgaGF2ZSB0aGUgcmlnaHQgbWVhc3VyZW1lbnQsIGF2b2lkIGF1Z21lbnRhdGlvblxuICAgICAgICAgICAgICAgIDQgOlxuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBpbml0aWFsaXplIGZvciBob3Jpem9udGFsIG9yIHZlcnRpY2FsIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICBuYW1lID09PSBcIndpZHRoXCIgPyAxIDogMCxcblxuICAgICAgICAgICAgdmFsID0gMDtcblxuICAgICAgICBmb3IgKCA7IGkgPCA0OyBpICs9IDIgKSB7XG4gICAgICAgICAgICAvLyBib3RoIGJveCBtb2RlbHMgZXhjbHVkZSBtYXJnaW4sIHNvIGFkZCBpdCBpZiB3ZSB3YW50IGl0XG4gICAgICAgICAgICBpZiAoIGV4dHJhID09PSBcIm1hcmdpblwiICkge1xuICAgICAgICAgICAgICAgIHZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCBleHRyYSArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCBpc0JvcmRlckJveCApIHtcbiAgICAgICAgICAgICAgICAvLyBib3JkZXItYm94IGluY2x1ZGVzIHBhZGRpbmcsIHNvIHJlbW92ZSBpdCBpZiB3ZSB3YW50IGNvbnRlbnRcbiAgICAgICAgICAgICAgICBpZiAoIGV4dHJhID09PSBcImNvbnRlbnRcIiApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsIC09IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGJvcmRlciBub3IgbWFyZ2luLCBzbyByZW1vdmUgYm9yZGVyXG4gICAgICAgICAgICAgICAgaWYgKCBleHRyYSAhPT0gXCJtYXJnaW5cIiApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsIC09IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBhdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50LCBzbyBhZGQgcGFkZGluZ1xuICAgICAgICAgICAgICAgIHZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblxuICAgICAgICAgICAgICAgIC8vIGF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGNvbnRlbnQgbm9yIHBhZGRpbmcsIHNvIGFkZCBib3JkZXJcbiAgICAgICAgICAgICAgICBpZiAoIGV4dHJhICE9PSBcInBhZGRpbmdcIiApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSApIHtcblxuICAgICAgICAvLyBTdGFydCB3aXRoIG9mZnNldCBwcm9wZXJ0eSwgd2hpY2ggaXMgZXF1aXZhbGVudCB0byB0aGUgYm9yZGVyLWJveCB2YWx1ZVxuICAgICAgICB2YXIgdmFsdWVJc0JvcmRlckJveCA9IHRydWUsXG4gICAgICAgICAgICB2YWwgPSBuYW1lID09PSBcIndpZHRoXCIgPyBlbGVtLm9mZnNldFdpZHRoIDogZWxlbS5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICBzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKSxcbiAgICAgICAgICAgIGlzQm9yZGVyQm94ID0galF1ZXJ5LnN1cHBvcnQuYm94U2l6aW5nICYmIGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCI7XG5cbiAgICAgICAgLy8gc29tZSBub24taHRtbCBlbGVtZW50cyByZXR1cm4gdW5kZWZpbmVkIGZvciBvZmZzZXRXaWR0aCwgc28gY2hlY2sgZm9yIG51bGwvdW5kZWZpbmVkXG4gICAgICAgIC8vIHN2ZyAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY0OTI4NVxuICAgICAgICAvLyBNYXRoTUwgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD00OTE2NjhcbiAgICAgICAgaWYgKCB2YWwgPD0gMCB8fCB2YWwgPT0gbnVsbCApIHtcbiAgICAgICAgICAgIC8vIEZhbGwgYmFjayB0byBjb21wdXRlZCB0aGVuIHVuY29tcHV0ZWQgY3NzIGlmIG5lY2Vzc2FyeVxuICAgICAgICAgICAgdmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTtcbiAgICAgICAgICAgIGlmICggdmFsIDwgMCB8fCB2YWwgPT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICB2YWwgPSBlbGVtLnN0eWxlWyBuYW1lIF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENvbXB1dGVkIHVuaXQgaXMgbm90IHBpeGVscy4gU3RvcCBoZXJlIGFuZCByZXR1cm4uXG4gICAgICAgICAgICBpZiAoIHJudW1ub25weC50ZXN0KHZhbCkgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gd2UgbmVlZCB0aGUgY2hlY2sgZm9yIHN0eWxlIGluIGNhc2UgYSBicm93c2VyIHdoaWNoIHJldHVybnMgdW5yZWxpYWJsZSB2YWx1ZXNcbiAgICAgICAgICAgIC8vIGZvciBnZXRDb21wdXRlZFN0eWxlIHNpbGVudGx5IGZhbGxzIGJhY2sgdG8gdGhlIHJlbGlhYmxlIGVsZW0uc3R5bGVcbiAgICAgICAgICAgIHZhbHVlSXNCb3JkZXJCb3ggPSBpc0JvcmRlckJveCAmJiAoIGpRdWVyeS5zdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlIHx8IHZhbCA9PT0gZWxlbS5zdHlsZVsgbmFtZSBdICk7XG5cbiAgICAgICAgICAgIC8vIE5vcm1hbGl6ZSBcIlwiLCBhdXRvLCBhbmQgcHJlcGFyZSBmb3IgZXh0cmFcbiAgICAgICAgICAgIHZhbCA9IHBhcnNlRmxvYXQoIHZhbCApIHx8IDA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1c2UgdGhlIGFjdGl2ZSBib3gtc2l6aW5nIG1vZGVsIHRvIGFkZC9zdWJ0cmFjdCBpcnJlbGV2YW50IHN0eWxlc1xuICAgICAgICByZXR1cm4gKCB2YWwgK1xuICAgICAgICAgICAgICAgIGF1Z21lbnRXaWR0aE9ySGVpZ2h0KFxuICAgICAgICAgICAgICAgICAgICBlbGVtLFxuICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICBleHRyYSB8fCAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlSXNCb3JkZXJCb3gsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlc1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkgKyBcInB4XCI7XG4gICAgfVxuXG4vLyBUcnkgdG8gZGV0ZXJtaW5lIHRoZSBkZWZhdWx0IGRpc3BsYXkgdmFsdWUgb2YgYW4gZWxlbWVudFxuICAgIGZ1bmN0aW9uIGNzc19kZWZhdWx0RGlzcGxheSggbm9kZU5hbWUgKSB7XG4gICAgICAgIHZhciBkb2MgPSBkb2N1bWVudCxcbiAgICAgICAgICAgIGRpc3BsYXkgPSBlbGVtZGlzcGxheVsgbm9kZU5hbWUgXTtcblxuICAgICAgICBpZiAoICFkaXNwbGF5ICkge1xuICAgICAgICAgICAgZGlzcGxheSA9IGFjdHVhbERpc3BsYXkoIG5vZGVOYW1lLCBkb2MgKTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIHNpbXBsZSB3YXkgZmFpbHMsIHJlYWQgZnJvbSBpbnNpZGUgYW4gaWZyYW1lXG4gICAgICAgICAgICBpZiAoIGRpc3BsYXkgPT09IFwibm9uZVwiIHx8ICFkaXNwbGF5ICkge1xuICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgYWxyZWFkeS1jcmVhdGVkIGlmcmFtZSBpZiBwb3NzaWJsZVxuICAgICAgICAgICAgICAgIGlmcmFtZSA9ICggaWZyYW1lIHx8XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeShcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz5cIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoIFwiY3NzVGV4dFwiLCBcImRpc3BsYXk6YmxvY2sgIWltcG9ydGFudFwiIClcbiAgICAgICAgICAgICAgICApLmFwcGVuZFRvKCBkb2MuZG9jdW1lbnRFbGVtZW50ICk7XG5cbiAgICAgICAgICAgICAgICAvLyBBbHdheXMgd3JpdGUgYSBuZXcgSFRNTCBza2VsZXRvbiBzbyBXZWJraXQgYW5kIEZpcmVmb3ggZG9uJ3QgY2hva2Ugb24gcmV1c2VcbiAgICAgICAgICAgICAgICBkb2MgPSAoIGlmcmFtZVswXS5jb250ZW50V2luZG93IHx8IGlmcmFtZVswXS5jb250ZW50RG9jdW1lbnQgKS5kb2N1bWVudDtcbiAgICAgICAgICAgICAgICBkb2Mud3JpdGUoXCI8IWRvY3R5cGUgaHRtbD48aHRtbD48Ym9keT5cIik7XG4gICAgICAgICAgICAgICAgZG9jLmNsb3NlKCk7XG5cbiAgICAgICAgICAgICAgICBkaXNwbGF5ID0gYWN0dWFsRGlzcGxheSggbm9kZU5hbWUsIGRvYyApO1xuICAgICAgICAgICAgICAgIGlmcmFtZS5kZXRhY2goKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIGNvcnJlY3QgZGVmYXVsdCBkaXNwbGF5XG4gICAgICAgICAgICBlbGVtZGlzcGxheVsgbm9kZU5hbWUgXSA9IGRpc3BsYXk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGlzcGxheTtcbiAgICB9XG5cbi8vIENhbGxlZCBPTkxZIGZyb20gd2l0aGluIGNzc19kZWZhdWx0RGlzcGxheVxuICAgIGZ1bmN0aW9uIGFjdHVhbERpc3BsYXkoIG5hbWUsIGRvYyApIHtcbiAgICAgICAgdmFyIGVsZW0gPSBqUXVlcnkoIGRvYy5jcmVhdGVFbGVtZW50KCBuYW1lICkgKS5hcHBlbmRUbyggZG9jLmJvZHkgKSxcbiAgICAgICAgICAgIGRpc3BsYXkgPSBqUXVlcnkuY3NzKCBlbGVtWzBdLCBcImRpc3BsYXlcIiApO1xuICAgICAgICBlbGVtLnJlbW92ZSgpO1xuICAgICAgICByZXR1cm4gZGlzcGxheTtcbiAgICB9XG5cbiAgICBqUXVlcnkuZWFjaChbIFwiaGVpZ2h0XCIsIFwid2lkdGhcIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcbiAgICAgICAgalF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gPSB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCwgZXh0cmEgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCBjb21wdXRlZCApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY2VydGFpbiBlbGVtZW50cyBjYW4gaGF2ZSBkaW1lbnNpb24gaW5mbyBpZiB3ZSBpbnZpc2libHkgc2hvdyB0aGVtXG4gICAgICAgICAgICAgICAgICAgIC8vIGhvd2V2ZXIsIGl0IG11c3QgaGF2ZSBhIGN1cnJlbnQgZGlzcGxheSBzdHlsZSB0aGF0IHdvdWxkIGJlbmVmaXQgZnJvbSB0aGlzXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtLm9mZnNldFdpZHRoID09PSAwICYmIHJkaXNwbGF5c3dhcC50ZXN0KCBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApICkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LnN3YXAoIGVsZW0sIGNzc1Nob3csIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBuYW1lLCBleHRyYSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgZXh0cmEgKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0eWxlcyA9IGV4dHJhICYmIGdldFN0eWxlcyggZWxlbSApO1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXRQb3NpdGl2ZU51bWJlciggZWxlbSwgdmFsdWUsIGV4dHJhID9cbiAgICAgICAgICAgICAgICAgICAgYXVnbWVudFdpZHRoT3JIZWlnaHQoXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhLFxuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LnN1cHBvcnQuYm94U2l6aW5nICYmIGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZXNcbiAgICAgICAgICAgICAgICAgICAgKSA6IDBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgaWYgKCAhalF1ZXJ5LnN1cHBvcnQub3BhY2l0eSApIHtcbiAgICAgICAgalF1ZXJ5LmNzc0hvb2tzLm9wYWNpdHkgPSB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcbiAgICAgICAgICAgICAgICAvLyBJRSB1c2VzIGZpbHRlcnMgZm9yIG9wYWNpdHlcbiAgICAgICAgICAgICAgICByZXR1cm4gcm9wYWNpdHkudGVzdCggKGNvbXB1dGVkICYmIGVsZW0uY3VycmVudFN0eWxlID8gZWxlbS5jdXJyZW50U3R5bGUuZmlsdGVyIDogZWxlbS5zdHlsZS5maWx0ZXIpIHx8IFwiXCIgKSA/XG4gICAgICAgICAgICAgICAgKCAwLjAxICogcGFyc2VGbG9hdCggUmVnRXhwLiQxICkgKSArIFwiXCIgOlxuICAgICAgICAgICAgICAgICAgICBjb21wdXRlZCA/IFwiMVwiIDogXCJcIjtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IGVsZW0uc3R5bGUsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdHlsZSA9IGVsZW0uY3VycmVudFN0eWxlLFxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5ID0galF1ZXJ5LmlzTnVtZXJpYyggdmFsdWUgKSA/IFwiYWxwaGEob3BhY2l0eT1cIiArIHZhbHVlICogMTAwICsgXCIpXCIgOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXIgPSBjdXJyZW50U3R5bGUgJiYgY3VycmVudFN0eWxlLmZpbHRlciB8fCBzdHlsZS5maWx0ZXIgfHwgXCJcIjtcblxuICAgICAgICAgICAgICAgIC8vIElFIGhhcyB0cm91YmxlIHdpdGggb3BhY2l0eSBpZiBpdCBkb2VzIG5vdCBoYXZlIGxheW91dFxuICAgICAgICAgICAgICAgIC8vIEZvcmNlIGl0IGJ5IHNldHRpbmcgdGhlIHpvb20gbGV2ZWxcbiAgICAgICAgICAgICAgICBzdHlsZS56b29tID0gMTtcblxuICAgICAgICAgICAgICAgIC8vIGlmIHNldHRpbmcgb3BhY2l0eSB0byAxLCBhbmQgbm8gb3RoZXIgZmlsdGVycyBleGlzdCAtIGF0dGVtcHQgdG8gcmVtb3ZlIGZpbHRlciBhdHRyaWJ1dGUgIzY2NTJcbiAgICAgICAgICAgICAgICAvLyBpZiB2YWx1ZSA9PT0gXCJcIiwgdGhlbiByZW1vdmUgaW5saW5lIG9wYWNpdHkgIzEyNjg1XG4gICAgICAgICAgICAgICAgaWYgKCAoIHZhbHVlID49IDEgfHwgdmFsdWUgPT09IFwiXCIgKSAmJlxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkudHJpbSggZmlsdGVyLnJlcGxhY2UoIHJhbHBoYSwgXCJcIiApICkgPT09IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldHRpbmcgc3R5bGUuZmlsdGVyIHRvIG51bGwsIFwiXCIgJiBcIiBcIiBzdGlsbCBsZWF2ZSBcImZpbHRlcjpcIiBpbiB0aGUgY3NzVGV4dFxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBcImZpbHRlcjpcIiBpcyBwcmVzZW50IGF0IGFsbCwgY2xlYXJUeXBlIGlzIGRpc2FibGVkLCB3ZSB3YW50IHRvIGF2b2lkIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gc3R5bGUucmVtb3ZlQXR0cmlidXRlIGlzIElFIE9ubHksIGJ1dCBzbyBhcHBhcmVudGx5IGlzIHRoaXMgY29kZSBwYXRoLi4uXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSggXCJmaWx0ZXJcIiApO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIG5vIGZpbHRlciBzdHlsZSBhcHBsaWVkIGluIGEgY3NzIHJ1bGUgb3IgdW5zZXQgaW5saW5lIG9wYWNpdHksIHdlIGFyZSBkb25lXG4gICAgICAgICAgICAgICAgICAgIGlmICggdmFsdWUgPT09IFwiXCIgfHwgY3VycmVudFN0eWxlICYmICFjdXJyZW50U3R5bGUuZmlsdGVyICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCBzZXQgbmV3IGZpbHRlciB2YWx1ZXNcbiAgICAgICAgICAgICAgICBzdHlsZS5maWx0ZXIgPSByYWxwaGEudGVzdCggZmlsdGVyICkgP1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXIucmVwbGFjZSggcmFscGhhLCBvcGFjaXR5ICkgOlxuICAgICAgICAgICAgICAgIGZpbHRlciArIFwiIFwiICsgb3BhY2l0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbi8vIFRoZXNlIGhvb2tzIGNhbm5vdCBiZSBhZGRlZCB1bnRpbCBET00gcmVhZHkgYmVjYXVzZSB0aGUgc3VwcG9ydCB0ZXN0XG4vLyBmb3IgaXQgaXMgbm90IHJ1biB1bnRpbCBhZnRlciBET00gcmVhZHlcbiAgICBqUXVlcnkoZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICggIWpRdWVyeS5zdXBwb3J0LnJlbGlhYmxlTWFyZ2luUmlnaHQgKSB7XG4gICAgICAgICAgICBqUXVlcnkuY3NzSG9va3MubWFyZ2luUmlnaHQgPSB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggY29tcHV0ZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZWJLaXQgQnVnIDEzMzQzIC0gZ2V0Q29tcHV0ZWRTdHlsZSByZXR1cm5zIHdyb25nIHZhbHVlIGZvciBtYXJnaW4tcmlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdvcmsgYXJvdW5kIGJ5IHRlbXBvcmFyaWx5IHNldHRpbmcgZWxlbWVudCBkaXNwbGF5IHRvIGlubGluZS1ibG9ja1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5zd2FwKCBlbGVtLCB7IFwiZGlzcGxheVwiOiBcImlubGluZS1ibG9ja1wiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyQ1NTLCBbIGVsZW0sIFwibWFyZ2luUmlnaHRcIiBdICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2Via2l0IGJ1ZzogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTI5MDg0XG4gICAgICAgIC8vIGdldENvbXB1dGVkU3R5bGUgcmV0dXJucyBwZXJjZW50IHdoZW4gc3BlY2lmaWVkIGZvciB0b3AvbGVmdC9ib3R0b20vcmlnaHRcbiAgICAgICAgLy8gcmF0aGVyIHRoYW4gbWFrZSB0aGUgY3NzIG1vZHVsZSBkZXBlbmQgb24gdGhlIG9mZnNldCBtb2R1bGUsIHdlIGp1c3QgY2hlY2sgZm9yIGl0IGhlcmVcbiAgICAgICAgaWYgKCAhalF1ZXJ5LnN1cHBvcnQucGl4ZWxQb3NpdGlvbiAmJiBqUXVlcnkuZm4ucG9zaXRpb24gKSB7XG4gICAgICAgICAgICBqUXVlcnkuZWFjaCggWyBcInRvcFwiLCBcImxlZnRcIiBdLCBmdW5jdGlvbiggaSwgcHJvcCApIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkuY3NzSG9va3NbIHByb3AgXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGNvbXB1dGVkICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkID0gY3VyQ1NTKCBlbGVtLCBwcm9wICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgY3VyQ1NTIHJldHVybnMgcGVyY2VudGFnZSwgZmFsbGJhY2sgdG8gb2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJudW1ub25weC50ZXN0KCBjb21wdXRlZCApID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoIGVsZW0gKS5wb3NpdGlvbigpWyBwcm9wIF0gKyBcInB4XCIgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICBpZiAoIGpRdWVyeS5leHByICYmIGpRdWVyeS5leHByLmZpbHRlcnMgKSB7XG4gICAgICAgIGpRdWVyeS5leHByLmZpbHRlcnMuaGlkZGVuID0gZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgICAgICAgICAvLyBTdXBwb3J0OiBPcGVyYSA8PSAxMi4xMlxuICAgICAgICAgICAgLy8gT3BlcmEgcmVwb3J0cyBvZmZzZXRXaWR0aHMgYW5kIG9mZnNldEhlaWdodHMgbGVzcyB0aGFuIHplcm8gb24gc29tZSBlbGVtZW50c1xuICAgICAgICAgICAgcmV0dXJuIGVsZW0ub2Zmc2V0V2lkdGggPD0gMCAmJiBlbGVtLm9mZnNldEhlaWdodCA8PSAwIHx8XG4gICAgICAgICAgICAgICAgKCFqUXVlcnkuc3VwcG9ydC5yZWxpYWJsZUhpZGRlbk9mZnNldHMgJiYgKChlbGVtLnN0eWxlICYmIGVsZW0uc3R5bGUuZGlzcGxheSkgfHwgalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSkgPT09IFwibm9uZVwiKTtcbiAgICAgICAgfTtcblxuICAgICAgICBqUXVlcnkuZXhwci5maWx0ZXJzLnZpc2libGUgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgIHJldHVybiAhalF1ZXJ5LmV4cHIuZmlsdGVycy5oaWRkZW4oIGVsZW0gKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbi8vIFRoZXNlIGhvb2tzIGFyZSB1c2VkIGJ5IGFuaW1hdGUgdG8gZXhwYW5kIHByb3BlcnRpZXNcbiAgICBqUXVlcnkuZWFjaCh7XG4gICAgICAgIG1hcmdpbjogXCJcIixcbiAgICAgICAgcGFkZGluZzogXCJcIixcbiAgICAgICAgYm9yZGVyOiBcIldpZHRoXCJcbiAgICB9LCBmdW5jdGlvbiggcHJlZml4LCBzdWZmaXggKSB7XG4gICAgICAgIGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0gPSB7XG4gICAgICAgICAgICBleHBhbmQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IDAsXG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZGVkID0ge30sXG5cbiAgICAgICAgICAgICAgICAvLyBhc3N1bWVzIGEgc2luZ2xlIG51bWJlciBpZiBub3QgYSBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgcGFydHMgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyB2YWx1ZS5zcGxpdChcIiBcIikgOiBbIHZhbHVlIF07XG5cbiAgICAgICAgICAgICAgICBmb3IgKCA7IGkgPCA0OyBpKysgKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZGVkWyBwcmVmaXggKyBjc3NFeHBhbmRbIGkgXSArIHN1ZmZpeCBdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRzWyBpIF0gfHwgcGFydHNbIGkgLSAyIF0gfHwgcGFydHNbIDAgXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZXhwYW5kZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCAhcm1hcmdpbi50ZXN0KCBwcmVmaXggKSApIHtcbiAgICAgICAgICAgIGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0uc2V0ID0gc2V0UG9zaXRpdmVOdW1iZXI7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgcjIwID0gLyUyMC9nLFxuICAgICAgICByYnJhY2tldCA9IC9cXFtcXF0kLyxcbiAgICAgICAgckNSTEYgPSAvXFxyP1xcbi9nLFxuICAgICAgICByc3VibWl0dGVyVHlwZXMgPSAvXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksXG4gICAgICAgIHJzdWJtaXR0YWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtcblxuICAgIGpRdWVyeS5mbi5leHRlbmQoe1xuICAgICAgICBzZXJpYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5wYXJhbSggdGhpcy5zZXJpYWxpemVBcnJheSgpICk7XG4gICAgICAgIH0sXG4gICAgICAgIHNlcmlhbGl6ZUFycmF5OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAvLyBDYW4gYWRkIHByb3BIb29rIGZvciBcImVsZW1lbnRzXCIgdG8gZmlsdGVyIG9yIGFkZCBmb3JtIGVsZW1lbnRzXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGpRdWVyeS5wcm9wKCB0aGlzLCBcImVsZW1lbnRzXCIgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRzID8galF1ZXJ5Lm1ha2VBcnJheSggZWxlbWVudHMgKSA6IHRoaXM7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gdGhpcy50eXBlO1xuICAgICAgICAgICAgICAgICAgICAvLyBVc2UgLmlzKFwiOmRpc2FibGVkXCIpIHNvIHRoYXQgZmllbGRzZXRbZGlzYWJsZWRdIHdvcmtzXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5hbWUgJiYgIWpRdWVyeSggdGhpcyApLmlzKCBcIjpkaXNhYmxlZFwiICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHJzdWJtaXR0YWJsZS50ZXN0KCB0aGlzLm5vZGVOYW1lICkgJiYgIXJzdWJtaXR0ZXJUeXBlcy50ZXN0KCB0eXBlICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICggdGhpcy5jaGVja2VkIHx8ICFtYW5pcHVsYXRpb25fcmNoZWNrYWJsZVR5cGUudGVzdCggdHlwZSApICk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKCBpLCBlbGVtICl7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBqUXVlcnkoIHRoaXMgKS52YWwoKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsID09IG51bGwgP1xuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA6XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkuaXNBcnJheSggdmFsICkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbCApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBuYW1lOiBlbGVtLm5hbWUsIHZhbHVlOiB2YWwucmVwbGFjZSggckNSTEYsIFwiXFxyXFxuXCIgKSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcbiAgICAgICAgICAgICAgICB9KS5nZXQoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4vL1NlcmlhbGl6ZSBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzIG9yIGEgc2V0IG9mXG4vL2tleS92YWx1ZXMgaW50byBhIHF1ZXJ5IHN0cmluZ1xuICAgIGpRdWVyeS5wYXJhbSA9IGZ1bmN0aW9uKCBhLCB0cmFkaXRpb25hbCApIHtcbiAgICAgICAgdmFyIHByZWZpeCxcbiAgICAgICAgICAgIHMgPSBbXSxcbiAgICAgICAgICAgIGFkZCA9IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuICAgICAgICAgICAgICAgIC8vIElmIHZhbHVlIGlzIGEgZnVuY3Rpb24sIGludm9rZSBpdCBhbmQgcmV0dXJuIGl0cyB2YWx1ZVxuICAgICAgICAgICAgICAgIHZhbHVlID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgPyB2YWx1ZSgpIDogKCB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICk7XG4gICAgICAgICAgICAgICAgc1sgcy5sZW5ndGggXSA9IGVuY29kZVVSSUNvbXBvbmVudCgga2V5ICkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCggdmFsdWUgKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy8gU2V0IHRyYWRpdGlvbmFsIHRvIHRydWUgZm9yIGpRdWVyeSA8PSAxLjMuMiBiZWhhdmlvci5cbiAgICAgICAgaWYgKCB0cmFkaXRpb25hbCA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgdHJhZGl0aW9uYWwgPSBqUXVlcnkuYWpheFNldHRpbmdzICYmIGpRdWVyeS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBhbiBhcnJheSB3YXMgcGFzc2VkIGluLCBhc3N1bWUgdGhhdCBpdCBpcyBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzLlxuICAgICAgICBpZiAoIGpRdWVyeS5pc0FycmF5KCBhICkgfHwgKCBhLmpxdWVyeSAmJiAhalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGEgKSApICkge1xuICAgICAgICAgICAgLy8gU2VyaWFsaXplIHRoZSBmb3JtIGVsZW1lbnRzXG4gICAgICAgICAgICBqUXVlcnkuZWFjaCggYSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYWRkKCB0aGlzLm5hbWUsIHRoaXMudmFsdWUgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiB0cmFkaXRpb25hbCwgZW5jb2RlIHRoZSBcIm9sZFwiIHdheSAodGhlIHdheSAxLjMuMiBvciBvbGRlclxuICAgICAgICAgICAgLy8gZGlkIGl0KSwgb3RoZXJ3aXNlIGVuY29kZSBwYXJhbXMgcmVjdXJzaXZlbHkuXG4gICAgICAgICAgICBmb3IgKCBwcmVmaXggaW4gYSApIHtcbiAgICAgICAgICAgICAgICBidWlsZFBhcmFtcyggcHJlZml4LCBhWyBwcmVmaXggXSwgdHJhZGl0aW9uYWwsIGFkZCApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSByZXN1bHRpbmcgc2VyaWFsaXphdGlvblxuICAgICAgICByZXR1cm4gcy5qb2luKCBcIiZcIiApLnJlcGxhY2UoIHIyMCwgXCIrXCIgKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gYnVpbGRQYXJhbXMoIHByZWZpeCwgb2JqLCB0cmFkaXRpb25hbCwgYWRkICkge1xuICAgICAgICB2YXIgbmFtZTtcblxuICAgICAgICBpZiAoIGpRdWVyeS5pc0FycmF5KCBvYmogKSApIHtcbiAgICAgICAgICAgIC8vIFNlcmlhbGl6ZSBhcnJheSBpdGVtLlxuICAgICAgICAgICAgalF1ZXJ5LmVhY2goIG9iaiwgZnVuY3Rpb24oIGksIHYgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCB0cmFkaXRpb25hbCB8fCByYnJhY2tldC50ZXN0KCBwcmVmaXggKSApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVHJlYXQgZWFjaCBhcnJheSBpdGVtIGFzIGEgc2NhbGFyLlxuICAgICAgICAgICAgICAgICAgICBhZGQoIHByZWZpeCwgdiApO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSXRlbSBpcyBub24tc2NhbGFyIChhcnJheSBvciBvYmplY3QpLCBlbmNvZGUgaXRzIG51bWVyaWMgaW5kZXguXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArICggdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgPyBpIDogXCJcIiApICsgXCJdXCIsIHYsIHRyYWRpdGlvbmFsLCBhZGQgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9IGVsc2UgaWYgKCAhdHJhZGl0aW9uYWwgJiYgalF1ZXJ5LnR5cGUoIG9iaiApID09PSBcIm9iamVjdFwiICkge1xuICAgICAgICAgICAgLy8gU2VyaWFsaXplIG9iamVjdCBpdGVtLlxuICAgICAgICAgICAgZm9yICggbmFtZSBpbiBvYmogKSB7XG4gICAgICAgICAgICAgICAgYnVpbGRQYXJhbXMoIHByZWZpeCArIFwiW1wiICsgbmFtZSArIFwiXVwiLCBvYmpbIG5hbWUgXSwgdHJhZGl0aW9uYWwsIGFkZCApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTZXJpYWxpemUgc2NhbGFyIGl0ZW0uXG4gICAgICAgICAgICBhZGQoIHByZWZpeCwgb2JqICk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgalF1ZXJ5LmVhY2goIChcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIFwiICtcbiAgICBcIm1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIFwiICtcbiAgICBcImNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnVcIikuc3BsaXQoXCIgXCIpLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblxuICAgICAgICAvLyBIYW5kbGUgZXZlbnQgYmluZGluZ1xuICAgICAgICBqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBkYXRhLCBmbiApIHtcbiAgICAgICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMCA/XG4gICAgICAgICAgICAgICAgdGhpcy5vbiggbmFtZSwgbnVsbCwgZGF0YSwgZm4gKSA6XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCBuYW1lICk7XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICBqUXVlcnkuZm4uZXh0ZW5kKHtcbiAgICAgICAgaG92ZXI6IGZ1bmN0aW9uKCBmbk92ZXIsIGZuT3V0ICkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubW91c2VlbnRlciggZm5PdmVyICkubW91c2VsZWF2ZSggZm5PdXQgfHwgZm5PdmVyICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYmluZDogZnVuY3Rpb24oIHR5cGVzLCBkYXRhLCBmbiApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uKCB0eXBlcywgbnVsbCwgZGF0YSwgZm4gKTtcbiAgICAgICAgfSxcbiAgICAgICAgdW5iaW5kOiBmdW5jdGlvbiggdHlwZXMsIGZuICkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub2ZmKCB0eXBlcywgbnVsbCwgZm4gKTtcbiAgICAgICAgfSxcblxuICAgICAgICBkZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZGF0YSwgZm4gKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApO1xuICAgICAgICB9LFxuICAgICAgICB1bmRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBmbiApIHtcbiAgICAgICAgICAgIC8vICggbmFtZXNwYWNlICkgb3IgKCBzZWxlY3RvciwgdHlwZXMgWywgZm5dIClcbiAgICAgICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gdGhpcy5vZmYoIHNlbGVjdG9yLCBcIioqXCIgKSA6IHRoaXMub2ZmKCB0eXBlcywgc2VsZWN0b3IgfHwgXCIqKlwiLCBmbiApO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgdmFyXG4gICAgLy8gRG9jdW1lbnQgbG9jYXRpb25cbiAgICAgICAgYWpheExvY1BhcnRzLFxuICAgICAgICBhamF4TG9jYXRpb24sXG4gICAgICAgIGFqYXhfbm9uY2UgPSBqUXVlcnkubm93KCksXG5cbiAgICAgICAgYWpheF9ycXVlcnkgPSAvXFw/LyxcbiAgICAgICAgcmhhc2ggPSAvIy4qJC8sXG4gICAgICAgIHJ0cyA9IC8oWz8mXSlfPVteJl0qLyxcbiAgICAgICAgcmhlYWRlcnMgPSAvXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKilcXHI/JC9tZywgLy8gSUUgbGVhdmVzIGFuIFxcciBjaGFyYWN0ZXIgYXQgRU9MXG4gICAgLy8gIzc2NTMsICM4MTI1LCAjODE1MjogbG9jYWwgcHJvdG9jb2wgZGV0ZWN0aW9uXG4gICAgICAgIHJsb2NhbFByb3RvY29sID0gL14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sXG4gICAgICAgIHJub0NvbnRlbnQgPSAvXig/OkdFVHxIRUFEKSQvLFxuICAgICAgICBycHJvdG9jb2wgPSAvXlxcL1xcLy8sXG4gICAgICAgIHJ1cmwgPSAvXihbXFx3ListXSs6KSg/OlxcL1xcLyhbXlxcLz8jOl0qKSg/OjooXFxkKyl8KXwpLyxcblxuICAgIC8vIEtlZXAgYSBjb3B5IG9mIHRoZSBvbGQgbG9hZCBtZXRob2RcbiAgICAgICAgX2xvYWQgPSBqUXVlcnkuZm4ubG9hZCxcblxuICAgIC8qIFByZWZpbHRlcnNcbiAgICAgKiAxKSBUaGV5IGFyZSB1c2VmdWwgdG8gaW50cm9kdWNlIGN1c3RvbSBkYXRhVHlwZXMgKHNlZSBhamF4L2pzb25wLmpzIGZvciBhbiBleGFtcGxlKVxuICAgICAqIDIpIFRoZXNlIGFyZSBjYWxsZWQ6XG4gICAgICogICAgLSBCRUZPUkUgYXNraW5nIGZvciBhIHRyYW5zcG9ydFxuICAgICAqICAgIC0gQUZURVIgcGFyYW0gc2VyaWFsaXphdGlvbiAocy5kYXRhIGlzIGEgc3RyaW5nIGlmIHMucHJvY2Vzc0RhdGEgaXMgdHJ1ZSlcbiAgICAgKiAzKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG4gICAgICogNCkgdGhlIGNhdGNoYWxsIHN5bWJvbCBcIipcIiBjYW4gYmUgdXNlZFxuICAgICAqIDUpIGV4ZWN1dGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGNvbnRpbnVlIGRvd24gdG8gXCIqXCIgaWYgbmVlZGVkXG4gICAgICovXG4gICAgICAgIHByZWZpbHRlcnMgPSB7fSxcblxuICAgIC8qIFRyYW5zcG9ydHMgYmluZGluZ3NcbiAgICAgKiAxKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG4gICAgICogMikgdGhlIGNhdGNoYWxsIHN5bWJvbCBcIipcIiBjYW4gYmUgdXNlZFxuICAgICAqIDMpIHNlbGVjdGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGdvIHRvIFwiKlwiIGlmIG5lZWRlZFxuICAgICAqL1xuICAgICAgICB0cmFuc3BvcnRzID0ge30sXG5cbiAgICAvLyBBdm9pZCBjb21tZW50LXByb2xvZyBjaGFyIHNlcXVlbmNlICgjMTAwOTgpOyBtdXN0IGFwcGVhc2UgbGludCBhbmQgZXZhZGUgY29tcHJlc3Npb25cbiAgICAgICAgYWxsVHlwZXMgPSBcIiovXCIuY29uY2F0KFwiKlwiKTtcblxuLy8gIzgxMzgsIElFIG1heSB0aHJvdyBhbiBleGNlcHRpb24gd2hlbiBhY2Nlc3Npbmdcbi8vIGEgZmllbGQgZnJvbSB3aW5kb3cubG9jYXRpb24gaWYgZG9jdW1lbnQuZG9tYWluIGhhcyBiZWVuIHNldFxuICAgIHRyeSB7XG4gICAgICAgIGFqYXhMb2NhdGlvbiA9IGxvY2F0aW9uLmhyZWY7XG4gICAgfSBjYXRjaCggZSApIHtcbiAgICAgICAgLy8gVXNlIHRoZSBocmVmIGF0dHJpYnV0ZSBvZiBhbiBBIGVsZW1lbnRcbiAgICAgICAgLy8gc2luY2UgSUUgd2lsbCBtb2RpZnkgaXQgZ2l2ZW4gZG9jdW1lbnQubG9jYXRpb25cbiAgICAgICAgYWpheExvY2F0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKTtcbiAgICAgICAgYWpheExvY2F0aW9uLmhyZWYgPSBcIlwiO1xuICAgICAgICBhamF4TG9jYXRpb24gPSBhamF4TG9jYXRpb24uaHJlZjtcbiAgICB9XG5cbi8vIFNlZ21lbnQgbG9jYXRpb24gaW50byBwYXJ0c1xuICAgIGFqYXhMb2NQYXJ0cyA9IHJ1cmwuZXhlYyggYWpheExvY2F0aW9uLnRvTG93ZXJDYXNlKCkgKSB8fCBbXTtcblxuLy8gQmFzZSBcImNvbnN0cnVjdG9yXCIgZm9yIGpRdWVyeS5hamF4UHJlZmlsdGVyIGFuZCBqUXVlcnkuYWpheFRyYW5zcG9ydFxuICAgIGZ1bmN0aW9uIGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlICkge1xuXG4gICAgICAgIC8vIGRhdGFUeXBlRXhwcmVzc2lvbiBpcyBvcHRpb25hbCBhbmQgZGVmYXVsdHMgdG8gXCIqXCJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCBkYXRhVHlwZUV4cHJlc3Npb24sIGZ1bmMgKSB7XG5cbiAgICAgICAgICAgIGlmICggdHlwZW9mIGRhdGFUeXBlRXhwcmVzc2lvbiAhPT0gXCJzdHJpbmdcIiApIHtcbiAgICAgICAgICAgICAgICBmdW5jID0gZGF0YVR5cGVFeHByZXNzaW9uO1xuICAgICAgICAgICAgICAgIGRhdGFUeXBlRXhwcmVzc2lvbiA9IFwiKlwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZGF0YVR5cGUsXG4gICAgICAgICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGVzID0gZGF0YVR5cGVFeHByZXNzaW9uLnRvTG93ZXJDYXNlKCkubWF0Y2goIGNvcmVfcm5vdHdoaXRlICkgfHwgW107XG5cbiAgICAgICAgICAgIGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGZ1bmMgKSApIHtcbiAgICAgICAgICAgICAgICAvLyBGb3IgZWFjaCBkYXRhVHlwZSBpbiB0aGUgZGF0YVR5cGVFeHByZXNzaW9uXG4gICAgICAgICAgICAgICAgd2hpbGUgKCAoZGF0YVR5cGUgPSBkYXRhVHlwZXNbaSsrXSkgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFByZXBlbmQgaWYgcmVxdWVzdGVkXG4gICAgICAgICAgICAgICAgICAgIGlmICggZGF0YVR5cGVbMF0gPT09IFwiK1wiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGUgPSBkYXRhVHlwZS5zbGljZSggMSApIHx8IFwiKlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgKHN0cnVjdHVyZVsgZGF0YVR5cGUgXSA9IHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSkudW5zaGlmdCggZnVuYyApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UgYXBwZW5kXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAoc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdKS5wdXNoKCBmdW5jICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4vLyBCYXNlIGluc3BlY3Rpb24gZnVuY3Rpb24gZm9yIHByZWZpbHRlcnMgYW5kIHRyYW5zcG9ydHNcbiAgICBmdW5jdGlvbiBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlLCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICkge1xuXG4gICAgICAgIHZhciBpbnNwZWN0ZWQgPSB7fSxcbiAgICAgICAgICAgIHNlZWtpbmdUcmFuc3BvcnQgPSAoIHN0cnVjdHVyZSA9PT0gdHJhbnNwb3J0cyApO1xuXG4gICAgICAgIGZ1bmN0aW9uIGluc3BlY3QoIGRhdGFUeXBlICkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkO1xuICAgICAgICAgICAgaW5zcGVjdGVkWyBkYXRhVHlwZSBdID0gdHJ1ZTtcbiAgICAgICAgICAgIGpRdWVyeS5lYWNoKCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10sIGZ1bmN0aW9uKCBfLCBwcmVmaWx0ZXJPckZhY3RvcnkgKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFUeXBlT3JUcmFuc3BvcnQgPSBwcmVmaWx0ZXJPckZhY3RvcnkoIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKTtcbiAgICAgICAgICAgICAgICBpZiggdHlwZW9mIGRhdGFUeXBlT3JUcmFuc3BvcnQgPT09IFwic3RyaW5nXCIgJiYgIXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRhdGFUeXBlcy51bnNoaWZ0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG4gICAgICAgICAgICAgICAgICAgIGluc3BlY3QoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHNlZWtpbmdUcmFuc3BvcnQgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhKCBzZWxlY3RlZCA9IGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbnNwZWN0KCBvcHRpb25zLmRhdGFUeXBlc1sgMCBdICkgfHwgIWluc3BlY3RlZFsgXCIqXCIgXSAmJiBpbnNwZWN0KCBcIipcIiApO1xuICAgIH1cblxuLy8gQSBzcGVjaWFsIGV4dGVuZCBmb3IgYWpheCBvcHRpb25zXG4vLyB0aGF0IHRha2VzIFwiZmxhdFwiIG9wdGlvbnMgKG5vdCB0byBiZSBkZWVwIGV4dGVuZGVkKVxuLy8gRml4ZXMgIzk4ODdcbiAgICBmdW5jdGlvbiBhamF4RXh0ZW5kKCB0YXJnZXQsIHNyYyApIHtcbiAgICAgICAgdmFyIGRlZXAsIGtleSxcbiAgICAgICAgICAgIGZsYXRPcHRpb25zID0galF1ZXJ5LmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBmb3IgKCBrZXkgaW4gc3JjICkge1xuICAgICAgICAgICAgaWYgKCBzcmNbIGtleSBdICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICAgICAgKCBmbGF0T3B0aW9uc1sga2V5IF0gPyB0YXJnZXQgOiAoIGRlZXAgfHwgKGRlZXAgPSB7fSkgKSApWyBrZXkgXSA9IHNyY1sga2V5IF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCBkZWVwICkge1xuICAgICAgICAgICAgalF1ZXJ5LmV4dGVuZCggdHJ1ZSwgdGFyZ2V0LCBkZWVwICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cblxuICAgIGpRdWVyeS5mbi5sb2FkID0gZnVuY3Rpb24oIHVybCwgcGFyYW1zLCBjYWxsYmFjayApIHtcbiAgICAgICAgaWYgKCB0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiICYmIF9sb2FkICkge1xuICAgICAgICAgICAgcmV0dXJuIF9sb2FkLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZWxlY3RvciwgcmVzcG9uc2UsIHR5cGUsXG4gICAgICAgICAgICBzZWxmID0gdGhpcyxcbiAgICAgICAgICAgIG9mZiA9IHVybC5pbmRleE9mKFwiIFwiKTtcblxuICAgICAgICBpZiAoIG9mZiA+PSAwICkge1xuICAgICAgICAgICAgc2VsZWN0b3IgPSB1cmwuc2xpY2UoIG9mZiwgdXJsLmxlbmd0aCApO1xuICAgICAgICAgICAgdXJsID0gdXJsLnNsaWNlKCAwLCBvZmYgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGl0J3MgYSBmdW5jdGlvblxuICAgICAgICBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBwYXJhbXMgKSApIHtcblxuICAgICAgICAgICAgLy8gV2UgYXNzdW1lIHRoYXQgaXQncyB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgIGNhbGxiYWNrID0gcGFyYW1zO1xuICAgICAgICAgICAgcGFyYW1zID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UsIGJ1aWxkIGEgcGFyYW0gc3RyaW5nXG4gICAgICAgIH0gZWxzZSBpZiAoIHBhcmFtcyAmJiB0eXBlb2YgcGFyYW1zID09PSBcIm9iamVjdFwiICkge1xuICAgICAgICAgICAgdHlwZSA9IFwiUE9TVFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBlbGVtZW50cyB0byBtb2RpZnksIG1ha2UgdGhlIHJlcXVlc3RcbiAgICAgICAgaWYgKCBzZWxmLmxlbmd0aCA+IDAgKSB7XG4gICAgICAgICAgICBqUXVlcnkuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG5cbiAgICAgICAgICAgICAgICAvLyBpZiBcInR5cGVcIiB2YXJpYWJsZSBpcyB1bmRlZmluZWQsIHRoZW4gXCJHRVRcIiBtZXRob2Qgd2lsbCBiZSB1c2VkXG4gICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJodG1sXCIsXG4gICAgICAgICAgICAgICAgZGF0YTogcGFyYW1zXG4gICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uKCByZXNwb25zZVRleHQgKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBTYXZlIHJlc3BvbnNlIGZvciB1c2UgaW4gY29tcGxldGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGFyZ3VtZW50cztcblxuICAgICAgICAgICAgICAgIHNlbGYuaHRtbCggc2VsZWN0b3IgP1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGEgc2VsZWN0b3Igd2FzIHNwZWNpZmllZCwgbG9jYXRlIHRoZSByaWdodCBlbGVtZW50cyBpbiBhIGR1bW15IGRpdlxuICAgICAgICAgICAgICAgICAgICAvLyBFeGNsdWRlIHNjcmlwdHMgdG8gYXZvaWQgSUUgJ1Blcm1pc3Npb24gRGVuaWVkJyBlcnJvcnNcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KFwiPGRpdj5cIikuYXBwZW5kKCBqUXVlcnkucGFyc2VIVE1MKCByZXNwb25zZVRleHQgKSApLmZpbmQoIHNlbGVjdG9yICkgOlxuXG4gICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSB1c2UgdGhlIGZ1bGwgcmVzdWx0XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlVGV4dCApO1xuXG4gICAgICAgICAgICB9KS5jb21wbGV0ZSggY2FsbGJhY2sgJiYgZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMgKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZWFjaCggY2FsbGJhY2ssIHJlc3BvbnNlIHx8IFsganFYSFIucmVzcG9uc2VUZXh0LCBzdGF0dXMsIGpxWEhSIF0gKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbi8vIEF0dGFjaCBhIGJ1bmNoIG9mIGZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgY29tbW9uIEFKQVggZXZlbnRzXG4gICAgalF1ZXJ5LmVhY2goIFsgXCJhamF4U3RhcnRcIiwgXCJhamF4U3RvcFwiLCBcImFqYXhDb21wbGV0ZVwiLCBcImFqYXhFcnJvclwiLCBcImFqYXhTdWNjZXNzXCIsIFwiYWpheFNlbmRcIiBdLCBmdW5jdGlvbiggaSwgdHlwZSApe1xuICAgICAgICBqUXVlcnkuZm5bIHR5cGUgXSA9IGZ1bmN0aW9uKCBmbiApe1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub24oIHR5cGUsIGZuICk7XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICBqUXVlcnkuZXh0ZW5kKHtcblxuICAgICAgICAvLyBDb3VudGVyIGZvciBob2xkaW5nIHRoZSBudW1iZXIgb2YgYWN0aXZlIHF1ZXJpZXNcbiAgICAgICAgYWN0aXZlOiAwLFxuXG4gICAgICAgIC8vIExhc3QtTW9kaWZpZWQgaGVhZGVyIGNhY2hlIGZvciBuZXh0IHJlcXVlc3RcbiAgICAgICAgbGFzdE1vZGlmaWVkOiB7fSxcbiAgICAgICAgZXRhZzoge30sXG5cbiAgICAgICAgYWpheFNldHRpbmdzOiB7XG4gICAgICAgICAgICB1cmw6IGFqYXhMb2NhdGlvbixcbiAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgICAgICAgICBpc0xvY2FsOiBybG9jYWxQcm90b2NvbC50ZXN0KCBhamF4TG9jUGFydHNbIDEgXSApLFxuICAgICAgICAgICAgZ2xvYmFsOiB0cnVlLFxuICAgICAgICAgICAgcHJvY2Vzc0RhdGE6IHRydWUsXG4gICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgIGNvbnRlbnRUeXBlOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiLFxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICB0aW1lb3V0OiAwLFxuICAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICAgZGF0YVR5cGU6IG51bGwsXG4gICAgICAgICAgICAgdXNlcm5hbWU6IG51bGwsXG4gICAgICAgICAgICAgcGFzc3dvcmQ6IG51bGwsXG4gICAgICAgICAgICAgY2FjaGU6IG51bGwsXG4gICAgICAgICAgICAgdGhyb3dzOiBmYWxzZSxcbiAgICAgICAgICAgICB0cmFkaXRpb25hbDogZmFsc2UsXG4gICAgICAgICAgICAgaGVhZGVyczoge30sXG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgYWNjZXB0czoge1xuICAgICAgICAgICAgICAgIFwiKlwiOiBhbGxUeXBlcyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBcInRleHQvcGxhaW5cIixcbiAgICAgICAgICAgICAgICBodG1sOiBcInRleHQvaHRtbFwiLFxuICAgICAgICAgICAgICAgIHhtbDogXCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsXG4gICAgICAgICAgICAgICAganNvbjogXCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIlxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgY29udGVudHM6IHtcbiAgICAgICAgICAgICAgICB4bWw6IC94bWwvLFxuICAgICAgICAgICAgICAgIGh0bWw6IC9odG1sLyxcbiAgICAgICAgICAgICAgICBqc29uOiAvanNvbi9cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHJlc3BvbnNlRmllbGRzOiB7XG4gICAgICAgICAgICAgICAgeG1sOiBcInJlc3BvbnNlWE1MXCIsXG4gICAgICAgICAgICAgICAgdGV4dDogXCJyZXNwb25zZVRleHRcIixcbiAgICAgICAgICAgICAgICBqc29uOiBcInJlc3BvbnNlSlNPTlwiXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvLyBEYXRhIGNvbnZlcnRlcnNcbiAgICAgICAgICAgIC8vIEtleXMgc2VwYXJhdGUgc291cmNlIChvciBjYXRjaGFsbCBcIipcIikgYW5kIGRlc3RpbmF0aW9uIHR5cGVzIHdpdGggYSBzaW5nbGUgc3BhY2VcbiAgICAgICAgICAgIGNvbnZlcnRlcnM6IHtcblxuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgYW55dGhpbmcgdG8gdGV4dFxuICAgICAgICAgICAgICAgIFwiKiB0ZXh0XCI6IFN0cmluZyxcblxuICAgICAgICAgICAgICAgIC8vIFRleHQgdG8gaHRtbCAodHJ1ZSA9IG5vIHRyYW5zZm9ybWF0aW9uKVxuICAgICAgICAgICAgICAgIFwidGV4dCBodG1sXCI6IHRydWUsXG5cbiAgICAgICAgICAgICAgICAvLyBFdmFsdWF0ZSB0ZXh0IGFzIGEganNvbiBleHByZXNzaW9uXG4gICAgICAgICAgICAgICAgXCJ0ZXh0IGpzb25cIjogalF1ZXJ5LnBhcnNlSlNPTixcblxuICAgICAgICAgICAgICAgIC8vIFBhcnNlIHRleHQgYXMgeG1sXG4gICAgICAgICAgICAgICAgXCJ0ZXh0IHhtbFwiOiBqUXVlcnkucGFyc2VYTUxcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8vIEZvciBvcHRpb25zIHRoYXQgc2hvdWxkbid0IGJlIGRlZXAgZXh0ZW5kZWQ6XG4gICAgICAgICAgICAvLyB5b3UgY2FuIGFkZCB5b3VyIG93biBjdXN0b20gb3B0aW9ucyBoZXJlIGlmXG4gICAgICAgICAgICAvLyBhbmQgd2hlbiB5b3UgY3JlYXRlIG9uZSB0aGF0IHNob3VsZG4ndCBiZVxuICAgICAgICAgICAgLy8gZGVlcCBleHRlbmRlZCAoc2VlIGFqYXhFeHRlbmQpXG4gICAgICAgICAgICBmbGF0T3B0aW9uczoge1xuICAgICAgICAgICAgICAgIHVybDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gQ3JlYXRlcyBhIGZ1bGwgZmxlZGdlZCBzZXR0aW5ncyBvYmplY3QgaW50byB0YXJnZXRcbiAgICAgICAgLy8gd2l0aCBib3RoIGFqYXhTZXR0aW5ncyBhbmQgc2V0dGluZ3MgZmllbGRzLlxuICAgICAgICAvLyBJZiB0YXJnZXQgaXMgb21pdHRlZCwgd3JpdGVzIGludG8gYWpheFNldHRpbmdzLlxuICAgICAgICBhamF4U2V0dXA6IGZ1bmN0aW9uKCB0YXJnZXQsIHNldHRpbmdzICkge1xuICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzID9cblxuICAgICAgICAgICAgICAgIC8vIEJ1aWxkaW5nIGEgc2V0dGluZ3Mgb2JqZWN0XG4gICAgICAgICAgICAgICAgYWpheEV4dGVuZCggYWpheEV4dGVuZCggdGFyZ2V0LCBqUXVlcnkuYWpheFNldHRpbmdzICksIHNldHRpbmdzICkgOlxuXG4gICAgICAgICAgICAgICAgLy8gRXh0ZW5kaW5nIGFqYXhTZXR0aW5nc1xuICAgICAgICAgICAgICAgIGFqYXhFeHRlbmQoIGpRdWVyeS5hamF4U2V0dGluZ3MsIHRhcmdldCApO1xuICAgICAgICB9LFxuXG4gICAgICAgIGFqYXhQcmVmaWx0ZXI6IGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycyApLFxuICAgICAgICBhamF4VHJhbnNwb3J0OiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMgKSxcblxuICAgICAgICAvLyBNYWluIG1ldGhvZFxuICAgICAgICBhamF4OiBmdW5jdGlvbiggdXJsLCBvcHRpb25zICkge1xuXG4gICAgICAgICAgICAvLyBJZiB1cmwgaXMgYW4gb2JqZWN0LCBzaW11bGF0ZSBwcmUtMS41IHNpZ25hdHVyZVxuICAgICAgICAgICAgaWYgKCB0eXBlb2YgdXJsID09PSBcIm9iamVjdFwiICkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB1cmw7XG4gICAgICAgICAgICAgICAgdXJsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBGb3JjZSBvcHRpb25zIHRvIGJlIGFuIG9iamVjdFxuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgICAgIHZhciAvLyBDcm9zcy1kb21haW4gZGV0ZWN0aW9uIHZhcnNcbiAgICAgICAgICAgICAgICBwYXJ0cyxcbiAgICAgICAgICAgIC8vIExvb3AgdmFyaWFibGVcbiAgICAgICAgICAgICAgICBpLFxuICAgICAgICAgICAgLy8gVVJMIHdpdGhvdXQgYW50aS1jYWNoZSBwYXJhbVxuICAgICAgICAgICAgICAgIGNhY2hlVVJMLFxuICAgICAgICAgICAgLy8gUmVzcG9uc2UgaGVhZGVycyBhcyBzdHJpbmdcbiAgICAgICAgICAgICAgICByZXNwb25zZUhlYWRlcnNTdHJpbmcsXG4gICAgICAgICAgICAvLyB0aW1lb3V0IGhhbmRsZVxuICAgICAgICAgICAgICAgIHRpbWVvdXRUaW1lcixcblxuICAgICAgICAgICAgLy8gVG8ga25vdyBpZiBnbG9iYWwgZXZlbnRzIGFyZSB0byBiZSBkaXNwYXRjaGVkXG4gICAgICAgICAgICAgICAgZmlyZUdsb2JhbHMsXG5cbiAgICAgICAgICAgICAgICB0cmFuc3BvcnQsXG4gICAgICAgICAgICAvLyBSZXNwb25zZSBoZWFkZXJzXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBmaW5hbCBvcHRpb25zIG9iamVjdFxuICAgICAgICAgICAgICAgIHMgPSBqUXVlcnkuYWpheFNldHVwKCB7fSwgb3B0aW9ucyApLFxuICAgICAgICAgICAgLy8gQ2FsbGJhY2tzIGNvbnRleHRcbiAgICAgICAgICAgICAgICBjYWxsYmFja0NvbnRleHQgPSBzLmNvbnRleHQgfHwgcyxcbiAgICAgICAgICAgIC8vIENvbnRleHQgZm9yIGdsb2JhbCBldmVudHMgaXMgY2FsbGJhY2tDb250ZXh0IGlmIGl0IGlzIGEgRE9NIG5vZGUgb3IgalF1ZXJ5IGNvbGxlY3Rpb25cbiAgICAgICAgICAgICAgICBnbG9iYWxFdmVudENvbnRleHQgPSBzLmNvbnRleHQgJiYgKCBjYWxsYmFja0NvbnRleHQubm9kZVR5cGUgfHwgY2FsbGJhY2tDb250ZXh0LmpxdWVyeSApID9cbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCBjYWxsYmFja0NvbnRleHQgKSA6XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS5ldmVudCxcbiAgICAgICAgICAgIC8vIERlZmVycmVkc1xuICAgICAgICAgICAgICAgIGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCksXG4gICAgICAgICAgICAgICAgY29tcGxldGVEZWZlcnJlZCA9IGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcbiAgICAgICAgICAgIC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG4gICAgICAgICAgICAgICAgc3RhdHVzQ29kZSA9IHMuc3RhdHVzQ29kZSB8fCB7fSxcbiAgICAgICAgICAgIC8vIEhlYWRlcnMgKHRoZXkgYXJlIHNlbnQgYWxsIGF0IG9uY2UpXG4gICAgICAgICAgICAgICAgcmVxdWVzdEhlYWRlcnMgPSB7fSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0SGVhZGVyc05hbWVzID0ge30sXG4gICAgICAgICAgICAvLyBUaGUganFYSFIgc3RhdGVcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IDAsXG4gICAgICAgICAgICAvLyBEZWZhdWx0IGFib3J0IG1lc3NhZ2VcbiAgICAgICAgICAgICAgICBzdHJBYm9ydCA9IFwiY2FuY2VsZWRcIixcbiAgICAgICAgICAgIC8vIEZha2UgeGhyXG4gICAgICAgICAgICAgICAganFYSFIgPSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWR5U3RhdGU6IDAsXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQnVpbGRzIGhlYWRlcnMgaGFzaHRhYmxlIGlmIG5lZWRlZFxuICAgICAgICAgICAgICAgICAgICBnZXRSZXNwb25zZUhlYWRlcjogZnVuY3Rpb24oIGtleSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc3RhdGUgPT09IDIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhcmVzcG9uc2VIZWFkZXJzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUhlYWRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCAobWF0Y2ggPSByaGVhZGVycy5leGVjKCByZXNwb25zZUhlYWRlcnNTdHJpbmcgKSkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUhlYWRlcnNbIG1hdGNoWzFdLnRvTG93ZXJDYXNlKCkgXSA9IG1hdGNoWyAyIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSByZXNwb25zZUhlYWRlcnNbIGtleS50b0xvd2VyQ2FzZSgpIF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2ggPT0gbnVsbCA/IG51bGwgOiBtYXRjaDtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvLyBSYXcgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgIGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGUgPT09IDIgPyByZXNwb25zZUhlYWRlcnNTdHJpbmcgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIENhY2hlcyB0aGUgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgIHNldFJlcXVlc3RIZWFkZXI6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIXN0YXRlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBsbmFtZSBdID0gcmVxdWVzdEhlYWRlcnNOYW1lc1sgbG5hbWUgXSB8fCBuYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RIZWFkZXJzWyBuYW1lIF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIE92ZXJyaWRlcyByZXNwb25zZSBjb250ZW50LXR5cGUgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKCB0eXBlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhc3RhdGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5taW1lVHlwZSA9IHR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiBmdW5jdGlvbiggbWFwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG1hcCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHN0YXRlIDwgMiApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggY29kZSBpbiBtYXAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMYXp5LWFkZCB0aGUgbmV3IGNhbGxiYWNrIGluIGEgd2F5IHRoYXQgcHJlc2VydmVzIG9sZCBvbmVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNDb2RlWyBjb2RlIF0gPSBbIHN0YXR1c0NvZGVbIGNvZGUgXSwgbWFwWyBjb2RlIF0gXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4ZWN1dGUgdGhlIGFwcHJvcHJpYXRlIGNhbGxiYWNrc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqcVhIUi5hbHdheXMoIG1hcFsganFYSFIuc3RhdHVzIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICAvLyBDYW5jZWwgdGhlIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgYWJvcnQ6IGZ1bmN0aW9uKCBzdGF0dXNUZXh0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbmFsVGV4dCA9IHN0YXR1c1RleHQgfHwgc3RyQWJvcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRyYW5zcG9ydCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BvcnQuYWJvcnQoIGZpbmFsVGV4dCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSggMCwgZmluYWxUZXh0ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIEF0dGFjaCBkZWZlcnJlZHNcbiAgICAgICAgICAgIGRlZmVycmVkLnByb21pc2UoIGpxWEhSICkuY29tcGxldGUgPSBjb21wbGV0ZURlZmVycmVkLmFkZDtcbiAgICAgICAgICAgIGpxWEhSLnN1Y2Nlc3MgPSBqcVhIUi5kb25lO1xuICAgICAgICAgICAganFYSFIuZXJyb3IgPSBqcVhIUi5mYWlsO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgaGFzaCBjaGFyYWN0ZXIgKCM3NTMxOiBhbmQgc3RyaW5nIHByb21vdGlvbilcbiAgICAgICAgICAgIC8vIEFkZCBwcm90b2NvbCBpZiBub3QgcHJvdmlkZWQgKCM1ODY2OiBJRTcgaXNzdWUgd2l0aCBwcm90b2NvbC1sZXNzIHVybHMpXG4gICAgICAgICAgICAvLyBIYW5kbGUgZmFsc3kgdXJsIGluIHRoZSBzZXR0aW5ncyBvYmplY3QgKCMxMDA5MzogY29uc2lzdGVuY3kgd2l0aCBvbGQgc2lnbmF0dXJlKVxuICAgICAgICAgICAgLy8gV2UgYWxzbyB1c2UgdGhlIHVybCBwYXJhbWV0ZXIgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICBzLnVybCA9ICggKCB1cmwgfHwgcy51cmwgfHwgYWpheExvY2F0aW9uICkgKyBcIlwiICkucmVwbGFjZSggcmhhc2gsIFwiXCIgKS5yZXBsYWNlKCBycHJvdG9jb2wsIGFqYXhMb2NQYXJ0c1sgMSBdICsgXCIvL1wiICk7XG5cbiAgICAgICAgICAgIC8vIEFsaWFzIG1ldGhvZCBvcHRpb24gdG8gdHlwZSBhcyBwZXIgdGlja2V0ICMxMjAwNFxuICAgICAgICAgICAgcy50eXBlID0gb3B0aW9ucy5tZXRob2QgfHwgb3B0aW9ucy50eXBlIHx8IHMubWV0aG9kIHx8IHMudHlwZTtcblxuICAgICAgICAgICAgLy8gRXh0cmFjdCBkYXRhVHlwZXMgbGlzdFxuICAgICAgICAgICAgcy5kYXRhVHlwZXMgPSBqUXVlcnkudHJpbSggcy5kYXRhVHlwZSB8fCBcIipcIiApLnRvTG93ZXJDYXNlKCkubWF0Y2goIGNvcmVfcm5vdHdoaXRlICkgfHwgW1wiXCJdO1xuXG4gICAgICAgICAgICAvLyBBIGNyb3NzLWRvbWFpbiByZXF1ZXN0IGlzIGluIG9yZGVyIHdoZW4gd2UgaGF2ZSBhIHByb3RvY29sOmhvc3Q6cG9ydCBtaXNtYXRjaFxuICAgICAgICAgICAgaWYgKCBzLmNyb3NzRG9tYWluID09IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgcGFydHMgPSBydXJsLmV4ZWMoIHMudXJsLnRvTG93ZXJDYXNlKCkgKTtcbiAgICAgICAgICAgICAgICBzLmNyb3NzRG9tYWluID0gISEoIHBhcnRzICYmXG4gICAgICAgICAgICAgICAgICAgICggcGFydHNbIDEgXSAhPT0gYWpheExvY1BhcnRzWyAxIF0gfHwgcGFydHNbIDIgXSAhPT0gYWpheExvY1BhcnRzWyAyIF0gfHxcbiAgICAgICAgICAgICAgICAgICAgKCBwYXJ0c1sgMyBdIHx8ICggcGFydHNbIDEgXSA9PT0gXCJodHRwOlwiID8gXCI4MFwiIDogXCI0NDNcIiApICkgIT09XG4gICAgICAgICAgICAgICAgICAgICggYWpheExvY1BhcnRzWyAzIF0gfHwgKCBhamF4TG9jUGFydHNbIDEgXSA9PT0gXCJodHRwOlwiID8gXCI4MFwiIDogXCI0NDNcIiApICkgKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENvbnZlcnQgZGF0YSBpZiBub3QgYWxyZWFkeSBhIHN0cmluZ1xuICAgICAgICAgICAgaWYgKCBzLmRhdGEgJiYgcy5wcm9jZXNzRGF0YSAmJiB0eXBlb2Ygcy5kYXRhICE9PSBcInN0cmluZ1wiICkge1xuICAgICAgICAgICAgICAgIHMuZGF0YSA9IGpRdWVyeS5wYXJhbSggcy5kYXRhLCBzLnRyYWRpdGlvbmFsICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFwcGx5IHByZWZpbHRlcnNcbiAgICAgICAgICAgIGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG4gICAgICAgICAgICAvLyBJZiByZXF1ZXN0IHdhcyBhYm9ydGVkIGluc2lkZSBhIHByZWZpbHRlciwgc3RvcCB0aGVyZVxuICAgICAgICAgICAgaWYgKCBzdGF0ZSA9PT0gMiApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ganFYSFI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFdlIGNhbiBmaXJlIGdsb2JhbCBldmVudHMgYXMgb2Ygbm93IGlmIGFza2VkIHRvXG4gICAgICAgICAgICBmaXJlR2xvYmFscyA9IHMuZ2xvYmFsO1xuXG4gICAgICAgICAgICAvLyBXYXRjaCBmb3IgYSBuZXcgc2V0IG9mIHJlcXVlc3RzXG4gICAgICAgICAgICBpZiAoIGZpcmVHbG9iYWxzICYmIGpRdWVyeS5hY3RpdmUrKyA9PT0gMCApIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkuZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gVXBwZXJjYXNlIHRoZSB0eXBlXG4gICAgICAgICAgICBzLnR5cGUgPSBzLnR5cGUudG9VcHBlckNhc2UoKTtcblxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGlmIHJlcXVlc3QgaGFzIGNvbnRlbnRcbiAgICAgICAgICAgIHMuaGFzQ29udGVudCA9ICFybm9Db250ZW50LnRlc3QoIHMudHlwZSApO1xuXG4gICAgICAgICAgICAvLyBTYXZlIHRoZSBVUkwgaW4gY2FzZSB3ZSdyZSB0b3lpbmcgd2l0aCB0aGUgSWYtTW9kaWZpZWQtU2luY2VcbiAgICAgICAgICAgIC8vIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciBsYXRlciBvblxuICAgICAgICAgICAgY2FjaGVVUkwgPSBzLnVybDtcblxuICAgICAgICAgICAgLy8gTW9yZSBvcHRpb25zIGhhbmRsaW5nIGZvciByZXF1ZXN0cyB3aXRoIG5vIGNvbnRlbnRcbiAgICAgICAgICAgIGlmICggIXMuaGFzQ29udGVudCApIHtcblxuICAgICAgICAgICAgICAgIC8vIElmIGRhdGEgaXMgYXZhaWxhYmxlLCBhcHBlbmQgZGF0YSB0byB1cmxcbiAgICAgICAgICAgICAgICBpZiAoIHMuZGF0YSApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGVVUkwgPSAoIHMudXJsICs9ICggYWpheF9ycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuZGF0YSApO1xuICAgICAgICAgICAgICAgICAgICAvLyAjOTY4MjogcmVtb3ZlIGRhdGEgc28gdGhhdCBpdCdzIG5vdCB1c2VkIGluIGFuIGV2ZW50dWFsIHJldHJ5XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzLmRhdGE7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQWRkIGFudGktY2FjaGUgaW4gdXJsIGlmIG5lZWRlZFxuICAgICAgICAgICAgICAgIGlmICggcy5jYWNoZSA9PT0gZmFsc2UgKSB7XG4gICAgICAgICAgICAgICAgICAgIHMudXJsID0gcnRzLnRlc3QoIGNhY2hlVVJMICkgP1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbHJlYWR5IGEgJ18nIHBhcmFtZXRlciwgc2V0IGl0cyB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVVUkwucmVwbGFjZSggcnRzLCBcIiQxXz1cIiArIGFqYXhfbm9uY2UrKyApIDpcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGFkZCBvbmUgdG8gdGhlIGVuZFxuICAgICAgICAgICAgICAgICAgICBjYWNoZVVSTCArICggYWpheF9ycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIFwiXz1cIiArIGFqYXhfbm9uY2UrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG4gICAgICAgICAgICBpZiAoIHMuaWZNb2RpZmllZCApIHtcbiAgICAgICAgICAgICAgICBpZiAoIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKSB7XG4gICAgICAgICAgICAgICAgICAgIGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTW9kaWZpZWQtU2luY2VcIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICkge1xuICAgICAgICAgICAgICAgICAgICBqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIklmLU5vbmUtTWF0Y2hcIiwgalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNldCB0aGUgY29ycmVjdCBoZWFkZXIsIGlmIGRhdGEgaXMgYmVpbmcgc2VudFxuICAgICAgICAgICAgaWYgKCBzLmRhdGEgJiYgcy5oYXNDb250ZW50ICYmIHMuY29udGVudFR5cGUgIT09IGZhbHNlIHx8IG9wdGlvbnMuY29udGVudFR5cGUgKSB7XG4gICAgICAgICAgICAgICAganFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJDb250ZW50LVR5cGVcIiwgcy5jb250ZW50VHlwZSApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZXQgdGhlIEFjY2VwdHMgaGVhZGVyIGZvciB0aGUgc2VydmVyLCBkZXBlbmRpbmcgb24gdGhlIGRhdGFUeXBlXG4gICAgICAgICAgICBqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKFxuICAgICAgICAgICAgICAgIFwiQWNjZXB0XCIsXG4gICAgICAgICAgICAgICAgcy5kYXRhVHlwZXNbIDAgXSAmJiBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWzBdIF0gP1xuICAgICAgICAgICAgICAgIHMuYWNjZXB0c1sgcy5kYXRhVHlwZXNbMF0gXSArICggcy5kYXRhVHlwZXNbIDAgXSAhPT0gXCIqXCIgPyBcIiwgXCIgKyBhbGxUeXBlcyArIFwiOyBxPTAuMDFcIiA6IFwiXCIgKSA6XG4gICAgICAgICAgICAgICAgICAgIHMuYWNjZXB0c1sgXCIqXCIgXVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIGhlYWRlcnMgb3B0aW9uXG4gICAgICAgICAgICBmb3IgKCBpIGluIHMuaGVhZGVycyApIHtcbiAgICAgICAgICAgICAgICBqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBzLmhlYWRlcnNbIGkgXSApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBbGxvdyBjdXN0b20gaGVhZGVycy9taW1ldHlwZXMgYW5kIGVhcmx5IGFib3J0XG4gICAgICAgICAgICBpZiAoIHMuYmVmb3JlU2VuZCAmJiAoIHMuYmVmb3JlU2VuZC5jYWxsKCBjYWxsYmFja0NvbnRleHQsIGpxWEhSLCBzICkgPT09IGZhbHNlIHx8IHN0YXRlID09PSAyICkgKSB7XG4gICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgbm90IGRvbmUgYWxyZWFkeSBhbmQgcmV0dXJuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGpxWEhSLmFib3J0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGFib3J0aW5nIGlzIG5vIGxvbmdlciBhIGNhbmNlbGxhdGlvblxuICAgICAgICAgICAgc3RyQWJvcnQgPSBcImFib3J0XCI7XG5cbiAgICAgICAgICAgIC8vIEluc3RhbGwgY2FsbGJhY2tzIG9uIGRlZmVycmVkc1xuICAgICAgICAgICAgZm9yICggaSBpbiB7IHN1Y2Nlc3M6IDEsIGVycm9yOiAxLCBjb21wbGV0ZTogMSB9ICkge1xuICAgICAgICAgICAgICAgIGpxWEhSWyBpIF0oIHNbIGkgXSApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHZXQgdHJhbnNwb3J0XG4gICAgICAgICAgICB0cmFuc3BvcnQgPSBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggdHJhbnNwb3J0cywgcywgb3B0aW9ucywganFYSFIgKTtcblxuICAgICAgICAgICAgLy8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0XG4gICAgICAgICAgICBpZiAoICF0cmFuc3BvcnQgKSB7XG4gICAgICAgICAgICAgICAgZG9uZSggLTEsIFwiTm8gVHJhbnNwb3J0XCIgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAganFYSFIucmVhZHlTdGF0ZSA9IDE7XG5cbiAgICAgICAgICAgICAgICAvLyBTZW5kIGdsb2JhbCBldmVudFxuICAgICAgICAgICAgICAgIGlmICggZmlyZUdsb2JhbHMgKSB7XG4gICAgICAgICAgICAgICAgICAgIGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBcImFqYXhTZW5kXCIsIFsganFYSFIsIHMgXSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUaW1lb3V0XG4gICAgICAgICAgICAgICAgaWYgKCBzLmFzeW5jICYmIHMudGltZW91dCA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXRUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqcVhIUi5hYm9ydChcInRpbWVvdXRcIik7XG4gICAgICAgICAgICAgICAgICAgIH0sIHMudGltZW91dCApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNwb3J0LnNlbmQoIHJlcXVlc3RIZWFkZXJzLCBkb25lICk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoIGUgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFByb3BhZ2F0ZSBleGNlcHRpb24gYXMgZXJyb3IgaWYgbm90IGRvbmVcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzdGF0ZSA8IDIgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lKCAtMSwgZSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2ltcGx5IHJldGhyb3cgb3RoZXJ3aXNlXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDYWxsYmFjayBmb3Igd2hlbiBldmVyeXRoaW5nIGlzIGRvbmVcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRvbmUoIHN0YXR1cywgbmF0aXZlU3RhdHVzVGV4dCwgcmVzcG9uc2VzLCBoZWFkZXJzICkge1xuICAgICAgICAgICAgICAgIHZhciBpc1N1Y2Nlc3MsIHN1Y2Nlc3MsIGVycm9yLCByZXNwb25zZSwgbW9kaWZpZWQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQgPSBuYXRpdmVTdGF0dXNUZXh0O1xuXG4gICAgICAgICAgICAgICAgLy8gQ2FsbGVkIG9uY2VcbiAgICAgICAgICAgICAgICBpZiAoIHN0YXRlID09PSAyICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU3RhdGUgaXMgXCJkb25lXCIgbm93XG4gICAgICAgICAgICAgICAgc3RhdGUgPSAyO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGltZW91dCBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgICAgICBpZiAoIHRpbWVvdXRUaW1lciApIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCB0aW1lb3V0VGltZXIgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBEZXJlZmVyZW5jZSB0cmFuc3BvcnQgZm9yIGVhcmx5IGdhcmJhZ2UgY29sbGVjdGlvblxuICAgICAgICAgICAgICAgIC8vIChubyBtYXR0ZXIgaG93IGxvbmcgdGhlIGpxWEhSIG9iamVjdCB3aWxsIGJlIHVzZWQpXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0ID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2FjaGUgcmVzcG9uc2UgaGVhZGVyc1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlSGVhZGVyc1N0cmluZyA9IGhlYWRlcnMgfHwgXCJcIjtcblxuICAgICAgICAgICAgICAgIC8vIFNldCByZWFkeVN0YXRlXG4gICAgICAgICAgICAgICAganFYSFIucmVhZHlTdGF0ZSA9IHN0YXR1cyA+IDAgPyA0IDogMDtcblxuICAgICAgICAgICAgICAgIC8vIERldGVybWluZSBpZiBzdWNjZXNzZnVsXG4gICAgICAgICAgICAgICAgaXNTdWNjZXNzID0gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDAgfHwgc3RhdHVzID09PSAzMDQ7XG5cbiAgICAgICAgICAgICAgICAvLyBHZXQgcmVzcG9uc2UgZGF0YVxuICAgICAgICAgICAgICAgIGlmICggcmVzcG9uc2VzICkge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IG5vIG1hdHRlciB3aGF0ICh0aGF0IHdheSByZXNwb25zZVhYWCBmaWVsZHMgYXJlIGFsd2F5cyBzZXQpXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKTtcblxuICAgICAgICAgICAgICAgIC8vIElmIHN1Y2Nlc3NmdWwsIGhhbmRsZSB0eXBlIGNoYWluaW5nXG4gICAgICAgICAgICAgICAgaWYgKCBpc1N1Y2Nlc3MgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBJZi1Nb2RpZmllZC1TaW5jZSBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIsIGlmIGluIGlmTW9kaWZpZWQgbW9kZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBzLmlmTW9kaWZpZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RpZmllZCA9IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKFwiTGFzdC1Nb2RpZmllZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggbW9kaWZpZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kaWZpZWQgPSBqcVhIUi5nZXRSZXNwb25zZUhlYWRlcihcImV0YWdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG1vZGlmaWVkICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBubyBjb250ZW50XG4gICAgICAgICAgICAgICAgICAgIGlmICggc3RhdHVzID09PSAyMDQgfHwgcy50eXBlID09PSBcIkhFQURcIiApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQgPSBcIm5vY29udGVudFwiO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBub3QgbW9kaWZpZWRcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggc3RhdHVzID09PSAzMDQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0ID0gXCJub3Rtb2RpZmllZFwiO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGRhdGEsIGxldCdzIGNvbnZlcnQgaXRcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQgPSByZXNwb25zZS5zdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSByZXNwb25zZS5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU3VjY2VzcyA9ICFlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGV4dHJhY3QgZXJyb3IgZnJvbSBzdGF0dXNUZXh0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZW4gbm9ybWFsaXplIHN0YXR1c1RleHQgYW5kIHN0YXR1cyBmb3Igbm9uLWFib3J0c1xuICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHN0YXR1c1RleHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICggc3RhdHVzIHx8ICFzdGF0dXNUZXh0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dCA9IFwiZXJyb3JcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggc3RhdHVzIDwgMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU2V0IGRhdGEgZm9yIHRoZSBmYWtlIHhociBvYmplY3RcbiAgICAgICAgICAgICAgICBqcVhIUi5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgICAgICAgICAganFYSFIuc3RhdHVzVGV4dCA9ICggbmF0aXZlU3RhdHVzVGV4dCB8fCBzdGF0dXNUZXh0ICkgKyBcIlwiO1xuXG4gICAgICAgICAgICAgICAgLy8gU3VjY2Vzcy9FcnJvclxuICAgICAgICAgICAgICAgIGlmICggaXNTdWNjZXNzICkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIHN1Y2Nlc3MsIHN0YXR1c1RleHQsIGpxWEhSIF0gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3RXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQsIGVycm9yIF0gKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuICAgICAgICAgICAgICAgIGpxWEhSLnN0YXR1c0NvZGUoIHN0YXR1c0NvZGUgKTtcbiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICAgICAgaWYgKCBmaXJlR2xvYmFscyApIHtcbiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIGlzU3VjY2VzcyA/IFwiYWpheFN1Y2Nlc3NcIiA6IFwiYWpheEVycm9yXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBbIGpxWEhSLCBzLCBpc1N1Y2Nlc3MgPyBzdWNjZXNzIDogZXJyb3IgXSApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIENvbXBsZXRlXG4gICAgICAgICAgICAgICAgY29tcGxldGVEZWZlcnJlZC5maXJlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0IF0gKTtcblxuICAgICAgICAgICAgICAgIGlmICggZmlyZUdsb2JhbHMgKSB7XG4gICAgICAgICAgICAgICAgICAgIGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBcImFqYXhDb21wbGV0ZVwiLCBbIGpxWEhSLCBzIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIHRoZSBnbG9iYWwgQUpBWCBjb3VudGVyXG4gICAgICAgICAgICAgICAgICAgIGlmICggISggLS1qUXVlcnkuYWN0aXZlICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZXZlbnQudHJpZ2dlcihcImFqYXhTdG9wXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ganFYSFI7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0SlNPTjogZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2sgKSB7XG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5LmdldCggdXJsLCBkYXRhLCBjYWxsYmFjaywgXCJqc29uXCIgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRTY3JpcHQ6IGZ1bmN0aW9uKCB1cmwsIGNhbGxiYWNrICkge1xuICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgdW5kZWZpbmVkLCBjYWxsYmFjaywgXCJzY3JpcHRcIiApO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBqUXVlcnkuZWFjaCggWyBcImdldFwiLCBcInBvc3RcIiBdLCBmdW5jdGlvbiggaSwgbWV0aG9kICkge1xuICAgICAgICBqUXVlcnlbIG1ldGhvZCBdID0gZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2ssIHR5cGUgKSB7XG4gICAgICAgICAgICAvLyBzaGlmdCBhcmd1bWVudHMgaWYgZGF0YSBhcmd1bWVudCB3YXMgb21pdHRlZFxuICAgICAgICAgICAgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZGF0YSApICkge1xuICAgICAgICAgICAgICAgIHR5cGUgPSB0eXBlIHx8IGNhbGxiYWNrO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gZGF0YTtcbiAgICAgICAgICAgICAgICBkYXRhID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4galF1ZXJ5LmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgIHR5cGU6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGNhbGxiYWNrXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8qIEhhbmRsZXMgcmVzcG9uc2VzIHRvIGFuIGFqYXggcmVxdWVzdDpcbiAgICAgKiAtIGZpbmRzIHRoZSByaWdodCBkYXRhVHlwZSAobWVkaWF0ZXMgYmV0d2VlbiBjb250ZW50LXR5cGUgYW5kIGV4cGVjdGVkIGRhdGFUeXBlKVxuICAgICAqIC0gcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKSB7XG4gICAgICAgIHZhciBmaXJzdERhdGFUeXBlLCBjdCwgZmluYWxEYXRhVHlwZSwgdHlwZSxcbiAgICAgICAgICAgIGNvbnRlbnRzID0gcy5jb250ZW50cyxcbiAgICAgICAgICAgIGRhdGFUeXBlcyA9IHMuZGF0YVR5cGVzO1xuXG4gICAgICAgIC8vIFJlbW92ZSBhdXRvIGRhdGFUeXBlIGFuZCBnZXQgY29udGVudC10eXBlIGluIHRoZSBwcm9jZXNzXG4gICAgICAgIHdoaWxlKCBkYXRhVHlwZXNbIDAgXSA9PT0gXCIqXCIgKSB7XG4gICAgICAgICAgICBkYXRhVHlwZXMuc2hpZnQoKTtcbiAgICAgICAgICAgIGlmICggY3QgPT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICBjdCA9IHMubWltZVR5cGUgfHwganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiB3ZSdyZSBkZWFsaW5nIHdpdGggYSBrbm93biBjb250ZW50LXR5cGVcbiAgICAgICAgaWYgKCBjdCApIHtcbiAgICAgICAgICAgIGZvciAoIHR5cGUgaW4gY29udGVudHMgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCBjb250ZW50c1sgdHlwZSBdICYmIGNvbnRlbnRzWyB0eXBlIF0udGVzdCggY3QgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGVzLnVuc2hpZnQoIHR5cGUgKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYSByZXNwb25zZSBmb3IgdGhlIGV4cGVjdGVkIGRhdGFUeXBlXG4gICAgICAgIGlmICggZGF0YVR5cGVzWyAwIF0gaW4gcmVzcG9uc2VzICkge1xuICAgICAgICAgICAgZmluYWxEYXRhVHlwZSA9IGRhdGFUeXBlc1sgMCBdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVHJ5IGNvbnZlcnRpYmxlIGRhdGFUeXBlc1xuICAgICAgICAgICAgZm9yICggdHlwZSBpbiByZXNwb25zZXMgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCAhZGF0YVR5cGVzWyAwIF0gfHwgcy5jb252ZXJ0ZXJzWyB0eXBlICsgXCIgXCIgKyBkYXRhVHlwZXNbMF0gXSApIHtcbiAgICAgICAgICAgICAgICAgICAgZmluYWxEYXRhVHlwZSA9IHR5cGU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoICFmaXJzdERhdGFUeXBlICkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdERhdGFUeXBlID0gdHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBPciBqdXN0IHVzZSBmaXJzdCBvbmVcbiAgICAgICAgICAgIGZpbmFsRGF0YVR5cGUgPSBmaW5hbERhdGFUeXBlIHx8IGZpcnN0RGF0YVR5cGU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGRhdGFUeXBlXG4gICAgICAgIC8vIFdlIGFkZCB0aGUgZGF0YVR5cGUgdG8gdGhlIGxpc3QgaWYgbmVlZGVkXG4gICAgICAgIC8vIGFuZCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgcmVzcG9uc2VcbiAgICAgICAgaWYgKCBmaW5hbERhdGFUeXBlICkge1xuICAgICAgICAgICAgaWYgKCBmaW5hbERhdGFUeXBlICE9PSBkYXRhVHlwZXNbIDAgXSApIHtcbiAgICAgICAgICAgICAgICBkYXRhVHlwZXMudW5zaGlmdCggZmluYWxEYXRhVHlwZSApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlc1sgZmluYWxEYXRhVHlwZSBdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogQ2hhaW4gY29udmVyc2lvbnMgZ2l2ZW4gdGhlIHJlcXVlc3QgYW5kIHRoZSBvcmlnaW5hbCByZXNwb25zZVxuICAgICAqIEFsc28gc2V0cyB0aGUgcmVzcG9uc2VYWFggZmllbGRzIG9uIHRoZSBqcVhIUiBpbnN0YW5jZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFqYXhDb252ZXJ0KCBzLCByZXNwb25zZSwganFYSFIsIGlzU3VjY2VzcyApIHtcbiAgICAgICAgdmFyIGNvbnYyLCBjdXJyZW50LCBjb252LCB0bXAsIHByZXYsXG4gICAgICAgICAgICBjb252ZXJ0ZXJzID0ge30sXG4gICAgICAgIC8vIFdvcmsgd2l0aCBhIGNvcHkgb2YgZGF0YVR5cGVzIGluIGNhc2Ugd2UgbmVlZCB0byBtb2RpZnkgaXQgZm9yIGNvbnZlcnNpb25cbiAgICAgICAgICAgIGRhdGFUeXBlcyA9IHMuZGF0YVR5cGVzLnNsaWNlKCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGNvbnZlcnRlcnMgbWFwIHdpdGggbG93ZXJjYXNlZCBrZXlzXG4gICAgICAgIGlmICggZGF0YVR5cGVzWyAxIF0gKSB7XG4gICAgICAgICAgICBmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHtcbiAgICAgICAgICAgICAgICBjb252ZXJ0ZXJzWyBjb252LnRvTG93ZXJDYXNlKCkgXSA9IHMuY29udmVydGVyc1sgY29udiBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXG4gICAgICAgIC8vIENvbnZlcnQgdG8gZWFjaCBzZXF1ZW50aWFsIGRhdGFUeXBlXG4gICAgICAgIHdoaWxlICggY3VycmVudCApIHtcblxuICAgICAgICAgICAgaWYgKCBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gKSB7XG4gICAgICAgICAgICAgICAganFYSFJbIHMucmVzcG9uc2VGaWVsZHNbIGN1cnJlbnQgXSBdID0gcmVzcG9uc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFwcGx5IHRoZSBkYXRhRmlsdGVyIGlmIHByb3ZpZGVkXG4gICAgICAgICAgICBpZiAoICFwcmV2ICYmIGlzU3VjY2VzcyAmJiBzLmRhdGFGaWx0ZXIgKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBzLmRhdGFGaWx0ZXIoIHJlc3BvbnNlLCBzLmRhdGFUeXBlICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHByZXYgPSBjdXJyZW50O1xuICAgICAgICAgICAgY3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXG4gICAgICAgICAgICBpZiAoIGN1cnJlbnQgKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBUaGVyZSdzIG9ubHkgd29yayB0byBkbyBpZiBjdXJyZW50IGRhdGFUeXBlIGlzIG5vbi1hdXRvXG4gICAgICAgICAgICAgICAgaWYgKCBjdXJyZW50ID09PSBcIipcIiApIHtcblxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gcHJldjtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IHJlc3BvbnNlIGlmIHByZXYgZGF0YVR5cGUgaXMgbm9uLWF1dG8gYW5kIGRpZmZlcnMgZnJvbSBjdXJyZW50XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICggcHJldiAhPT0gXCIqXCIgJiYgcHJldiAhPT0gY3VycmVudCApIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTZWVrIGEgZGlyZWN0IGNvbnZlcnRlclxuICAgICAgICAgICAgICAgICAgICBjb252ID0gY29udmVydGVyc1sgcHJldiArIFwiIFwiICsgY3VycmVudCBdIHx8IGNvbnZlcnRlcnNbIFwiKiBcIiArIGN1cnJlbnQgXTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBub25lIGZvdW5kLCBzZWVrIGEgcGFpclxuICAgICAgICAgICAgICAgICAgICBpZiAoICFjb252ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICggY29udjIgaW4gY29udmVydGVycyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGNvbnYyIG91dHB1dHMgY3VycmVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcCA9IGNvbnYyLnNwbGl0KCBcIiBcIiApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdG1wWyAxIF0gPT09IGN1cnJlbnQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgcHJldiBjYW4gYmUgY29udmVydGVkIHRvIGFjY2VwdGVkIGlucHV0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyB0bXBbIDAgXSBdIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJ0ZXJzWyBcIiogXCIgKyB0bXBbIDAgXSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGNvbnYgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb25kZW5zZSBlcXVpdmFsZW5jZSBjb252ZXJ0ZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGNvbnYgPT09IHRydWUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udiA9IGNvbnZlcnRlcnNbIGNvbnYyIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIGluc2VydCB0aGUgaW50ZXJtZWRpYXRlIGRhdGFUeXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBjb252ZXJ0ZXJzWyBjb252MiBdICE9PSB0cnVlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSB0bXBbIDAgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZXMudW5zaGlmdCggdG1wWyAxIF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQXBwbHkgY29udmVydGVyIChpZiBub3QgYW4gZXF1aXZhbGVuY2UpXG4gICAgICAgICAgICAgICAgICAgIGlmICggY29udiAhPT0gdHJ1ZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVW5sZXNzIGVycm9ycyBhcmUgYWxsb3dlZCB0byBidWJibGUsIGNhdGNoIGFuZCByZXR1cm4gdGhlbVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjb252ICYmIHNbIFwidGhyb3dzXCIgXSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gY29udiggcmVzcG9uc2UgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICggZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdGU6IFwicGFyc2VyZXJyb3JcIiwgZXJyb3I6IGNvbnYgPyBlIDogXCJObyBjb252ZXJzaW9uIGZyb20gXCIgKyBwcmV2ICsgXCIgdG8gXCIgKyBjdXJyZW50IH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHsgc3RhdGU6IFwic3VjY2Vzc1wiLCBkYXRhOiByZXNwb25zZSB9O1xuICAgIH1cbi8vIEluc3RhbGwgc2NyaXB0IGRhdGFUeXBlXG4gICAgalF1ZXJ5LmFqYXhTZXR1cCh7XG4gICAgICAgIGFjY2VwdHM6IHtcbiAgICAgICAgICAgIHNjcmlwdDogXCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwiXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRlbnRzOiB7XG4gICAgICAgICAgICBzY3JpcHQ6IC8oPzpqYXZhfGVjbWEpc2NyaXB0L1xuICAgICAgICB9LFxuICAgICAgICBjb252ZXJ0ZXJzOiB7XG4gICAgICAgICAgICBcInRleHQgc2NyaXB0XCI6IGZ1bmN0aW9uKCB0ZXh0ICkge1xuICAgICAgICAgICAgICAgIGpRdWVyeS5nbG9iYWxFdmFsKCB0ZXh0ICk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuLy8gSGFuZGxlIGNhY2hlJ3Mgc3BlY2lhbCBjYXNlIGFuZCBnbG9iYWxcbiAgICBqUXVlcnkuYWpheFByZWZpbHRlciggXCJzY3JpcHRcIiwgZnVuY3Rpb24oIHMgKSB7XG4gICAgICAgIGlmICggcy5jYWNoZSA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgcy5jYWNoZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICggcy5jcm9zc0RvbWFpbiApIHtcbiAgICAgICAgICAgIHMudHlwZSA9IFwiR0VUXCI7XG4gICAgICAgICAgICBzLmdsb2JhbCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbi8vIEJpbmQgc2NyaXB0IHRhZyBoYWNrIHRyYW5zcG9ydFxuICAgIGpRdWVyeS5hamF4VHJhbnNwb3J0KCBcInNjcmlwdFwiLCBmdW5jdGlvbihzKSB7XG5cbiAgICAgICAgLy8gVGhpcyB0cmFuc3BvcnQgb25seSBkZWFscyB3aXRoIGNyb3NzIGRvbWFpbiByZXF1ZXN0c1xuICAgICAgICBpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cbiAgICAgICAgICAgIHZhciBzY3JpcHQsXG4gICAgICAgICAgICAgICAgaGVhZCA9IGRvY3VtZW50LmhlYWQgfHwgalF1ZXJ5KFwiaGVhZFwiKVswXSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG5cbiAgICAgICAgICAgICAgICBzZW5kOiBmdW5jdGlvbiggXywgY2FsbGJhY2sgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcblxuICAgICAgICAgICAgICAgICAgICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggcy5zY3JpcHRDaGFyc2V0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0LmNoYXJzZXQgPSBzLnNjcmlwdENoYXJzZXQ7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBzY3JpcHQuc3JjID0gcy51cmw7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQXR0YWNoIGhhbmRsZXJzIGZvciBhbGwgYnJvd3NlcnNcbiAgICAgICAgICAgICAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiggXywgaXNBYm9ydCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBpc0Fib3J0IHx8ICFzY3JpcHQucmVhZHlTdGF0ZSB8fCAvbG9hZGVkfGNvbXBsZXRlLy50ZXN0KCBzY3JpcHQucmVhZHlTdGF0ZSApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIG1lbW9yeSBsZWFrIGluIElFXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBzY3JpcHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHNjcmlwdC5wYXJlbnROb2RlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggc2NyaXB0ICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVyZWZlcmVuY2UgdGhlIHNjcmlwdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxsYmFjayBpZiBub3QgYWJvcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFpc0Fib3J0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayggMjAwLCBcInN1Y2Nlc3NcIiApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDaXJjdW12ZW50IElFNiBidWdzIHdpdGggYmFzZSBlbGVtZW50cyAoIzI3MDkgYW5kICM0Mzc4KSBieSBwcmVwZW5kaW5nXG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSBuYXRpdmUgRE9NIG1hbmlwdWxhdGlvbiB0byBhdm9pZCBvdXIgZG9tTWFuaXAgQUpBWCB0cmlja2VyeVxuICAgICAgICAgICAgICAgICAgICBoZWFkLmluc2VydEJlZm9yZSggc2NyaXB0LCBoZWFkLmZpcnN0Q2hpbGQgKTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgYWJvcnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHNjcmlwdCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdC5vbmxvYWQoIHVuZGVmaW5lZCwgdHJ1ZSApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBvbGRDYWxsYmFja3MgPSBbXSxcbiAgICAgICAgcmpzb25wID0gLyg9KVxcPyg/PSZ8JCl8XFw/XFw/LztcblxuLy8gRGVmYXVsdCBqc29ucCBzZXR0aW5nc1xuICAgIGpRdWVyeS5hamF4U2V0dXAoe1xuICAgICAgICBqc29ucDogXCJjYWxsYmFja1wiLFxuICAgICAgICBqc29ucENhbGxiYWNrOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IG9sZENhbGxiYWNrcy5wb3AoKSB8fCAoIGpRdWVyeS5leHBhbmRvICsgXCJfXCIgKyAoIGFqYXhfbm9uY2UrKyApICk7XG4gICAgICAgICAgICB0aGlzWyBjYWxsYmFjayBdID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH0pO1xuXG4vLyBEZXRlY3QsIG5vcm1hbGl6ZSBvcHRpb25zIGFuZCBpbnN0YWxsIGNhbGxiYWNrcyBmb3IganNvbnAgcmVxdWVzdHNcbiAgICBqUXVlcnkuYWpheFByZWZpbHRlciggXCJqc29uIGpzb25wXCIsIGZ1bmN0aW9uKCBzLCBvcmlnaW5hbFNldHRpbmdzLCBqcVhIUiApIHtcblxuICAgICAgICB2YXIgY2FsbGJhY2tOYW1lLCBvdmVyd3JpdHRlbiwgcmVzcG9uc2VDb250YWluZXIsXG4gICAgICAgICAgICBqc29uUHJvcCA9IHMuanNvbnAgIT09IGZhbHNlICYmICggcmpzb25wLnRlc3QoIHMudXJsICkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ1cmxcIiA6XG4gICAgICAgICAgICAgICAgICAgIHR5cGVvZiBzLmRhdGEgPT09IFwic3RyaW5nXCIgJiYgISggcy5jb250ZW50VHlwZSB8fCBcIlwiICkuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSAmJiByanNvbnAudGVzdCggcy5kYXRhICkgJiYgXCJkYXRhXCJcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgIC8vIEhhbmRsZSBpZmYgdGhlIGV4cGVjdGVkIGRhdGEgdHlwZSBpcyBcImpzb25wXCIgb3Igd2UgaGF2ZSBhIHBhcmFtZXRlciB0byBzZXRcbiAgICAgICAgaWYgKCBqc29uUHJvcCB8fCBzLmRhdGFUeXBlc1sgMCBdID09PSBcImpzb25wXCIgKSB7XG5cbiAgICAgICAgICAgIC8vIEdldCBjYWxsYmFjayBuYW1lLCByZW1lbWJlcmluZyBwcmVleGlzdGluZyB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggaXRcbiAgICAgICAgICAgIGNhbGxiYWNrTmFtZSA9IHMuanNvbnBDYWxsYmFjayA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBzLmpzb25wQ2FsbGJhY2sgKSA/XG4gICAgICAgICAgICAgICAgcy5qc29ucENhbGxiYWNrKCkgOlxuICAgICAgICAgICAgICAgIHMuanNvbnBDYWxsYmFjaztcblxuICAgICAgICAgICAgLy8gSW5zZXJ0IGNhbGxiYWNrIGludG8gdXJsIG9yIGZvcm0gZGF0YVxuICAgICAgICAgICAgaWYgKCBqc29uUHJvcCApIHtcbiAgICAgICAgICAgICAgICBzWyBqc29uUHJvcCBdID0gc1sganNvblByb3AgXS5yZXBsYWNlKCByanNvbnAsIFwiJDFcIiArIGNhbGxiYWNrTmFtZSApO1xuICAgICAgICAgICAgfSBlbHNlIGlmICggcy5qc29ucCAhPT0gZmFsc2UgKSB7XG4gICAgICAgICAgICAgICAgcy51cmwgKz0gKCBhamF4X3JxdWVyeS50ZXN0KCBzLnVybCApID8gXCImXCIgOiBcIj9cIiApICsgcy5qc29ucCArIFwiPVwiICsgY2FsbGJhY2tOYW1lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBVc2UgZGF0YSBjb252ZXJ0ZXIgdG8gcmV0cmlldmUganNvbiBhZnRlciBzY3JpcHQgZXhlY3V0aW9uXG4gICAgICAgICAgICBzLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICggIXJlc3BvbnNlQ29udGFpbmVyICkge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZXJyb3IoIGNhbGxiYWNrTmFtZSArIFwiIHdhcyBub3QgY2FsbGVkXCIgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlQ29udGFpbmVyWyAwIF07XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBmb3JjZSBqc29uIGRhdGFUeXBlXG4gICAgICAgICAgICBzLmRhdGFUeXBlc1sgMCBdID0gXCJqc29uXCI7XG5cbiAgICAgICAgICAgIC8vIEluc3RhbGwgY2FsbGJhY2tcbiAgICAgICAgICAgIG92ZXJ3cml0dGVuID0gd2luZG93WyBjYWxsYmFja05hbWUgXTtcbiAgICAgICAgICAgIHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZUNvbnRhaW5lciA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIENsZWFuLXVwIGZ1bmN0aW9uIChmaXJlcyBhZnRlciBjb252ZXJ0ZXJzKVxuICAgICAgICAgICAganFYSFIuYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vIFJlc3RvcmUgcHJlZXhpc3RpbmcgdmFsdWVcbiAgICAgICAgICAgICAgICB3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gb3ZlcndyaXR0ZW47XG5cbiAgICAgICAgICAgICAgICAvLyBTYXZlIGJhY2sgYXMgZnJlZVxuICAgICAgICAgICAgICAgIGlmICggc1sgY2FsbGJhY2tOYW1lIF0gKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHJlLXVzaW5nIHRoZSBvcHRpb25zIGRvZXNuJ3Qgc2NyZXcgdGhpbmdzIGFyb3VuZFxuICAgICAgICAgICAgICAgICAgICBzLmpzb25wQ2FsbGJhY2sgPSBvcmlnaW5hbFNldHRpbmdzLmpzb25wQ2FsbGJhY2s7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2F2ZSB0aGUgY2FsbGJhY2sgbmFtZSBmb3IgZnV0dXJlIHVzZVxuICAgICAgICAgICAgICAgICAgICBvbGRDYWxsYmFja3MucHVzaCggY2FsbGJhY2tOYW1lICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ2FsbCBpZiBpdCB3YXMgYSBmdW5jdGlvbiBhbmQgd2UgaGF2ZSBhIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgaWYgKCByZXNwb25zZUNvbnRhaW5lciAmJiBqUXVlcnkuaXNGdW5jdGlvbiggb3ZlcndyaXR0ZW4gKSApIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcndyaXR0ZW4oIHJlc3BvbnNlQ29udGFpbmVyWyAwIF0gKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXNwb25zZUNvbnRhaW5lciA9IG92ZXJ3cml0dGVuID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIERlbGVnYXRlIHRvIHNjcmlwdFxuICAgICAgICAgICAgcmV0dXJuIFwic2NyaXB0XCI7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgeGhyQ2FsbGJhY2tzLCB4aHJTdXBwb3J0ZWQsXG4gICAgICAgIHhocklkID0gMCxcbiAgICAvLyAjNTI4MDogSW50ZXJuZXQgRXhwbG9yZXIgd2lsbCBrZWVwIGNvbm5lY3Rpb25zIGFsaXZlIGlmIHdlIGRvbid0IGFib3J0IG9uIHVubG9hZFxuICAgICAgICB4aHJPblVubG9hZEFib3J0ID0gd2luZG93LkFjdGl2ZVhPYmplY3QgJiYgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgLy8gQWJvcnQgYWxsIHBlbmRpbmcgcmVxdWVzdHNcbiAgICAgICAgICAgICAgICB2YXIga2V5O1xuICAgICAgICAgICAgICAgIGZvciAoIGtleSBpbiB4aHJDYWxsYmFja3MgKSB7XG4gICAgICAgICAgICAgICAgICAgIHhockNhbGxiYWNrc1sga2V5IF0oIHVuZGVmaW5lZCwgdHJ1ZSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbi8vIEZ1bmN0aW9ucyB0byBjcmVhdGUgeGhyc1xuICAgIGZ1bmN0aW9uIGNyZWF0ZVN0YW5kYXJkWEhSKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgfSBjYXRjaCggZSApIHt9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQWN0aXZlWEhSKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpO1xuICAgICAgICB9IGNhdGNoKCBlICkge31cbiAgICB9XG5cbi8vIENyZWF0ZSB0aGUgcmVxdWVzdCBvYmplY3Rcbi8vIChUaGlzIGlzIHN0aWxsIGF0dGFjaGVkIHRvIGFqYXhTZXR0aW5ncyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSlcbiAgICBqUXVlcnkuYWpheFNldHRpbmdzLnhociA9IHdpbmRvdy5BY3RpdmVYT2JqZWN0ID9cbiAgICAgICAgLyogTWljcm9zb2Z0IGZhaWxlZCB0byBwcm9wZXJseVxuICAgICAgICAgKiBpbXBsZW1lbnQgdGhlIFhNTEh0dHBSZXF1ZXN0IGluIElFNyAoY2FuJ3QgcmVxdWVzdCBsb2NhbCBmaWxlcyksXG4gICAgICAgICAqIHNvIHdlIHVzZSB0aGUgQWN0aXZlWE9iamVjdCB3aGVuIGl0IGlzIGF2YWlsYWJsZVxuICAgICAgICAgKiBBZGRpdGlvbmFsbHkgWE1MSHR0cFJlcXVlc3QgY2FuIGJlIGRpc2FibGVkIGluIElFNy9JRTggc29cbiAgICAgICAgICogd2UgbmVlZCBhIGZhbGxiYWNrLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuaXNMb2NhbCAmJiBjcmVhdGVTdGFuZGFyZFhIUigpIHx8IGNyZWF0ZUFjdGl2ZVhIUigpO1xuICAgICAgICB9IDpcbiAgICAgICAgLy8gRm9yIGFsbCBvdGhlciBicm93c2VycywgdXNlIHRoZSBzdGFuZGFyZCBYTUxIdHRwUmVxdWVzdCBvYmplY3RcbiAgICAgICAgY3JlYXRlU3RhbmRhcmRYSFI7XG5cbi8vIERldGVybWluZSBzdXBwb3J0IHByb3BlcnRpZXNcbiAgICB4aHJTdXBwb3J0ZWQgPSBqUXVlcnkuYWpheFNldHRpbmdzLnhocigpO1xuICAgIGpRdWVyeS5zdXBwb3J0LmNvcnMgPSAhIXhoclN1cHBvcnRlZCAmJiAoIFwid2l0aENyZWRlbnRpYWxzXCIgaW4geGhyU3VwcG9ydGVkICk7XG4gICAgeGhyU3VwcG9ydGVkID0galF1ZXJ5LnN1cHBvcnQuYWpheCA9ICEheGhyU3VwcG9ydGVkO1xuXG4vLyBDcmVhdGUgdHJhbnNwb3J0IGlmIHRoZSBicm93c2VyIGNhbiBwcm92aWRlIGFuIHhoclxuICAgIGlmICggeGhyU3VwcG9ydGVkICkge1xuXG4gICAgICAgIGpRdWVyeS5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKCBzICkge1xuICAgICAgICAgICAgLy8gQ3Jvc3MgZG9tYWluIG9ubHkgYWxsb3dlZCBpZiBzdXBwb3J0ZWQgdGhyb3VnaCBYTUxIdHRwUmVxdWVzdFxuICAgICAgICAgICAgaWYgKCAhcy5jcm9zc0RvbWFpbiB8fCBqUXVlcnkuc3VwcG9ydC5jb3JzICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZDogZnVuY3Rpb24oIGhlYWRlcnMsIGNvbXBsZXRlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgYSBuZXcgeGhyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGFuZGxlLCBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhociA9IHMueGhyKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9wZW4gdGhlIHNvY2tldFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGFzc2luZyBudWxsIHVzZXJuYW1lLCBnZW5lcmF0ZXMgYSBsb2dpbiBwb3B1cCBvbiBPcGVyYSAoIzI4NjUpXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHMudXNlcm5hbWUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9wZW4oIHMudHlwZSwgcy51cmwsIHMuYXN5bmMsIHMudXNlcm5hbWUsIHMucGFzc3dvcmQgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9wZW4oIHMudHlwZSwgcy51cmwsIHMuYXN5bmMgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBwbHkgY3VzdG9tIGZpZWxkcyBpZiBwcm92aWRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzLnhockZpZWxkcyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCBpIGluIHMueGhyRmllbGRzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHJbIGkgXSA9IHMueGhyRmllbGRzWyBpIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPdmVycmlkZSBtaW1lIHR5cGUgaWYgbmVlZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHMubWltZVR5cGUgJiYgeGhyLm92ZXJyaWRlTWltZVR5cGUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm92ZXJyaWRlTWltZVR5cGUoIHMubWltZVR5cGUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gWC1SZXF1ZXN0ZWQtV2l0aCBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBjcm9zcy1kb21haW4gcmVxdWVzdHMsIHNlZWluZyBhcyBjb25kaXRpb25zIGZvciBhIHByZWZsaWdodCBhcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFraW4gdG8gYSBqaWdzYXcgcHV6emxlLCB3ZSBzaW1wbHkgbmV2ZXIgc2V0IGl0IHRvIGJlIHN1cmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAoaXQgY2FuIGFsd2F5cyBiZSBzZXQgb24gYSBwZXItcmVxdWVzdCBiYXNpcyBvciBldmVuIHVzaW5nIGFqYXhTZXR1cClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBzYW1lLWRvbWFpbiByZXF1ZXN0cywgd29uJ3QgY2hhbmdlIGhlYWRlciBpZiBhbHJlYWR5IHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAhcy5jcm9zc0RvbWFpbiAmJiAhaGVhZGVyc1tcIlgtUmVxdWVzdGVkLVdpdGhcIl0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1tcIlgtUmVxdWVzdGVkLVdpdGhcIl0gPSBcIlhNTEh0dHBSZXF1ZXN0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5lZWQgYW4gZXh0cmEgdHJ5L2NhdGNoIGZvciBjcm9zcyBkb21haW4gcmVxdWVzdHMgaW4gRmlyZWZveCAzXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIGkgaW4gaGVhZGVycyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoIGksIGhlYWRlcnNbIGkgXSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goIGVyciApIHt9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvIHNlbmQgdGhlIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgbWF5IHJhaXNlIGFuIGV4Y2VwdGlvbiB3aGljaCBpcyBhY3R1YWxseVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGFuZGxlZCBpbiBqUXVlcnkuYWpheCAoc28gbm8gdHJ5L2NhdGNoIGhlcmUpXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZCggKCBzLmhhc0NvbnRlbnQgJiYgcy5kYXRhICkgfHwgbnVsbCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBMaXN0ZW5lclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbiggXywgaXNBYm9ydCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdHVzLCByZXNwb25zZUhlYWRlcnMsIHN0YXR1c1RleHQsIHJlc3BvbnNlcztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggdGhyb3dzIGV4Y2VwdGlvbnMgd2hlbiBhY2Nlc3NpbmcgcHJvcGVydGllc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIGFuIHhociB3aGVuIGEgbmV0d29yayBlcnJvciBvY2N1cnJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9oZWxwZnVsLmtub2JzLWRpYWxzLmNvbS9pbmRleC5waHAvQ29tcG9uZW50X3JldHVybmVkX2ZhaWx1cmVfY29kZTpfMHg4MDA0MDExMV8oTlNfRVJST1JfTk9UX0FWQUlMQUJMRSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhcyBuZXZlciBjYWxsZWQgYW5kIGlzIGFib3J0ZWQgb3IgY29tcGxldGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBjYWxsYmFjayAmJiAoIGlzQWJvcnQgfHwgeGhyLnJlYWR5U3RhdGUgPT09IDQgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBjYWxsZWQgb25jZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdCBrZWVwIGFzIGFjdGl2ZSBhbnltb3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGhhbmRsZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0galF1ZXJ5Lm5vb3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB4aHJPblVubG9hZEFib3J0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgeGhyQ2FsbGJhY2tzWyBoYW5kbGUgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgYW4gYWJvcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaXNBYm9ydCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBYm9ydCBpdCBtYW51YWxseSBpZiBuZWVkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHhoci5yZWFkeVN0YXRlICE9PSA0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlcyA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IHhoci5zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXJzID0geGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiByZXF1ZXN0aW5nIGJpbmFyeSBkYXRhLCBJRTYtOSB3aWxsIHRocm93IGFuIGV4Y2VwdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uIGFueSBhdHRlbXB0IHRvIGFjY2VzcyByZXNwb25zZVRleHQgKCMxMTQyNilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0ID09PSBcInN0cmluZ1wiICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZXMudGV4dCA9IHhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZWZveCB0aHJvd3MgYW4gZXhjZXB0aW9uIHdoZW4gYWNjZXNzaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhdHVzVGV4dCBmb3IgZmF1bHR5IGNyb3NzLWRvbWFpbiByZXF1ZXN0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQgPSB4aHIuc3RhdHVzVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKCBlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBub3JtYWxpemUgd2l0aCBXZWJraXQgZ2l2aW5nIGFuIGVtcHR5IHN0YXR1c1RleHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlsdGVyIHN0YXR1cyBmb3Igbm9uIHN0YW5kYXJkIGJlaGF2aW9yc1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3QgaXMgbG9jYWwgYW5kIHdlIGhhdmUgZGF0YTogYXNzdW1lIGEgc3VjY2Vzc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChzdWNjZXNzIHdpdGggbm8gZGF0YSB3b24ndCBnZXQgbm90aWZpZWQsIHRoYXQncyB0aGUgYmVzdCB3ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbiBkbyBnaXZlbiBjdXJyZW50IGltcGxlbWVudGF0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFzdGF0dXMgJiYgcy5pc0xvY2FsICYmICFzLmNyb3NzRG9tYWluICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSByZXNwb25zZXMudGV4dCA/IDIwMCA6IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUUgLSAjMTQ1MDogc29tZXRpbWVzIHJldHVybnMgMTIyMyB3aGVuIGl0IHNob3VsZCBiZSAyMDRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBzdGF0dXMgPT09IDEyMjMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IDIwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKCBmaXJlZm94QWNjZXNzRXhjZXB0aW9uICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICFpc0Fib3J0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGUoIC0xLCBmaXJlZm94QWNjZXNzRXhjZXB0aW9uICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxsIGNvbXBsZXRlIGlmIG5lZWRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcmVzcG9uc2VzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZSggc3RhdHVzLCBzdGF0dXNUZXh0LCByZXNwb25zZXMsIHJlc3BvbnNlSGVhZGVycyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIXMuYXN5bmMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgd2UncmUgaW4gc3luYyBtb2RlIHdlIGZpcmUgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIHhoci5yZWFkeVN0YXRlID09PSA0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChJRTYgJiBJRTcpIGlmIGl0J3MgaW4gY2FjaGUgYW5kIGhhcyBiZWVuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmV0cmlldmVkIGRpcmVjdGx5IHdlIG5lZWQgdG8gZmlyZSB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBjYWxsYmFjayApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGUgPSArK3hocklkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggeGhyT25VbmxvYWRBYm9ydCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBhY3RpdmUgeGhycyBjYWxsYmFja3MgbGlzdCBpZiBuZWVkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGF0dGFjaCB0aGUgdW5sb2FkIGhhbmRsZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAheGhyQ2FsbGJhY2tzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyQ2FsbGJhY2tzID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoIHdpbmRvdyApLnVubG9hZCggeGhyT25VbmxvYWRBYm9ydCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0byBsaXN0IG9mIGFjdGl2ZSB4aHJzIGNhbGxiYWNrc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHJDYWxsYmFja3NbIGhhbmRsZSBdID0gY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBjYWxsYmFjaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICBhYm9ydDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGNhbGxiYWNrICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCB1bmRlZmluZWQsIHRydWUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB2YXIgZnhOb3csIHRpbWVySWQsXG4gICAgICAgIHJmeHR5cGVzID0gL14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFxuICAgICAgICByZnhudW0gPSBuZXcgUmVnRXhwKCBcIl4oPzooWystXSk9fCkoXCIgKyBjb3JlX3BudW0gKyBcIikoW2EteiVdKikkXCIsIFwiaVwiICksXG4gICAgICAgIHJydW4gPSAvcXVldWVIb29rcyQvLFxuICAgICAgICBhbmltYXRpb25QcmVmaWx0ZXJzID0gWyBkZWZhdWx0UHJlZmlsdGVyIF0sXG4gICAgICAgIHR3ZWVuZXJzID0ge1xuICAgICAgICAgICAgXCIqXCI6IFtmdW5jdGlvbiggcHJvcCwgdmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR3ZWVuID0gdGhpcy5jcmVhdGVUd2VlbiggcHJvcCwgdmFsdWUgKSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gdHdlZW4uY3VyKCksXG4gICAgICAgICAgICAgICAgICAgIHBhcnRzID0gcmZ4bnVtLmV4ZWMoIHZhbHVlICksXG4gICAgICAgICAgICAgICAgICAgIHVuaXQgPSBwYXJ0cyAmJiBwYXJ0c1sgMyBdIHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApLFxuXG4gICAgICAgICAgICAgICAgLy8gU3RhcnRpbmcgdmFsdWUgY29tcHV0YXRpb24gaXMgcmVxdWlyZWQgZm9yIHBvdGVudGlhbCB1bml0IG1pc21hdGNoZXNcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSB8fCB1bml0ICE9PSBcInB4XCIgJiYgK3RhcmdldCApICYmXG4gICAgICAgICAgICAgICAgICAgICAgICByZnhudW0uZXhlYyggalF1ZXJ5LmNzcyggdHdlZW4uZWxlbSwgcHJvcCApICksXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlID0gMSxcbiAgICAgICAgICAgICAgICAgICAgbWF4SXRlcmF0aW9ucyA9IDIwO1xuXG4gICAgICAgICAgICAgICAgaWYgKCBzdGFydCAmJiBzdGFydFsgMyBdICE9PSB1bml0ICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUcnVzdCB1bml0cyByZXBvcnRlZCBieSBqUXVlcnkuY3NzXG4gICAgICAgICAgICAgICAgICAgIHVuaXQgPSB1bml0IHx8IHN0YXJ0WyAzIF07XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIHVwZGF0ZSB0aGUgdHdlZW4gcHJvcGVydGllcyBsYXRlciBvblxuICAgICAgICAgICAgICAgICAgICBwYXJ0cyA9IHBhcnRzIHx8IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEl0ZXJhdGl2ZWx5IGFwcHJveGltYXRlIGZyb20gYSBub256ZXJvIHN0YXJ0aW5nIHBvaW50XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gK3RhcmdldCB8fCAxO1xuXG4gICAgICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHByZXZpb3VzIGl0ZXJhdGlvbiB6ZXJvZWQgb3V0LCBkb3VibGUgdW50aWwgd2UgZ2V0ICpzb21ldGhpbmcqXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVc2UgYSBzdHJpbmcgZm9yIGRvdWJsaW5nIGZhY3RvciBzbyB3ZSBkb24ndCBhY2NpZGVudGFsbHkgc2VlIHNjYWxlIGFzIHVuY2hhbmdlZCBiZWxvd1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGUgPSBzY2FsZSB8fCBcIi41XCI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkanVzdCBhbmQgYXBwbHlcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gc3RhcnQgLyBzY2FsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgcHJvcCwgc3RhcnQgKyB1bml0ICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBzY2FsZSwgdG9sZXJhdGluZyB6ZXJvIG9yIE5hTiBmcm9tIHR3ZWVuLmN1cigpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBbmQgYnJlYWtpbmcgdGhlIGxvb3AgaWYgc2NhbGUgaXMgdW5jaGFuZ2VkIG9yIHBlcmZlY3QsIG9yIGlmIHdlJ3ZlIGp1c3QgaGFkIGVub3VnaFxuICAgICAgICAgICAgICAgICAgICB9IHdoaWxlICggc2NhbGUgIT09IChzY2FsZSA9IHR3ZWVuLmN1cigpIC8gdGFyZ2V0KSAmJiBzY2FsZSAhPT0gMSAmJiAtLW1heEl0ZXJhdGlvbnMgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdHdlZW4gcHJvcGVydGllc1xuICAgICAgICAgICAgICAgIGlmICggcGFydHMgKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gdHdlZW4uc3RhcnQgPSArc3RhcnQgfHwgK3RhcmdldCB8fCAwO1xuICAgICAgICAgICAgICAgICAgICB0d2Vlbi51bml0ID0gdW5pdDtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgYSArPS8tPSB0b2tlbiB3YXMgcHJvdmlkZWQsIHdlJ3JlIGRvaW5nIGEgcmVsYXRpdmUgYW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgICAgIHR3ZWVuLmVuZCA9IHBhcnRzWyAxIF0gP1xuICAgICAgICAgICAgICAgICAgICBzdGFydCArICggcGFydHNbIDEgXSArIDEgKSAqIHBhcnRzWyAyIF0gOlxuICAgICAgICAgICAgICAgICAgICAgICAgK3BhcnRzWyAyIF07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR3ZWVuO1xuICAgICAgICAgICAgfV1cbiAgICAgICAgfTtcblxuLy8gQW5pbWF0aW9ucyBjcmVhdGVkIHN5bmNocm9ub3VzbHkgd2lsbCBydW4gc3luY2hyb25vdXNseVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUZ4Tm93KCkge1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZnhOb3cgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gKCBmeE5vdyA9IGpRdWVyeS5ub3coKSApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVR3ZWVuKCB2YWx1ZSwgcHJvcCwgYW5pbWF0aW9uICkge1xuICAgICAgICB2YXIgdHdlZW4sXG4gICAgICAgICAgICBjb2xsZWN0aW9uID0gKCB0d2VlbmVyc1sgcHJvcCBdIHx8IFtdICkuY29uY2F0KCB0d2VlbmVyc1sgXCIqXCIgXSApLFxuICAgICAgICAgICAgaW5kZXggPSAwLFxuICAgICAgICAgICAgbGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XG4gICAgICAgIGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG4gICAgICAgICAgICBpZiAoICh0d2VlbiA9IGNvbGxlY3Rpb25bIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBwcm9wLCB2YWx1ZSApKSApIHtcblxuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIGRvbmUgd2l0aCB0aGlzIHByb3BlcnR5XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR3ZWVuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQW5pbWF0aW9uKCBlbGVtLCBwcm9wZXJ0aWVzLCBvcHRpb25zICkge1xuICAgICAgICB2YXIgcmVzdWx0LFxuICAgICAgICAgICAgc3RvcHBlZCxcbiAgICAgICAgICAgIGluZGV4ID0gMCxcbiAgICAgICAgICAgIGxlbmd0aCA9IGFuaW1hdGlvblByZWZpbHRlcnMubGVuZ3RoLFxuICAgICAgICAgICAgZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIC8vIGRvbid0IG1hdGNoIGVsZW0gaW4gdGhlIDphbmltYXRlZCBzZWxlY3RvclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aWNrLmVsZW07XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHRpY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAoIHN0b3BwZWQgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRUaW1lID0gZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcbiAgICAgICAgICAgICAgICAgICAgcmVtYWluaW5nID0gTWF0aC5tYXgoIDAsIGFuaW1hdGlvbi5zdGFydFRpbWUgKyBhbmltYXRpb24uZHVyYXRpb24gLSBjdXJyZW50VGltZSApLFxuICAgICAgICAgICAgICAgIC8vIGFyY2hhaWMgY3Jhc2ggYnVnIHdvbid0IGFsbG93IHVzIHRvIHVzZSAxIC0gKCAwLjUgfHwgMCApICgjMTI0OTcpXG4gICAgICAgICAgICAgICAgICAgIHRlbXAgPSByZW1haW5pbmcgLyBhbmltYXRpb24uZHVyYXRpb24gfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudCA9IDEgLSB0ZW1wLFxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IDAsXG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgZm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi50d2VlbnNbIGluZGV4IF0ucnVuKCBwZXJjZW50ICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIHBlcmNlbnQsIHJlbWFpbmluZyBdKTtcblxuICAgICAgICAgICAgICAgIGlmICggcGVyY2VudCA8IDEgJiYgbGVuZ3RoICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVtYWluaW5nO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmVXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiBdICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYW5pbWF0aW9uID0gZGVmZXJyZWQucHJvbWlzZSh7XG4gICAgICAgICAgICAgICAgZWxlbTogZWxlbSxcbiAgICAgICAgICAgICAgICBwcm9wczogalF1ZXJ5LmV4dGVuZCgge30sIHByb3BlcnRpZXMgKSxcbiAgICAgICAgICAgICAgICBvcHRzOiBqUXVlcnkuZXh0ZW5kKCB0cnVlLCB7IHNwZWNpYWxFYXNpbmc6IHt9IH0sIG9wdGlvbnMgKSxcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFByb3BlcnRpZXM6IHByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxPcHRpb25zOiBvcHRpb25zLFxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZTogZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICB0d2VlbnM6IFtdLFxuICAgICAgICAgICAgICAgIGNyZWF0ZVR3ZWVuOiBmdW5jdGlvbiggcHJvcCwgZW5kICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHdlZW4gPSBqUXVlcnkuVHdlZW4oIGVsZW0sIGFuaW1hdGlvbi5vcHRzLCBwcm9wLCBlbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nWyBwcm9wIF0gfHwgYW5pbWF0aW9uLm9wdHMuZWFzaW5nICk7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi50d2VlbnMucHVzaCggdHdlZW4gKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR3ZWVuO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24oIGdvdG9FbmQgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IDAsXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHdlIGFyZSBnb2luZyB0byB0aGUgZW5kLCB3ZSB3YW50IHRvIHJ1biBhbGwgdGhlIHR3ZWVuc1xuICAgICAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2Ugd2Ugc2tpcCB0aGlzIHBhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IGdvdG9FbmQgPyBhbmltYXRpb24udHdlZW5zLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmICggc3RvcHBlZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi50d2VlbnNbIGluZGV4IF0ucnVuKCAxICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyByZXNvbHZlIHdoZW4gd2UgcGxheWVkIHRoZSBsYXN0IGZyYW1lXG4gICAgICAgICAgICAgICAgICAgIC8vIG90aGVyd2lzZSwgcmVqZWN0XG4gICAgICAgICAgICAgICAgICAgIGlmICggZ290b0VuZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmVXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3RXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBwcm9wcyA9IGFuaW1hdGlvbi5wcm9wcztcblxuICAgICAgICBwcm9wRmlsdGVyKCBwcm9wcywgYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZyApO1xuXG4gICAgICAgIGZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkge1xuICAgICAgICAgICAgcmVzdWx0ID0gYW5pbWF0aW9uUHJlZmlsdGVyc1sgaW5kZXggXS5jYWxsKCBhbmltYXRpb24sIGVsZW0sIHByb3BzLCBhbmltYXRpb24ub3B0cyApO1xuICAgICAgICAgICAgaWYgKCByZXN1bHQgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGpRdWVyeS5tYXAoIHByb3BzLCBjcmVhdGVUd2VlbiwgYW5pbWF0aW9uICk7XG5cbiAgICAgICAgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggYW5pbWF0aW9uLm9wdHMuc3RhcnQgKSApIHtcbiAgICAgICAgICAgIGFuaW1hdGlvbi5vcHRzLnN0YXJ0LmNhbGwoIGVsZW0sIGFuaW1hdGlvbiApO1xuICAgICAgICB9XG5cbiAgICAgICAgalF1ZXJ5LmZ4LnRpbWVyKFxuICAgICAgICAgICAgalF1ZXJ5LmV4dGVuZCggdGljaywge1xuICAgICAgICAgICAgICAgIGVsZW06IGVsZW0sXG4gICAgICAgICAgICAgICAgYW5pbTogYW5pbWF0aW9uLFxuICAgICAgICAgICAgICAgIHF1ZXVlOiBhbmltYXRpb24ub3B0cy5xdWV1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBhdHRhY2ggY2FsbGJhY2tzIGZyb20gb3B0aW9uc1xuICAgICAgICByZXR1cm4gYW5pbWF0aW9uLnByb2dyZXNzKCBhbmltYXRpb24ub3B0cy5wcm9ncmVzcyApXG4gICAgICAgICAgICAuZG9uZSggYW5pbWF0aW9uLm9wdHMuZG9uZSwgYW5pbWF0aW9uLm9wdHMuY29tcGxldGUgKVxuICAgICAgICAgICAgLmZhaWwoIGFuaW1hdGlvbi5vcHRzLmZhaWwgKVxuICAgICAgICAgICAgLmFsd2F5cyggYW5pbWF0aW9uLm9wdHMuYWx3YXlzICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHJvcEZpbHRlciggcHJvcHMsIHNwZWNpYWxFYXNpbmcgKSB7XG4gICAgICAgIHZhciBpbmRleCwgbmFtZSwgZWFzaW5nLCB2YWx1ZSwgaG9va3M7XG5cbiAgICAgICAgLy8gY2FtZWxDYXNlLCBzcGVjaWFsRWFzaW5nIGFuZCBleHBhbmQgY3NzSG9vayBwYXNzXG4gICAgICAgIGZvciAoIGluZGV4IGluIHByb3BzICkge1xuICAgICAgICAgICAgbmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIGluZGV4ICk7XG4gICAgICAgICAgICBlYXNpbmcgPSBzcGVjaWFsRWFzaW5nWyBuYW1lIF07XG4gICAgICAgICAgICB2YWx1ZSA9IHByb3BzWyBpbmRleCBdO1xuICAgICAgICAgICAgaWYgKCBqUXVlcnkuaXNBcnJheSggdmFsdWUgKSApIHtcbiAgICAgICAgICAgICAgICBlYXNpbmcgPSB2YWx1ZVsgMSBdO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gcHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgMCBdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIGluZGV4ICE9PSBuYW1lICkge1xuICAgICAgICAgICAgICAgIHByb3BzWyBuYW1lIF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBkZWxldGUgcHJvcHNbIGluZGV4IF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF07XG4gICAgICAgICAgICBpZiAoIGhvb2tzICYmIFwiZXhwYW5kXCIgaW4gaG9va3MgKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBob29rcy5leHBhbmQoIHZhbHVlICk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHByb3BzWyBuYW1lIF07XG5cbiAgICAgICAgICAgICAgICAvLyBub3QgcXVpdGUgJC5leHRlbmQsIHRoaXMgd29udCBvdmVyd3JpdGUga2V5cyBhbHJlYWR5IHByZXNlbnQuXG4gICAgICAgICAgICAgICAgLy8gYWxzbyAtIHJldXNpbmcgJ2luZGV4JyBmcm9tIGFib3ZlIGJlY2F1c2Ugd2UgaGF2ZSB0aGUgY29ycmVjdCBcIm5hbWVcIlxuICAgICAgICAgICAgICAgIGZvciAoIGluZGV4IGluIHZhbHVlICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoICEoIGluZGV4IGluIHByb3BzICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wc1sgaW5kZXggXSA9IHZhbHVlWyBpbmRleCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3BlY2lhbEVhc2luZ1sgaW5kZXggXSA9IGVhc2luZztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3BlY2lhbEVhc2luZ1sgbmFtZSBdID0gZWFzaW5nO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgalF1ZXJ5LkFuaW1hdGlvbiA9IGpRdWVyeS5leHRlbmQoIEFuaW1hdGlvbiwge1xuXG4gICAgICAgIHR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7XG4gICAgICAgICAgICBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBwcm9wcyApICkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gcHJvcHM7XG4gICAgICAgICAgICAgICAgcHJvcHMgPSBbIFwiKlwiIF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb3BzID0gcHJvcHMuc3BsaXQoXCIgXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcHJvcCxcbiAgICAgICAgICAgICAgICBpbmRleCA9IDAsXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG4gICAgICAgICAgICBmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcbiAgICAgICAgICAgICAgICBwcm9wID0gcHJvcHNbIGluZGV4IF07XG4gICAgICAgICAgICAgICAgdHdlZW5lcnNbIHByb3AgXSA9IHR3ZWVuZXJzWyBwcm9wIF0gfHwgW107XG4gICAgICAgICAgICAgICAgdHdlZW5lcnNbIHByb3AgXS51bnNoaWZ0KCBjYWxsYmFjayApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHByZWZpbHRlcjogZnVuY3Rpb24oIGNhbGxiYWNrLCBwcmVwZW5kICkge1xuICAgICAgICAgICAgaWYgKCBwcmVwZW5kICkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvblByZWZpbHRlcnMudW5zaGlmdCggY2FsbGJhY2sgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uUHJlZmlsdGVycy5wdXNoKCBjYWxsYmFjayApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBkZWZhdWx0UHJlZmlsdGVyKCBlbGVtLCBwcm9wcywgb3B0cyApIHtcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgICB2YXIgcHJvcCwgdmFsdWUsIHRvZ2dsZSwgdHdlZW4sIGhvb2tzLCBvbGRmaXJlLFxuICAgICAgICAgICAgYW5pbSA9IHRoaXMsXG4gICAgICAgICAgICBvcmlnID0ge30sXG4gICAgICAgICAgICBzdHlsZSA9IGVsZW0uc3R5bGUsXG4gICAgICAgICAgICBoaWRkZW4gPSBlbGVtLm5vZGVUeXBlICYmIGlzSGlkZGVuKCBlbGVtICksXG4gICAgICAgICAgICBkYXRhU2hvdyA9IGpRdWVyeS5fZGF0YSggZWxlbSwgXCJmeHNob3dcIiApO1xuXG4gICAgICAgIC8vIGhhbmRsZSBxdWV1ZTogZmFsc2UgcHJvbWlzZXNcbiAgICAgICAgaWYgKCAhb3B0cy5xdWV1ZSApIHtcbiAgICAgICAgICAgIGhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCBcImZ4XCIgKTtcbiAgICAgICAgICAgIGlmICggaG9va3MudW5xdWV1ZWQgPT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICBob29rcy51bnF1ZXVlZCA9IDA7XG4gICAgICAgICAgICAgICAgb2xkZmlyZSA9IGhvb2tzLmVtcHR5LmZpcmU7XG4gICAgICAgICAgICAgICAgaG9va3MuZW1wdHkuZmlyZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoICFob29rcy51bnF1ZXVlZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZGZpcmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBob29rcy51bnF1ZXVlZCsrO1xuXG4gICAgICAgICAgICBhbmltLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBkb2luZyB0aGlzIG1ha2VzIHN1cmUgdGhhdCB0aGUgY29tcGxldGUgaGFuZGxlciB3aWxsIGJlIGNhbGxlZFxuICAgICAgICAgICAgICAgIC8vIGJlZm9yZSB0aGlzIGNvbXBsZXRlc1xuICAgICAgICAgICAgICAgIGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBob29rcy51bnF1ZXVlZC0tO1xuICAgICAgICAgICAgICAgICAgICBpZiAoICFqUXVlcnkucXVldWUoIGVsZW0sIFwiZnhcIiApLmxlbmd0aCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvb2tzLmVtcHR5LmZpcmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBoZWlnaHQvd2lkdGggb3ZlcmZsb3cgcGFzc1xuICAgICAgICBpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKCBcImhlaWdodFwiIGluIHByb3BzIHx8IFwid2lkdGhcIiBpbiBwcm9wcyApICkge1xuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgbm90aGluZyBzbmVha3Mgb3V0XG4gICAgICAgICAgICAvLyBSZWNvcmQgYWxsIDMgb3ZlcmZsb3cgYXR0cmlidXRlcyBiZWNhdXNlIElFIGRvZXMgbm90XG4gICAgICAgICAgICAvLyBjaGFuZ2UgdGhlIG92ZXJmbG93IGF0dHJpYnV0ZSB3aGVuIG92ZXJmbG93WCBhbmRcbiAgICAgICAgICAgIC8vIG92ZXJmbG93WSBhcmUgc2V0IHRvIHRoZSBzYW1lIHZhbHVlXG4gICAgICAgICAgICBvcHRzLm92ZXJmbG93ID0gWyBzdHlsZS5vdmVyZmxvdywgc3R5bGUub3ZlcmZsb3dYLCBzdHlsZS5vdmVyZmxvd1kgXTtcblxuICAgICAgICAgICAgLy8gU2V0IGRpc3BsYXkgcHJvcGVydHkgdG8gaW5saW5lLWJsb2NrIGZvciBoZWlnaHQvd2lkdGhcbiAgICAgICAgICAgIC8vIGFuaW1hdGlvbnMgb24gaW5saW5lIGVsZW1lbnRzIHRoYXQgYXJlIGhhdmluZyB3aWR0aC9oZWlnaHQgYW5pbWF0ZWRcbiAgICAgICAgICAgIGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSA9PT0gXCJpbmxpbmVcIiAmJlxuICAgICAgICAgICAgICAgIGpRdWVyeS5jc3MoIGVsZW0sIFwiZmxvYXRcIiApID09PSBcIm5vbmVcIiApIHtcblxuICAgICAgICAgICAgICAgIC8vIGlubGluZS1sZXZlbCBlbGVtZW50cyBhY2NlcHQgaW5saW5lLWJsb2NrO1xuICAgICAgICAgICAgICAgIC8vIGJsb2NrLWxldmVsIGVsZW1lbnRzIG5lZWQgdG8gYmUgaW5saW5lIHdpdGggbGF5b3V0XG4gICAgICAgICAgICAgICAgaWYgKCAhalF1ZXJ5LnN1cHBvcnQuaW5saW5lQmxvY2tOZWVkc0xheW91dCB8fCBjc3NfZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA9PT0gXCJpbmxpbmVcIiApIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS56b29tID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIG9wdHMub3ZlcmZsb3cgKSB7XG4gICAgICAgICAgICBzdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgICBpZiAoICFqUXVlcnkuc3VwcG9ydC5zaHJpbmtXcmFwQmxvY2tzICkge1xuICAgICAgICAgICAgICAgIGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5vdmVyZmxvdyA9IG9wdHMub3ZlcmZsb3dbIDAgXTtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUub3ZlcmZsb3dYID0gb3B0cy5vdmVyZmxvd1sgMSBdO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5vdmVyZmxvd1kgPSBvcHRzLm92ZXJmbG93WyAyIF07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHNob3cvaGlkZSBwYXNzXG4gICAgICAgIGZvciAoIHByb3AgaW4gcHJvcHMgKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHByb3BzWyBwcm9wIF07XG4gICAgICAgICAgICBpZiAoIHJmeHR5cGVzLmV4ZWMoIHZhbHVlICkgKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHByb3BzWyBwcm9wIF07XG4gICAgICAgICAgICAgICAgdG9nZ2xlID0gdG9nZ2xlIHx8IHZhbHVlID09PSBcInRvZ2dsZVwiO1xuICAgICAgICAgICAgICAgIGlmICggdmFsdWUgPT09ICggaGlkZGVuID8gXCJoaWRlXCIgOiBcInNob3dcIiApICkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3JpZ1sgcHJvcCBdID0gZGF0YVNob3cgJiYgZGF0YVNob3dbIHByb3AgXSB8fCBqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggIWpRdWVyeS5pc0VtcHR5T2JqZWN0KCBvcmlnICkgKSB7XG4gICAgICAgICAgICBpZiAoIGRhdGFTaG93ICkge1xuICAgICAgICAgICAgICAgIGlmICggXCJoaWRkZW5cIiBpbiBkYXRhU2hvdyApIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuID0gZGF0YVNob3cuaGlkZGVuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGF0YVNob3cgPSBqUXVlcnkuX2RhdGEoIGVsZW0sIFwiZnhzaG93XCIsIHt9ICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHN0b3JlIHN0YXRlIGlmIGl0cyB0b2dnbGUgLSBlbmFibGVzIC5zdG9wKCkudG9nZ2xlKCkgdG8gXCJyZXZlcnNlXCJcbiAgICAgICAgICAgIGlmICggdG9nZ2xlICkge1xuICAgICAgICAgICAgICAgIGRhdGFTaG93LmhpZGRlbiA9ICFoaWRkZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIGhpZGRlbiApIHtcbiAgICAgICAgICAgICAgICBqUXVlcnkoIGVsZW0gKS5zaG93KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFuaW0uZG9uZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KCBlbGVtICkuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYW5pbS5kb25lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wO1xuICAgICAgICAgICAgICAgIGpRdWVyeS5fcmVtb3ZlRGF0YSggZWxlbSwgXCJmeHNob3dcIiApO1xuICAgICAgICAgICAgICAgIGZvciAoIHByb3AgaW4gb3JpZyApIHtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wLCBvcmlnWyBwcm9wIF0gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvciAoIHByb3AgaW4gb3JpZyApIHtcbiAgICAgICAgICAgICAgICB0d2VlbiA9IGNyZWF0ZVR3ZWVuKCBoaWRkZW4gPyBkYXRhU2hvd1sgcHJvcCBdIDogMCwgcHJvcCwgYW5pbSApO1xuXG4gICAgICAgICAgICAgICAgaWYgKCAhKCBwcm9wIGluIGRhdGFTaG93ICkgKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFTaG93WyBwcm9wIF0gPSB0d2Vlbi5zdGFydDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBoaWRkZW4gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0d2Vlbi5lbmQgPSB0d2Vlbi5zdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR3ZWVuLnN0YXJ0ID0gcHJvcCA9PT0gXCJ3aWR0aFwiIHx8IHByb3AgPT09IFwiaGVpZ2h0XCIgPyAxIDogMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIFR3ZWVuKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUd2Vlbi5wcm90b3R5cGUuaW5pdCggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKTtcbiAgICB9XG4gICAgalF1ZXJ5LlR3ZWVuID0gVHdlZW47XG5cbiAgICBUd2Vlbi5wcm90b3R5cGUgPSB7XG4gICAgICAgIGNvbnN0cnVjdG9yOiBUd2VlbixcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nLCB1bml0ICkge1xuICAgICAgICAgICAgdGhpcy5lbGVtID0gZWxlbTtcbiAgICAgICAgICAgIHRoaXMucHJvcCA9IHByb3A7XG4gICAgICAgICAgICB0aGlzLmVhc2luZyA9IGVhc2luZyB8fCBcInN3aW5nXCI7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICAgICAgdGhpcy5zdGFydCA9IHRoaXMubm93ID0gdGhpcy5jdXIoKTtcbiAgICAgICAgICAgIHRoaXMuZW5kID0gZW5kO1xuICAgICAgICAgICAgdGhpcy51bml0ID0gdW5pdCB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/IFwiXCIgOiBcInB4XCIgKTtcbiAgICAgICAgfSxcbiAgICAgICAgY3VyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cbiAgICAgICAgICAgIHJldHVybiBob29rcyAmJiBob29rcy5nZXQgP1xuICAgICAgICAgICAgICAgIGhvb2tzLmdldCggdGhpcyApIDpcbiAgICAgICAgICAgICAgICBUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KCB0aGlzICk7XG4gICAgICAgIH0sXG4gICAgICAgIHJ1bjogZnVuY3Rpb24oIHBlcmNlbnQgKSB7XG4gICAgICAgICAgICB2YXIgZWFzZWQsXG4gICAgICAgICAgICAgICAgaG9va3MgPSBUd2Vlbi5wcm9wSG9va3NbIHRoaXMucHJvcCBdO1xuXG4gICAgICAgICAgICBpZiAoIHRoaXMub3B0aW9ucy5kdXJhdGlvbiApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcyA9IGVhc2VkID0galF1ZXJ5LmVhc2luZ1sgdGhpcy5lYXNpbmcgXShcbiAgICAgICAgICAgICAgICAgICAgcGVyY2VudCwgdGhpcy5vcHRpb25zLmR1cmF0aW9uICogcGVyY2VudCwgMCwgMSwgdGhpcy5vcHRpb25zLmR1cmF0aW9uXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3MgPSBlYXNlZCA9IHBlcmNlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5vdyA9ICggdGhpcy5lbmQgLSB0aGlzLnN0YXJ0ICkgKiBlYXNlZCArIHRoaXMuc3RhcnQ7XG5cbiAgICAgICAgICAgIGlmICggdGhpcy5vcHRpb25zLnN0ZXAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCggdGhpcy5lbGVtLCB0aGlzLm5vdywgdGhpcyApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIGhvb2tzICYmIGhvb2tzLnNldCApIHtcbiAgICAgICAgICAgICAgICBob29rcy5zZXQoIHRoaXMgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgVHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LnNldCggdGhpcyApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgVHdlZW4ucHJvdG90eXBlLmluaXQucHJvdG90eXBlID0gVHdlZW4ucHJvdG90eXBlO1xuXG4gICAgVHdlZW4ucHJvcEhvb2tzID0ge1xuICAgICAgICBfZGVmYXVsdDoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdDtcblxuICAgICAgICAgICAgICAgIGlmICggdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAgICAgKCF0d2Vlbi5lbGVtLnN0eWxlIHx8IHR3ZWVuLmVsZW0uc3R5bGVbIHR3ZWVuLnByb3AgXSA9PSBudWxsKSApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBwYXNzaW5nIGFuIGVtcHR5IHN0cmluZyBhcyBhIDNyZCBwYXJhbWV0ZXIgdG8gLmNzcyB3aWxsIGF1dG9tYXRpY2FsbHlcbiAgICAgICAgICAgICAgICAvLyBhdHRlbXB0IGEgcGFyc2VGbG9hdCBhbmQgZmFsbGJhY2sgdG8gYSBzdHJpbmcgaWYgdGhlIHBhcnNlIGZhaWxzXG4gICAgICAgICAgICAgICAgLy8gc28sIHNpbXBsZSB2YWx1ZXMgc3VjaCBhcyBcIjEwcHhcIiBhcmUgcGFyc2VkIHRvIEZsb2F0LlxuICAgICAgICAgICAgICAgIC8vIGNvbXBsZXggdmFsdWVzIHN1Y2ggYXMgXCJyb3RhdGUoMXJhZClcIiBhcmUgcmV0dXJuZWQgYXMgaXMuXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0galF1ZXJ5LmNzcyggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgXCJcIiApO1xuICAgICAgICAgICAgICAgIC8vIEVtcHR5IHN0cmluZ3MsIG51bGwsIHVuZGVmaW5lZCBhbmQgXCJhdXRvXCIgYXJlIGNvbnZlcnRlZCB0byAwLlxuICAgICAgICAgICAgICAgIHJldHVybiAhcmVzdWx0IHx8IHJlc3VsdCA9PT0gXCJhdXRvXCIgPyAwIDogcmVzdWx0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuICAgICAgICAgICAgICAgIC8vIHVzZSBzdGVwIGhvb2sgZm9yIGJhY2sgY29tcGF0IC0gdXNlIGNzc0hvb2sgaWYgaXRzIHRoZXJlIC0gdXNlIC5zdHlsZSBpZiBpdHNcbiAgICAgICAgICAgICAgICAvLyBhdmFpbGFibGUgYW5kIHVzZSBwbGFpbiBwcm9wZXJ0aWVzIHdoZXJlIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgIGlmICggalF1ZXJ5LmZ4LnN0ZXBbIHR3ZWVuLnByb3AgXSApIHtcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LmZ4LnN0ZXBbIHR3ZWVuLnByb3AgXSggdHdlZW4gKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCB0d2Vlbi5lbGVtLnN0eWxlICYmICggdHdlZW4uZWxlbS5zdHlsZVsgalF1ZXJ5LmNzc1Byb3BzWyB0d2Vlbi5wcm9wIF0gXSAhPSBudWxsIHx8IGpRdWVyeS5jc3NIb29rc1sgdHdlZW4ucHJvcCBdICkgKSB7XG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgdHdlZW4ubm93ICsgdHdlZW4udW5pdCApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4vLyBTdXBwb3J0OiBJRSA8PTlcbi8vIFBhbmljIGJhc2VkIGFwcHJvYWNoIHRvIHNldHRpbmcgdGhpbmdzIG9uIGRpc2Nvbm5lY3RlZCBub2Rlc1xuXG4gICAgVHdlZW4ucHJvcEhvb2tzLnNjcm9sbFRvcCA9IFR3ZWVuLnByb3BIb29rcy5zY3JvbGxMZWZ0ID0ge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcbiAgICAgICAgICAgIGlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAmJiB0d2Vlbi5lbGVtLnBhcmVudE5vZGUgKSB7XG4gICAgICAgICAgICAgICAgdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGpRdWVyeS5lYWNoKFsgXCJ0b2dnbGVcIiwgXCJzaG93XCIsIFwiaGlkZVwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuICAgICAgICB2YXIgY3NzRm4gPSBqUXVlcnkuZm5bIG5hbWUgXTtcbiAgICAgICAgalF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG4gICAgICAgICAgICByZXR1cm4gc3BlZWQgPT0gbnVsbCB8fCB0eXBlb2Ygc3BlZWQgPT09IFwiYm9vbGVhblwiID9cbiAgICAgICAgICAgICAgICBjc3NGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICkgOlxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZSggZ2VuRngoIG5hbWUsIHRydWUgKSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIGpRdWVyeS5mbi5leHRlbmQoe1xuICAgICAgICBmYWRlVG86IGZ1bmN0aW9uKCBzcGVlZCwgdG8sIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cbiAgICAgICAgICAgIC8vIHNob3cgYW55IGhpZGRlbiBlbGVtZW50cyBhZnRlciBzZXR0aW5nIG9wYWNpdHkgdG8gMFxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKCBpc0hpZGRlbiApLmNzcyggXCJvcGFjaXR5XCIsIDAgKS5zaG93KClcblxuICAgICAgICAgICAgICAgIC8vIGFuaW1hdGUgdG8gdGhlIHZhbHVlIHNwZWNpZmllZFxuICAgICAgICAgICAgICAgIC5lbmQoKS5hbmltYXRlKHsgb3BhY2l0eTogdG8gfSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcbiAgICAgICAgfSxcbiAgICAgICAgYW5pbWF0ZTogZnVuY3Rpb24oIHByb3AsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuICAgICAgICAgICAgdmFyIGVtcHR5ID0galF1ZXJ5LmlzRW1wdHlPYmplY3QoIHByb3AgKSxcbiAgICAgICAgICAgICAgICBvcHRhbGwgPSBqUXVlcnkuc3BlZWQoIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICksXG4gICAgICAgICAgICAgICAgZG9BbmltYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT3BlcmF0ZSBvbiBhIGNvcHkgb2YgcHJvcCBzbyBwZXItcHJvcGVydHkgZWFzaW5nIHdvbid0IGJlIGxvc3RcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFuaW0gPSBBbmltYXRpb24oIHRoaXMsIGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wICksIG9wdGFsbCApO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEVtcHR5IGFuaW1hdGlvbnMsIG9yIGZpbmlzaGluZyByZXNvbHZlcyBpbW1lZGlhdGVseVxuICAgICAgICAgICAgICAgICAgICBpZiAoIGVtcHR5IHx8IGpRdWVyeS5fZGF0YSggdGhpcywgXCJmaW5pc2hcIiApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5pbS5zdG9wKCB0cnVlICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgZG9BbmltYXRpb24uZmluaXNoID0gZG9BbmltYXRpb247XG5cbiAgICAgICAgICAgIHJldHVybiBlbXB0eSB8fCBvcHRhbGwucXVldWUgPT09IGZhbHNlID9cbiAgICAgICAgICAgICAgICB0aGlzLmVhY2goIGRvQW5pbWF0aW9uICkgOlxuICAgICAgICAgICAgICAgIHRoaXMucXVldWUoIG9wdGFsbC5xdWV1ZSwgZG9BbmltYXRpb24gKTtcbiAgICAgICAgfSxcbiAgICAgICAgc3RvcDogZnVuY3Rpb24oIHR5cGUsIGNsZWFyUXVldWUsIGdvdG9FbmQgKSB7XG4gICAgICAgICAgICB2YXIgc3RvcFF1ZXVlID0gZnVuY3Rpb24oIGhvb2tzICkge1xuICAgICAgICAgICAgICAgIHZhciBzdG9wID0gaG9va3Muc3RvcDtcbiAgICAgICAgICAgICAgICBkZWxldGUgaG9va3Muc3RvcDtcbiAgICAgICAgICAgICAgICBzdG9wKCBnb3RvRW5kICk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuICAgICAgICAgICAgICAgIGdvdG9FbmQgPSBjbGVhclF1ZXVlO1xuICAgICAgICAgICAgICAgIGNsZWFyUXVldWUgPSB0eXBlO1xuICAgICAgICAgICAgICAgIHR5cGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIGNsZWFyUXVldWUgJiYgdHlwZSAhPT0gZmFsc2UgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZSggdHlwZSB8fCBcImZ4XCIsIFtdICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlcXVldWUgPSB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHR5cGUgIT0gbnVsbCAmJiB0eXBlICsgXCJxdWV1ZUhvb2tzXCIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWVycyA9IGpRdWVyeS50aW1lcnMsXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBqUXVlcnkuX2RhdGEoIHRoaXMgKTtcblxuICAgICAgICAgICAgICAgIGlmICggaW5kZXggKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoIGluZGV4IGluIGRhdGEgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRhdGFbIGluZGV4IF0gJiYgZGF0YVsgaW5kZXggXS5zdG9wICYmIHJydW4udGVzdCggaW5kZXggKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAoIGluZGV4ID0gdGltZXJzLmxlbmd0aDsgaW5kZXgtLTsgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggdGltZXJzWyBpbmRleCBdLmVsZW0gPT09IHRoaXMgJiYgKHR5cGUgPT0gbnVsbCB8fCB0aW1lcnNbIGluZGV4IF0ucXVldWUgPT09IHR5cGUpICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggZ290b0VuZCApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVxdWV1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIHN0YXJ0IHRoZSBuZXh0IGluIHRoZSBxdWV1ZSBpZiB0aGUgbGFzdCBzdGVwIHdhc24ndCBmb3JjZWRcbiAgICAgICAgICAgICAgICAvLyB0aW1lcnMgY3VycmVudGx5IHdpbGwgY2FsbCB0aGVpciBjb21wbGV0ZSBjYWxsYmFja3MsIHdoaWNoIHdpbGwgZGVxdWV1ZVxuICAgICAgICAgICAgICAgIC8vIGJ1dCBvbmx5IGlmIHRoZXkgd2VyZSBnb3RvRW5kXG4gICAgICAgICAgICAgICAgaWYgKCBkZXF1ZXVlIHx8ICFnb3RvRW5kICkge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBmaW5pc2g6IGZ1bmN0aW9uKCB0eXBlICkge1xuICAgICAgICAgICAgaWYgKCB0eXBlICE9PSBmYWxzZSApIHtcbiAgICAgICAgICAgICAgICB0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGpRdWVyeS5fZGF0YSggdGhpcyApLFxuICAgICAgICAgICAgICAgICAgICBxdWV1ZSA9IGRhdGFbIHR5cGUgKyBcInF1ZXVlXCIgXSxcbiAgICAgICAgICAgICAgICAgICAgaG9va3MgPSBkYXRhWyB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgXSxcbiAgICAgICAgICAgICAgICAgICAgdGltZXJzID0galF1ZXJ5LnRpbWVycyxcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gcXVldWUgPyBxdWV1ZS5sZW5ndGggOiAwO1xuXG4gICAgICAgICAgICAgICAgLy8gZW5hYmxlIGZpbmlzaGluZyBmbGFnIG9uIHByaXZhdGUgZGF0YVxuICAgICAgICAgICAgICAgIGRhdGEuZmluaXNoID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIC8vIGVtcHR5IHRoZSBxdWV1ZSBmaXJzdFxuICAgICAgICAgICAgICAgIGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgW10gKTtcblxuICAgICAgICAgICAgICAgIGlmICggaG9va3MgJiYgaG9va3Muc3RvcCApIHtcbiAgICAgICAgICAgICAgICAgICAgaG9va3Muc3RvcC5jYWxsKCB0aGlzLCB0cnVlICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gbG9vayBmb3IgYW55IGFjdGl2ZSBhbmltYXRpb25zLCBhbmQgZmluaXNoIHRoZW1cbiAgICAgICAgICAgICAgICBmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmIHRpbWVyc1sgaW5kZXggXS5xdWV1ZSA9PT0gdHlwZSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyc1sgaW5kZXggXS5hbmltLnN0b3AoIHRydWUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBsb29rIGZvciBhbnkgYW5pbWF0aW9ucyBpbiB0aGUgb2xkIHF1ZXVlIGFuZCBmaW5pc2ggdGhlbVxuICAgICAgICAgICAgICAgIGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggcXVldWVbIGluZGV4IF0gJiYgcXVldWVbIGluZGV4IF0uZmluaXNoICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWVbIGluZGV4IF0uZmluaXNoLmNhbGwoIHRoaXMgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIHR1cm4gb2ZmIGZpbmlzaGluZyBmbGFnXG4gICAgICAgICAgICAgICAgZGVsZXRlIGRhdGEuZmluaXNoO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuLy8gR2VuZXJhdGUgcGFyYW1ldGVycyB0byBjcmVhdGUgYSBzdGFuZGFyZCBhbmltYXRpb25cbiAgICBmdW5jdGlvbiBnZW5GeCggdHlwZSwgaW5jbHVkZVdpZHRoICkge1xuICAgICAgICB2YXIgd2hpY2gsXG4gICAgICAgICAgICBhdHRycyA9IHsgaGVpZ2h0OiB0eXBlIH0sXG4gICAgICAgICAgICBpID0gMDtcblxuICAgICAgICAvLyBpZiB3ZSBpbmNsdWRlIHdpZHRoLCBzdGVwIHZhbHVlIGlzIDEgdG8gZG8gYWxsIGNzc0V4cGFuZCB2YWx1ZXMsXG4gICAgICAgIC8vIGlmIHdlIGRvbid0IGluY2x1ZGUgd2lkdGgsIHN0ZXAgdmFsdWUgaXMgMiB0byBza2lwIG92ZXIgTGVmdCBhbmQgUmlnaHRcbiAgICAgICAgaW5jbHVkZVdpZHRoID0gaW5jbHVkZVdpZHRoPyAxIDogMDtcbiAgICAgICAgZm9yKCA7IGkgPCA0IDsgaSArPSAyIC0gaW5jbHVkZVdpZHRoICkge1xuICAgICAgICAgICAgd2hpY2ggPSBjc3NFeHBhbmRbIGkgXTtcbiAgICAgICAgICAgIGF0dHJzWyBcIm1hcmdpblwiICsgd2hpY2ggXSA9IGF0dHJzWyBcInBhZGRpbmdcIiArIHdoaWNoIF0gPSB0eXBlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCBpbmNsdWRlV2lkdGggKSB7XG4gICAgICAgICAgICBhdHRycy5vcGFjaXR5ID0gYXR0cnMud2lkdGggPSB0eXBlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGF0dHJzO1xuICAgIH1cblxuLy8gR2VuZXJhdGUgc2hvcnRjdXRzIGZvciBjdXN0b20gYW5pbWF0aW9uc1xuICAgIGpRdWVyeS5lYWNoKHtcbiAgICAgICAgc2xpZGVEb3duOiBnZW5GeChcInNob3dcIiksXG4gICAgICAgIHNsaWRlVXA6IGdlbkZ4KFwiaGlkZVwiKSxcbiAgICAgICAgc2xpZGVUb2dnbGU6IGdlbkZ4KFwidG9nZ2xlXCIpLFxuICAgICAgICBmYWRlSW46IHsgb3BhY2l0eTogXCJzaG93XCIgfSxcbiAgICAgICAgZmFkZU91dDogeyBvcGFjaXR5OiBcImhpZGVcIiB9LFxuICAgICAgICBmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6IFwidG9nZ2xlXCIgfVxuICAgIH0sIGZ1bmN0aW9uKCBuYW1lLCBwcm9wcyApIHtcbiAgICAgICAgalF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hbmltYXRlKCBwcm9wcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIGpRdWVyeS5zcGVlZCA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBmbiApIHtcbiAgICAgICAgdmFyIG9wdCA9IHNwZWVkICYmIHR5cGVvZiBzcGVlZCA9PT0gXCJvYmplY3RcIiA/IGpRdWVyeS5leHRlbmQoIHt9LCBzcGVlZCApIDoge1xuICAgICAgICAgICAgY29tcGxldGU6IGZuIHx8ICFmbiAmJiBlYXNpbmcgfHxcbiAgICAgICAgICAgIGpRdWVyeS5pc0Z1bmN0aW9uKCBzcGVlZCApICYmIHNwZWVkLFxuICAgICAgICAgICAgZHVyYXRpb246IHNwZWVkLFxuICAgICAgICAgICAgZWFzaW5nOiBmbiAmJiBlYXNpbmcgfHwgZWFzaW5nICYmICFqUXVlcnkuaXNGdW5jdGlvbiggZWFzaW5nICkgJiYgZWFzaW5nXG4gICAgICAgIH07XG5cbiAgICAgICAgb3B0LmR1cmF0aW9uID0galF1ZXJ5LmZ4Lm9mZiA/IDAgOiB0eXBlb2Ygb3B0LmR1cmF0aW9uID09PSBcIm51bWJlclwiID8gb3B0LmR1cmF0aW9uIDpcbiAgICAgICAgICAgIG9wdC5kdXJhdGlvbiBpbiBqUXVlcnkuZnguc3BlZWRzID8galF1ZXJ5LmZ4LnNwZWVkc1sgb3B0LmR1cmF0aW9uIF0gOiBqUXVlcnkuZnguc3BlZWRzLl9kZWZhdWx0O1xuXG4gICAgICAgIC8vIG5vcm1hbGl6ZSBvcHQucXVldWUgLSB0cnVlL3VuZGVmaW5lZC9udWxsIC0+IFwiZnhcIlxuICAgICAgICBpZiAoIG9wdC5xdWV1ZSA9PSBudWxsIHx8IG9wdC5xdWV1ZSA9PT0gdHJ1ZSApIHtcbiAgICAgICAgICAgIG9wdC5xdWV1ZSA9IFwiZnhcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFF1ZXVlaW5nXG4gICAgICAgIG9wdC5vbGQgPSBvcHQuY29tcGxldGU7XG5cbiAgICAgICAgb3B0LmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBvcHQub2xkICkgKSB7XG4gICAgICAgICAgICAgICAgb3B0Lm9sZC5jYWxsKCB0aGlzICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggb3B0LnF1ZXVlICkge1xuICAgICAgICAgICAgICAgIGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCBvcHQucXVldWUgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gb3B0O1xuICAgIH07XG5cbiAgICBqUXVlcnkuZWFzaW5nID0ge1xuICAgICAgICBsaW5lYXI6IGZ1bmN0aW9uKCBwICkge1xuICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgIH0sXG4gICAgICAgIHN3aW5nOiBmdW5jdGlvbiggcCApIHtcbiAgICAgICAgICAgIHJldHVybiAwLjUgLSBNYXRoLmNvcyggcCpNYXRoLlBJICkgLyAyO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGpRdWVyeS50aW1lcnMgPSBbXTtcbiAgICBqUXVlcnkuZnggPSBUd2Vlbi5wcm90b3R5cGUuaW5pdDtcbiAgICBqUXVlcnkuZngudGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdGltZXIsXG4gICAgICAgICAgICB0aW1lcnMgPSBqUXVlcnkudGltZXJzLFxuICAgICAgICAgICAgaSA9IDA7XG5cbiAgICAgICAgZnhOb3cgPSBqUXVlcnkubm93KCk7XG5cbiAgICAgICAgZm9yICggOyBpIDwgdGltZXJzLmxlbmd0aDsgaSsrICkge1xuICAgICAgICAgICAgdGltZXIgPSB0aW1lcnNbIGkgXTtcbiAgICAgICAgICAgIC8vIENoZWNrcyB0aGUgdGltZXIgaGFzIG5vdCBhbHJlYWR5IGJlZW4gcmVtb3ZlZFxuICAgICAgICAgICAgaWYgKCAhdGltZXIoKSAmJiB0aW1lcnNbIGkgXSA9PT0gdGltZXIgKSB7XG4gICAgICAgICAgICAgICAgdGltZXJzLnNwbGljZSggaS0tLCAxICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoICF0aW1lcnMubGVuZ3RoICkge1xuICAgICAgICAgICAgalF1ZXJ5LmZ4LnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgICBmeE5vdyA9IHVuZGVmaW5lZDtcbiAgICB9O1xuXG4gICAgalF1ZXJ5LmZ4LnRpbWVyID0gZnVuY3Rpb24oIHRpbWVyICkge1xuICAgICAgICBpZiAoIHRpbWVyKCkgJiYgalF1ZXJ5LnRpbWVycy5wdXNoKCB0aW1lciApICkge1xuICAgICAgICAgICAgalF1ZXJ5LmZ4LnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgalF1ZXJ5LmZ4LmludGVydmFsID0gMTM7XG5cbiAgICBqUXVlcnkuZnguc3RhcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCAhdGltZXJJZCApIHtcbiAgICAgICAgICAgIHRpbWVySWQgPSBzZXRJbnRlcnZhbCggalF1ZXJ5LmZ4LnRpY2ssIGpRdWVyeS5meC5pbnRlcnZhbCApO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGpRdWVyeS5meC5zdG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoIHRpbWVySWQgKTtcbiAgICAgICAgdGltZXJJZCA9IG51bGw7XG4gICAgfTtcblxuICAgIGpRdWVyeS5meC5zcGVlZHMgPSB7XG4gICAgICAgIHNsb3c6IDYwMCxcbiAgICAgICAgZmFzdDogMjAwLFxuICAgICAgICAvLyBEZWZhdWx0IHNwZWVkXG4gICAgICAgIF9kZWZhdWx0OiA0MDBcbiAgICB9O1xuXG4vLyBCYWNrIENvbXBhdCA8MS44IGV4dGVuc2lvbiBwb2ludFxuICAgIGpRdWVyeS5meC5zdGVwID0ge307XG5cbiAgICBpZiAoIGpRdWVyeS5leHByICYmIGpRdWVyeS5leHByLmZpbHRlcnMgKSB7XG4gICAgICAgIGpRdWVyeS5leHByLmZpbHRlcnMuYW5pbWF0ZWQgPSBmdW5jdGlvbiggZWxlbSApIHtcbiAgICAgICAgICAgIHJldHVybiBqUXVlcnkuZ3JlcChqUXVlcnkudGltZXJzLCBmdW5jdGlvbiggZm4gKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0gPT09IGZuLmVsZW07XG4gICAgICAgICAgICB9KS5sZW5ndGg7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGpRdWVyeS5mbi5vZmZzZXQgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcbiAgICAgICAgaWYgKCBhcmd1bWVudHMubGVuZ3RoICkge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgdGhpcyA6XG4gICAgICAgICAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKCBpICkge1xuICAgICAgICAgICAgICAgICAgICBqUXVlcnkub2Zmc2V0LnNldE9mZnNldCggdGhpcywgb3B0aW9ucywgaSApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRvY0VsZW0sIHdpbixcbiAgICAgICAgICAgIGJveCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH0sXG4gICAgICAgICAgICBlbGVtID0gdGhpc1sgMCBdLFxuICAgICAgICAgICAgZG9jID0gZWxlbSAmJiBlbGVtLm93bmVyRG9jdW1lbnQ7XG5cbiAgICAgICAgaWYgKCAhZG9jICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIGl0J3Mgbm90IGEgZGlzY29ubmVjdGVkIERPTSBub2RlXG4gICAgICAgIGlmICggIWpRdWVyeS5jb250YWlucyggZG9jRWxlbSwgZWxlbSApICkge1xuICAgICAgICAgICAgcmV0dXJuIGJveDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgZ0JDUiwganVzdCB1c2UgMCwwIHJhdGhlciB0aGFuIGVycm9yXG4gICAgICAgIC8vIEJsYWNrQmVycnkgNSwgaU9TIDMgKG9yaWdpbmFsIGlQaG9uZSlcbiAgICAgICAgaWYgKCB0eXBlb2YgZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QgIT09IGNvcmVfc3RydW5kZWZpbmVkICkge1xuICAgICAgICAgICAgYm94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgfVxuICAgICAgICB3aW4gPSBnZXRXaW5kb3coIGRvYyApO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9wOiBib3gudG9wICArICggd2luLnBhZ2VZT2Zmc2V0IHx8IGRvY0VsZW0uc2Nyb2xsVG9wICkgIC0gKCBkb2NFbGVtLmNsaWVudFRvcCAgfHwgMCApLFxuICAgICAgICAgICAgbGVmdDogYm94LmxlZnQgKyAoIHdpbi5wYWdlWE9mZnNldCB8fCBkb2NFbGVtLnNjcm9sbExlZnQgKSAtICggZG9jRWxlbS5jbGllbnRMZWZ0IHx8IDAgKVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBqUXVlcnkub2Zmc2V0ID0ge1xuXG4gICAgICAgIHNldE9mZnNldDogZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIGkgKSB7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBvc2l0aW9uXCIgKTtcblxuICAgICAgICAgICAgLy8gc2V0IHBvc2l0aW9uIGZpcnN0LCBpbi1jYXNlIHRvcC9sZWZ0IGFyZSBzZXQgZXZlbiBvbiBzdGF0aWMgZWxlbVxuICAgICAgICAgICAgaWYgKCBwb3NpdGlvbiA9PT0gXCJzdGF0aWNcIiApIHtcbiAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY3VyRWxlbSA9IGpRdWVyeSggZWxlbSApLFxuICAgICAgICAgICAgICAgIGN1ck9mZnNldCA9IGN1ckVsZW0ub2Zmc2V0KCksXG4gICAgICAgICAgICAgICAgY3VyQ1NTVG9wID0galF1ZXJ5LmNzcyggZWxlbSwgXCJ0b3BcIiApLFxuICAgICAgICAgICAgICAgIGN1ckNTU0xlZnQgPSBqUXVlcnkuY3NzKCBlbGVtLCBcImxlZnRcIiApLFxuICAgICAgICAgICAgICAgIGNhbGN1bGF0ZVBvc2l0aW9uID0gKCBwb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiIHx8IHBvc2l0aW9uID09PSBcImZpeGVkXCIgKSAmJiBqUXVlcnkuaW5BcnJheShcImF1dG9cIiwgW2N1ckNTU1RvcCwgY3VyQ1NTTGVmdF0pID4gLTEsXG4gICAgICAgICAgICAgICAgcHJvcHMgPSB7fSwgY3VyUG9zaXRpb24gPSB7fSwgY3VyVG9wLCBjdXJMZWZ0O1xuXG4gICAgICAgICAgICAvLyBuZWVkIHRvIGJlIGFibGUgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIGlmIGVpdGhlciB0b3Agb3IgbGVmdCBpcyBhdXRvIGFuZCBwb3NpdGlvbiBpcyBlaXRoZXIgYWJzb2x1dGUgb3IgZml4ZWRcbiAgICAgICAgICAgIGlmICggY2FsY3VsYXRlUG9zaXRpb24gKSB7XG4gICAgICAgICAgICAgICAgY3VyUG9zaXRpb24gPSBjdXJFbGVtLnBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgY3VyVG9wID0gY3VyUG9zaXRpb24udG9wO1xuICAgICAgICAgICAgICAgIGN1ckxlZnQgPSBjdXJQb3NpdGlvbi5sZWZ0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXJUb3AgPSBwYXJzZUZsb2F0KCBjdXJDU1NUb3AgKSB8fCAwO1xuICAgICAgICAgICAgICAgIGN1ckxlZnQgPSBwYXJzZUZsb2F0KCBjdXJDU1NMZWZ0ICkgfHwgMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0aW9ucyApICkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zLmNhbGwoIGVsZW0sIGksIGN1ck9mZnNldCApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIG9wdGlvbnMudG9wICE9IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgcHJvcHMudG9wID0gKCBvcHRpb25zLnRvcCAtIGN1ck9mZnNldC50b3AgKSArIGN1clRvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggb3B0aW9ucy5sZWZ0ICE9IG51bGwgKSB7XG4gICAgICAgICAgICAgICAgcHJvcHMubGVmdCA9ICggb3B0aW9ucy5sZWZ0IC0gY3VyT2Zmc2V0LmxlZnQgKSArIGN1ckxlZnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggXCJ1c2luZ1wiIGluIG9wdGlvbnMgKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy51c2luZy5jYWxsKCBlbGVtLCBwcm9wcyApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXJFbGVtLmNzcyggcHJvcHMgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIGpRdWVyeS5mbi5leHRlbmQoe1xuXG4gICAgICAgIHBvc2l0aW9uOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICggIXRoaXNbIDAgXSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBvZmZzZXRQYXJlbnQsIG9mZnNldCxcbiAgICAgICAgICAgICAgICBwYXJlbnRPZmZzZXQgPSB7IHRvcDogMCwgbGVmdDogMCB9LFxuICAgICAgICAgICAgICAgIGVsZW0gPSB0aGlzWyAwIF07XG5cbiAgICAgICAgICAgIC8vIGZpeGVkIGVsZW1lbnRzIGFyZSBvZmZzZXQgZnJvbSB3aW5kb3cgKHBhcmVudE9mZnNldCA9IHt0b3A6MCwgbGVmdDogMH0sIGJlY2F1c2UgaXQgaXMgaXQncyBvbmx5IG9mZnNldCBwYXJlbnRcbiAgICAgICAgICAgIGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICkgPT09IFwiZml4ZWRcIiApIHtcbiAgICAgICAgICAgICAgICAvLyB3ZSBhc3N1bWUgdGhhdCBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgYXZhaWxhYmxlIHdoZW4gY29tcHV0ZWQgcG9zaXRpb24gaXMgZml4ZWRcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBHZXQgKnJlYWwqIG9mZnNldFBhcmVudFxuICAgICAgICAgICAgICAgIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50KCk7XG5cbiAgICAgICAgICAgICAgICAvLyBHZXQgY29ycmVjdCBvZmZzZXRzXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gdGhpcy5vZmZzZXQoKTtcbiAgICAgICAgICAgICAgICBpZiAoICFqUXVlcnkubm9kZU5hbWUoIG9mZnNldFBhcmVudFsgMCBdLCBcImh0bWxcIiApICkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRPZmZzZXQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQWRkIG9mZnNldFBhcmVudCBib3JkZXJzXG4gICAgICAgICAgICAgICAgcGFyZW50T2Zmc2V0LnRvcCAgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50WyAwIF0sIFwiYm9yZGVyVG9wV2lkdGhcIiwgdHJ1ZSApO1xuICAgICAgICAgICAgICAgIHBhcmVudE9mZnNldC5sZWZ0ICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCBcImJvcmRlckxlZnRXaWR0aFwiLCB0cnVlICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFN1YnRyYWN0IHBhcmVudCBvZmZzZXRzIGFuZCBlbGVtZW50IG1hcmdpbnNcbiAgICAgICAgICAgIC8vIG5vdGU6IHdoZW4gYW4gZWxlbWVudCBoYXMgbWFyZ2luOiBhdXRvIHRoZSBvZmZzZXRMZWZ0IGFuZCBtYXJnaW5MZWZ0XG4gICAgICAgICAgICAvLyBhcmUgdGhlIHNhbWUgaW4gU2FmYXJpIGNhdXNpbmcgb2Zmc2V0LmxlZnQgdG8gaW5jb3JyZWN0bHkgYmUgMFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b3A6ICBvZmZzZXQudG9wICAtIHBhcmVudE9mZnNldC50b3AgLSBqUXVlcnkuY3NzKCBlbGVtLCBcIm1hcmdpblRvcFwiLCB0cnVlICksXG4gICAgICAgICAgICAgICAgbGVmdDogb2Zmc2V0LmxlZnQgLSBwYXJlbnRPZmZzZXQubGVmdCAtIGpRdWVyeS5jc3MoIGVsZW0sIFwibWFyZ2luTGVmdFwiLCB0cnVlKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcblxuICAgICAgICBvZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBvZmZzZXRQYXJlbnQgPSB0aGlzLm9mZnNldFBhcmVudCB8fCBkb2NFbGVtO1xuICAgICAgICAgICAgICAgIHdoaWxlICggb2Zmc2V0UGFyZW50ICYmICggIWpRdWVyeS5ub2RlTmFtZSggb2Zmc2V0UGFyZW50LCBcImh0bWxcIiApICYmIGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJwb3NpdGlvblwiKSA9PT0gXCJzdGF0aWNcIiApICkge1xuICAgICAgICAgICAgICAgICAgICBvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0UGFyZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb2Zmc2V0UGFyZW50IHx8IGRvY0VsZW07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5cbi8vIENyZWF0ZSBzY3JvbGxMZWZ0IGFuZCBzY3JvbGxUb3AgbWV0aG9kc1xuICAgIGpRdWVyeS5lYWNoKCB7c2Nyb2xsTGVmdDogXCJwYWdlWE9mZnNldFwiLCBzY3JvbGxUb3A6IFwicGFnZVlPZmZzZXRcIn0sIGZ1bmN0aW9uKCBtZXRob2QsIHByb3AgKSB7XG4gICAgICAgIHZhciB0b3AgPSAvWS8udGVzdCggcHJvcCApO1xuXG4gICAgICAgIGpRdWVyeS5mblsgbWV0aG9kIF0gPSBmdW5jdGlvbiggdmFsICkge1xuICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5hY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBtZXRob2QsIHZhbCApIHtcbiAgICAgICAgICAgICAgICB2YXIgd2luID0gZ2V0V2luZG93KCBlbGVtICk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2luID8gKHByb3AgaW4gd2luKSA/IHdpblsgcHJvcCBdIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbi5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbIG1ldGhvZCBdIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1bIG1ldGhvZCBdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICggd2luICkge1xuICAgICAgICAgICAgICAgICAgICB3aW4uc2Nyb2xsVG8oXG4gICAgICAgICAgICAgICAgICAgICAgICAhdG9wID8gdmFsIDogalF1ZXJ5KCB3aW4gKS5zY3JvbGxMZWZ0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3AgPyB2YWwgOiBqUXVlcnkoIHdpbiApLnNjcm9sbFRvcCgpXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlbGVtWyBtZXRob2QgXSA9IHZhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBtZXRob2QsIHZhbCwgYXJndW1lbnRzLmxlbmd0aCwgbnVsbCApO1xuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gZ2V0V2luZG93KCBlbGVtICkge1xuICAgICAgICByZXR1cm4galF1ZXJ5LmlzV2luZG93KCBlbGVtICkgP1xuICAgICAgICAgICAgZWxlbSA6XG4gICAgICAgICAgICBlbGVtLm5vZGVUeXBlID09PSA5ID9cbiAgICAgICAgICAgIGVsZW0uZGVmYXVsdFZpZXcgfHwgZWxlbS5wYXJlbnRXaW5kb3cgOlxuICAgICAgICAgICAgICAgIGZhbHNlO1xuICAgIH1cbi8vIENyZWF0ZSBpbm5lckhlaWdodCwgaW5uZXJXaWR0aCwgaGVpZ2h0LCB3aWR0aCwgb3V0ZXJIZWlnaHQgYW5kIG91dGVyV2lkdGggbWV0aG9kc1xuICAgIGpRdWVyeS5lYWNoKCB7IEhlaWdodDogXCJoZWlnaHRcIiwgV2lkdGg6IFwid2lkdGhcIiB9LCBmdW5jdGlvbiggbmFtZSwgdHlwZSApIHtcbiAgICAgICAgalF1ZXJ5LmVhY2goIHsgcGFkZGluZzogXCJpbm5lclwiICsgbmFtZSwgY29udGVudDogdHlwZSwgXCJcIjogXCJvdXRlclwiICsgbmFtZSB9LCBmdW5jdGlvbiggZGVmYXVsdEV4dHJhLCBmdW5jTmFtZSApIHtcbiAgICAgICAgICAgIC8vIG1hcmdpbiBpcyBvbmx5IGZvciBvdXRlckhlaWdodCwgb3V0ZXJXaWR0aFxuICAgICAgICAgICAgalF1ZXJ5LmZuWyBmdW5jTmFtZSBdID0gZnVuY3Rpb24oIG1hcmdpbiwgdmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoYWluYWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggJiYgKCBkZWZhdWx0RXh0cmEgfHwgdHlwZW9mIG1hcmdpbiAhPT0gXCJib29sZWFuXCIgKSxcbiAgICAgICAgICAgICAgICAgICAgZXh0cmEgPSBkZWZhdWx0RXh0cmEgfHwgKCBtYXJnaW4gPT09IHRydWUgfHwgdmFsdWUgPT09IHRydWUgPyBcIm1hcmdpblwiIDogXCJib3JkZXJcIiApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5hY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCB2YWx1ZSApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRvYztcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIGpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXMgb2YgNS84LzIwMTIgdGhpcyB3aWxsIHlpZWxkIGluY29ycmVjdCByZXN1bHRzIGZvciBNb2JpbGUgU2FmYXJpLCBidXQgdGhlcmVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzbid0IGEgd2hvbGUgbG90IHdlIGNhbiBkby4gU2VlIHB1bGwgcmVxdWVzdCBhdCB0aGlzIFVSTCBmb3IgZGlzY3Vzc2lvbjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L3B1bGwvNzY0XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbIFwiY2xpZW50XCIgKyBuYW1lIF07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgZG9jdW1lbnQgd2lkdGggb3IgaGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIGlmICggZWxlbS5ub2RlVHlwZSA9PT0gOSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYyA9IGVsZW0uZG9jdW1lbnRFbGVtZW50O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFaXRoZXIgc2Nyb2xsW1dpZHRoL0hlaWdodF0gb3Igb2Zmc2V0W1dpZHRoL0hlaWdodF0gb3IgY2xpZW50W1dpZHRoL0hlaWdodF0sIHdoaWNoZXZlciBpcyBncmVhdGVzdFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdW5mb3J0dW5hdGVseSwgdGhpcyBjYXVzZXMgYnVnICMzODM4IGluIElFNi84IG9ubHksIGJ1dCB0aGVyZSBpcyBjdXJyZW50bHkgbm8gZ29vZCwgc21hbGwgd2F5IHRvIGZpeCBpdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLm1heChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmJvZHlbIFwic2Nyb2xsXCIgKyBuYW1lIF0sIGRvY1sgXCJzY3JvbGxcIiArIG5hbWUgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmJvZHlbIFwib2Zmc2V0XCIgKyBuYW1lIF0sIGRvY1sgXCJvZmZzZXRcIiArIG5hbWUgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2NbIFwiY2xpZW50XCIgKyBuYW1lIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50LCByZXF1ZXN0aW5nIGJ1dCBub3QgZm9yY2luZyBwYXJzZUZsb2F0XG4gICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkuY3NzKCBlbGVtLCB0eXBlLCBleHRyYSApIDpcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LnN0eWxlKCBlbGVtLCB0eXBlLCB2YWx1ZSwgZXh0cmEgKTtcbiAgICAgICAgICAgICAgICB9LCB0eXBlLCBjaGFpbmFibGUgPyBtYXJnaW4gOiB1bmRlZmluZWQsIGNoYWluYWJsZSwgbnVsbCApO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4vLyBMaW1pdCBzY29wZSBwb2xsdXRpb24gZnJvbSBhbnkgZGVwcmVjYXRlZCBBUElcbi8vIChmdW5jdGlvbigpIHtcblxuLy8gVGhlIG51bWJlciBvZiBlbGVtZW50cyBjb250YWluZWQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXRcbiAgICBqUXVlcnkuZm4uc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZW5ndGg7XG4gICAgfTtcblxuICAgIGpRdWVyeS5mbi5hbmRTZWxmID0galF1ZXJ5LmZuLmFkZEJhY2s7XG5cbi8vIH0pKCk7XG4gICAgaWYgKCB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIG1vZHVsZSAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIgKSB7XG4gICAgICAgIC8vIEV4cG9zZSBqUXVlcnkgYXMgbW9kdWxlLmV4cG9ydHMgaW4gbG9hZGVycyB0aGF0IGltcGxlbWVudCB0aGUgTm9kZVxuICAgICAgICAvLyBtb2R1bGUgcGF0dGVybiAoaW5jbHVkaW5nIGJyb3dzZXJpZnkpLiBEbyBub3QgY3JlYXRlIHRoZSBnbG9iYWwsIHNpbmNlXG4gICAgICAgIC8vIHRoZSB1c2VyIHdpbGwgYmUgc3RvcmluZyBpdCB0aGVtc2VsdmVzIGxvY2FsbHksIGFuZCBnbG9iYWxzIGFyZSBmcm93bmVkXG4gICAgICAgIC8vIHVwb24gaW4gdGhlIE5vZGUgbW9kdWxlIHdvcmxkLlxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGpRdWVyeTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBPdGhlcndpc2UgZXhwb3NlIGpRdWVyeSB0byB0aGUgZ2xvYmFsIG9iamVjdCBhcyB1c3VhbFxuICAgICAgICB3aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSBqUXVlcnk7XG5cbiAgICAgICAgLy8gUmVnaXN0ZXIgYXMgYSBuYW1lZCBBTUQgbW9kdWxlLCBzaW5jZSBqUXVlcnkgY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoIG90aGVyXG4gICAgICAgIC8vIGZpbGVzIHRoYXQgbWF5IHVzZSBkZWZpbmUsIGJ1dCBub3QgdmlhIGEgcHJvcGVyIGNvbmNhdGVuYXRpb24gc2NyaXB0IHRoYXRcbiAgICAgICAgLy8gdW5kZXJzdGFuZHMgYW5vbnltb3VzIEFNRCBtb2R1bGVzLiBBIG5hbWVkIEFNRCBpcyBzYWZlc3QgYW5kIG1vc3Qgcm9idXN0XG4gICAgICAgIC8vIHdheSB0byByZWdpc3Rlci4gTG93ZXJjYXNlIGpxdWVyeSBpcyB1c2VkIGJlY2F1c2UgQU1EIG1vZHVsZSBuYW1lcyBhcmVcbiAgICAgICAgLy8gZGVyaXZlZCBmcm9tIGZpbGUgbmFtZXMsIGFuZCBqUXVlcnkgaXMgbm9ybWFsbHkgZGVsaXZlcmVkIGluIGEgbG93ZXJjYXNlXG4gICAgICAgIC8vIGZpbGUgbmFtZS4gRG8gdGhpcyBhZnRlciBjcmVhdGluZyB0aGUgZ2xvYmFsIHNvIHRoYXQgaWYgYW4gQU1EIG1vZHVsZSB3YW50c1xuICAgICAgICAvLyB0byBjYWxsIG5vQ29uZmxpY3QgdG8gaGlkZSB0aGlzIHZlcnNpb24gb2YgalF1ZXJ5LCBpdCB3aWxsIHdvcmsuXG4gICAgICAgIGlmICggdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgKSB7XG4gICAgICAgICAgICBkZWZpbmUoIFwianF1ZXJ5XCIsIFtdLCBmdW5jdGlvbiAoKSB7IHJldHVybiBqUXVlcnk7IH0gKTtcbiAgICAgICAgfVxuICAgIH1cblxufSkoIHdpbmRvdyApO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL21haW4vanF1ZXJ5L2xpYi9qcXVlcnktMS4xMC4yLm1pbi5qc1xuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xyXG5cdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xyXG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xyXG5cdH1cclxuXHRyZXR1cm4gbW9kdWxlO1xyXG59XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL21vZHVsZS5qc1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiEgalF1ZXJ5IFVJIC0gdjEuMTAuMyAtIDIwMTMtMTEtMThcbiogaHR0cDovL2pxdWVyeXVpLmNvbVxuKiBJbmNsdWRlczoganF1ZXJ5LnVpLmNvcmUuanMsIGpxdWVyeS51aS53aWRnZXQuanMsIGpxdWVyeS51aS5tb3VzZS5qcywganF1ZXJ5LnVpLnBvc2l0aW9uLmpzLCBqcXVlcnkudWkuZHJhZ2dhYmxlLmpzLCBqcXVlcnkudWkucmVzaXphYmxlLmpzLCBqcXVlcnkudWkuYWNjb3JkaW9uLmpzLCBqcXVlcnkudWkuYXV0b2NvbXBsZXRlLmpzLCBqcXVlcnkudWkuYnV0dG9uLmpzLCBqcXVlcnkudWkuZGF0ZXBpY2tlci5qcywganF1ZXJ5LnVpLmRpYWxvZy5qcywganF1ZXJ5LnVpLm1lbnUuanMsIGpxdWVyeS51aS50YWJzLmpzXG4qIENvcHlyaWdodCAyMDEzIGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnM7IExpY2Vuc2VkIE1JVCAqL1xuXG4oZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBpKHQsaSl7dmFyIHMsbixyLG89dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiYXJlYVwiPT09bz8ocz10LnBhcmVudE5vZGUsbj1zLm5hbWUsdC5ocmVmJiZuJiZcIm1hcFwiPT09cy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPyhyPWUoXCJpbWdbdXNlbWFwPSNcIituK1wiXVwiKVswXSwhIXImJmEocikpOiExKTooL2lucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0Ly50ZXN0KG8pPyF0LmRpc2FibGVkOlwiYVwiPT09bz90LmhyZWZ8fGk6aSkmJmEodCl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gZS5leHByLmZpbHRlcnMudmlzaWJsZSh0KSYmIWUodCkucGFyZW50cygpLmFkZEJhY2soKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm5cImhpZGRlblwiPT09ZS5jc3ModGhpcyxcInZpc2liaWxpdHlcIil9KS5sZW5ndGh9dmFyIHM9MCxuPS9edWktaWQtXFxkKyQvO2UudWk9ZS51aXx8e30sZS5leHRlbmQoZS51aSx7dmVyc2lvbjpcIjEuMTAuM1wiLGtleUNvZGU6e0JBQ0tTUEFDRTo4LENPTU1BOjE4OCxERUxFVEU6NDYsRE9XTjo0MCxFTkQ6MzUsRU5URVI6MTMsRVNDQVBFOjI3LEhPTUU6MzYsTEVGVDozNyxOVU1QQURfQUREOjEwNyxOVU1QQURfREVDSU1BTDoxMTAsTlVNUEFEX0RJVklERToxMTEsTlVNUEFEX0VOVEVSOjEwOCxOVU1QQURfTVVMVElQTFk6MTA2LE5VTVBBRF9TVUJUUkFDVDoxMDksUEFHRV9ET1dOOjM0LFBBR0VfVVA6MzMsUEVSSU9EOjE5MCxSSUdIVDozOSxTUEFDRTozMixUQUI6OSxVUDozOH19KSxlLmZuLmV4dGVuZCh7Zm9jdXM6ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGksYSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGk/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZSh0KS5mb2N1cygpLGEmJmEuY2FsbCh0KX0saSl9KTp0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KGUuZm4uZm9jdXMpLHNjcm9sbFBhcmVudDpmdW5jdGlvbigpe3ZhciB0O3JldHVybiB0PWUudWkuaWUmJi8oc3RhdGljfHJlbGF0aXZlKS8udGVzdCh0aGlzLmNzcyhcInBvc2l0aW9uXCIpKXx8L2Fic29sdXRlLy50ZXN0KHRoaXMuY3NzKFwicG9zaXRpb25cIikpP3RoaXMucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybi8ocmVsYXRpdmV8YWJzb2x1dGV8Zml4ZWQpLy50ZXN0KGUuY3NzKHRoaXMsXCJwb3NpdGlvblwiKSkmJi8oYXV0b3xzY3JvbGwpLy50ZXN0KGUuY3NzKHRoaXMsXCJvdmVyZmxvd1wiKStlLmNzcyh0aGlzLFwib3ZlcmZsb3cteVwiKStlLmNzcyh0aGlzLFwib3ZlcmZsb3cteFwiKSl9KS5lcSgwKTp0aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4vKGF1dG98c2Nyb2xsKS8udGVzdChlLmNzcyh0aGlzLFwib3ZlcmZsb3dcIikrZS5jc3ModGhpcyxcIm92ZXJmbG93LXlcIikrZS5jc3ModGhpcyxcIm92ZXJmbG93LXhcIikpfSkuZXEoMCksL2ZpeGVkLy50ZXN0KHRoaXMuY3NzKFwicG9zaXRpb25cIikpfHwhdC5sZW5ndGg/ZShkb2N1bWVudCk6dH0sekluZGV4OmZ1bmN0aW9uKGkpe2lmKGkhPT10KXJldHVybiB0aGlzLmNzcyhcInpJbmRleFwiLGkpO2lmKHRoaXMubGVuZ3RoKWZvcih2YXIgYSxzLG49ZSh0aGlzWzBdKTtuLmxlbmd0aCYmblswXSE9PWRvY3VtZW50Oyl7aWYoYT1uLmNzcyhcInBvc2l0aW9uXCIpLChcImFic29sdXRlXCI9PT1hfHxcInJlbGF0aXZlXCI9PT1hfHxcImZpeGVkXCI9PT1hKSYmKHM9cGFyc2VJbnQobi5jc3MoXCJ6SW5kZXhcIiksMTApLCFpc05hTihzKSYmMCE9PXMpKXJldHVybiBzO249bi5wYXJlbnQoKX1yZXR1cm4gMH0sdW5pcXVlSWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5pZHx8KHRoaXMuaWQ9XCJ1aS1pZC1cIisgKytzKX0pfSxyZW1vdmVVbmlxdWVJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnRlc3QodGhpcy5pZCkmJmUodGhpcykucmVtb3ZlQXR0cihcImlkXCIpfSl9fSksZS5leHRlbmQoZS5leHByW1wiOlwiXSx7ZGF0YTplLmV4cHIuY3JlYXRlUHNldWRvP2UuZXhwci5jcmVhdGVQc2V1ZG8oZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGkpe3JldHVybiEhZS5kYXRhKGksdCl9fSk6ZnVuY3Rpb24odCxpLGEpe3JldHVybiEhZS5kYXRhKHQsYVszXSl9LGZvY3VzYWJsZTpmdW5jdGlvbih0KXtyZXR1cm4gaSh0LCFpc05hTihlLmF0dHIodCxcInRhYmluZGV4XCIpKSl9LHRhYmJhYmxlOmZ1bmN0aW9uKHQpe3ZhciBhPWUuYXR0cih0LFwidGFiaW5kZXhcIikscz1pc05hTihhKTtyZXR1cm4oc3x8YT49MCkmJmkodCwhcyl9fSksZShcIjxhPlwiKS5vdXRlcldpZHRoKDEpLmpxdWVyeXx8ZS5lYWNoKFtcIldpZHRoXCIsXCJIZWlnaHRcIl0sZnVuY3Rpb24oaSxhKXtmdW5jdGlvbiBzKHQsaSxhLHMpe3JldHVybiBlLmVhY2gobixmdW5jdGlvbigpe2ktPXBhcnNlRmxvYXQoZS5jc3ModCxcInBhZGRpbmdcIit0aGlzKSl8fDAsYSYmKGktPXBhcnNlRmxvYXQoZS5jc3ModCxcImJvcmRlclwiK3RoaXMrXCJXaWR0aFwiKSl8fDApLHMmJihpLT1wYXJzZUZsb2F0KGUuY3NzKHQsXCJtYXJnaW5cIit0aGlzKSl8fDApfSksaX12YXIgbj1cIldpZHRoXCI9PT1hP1tcIkxlZnRcIixcIlJpZ2h0XCJdOltcIlRvcFwiLFwiQm90dG9tXCJdLHI9YS50b0xvd2VyQ2FzZSgpLG89e2lubmVyV2lkdGg6ZS5mbi5pbm5lcldpZHRoLGlubmVySGVpZ2h0OmUuZm4uaW5uZXJIZWlnaHQsb3V0ZXJXaWR0aDplLmZuLm91dGVyV2lkdGgsb3V0ZXJIZWlnaHQ6ZS5mbi5vdXRlckhlaWdodH07ZS5mbltcImlubmVyXCIrYV09ZnVuY3Rpb24oaSl7cmV0dXJuIGk9PT10P29bXCJpbm5lclwiK2FdLmNhbGwodGhpcyk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZSh0aGlzKS5jc3MocixzKHRoaXMsaSkrXCJweFwiKX0pfSxlLmZuW1wib3V0ZXJcIithXT1mdW5jdGlvbih0LGkpe3JldHVyblwibnVtYmVyXCIhPXR5cGVvZiB0P29bXCJvdXRlclwiK2FdLmNhbGwodGhpcyx0KTp0aGlzLmVhY2goZnVuY3Rpb24oKXtlKHRoaXMpLmNzcyhyLHModGhpcyx0LCEwLGkpK1wicHhcIil9KX19KSxlLmZuLmFkZEJhY2t8fChlLmZuLmFkZEJhY2s9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWU/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoZSkpfSksZShcIjxhPlwiKS5kYXRhKFwiYS1iXCIsXCJhXCIpLnJlbW92ZURhdGEoXCJhLWJcIikuZGF0YShcImEtYlwiKSYmKGUuZm4ucmVtb3ZlRGF0YT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oaSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/dC5jYWxsKHRoaXMsZS5jYW1lbENhc2UoaSkpOnQuY2FsbCh0aGlzKX19KGUuZm4ucmVtb3ZlRGF0YSkpLGUudWkuaWU9ISEvbXNpZSBbXFx3Ll0rLy5leGVjKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSksZS5zdXBwb3J0LnNlbGVjdHN0YXJ0PVwib25zZWxlY3RzdGFydFwiaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxlLmZuLmV4dGVuZCh7ZGlzYWJsZVNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJpbmQoKGUuc3VwcG9ydC5zZWxlY3RzdGFydD9cInNlbGVjdHN0YXJ0XCI6XCJtb3VzZWRvd25cIikrXCIudWktZGlzYWJsZVNlbGVjdGlvblwiLGZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0pfSxlbmFibGVTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bmJpbmQoXCIudWktZGlzYWJsZVNlbGVjdGlvblwiKX19KSxlLmV4dGVuZChlLnVpLHtwbHVnaW46e2FkZDpmdW5jdGlvbih0LGksYSl7dmFyIHMsbj1lLnVpW3RdLnByb3RvdHlwZTtmb3IocyBpbiBhKW4ucGx1Z2luc1tzXT1uLnBsdWdpbnNbc118fFtdLG4ucGx1Z2luc1tzXS5wdXNoKFtpLGFbc11dKX0sY2FsbDpmdW5jdGlvbihlLHQsaSl7dmFyIGEscz1lLnBsdWdpbnNbdF07aWYocyYmZS5lbGVtZW50WzBdLnBhcmVudE5vZGUmJjExIT09ZS5lbGVtZW50WzBdLnBhcmVudE5vZGUubm9kZVR5cGUpZm9yKGE9MDtzLmxlbmd0aD5hO2ErKyllLm9wdGlvbnNbc1thXVswXV0mJnNbYV1bMV0uYXBwbHkoZS5lbGVtZW50LGkpfX0saGFzU2Nyb2xsOmZ1bmN0aW9uKHQsaSl7aWYoXCJoaWRkZW5cIj09PWUodCkuY3NzKFwib3ZlcmZsb3dcIikpcmV0dXJuITE7dmFyIGE9aSYmXCJsZWZ0XCI9PT1pP1wic2Nyb2xsTGVmdFwiOlwic2Nyb2xsVG9wXCIscz0hMTtyZXR1cm4gdFthXT4wPyEwOih0W2FdPTEscz10W2FdPjAsdFthXT0wLHMpfX0pfSkoalF1ZXJ5KTsoZnVuY3Rpb24oZSx0KXt2YXIgaT0wLHM9QXJyYXkucHJvdG90eXBlLnNsaWNlLGE9ZS5jbGVhbkRhdGE7ZS5jbGVhbkRhdGE9ZnVuY3Rpb24odCl7Zm9yKHZhciBpLHM9MDtudWxsIT0oaT10W3NdKTtzKyspdHJ5e2UoaSkudHJpZ2dlckhhbmRsZXIoXCJyZW1vdmVcIil9Y2F0Y2gobil7fWEodCl9LGUud2lkZ2V0PWZ1bmN0aW9uKGkscyxhKXt2YXIgbixyLG8saCxsPXt9LHU9aS5zcGxpdChcIi5cIilbMF07aT1pLnNwbGl0KFwiLlwiKVsxXSxuPXUrXCItXCIraSxhfHwoYT1zLHM9ZS5XaWRnZXQpLGUuZXhwcltcIjpcIl1bbi50b0xvd2VyQ2FzZSgpXT1mdW5jdGlvbih0KXtyZXR1cm4hIWUuZGF0YSh0LG4pfSxlW3VdPWVbdV18fHt9LHI9ZVt1XVtpXSxvPWVbdV1baV09ZnVuY3Rpb24oZSxpKXtyZXR1cm4gdGhpcy5fY3JlYXRlV2lkZ2V0Pyhhcmd1bWVudHMubGVuZ3RoJiZ0aGlzLl9jcmVhdGVXaWRnZXQoZSxpKSx0KTpuZXcgbyhlLGkpfSxlLmV4dGVuZChvLHIse3ZlcnNpb246YS52ZXJzaW9uLF9wcm90bzplLmV4dGVuZCh7fSxhKSxfY2hpbGRDb25zdHJ1Y3RvcnM6W119KSxoPW5ldyBzLGgub3B0aW9ucz1lLndpZGdldC5leHRlbmQoe30saC5vcHRpb25zKSxlLmVhY2goYSxmdW5jdGlvbihpLGEpe3JldHVybiBlLmlzRnVuY3Rpb24oYSk/KGxbaV09ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbigpe3JldHVybiBzLnByb3RvdHlwZVtpXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHMucHJvdG90eXBlW2ldLmFwcGx5KHRoaXMsZSl9O3JldHVybiBmdW5jdGlvbigpe3ZhciBpLHM9dGhpcy5fc3VwZXIsbj10aGlzLl9zdXBlckFwcGx5O3JldHVybiB0aGlzLl9zdXBlcj1lLHRoaXMuX3N1cGVyQXBwbHk9dCxpPWEuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX3N1cGVyPXMsdGhpcy5fc3VwZXJBcHBseT1uLGl9fSgpLHQpOihsW2ldPWEsdCl9KSxvLnByb3RvdHlwZT1lLndpZGdldC5leHRlbmQoaCx7d2lkZ2V0RXZlbnRQcmVmaXg6cj9oLndpZGdldEV2ZW50UHJlZml4Oml9LGwse2NvbnN0cnVjdG9yOm8sbmFtZXNwYWNlOnUsd2lkZ2V0TmFtZTppLHdpZGdldEZ1bGxOYW1lOm59KSxyPyhlLmVhY2goci5fY2hpbGRDb25zdHJ1Y3RvcnMsZnVuY3Rpb24odCxpKXt2YXIgcz1pLnByb3RvdHlwZTtlLndpZGdldChzLm5hbWVzcGFjZStcIi5cIitzLndpZGdldE5hbWUsbyxpLl9wcm90byl9KSxkZWxldGUgci5fY2hpbGRDb25zdHJ1Y3RvcnMpOnMuX2NoaWxkQ29uc3RydWN0b3JzLnB1c2gobyksZS53aWRnZXQuYnJpZGdlKGksbyl9LGUud2lkZ2V0LmV4dGVuZD1mdW5jdGlvbihpKXtmb3IodmFyIGEsbixyPXMuY2FsbChhcmd1bWVudHMsMSksbz0wLGg9ci5sZW5ndGg7aD5vO28rKylmb3IoYSBpbiByW29dKW49cltvXVthXSxyW29dLmhhc093blByb3BlcnR5KGEpJiZuIT09dCYmKGlbYV09ZS5pc1BsYWluT2JqZWN0KG4pP2UuaXNQbGFpbk9iamVjdChpW2FdKT9lLndpZGdldC5leHRlbmQoe30saVthXSxuKTplLndpZGdldC5leHRlbmQoe30sbik6bik7cmV0dXJuIGl9LGUud2lkZ2V0LmJyaWRnZT1mdW5jdGlvbihpLGEpe3ZhciBuPWEucHJvdG90eXBlLndpZGdldEZ1bGxOYW1lfHxpO2UuZm5baV09ZnVuY3Rpb24ocil7dmFyIG89XCJzdHJpbmdcIj09dHlwZW9mIHIsaD1zLmNhbGwoYXJndW1lbnRzLDEpLGw9dGhpcztyZXR1cm4gcj0hbyYmaC5sZW5ndGg/ZS53aWRnZXQuZXh0ZW5kLmFwcGx5KG51bGwsW3JdLmNvbmNhdChoKSk6cixvP3RoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBzLGE9ZS5kYXRhKHRoaXMsbik7cmV0dXJuIGE/ZS5pc0Z1bmN0aW9uKGFbcl0pJiZcIl9cIiE9PXIuY2hhckF0KDApPyhzPWFbcl0uYXBwbHkoYSxoKSxzIT09YSYmcyE9PXQ/KGw9cyYmcy5qcXVlcnk/bC5wdXNoU3RhY2socy5nZXQoKSk6cywhMSk6dCk6ZS5lcnJvcihcIm5vIHN1Y2ggbWV0aG9kICdcIityK1wiJyBmb3IgXCIraStcIiB3aWRnZXQgaW5zdGFuY2VcIik6ZS5lcnJvcihcImNhbm5vdCBjYWxsIG1ldGhvZHMgb24gXCIraStcIiBwcmlvciB0byBpbml0aWFsaXphdGlvbjsgXCIrXCJhdHRlbXB0ZWQgdG8gY2FsbCBtZXRob2QgJ1wiK3IrXCInXCIpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZS5kYXRhKHRoaXMsbik7dD90Lm9wdGlvbihyfHx7fSkuX2luaXQoKTplLmRhdGEodGhpcyxuLG5ldyBhKHIsdGhpcykpfSksbH19LGUuV2lkZ2V0PWZ1bmN0aW9uKCl7fSxlLldpZGdldC5fY2hpbGRDb25zdHJ1Y3RvcnM9W10sZS5XaWRnZXQucHJvdG90eXBlPXt3aWRnZXROYW1lOlwid2lkZ2V0XCIsd2lkZ2V0RXZlbnRQcmVmaXg6XCJcIixkZWZhdWx0RWxlbWVudDpcIjxkaXY+XCIsb3B0aW9uczp7ZGlzYWJsZWQ6ITEsY3JlYXRlOm51bGx9LF9jcmVhdGVXaWRnZXQ6ZnVuY3Rpb24odCxzKXtzPWUoc3x8dGhpcy5kZWZhdWx0RWxlbWVudHx8dGhpcylbMF0sdGhpcy5lbGVtZW50PWUocyksdGhpcy51dWlkPWkrKyx0aGlzLmV2ZW50TmFtZXNwYWNlPVwiLlwiK3RoaXMud2lkZ2V0TmFtZSt0aGlzLnV1aWQsdGhpcy5vcHRpb25zPWUud2lkZ2V0LmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMsdGhpcy5fZ2V0Q3JlYXRlT3B0aW9ucygpLHQpLHRoaXMuYmluZGluZ3M9ZSgpLHRoaXMuaG92ZXJhYmxlPWUoKSx0aGlzLmZvY3VzYWJsZT1lKCkscyE9PXRoaXMmJihlLmRhdGEocyx0aGlzLndpZGdldEZ1bGxOYW1lLHRoaXMpLHRoaXMuX29uKCEwLHRoaXMuZWxlbWVudCx7cmVtb3ZlOmZ1bmN0aW9uKGUpe2UudGFyZ2V0PT09cyYmdGhpcy5kZXN0cm95KCl9fSksdGhpcy5kb2N1bWVudD1lKHMuc3R5bGU/cy5vd25lckRvY3VtZW50OnMuZG9jdW1lbnR8fHMpLHRoaXMud2luZG93PWUodGhpcy5kb2N1bWVudFswXS5kZWZhdWx0Vmlld3x8dGhpcy5kb2N1bWVudFswXS5wYXJlbnRXaW5kb3cpKSx0aGlzLl9jcmVhdGUoKSx0aGlzLl90cmlnZ2VyKFwiY3JlYXRlXCIsbnVsbCx0aGlzLl9nZXRDcmVhdGVFdmVudERhdGEoKSksdGhpcy5faW5pdCgpfSxfZ2V0Q3JlYXRlT3B0aW9uczplLm5vb3AsX2dldENyZWF0ZUV2ZW50RGF0YTplLm5vb3AsX2NyZWF0ZTplLm5vb3AsX2luaXQ6ZS5ub29wLGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLl9kZXN0cm95KCksdGhpcy5lbGVtZW50LnVuYmluZCh0aGlzLmV2ZW50TmFtZXNwYWNlKS5yZW1vdmVEYXRhKHRoaXMud2lkZ2V0TmFtZSkucmVtb3ZlRGF0YSh0aGlzLndpZGdldEZ1bGxOYW1lKS5yZW1vdmVEYXRhKGUuY2FtZWxDYXNlKHRoaXMud2lkZ2V0RnVsbE5hbWUpKSx0aGlzLndpZGdldCgpLnVuYmluZCh0aGlzLmV2ZW50TmFtZXNwYWNlKS5yZW1vdmVBdHRyKFwiYXJpYS1kaXNhYmxlZFwiKS5yZW1vdmVDbGFzcyh0aGlzLndpZGdldEZ1bGxOYW1lK1wiLWRpc2FibGVkIFwiK1widWktc3RhdGUtZGlzYWJsZWRcIiksdGhpcy5iaW5kaW5ncy51bmJpbmQodGhpcy5ldmVudE5hbWVzcGFjZSksdGhpcy5ob3ZlcmFibGUucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1ob3ZlclwiKSx0aGlzLmZvY3VzYWJsZS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWZvY3VzXCIpfSxfZGVzdHJveTplLm5vb3Asd2lkZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudH0sb3B0aW9uOmZ1bmN0aW9uKGkscyl7dmFyIGEsbixyLG89aTtpZigwPT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZS53aWRnZXQuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGkpaWYobz17fSxhPWkuc3BsaXQoXCIuXCIpLGk9YS5zaGlmdCgpLGEubGVuZ3RoKXtmb3Iobj1vW2ldPWUud2lkZ2V0LmV4dGVuZCh7fSx0aGlzLm9wdGlvbnNbaV0pLHI9MDthLmxlbmd0aC0xPnI7cisrKW5bYVtyXV09blthW3JdXXx8e30sbj1uW2Fbcl1dO2lmKGk9YS5wb3AoKSxzPT09dClyZXR1cm4gbltpXT09PXQ/bnVsbDpuW2ldO25baV09c31lbHNle2lmKHM9PT10KXJldHVybiB0aGlzLm9wdGlvbnNbaV09PT10P251bGw6dGhpcy5vcHRpb25zW2ldO29baV09c31yZXR1cm4gdGhpcy5fc2V0T3B0aW9ucyhvKSx0aGlzfSxfc2V0T3B0aW9uczpmdW5jdGlvbihlKXt2YXIgdDtmb3IodCBpbiBlKXRoaXMuX3NldE9wdGlvbih0LGVbdF0pO3JldHVybiB0aGlzfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMub3B0aW9uc1tlXT10LFwiZGlzYWJsZWRcIj09PWUmJih0aGlzLndpZGdldCgpLnRvZ2dsZUNsYXNzKHRoaXMud2lkZ2V0RnVsbE5hbWUrXCItZGlzYWJsZWQgdWktc3RhdGUtZGlzYWJsZWRcIiwhIXQpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsdCksdGhpcy5ob3ZlcmFibGUucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1ob3ZlclwiKSx0aGlzLmZvY3VzYWJsZS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWZvY3VzXCIpKSx0aGlzfSxlbmFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2V0T3B0aW9uKFwiZGlzYWJsZWRcIiwhMSl9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2V0T3B0aW9uKFwiZGlzYWJsZWRcIiwhMCl9LF9vbjpmdW5jdGlvbihpLHMsYSl7dmFyIG4scj10aGlzO1wiYm9vbGVhblwiIT10eXBlb2YgaSYmKGE9cyxzPWksaT0hMSksYT8ocz1uPWUocyksdGhpcy5iaW5kaW5ncz10aGlzLmJpbmRpbmdzLmFkZChzKSk6KGE9cyxzPXRoaXMuZWxlbWVudCxuPXRoaXMud2lkZ2V0KCkpLGUuZWFjaChhLGZ1bmN0aW9uKGEsbyl7ZnVuY3Rpb24gaCgpe3JldHVybiBpfHxyLm9wdGlvbnMuZGlzYWJsZWQhPT0hMCYmIWUodGhpcykuaGFzQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiKT8oXCJzdHJpbmdcIj09dHlwZW9mIG8/cltvXTpvKS5hcHBseShyLGFyZ3VtZW50cyk6dH1cInN0cmluZ1wiIT10eXBlb2YgbyYmKGguZ3VpZD1vLmd1aWQ9by5ndWlkfHxoLmd1aWR8fGUuZ3VpZCsrKTt2YXIgbD1hLm1hdGNoKC9eKFxcdyspXFxzKiguKikkLyksdT1sWzFdK3IuZXZlbnROYW1lc3BhY2UsYz1sWzJdO2M/bi5kZWxlZ2F0ZShjLHUsaCk6cy5iaW5kKHUsaCl9KX0sX29mZjpmdW5jdGlvbihlLHQpe3Q9KHR8fFwiXCIpLnNwbGl0KFwiIFwiKS5qb2luKHRoaXMuZXZlbnROYW1lc3BhY2UrXCIgXCIpK3RoaXMuZXZlbnROYW1lc3BhY2UsZS51bmJpbmQodCkudW5kZWxlZ2F0ZSh0KX0sX2RlbGF5OmZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gaSgpe3JldHVybihcInN0cmluZ1wiPT10eXBlb2YgZT9zW2VdOmUpLmFwcGx5KHMsYXJndW1lbnRzKX12YXIgcz10aGlzO3JldHVybiBzZXRUaW1lb3V0KGksdHx8MCl9LF9ob3ZlcmFibGU6ZnVuY3Rpb24odCl7dGhpcy5ob3ZlcmFibGU9dGhpcy5ob3ZlcmFibGUuYWRkKHQpLHRoaXMuX29uKHQse21vdXNlZW50ZXI6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKFwidWktc3RhdGUtaG92ZXJcIil9LG1vdXNlbGVhdmU6ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtaG92ZXJcIil9fSl9LF9mb2N1c2FibGU6ZnVuY3Rpb24odCl7dGhpcy5mb2N1c2FibGU9dGhpcy5mb2N1c2FibGUuYWRkKHQpLHRoaXMuX29uKHQse2ZvY3VzaW46ZnVuY3Rpb24odCl7ZSh0LmN1cnJlbnRUYXJnZXQpLmFkZENsYXNzKFwidWktc3RhdGUtZm9jdXNcIil9LGZvY3Vzb3V0OmZ1bmN0aW9uKHQpe2UodC5jdXJyZW50VGFyZ2V0KS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWZvY3VzXCIpfX0pfSxfdHJpZ2dlcjpmdW5jdGlvbih0LGkscyl7dmFyIGEsbixyPXRoaXMub3B0aW9uc1t0XTtpZihzPXN8fHt9LGk9ZS5FdmVudChpKSxpLnR5cGU9KHQ9PT10aGlzLndpZGdldEV2ZW50UHJlZml4P3Q6dGhpcy53aWRnZXRFdmVudFByZWZpeCt0KS50b0xvd2VyQ2FzZSgpLGkudGFyZ2V0PXRoaXMuZWxlbWVudFswXSxuPWkub3JpZ2luYWxFdmVudClmb3IoYSBpbiBuKWEgaW4gaXx8KGlbYV09blthXSk7cmV0dXJuIHRoaXMuZWxlbWVudC50cmlnZ2VyKGkscyksIShlLmlzRnVuY3Rpb24ocikmJnIuYXBwbHkodGhpcy5lbGVtZW50WzBdLFtpXS5jb25jYXQocykpPT09ITF8fGkuaXNEZWZhdWx0UHJldmVudGVkKCkpfX0sZS5lYWNoKHtzaG93OlwiZmFkZUluXCIsaGlkZTpcImZhZGVPdXRcIn0sZnVuY3Rpb24odCxpKXtlLldpZGdldC5wcm90b3R5cGVbXCJfXCIrdF09ZnVuY3Rpb24ocyxhLG4pe1wic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT17ZWZmZWN0OmF9KTt2YXIgcixvPWE/YT09PSEwfHxcIm51bWJlclwiPT10eXBlb2YgYT9pOmEuZWZmZWN0fHxpOnQ7YT1hfHx7fSxcIm51bWJlclwiPT10eXBlb2YgYSYmKGE9e2R1cmF0aW9uOmF9KSxyPSFlLmlzRW1wdHlPYmplY3QoYSksYS5jb21wbGV0ZT1uLGEuZGVsYXkmJnMuZGVsYXkoYS5kZWxheSksciYmZS5lZmZlY3RzJiZlLmVmZmVjdHMuZWZmZWN0W29dP3NbdF0oYSk6byE9PXQmJnNbb10/c1tvXShhLmR1cmF0aW9uLGEuZWFzaW5nLG4pOnMucXVldWUoZnVuY3Rpb24oaSl7ZSh0aGlzKVt0XSgpLG4mJm4uY2FsbChzWzBdKSxpKCl9KX19KX0pKGpRdWVyeSk7KGZ1bmN0aW9uKGUpe3ZhciB0PSExO2UoZG9jdW1lbnQpLm1vdXNldXAoZnVuY3Rpb24oKXt0PSExfSksZS53aWRnZXQoXCJ1aS5tb3VzZVwiLHt2ZXJzaW9uOlwiMS4xMC4zXCIsb3B0aW9uczp7Y2FuY2VsOlwiaW5wdXQsdGV4dGFyZWEsYnV0dG9uLHNlbGVjdCxvcHRpb25cIixkaXN0YW5jZToxLGRlbGF5OjB9LF9tb3VzZUluaXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuZWxlbWVudC5iaW5kKFwibW91c2Vkb3duLlwiK3RoaXMud2lkZ2V0TmFtZSxmdW5jdGlvbihlKXtyZXR1cm4gdC5fbW91c2VEb3duKGUpfSkuYmluZChcImNsaWNrLlwiK3RoaXMud2lkZ2V0TmFtZSxmdW5jdGlvbihpKXtyZXR1cm4hMD09PWUuZGF0YShpLnRhcmdldCx0LndpZGdldE5hbWUrXCIucHJldmVudENsaWNrRXZlbnRcIik/KGUucmVtb3ZlRGF0YShpLnRhcmdldCx0LndpZGdldE5hbWUrXCIucHJldmVudENsaWNrRXZlbnRcIiksaS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSwhMSk6dW5kZWZpbmVkfSksdGhpcy5zdGFydGVkPSExfSxfbW91c2VEZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnVuYmluZChcIi5cIit0aGlzLndpZGdldE5hbWUpLHRoaXMuX21vdXNlTW92ZURlbGVnYXRlJiZlKGRvY3VtZW50KS51bmJpbmQoXCJtb3VzZW1vdmUuXCIrdGhpcy53aWRnZXROYW1lLHRoaXMuX21vdXNlTW92ZURlbGVnYXRlKS51bmJpbmQoXCJtb3VzZXVwLlwiK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZVVwRGVsZWdhdGUpfSxfbW91c2VEb3duOmZ1bmN0aW9uKGkpe2lmKCF0KXt0aGlzLl9tb3VzZVN0YXJ0ZWQmJnRoaXMuX21vdXNlVXAoaSksdGhpcy5fbW91c2VEb3duRXZlbnQ9aTt2YXIgcz10aGlzLGE9MT09PWkud2hpY2gsbj1cInN0cmluZ1wiPT10eXBlb2YgdGhpcy5vcHRpb25zLmNhbmNlbCYmaS50YXJnZXQubm9kZU5hbWU/ZShpLnRhcmdldCkuY2xvc2VzdCh0aGlzLm9wdGlvbnMuY2FuY2VsKS5sZW5ndGg6ITE7cmV0dXJuIGEmJiFuJiZ0aGlzLl9tb3VzZUNhcHR1cmUoaSk/KHRoaXMubW91c2VEZWxheU1ldD0hdGhpcy5vcHRpb25zLmRlbGF5LHRoaXMubW91c2VEZWxheU1ldHx8KHRoaXMuX21vdXNlRGVsYXlUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cy5tb3VzZURlbGF5TWV0PSEwfSx0aGlzLm9wdGlvbnMuZGVsYXkpKSx0aGlzLl9tb3VzZURpc3RhbmNlTWV0KGkpJiZ0aGlzLl9tb3VzZURlbGF5TWV0KGkpJiYodGhpcy5fbW91c2VTdGFydGVkPXRoaXMuX21vdXNlU3RhcnQoaSkhPT0hMSwhdGhpcy5fbW91c2VTdGFydGVkKT8oaS5wcmV2ZW50RGVmYXVsdCgpLCEwKTooITA9PT1lLmRhdGEoaS50YXJnZXQsdGhpcy53aWRnZXROYW1lK1wiLnByZXZlbnRDbGlja0V2ZW50XCIpJiZlLnJlbW92ZURhdGEoaS50YXJnZXQsdGhpcy53aWRnZXROYW1lK1wiLnByZXZlbnRDbGlja0V2ZW50XCIpLHRoaXMuX21vdXNlTW92ZURlbGVnYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBzLl9tb3VzZU1vdmUoZSl9LHRoaXMuX21vdXNlVXBEZWxlZ2F0ZT1mdW5jdGlvbihlKXtyZXR1cm4gcy5fbW91c2VVcChlKX0sZShkb2N1bWVudCkuYmluZChcIm1vdXNlbW92ZS5cIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUpLmJpbmQoXCJtb3VzZXVwLlwiK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZVVwRGVsZWdhdGUpLGkucHJldmVudERlZmF1bHQoKSx0PSEwLCEwKSk6ITB9fSxfbW91c2VNb3ZlOmZ1bmN0aW9uKHQpe3JldHVybiBlLnVpLmllJiYoIWRvY3VtZW50LmRvY3VtZW50TW9kZXx8OT5kb2N1bWVudC5kb2N1bWVudE1vZGUpJiYhdC5idXR0b24/dGhpcy5fbW91c2VVcCh0KTp0aGlzLl9tb3VzZVN0YXJ0ZWQ/KHRoaXMuX21vdXNlRHJhZyh0KSx0LnByZXZlbnREZWZhdWx0KCkpOih0aGlzLl9tb3VzZURpc3RhbmNlTWV0KHQpJiZ0aGlzLl9tb3VzZURlbGF5TWV0KHQpJiYodGhpcy5fbW91c2VTdGFydGVkPXRoaXMuX21vdXNlU3RhcnQodGhpcy5fbW91c2VEb3duRXZlbnQsdCkhPT0hMSx0aGlzLl9tb3VzZVN0YXJ0ZWQ/dGhpcy5fbW91c2VEcmFnKHQpOnRoaXMuX21vdXNlVXAodCkpLCF0aGlzLl9tb3VzZVN0YXJ0ZWQpfSxfbW91c2VVcDpmdW5jdGlvbih0KXtyZXR1cm4gZShkb2N1bWVudCkudW5iaW5kKFwibW91c2Vtb3ZlLlwiK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZSkudW5iaW5kKFwibW91c2V1cC5cIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VVcERlbGVnYXRlKSx0aGlzLl9tb3VzZVN0YXJ0ZWQmJih0aGlzLl9tb3VzZVN0YXJ0ZWQ9ITEsdC50YXJnZXQ9PT10aGlzLl9tb3VzZURvd25FdmVudC50YXJnZXQmJmUuZGF0YSh0LnRhcmdldCx0aGlzLndpZGdldE5hbWUrXCIucHJldmVudENsaWNrRXZlbnRcIiwhMCksdGhpcy5fbW91c2VTdG9wKHQpKSwhMX0sX21vdXNlRGlzdGFuY2VNZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGgubWF4KE1hdGguYWJzKHRoaXMuX21vdXNlRG93bkV2ZW50LnBhZ2VYLWUucGFnZVgpLE1hdGguYWJzKHRoaXMuX21vdXNlRG93bkV2ZW50LnBhZ2VZLWUucGFnZVkpKT49dGhpcy5vcHRpb25zLmRpc3RhbmNlfSxfbW91c2VEZWxheU1ldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vdXNlRGVsYXlNZXR9LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKCl7fSxfbW91c2VEcmFnOmZ1bmN0aW9uKCl7fSxfbW91c2VTdG9wOmZ1bmN0aW9uKCl7fSxfbW91c2VDYXB0dXJlOmZ1bmN0aW9uKCl7cmV0dXJuITB9fSl9KShqUXVlcnkpOyhmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGkoZSx0LGkpe3JldHVybltwYXJzZUZsb2F0KGVbMF0pKihwLnRlc3QoZVswXSk/dC8xMDA6MSkscGFyc2VGbG9hdChlWzFdKSoocC50ZXN0KGVbMV0pP2kvMTAwOjEpXX1mdW5jdGlvbiBzKHQsaSl7cmV0dXJuIHBhcnNlSW50KGUuY3NzKHQsaSksMTApfHwwfWZ1bmN0aW9uIGEodCl7dmFyIGk9dFswXTtyZXR1cm4gOT09PWkubm9kZVR5cGU/e3dpZHRoOnQud2lkdGgoKSxoZWlnaHQ6dC5oZWlnaHQoKSxvZmZzZXQ6e3RvcDowLGxlZnQ6MH19OmUuaXNXaW5kb3coaSk/e3dpZHRoOnQud2lkdGgoKSxoZWlnaHQ6dC5oZWlnaHQoKSxvZmZzZXQ6e3RvcDp0LnNjcm9sbFRvcCgpLGxlZnQ6dC5zY3JvbGxMZWZ0KCl9fTppLnByZXZlbnREZWZhdWx0P3t3aWR0aDowLGhlaWdodDowLG9mZnNldDp7dG9wOmkucGFnZVksbGVmdDppLnBhZ2VYfX06e3dpZHRoOnQub3V0ZXJXaWR0aCgpLGhlaWdodDp0Lm91dGVySGVpZ2h0KCksb2Zmc2V0OnQub2Zmc2V0KCl9fWUudWk9ZS51aXx8e307dmFyIG4scj1NYXRoLm1heCxvPU1hdGguYWJzLGg9TWF0aC5yb3VuZCxsPS9sZWZ0fGNlbnRlcnxyaWdodC8sdT0vdG9wfGNlbnRlcnxib3R0b20vLGM9L1tcXCtcXC1dXFxkKyhcXC5bXFxkXSspPyU/LyxkPS9eXFx3Ky8scD0vJSQvLGY9ZS5mbi5wb3NpdGlvbjtlLnBvc2l0aW9uPXtzY3JvbGxiYXJXaWR0aDpmdW5jdGlvbigpe2lmKG4hPT10KXJldHVybiBuO3ZhciBpLHMsYT1lKFwiPGRpdiBzdHlsZT0nZGlzcGxheTpibG9jazt3aWR0aDo1MHB4O2hlaWdodDo1MHB4O292ZXJmbG93OmhpZGRlbjsnPjxkaXYgc3R5bGU9J2hlaWdodDoxMDBweDt3aWR0aDphdXRvOyc+PC9kaXY+PC9kaXY+XCIpLHI9YS5jaGlsZHJlbigpWzBdO3JldHVybiBlKFwiYm9keVwiKS5hcHBlbmQoYSksaT1yLm9mZnNldFdpZHRoLGEuY3NzKFwib3ZlcmZsb3dcIixcInNjcm9sbFwiKSxzPXIub2Zmc2V0V2lkdGgsaT09PXMmJihzPWFbMF0uY2xpZW50V2lkdGgpLGEucmVtb3ZlKCksbj1pLXN9LGdldFNjcm9sbEluZm86ZnVuY3Rpb24odCl7dmFyIGk9dC5pc1dpbmRvdz9cIlwiOnQuZWxlbWVudC5jc3MoXCJvdmVyZmxvdy14XCIpLHM9dC5pc1dpbmRvdz9cIlwiOnQuZWxlbWVudC5jc3MoXCJvdmVyZmxvdy15XCIpLGE9XCJzY3JvbGxcIj09PWl8fFwiYXV0b1wiPT09aSYmdC53aWR0aDx0LmVsZW1lbnRbMF0uc2Nyb2xsV2lkdGgsbj1cInNjcm9sbFwiPT09c3x8XCJhdXRvXCI9PT1zJiZ0LmhlaWdodDx0LmVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0O3JldHVybnt3aWR0aDpuP2UucG9zaXRpb24uc2Nyb2xsYmFyV2lkdGgoKTowLGhlaWdodDphP2UucG9zaXRpb24uc2Nyb2xsYmFyV2lkdGgoKTowfX0sZ2V0V2l0aGluSW5mbzpmdW5jdGlvbih0KXt2YXIgaT1lKHR8fHdpbmRvdykscz1lLmlzV2luZG93KGlbMF0pO3JldHVybntlbGVtZW50OmksaXNXaW5kb3c6cyxvZmZzZXQ6aS5vZmZzZXQoKXx8e2xlZnQ6MCx0b3A6MH0sc2Nyb2xsTGVmdDppLnNjcm9sbExlZnQoKSxzY3JvbGxUb3A6aS5zY3JvbGxUb3AoKSx3aWR0aDpzP2kud2lkdGgoKTppLm91dGVyV2lkdGgoKSxoZWlnaHQ6cz9pLmhlaWdodCgpOmkub3V0ZXJIZWlnaHQoKX19fSxlLmZuLnBvc2l0aW9uPWZ1bmN0aW9uKHQpe2lmKCF0fHwhdC5vZilyZXR1cm4gZi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dD1lLmV4dGVuZCh7fSx0KTt2YXIgbixwLG0sZyx2LHksYj1lKHQub2YpLF89ZS5wb3NpdGlvbi5nZXRXaXRoaW5JbmZvKHQud2l0aGluKSx4PWUucG9zaXRpb24uZ2V0U2Nyb2xsSW5mbyhfKSxrPSh0LmNvbGxpc2lvbnx8XCJmbGlwXCIpLnNwbGl0KFwiIFwiKSx3PXt9O3JldHVybiB5PWEoYiksYlswXS5wcmV2ZW50RGVmYXVsdCYmKHQuYXQ9XCJsZWZ0IHRvcFwiKSxwPXkud2lkdGgsbT15LmhlaWdodCxnPXkub2Zmc2V0LHY9ZS5leHRlbmQoe30sZyksZS5lYWNoKFtcIm15XCIsXCJhdFwiXSxmdW5jdGlvbigpe3ZhciBlLGkscz0odFt0aGlzXXx8XCJcIikuc3BsaXQoXCIgXCIpOzE9PT1zLmxlbmd0aCYmKHM9bC50ZXN0KHNbMF0pP3MuY29uY2F0KFtcImNlbnRlclwiXSk6dS50ZXN0KHNbMF0pP1tcImNlbnRlclwiXS5jb25jYXQocyk6W1wiY2VudGVyXCIsXCJjZW50ZXJcIl0pLHNbMF09bC50ZXN0KHNbMF0pP3NbMF06XCJjZW50ZXJcIixzWzFdPXUudGVzdChzWzFdKT9zWzFdOlwiY2VudGVyXCIsZT1jLmV4ZWMoc1swXSksaT1jLmV4ZWMoc1sxXSksd1t0aGlzXT1bZT9lWzBdOjAsaT9pWzBdOjBdLHRbdGhpc109W2QuZXhlYyhzWzBdKVswXSxkLmV4ZWMoc1sxXSlbMF1dfSksMT09PWsubGVuZ3RoJiYoa1sxXT1rWzBdKSxcInJpZ2h0XCI9PT10LmF0WzBdP3YubGVmdCs9cDpcImNlbnRlclwiPT09dC5hdFswXSYmKHYubGVmdCs9cC8yKSxcImJvdHRvbVwiPT09dC5hdFsxXT92LnRvcCs9bTpcImNlbnRlclwiPT09dC5hdFsxXSYmKHYudG9wKz1tLzIpLG49aSh3LmF0LHAsbSksdi5sZWZ0Kz1uWzBdLHYudG9wKz1uWzFdLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBhLGwsdT1lKHRoaXMpLGM9dS5vdXRlcldpZHRoKCksZD11Lm91dGVySGVpZ2h0KCksZj1zKHRoaXMsXCJtYXJnaW5MZWZ0XCIpLHk9cyh0aGlzLFwibWFyZ2luVG9wXCIpLEQ9YytmK3ModGhpcyxcIm1hcmdpblJpZ2h0XCIpK3gud2lkdGgsVD1kK3krcyh0aGlzLFwibWFyZ2luQm90dG9tXCIpK3guaGVpZ2h0LE09ZS5leHRlbmQoe30sdiksUz1pKHcubXksdS5vdXRlcldpZHRoKCksdS5vdXRlckhlaWdodCgpKTtcInJpZ2h0XCI9PT10Lm15WzBdP00ubGVmdC09YzpcImNlbnRlclwiPT09dC5teVswXSYmKE0ubGVmdC09Yy8yKSxcImJvdHRvbVwiPT09dC5teVsxXT9NLnRvcC09ZDpcImNlbnRlclwiPT09dC5teVsxXSYmKE0udG9wLT1kLzIpLE0ubGVmdCs9U1swXSxNLnRvcCs9U1sxXSxlLnN1cHBvcnQub2Zmc2V0RnJhY3Rpb25zfHwoTS5sZWZ0PWgoTS5sZWZ0KSxNLnRvcD1oKE0udG9wKSksYT17bWFyZ2luTGVmdDpmLG1hcmdpblRvcDp5fSxlLmVhY2goW1wibGVmdFwiLFwidG9wXCJdLGZ1bmN0aW9uKGkscyl7ZS51aS5wb3NpdGlvbltrW2ldXSYmZS51aS5wb3NpdGlvbltrW2ldXVtzXShNLHt0YXJnZXRXaWR0aDpwLHRhcmdldEhlaWdodDptLGVsZW1XaWR0aDpjLGVsZW1IZWlnaHQ6ZCxjb2xsaXNpb25Qb3NpdGlvbjphLGNvbGxpc2lvbldpZHRoOkQsY29sbGlzaW9uSGVpZ2h0OlQsb2Zmc2V0OltuWzBdK1NbMF0sblsxXStTWzFdXSxteTp0Lm15LGF0OnQuYXQsd2l0aGluOl8sZWxlbTp1fSl9KSx0LnVzaW5nJiYobD1mdW5jdGlvbihlKXt2YXIgaT1nLmxlZnQtTS5sZWZ0LHM9aStwLWMsYT1nLnRvcC1NLnRvcCxuPWErbS1kLGg9e3RhcmdldDp7ZWxlbWVudDpiLGxlZnQ6Zy5sZWZ0LHRvcDpnLnRvcCx3aWR0aDpwLGhlaWdodDptfSxlbGVtZW50OntlbGVtZW50OnUsbGVmdDpNLmxlZnQsdG9wOk0udG9wLHdpZHRoOmMsaGVpZ2h0OmR9LGhvcml6b250YWw6MD5zP1wibGVmdFwiOmk+MD9cInJpZ2h0XCI6XCJjZW50ZXJcIix2ZXJ0aWNhbDowPm4/XCJ0b3BcIjphPjA/XCJib3R0b21cIjpcIm1pZGRsZVwifTtjPnAmJnA+byhpK3MpJiYoaC5ob3Jpem9udGFsPVwiY2VudGVyXCIpLGQ+bSYmbT5vKGErbikmJihoLnZlcnRpY2FsPVwibWlkZGxlXCIpLGguaW1wb3J0YW50PXIobyhpKSxvKHMpKT5yKG8oYSksbyhuKSk/XCJob3Jpem9udGFsXCI6XCJ2ZXJ0aWNhbFwiLHQudXNpbmcuY2FsbCh0aGlzLGUsaCl9KSx1Lm9mZnNldChlLmV4dGVuZChNLHt1c2luZzpsfSkpfSl9LGUudWkucG9zaXRpb249e2ZpdDp7bGVmdDpmdW5jdGlvbihlLHQpe3ZhciBpLHM9dC53aXRoaW4sYT1zLmlzV2luZG93P3Muc2Nyb2xsTGVmdDpzLm9mZnNldC5sZWZ0LG49cy53aWR0aCxvPWUubGVmdC10LmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpbkxlZnQsaD1hLW8sbD1vK3QuY29sbGlzaW9uV2lkdGgtbi1hO3QuY29sbGlzaW9uV2lkdGg+bj9oPjAmJjA+PWw/KGk9ZS5sZWZ0K2grdC5jb2xsaXNpb25XaWR0aC1uLWEsZS5sZWZ0Kz1oLWkpOmUubGVmdD1sPjAmJjA+PWg/YTpoPmw/YStuLXQuY29sbGlzaW9uV2lkdGg6YTpoPjA/ZS5sZWZ0Kz1oOmw+MD9lLmxlZnQtPWw6ZS5sZWZ0PXIoZS5sZWZ0LW8sZS5sZWZ0KX0sdG9wOmZ1bmN0aW9uKGUsdCl7dmFyIGkscz10LndpdGhpbixhPXMuaXNXaW5kb3c/cy5zY3JvbGxUb3A6cy5vZmZzZXQudG9wLG49dC53aXRoaW4uaGVpZ2h0LG89ZS50b3AtdC5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3AsaD1hLW8sbD1vK3QuY29sbGlzaW9uSGVpZ2h0LW4tYTt0LmNvbGxpc2lvbkhlaWdodD5uP2g+MCYmMD49bD8oaT1lLnRvcCtoK3QuY29sbGlzaW9uSGVpZ2h0LW4tYSxlLnRvcCs9aC1pKTplLnRvcD1sPjAmJjA+PWg/YTpoPmw/YStuLXQuY29sbGlzaW9uSGVpZ2h0OmE6aD4wP2UudG9wKz1oOmw+MD9lLnRvcC09bDplLnRvcD1yKGUudG9wLW8sZS50b3ApfX0sZmxpcDp7bGVmdDpmdW5jdGlvbihlLHQpe3ZhciBpLHMsYT10LndpdGhpbixuPWEub2Zmc2V0LmxlZnQrYS5zY3JvbGxMZWZ0LHI9YS53aWR0aCxoPWEuaXNXaW5kb3c/YS5zY3JvbGxMZWZ0OmEub2Zmc2V0LmxlZnQsbD1lLmxlZnQtdC5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5MZWZ0LHU9bC1oLGM9bCt0LmNvbGxpc2lvbldpZHRoLXItaCxkPVwibGVmdFwiPT09dC5teVswXT8tdC5lbGVtV2lkdGg6XCJyaWdodFwiPT09dC5teVswXT90LmVsZW1XaWR0aDowLHA9XCJsZWZ0XCI9PT10LmF0WzBdP3QudGFyZ2V0V2lkdGg6XCJyaWdodFwiPT09dC5hdFswXT8tdC50YXJnZXRXaWR0aDowLGY9LTIqdC5vZmZzZXRbMF07MD51PyhpPWUubGVmdCtkK3ArZit0LmNvbGxpc2lvbldpZHRoLXItbiwoMD5pfHxvKHUpPmkpJiYoZS5sZWZ0Kz1kK3ArZikpOmM+MCYmKHM9ZS5sZWZ0LXQuY29sbGlzaW9uUG9zaXRpb24ubWFyZ2luTGVmdCtkK3ArZi1oLChzPjB8fGM+byhzKSkmJihlLmxlZnQrPWQrcCtmKSl9LHRvcDpmdW5jdGlvbihlLHQpe3ZhciBpLHMsYT10LndpdGhpbixuPWEub2Zmc2V0LnRvcCthLnNjcm9sbFRvcCxyPWEuaGVpZ2h0LGg9YS5pc1dpbmRvdz9hLnNjcm9sbFRvcDphLm9mZnNldC50b3AsbD1lLnRvcC10LmNvbGxpc2lvblBvc2l0aW9uLm1hcmdpblRvcCx1PWwtaCxjPWwrdC5jb2xsaXNpb25IZWlnaHQtci1oLGQ9XCJ0b3BcIj09PXQubXlbMV0scD1kPy10LmVsZW1IZWlnaHQ6XCJib3R0b21cIj09PXQubXlbMV0/dC5lbGVtSGVpZ2h0OjAsZj1cInRvcFwiPT09dC5hdFsxXT90LnRhcmdldEhlaWdodDpcImJvdHRvbVwiPT09dC5hdFsxXT8tdC50YXJnZXRIZWlnaHQ6MCxtPS0yKnQub2Zmc2V0WzFdOzA+dT8ocz1lLnRvcCtwK2YrbSt0LmNvbGxpc2lvbkhlaWdodC1yLW4sZS50b3ArcCtmK20+dSYmKDA+c3x8byh1KT5zKSYmKGUudG9wKz1wK2YrbSkpOmM+MCYmKGk9ZS50b3AtdC5jb2xsaXNpb25Qb3NpdGlvbi5tYXJnaW5Ub3ArcCtmK20taCxlLnRvcCtwK2YrbT5jJiYoaT4wfHxjPm8oaSkpJiYoZS50b3ArPXArZittKSl9fSxmbGlwZml0OntsZWZ0OmZ1bmN0aW9uKCl7ZS51aS5wb3NpdGlvbi5mbGlwLmxlZnQuYXBwbHkodGhpcyxhcmd1bWVudHMpLGUudWkucG9zaXRpb24uZml0LmxlZnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx0b3A6ZnVuY3Rpb24oKXtlLnVpLnBvc2l0aW9uLmZsaXAudG9wLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlLnVpLnBvc2l0aW9uLmZpdC50b3AuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19LGZ1bmN0aW9uKCl7dmFyIHQsaSxzLGEsbixyPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXSxvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KHI/XCJkaXZcIjpcImJvZHlcIikscz17dmlzaWJpbGl0eTpcImhpZGRlblwiLHdpZHRoOjAsaGVpZ2h0OjAsYm9yZGVyOjAsbWFyZ2luOjAsYmFja2dyb3VuZDpcIm5vbmVcIn0sciYmZS5leHRlbmQocyx7cG9zaXRpb246XCJhYnNvbHV0ZVwiLGxlZnQ6XCItMTAwMHB4XCIsdG9wOlwiLTEwMDBweFwifSk7Zm9yKG4gaW4gcyl0LnN0eWxlW25dPXNbbl07dC5hcHBlbmRDaGlsZChvKSxpPXJ8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxpLmluc2VydEJlZm9yZSh0LGkuZmlyc3RDaGlsZCksby5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246IGFic29sdXRlOyBsZWZ0OiAxMC43NDMyMjIycHg7XCIsYT1lKG8pLm9mZnNldCgpLmxlZnQsZS5zdXBwb3J0Lm9mZnNldEZyYWN0aW9ucz1hPjEwJiYxMT5hLHQuaW5uZXJIVE1MPVwiXCIsaS5yZW1vdmVDaGlsZCh0KX0oKX0pKGpRdWVyeSk7KGZ1bmN0aW9uKGUpe2Uud2lkZ2V0KFwidWkuZHJhZ2dhYmxlXCIsZS51aS5tb3VzZSx7dmVyc2lvbjpcIjEuMTAuM1wiLHdpZGdldEV2ZW50UHJlZml4OlwiZHJhZ1wiLG9wdGlvbnM6e2FkZENsYXNzZXM6ITAsYXBwZW5kVG86XCJwYXJlbnRcIixheGlzOiExLGNvbm5lY3RUb1NvcnRhYmxlOiExLGNvbnRhaW5tZW50OiExLGN1cnNvcjpcImF1dG9cIixjdXJzb3JBdDohMSxncmlkOiExLGhhbmRsZTohMSxoZWxwZXI6XCJvcmlnaW5hbFwiLGlmcmFtZUZpeDohMSxvcGFjaXR5OiExLHJlZnJlc2hQb3NpdGlvbnM6ITEscmV2ZXJ0OiExLHJldmVydER1cmF0aW9uOjUwMCxzY29wZTpcImRlZmF1bHRcIixzY3JvbGw6ITAsc2Nyb2xsU2Vuc2l0aXZpdHk6MjAsc2Nyb2xsU3BlZWQ6MjAsc25hcDohMSxzbmFwTW9kZTpcImJvdGhcIixzbmFwVG9sZXJhbmNlOjIwLHN0YWNrOiExLHpJbmRleDohMSxkcmFnOm51bGwsc3RhcnQ6bnVsbCxzdG9wOm51bGx9LF9jcmVhdGU6ZnVuY3Rpb24oKXtcIm9yaWdpbmFsXCIhPT10aGlzLm9wdGlvbnMuaGVscGVyfHwvXig/OnJ8YXxmKS8udGVzdCh0aGlzLmVsZW1lbnQuY3NzKFwicG9zaXRpb25cIikpfHwodGhpcy5lbGVtZW50WzBdLnN0eWxlLnBvc2l0aW9uPVwicmVsYXRpdmVcIiksdGhpcy5vcHRpb25zLmFkZENsYXNzZXMmJnRoaXMuZWxlbWVudC5hZGRDbGFzcyhcInVpLWRyYWdnYWJsZVwiKSx0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJnRoaXMuZWxlbWVudC5hZGRDbGFzcyhcInVpLWRyYWdnYWJsZS1kaXNhYmxlZFwiKSx0aGlzLl9tb3VzZUluaXQoKX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS1kcmFnZ2FibGUgdWktZHJhZ2dhYmxlLWRyYWdnaW5nIHVpLWRyYWdnYWJsZS1kaXNhYmxlZFwiKSx0aGlzLl9tb3VzZURlc3Ryb3koKX0sX21vdXNlQ2FwdHVyZTpmdW5jdGlvbih0KXt2YXIgaT10aGlzLm9wdGlvbnM7cmV0dXJuIHRoaXMuaGVscGVyfHxpLmRpc2FibGVkfHxlKHQudGFyZ2V0KS5jbG9zZXN0KFwiLnVpLXJlc2l6YWJsZS1oYW5kbGVcIikubGVuZ3RoPjA/ITE6KHRoaXMuaGFuZGxlPXRoaXMuX2dldEhhbmRsZSh0KSx0aGlzLmhhbmRsZT8oZShpLmlmcmFtZUZpeD09PSEwP1wiaWZyYW1lXCI6aS5pZnJhbWVGaXgpLmVhY2goZnVuY3Rpb24oKXtlKFwiPGRpdiBjbGFzcz0ndWktZHJhZ2dhYmxlLWlmcmFtZUZpeCcgc3R5bGU9J2JhY2tncm91bmQ6ICNmZmY7Jz48L2Rpdj5cIikuY3NzKHt3aWR0aDp0aGlzLm9mZnNldFdpZHRoK1wicHhcIixoZWlnaHQ6dGhpcy5vZmZzZXRIZWlnaHQrXCJweFwiLHBvc2l0aW9uOlwiYWJzb2x1dGVcIixvcGFjaXR5OlwiMC4wMDFcIix6SW5kZXg6MWUzfSkuY3NzKGUodGhpcykub2Zmc2V0KCkpLmFwcGVuZFRvKFwiYm9keVwiKX0pLCEwKTohMSl9LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMub3B0aW9ucztyZXR1cm4gdGhpcy5oZWxwZXI9dGhpcy5fY3JlYXRlSGVscGVyKHQpLHRoaXMuaGVscGVyLmFkZENsYXNzKFwidWktZHJhZ2dhYmxlLWRyYWdnaW5nXCIpLHRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKSxlLnVpLmRkbWFuYWdlciYmKGUudWkuZGRtYW5hZ2VyLmN1cnJlbnQ9dGhpcyksdGhpcy5fY2FjaGVNYXJnaW5zKCksdGhpcy5jc3NQb3NpdGlvbj10aGlzLmhlbHBlci5jc3MoXCJwb3NpdGlvblwiKSx0aGlzLnNjcm9sbFBhcmVudD10aGlzLmhlbHBlci5zY3JvbGxQYXJlbnQoKSx0aGlzLm9mZnNldFBhcmVudD10aGlzLmhlbHBlci5vZmZzZXRQYXJlbnQoKSx0aGlzLm9mZnNldFBhcmVudENzc1Bvc2l0aW9uPXRoaXMub2Zmc2V0UGFyZW50LmNzcyhcInBvc2l0aW9uXCIpLHRoaXMub2Zmc2V0PXRoaXMucG9zaXRpb25BYnM9dGhpcy5lbGVtZW50Lm9mZnNldCgpLHRoaXMub2Zmc2V0PXt0b3A6dGhpcy5vZmZzZXQudG9wLXRoaXMubWFyZ2lucy50b3AsbGVmdDp0aGlzLm9mZnNldC5sZWZ0LXRoaXMubWFyZ2lucy5sZWZ0fSx0aGlzLm9mZnNldC5zY3JvbGw9ITEsZS5leHRlbmQodGhpcy5vZmZzZXQse2NsaWNrOntsZWZ0OnQucGFnZVgtdGhpcy5vZmZzZXQubGVmdCx0b3A6dC5wYWdlWS10aGlzLm9mZnNldC50b3B9LHBhcmVudDp0aGlzLl9nZXRQYXJlbnRPZmZzZXQoKSxyZWxhdGl2ZTp0aGlzLl9nZXRSZWxhdGl2ZU9mZnNldCgpfSksdGhpcy5vcmlnaW5hbFBvc2l0aW9uPXRoaXMucG9zaXRpb249dGhpcy5fZ2VuZXJhdGVQb3NpdGlvbih0KSx0aGlzLm9yaWdpbmFsUGFnZVg9dC5wYWdlWCx0aGlzLm9yaWdpbmFsUGFnZVk9dC5wYWdlWSxpLmN1cnNvckF0JiZ0aGlzLl9hZGp1c3RPZmZzZXRGcm9tSGVscGVyKGkuY3Vyc29yQXQpLHRoaXMuX3NldENvbnRhaW5tZW50KCksdGhpcy5fdHJpZ2dlcihcInN0YXJ0XCIsdCk9PT0hMT8odGhpcy5fY2xlYXIoKSwhMSk6KHRoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKSxlLnVpLmRkbWFuYWdlciYmIWkuZHJvcEJlaGF2aW91ciYmZS51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHModGhpcyx0KSx0aGlzLl9tb3VzZURyYWcodCwhMCksZS51aS5kZG1hbmFnZXImJmUudWkuZGRtYW5hZ2VyLmRyYWdTdGFydCh0aGlzLHQpLCEwKX0sX21vdXNlRHJhZzpmdW5jdGlvbih0LGkpe2lmKFwiZml4ZWRcIj09PXRoaXMub2Zmc2V0UGFyZW50Q3NzUG9zaXRpb24mJih0aGlzLm9mZnNldC5wYXJlbnQ9dGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCkpLHRoaXMucG9zaXRpb249dGhpcy5fZ2VuZXJhdGVQb3NpdGlvbih0KSx0aGlzLnBvc2l0aW9uQWJzPXRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKFwiYWJzb2x1dGVcIiksIWkpe3ZhciBhPXRoaXMuX3VpSGFzaCgpO2lmKHRoaXMuX3RyaWdnZXIoXCJkcmFnXCIsdCxhKT09PSExKXJldHVybiB0aGlzLl9tb3VzZVVwKHt9KSwhMTt0aGlzLnBvc2l0aW9uPWEucG9zaXRpb259cmV0dXJuIHRoaXMub3B0aW9ucy5heGlzJiZcInlcIj09PXRoaXMub3B0aW9ucy5heGlzfHwodGhpcy5oZWxwZXJbMF0uc3R5bGUubGVmdD10aGlzLnBvc2l0aW9uLmxlZnQrXCJweFwiKSx0aGlzLm9wdGlvbnMuYXhpcyYmXCJ4XCI9PT10aGlzLm9wdGlvbnMuYXhpc3x8KHRoaXMuaGVscGVyWzBdLnN0eWxlLnRvcD10aGlzLnBvc2l0aW9uLnRvcCtcInB4XCIpLGUudWkuZGRtYW5hZ2VyJiZlLnVpLmRkbWFuYWdlci5kcmFnKHRoaXMsdCksITF9LF9tb3VzZVN0b3A6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcyxhPSExO3JldHVybiBlLnVpLmRkbWFuYWdlciYmIXRoaXMub3B0aW9ucy5kcm9wQmVoYXZpb3VyJiYoYT1lLnVpLmRkbWFuYWdlci5kcm9wKHRoaXMsdCkpLHRoaXMuZHJvcHBlZCYmKGE9dGhpcy5kcm9wcGVkLHRoaXMuZHJvcHBlZD0hMSksXCJvcmlnaW5hbFwiIT09dGhpcy5vcHRpb25zLmhlbHBlcnx8ZS5jb250YWlucyh0aGlzLmVsZW1lbnRbMF0ub3duZXJEb2N1bWVudCx0aGlzLmVsZW1lbnRbMF0pPyhcImludmFsaWRcIj09PXRoaXMub3B0aW9ucy5yZXZlcnQmJiFhfHxcInZhbGlkXCI9PT10aGlzLm9wdGlvbnMucmV2ZXJ0JiZhfHx0aGlzLm9wdGlvbnMucmV2ZXJ0PT09ITB8fGUuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMucmV2ZXJ0KSYmdGhpcy5vcHRpb25zLnJldmVydC5jYWxsKHRoaXMuZWxlbWVudCxhKT9lKHRoaXMuaGVscGVyKS5hbmltYXRlKHRoaXMub3JpZ2luYWxQb3NpdGlvbixwYXJzZUludCh0aGlzLm9wdGlvbnMucmV2ZXJ0RHVyYXRpb24sMTApLGZ1bmN0aW9uKCl7aS5fdHJpZ2dlcihcInN0b3BcIix0KSE9PSExJiZpLl9jbGVhcigpfSk6dGhpcy5fdHJpZ2dlcihcInN0b3BcIix0KSE9PSExJiZ0aGlzLl9jbGVhcigpLCExKTohMX0sX21vdXNlVXA6ZnVuY3Rpb24odCl7cmV0dXJuIGUoXCJkaXYudWktZHJhZ2dhYmxlLWlmcmFtZUZpeFwiKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpfSksZS51aS5kZG1hbmFnZXImJmUudWkuZGRtYW5hZ2VyLmRyYWdTdG9wKHRoaXMsdCksZS51aS5tb3VzZS5wcm90b3R5cGUuX21vdXNlVXAuY2FsbCh0aGlzLHQpfSxjYW5jZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWxwZXIuaXMoXCIudWktZHJhZ2dhYmxlLWRyYWdnaW5nXCIpP3RoaXMuX21vdXNlVXAoe30pOnRoaXMuX2NsZWFyKCksdGhpc30sX2dldEhhbmRsZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLmhhbmRsZT8hIWUodC50YXJnZXQpLmNsb3Nlc3QodGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLmhhbmRsZSkpLmxlbmd0aDohMH0sX2NyZWF0ZUhlbHBlcjpmdW5jdGlvbih0KXt2YXIgaT10aGlzLm9wdGlvbnMsYT1lLmlzRnVuY3Rpb24oaS5oZWxwZXIpP2UoaS5oZWxwZXIuYXBwbHkodGhpcy5lbGVtZW50WzBdLFt0XSkpOlwiY2xvbmVcIj09PWkuaGVscGVyP3RoaXMuZWxlbWVudC5jbG9uZSgpLnJlbW92ZUF0dHIoXCJpZFwiKTp0aGlzLmVsZW1lbnQ7cmV0dXJuIGEucGFyZW50cyhcImJvZHlcIikubGVuZ3RofHxhLmFwcGVuZFRvKFwicGFyZW50XCI9PT1pLmFwcGVuZFRvP3RoaXMuZWxlbWVudFswXS5wYXJlbnROb2RlOmkuYXBwZW5kVG8pLGFbMF09PT10aGlzLmVsZW1lbnRbMF18fC8oZml4ZWR8YWJzb2x1dGUpLy50ZXN0KGEuY3NzKFwicG9zaXRpb25cIikpfHxhLmNzcyhcInBvc2l0aW9uXCIsXCJhYnNvbHV0ZVwiKSxhfSxfYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcjpmdW5jdGlvbih0KXtcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9dC5zcGxpdChcIiBcIikpLGUuaXNBcnJheSh0KSYmKHQ9e2xlZnQ6K3RbMF0sdG9wOit0WzFdfHwwfSksXCJsZWZ0XCJpbiB0JiYodGhpcy5vZmZzZXQuY2xpY2subGVmdD10LmxlZnQrdGhpcy5tYXJnaW5zLmxlZnQpLFwicmlnaHRcImluIHQmJih0aGlzLm9mZnNldC5jbGljay5sZWZ0PXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdC5yaWdodCt0aGlzLm1hcmdpbnMubGVmdCksXCJ0b3BcImluIHQmJih0aGlzLm9mZnNldC5jbGljay50b3A9dC50b3ArdGhpcy5tYXJnaW5zLnRvcCksXCJib3R0b21cImluIHQmJih0aGlzLm9mZnNldC5jbGljay50b3A9dGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdC5ib3R0b20rdGhpcy5tYXJnaW5zLnRvcCl9LF9nZXRQYXJlbnRPZmZzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9mZnNldFBhcmVudC5vZmZzZXQoKTtyZXR1cm5cImFic29sdXRlXCI9PT10aGlzLmNzc1Bvc2l0aW9uJiZ0aGlzLnNjcm9sbFBhcmVudFswXSE9PWRvY3VtZW50JiZlLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLHRoaXMub2Zmc2V0UGFyZW50WzBdKSYmKHQubGVmdCs9dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpLHQudG9wKz10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSksKHRoaXMub2Zmc2V0UGFyZW50WzBdPT09ZG9jdW1lbnQuYm9keXx8dGhpcy5vZmZzZXRQYXJlbnRbMF0udGFnTmFtZSYmXCJodG1sXCI9PT10aGlzLm9mZnNldFBhcmVudFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJmUudWkuaWUpJiYodD17dG9wOjAsbGVmdDowfSkse3RvcDp0LnRvcCsocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKFwiYm9yZGVyVG9wV2lkdGhcIiksMTApfHwwKSxsZWZ0OnQubGVmdCsocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKFwiYm9yZGVyTGVmdFdpZHRoXCIpLDEwKXx8MCl9fSxfZ2V0UmVsYXRpdmVPZmZzZXQ6ZnVuY3Rpb24oKXtpZihcInJlbGF0aXZlXCI9PT10aGlzLmNzc1Bvc2l0aW9uKXt2YXIgZT10aGlzLmVsZW1lbnQucG9zaXRpb24oKTtyZXR1cm57dG9wOmUudG9wLShwYXJzZUludCh0aGlzLmhlbHBlci5jc3MoXCJ0b3BcIiksMTApfHwwKSt0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSxsZWZ0OmUubGVmdC0ocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKFwibGVmdFwiKSwxMCl8fDApK3RoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKX19cmV0dXJue3RvcDowLGxlZnQ6MH19LF9jYWNoZU1hcmdpbnM6ZnVuY3Rpb24oKXt0aGlzLm1hcmdpbnM9e2xlZnQ6cGFyc2VJbnQodGhpcy5lbGVtZW50LmNzcyhcIm1hcmdpbkxlZnRcIiksMTApfHwwLHRvcDpwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKFwibWFyZ2luVG9wXCIpLDEwKXx8MCxyaWdodDpwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKFwibWFyZ2luUmlnaHRcIiksMTApfHwwLGJvdHRvbTpwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKFwibWFyZ2luQm90dG9tXCIpLDEwKXx8MH19LF9jYWNoZUhlbHBlclByb3BvcnRpb25zOmZ1bmN0aW9uKCl7dGhpcy5oZWxwZXJQcm9wb3J0aW9ucz17d2lkdGg6dGhpcy5oZWxwZXIub3V0ZXJXaWR0aCgpLGhlaWdodDp0aGlzLmhlbHBlci5vdXRlckhlaWdodCgpfX0sX3NldENvbnRhaW5tZW50OmZ1bmN0aW9uKCl7dmFyIHQsaSxhLHM9dGhpcy5vcHRpb25zO3JldHVybiBzLmNvbnRhaW5tZW50P1wid2luZG93XCI9PT1zLmNvbnRhaW5tZW50Pyh0aGlzLmNvbnRhaW5tZW50PVtlKHdpbmRvdykuc2Nyb2xsTGVmdCgpLXRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQtdGhpcy5vZmZzZXQucGFyZW50LmxlZnQsZSh3aW5kb3cpLnNjcm9sbFRvcCgpLXRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcC10aGlzLm9mZnNldC5wYXJlbnQudG9wLGUod2luZG93KS5zY3JvbGxMZWZ0KCkrZSh3aW5kb3cpLndpZHRoKCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aC10aGlzLm1hcmdpbnMubGVmdCxlKHdpbmRvdykuc2Nyb2xsVG9wKCkrKGUod2luZG93KS5oZWlnaHQoKXx8ZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdGhpcy5tYXJnaW5zLnRvcF0sdW5kZWZpbmVkKTpcImRvY3VtZW50XCI9PT1zLmNvbnRhaW5tZW50Pyh0aGlzLmNvbnRhaW5tZW50PVswLDAsZShkb2N1bWVudCkud2lkdGgoKS10aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLXRoaXMubWFyZ2lucy5sZWZ0LChlKGRvY3VtZW50KS5oZWlnaHQoKXx8ZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdGhpcy5tYXJnaW5zLnRvcF0sdW5kZWZpbmVkKTpzLmNvbnRhaW5tZW50LmNvbnN0cnVjdG9yPT09QXJyYXk/KHRoaXMuY29udGFpbm1lbnQ9cy5jb250YWlubWVudCx1bmRlZmluZWQpOihcInBhcmVudFwiPT09cy5jb250YWlubWVudCYmKHMuY29udGFpbm1lbnQ9dGhpcy5oZWxwZXJbMF0ucGFyZW50Tm9kZSksaT1lKHMuY29udGFpbm1lbnQpLGE9aVswXSxhJiYodD1cImhpZGRlblwiIT09aS5jc3MoXCJvdmVyZmxvd1wiKSx0aGlzLmNvbnRhaW5tZW50PVsocGFyc2VJbnQoaS5jc3MoXCJib3JkZXJMZWZ0V2lkdGhcIiksMTApfHwwKSsocGFyc2VJbnQoaS5jc3MoXCJwYWRkaW5nTGVmdFwiKSwxMCl8fDApLChwYXJzZUludChpLmNzcyhcImJvcmRlclRvcFdpZHRoXCIpLDEwKXx8MCkrKHBhcnNlSW50KGkuY3NzKFwicGFkZGluZ1RvcFwiKSwxMCl8fDApLCh0P01hdGgubWF4KGEuc2Nyb2xsV2lkdGgsYS5vZmZzZXRXaWR0aCk6YS5vZmZzZXRXaWR0aCktKHBhcnNlSW50KGkuY3NzKFwiYm9yZGVyUmlnaHRXaWR0aFwiKSwxMCl8fDApLShwYXJzZUludChpLmNzcyhcInBhZGRpbmdSaWdodFwiKSwxMCl8fDApLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdGhpcy5tYXJnaW5zLmxlZnQtdGhpcy5tYXJnaW5zLnJpZ2h0LCh0P01hdGgubWF4KGEuc2Nyb2xsSGVpZ2h0LGEub2Zmc2V0SGVpZ2h0KTphLm9mZnNldEhlaWdodCktKHBhcnNlSW50KGkuY3NzKFwiYm9yZGVyQm90dG9tV2lkdGhcIiksMTApfHwwKS0ocGFyc2VJbnQoaS5jc3MoXCJwYWRkaW5nQm90dG9tXCIpLDEwKXx8MCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdGhpcy5tYXJnaW5zLnRvcC10aGlzLm1hcmdpbnMuYm90dG9tXSx0aGlzLnJlbGF0aXZlX2NvbnRhaW5lcj1pKSx1bmRlZmluZWQpOih0aGlzLmNvbnRhaW5tZW50PW51bGwsdW5kZWZpbmVkKX0sX2NvbnZlcnRQb3NpdGlvblRvOmZ1bmN0aW9uKHQsaSl7aXx8KGk9dGhpcy5wb3NpdGlvbik7dmFyIGE9XCJhYnNvbHV0ZVwiPT09dD8xOi0xLHM9XCJhYnNvbHV0ZVwiIT09dGhpcy5jc3NQb3NpdGlvbnx8dGhpcy5zY3JvbGxQYXJlbnRbMF0hPT1kb2N1bWVudCYmZS5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSx0aGlzLm9mZnNldFBhcmVudFswXSk/dGhpcy5zY3JvbGxQYXJlbnQ6dGhpcy5vZmZzZXRQYXJlbnQ7cmV0dXJuIHRoaXMub2Zmc2V0LnNjcm9sbHx8KHRoaXMub2Zmc2V0LnNjcm9sbD17dG9wOnMuc2Nyb2xsVG9wKCksbGVmdDpzLnNjcm9sbExlZnQoKX0pLHt0b3A6aS50b3ArdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wKmErdGhpcy5vZmZzZXQucGFyZW50LnRvcCphLShcImZpeGVkXCI9PT10aGlzLmNzc1Bvc2l0aW9uPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKTp0aGlzLm9mZnNldC5zY3JvbGwudG9wKSphLGxlZnQ6aS5sZWZ0K3RoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQqYSt0aGlzLm9mZnNldC5wYXJlbnQubGVmdCphLShcImZpeGVkXCI9PT10aGlzLmNzc1Bvc2l0aW9uPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk6dGhpcy5vZmZzZXQuc2Nyb2xsLmxlZnQpKmF9fSxfZ2VuZXJhdGVQb3NpdGlvbjpmdW5jdGlvbih0KXt2YXIgaSxhLHMsbixyPXRoaXMub3B0aW9ucyxvPVwiYWJzb2x1dGVcIiE9PXRoaXMuY3NzUG9zaXRpb258fHRoaXMuc2Nyb2xsUGFyZW50WzBdIT09ZG9jdW1lbnQmJmUuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sdGhpcy5vZmZzZXRQYXJlbnRbMF0pP3RoaXMuc2Nyb2xsUGFyZW50OnRoaXMub2Zmc2V0UGFyZW50LGw9dC5wYWdlWCxoPXQucGFnZVk7cmV0dXJuIHRoaXMub2Zmc2V0LnNjcm9sbHx8KHRoaXMub2Zmc2V0LnNjcm9sbD17dG9wOm8uc2Nyb2xsVG9wKCksbGVmdDpvLnNjcm9sbExlZnQoKX0pLHRoaXMub3JpZ2luYWxQb3NpdGlvbiYmKHRoaXMuY29udGFpbm1lbnQmJih0aGlzLnJlbGF0aXZlX2NvbnRhaW5lcj8oYT10aGlzLnJlbGF0aXZlX2NvbnRhaW5lci5vZmZzZXQoKSxpPVt0aGlzLmNvbnRhaW5tZW50WzBdK2EubGVmdCx0aGlzLmNvbnRhaW5tZW50WzFdK2EudG9wLHRoaXMuY29udGFpbm1lbnRbMl0rYS5sZWZ0LHRoaXMuY29udGFpbm1lbnRbM10rYS50b3BdKTppPXRoaXMuY29udGFpbm1lbnQsdC5wYWdlWC10aGlzLm9mZnNldC5jbGljay5sZWZ0PGlbMF0mJihsPWlbMF0rdGhpcy5vZmZzZXQuY2xpY2subGVmdCksdC5wYWdlWS10aGlzLm9mZnNldC5jbGljay50b3A8aVsxXSYmKGg9aVsxXSt0aGlzLm9mZnNldC5jbGljay50b3ApLHQucGFnZVgtdGhpcy5vZmZzZXQuY2xpY2subGVmdD5pWzJdJiYobD1pWzJdK3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQpLHQucGFnZVktdGhpcy5vZmZzZXQuY2xpY2sudG9wPmlbM10mJihoPWlbM10rdGhpcy5vZmZzZXQuY2xpY2sudG9wKSksci5ncmlkJiYocz1yLmdyaWRbMV0/dGhpcy5vcmlnaW5hbFBhZ2VZK01hdGgucm91bmQoKGgtdGhpcy5vcmlnaW5hbFBhZ2VZKS9yLmdyaWRbMV0pKnIuZ3JpZFsxXTp0aGlzLm9yaWdpbmFsUGFnZVksaD1pP3MtdGhpcy5vZmZzZXQuY2xpY2sudG9wPj1pWzFdfHxzLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD5pWzNdP3M6cy10aGlzLm9mZnNldC5jbGljay50b3A+PWlbMV0/cy1yLmdyaWRbMV06cytyLmdyaWRbMV06cyxuPXIuZ3JpZFswXT90aGlzLm9yaWdpbmFsUGFnZVgrTWF0aC5yb3VuZCgobC10aGlzLm9yaWdpbmFsUGFnZVgpL3IuZ3JpZFswXSkqci5ncmlkWzBdOnRoaXMub3JpZ2luYWxQYWdlWCxsPWk/bi10aGlzLm9mZnNldC5jbGljay5sZWZ0Pj1pWzBdfHxuLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ+aVsyXT9uOm4tdGhpcy5vZmZzZXQuY2xpY2subGVmdD49aVswXT9uLXIuZ3JpZFswXTpuK3IuZ3JpZFswXTpuKSkse3RvcDpoLXRoaXMub2Zmc2V0LmNsaWNrLnRvcC10aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AtdGhpcy5vZmZzZXQucGFyZW50LnRvcCsoXCJmaXhlZFwiPT09dGhpcy5jc3NQb3NpdGlvbj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCk6dGhpcy5vZmZzZXQuc2Nyb2xsLnRvcCksbGVmdDpsLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQtdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdC10aGlzLm9mZnNldC5wYXJlbnQubGVmdCsoXCJmaXhlZFwiPT09dGhpcy5jc3NQb3NpdGlvbj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpOnRoaXMub2Zmc2V0LnNjcm9sbC5sZWZ0KX19LF9jbGVhcjpmdW5jdGlvbigpe3RoaXMuaGVscGVyLnJlbW92ZUNsYXNzKFwidWktZHJhZ2dhYmxlLWRyYWdnaW5nXCIpLHRoaXMuaGVscGVyWzBdPT09dGhpcy5lbGVtZW50WzBdfHx0aGlzLmNhbmNlbEhlbHBlclJlbW92YWx8fHRoaXMuaGVscGVyLnJlbW92ZSgpLHRoaXMuaGVscGVyPW51bGwsdGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsPSExfSxfdHJpZ2dlcjpmdW5jdGlvbih0LGksYSl7cmV0dXJuIGE9YXx8dGhpcy5fdWlIYXNoKCksZS51aS5wbHVnaW4uY2FsbCh0aGlzLHQsW2ksYV0pLFwiZHJhZ1wiPT09dCYmKHRoaXMucG9zaXRpb25BYnM9dGhpcy5fY29udmVydFBvc2l0aW9uVG8oXCJhYnNvbHV0ZVwiKSksZS5XaWRnZXQucHJvdG90eXBlLl90cmlnZ2VyLmNhbGwodGhpcyx0LGksYSl9LHBsdWdpbnM6e30sX3VpSGFzaDpmdW5jdGlvbigpe3JldHVybntoZWxwZXI6dGhpcy5oZWxwZXIscG9zaXRpb246dGhpcy5wb3NpdGlvbixvcmlnaW5hbFBvc2l0aW9uOnRoaXMub3JpZ2luYWxQb3NpdGlvbixvZmZzZXQ6dGhpcy5wb3NpdGlvbkFic319fSksZS51aS5wbHVnaW4uYWRkKFwiZHJhZ2dhYmxlXCIsXCJjb25uZWN0VG9Tb3J0YWJsZVwiLHtzdGFydDpmdW5jdGlvbih0LGkpe3ZhciBhPWUodGhpcykuZGF0YShcInVpLWRyYWdnYWJsZVwiKSxzPWEub3B0aW9ucyxuPWUuZXh0ZW5kKHt9LGkse2l0ZW06YS5lbGVtZW50fSk7YS5zb3J0YWJsZXM9W10sZShzLmNvbm5lY3RUb1NvcnRhYmxlKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGk9ZS5kYXRhKHRoaXMsXCJ1aS1zb3J0YWJsZVwiKTtpJiYhaS5vcHRpb25zLmRpc2FibGVkJiYoYS5zb3J0YWJsZXMucHVzaCh7aW5zdGFuY2U6aSxzaG91bGRSZXZlcnQ6aS5vcHRpb25zLnJldmVydH0pLGkucmVmcmVzaFBvc2l0aW9ucygpLGkuX3RyaWdnZXIoXCJhY3RpdmF0ZVwiLHQsbikpfSl9LHN0b3A6ZnVuY3Rpb24odCxpKXt2YXIgYT1lKHRoaXMpLmRhdGEoXCJ1aS1kcmFnZ2FibGVcIikscz1lLmV4dGVuZCh7fSxpLHtpdGVtOmEuZWxlbWVudH0pO2UuZWFjaChhLnNvcnRhYmxlcyxmdW5jdGlvbigpe3RoaXMuaW5zdGFuY2UuaXNPdmVyPyh0aGlzLmluc3RhbmNlLmlzT3Zlcj0wLGEuY2FuY2VsSGVscGVyUmVtb3ZhbD0hMCx0aGlzLmluc3RhbmNlLmNhbmNlbEhlbHBlclJlbW92YWw9ITEsdGhpcy5zaG91bGRSZXZlcnQmJih0aGlzLmluc3RhbmNlLm9wdGlvbnMucmV2ZXJ0PXRoaXMuc2hvdWxkUmV2ZXJ0KSx0aGlzLmluc3RhbmNlLl9tb3VzZVN0b3AodCksdGhpcy5pbnN0YW5jZS5vcHRpb25zLmhlbHBlcj10aGlzLmluc3RhbmNlLm9wdGlvbnMuX2hlbHBlcixcIm9yaWdpbmFsXCI9PT1hLm9wdGlvbnMuaGVscGVyJiZ0aGlzLmluc3RhbmNlLmN1cnJlbnRJdGVtLmNzcyh7dG9wOlwiYXV0b1wiLGxlZnQ6XCJhdXRvXCJ9KSk6KHRoaXMuaW5zdGFuY2UuY2FuY2VsSGVscGVyUmVtb3ZhbD0hMSx0aGlzLmluc3RhbmNlLl90cmlnZ2VyKFwiZGVhY3RpdmF0ZVwiLHQscykpfSl9LGRyYWc6ZnVuY3Rpb24odCxpKXt2YXIgYT1lKHRoaXMpLmRhdGEoXCJ1aS1kcmFnZ2FibGVcIikscz10aGlzO2UuZWFjaChhLnNvcnRhYmxlcyxmdW5jdGlvbigpe3ZhciBuPSExLHI9dGhpczt0aGlzLmluc3RhbmNlLnBvc2l0aW9uQWJzPWEucG9zaXRpb25BYnMsdGhpcy5pbnN0YW5jZS5oZWxwZXJQcm9wb3J0aW9ucz1hLmhlbHBlclByb3BvcnRpb25zLHRoaXMuaW5zdGFuY2Uub2Zmc2V0LmNsaWNrPWEub2Zmc2V0LmNsaWNrLHRoaXMuaW5zdGFuY2UuX2ludGVyc2VjdHNXaXRoKHRoaXMuaW5zdGFuY2UuY29udGFpbmVyQ2FjaGUpJiYobj0hMCxlLmVhY2goYS5zb3J0YWJsZXMsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnN0YW5jZS5wb3NpdGlvbkFicz1hLnBvc2l0aW9uQWJzLHRoaXMuaW5zdGFuY2UuaGVscGVyUHJvcG9ydGlvbnM9YS5oZWxwZXJQcm9wb3J0aW9ucyx0aGlzLmluc3RhbmNlLm9mZnNldC5jbGljaz1hLm9mZnNldC5jbGljayx0aGlzIT09ciYmdGhpcy5pbnN0YW5jZS5faW50ZXJzZWN0c1dpdGgodGhpcy5pbnN0YW5jZS5jb250YWluZXJDYWNoZSkmJmUuY29udGFpbnMoci5pbnN0YW5jZS5lbGVtZW50WzBdLHRoaXMuaW5zdGFuY2UuZWxlbWVudFswXSkmJihuPSExKSxufSkpLG4/KHRoaXMuaW5zdGFuY2UuaXNPdmVyfHwodGhpcy5pbnN0YW5jZS5pc092ZXI9MSx0aGlzLmluc3RhbmNlLmN1cnJlbnRJdGVtPWUocykuY2xvbmUoKS5yZW1vdmVBdHRyKFwiaWRcIikuYXBwZW5kVG8odGhpcy5pbnN0YW5jZS5lbGVtZW50KS5kYXRhKFwidWktc29ydGFibGUtaXRlbVwiLCEwKSx0aGlzLmluc3RhbmNlLm9wdGlvbnMuX2hlbHBlcj10aGlzLmluc3RhbmNlLm9wdGlvbnMuaGVscGVyLHRoaXMuaW5zdGFuY2Uub3B0aW9ucy5oZWxwZXI9ZnVuY3Rpb24oKXtyZXR1cm4gaS5oZWxwZXJbMF19LHQudGFyZ2V0PXRoaXMuaW5zdGFuY2UuY3VycmVudEl0ZW1bMF0sdGhpcy5pbnN0YW5jZS5fbW91c2VDYXB0dXJlKHQsITApLHRoaXMuaW5zdGFuY2UuX21vdXNlU3RhcnQodCwhMCwhMCksdGhpcy5pbnN0YW5jZS5vZmZzZXQuY2xpY2sudG9wPWEub2Zmc2V0LmNsaWNrLnRvcCx0aGlzLmluc3RhbmNlLm9mZnNldC5jbGljay5sZWZ0PWEub2Zmc2V0LmNsaWNrLmxlZnQsdGhpcy5pbnN0YW5jZS5vZmZzZXQucGFyZW50LmxlZnQtPWEub2Zmc2V0LnBhcmVudC5sZWZ0LXRoaXMuaW5zdGFuY2Uub2Zmc2V0LnBhcmVudC5sZWZ0LHRoaXMuaW5zdGFuY2Uub2Zmc2V0LnBhcmVudC50b3AtPWEub2Zmc2V0LnBhcmVudC50b3AtdGhpcy5pbnN0YW5jZS5vZmZzZXQucGFyZW50LnRvcCxhLl90cmlnZ2VyKFwidG9Tb3J0YWJsZVwiLHQpLGEuZHJvcHBlZD10aGlzLmluc3RhbmNlLmVsZW1lbnQsYS5jdXJyZW50SXRlbT1hLmVsZW1lbnQsdGhpcy5pbnN0YW5jZS5mcm9tT3V0c2lkZT1hKSx0aGlzLmluc3RhbmNlLmN1cnJlbnRJdGVtJiZ0aGlzLmluc3RhbmNlLl9tb3VzZURyYWcodCkpOnRoaXMuaW5zdGFuY2UuaXNPdmVyJiYodGhpcy5pbnN0YW5jZS5pc092ZXI9MCx0aGlzLmluc3RhbmNlLmNhbmNlbEhlbHBlclJlbW92YWw9ITAsdGhpcy5pbnN0YW5jZS5vcHRpb25zLnJldmVydD0hMSx0aGlzLmluc3RhbmNlLl90cmlnZ2VyKFwib3V0XCIsdCx0aGlzLmluc3RhbmNlLl91aUhhc2godGhpcy5pbnN0YW5jZSkpLHRoaXMuaW5zdGFuY2UuX21vdXNlU3RvcCh0LCEwKSx0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGVscGVyPXRoaXMuaW5zdGFuY2Uub3B0aW9ucy5faGVscGVyLHRoaXMuaW5zdGFuY2UuY3VycmVudEl0ZW0ucmVtb3ZlKCksdGhpcy5pbnN0YW5jZS5wbGFjZWhvbGRlciYmdGhpcy5pbnN0YW5jZS5wbGFjZWhvbGRlci5yZW1vdmUoKSxhLl90cmlnZ2VyKFwiZnJvbVNvcnRhYmxlXCIsdCksYS5kcm9wcGVkPSExKX0pfX0pLGUudWkucGx1Z2luLmFkZChcImRyYWdnYWJsZVwiLFwiY3Vyc29yXCIse3N0YXJ0OmZ1bmN0aW9uKCl7dmFyIHQ9ZShcImJvZHlcIiksaT1lKHRoaXMpLmRhdGEoXCJ1aS1kcmFnZ2FibGVcIikub3B0aW9uczt0LmNzcyhcImN1cnNvclwiKSYmKGkuX2N1cnNvcj10LmNzcyhcImN1cnNvclwiKSksdC5jc3MoXCJjdXJzb3JcIixpLmN1cnNvcil9LHN0b3A6ZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLmRhdGEoXCJ1aS1kcmFnZ2FibGVcIikub3B0aW9uczt0Ll9jdXJzb3ImJmUoXCJib2R5XCIpLmNzcyhcImN1cnNvclwiLHQuX2N1cnNvcil9fSksZS51aS5wbHVnaW4uYWRkKFwiZHJhZ2dhYmxlXCIsXCJvcGFjaXR5XCIse3N0YXJ0OmZ1bmN0aW9uKHQsaSl7dmFyIGE9ZShpLmhlbHBlcikscz1lKHRoaXMpLmRhdGEoXCJ1aS1kcmFnZ2FibGVcIikub3B0aW9uczthLmNzcyhcIm9wYWNpdHlcIikmJihzLl9vcGFjaXR5PWEuY3NzKFwib3BhY2l0eVwiKSksYS5jc3MoXCJvcGFjaXR5XCIscy5vcGFjaXR5KX0sc3RvcDpmdW5jdGlvbih0LGkpe3ZhciBhPWUodGhpcykuZGF0YShcInVpLWRyYWdnYWJsZVwiKS5vcHRpb25zO2EuX29wYWNpdHkmJmUoaS5oZWxwZXIpLmNzcyhcIm9wYWNpdHlcIixhLl9vcGFjaXR5KX19KSxlLnVpLnBsdWdpbi5hZGQoXCJkcmFnZ2FibGVcIixcInNjcm9sbFwiLHtzdGFydDpmdW5jdGlvbigpe3ZhciB0PWUodGhpcykuZGF0YShcInVpLWRyYWdnYWJsZVwiKTt0LnNjcm9sbFBhcmVudFswXSE9PWRvY3VtZW50JiZcIkhUTUxcIiE9PXQuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWUmJih0Lm92ZXJmbG93T2Zmc2V0PXQuc2Nyb2xsUGFyZW50Lm9mZnNldCgpKX0sZHJhZzpmdW5jdGlvbih0KXt2YXIgaT1lKHRoaXMpLmRhdGEoXCJ1aS1kcmFnZ2FibGVcIiksYT1pLm9wdGlvbnMscz0hMTtpLnNjcm9sbFBhcmVudFswXSE9PWRvY3VtZW50JiZcIkhUTUxcIiE9PWkuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWU/KGEuYXhpcyYmXCJ4XCI9PT1hLmF4aXN8fChpLm92ZXJmbG93T2Zmc2V0LnRvcCtpLnNjcm9sbFBhcmVudFswXS5vZmZzZXRIZWlnaHQtdC5wYWdlWTxhLnNjcm9sbFNlbnNpdGl2aXR5P2kuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcD1zPWkuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcCthLnNjcm9sbFNwZWVkOnQucGFnZVktaS5vdmVyZmxvd09mZnNldC50b3A8YS5zY3JvbGxTZW5zaXRpdml0eSYmKGkuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcD1zPWkuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbFRvcC1hLnNjcm9sbFNwZWVkKSksYS5heGlzJiZcInlcIj09PWEuYXhpc3x8KGkub3ZlcmZsb3dPZmZzZXQubGVmdCtpLnNjcm9sbFBhcmVudFswXS5vZmZzZXRXaWR0aC10LnBhZ2VYPGEuc2Nyb2xsU2Vuc2l0aXZpdHk/aS5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdD1zPWkuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQrYS5zY3JvbGxTcGVlZDp0LnBhZ2VYLWkub3ZlcmZsb3dPZmZzZXQubGVmdDxhLnNjcm9sbFNlbnNpdGl2aXR5JiYoaS5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdD1zPWkuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQtYS5zY3JvbGxTcGVlZCkpKTooYS5heGlzJiZcInhcIj09PWEuYXhpc3x8KHQucGFnZVktZShkb2N1bWVudCkuc2Nyb2xsVG9wKCk8YS5zY3JvbGxTZW5zaXRpdml0eT9zPWUoZG9jdW1lbnQpLnNjcm9sbFRvcChlKGRvY3VtZW50KS5zY3JvbGxUb3AoKS1hLnNjcm9sbFNwZWVkKTplKHdpbmRvdykuaGVpZ2h0KCktKHQucGFnZVktZShkb2N1bWVudCkuc2Nyb2xsVG9wKCkpPGEuc2Nyb2xsU2Vuc2l0aXZpdHkmJihzPWUoZG9jdW1lbnQpLnNjcm9sbFRvcChlKGRvY3VtZW50KS5zY3JvbGxUb3AoKSthLnNjcm9sbFNwZWVkKSkpLGEuYXhpcyYmXCJ5XCI9PT1hLmF4aXN8fCh0LnBhZ2VYLWUoZG9jdW1lbnQpLnNjcm9sbExlZnQoKTxhLnNjcm9sbFNlbnNpdGl2aXR5P3M9ZShkb2N1bWVudCkuc2Nyb2xsTGVmdChlKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCktYS5zY3JvbGxTcGVlZCk6ZSh3aW5kb3cpLndpZHRoKCktKHQucGFnZVgtZShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpKTxhLnNjcm9sbFNlbnNpdGl2aXR5JiYocz1lKGRvY3VtZW50KS5zY3JvbGxMZWZ0KGUoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSthLnNjcm9sbFNwZWVkKSkpKSxzIT09ITEmJmUudWkuZGRtYW5hZ2VyJiYhYS5kcm9wQmVoYXZpb3VyJiZlLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyhpLHQpfX0pLGUudWkucGx1Z2luLmFkZChcImRyYWdnYWJsZVwiLFwic25hcFwiLHtzdGFydDpmdW5jdGlvbigpe3ZhciB0PWUodGhpcykuZGF0YShcInVpLWRyYWdnYWJsZVwiKSxpPXQub3B0aW9uczt0LnNuYXBFbGVtZW50cz1bXSxlKGkuc25hcC5jb25zdHJ1Y3RvciE9PVN0cmluZz9pLnNuYXAuaXRlbXN8fFwiOmRhdGEodWktZHJhZ2dhYmxlKVwiOmkuc25hcCkuZWFjaChmdW5jdGlvbigpe3ZhciBpPWUodGhpcyksYT1pLm9mZnNldCgpO3RoaXMhPT10LmVsZW1lbnRbMF0mJnQuc25hcEVsZW1lbnRzLnB1c2goe2l0ZW06dGhpcyx3aWR0aDppLm91dGVyV2lkdGgoKSxoZWlnaHQ6aS5vdXRlckhlaWdodCgpLHRvcDphLnRvcCxsZWZ0OmEubGVmdH0pfSl9LGRyYWc6ZnVuY3Rpb24odCxpKXt2YXIgYSxzLG4scixvLGwsaCx1LGQsYyxwPWUodGhpcykuZGF0YShcInVpLWRyYWdnYWJsZVwiKSxmPXAub3B0aW9ucyxtPWYuc25hcFRvbGVyYW5jZSxnPWkub2Zmc2V0LmxlZnQsdj1nK3AuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgseT1pLm9mZnNldC50b3AsYj15K3AuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0O2ZvcihkPXAuc25hcEVsZW1lbnRzLmxlbmd0aC0xO2Q+PTA7ZC0tKW89cC5zbmFwRWxlbWVudHNbZF0ubGVmdCxsPW8rcC5zbmFwRWxlbWVudHNbZF0ud2lkdGgsaD1wLnNuYXBFbGVtZW50c1tkXS50b3AsdT1oK3Auc25hcEVsZW1lbnRzW2RdLmhlaWdodCxvLW0+dnx8Zz5sK218fGgtbT5ifHx5PnUrbXx8IWUuY29udGFpbnMocC5zbmFwRWxlbWVudHNbZF0uaXRlbS5vd25lckRvY3VtZW50LHAuc25hcEVsZW1lbnRzW2RdLml0ZW0pPyhwLnNuYXBFbGVtZW50c1tkXS5zbmFwcGluZyYmcC5vcHRpb25zLnNuYXAucmVsZWFzZSYmcC5vcHRpb25zLnNuYXAucmVsZWFzZS5jYWxsKHAuZWxlbWVudCx0LGUuZXh0ZW5kKHAuX3VpSGFzaCgpLHtzbmFwSXRlbTpwLnNuYXBFbGVtZW50c1tkXS5pdGVtfSkpLHAuc25hcEVsZW1lbnRzW2RdLnNuYXBwaW5nPSExKTooXCJpbm5lclwiIT09Zi5zbmFwTW9kZSYmKGE9bT49TWF0aC5hYnMoaC1iKSxzPW0+PU1hdGguYWJzKHUteSksbj1tPj1NYXRoLmFicyhvLXYpLHI9bT49TWF0aC5hYnMobC1nKSxhJiYoaS5wb3NpdGlvbi50b3A9cC5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLHt0b3A6aC1wLmhlbHBlclByb3BvcnRpb25zLmhlaWdodCxsZWZ0OjB9KS50b3AtcC5tYXJnaW5zLnRvcCkscyYmKGkucG9zaXRpb24udG9wPXAuX2NvbnZlcnRQb3NpdGlvblRvKFwicmVsYXRpdmVcIix7dG9wOnUsbGVmdDowfSkudG9wLXAubWFyZ2lucy50b3ApLG4mJihpLnBvc2l0aW9uLmxlZnQ9cC5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLHt0b3A6MCxsZWZ0Om8tcC5oZWxwZXJQcm9wb3J0aW9ucy53aWR0aH0pLmxlZnQtcC5tYXJnaW5zLmxlZnQpLHImJihpLnBvc2l0aW9uLmxlZnQ9cC5fY29udmVydFBvc2l0aW9uVG8oXCJyZWxhdGl2ZVwiLHt0b3A6MCxsZWZ0Omx9KS5sZWZ0LXAubWFyZ2lucy5sZWZ0KSksYz1hfHxzfHxufHxyLFwib3V0ZXJcIiE9PWYuc25hcE1vZGUmJihhPW0+PU1hdGguYWJzKGgteSkscz1tPj1NYXRoLmFicyh1LWIpLG49bT49TWF0aC5hYnMoby1nKSxyPW0+PU1hdGguYWJzKGwtdiksYSYmKGkucG9zaXRpb24udG9wPXAuX2NvbnZlcnRQb3NpdGlvblRvKFwicmVsYXRpdmVcIix7dG9wOmgsbGVmdDowfSkudG9wLXAubWFyZ2lucy50b3ApLHMmJihpLnBvc2l0aW9uLnRvcD1wLl9jb252ZXJ0UG9zaXRpb25UbyhcInJlbGF0aXZlXCIse3RvcDp1LXAuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LGxlZnQ6MH0pLnRvcC1wLm1hcmdpbnMudG9wKSxuJiYoaS5wb3NpdGlvbi5sZWZ0PXAuX2NvbnZlcnRQb3NpdGlvblRvKFwicmVsYXRpdmVcIix7dG9wOjAsbGVmdDpvfSkubGVmdC1wLm1hcmdpbnMubGVmdCksciYmKGkucG9zaXRpb24ubGVmdD1wLl9jb252ZXJ0UG9zaXRpb25UbyhcInJlbGF0aXZlXCIse3RvcDowLGxlZnQ6bC1wLmhlbHBlclByb3BvcnRpb25zLndpZHRofSkubGVmdC1wLm1hcmdpbnMubGVmdCkpLCFwLnNuYXBFbGVtZW50c1tkXS5zbmFwcGluZyYmKGF8fHN8fG58fHJ8fGMpJiZwLm9wdGlvbnMuc25hcC5zbmFwJiZwLm9wdGlvbnMuc25hcC5zbmFwLmNhbGwocC5lbGVtZW50LHQsZS5leHRlbmQocC5fdWlIYXNoKCkse3NuYXBJdGVtOnAuc25hcEVsZW1lbnRzW2RdLml0ZW19KSkscC5zbmFwRWxlbWVudHNbZF0uc25hcHBpbmc9YXx8c3x8bnx8cnx8Yyl9fSksZS51aS5wbHVnaW4uYWRkKFwiZHJhZ2dhYmxlXCIsXCJzdGFja1wiLHtzdGFydDpmdW5jdGlvbigpe3ZhciB0LGk9dGhpcy5kYXRhKFwidWktZHJhZ2dhYmxlXCIpLm9wdGlvbnMsYT1lLm1ha2VBcnJheShlKGkuc3RhY2spKS5zb3J0KGZ1bmN0aW9uKHQsaSl7cmV0dXJuKHBhcnNlSW50KGUodCkuY3NzKFwiekluZGV4XCIpLDEwKXx8MCktKHBhcnNlSW50KGUoaSkuY3NzKFwiekluZGV4XCIpLDEwKXx8MCl9KTthLmxlbmd0aCYmKHQ9cGFyc2VJbnQoZShhWzBdKS5jc3MoXCJ6SW5kZXhcIiksMTApfHwwLGUoYSkuZWFjaChmdW5jdGlvbihpKXtlKHRoaXMpLmNzcyhcInpJbmRleFwiLHQraSl9KSx0aGlzLmNzcyhcInpJbmRleFwiLHQrYS5sZW5ndGgpKX19KSxlLnVpLnBsdWdpbi5hZGQoXCJkcmFnZ2FibGVcIixcInpJbmRleFwiLHtzdGFydDpmdW5jdGlvbih0LGkpe3ZhciBhPWUoaS5oZWxwZXIpLHM9ZSh0aGlzKS5kYXRhKFwidWktZHJhZ2dhYmxlXCIpLm9wdGlvbnM7YS5jc3MoXCJ6SW5kZXhcIikmJihzLl96SW5kZXg9YS5jc3MoXCJ6SW5kZXhcIikpLGEuY3NzKFwiekluZGV4XCIscy56SW5kZXgpfSxzdG9wOmZ1bmN0aW9uKHQsaSl7dmFyIGE9ZSh0aGlzKS5kYXRhKFwidWktZHJhZ2dhYmxlXCIpLm9wdGlvbnM7YS5fekluZGV4JiZlKGkuaGVscGVyKS5jc3MoXCJ6SW5kZXhcIixhLl96SW5kZXgpfX0pfSkoalF1ZXJ5KTsoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtyZXR1cm4gcGFyc2VJbnQoZSwxMCl8fDB9ZnVuY3Rpb24gaShlKXtyZXR1cm4haXNOYU4ocGFyc2VJbnQoZSwxMCkpfWUud2lkZ2V0KFwidWkucmVzaXphYmxlXCIsZS51aS5tb3VzZSx7dmVyc2lvbjpcIjEuMTAuM1wiLHdpZGdldEV2ZW50UHJlZml4OlwicmVzaXplXCIsb3B0aW9uczp7YWxzb1Jlc2l6ZTohMSxhbmltYXRlOiExLGFuaW1hdGVEdXJhdGlvbjpcInNsb3dcIixhbmltYXRlRWFzaW5nOlwic3dpbmdcIixhc3BlY3RSYXRpbzohMSxhdXRvSGlkZTohMSxjb250YWlubWVudDohMSxnaG9zdDohMSxncmlkOiExLGhhbmRsZXM6XCJlLHMsc2VcIixoZWxwZXI6ITEsbWF4SGVpZ2h0Om51bGwsbWF4V2lkdGg6bnVsbCxtaW5IZWlnaHQ6MTAsbWluV2lkdGg6MTAsekluZGV4OjkwLHJlc2l6ZTpudWxsLHN0YXJ0Om51bGwsc3RvcDpudWxsfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIHQsaSxzLGEsbixyPXRoaXMsbz10aGlzLm9wdGlvbnM7aWYodGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktcmVzaXphYmxlXCIpLGUuZXh0ZW5kKHRoaXMse19hc3BlY3RSYXRpbzohIW8uYXNwZWN0UmF0aW8sYXNwZWN0UmF0aW86by5hc3BlY3RSYXRpbyxvcmlnaW5hbEVsZW1lbnQ6dGhpcy5lbGVtZW50LF9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzOltdLF9oZWxwZXI6by5oZWxwZXJ8fG8uZ2hvc3R8fG8uYW5pbWF0ZT9vLmhlbHBlcnx8XCJ1aS1yZXNpemFibGUtaGVscGVyXCI6bnVsbH0pLHRoaXMuZWxlbWVudFswXS5ub2RlTmFtZS5tYXRjaCgvY2FudmFzfHRleHRhcmVhfGlucHV0fHNlbGVjdHxidXR0b258aW1nL2kpJiYodGhpcy5lbGVtZW50LndyYXAoZShcIjxkaXYgY2xhc3M9J3VpLXdyYXBwZXInIHN0eWxlPSdvdmVyZmxvdzogaGlkZGVuOyc+PC9kaXY+XCIpLmNzcyh7cG9zaXRpb246dGhpcy5lbGVtZW50LmNzcyhcInBvc2l0aW9uXCIpLHdpZHRoOnRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCksaGVpZ2h0OnRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpLHRvcDp0aGlzLmVsZW1lbnQuY3NzKFwidG9wXCIpLGxlZnQ6dGhpcy5lbGVtZW50LmNzcyhcImxlZnRcIil9KSksdGhpcy5lbGVtZW50PXRoaXMuZWxlbWVudC5wYXJlbnQoKS5kYXRhKFwidWktcmVzaXphYmxlXCIsdGhpcy5lbGVtZW50LmRhdGEoXCJ1aS1yZXNpemFibGVcIikpLHRoaXMuZWxlbWVudElzV3JhcHBlcj0hMCx0aGlzLmVsZW1lbnQuY3NzKHttYXJnaW5MZWZ0OnRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyhcIm1hcmdpbkxlZnRcIiksbWFyZ2luVG9wOnRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyhcIm1hcmdpblRvcFwiKSxtYXJnaW5SaWdodDp0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoXCJtYXJnaW5SaWdodFwiKSxtYXJnaW5Cb3R0b206dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKFwibWFyZ2luQm90dG9tXCIpfSksdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKHttYXJnaW5MZWZ0OjAsbWFyZ2luVG9wOjAsbWFyZ2luUmlnaHQ6MCxtYXJnaW5Cb3R0b206MH0pLHRoaXMub3JpZ2luYWxSZXNpemVTdHlsZT10aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoXCJyZXNpemVcIiksdGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKFwicmVzaXplXCIsXCJub25lXCIpLHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMucHVzaCh0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3Moe3Bvc2l0aW9uOlwic3RhdGljXCIsem9vbToxLGRpc3BsYXk6XCJibG9ja1wifSkpLHRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyh7bWFyZ2luOnRoaXMub3JpZ2luYWxFbGVtZW50LmNzcyhcIm1hcmdpblwiKX0pLHRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCkpLHRoaXMuaGFuZGxlcz1vLmhhbmRsZXN8fChlKFwiLnVpLXJlc2l6YWJsZS1oYW5kbGVcIix0aGlzLmVsZW1lbnQpLmxlbmd0aD97bjpcIi51aS1yZXNpemFibGUtblwiLGU6XCIudWktcmVzaXphYmxlLWVcIixzOlwiLnVpLXJlc2l6YWJsZS1zXCIsdzpcIi51aS1yZXNpemFibGUtd1wiLHNlOlwiLnVpLXJlc2l6YWJsZS1zZVwiLHN3OlwiLnVpLXJlc2l6YWJsZS1zd1wiLG5lOlwiLnVpLXJlc2l6YWJsZS1uZVwiLG53OlwiLnVpLXJlc2l6YWJsZS1ud1wifTpcImUscyxzZVwiKSx0aGlzLmhhbmRsZXMuY29uc3RydWN0b3I9PT1TdHJpbmcpZm9yKFwiYWxsXCI9PT10aGlzLmhhbmRsZXMmJih0aGlzLmhhbmRsZXM9XCJuLGUscyx3LHNlLHN3LG5lLG53XCIpLHQ9dGhpcy5oYW5kbGVzLnNwbGl0KFwiLFwiKSx0aGlzLmhhbmRsZXM9e30saT0wO3QubGVuZ3RoPmk7aSsrKXM9ZS50cmltKHRbaV0pLG49XCJ1aS1yZXNpemFibGUtXCIrcyxhPWUoXCI8ZGl2IGNsYXNzPSd1aS1yZXNpemFibGUtaGFuZGxlIFwiK24rXCInPjwvZGl2PlwiKSxhLmNzcyh7ekluZGV4Om8uekluZGV4fSksXCJzZVwiPT09cyYmYS5hZGRDbGFzcyhcInVpLWljb24gdWktaWNvbi1ncmlwc21hbGwtZGlhZ29uYWwtc2VcIiksdGhpcy5oYW5kbGVzW3NdPVwiLnVpLXJlc2l6YWJsZS1cIitzLHRoaXMuZWxlbWVudC5hcHBlbmQoYSk7dGhpcy5fcmVuZGVyQXhpcz1mdW5jdGlvbih0KXt2YXIgaSxzLGEsbjt0PXR8fHRoaXMuZWxlbWVudDtmb3IoaSBpbiB0aGlzLmhhbmRsZXMpdGhpcy5oYW5kbGVzW2ldLmNvbnN0cnVjdG9yPT09U3RyaW5nJiYodGhpcy5oYW5kbGVzW2ldPWUodGhpcy5oYW5kbGVzW2ldLHRoaXMuZWxlbWVudCkuc2hvdygpKSx0aGlzLmVsZW1lbnRJc1dyYXBwZXImJnRoaXMub3JpZ2luYWxFbGVtZW50WzBdLm5vZGVOYW1lLm1hdGNoKC90ZXh0YXJlYXxpbnB1dHxzZWxlY3R8YnV0dG9uL2kpJiYocz1lKHRoaXMuaGFuZGxlc1tpXSx0aGlzLmVsZW1lbnQpLG49L3N3fG5lfG53fHNlfG58cy8udGVzdChpKT9zLm91dGVySGVpZ2h0KCk6cy5vdXRlcldpZHRoKCksYT1bXCJwYWRkaW5nXCIsL25lfG53fG4vLnRlc3QoaSk/XCJUb3BcIjovc2V8c3d8cy8udGVzdChpKT9cIkJvdHRvbVwiOi9eZSQvLnRlc3QoaSk/XCJSaWdodFwiOlwiTGVmdFwiXS5qb2luKFwiXCIpLHQuY3NzKGEsbiksdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemUoKSksZSh0aGlzLmhhbmRsZXNbaV0pLmxlbmd0aH0sdGhpcy5fcmVuZGVyQXhpcyh0aGlzLmVsZW1lbnQpLHRoaXMuX2hhbmRsZXM9ZShcIi51aS1yZXNpemFibGUtaGFuZGxlXCIsdGhpcy5lbGVtZW50KS5kaXNhYmxlU2VsZWN0aW9uKCksdGhpcy5faGFuZGxlcy5tb3VzZW92ZXIoZnVuY3Rpb24oKXtyLnJlc2l6aW5nfHwodGhpcy5jbGFzc05hbWUmJihhPXRoaXMuY2xhc3NOYW1lLm1hdGNoKC91aS1yZXNpemFibGUtKHNlfHN3fG5lfG53fG58ZXxzfHcpL2kpKSxyLmF4aXM9YSYmYVsxXT9hWzFdOlwic2VcIil9KSxvLmF1dG9IaWRlJiYodGhpcy5faGFuZGxlcy5oaWRlKCksZSh0aGlzLmVsZW1lbnQpLmFkZENsYXNzKFwidWktcmVzaXphYmxlLWF1dG9oaWRlXCIpLm1vdXNlZW50ZXIoZnVuY3Rpb24oKXtvLmRpc2FibGVkfHwoZSh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLXJlc2l6YWJsZS1hdXRvaGlkZVwiKSxyLl9oYW5kbGVzLnNob3coKSl9KS5tb3VzZWxlYXZlKGZ1bmN0aW9uKCl7by5kaXNhYmxlZHx8ci5yZXNpemluZ3x8KGUodGhpcykuYWRkQ2xhc3MoXCJ1aS1yZXNpemFibGUtYXV0b2hpZGVcIiksci5faGFuZGxlcy5oaWRlKCkpfSkpLHRoaXMuX21vdXNlSW5pdCgpfSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX21vdXNlRGVzdHJveSgpO3ZhciB0LGk9ZnVuY3Rpb24odCl7ZSh0KS5yZW1vdmVDbGFzcyhcInVpLXJlc2l6YWJsZSB1aS1yZXNpemFibGUtZGlzYWJsZWQgdWktcmVzaXphYmxlLXJlc2l6aW5nXCIpLnJlbW92ZURhdGEoXCJyZXNpemFibGVcIikucmVtb3ZlRGF0YShcInVpLXJlc2l6YWJsZVwiKS51bmJpbmQoXCIucmVzaXphYmxlXCIpLmZpbmQoXCIudWktcmVzaXphYmxlLWhhbmRsZVwiKS5yZW1vdmUoKX07cmV0dXJuIHRoaXMuZWxlbWVudElzV3JhcHBlciYmKGkodGhpcy5lbGVtZW50KSx0PXRoaXMuZWxlbWVudCx0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3Moe3Bvc2l0aW9uOnQuY3NzKFwicG9zaXRpb25cIiksd2lkdGg6dC5vdXRlcldpZHRoKCksaGVpZ2h0OnQub3V0ZXJIZWlnaHQoKSx0b3A6dC5jc3MoXCJ0b3BcIiksbGVmdDp0LmNzcyhcImxlZnRcIil9KS5pbnNlcnRBZnRlcih0KSx0LnJlbW92ZSgpKSx0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoXCJyZXNpemVcIix0aGlzLm9yaWdpbmFsUmVzaXplU3R5bGUpLGkodGhpcy5vcmlnaW5hbEVsZW1lbnQpLHRoaXN9LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24odCl7dmFyIGkscyxhPSExO2ZvcihpIGluIHRoaXMuaGFuZGxlcylzPWUodGhpcy5oYW5kbGVzW2ldKVswXSwocz09PXQudGFyZ2V0fHxlLmNvbnRhaW5zKHMsdC50YXJnZXQpKSYmKGE9ITApO3JldHVybiF0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJmF9LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKGkpe3ZhciBzLGEsbixyPXRoaXMub3B0aW9ucyxvPXRoaXMuZWxlbWVudC5wb3NpdGlvbigpLGg9dGhpcy5lbGVtZW50O3JldHVybiB0aGlzLnJlc2l6aW5nPSEwLC9hYnNvbHV0ZS8udGVzdChoLmNzcyhcInBvc2l0aW9uXCIpKT9oLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpoLmNzcyhcInRvcFwiKSxsZWZ0OmguY3NzKFwibGVmdFwiKX0pOmguaXMoXCIudWktZHJhZ2dhYmxlXCIpJiZoLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpvLnRvcCxsZWZ0Om8ubGVmdH0pLHRoaXMuX3JlbmRlclByb3h5KCkscz10KHRoaXMuaGVscGVyLmNzcyhcImxlZnRcIikpLGE9dCh0aGlzLmhlbHBlci5jc3MoXCJ0b3BcIikpLHIuY29udGFpbm1lbnQmJihzKz1lKHIuY29udGFpbm1lbnQpLnNjcm9sbExlZnQoKXx8MCxhKz1lKHIuY29udGFpbm1lbnQpLnNjcm9sbFRvcCgpfHwwKSx0aGlzLm9mZnNldD10aGlzLmhlbHBlci5vZmZzZXQoKSx0aGlzLnBvc2l0aW9uPXtsZWZ0OnMsdG9wOmF9LHRoaXMuc2l6ZT10aGlzLl9oZWxwZXI/e3dpZHRoOmgub3V0ZXJXaWR0aCgpLGhlaWdodDpoLm91dGVySGVpZ2h0KCl9Ont3aWR0aDpoLndpZHRoKCksaGVpZ2h0OmguaGVpZ2h0KCl9LHRoaXMub3JpZ2luYWxTaXplPXRoaXMuX2hlbHBlcj97d2lkdGg6aC5vdXRlcldpZHRoKCksaGVpZ2h0Omgub3V0ZXJIZWlnaHQoKX06e3dpZHRoOmgud2lkdGgoKSxoZWlnaHQ6aC5oZWlnaHQoKX0sdGhpcy5vcmlnaW5hbFBvc2l0aW9uPXtsZWZ0OnMsdG9wOmF9LHRoaXMuc2l6ZURpZmY9e3dpZHRoOmgub3V0ZXJXaWR0aCgpLWgud2lkdGgoKSxoZWlnaHQ6aC5vdXRlckhlaWdodCgpLWguaGVpZ2h0KCl9LHRoaXMub3JpZ2luYWxNb3VzZVBvc2l0aW9uPXtsZWZ0OmkucGFnZVgsdG9wOmkucGFnZVl9LHRoaXMuYXNwZWN0UmF0aW89XCJudW1iZXJcIj09dHlwZW9mIHIuYXNwZWN0UmF0aW8/ci5hc3BlY3RSYXRpbzp0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aC90aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHR8fDEsbj1lKFwiLnVpLXJlc2l6YWJsZS1cIit0aGlzLmF4aXMpLmNzcyhcImN1cnNvclwiKSxlKFwiYm9keVwiKS5jc3MoXCJjdXJzb3JcIixcImF1dG9cIj09PW4/dGhpcy5heGlzK1wiLXJlc2l6ZVwiOm4pLGguYWRkQ2xhc3MoXCJ1aS1yZXNpemFibGUtcmVzaXppbmdcIiksdGhpcy5fcHJvcGFnYXRlKFwic3RhcnRcIixpKSwhMH0sX21vdXNlRHJhZzpmdW5jdGlvbih0KXt2YXIgaSxzPXRoaXMuaGVscGVyLGE9e30sbj10aGlzLm9yaWdpbmFsTW91c2VQb3NpdGlvbixyPXRoaXMuYXhpcyxvPXRoaXMucG9zaXRpb24udG9wLGg9dGhpcy5wb3NpdGlvbi5sZWZ0LGw9dGhpcy5zaXplLndpZHRoLHU9dGhpcy5zaXplLmhlaWdodCxjPXQucGFnZVgtbi5sZWZ0fHwwLGQ9dC5wYWdlWS1uLnRvcHx8MCxwPXRoaXMuX2NoYW5nZVtyXTtyZXR1cm4gcD8oaT1wLmFwcGx5KHRoaXMsW3QsYyxkXSksdGhpcy5fdXBkYXRlVmlydHVhbEJvdW5kYXJpZXModC5zaGlmdEtleSksKHRoaXMuX2FzcGVjdFJhdGlvfHx0LnNoaWZ0S2V5KSYmKGk9dGhpcy5fdXBkYXRlUmF0aW8oaSx0KSksaT10aGlzLl9yZXNwZWN0U2l6ZShpLHQpLHRoaXMuX3VwZGF0ZUNhY2hlKGkpLHRoaXMuX3Byb3BhZ2F0ZShcInJlc2l6ZVwiLHQpLHRoaXMucG9zaXRpb24udG9wIT09byYmKGEudG9wPXRoaXMucG9zaXRpb24udG9wK1wicHhcIiksdGhpcy5wb3NpdGlvbi5sZWZ0IT09aCYmKGEubGVmdD10aGlzLnBvc2l0aW9uLmxlZnQrXCJweFwiKSx0aGlzLnNpemUud2lkdGghPT1sJiYoYS53aWR0aD10aGlzLnNpemUud2lkdGgrXCJweFwiKSx0aGlzLnNpemUuaGVpZ2h0IT09dSYmKGEuaGVpZ2h0PXRoaXMuc2l6ZS5oZWlnaHQrXCJweFwiKSxzLmNzcyhhKSwhdGhpcy5faGVscGVyJiZ0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLmxlbmd0aCYmdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemUoKSxlLmlzRW1wdHlPYmplY3QoYSl8fHRoaXMuX3RyaWdnZXIoXCJyZXNpemVcIix0LHRoaXMudWkoKSksITEpOiExfSxfbW91c2VTdG9wOmZ1bmN0aW9uKHQpe3RoaXMucmVzaXppbmc9ITE7dmFyIGkscyxhLG4scixvLGgsbD10aGlzLm9wdGlvbnMsdT10aGlzO3JldHVybiB0aGlzLl9oZWxwZXImJihpPXRoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMscz1pLmxlbmd0aCYmL3RleHRhcmVhL2kudGVzdChpWzBdLm5vZGVOYW1lKSxhPXMmJmUudWkuaGFzU2Nyb2xsKGlbMF0sXCJsZWZ0XCIpPzA6dS5zaXplRGlmZi5oZWlnaHQsbj1zPzA6dS5zaXplRGlmZi53aWR0aCxyPXt3aWR0aDp1LmhlbHBlci53aWR0aCgpLW4saGVpZ2h0OnUuaGVscGVyLmhlaWdodCgpLWF9LG89cGFyc2VJbnQodS5lbGVtZW50LmNzcyhcImxlZnRcIiksMTApKyh1LnBvc2l0aW9uLmxlZnQtdS5vcmlnaW5hbFBvc2l0aW9uLmxlZnQpfHxudWxsLGg9cGFyc2VJbnQodS5lbGVtZW50LmNzcyhcInRvcFwiKSwxMCkrKHUucG9zaXRpb24udG9wLXUub3JpZ2luYWxQb3NpdGlvbi50b3ApfHxudWxsLGwuYW5pbWF0ZXx8dGhpcy5lbGVtZW50LmNzcyhlLmV4dGVuZChyLHt0b3A6aCxsZWZ0Om99KSksdS5oZWxwZXIuaGVpZ2h0KHUuc2l6ZS5oZWlnaHQpLHUuaGVscGVyLndpZHRoKHUuc2l6ZS53aWR0aCksdGhpcy5faGVscGVyJiYhbC5hbmltYXRlJiZ0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpKSxlKFwiYm9keVwiKS5jc3MoXCJjdXJzb3JcIixcImF1dG9cIiksdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktcmVzaXphYmxlLXJlc2l6aW5nXCIpLHRoaXMuX3Byb3BhZ2F0ZShcInN0b3BcIix0KSx0aGlzLl9oZWxwZXImJnRoaXMuaGVscGVyLnJlbW92ZSgpLCExfSxfdXBkYXRlVmlydHVhbEJvdW5kYXJpZXM6ZnVuY3Rpb24oZSl7dmFyIHQscyxhLG4scixvPXRoaXMub3B0aW9ucztyPXttaW5XaWR0aDppKG8ubWluV2lkdGgpP28ubWluV2lkdGg6MCxtYXhXaWR0aDppKG8ubWF4V2lkdGgpP28ubWF4V2lkdGg6MS8wLG1pbkhlaWdodDppKG8ubWluSGVpZ2h0KT9vLm1pbkhlaWdodDowLG1heEhlaWdodDppKG8ubWF4SGVpZ2h0KT9vLm1heEhlaWdodDoxLzB9LCh0aGlzLl9hc3BlY3RSYXRpb3x8ZSkmJih0PXIubWluSGVpZ2h0KnRoaXMuYXNwZWN0UmF0aW8sYT1yLm1pbldpZHRoL3RoaXMuYXNwZWN0UmF0aW8scz1yLm1heEhlaWdodCp0aGlzLmFzcGVjdFJhdGlvLG49ci5tYXhXaWR0aC90aGlzLmFzcGVjdFJhdGlvLHQ+ci5taW5XaWR0aCYmKHIubWluV2lkdGg9dCksYT5yLm1pbkhlaWdodCYmKHIubWluSGVpZ2h0PWEpLHIubWF4V2lkdGg+cyYmKHIubWF4V2lkdGg9cyksci5tYXhIZWlnaHQ+biYmKHIubWF4SGVpZ2h0PW4pKSx0aGlzLl92Qm91bmRhcmllcz1yfSxfdXBkYXRlQ2FjaGU6ZnVuY3Rpb24oZSl7dGhpcy5vZmZzZXQ9dGhpcy5oZWxwZXIub2Zmc2V0KCksaShlLmxlZnQpJiYodGhpcy5wb3NpdGlvbi5sZWZ0PWUubGVmdCksaShlLnRvcCkmJih0aGlzLnBvc2l0aW9uLnRvcD1lLnRvcCksaShlLmhlaWdodCkmJih0aGlzLnNpemUuaGVpZ2h0PWUuaGVpZ2h0KSxpKGUud2lkdGgpJiYodGhpcy5zaXplLndpZHRoPWUud2lkdGgpfSxfdXBkYXRlUmF0aW86ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wb3NpdGlvbixzPXRoaXMuc2l6ZSxhPXRoaXMuYXhpcztyZXR1cm4gaShlLmhlaWdodCk/ZS53aWR0aD1lLmhlaWdodCp0aGlzLmFzcGVjdFJhdGlvOmkoZS53aWR0aCkmJihlLmhlaWdodD1lLndpZHRoL3RoaXMuYXNwZWN0UmF0aW8pLFwic3dcIj09PWEmJihlLmxlZnQ9dC5sZWZ0KyhzLndpZHRoLWUud2lkdGgpLGUudG9wPW51bGwpLFwibndcIj09PWEmJihlLnRvcD10LnRvcCsocy5oZWlnaHQtZS5oZWlnaHQpLGUubGVmdD10LmxlZnQrKHMud2lkdGgtZS53aWR0aCkpLGV9LF9yZXNwZWN0U2l6ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl92Qm91bmRhcmllcyxzPXRoaXMuYXhpcyxhPWkoZS53aWR0aCkmJnQubWF4V2lkdGgmJnQubWF4V2lkdGg8ZS53aWR0aCxuPWkoZS5oZWlnaHQpJiZ0Lm1heEhlaWdodCYmdC5tYXhIZWlnaHQ8ZS5oZWlnaHQscj1pKGUud2lkdGgpJiZ0Lm1pbldpZHRoJiZ0Lm1pbldpZHRoPmUud2lkdGgsbz1pKGUuaGVpZ2h0KSYmdC5taW5IZWlnaHQmJnQubWluSGVpZ2h0PmUuaGVpZ2h0LGg9dGhpcy5vcmlnaW5hbFBvc2l0aW9uLmxlZnQrdGhpcy5vcmlnaW5hbFNpemUud2lkdGgsbD10aGlzLnBvc2l0aW9uLnRvcCt0aGlzLnNpemUuaGVpZ2h0LHU9L3N3fG53fHcvLnRlc3QocyksYz0vbnd8bmV8bi8udGVzdChzKTtyZXR1cm4gciYmKGUud2lkdGg9dC5taW5XaWR0aCksbyYmKGUuaGVpZ2h0PXQubWluSGVpZ2h0KSxhJiYoZS53aWR0aD10Lm1heFdpZHRoKSxuJiYoZS5oZWlnaHQ9dC5tYXhIZWlnaHQpLHImJnUmJihlLmxlZnQ9aC10Lm1pbldpZHRoKSxhJiZ1JiYoZS5sZWZ0PWgtdC5tYXhXaWR0aCksbyYmYyYmKGUudG9wPWwtdC5taW5IZWlnaHQpLG4mJmMmJihlLnRvcD1sLXQubWF4SGVpZ2h0KSxlLndpZHRofHxlLmhlaWdodHx8ZS5sZWZ0fHwhZS50b3A/ZS53aWR0aHx8ZS5oZWlnaHR8fGUudG9wfHwhZS5sZWZ0fHwoZS5sZWZ0PW51bGwpOmUudG9wPW51bGwsZX0sX3Byb3BvcnRpb25hbGx5UmVzaXplOmZ1bmN0aW9uKCl7aWYodGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5sZW5ndGgpe3ZhciBlLHQsaSxzLGEsbj10aGlzLmhlbHBlcnx8dGhpcy5lbGVtZW50O2ZvcihlPTA7dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5sZW5ndGg+ZTtlKyspe2lmKGE9dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50c1tlXSwhdGhpcy5ib3JkZXJEaWYpZm9yKHRoaXMuYm9yZGVyRGlmPVtdLGk9W2EuY3NzKFwiYm9yZGVyVG9wV2lkdGhcIiksYS5jc3MoXCJib3JkZXJSaWdodFdpZHRoXCIpLGEuY3NzKFwiYm9yZGVyQm90dG9tV2lkdGhcIiksYS5jc3MoXCJib3JkZXJMZWZ0V2lkdGhcIildLHM9W2EuY3NzKFwicGFkZGluZ1RvcFwiKSxhLmNzcyhcInBhZGRpbmdSaWdodFwiKSxhLmNzcyhcInBhZGRpbmdCb3R0b21cIiksYS5jc3MoXCJwYWRkaW5nTGVmdFwiKV0sdD0wO2kubGVuZ3RoPnQ7dCsrKXRoaXMuYm9yZGVyRGlmW3RdPShwYXJzZUludChpW3RdLDEwKXx8MCkrKHBhcnNlSW50KHNbdF0sMTApfHwwKTthLmNzcyh7aGVpZ2h0Om4uaGVpZ2h0KCktdGhpcy5ib3JkZXJEaWZbMF0tdGhpcy5ib3JkZXJEaWZbMl18fDAsd2lkdGg6bi53aWR0aCgpLXRoaXMuYm9yZGVyRGlmWzFdLXRoaXMuYm9yZGVyRGlmWzNdfHwwfSl9fX0sX3JlbmRlclByb3h5OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5lbGVtZW50LGk9dGhpcy5vcHRpb25zO3RoaXMuZWxlbWVudE9mZnNldD10Lm9mZnNldCgpLHRoaXMuX2hlbHBlcj8odGhpcy5oZWxwZXI9dGhpcy5oZWxwZXJ8fGUoXCI8ZGl2IHN0eWxlPSdvdmVyZmxvdzpoaWRkZW47Jz48L2Rpdj5cIiksdGhpcy5oZWxwZXIuYWRkQ2xhc3ModGhpcy5faGVscGVyKS5jc3Moe3dpZHRoOnRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCktMSxoZWlnaHQ6dGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCktMSxwb3NpdGlvbjpcImFic29sdXRlXCIsbGVmdDp0aGlzLmVsZW1lbnRPZmZzZXQubGVmdCtcInB4XCIsdG9wOnRoaXMuZWxlbWVudE9mZnNldC50b3ArXCJweFwiLHpJbmRleDorK2kuekluZGV4fSksdGhpcy5oZWxwZXIuYXBwZW5kVG8oXCJib2R5XCIpLmRpc2FibGVTZWxlY3Rpb24oKSk6dGhpcy5oZWxwZXI9dGhpcy5lbGVtZW50fSxfY2hhbmdlOntlOmZ1bmN0aW9uKGUsdCl7cmV0dXJue3dpZHRoOnRoaXMub3JpZ2luYWxTaXplLndpZHRoK3R9fSx3OmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5vcmlnaW5hbFNpemUscz10aGlzLm9yaWdpbmFsUG9zaXRpb247cmV0dXJue2xlZnQ6cy5sZWZ0K3Qsd2lkdGg6aS53aWR0aC10fX0sbjpmdW5jdGlvbihlLHQsaSl7dmFyIHM9dGhpcy5vcmlnaW5hbFNpemUsYT10aGlzLm9yaWdpbmFsUG9zaXRpb247cmV0dXJue3RvcDphLnRvcCtpLGhlaWdodDpzLmhlaWdodC1pfX0sczpmdW5jdGlvbihlLHQsaSl7cmV0dXJue2hlaWdodDp0aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHQraX19LHNlOmZ1bmN0aW9uKHQsaSxzKXtyZXR1cm4gZS5leHRlbmQodGhpcy5fY2hhbmdlLnMuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2NoYW5nZS5lLmFwcGx5KHRoaXMsW3QsaSxzXSkpfSxzdzpmdW5jdGlvbih0LGkscyl7cmV0dXJuIGUuZXh0ZW5kKHRoaXMuX2NoYW5nZS5zLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9jaGFuZ2Uudy5hcHBseSh0aGlzLFt0LGksc10pKX0sbmU6ZnVuY3Rpb24odCxpLHMpe3JldHVybiBlLmV4dGVuZCh0aGlzLl9jaGFuZ2Uubi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fY2hhbmdlLmUuYXBwbHkodGhpcyxbdCxpLHNdKSl9LG53OmZ1bmN0aW9uKHQsaSxzKXtyZXR1cm4gZS5leHRlbmQodGhpcy5fY2hhbmdlLm4uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2NoYW5nZS53LmFwcGx5KHRoaXMsW3QsaSxzXSkpfX0sX3Byb3BhZ2F0ZTpmdW5jdGlvbih0LGkpe2UudWkucGx1Z2luLmNhbGwodGhpcyx0LFtpLHRoaXMudWkoKV0pLFwicmVzaXplXCIhPT10JiZ0aGlzLl90cmlnZ2VyKHQsaSx0aGlzLnVpKCkpfSxwbHVnaW5zOnt9LHVpOmZ1bmN0aW9uKCl7cmV0dXJue29yaWdpbmFsRWxlbWVudDp0aGlzLm9yaWdpbmFsRWxlbWVudCxlbGVtZW50OnRoaXMuZWxlbWVudCxoZWxwZXI6dGhpcy5oZWxwZXIscG9zaXRpb246dGhpcy5wb3NpdGlvbixzaXplOnRoaXMuc2l6ZSxvcmlnaW5hbFNpemU6dGhpcy5vcmlnaW5hbFNpemUsb3JpZ2luYWxQb3NpdGlvbjp0aGlzLm9yaWdpbmFsUG9zaXRpb259fX0pLGUudWkucGx1Z2luLmFkZChcInJlc2l6YWJsZVwiLFwiYW5pbWF0ZVwiLHtzdG9wOmZ1bmN0aW9uKHQpe3ZhciBpPWUodGhpcykuZGF0YShcInVpLXJlc2l6YWJsZVwiKSxzPWkub3B0aW9ucyxhPWkuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMsbj1hLmxlbmd0aCYmL3RleHRhcmVhL2kudGVzdChhWzBdLm5vZGVOYW1lKSxyPW4mJmUudWkuaGFzU2Nyb2xsKGFbMF0sXCJsZWZ0XCIpPzA6aS5zaXplRGlmZi5oZWlnaHQsbz1uPzA6aS5zaXplRGlmZi53aWR0aCxoPXt3aWR0aDppLnNpemUud2lkdGgtbyxoZWlnaHQ6aS5zaXplLmhlaWdodC1yfSxsPXBhcnNlSW50KGkuZWxlbWVudC5jc3MoXCJsZWZ0XCIpLDEwKSsoaS5wb3NpdGlvbi5sZWZ0LWkub3JpZ2luYWxQb3NpdGlvbi5sZWZ0KXx8bnVsbCx1PXBhcnNlSW50KGkuZWxlbWVudC5jc3MoXCJ0b3BcIiksMTApKyhpLnBvc2l0aW9uLnRvcC1pLm9yaWdpbmFsUG9zaXRpb24udG9wKXx8bnVsbDtpLmVsZW1lbnQuYW5pbWF0ZShlLmV4dGVuZChoLHUmJmw/e3RvcDp1LGxlZnQ6bH06e30pLHtkdXJhdGlvbjpzLmFuaW1hdGVEdXJhdGlvbixlYXNpbmc6cy5hbmltYXRlRWFzaW5nLHN0ZXA6ZnVuY3Rpb24oKXt2YXIgcz17d2lkdGg6cGFyc2VJbnQoaS5lbGVtZW50LmNzcyhcIndpZHRoXCIpLDEwKSxoZWlnaHQ6cGFyc2VJbnQoaS5lbGVtZW50LmNzcyhcImhlaWdodFwiKSwxMCksdG9wOnBhcnNlSW50KGkuZWxlbWVudC5jc3MoXCJ0b3BcIiksMTApLGxlZnQ6cGFyc2VJbnQoaS5lbGVtZW50LmNzcyhcImxlZnRcIiksMTApfTthJiZhLmxlbmd0aCYmZShhWzBdKS5jc3Moe3dpZHRoOnMud2lkdGgsaGVpZ2h0OnMuaGVpZ2h0fSksaS5fdXBkYXRlQ2FjaGUocyksaS5fcHJvcGFnYXRlKFwicmVzaXplXCIsdCl9fSl9fSksZS51aS5wbHVnaW4uYWRkKFwicmVzaXphYmxlXCIsXCJjb250YWlubWVudFwiLHtzdGFydDpmdW5jdGlvbigpe3ZhciBpLHMsYSxuLHIsbyxoLGw9ZSh0aGlzKS5kYXRhKFwidWktcmVzaXphYmxlXCIpLHU9bC5vcHRpb25zLGM9bC5lbGVtZW50LGQ9dS5jb250YWlubWVudCxwPWQgaW5zdGFuY2VvZiBlP2QuZ2V0KDApOi9wYXJlbnQvLnRlc3QoZCk/Yy5wYXJlbnQoKS5nZXQoMCk6ZDtwJiYobC5jb250YWluZXJFbGVtZW50PWUocCksL2RvY3VtZW50Ly50ZXN0KGQpfHxkPT09ZG9jdW1lbnQ/KGwuY29udGFpbmVyT2Zmc2V0PXtsZWZ0OjAsdG9wOjB9LGwuY29udGFpbmVyUG9zaXRpb249e2xlZnQ6MCx0b3A6MH0sbC5wYXJlbnREYXRhPXtlbGVtZW50OmUoZG9jdW1lbnQpLGxlZnQ6MCx0b3A6MCx3aWR0aDplKGRvY3VtZW50KS53aWR0aCgpLGhlaWdodDplKGRvY3VtZW50KS5oZWlnaHQoKXx8ZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodH0pOihpPWUocCkscz1bXSxlKFtcIlRvcFwiLFwiUmlnaHRcIixcIkxlZnRcIixcIkJvdHRvbVwiXSkuZWFjaChmdW5jdGlvbihlLGEpe3NbZV09dChpLmNzcyhcInBhZGRpbmdcIithKSl9KSxsLmNvbnRhaW5lck9mZnNldD1pLm9mZnNldCgpLGwuY29udGFpbmVyUG9zaXRpb249aS5wb3NpdGlvbigpLGwuY29udGFpbmVyU2l6ZT17aGVpZ2h0OmkuaW5uZXJIZWlnaHQoKS1zWzNdLHdpZHRoOmkuaW5uZXJXaWR0aCgpLXNbMV19LGE9bC5jb250YWluZXJPZmZzZXQsbj1sLmNvbnRhaW5lclNpemUuaGVpZ2h0LHI9bC5jb250YWluZXJTaXplLndpZHRoLG89ZS51aS5oYXNTY3JvbGwocCxcImxlZnRcIik/cC5zY3JvbGxXaWR0aDpyLGg9ZS51aS5oYXNTY3JvbGwocCk/cC5zY3JvbGxIZWlnaHQ6bixsLnBhcmVudERhdGE9e2VsZW1lbnQ6cCxsZWZ0OmEubGVmdCx0b3A6YS50b3Asd2lkdGg6byxoZWlnaHQ6aH0pKX0scmVzaXplOmZ1bmN0aW9uKHQpe3ZhciBpLHMsYSxuLHI9ZSh0aGlzKS5kYXRhKFwidWktcmVzaXphYmxlXCIpLG89ci5vcHRpb25zLGg9ci5jb250YWluZXJPZmZzZXQsbD1yLnBvc2l0aW9uLHU9ci5fYXNwZWN0UmF0aW98fHQuc2hpZnRLZXksYz17dG9wOjAsbGVmdDowfSxkPXIuY29udGFpbmVyRWxlbWVudDtkWzBdIT09ZG9jdW1lbnQmJi9zdGF0aWMvLnRlc3QoZC5jc3MoXCJwb3NpdGlvblwiKSkmJihjPWgpLGwubGVmdDwoci5faGVscGVyP2gubGVmdDowKSYmKHIuc2l6ZS53aWR0aD1yLnNpemUud2lkdGgrKHIuX2hlbHBlcj9yLnBvc2l0aW9uLmxlZnQtaC5sZWZ0OnIucG9zaXRpb24ubGVmdC1jLmxlZnQpLHUmJihyLnNpemUuaGVpZ2h0PXIuc2l6ZS53aWR0aC9yLmFzcGVjdFJhdGlvKSxyLnBvc2l0aW9uLmxlZnQ9by5oZWxwZXI/aC5sZWZ0OjApLGwudG9wPChyLl9oZWxwZXI/aC50b3A6MCkmJihyLnNpemUuaGVpZ2h0PXIuc2l6ZS5oZWlnaHQrKHIuX2hlbHBlcj9yLnBvc2l0aW9uLnRvcC1oLnRvcDpyLnBvc2l0aW9uLnRvcCksdSYmKHIuc2l6ZS53aWR0aD1yLnNpemUuaGVpZ2h0KnIuYXNwZWN0UmF0aW8pLHIucG9zaXRpb24udG9wPXIuX2hlbHBlcj9oLnRvcDowKSxyLm9mZnNldC5sZWZ0PXIucGFyZW50RGF0YS5sZWZ0K3IucG9zaXRpb24ubGVmdCxyLm9mZnNldC50b3A9ci5wYXJlbnREYXRhLnRvcCtyLnBvc2l0aW9uLnRvcCxpPU1hdGguYWJzKChyLl9oZWxwZXI/ci5vZmZzZXQubGVmdC1jLmxlZnQ6ci5vZmZzZXQubGVmdC1jLmxlZnQpK3Iuc2l6ZURpZmYud2lkdGgpLHM9TWF0aC5hYnMoKHIuX2hlbHBlcj9yLm9mZnNldC50b3AtYy50b3A6ci5vZmZzZXQudG9wLWgudG9wKStyLnNpemVEaWZmLmhlaWdodCksYT1yLmNvbnRhaW5lckVsZW1lbnQuZ2V0KDApPT09ci5lbGVtZW50LnBhcmVudCgpLmdldCgwKSxuPS9yZWxhdGl2ZXxhYnNvbHV0ZS8udGVzdChyLmNvbnRhaW5lckVsZW1lbnQuY3NzKFwicG9zaXRpb25cIikpLGEmJm4mJihpLT1yLnBhcmVudERhdGEubGVmdCksaStyLnNpemUud2lkdGg+PXIucGFyZW50RGF0YS53aWR0aCYmKHIuc2l6ZS53aWR0aD1yLnBhcmVudERhdGEud2lkdGgtaSx1JiYoci5zaXplLmhlaWdodD1yLnNpemUud2lkdGgvci5hc3BlY3RSYXRpbykpLHMrci5zaXplLmhlaWdodD49ci5wYXJlbnREYXRhLmhlaWdodCYmKHIuc2l6ZS5oZWlnaHQ9ci5wYXJlbnREYXRhLmhlaWdodC1zLHUmJihyLnNpemUud2lkdGg9ci5zaXplLmhlaWdodCpyLmFzcGVjdFJhdGlvKSl9LHN0b3A6ZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLmRhdGEoXCJ1aS1yZXNpemFibGVcIiksaT10Lm9wdGlvbnMscz10LmNvbnRhaW5lck9mZnNldCxhPXQuY29udGFpbmVyUG9zaXRpb24sbj10LmNvbnRhaW5lckVsZW1lbnQscj1lKHQuaGVscGVyKSxvPXIub2Zmc2V0KCksaD1yLm91dGVyV2lkdGgoKS10LnNpemVEaWZmLndpZHRoLGw9ci5vdXRlckhlaWdodCgpLXQuc2l6ZURpZmYuaGVpZ2h0O3QuX2hlbHBlciYmIWkuYW5pbWF0ZSYmL3JlbGF0aXZlLy50ZXN0KG4uY3NzKFwicG9zaXRpb25cIikpJiZlKHRoaXMpLmNzcyh7bGVmdDpvLmxlZnQtYS5sZWZ0LXMubGVmdCx3aWR0aDpoLGhlaWdodDpsfSksdC5faGVscGVyJiYhaS5hbmltYXRlJiYvc3RhdGljLy50ZXN0KG4uY3NzKFwicG9zaXRpb25cIikpJiZlKHRoaXMpLmNzcyh7bGVmdDpvLmxlZnQtYS5sZWZ0LXMubGVmdCx3aWR0aDpoLGhlaWdodDpsfSl9fSksZS51aS5wbHVnaW4uYWRkKFwicmVzaXphYmxlXCIsXCJhbHNvUmVzaXplXCIse3N0YXJ0OmZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKS5kYXRhKFwidWktcmVzaXphYmxlXCIpLGk9dC5vcHRpb25zLHM9ZnVuY3Rpb24odCl7ZSh0KS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKTt0LmRhdGEoXCJ1aS1yZXNpemFibGUtYWxzb3Jlc2l6ZVwiLHt3aWR0aDpwYXJzZUludCh0LndpZHRoKCksMTApLGhlaWdodDpwYXJzZUludCh0LmhlaWdodCgpLDEwKSxsZWZ0OnBhcnNlSW50KHQuY3NzKFwibGVmdFwiKSwxMCksdG9wOnBhcnNlSW50KHQuY3NzKFwidG9wXCIpLDEwKX0pfSl9O1wib2JqZWN0XCIhPXR5cGVvZiBpLmFsc29SZXNpemV8fGkuYWxzb1Jlc2l6ZS5wYXJlbnROb2RlP3MoaS5hbHNvUmVzaXplKTppLmFsc29SZXNpemUubGVuZ3RoPyhpLmFsc29SZXNpemU9aS5hbHNvUmVzaXplWzBdLHMoaS5hbHNvUmVzaXplKSk6ZS5lYWNoKGkuYWxzb1Jlc2l6ZSxmdW5jdGlvbihlKXtzKGUpfSl9LHJlc2l6ZTpmdW5jdGlvbih0LGkpe3ZhciBzPWUodGhpcykuZGF0YShcInVpLXJlc2l6YWJsZVwiKSxhPXMub3B0aW9ucyxuPXMub3JpZ2luYWxTaXplLHI9cy5vcmlnaW5hbFBvc2l0aW9uLG89e2hlaWdodDpzLnNpemUuaGVpZ2h0LW4uaGVpZ2h0fHwwLHdpZHRoOnMuc2l6ZS53aWR0aC1uLndpZHRofHwwLHRvcDpzLnBvc2l0aW9uLnRvcC1yLnRvcHx8MCxsZWZ0OnMucG9zaXRpb24ubGVmdC1yLmxlZnR8fDB9LGg9ZnVuY3Rpb24odCxzKXtlKHQpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLGE9ZSh0aGlzKS5kYXRhKFwidWktcmVzaXphYmxlLWFsc29yZXNpemVcIiksbj17fSxyPXMmJnMubGVuZ3RoP3M6dC5wYXJlbnRzKGkub3JpZ2luYWxFbGVtZW50WzBdKS5sZW5ndGg/W1wid2lkdGhcIixcImhlaWdodFwiXTpbXCJ3aWR0aFwiLFwiaGVpZ2h0XCIsXCJ0b3BcIixcImxlZnRcIl07ZS5lYWNoKHIsZnVuY3Rpb24oZSx0KXt2YXIgaT0oYVt0XXx8MCkrKG9bdF18fDApO2kmJmk+PTAmJihuW3RdPWl8fG51bGwpfSksdC5jc3Mobil9KX07XCJvYmplY3RcIiE9dHlwZW9mIGEuYWxzb1Jlc2l6ZXx8YS5hbHNvUmVzaXplLm5vZGVUeXBlP2goYS5hbHNvUmVzaXplKTplLmVhY2goYS5hbHNvUmVzaXplLGZ1bmN0aW9uKGUsdCl7aChlLHQpfSl9LHN0b3A6ZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZURhdGEoXCJyZXNpemFibGUtYWxzb3Jlc2l6ZVwiKX19KSxlLnVpLnBsdWdpbi5hZGQoXCJyZXNpemFibGVcIixcImdob3N0XCIse3N0YXJ0OmZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKS5kYXRhKFwidWktcmVzaXphYmxlXCIpLGk9dC5vcHRpb25zLHM9dC5zaXplO3QuZ2hvc3Q9dC5vcmlnaW5hbEVsZW1lbnQuY2xvbmUoKSx0Lmdob3N0LmNzcyh7b3BhY2l0eTouMjUsZGlzcGxheTpcImJsb2NrXCIscG9zaXRpb246XCJyZWxhdGl2ZVwiLGhlaWdodDpzLmhlaWdodCx3aWR0aDpzLndpZHRoLG1hcmdpbjowLGxlZnQ6MCx0b3A6MH0pLmFkZENsYXNzKFwidWktcmVzaXphYmxlLWdob3N0XCIpLmFkZENsYXNzKFwic3RyaW5nXCI9PXR5cGVvZiBpLmdob3N0P2kuZ2hvc3Q6XCJcIiksdC5naG9zdC5hcHBlbmRUbyh0LmhlbHBlcil9LHJlc2l6ZTpmdW5jdGlvbigpe3ZhciB0PWUodGhpcykuZGF0YShcInVpLXJlc2l6YWJsZVwiKTt0Lmdob3N0JiZ0Lmdob3N0LmNzcyh7cG9zaXRpb246XCJyZWxhdGl2ZVwiLGhlaWdodDp0LnNpemUuaGVpZ2h0LHdpZHRoOnQuc2l6ZS53aWR0aH0pfSxzdG9wOmZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKS5kYXRhKFwidWktcmVzaXphYmxlXCIpO3QuZ2hvc3QmJnQuaGVscGVyJiZ0LmhlbHBlci5nZXQoMCkucmVtb3ZlQ2hpbGQodC5naG9zdC5nZXQoMCkpfX0pLGUudWkucGx1Z2luLmFkZChcInJlc2l6YWJsZVwiLFwiZ3JpZFwiLHtyZXNpemU6ZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLmRhdGEoXCJ1aS1yZXNpemFibGVcIiksaT10Lm9wdGlvbnMscz10LnNpemUsYT10Lm9yaWdpbmFsU2l6ZSxuPXQub3JpZ2luYWxQb3NpdGlvbixyPXQuYXhpcyxvPVwibnVtYmVyXCI9PXR5cGVvZiBpLmdyaWQ/W2kuZ3JpZCxpLmdyaWRdOmkuZ3JpZCxoPW9bMF18fDEsbD1vWzFdfHwxLHU9TWF0aC5yb3VuZCgocy53aWR0aC1hLndpZHRoKS9oKSpoLGM9TWF0aC5yb3VuZCgocy5oZWlnaHQtYS5oZWlnaHQpL2wpKmwsZD1hLndpZHRoK3UscD1hLmhlaWdodCtjLGY9aS5tYXhXaWR0aCYmZD5pLm1heFdpZHRoLG09aS5tYXhIZWlnaHQmJnA+aS5tYXhIZWlnaHQsZz1pLm1pbldpZHRoJiZpLm1pbldpZHRoPmQsdj1pLm1pbkhlaWdodCYmaS5taW5IZWlnaHQ+cDtpLmdyaWQ9byxnJiYoZCs9aCksdiYmKHArPWwpLGYmJihkLT1oKSxtJiYocC09bCksL14oc2V8c3xlKSQvLnRlc3Qocik/KHQuc2l6ZS53aWR0aD1kLHQuc2l6ZS5oZWlnaHQ9cCk6L14obmUpJC8udGVzdChyKT8odC5zaXplLndpZHRoPWQsdC5zaXplLmhlaWdodD1wLHQucG9zaXRpb24udG9wPW4udG9wLWMpOi9eKHN3KSQvLnRlc3Qocik/KHQuc2l6ZS53aWR0aD1kLHQuc2l6ZS5oZWlnaHQ9cCx0LnBvc2l0aW9uLmxlZnQ9bi5sZWZ0LXUpOih0LnNpemUud2lkdGg9ZCx0LnNpemUuaGVpZ2h0PXAsdC5wb3NpdGlvbi50b3A9bi50b3AtYyx0LnBvc2l0aW9uLmxlZnQ9bi5sZWZ0LXUpfX0pfSkoalF1ZXJ5KTsoZnVuY3Rpb24oZSl7dmFyIHQ9MCxpPXt9LGE9e307aS5oZWlnaHQ9aS5wYWRkaW5nVG9wPWkucGFkZGluZ0JvdHRvbT1pLmJvcmRlclRvcFdpZHRoPWkuYm9yZGVyQm90dG9tV2lkdGg9XCJoaWRlXCIsYS5oZWlnaHQ9YS5wYWRkaW5nVG9wPWEucGFkZGluZ0JvdHRvbT1hLmJvcmRlclRvcFdpZHRoPWEuYm9yZGVyQm90dG9tV2lkdGg9XCJzaG93XCIsZS53aWRnZXQoXCJ1aS5hY2NvcmRpb25cIix7dmVyc2lvbjpcIjEuMTAuM1wiLG9wdGlvbnM6e2FjdGl2ZTowLGFuaW1hdGU6e30sY29sbGFwc2libGU6ITEsZXZlbnQ6XCJjbGlja1wiLGhlYWRlcjpcIj4gbGkgPiA6Zmlyc3QtY2hpbGQsPiA6bm90KGxpKTpldmVuXCIsaGVpZ2h0U3R5bGU6XCJhdXRvXCIsaWNvbnM6e2FjdGl2ZUhlYWRlcjpcInVpLWljb24tdHJpYW5nbGUtMS1zXCIsaGVhZGVyOlwidWktaWNvbi10cmlhbmdsZS0xLWVcIn0sYWN0aXZhdGU6bnVsbCxiZWZvcmVBY3RpdmF0ZTpudWxsfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zO3RoaXMucHJldlNob3c9dGhpcy5wcmV2SGlkZT1lKCksdGhpcy5lbGVtZW50LmFkZENsYXNzKFwidWktYWNjb3JkaW9uIHVpLXdpZGdldCB1aS1oZWxwZXItcmVzZXRcIikuYXR0cihcInJvbGVcIixcInRhYmxpc3RcIiksdC5jb2xsYXBzaWJsZXx8dC5hY3RpdmUhPT0hMSYmbnVsbCE9dC5hY3RpdmV8fCh0LmFjdGl2ZT0wKSx0aGlzLl9wcm9jZXNzUGFuZWxzKCksMD50LmFjdGl2ZSYmKHQuYWN0aXZlKz10aGlzLmhlYWRlcnMubGVuZ3RoKSx0aGlzLl9yZWZyZXNoKCl9LF9nZXRDcmVhdGVFdmVudERhdGE6ZnVuY3Rpb24oKXtyZXR1cm57aGVhZGVyOnRoaXMuYWN0aXZlLHBhbmVsOnRoaXMuYWN0aXZlLmxlbmd0aD90aGlzLmFjdGl2ZS5uZXh0KCk6ZSgpLGNvbnRlbnQ6dGhpcy5hY3RpdmUubGVuZ3RoP3RoaXMuYWN0aXZlLm5leHQoKTplKCl9fSxfY3JlYXRlSWNvbnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuaWNvbnM7dCYmKGUoXCI8c3Bhbj5cIikuYWRkQ2xhc3MoXCJ1aS1hY2NvcmRpb24taGVhZGVyLWljb24gdWktaWNvbiBcIit0LmhlYWRlcikucHJlcGVuZFRvKHRoaXMuaGVhZGVycyksdGhpcy5hY3RpdmUuY2hpbGRyZW4oXCIudWktYWNjb3JkaW9uLWhlYWRlci1pY29uXCIpLnJlbW92ZUNsYXNzKHQuaGVhZGVyKS5hZGRDbGFzcyh0LmFjdGl2ZUhlYWRlciksdGhpcy5oZWFkZXJzLmFkZENsYXNzKFwidWktYWNjb3JkaW9uLWljb25zXCIpKX0sX2Rlc3Ryb3lJY29uczpmdW5jdGlvbigpe3RoaXMuaGVhZGVycy5yZW1vdmVDbGFzcyhcInVpLWFjY29yZGlvbi1pY29uc1wiKS5jaGlsZHJlbihcIi51aS1hY2NvcmRpb24taGVhZGVyLWljb25cIikucmVtb3ZlKCl9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGU7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktYWNjb3JkaW9uIHVpLXdpZGdldCB1aS1oZWxwZXItcmVzZXRcIikucmVtb3ZlQXR0cihcInJvbGVcIiksdGhpcy5oZWFkZXJzLnJlbW92ZUNsYXNzKFwidWktYWNjb3JkaW9uLWhlYWRlciB1aS1hY2NvcmRpb24taGVhZGVyLWFjdGl2ZSB1aS1oZWxwZXItcmVzZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWFjdGl2ZSB1aS1zdGF0ZS1kaXNhYmxlZCB1aS1jb3JuZXItdG9wXCIpLnJlbW92ZUF0dHIoXCJyb2xlXCIpLnJlbW92ZUF0dHIoXCJhcmlhLXNlbGVjdGVkXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWNvbnRyb2xzXCIpLnJlbW92ZUF0dHIoXCJ0YWJJbmRleFwiKS5lYWNoKGZ1bmN0aW9uKCl7L151aS1hY2NvcmRpb24vLnRlc3QodGhpcy5pZCkmJnRoaXMucmVtb3ZlQXR0cmlidXRlKFwiaWRcIil9KSx0aGlzLl9kZXN0cm95SWNvbnMoKSxlPXRoaXMuaGVhZGVycy5uZXh0KCkuY3NzKFwiZGlzcGxheVwiLFwiXCIpLnJlbW92ZUF0dHIoXCJyb2xlXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWV4cGFuZGVkXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWhpZGRlblwiKS5yZW1vdmVBdHRyKFwiYXJpYS1sYWJlbGxlZGJ5XCIpLnJlbW92ZUNsYXNzKFwidWktaGVscGVyLXJlc2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b20gdWktYWNjb3JkaW9uLWNvbnRlbnQgdWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlIHVpLXN0YXRlLWRpc2FibGVkXCIpLmVhY2goZnVuY3Rpb24oKXsvXnVpLWFjY29yZGlvbi8udGVzdCh0aGlzLmlkKSYmdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKX0pLFwiY29udGVudFwiIT09dGhpcy5vcHRpb25zLmhlaWdodFN0eWxlJiZlLmNzcyhcImhlaWdodFwiLFwiXCIpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJhY3RpdmVcIj09PWU/KHRoaXMuX2FjdGl2YXRlKHQpLHVuZGVmaW5lZCk6KFwiZXZlbnRcIj09PWUmJih0aGlzLm9wdGlvbnMuZXZlbnQmJnRoaXMuX29mZih0aGlzLmhlYWRlcnMsdGhpcy5vcHRpb25zLmV2ZW50KSx0aGlzLl9zZXR1cEV2ZW50cyh0KSksdGhpcy5fc3VwZXIoZSx0KSxcImNvbGxhcHNpYmxlXCIhPT1lfHx0fHx0aGlzLm9wdGlvbnMuYWN0aXZlIT09ITF8fHRoaXMuX2FjdGl2YXRlKDApLFwiaWNvbnNcIj09PWUmJih0aGlzLl9kZXN0cm95SWNvbnMoKSx0JiZ0aGlzLl9jcmVhdGVJY29ucygpKSxcImRpc2FibGVkXCI9PT1lJiZ0aGlzLmhlYWRlcnMuYWRkKHRoaXMuaGVhZGVycy5uZXh0KCkpLnRvZ2dsZUNsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIiwhIXQpLHVuZGVmaW5lZCl9LF9rZXlkb3duOmZ1bmN0aW9uKHQpe2lmKCF0LmFsdEtleSYmIXQuY3RybEtleSl7dmFyIGk9ZS51aS5rZXlDb2RlLGE9dGhpcy5oZWFkZXJzLmxlbmd0aCxzPXRoaXMuaGVhZGVycy5pbmRleCh0LnRhcmdldCksbj0hMTtzd2l0Y2godC5rZXlDb2RlKXtjYXNlIGkuUklHSFQ6Y2FzZSBpLkRPV046bj10aGlzLmhlYWRlcnNbKHMrMSklYV07YnJlYWs7Y2FzZSBpLkxFRlQ6Y2FzZSBpLlVQOm49dGhpcy5oZWFkZXJzWyhzLTErYSklYV07YnJlYWs7Y2FzZSBpLlNQQUNFOmNhc2UgaS5FTlRFUjp0aGlzLl9ldmVudEhhbmRsZXIodCk7YnJlYWs7Y2FzZSBpLkhPTUU6bj10aGlzLmhlYWRlcnNbMF07YnJlYWs7Y2FzZSBpLkVORDpuPXRoaXMuaGVhZGVyc1thLTFdfW4mJihlKHQudGFyZ2V0KS5hdHRyKFwidGFiSW5kZXhcIiwtMSksZShuKS5hdHRyKFwidGFiSW5kZXhcIiwwKSxuLmZvY3VzKCksdC5wcmV2ZW50RGVmYXVsdCgpKX19LF9wYW5lbEtleURvd246ZnVuY3Rpb24odCl7dC5rZXlDb2RlPT09ZS51aS5rZXlDb2RlLlVQJiZ0LmN0cmxLZXkmJmUodC5jdXJyZW50VGFyZ2V0KS5wcmV2KCkuZm9jdXMoKX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9uczt0aGlzLl9wcm9jZXNzUGFuZWxzKCksdC5hY3RpdmU9PT0hMSYmdC5jb2xsYXBzaWJsZT09PSEwfHwhdGhpcy5oZWFkZXJzLmxlbmd0aD8odC5hY3RpdmU9ITEsdGhpcy5hY3RpdmU9ZSgpKTp0LmFjdGl2ZT09PSExP3RoaXMuX2FjdGl2YXRlKDApOnRoaXMuYWN0aXZlLmxlbmd0aCYmIWUuY29udGFpbnModGhpcy5lbGVtZW50WzBdLHRoaXMuYWN0aXZlWzBdKT90aGlzLmhlYWRlcnMubGVuZ3RoPT09dGhpcy5oZWFkZXJzLmZpbmQoXCIudWktc3RhdGUtZGlzYWJsZWRcIikubGVuZ3RoPyh0LmFjdGl2ZT0hMSx0aGlzLmFjdGl2ZT1lKCkpOnRoaXMuX2FjdGl2YXRlKE1hdGgubWF4KDAsdC5hY3RpdmUtMSkpOnQuYWN0aXZlPXRoaXMuaGVhZGVycy5pbmRleCh0aGlzLmFjdGl2ZSksdGhpcy5fZGVzdHJveUljb25zKCksdGhpcy5fcmVmcmVzaCgpfSxfcHJvY2Vzc1BhbmVsczpmdW5jdGlvbigpe3RoaXMuaGVhZGVycz10aGlzLmVsZW1lbnQuZmluZCh0aGlzLm9wdGlvbnMuaGVhZGVyKS5hZGRDbGFzcyhcInVpLWFjY29yZGlvbi1oZWFkZXIgdWktaGVscGVyLXJlc2V0IHVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbFwiKSx0aGlzLmhlYWRlcnMubmV4dCgpLmFkZENsYXNzKFwidWktYWNjb3JkaW9uLWNvbnRlbnQgdWktaGVscGVyLXJlc2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b21cIikuZmlsdGVyKFwiOm5vdCgudWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlKVwiKS5oaWRlKCl9LF9yZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGksYT10aGlzLm9wdGlvbnMscz1hLmhlaWdodFN0eWxlLG49dGhpcy5lbGVtZW50LnBhcmVudCgpLHI9dGhpcy5hY2NvcmRpb25JZD1cInVpLWFjY29yZGlvbi1cIisodGhpcy5lbGVtZW50LmF0dHIoXCJpZFwiKXx8Kyt0KTt0aGlzLmFjdGl2ZT10aGlzLl9maW5kQWN0aXZlKGEuYWN0aXZlKS5hZGRDbGFzcyhcInVpLWFjY29yZGlvbi1oZWFkZXItYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZSB1aS1jb3JuZXItdG9wXCIpLnJlbW92ZUNsYXNzKFwidWktY29ybmVyLWFsbFwiKSx0aGlzLmFjdGl2ZS5uZXh0KCkuYWRkQ2xhc3MoXCJ1aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmVcIikuc2hvdygpLHRoaXMuaGVhZGVycy5hdHRyKFwicm9sZVwiLFwidGFiXCIpLmVhY2goZnVuY3Rpb24odCl7dmFyIGk9ZSh0aGlzKSxhPWkuYXR0cihcImlkXCIpLHM9aS5uZXh0KCksbj1zLmF0dHIoXCJpZFwiKTthfHwoYT1yK1wiLWhlYWRlci1cIit0LGkuYXR0cihcImlkXCIsYSkpLG58fChuPXIrXCItcGFuZWwtXCIrdCxzLmF0dHIoXCJpZFwiLG4pKSxpLmF0dHIoXCJhcmlhLWNvbnRyb2xzXCIsbikscy5hdHRyKFwiYXJpYS1sYWJlbGxlZGJ5XCIsYSl9KS5uZXh0KCkuYXR0cihcInJvbGVcIixcInRhYnBhbmVsXCIpLHRoaXMuaGVhZGVycy5ub3QodGhpcy5hY3RpdmUpLmF0dHIoe1wiYXJpYS1zZWxlY3RlZFwiOlwiZmFsc2VcIix0YWJJbmRleDotMX0pLm5leHQoKS5hdHRyKHtcImFyaWEtZXhwYW5kZWRcIjpcImZhbHNlXCIsXCJhcmlhLWhpZGRlblwiOlwidHJ1ZVwifSkuaGlkZSgpLHRoaXMuYWN0aXZlLmxlbmd0aD90aGlzLmFjdGl2ZS5hdHRyKHtcImFyaWEtc2VsZWN0ZWRcIjpcInRydWVcIix0YWJJbmRleDowfSkubmV4dCgpLmF0dHIoe1wiYXJpYS1leHBhbmRlZFwiOlwidHJ1ZVwiLFwiYXJpYS1oaWRkZW5cIjpcImZhbHNlXCJ9KTp0aGlzLmhlYWRlcnMuZXEoMCkuYXR0cihcInRhYkluZGV4XCIsMCksdGhpcy5fY3JlYXRlSWNvbnMoKSx0aGlzLl9zZXR1cEV2ZW50cyhhLmV2ZW50KSxcImZpbGxcIj09PXM/KGk9bi5oZWlnaHQoKSx0aGlzLmVsZW1lbnQuc2libGluZ3MoXCI6dmlzaWJsZVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxhPXQuY3NzKFwicG9zaXRpb25cIik7XCJhYnNvbHV0ZVwiIT09YSYmXCJmaXhlZFwiIT09YSYmKGktPXQub3V0ZXJIZWlnaHQoITApKX0pLHRoaXMuaGVhZGVycy5lYWNoKGZ1bmN0aW9uKCl7aS09ZSh0aGlzKS5vdXRlckhlaWdodCghMCl9KSx0aGlzLmhlYWRlcnMubmV4dCgpLmVhY2goZnVuY3Rpb24oKXtlKHRoaXMpLmhlaWdodChNYXRoLm1heCgwLGktZSh0aGlzKS5pbm5lckhlaWdodCgpK2UodGhpcykuaGVpZ2h0KCkpKX0pLmNzcyhcIm92ZXJmbG93XCIsXCJhdXRvXCIpKTpcImF1dG9cIj09PXMmJihpPTAsdGhpcy5oZWFkZXJzLm5leHQoKS5lYWNoKGZ1bmN0aW9uKCl7aT1NYXRoLm1heChpLGUodGhpcykuY3NzKFwiaGVpZ2h0XCIsXCJcIikuaGVpZ2h0KCkpfSkuaGVpZ2h0KGkpKX0sX2FjdGl2YXRlOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX2ZpbmRBY3RpdmUodClbMF07aSE9PXRoaXMuYWN0aXZlWzBdJiYoaT1pfHx0aGlzLmFjdGl2ZVswXSx0aGlzLl9ldmVudEhhbmRsZXIoe3RhcmdldDppLGN1cnJlbnRUYXJnZXQ6aSxwcmV2ZW50RGVmYXVsdDplLm5vb3B9KSl9LF9maW5kQWN0aXZlOmZ1bmN0aW9uKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0P3RoaXMuaGVhZGVycy5lcSh0KTplKCl9LF9zZXR1cEV2ZW50czpmdW5jdGlvbih0KXt2YXIgaT17a2V5ZG93bjpcIl9rZXlkb3duXCJ9O3QmJmUuZWFjaCh0LnNwbGl0KFwiIFwiKSxmdW5jdGlvbihlLHQpe2lbdF09XCJfZXZlbnRIYW5kbGVyXCJ9KSx0aGlzLl9vZmYodGhpcy5oZWFkZXJzLmFkZCh0aGlzLmhlYWRlcnMubmV4dCgpKSksdGhpcy5fb24odGhpcy5oZWFkZXJzLGkpLHRoaXMuX29uKHRoaXMuaGVhZGVycy5uZXh0KCkse2tleWRvd246XCJfcGFuZWxLZXlEb3duXCJ9KSx0aGlzLl9ob3ZlcmFibGUodGhpcy5oZWFkZXJzKSx0aGlzLl9mb2N1c2FibGUodGhpcy5oZWFkZXJzKX0sX2V2ZW50SGFuZGxlcjpmdW5jdGlvbih0KXt2YXIgaT10aGlzLm9wdGlvbnMsYT10aGlzLmFjdGl2ZSxzPWUodC5jdXJyZW50VGFyZ2V0KSxuPXNbMF09PT1hWzBdLHI9biYmaS5jb2xsYXBzaWJsZSxvPXI/ZSgpOnMubmV4dCgpLGg9YS5uZXh0KCksbD17b2xkSGVhZGVyOmEsb2xkUGFuZWw6aCxuZXdIZWFkZXI6cj9lKCk6cyxuZXdQYW5lbDpvfTt0LnByZXZlbnREZWZhdWx0KCksbiYmIWkuY29sbGFwc2libGV8fHRoaXMuX3RyaWdnZXIoXCJiZWZvcmVBY3RpdmF0ZVwiLHQsbCk9PT0hMXx8KGkuYWN0aXZlPXI/ITE6dGhpcy5oZWFkZXJzLmluZGV4KHMpLHRoaXMuYWN0aXZlPW4/ZSgpOnMsdGhpcy5fdG9nZ2xlKGwpLGEucmVtb3ZlQ2xhc3MoXCJ1aS1hY2NvcmRpb24taGVhZGVyLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIiksaS5pY29ucyYmYS5jaGlsZHJlbihcIi51aS1hY2NvcmRpb24taGVhZGVyLWljb25cIikucmVtb3ZlQ2xhc3MoaS5pY29ucy5hY3RpdmVIZWFkZXIpLmFkZENsYXNzKGkuaWNvbnMuaGVhZGVyKSxufHwocy5yZW1vdmVDbGFzcyhcInVpLWNvcm5lci1hbGxcIikuYWRkQ2xhc3MoXCJ1aS1hY2NvcmRpb24taGVhZGVyLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmUgdWktY29ybmVyLXRvcFwiKSxpLmljb25zJiZzLmNoaWxkcmVuKFwiLnVpLWFjY29yZGlvbi1oZWFkZXItaWNvblwiKS5yZW1vdmVDbGFzcyhpLmljb25zLmhlYWRlcikuYWRkQ2xhc3MoaS5pY29ucy5hY3RpdmVIZWFkZXIpLHMubmV4dCgpLmFkZENsYXNzKFwidWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlXCIpKSl9LF90b2dnbGU6ZnVuY3Rpb24odCl7dmFyIGk9dC5uZXdQYW5lbCxhPXRoaXMucHJldlNob3cubGVuZ3RoP3RoaXMucHJldlNob3c6dC5vbGRQYW5lbDt0aGlzLnByZXZTaG93LmFkZCh0aGlzLnByZXZIaWRlKS5zdG9wKCEwLCEwKSx0aGlzLnByZXZTaG93PWksdGhpcy5wcmV2SGlkZT1hLHRoaXMub3B0aW9ucy5hbmltYXRlP3RoaXMuX2FuaW1hdGUoaSxhLHQpOihhLmhpZGUoKSxpLnNob3coKSx0aGlzLl90b2dnbGVDb21wbGV0ZSh0KSksYS5hdHRyKHtcImFyaWEtZXhwYW5kZWRcIjpcImZhbHNlXCIsXCJhcmlhLWhpZGRlblwiOlwidHJ1ZVwifSksYS5wcmV2KCkuYXR0cihcImFyaWEtc2VsZWN0ZWRcIixcImZhbHNlXCIpLGkubGVuZ3RoJiZhLmxlbmd0aD9hLnByZXYoKS5hdHRyKFwidGFiSW5kZXhcIiwtMSk6aS5sZW5ndGgmJnRoaXMuaGVhZGVycy5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gMD09PWUodGhpcykuYXR0cihcInRhYkluZGV4XCIpfSkuYXR0cihcInRhYkluZGV4XCIsLTEpLGkuYXR0cih7XCJhcmlhLWV4cGFuZGVkXCI6XCJ0cnVlXCIsXCJhcmlhLWhpZGRlblwiOlwiZmFsc2VcIn0pLnByZXYoKS5hdHRyKHtcImFyaWEtc2VsZWN0ZWRcIjpcInRydWVcIix0YWJJbmRleDowfSl9LF9hbmltYXRlOmZ1bmN0aW9uKGUsdCxzKXt2YXIgbixyLG8saD10aGlzLGw9MCx1PWUubGVuZ3RoJiYoIXQubGVuZ3RofHxlLmluZGV4KCk8dC5pbmRleCgpKSxkPXRoaXMub3B0aW9ucy5hbmltYXRlfHx7fSxjPXUmJmQuZG93bnx8ZCxwPWZ1bmN0aW9uKCl7aC5fdG9nZ2xlQ29tcGxldGUocyl9O3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBjJiYobz1jKSxcInN0cmluZ1wiPT10eXBlb2YgYyYmKHI9Yykscj1yfHxjLmVhc2luZ3x8ZC5lYXNpbmcsbz1vfHxjLmR1cmF0aW9ufHxkLmR1cmF0aW9uLHQubGVuZ3RoP2UubGVuZ3RoPyhuPWUuc2hvdygpLm91dGVySGVpZ2h0KCksdC5hbmltYXRlKGkse2R1cmF0aW9uOm8sZWFzaW5nOnIsc3RlcDpmdW5jdGlvbihlLHQpe3Qubm93PU1hdGgucm91bmQoZSl9fSksZS5oaWRlKCkuYW5pbWF0ZShhLHtkdXJhdGlvbjpvLGVhc2luZzpyLGNvbXBsZXRlOnAsc3RlcDpmdW5jdGlvbihlLGkpe2kubm93PU1hdGgucm91bmQoZSksXCJoZWlnaHRcIiE9PWkucHJvcD9sKz1pLm5vdzpcImNvbnRlbnRcIiE9PWgub3B0aW9ucy5oZWlnaHRTdHlsZSYmKGkubm93PU1hdGgucm91bmQobi10Lm91dGVySGVpZ2h0KCktbCksbD0wKX19KSx1bmRlZmluZWQpOnQuYW5pbWF0ZShpLG8scixwKTplLmFuaW1hdGUoYSxvLHIscCl9LF90b2dnbGVDb21wbGV0ZTpmdW5jdGlvbihlKXt2YXIgdD1lLm9sZFBhbmVsO3QucmVtb3ZlQ2xhc3MoXCJ1aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmVcIikucHJldigpLnJlbW92ZUNsYXNzKFwidWktY29ybmVyLXRvcFwiKS5hZGRDbGFzcyhcInVpLWNvcm5lci1hbGxcIiksdC5sZW5ndGgmJih0LnBhcmVudCgpWzBdLmNsYXNzTmFtZT10LnBhcmVudCgpWzBdLmNsYXNzTmFtZSksdGhpcy5fdHJpZ2dlcihcImFjdGl2YXRlXCIsbnVsbCxlKX19KX0pKGpRdWVyeSk7KGZ1bmN0aW9uKGUpe3ZhciB0PTA7ZS53aWRnZXQoXCJ1aS5hdXRvY29tcGxldGVcIix7dmVyc2lvbjpcIjEuMTAuM1wiLGRlZmF1bHRFbGVtZW50OlwiPGlucHV0PlwiLG9wdGlvbnM6e2FwcGVuZFRvOm51bGwsYXV0b0ZvY3VzOiExLGRlbGF5OjMwMCxtaW5MZW5ndGg6MSxwb3NpdGlvbjp7bXk6XCJsZWZ0IHRvcFwiLGF0OlwibGVmdCBib3R0b21cIixjb2xsaXNpb246XCJub25lXCJ9LHNvdXJjZTpudWxsLGNoYW5nZTpudWxsLGNsb3NlOm51bGwsZm9jdXM6bnVsbCxvcGVuOm51bGwscmVzcG9uc2U6bnVsbCxzZWFyY2g6bnVsbCxzZWxlY3Q6bnVsbH0scGVuZGluZzowLF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdCxpLGEscz10aGlzLmVsZW1lbnRbMF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxuPVwidGV4dGFyZWFcIj09PXMscj1cImlucHV0XCI9PT1zO3RoaXMuaXNNdWx0aUxpbmU9bj8hMDpyPyExOnRoaXMuZWxlbWVudC5wcm9wKFwiaXNDb250ZW50RWRpdGFibGVcIiksdGhpcy52YWx1ZU1ldGhvZD10aGlzLmVsZW1lbnRbbnx8cj9cInZhbFwiOlwidGV4dFwiXSx0aGlzLmlzTmV3TWVudT0hMCx0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1hdXRvY29tcGxldGUtaW5wdXRcIikuYXR0cihcImF1dG9jb21wbGV0ZVwiLFwib2ZmXCIpLHRoaXMuX29uKHRoaXMuZWxlbWVudCx7a2V5ZG93bjpmdW5jdGlvbihzKXtpZih0aGlzLmVsZW1lbnQucHJvcChcInJlYWRPbmx5XCIpKXJldHVybiB0PSEwLGE9ITAsaT0hMCx1bmRlZmluZWQ7dD0hMSxhPSExLGk9ITE7dmFyIG49ZS51aS5rZXlDb2RlO3N3aXRjaChzLmtleUNvZGUpe2Nhc2Ugbi5QQUdFX1VQOnQ9ITAsdGhpcy5fbW92ZShcInByZXZpb3VzUGFnZVwiLHMpO2JyZWFrO2Nhc2Ugbi5QQUdFX0RPV046dD0hMCx0aGlzLl9tb3ZlKFwibmV4dFBhZ2VcIixzKTticmVhaztjYXNlIG4uVVA6dD0hMCx0aGlzLl9rZXlFdmVudChcInByZXZpb3VzXCIscyk7YnJlYWs7Y2FzZSBuLkRPV046dD0hMCx0aGlzLl9rZXlFdmVudChcIm5leHRcIixzKTticmVhaztjYXNlIG4uRU5URVI6Y2FzZSBuLk5VTVBBRF9FTlRFUjp0aGlzLm1lbnUuYWN0aXZlJiYodD0hMCxzLnByZXZlbnREZWZhdWx0KCksdGhpcy5tZW51LnNlbGVjdChzKSk7YnJlYWs7Y2FzZSBuLlRBQjp0aGlzLm1lbnUuYWN0aXZlJiZ0aGlzLm1lbnUuc2VsZWN0KHMpO2JyZWFrO2Nhc2Ugbi5FU0NBUEU6dGhpcy5tZW51LmVsZW1lbnQuaXMoXCI6dmlzaWJsZVwiKSYmKHRoaXMuX3ZhbHVlKHRoaXMudGVybSksdGhpcy5jbG9zZShzKSxzLnByZXZlbnREZWZhdWx0KCkpO2JyZWFrO2RlZmF1bHQ6aT0hMCx0aGlzLl9zZWFyY2hUaW1lb3V0KHMpfX0sa2V5cHJlc3M6ZnVuY3Rpb24oYSl7aWYodClyZXR1cm4gdD0hMSwoIXRoaXMuaXNNdWx0aUxpbmV8fHRoaXMubWVudS5lbGVtZW50LmlzKFwiOnZpc2libGVcIikpJiZhLnByZXZlbnREZWZhdWx0KCksdW5kZWZpbmVkO2lmKCFpKXt2YXIgcz1lLnVpLmtleUNvZGU7c3dpdGNoKGEua2V5Q29kZSl7Y2FzZSBzLlBBR0VfVVA6dGhpcy5fbW92ZShcInByZXZpb3VzUGFnZVwiLGEpO2JyZWFrO2Nhc2Ugcy5QQUdFX0RPV046dGhpcy5fbW92ZShcIm5leHRQYWdlXCIsYSk7YnJlYWs7Y2FzZSBzLlVQOnRoaXMuX2tleUV2ZW50KFwicHJldmlvdXNcIixhKTticmVhaztjYXNlIHMuRE9XTjp0aGlzLl9rZXlFdmVudChcIm5leHRcIixhKX19fSxpbnB1dDpmdW5jdGlvbihlKXtyZXR1cm4gYT8oYT0hMSxlLnByZXZlbnREZWZhdWx0KCksdW5kZWZpbmVkKToodGhpcy5fc2VhcmNoVGltZW91dChlKSx1bmRlZmluZWQpfSxmb2N1czpmdW5jdGlvbigpe3RoaXMuc2VsZWN0ZWRJdGVtPW51bGwsdGhpcy5wcmV2aW91cz10aGlzLl92YWx1ZSgpfSxibHVyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNhbmNlbEJsdXI/KGRlbGV0ZSB0aGlzLmNhbmNlbEJsdXIsdW5kZWZpbmVkKTooY2xlYXJUaW1lb3V0KHRoaXMuc2VhcmNoaW5nKSx0aGlzLmNsb3NlKGUpLHRoaXMuX2NoYW5nZShlKSx1bmRlZmluZWQpfX0pLHRoaXMuX2luaXRTb3VyY2UoKSx0aGlzLm1lbnU9ZShcIjx1bD5cIikuYWRkQ2xhc3MoXCJ1aS1hdXRvY29tcGxldGUgdWktZnJvbnRcIikuYXBwZW5kVG8odGhpcy5fYXBwZW5kVG8oKSkubWVudSh7cm9sZTpudWxsfSkuaGlkZSgpLmRhdGEoXCJ1aS1tZW51XCIpLHRoaXMuX29uKHRoaXMubWVudS5lbGVtZW50LHttb3VzZWRvd246ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuY2FuY2VsQmx1cj0hMCx0aGlzLl9kZWxheShmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLmNhbmNlbEJsdXJ9KTt2YXIgaT10aGlzLm1lbnUuZWxlbWVudFswXTtlKHQudGFyZ2V0KS5jbG9zZXN0KFwiLnVpLW1lbnUtaXRlbVwiKS5sZW5ndGh8fHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmRvY3VtZW50Lm9uZShcIm1vdXNlZG93blwiLGZ1bmN0aW9uKGEpe2EudGFyZ2V0PT09dC5lbGVtZW50WzBdfHxhLnRhcmdldD09PWl8fGUuY29udGFpbnMoaSxhLnRhcmdldCl8fHQuY2xvc2UoKX0pfSl9LG1lbnVmb2N1czpmdW5jdGlvbih0LGkpe2lmKHRoaXMuaXNOZXdNZW51JiYodGhpcy5pc05ld01lbnU9ITEsdC5vcmlnaW5hbEV2ZW50JiYvXm1vdXNlLy50ZXN0KHQub3JpZ2luYWxFdmVudC50eXBlKSkpcmV0dXJuIHRoaXMubWVudS5ibHVyKCksdGhpcy5kb2N1bWVudC5vbmUoXCJtb3VzZW1vdmVcIixmdW5jdGlvbigpe2UodC50YXJnZXQpLnRyaWdnZXIodC5vcmlnaW5hbEV2ZW50KX0pLHVuZGVmaW5lZDt2YXIgYT1pLml0ZW0uZGF0YShcInVpLWF1dG9jb21wbGV0ZS1pdGVtXCIpOyExIT09dGhpcy5fdHJpZ2dlcihcImZvY3VzXCIsdCx7aXRlbTphfSk/dC5vcmlnaW5hbEV2ZW50JiYvXmtleS8udGVzdCh0Lm9yaWdpbmFsRXZlbnQudHlwZSkmJnRoaXMuX3ZhbHVlKGEudmFsdWUpOnRoaXMubGl2ZVJlZ2lvbi50ZXh0KGEudmFsdWUpfSxtZW51c2VsZWN0OmZ1bmN0aW9uKGUsdCl7dmFyIGk9dC5pdGVtLmRhdGEoXCJ1aS1hdXRvY29tcGxldGUtaXRlbVwiKSxhPXRoaXMucHJldmlvdXM7dGhpcy5lbGVtZW50WzBdIT09dGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50JiYodGhpcy5lbGVtZW50LmZvY3VzKCksdGhpcy5wcmV2aW91cz1hLHRoaXMuX2RlbGF5KGZ1bmN0aW9uKCl7dGhpcy5wcmV2aW91cz1hLHRoaXMuc2VsZWN0ZWRJdGVtPWl9KSksITEhPT10aGlzLl90cmlnZ2VyKFwic2VsZWN0XCIsZSx7aXRlbTppfSkmJnRoaXMuX3ZhbHVlKGkudmFsdWUpLHRoaXMudGVybT10aGlzLl92YWx1ZSgpLHRoaXMuY2xvc2UoZSksdGhpcy5zZWxlY3RlZEl0ZW09aX19KSx0aGlzLmxpdmVSZWdpb249ZShcIjxzcGFuPlwiLHtyb2xlOlwic3RhdHVzXCIsXCJhcmlhLWxpdmVcIjpcInBvbGl0ZVwifSkuYWRkQ2xhc3MoXCJ1aS1oZWxwZXItaGlkZGVuLWFjY2Vzc2libGVcIikuaW5zZXJ0QmVmb3JlKHRoaXMuZWxlbWVudCksdGhpcy5fb24odGhpcy53aW5kb3cse2JlZm9yZXVubG9hZDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVBdHRyKFwiYXV0b2NvbXBsZXRlXCIpfX0pfSxfZGVzdHJveTpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnNlYXJjaGluZyksdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktYXV0b2NvbXBsZXRlLWlucHV0XCIpLnJlbW92ZUF0dHIoXCJhdXRvY29tcGxldGVcIiksdGhpcy5tZW51LmVsZW1lbnQucmVtb3ZlKCksdGhpcy5saXZlUmVnaW9uLnJlbW92ZSgpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsdCl7dGhpcy5fc3VwZXIoZSx0KSxcInNvdXJjZVwiPT09ZSYmdGhpcy5faW5pdFNvdXJjZSgpLFwiYXBwZW5kVG9cIj09PWUmJnRoaXMubWVudS5lbGVtZW50LmFwcGVuZFRvKHRoaXMuX2FwcGVuZFRvKCkpLFwiZGlzYWJsZWRcIj09PWUmJnQmJnRoaXMueGhyJiZ0aGlzLnhoci5hYm9ydCgpfSxfYXBwZW5kVG86ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMuYXBwZW5kVG87cmV0dXJuIHQmJih0PXQuanF1ZXJ5fHx0Lm5vZGVUeXBlP2UodCk6dGhpcy5kb2N1bWVudC5maW5kKHQpLmVxKDApKSx0fHwodD10aGlzLmVsZW1lbnQuY2xvc2VzdChcIi51aS1mcm9udFwiKSksdC5sZW5ndGh8fCh0PXRoaXMuZG9jdW1lbnRbMF0uYm9keSksdH0sX2luaXRTb3VyY2U6ZnVuY3Rpb24oKXt2YXIgdCxpLGE9dGhpcztlLmlzQXJyYXkodGhpcy5vcHRpb25zLnNvdXJjZSk/KHQ9dGhpcy5vcHRpb25zLnNvdXJjZSx0aGlzLnNvdXJjZT1mdW5jdGlvbihpLGEpe2EoZS51aS5hdXRvY29tcGxldGUuZmlsdGVyKHQsaS50ZXJtKSl9KTpcInN0cmluZ1wiPT10eXBlb2YgdGhpcy5vcHRpb25zLnNvdXJjZT8oaT10aGlzLm9wdGlvbnMuc291cmNlLHRoaXMuc291cmNlPWZ1bmN0aW9uKHQscyl7YS54aHImJmEueGhyLmFib3J0KCksYS54aHI9ZS5hamF4KHt1cmw6aSxkYXRhOnQsZGF0YVR5cGU6XCJqc29uXCIsc3VjY2VzczpmdW5jdGlvbihlKXtzKGUpfSxlcnJvcjpmdW5jdGlvbigpe3MoW10pfX0pfSk6dGhpcy5zb3VyY2U9dGhpcy5vcHRpb25zLnNvdXJjZX0sX3NlYXJjaFRpbWVvdXQ6ZnVuY3Rpb24oZSl7Y2xlYXJUaW1lb3V0KHRoaXMuc2VhcmNoaW5nKSx0aGlzLnNlYXJjaGluZz10aGlzLl9kZWxheShmdW5jdGlvbigpe3RoaXMudGVybSE9PXRoaXMuX3ZhbHVlKCkmJih0aGlzLnNlbGVjdGVkSXRlbT1udWxsLHRoaXMuc2VhcmNoKG51bGwsZSkpfSx0aGlzLm9wdGlvbnMuZGVsYXkpfSxzZWFyY2g6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1udWxsIT1lP2U6dGhpcy5fdmFsdWUoKSx0aGlzLnRlcm09dGhpcy5fdmFsdWUoKSxlLmxlbmd0aDx0aGlzLm9wdGlvbnMubWluTGVuZ3RoP3RoaXMuY2xvc2UodCk6dGhpcy5fdHJpZ2dlcihcInNlYXJjaFwiLHQpIT09ITE/dGhpcy5fc2VhcmNoKGUpOnVuZGVmaW5lZH0sX3NlYXJjaDpmdW5jdGlvbihlKXt0aGlzLnBlbmRpbmcrKyx0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1hdXRvY29tcGxldGUtbG9hZGluZ1wiKSx0aGlzLmNhbmNlbFNlYXJjaD0hMSx0aGlzLnNvdXJjZSh7dGVybTplfSx0aGlzLl9yZXNwb25zZSgpKX0sX3Jlc3BvbnNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxpPSsrdDtyZXR1cm4gZnVuY3Rpb24oYSl7aT09PXQmJmUuX19yZXNwb25zZShhKSxlLnBlbmRpbmctLSxlLnBlbmRpbmd8fGUuZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLWF1dG9jb21wbGV0ZS1sb2FkaW5nXCIpfX0sX19yZXNwb25zZTpmdW5jdGlvbihlKXtlJiYoZT10aGlzLl9ub3JtYWxpemUoZSkpLHRoaXMuX3RyaWdnZXIoXCJyZXNwb25zZVwiLG51bGwse2NvbnRlbnQ6ZX0pLCF0aGlzLm9wdGlvbnMuZGlzYWJsZWQmJmUmJmUubGVuZ3RoJiYhdGhpcy5jYW5jZWxTZWFyY2g/KHRoaXMuX3N1Z2dlc3QoZSksdGhpcy5fdHJpZ2dlcihcIm9wZW5cIikpOnRoaXMuX2Nsb3NlKCl9LGNsb3NlOmZ1bmN0aW9uKGUpe3RoaXMuY2FuY2VsU2VhcmNoPSEwLHRoaXMuX2Nsb3NlKGUpfSxfY2xvc2U6ZnVuY3Rpb24oZSl7dGhpcy5tZW51LmVsZW1lbnQuaXMoXCI6dmlzaWJsZVwiKSYmKHRoaXMubWVudS5lbGVtZW50LmhpZGUoKSx0aGlzLm1lbnUuYmx1cigpLHRoaXMuaXNOZXdNZW51PSEwLHRoaXMuX3RyaWdnZXIoXCJjbG9zZVwiLGUpKX0sX2NoYW5nZTpmdW5jdGlvbihlKXt0aGlzLnByZXZpb3VzIT09dGhpcy5fdmFsdWUoKSYmdGhpcy5fdHJpZ2dlcihcImNoYW5nZVwiLGUse2l0ZW06dGhpcy5zZWxlY3RlZEl0ZW19KX0sX25vcm1hbGl6ZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5sZW5ndGgmJnRbMF0ubGFiZWwmJnRbMF0udmFsdWU/dDplLm1hcCh0LGZ1bmN0aW9uKHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0P3tsYWJlbDp0LHZhbHVlOnR9OmUuZXh0ZW5kKHtsYWJlbDp0LmxhYmVsfHx0LnZhbHVlLHZhbHVlOnQudmFsdWV8fHQubGFiZWx9LHQpfSl9LF9zdWdnZXN0OmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMubWVudS5lbGVtZW50LmVtcHR5KCk7dGhpcy5fcmVuZGVyTWVudShpLHQpLHRoaXMuaXNOZXdNZW51PSEwLHRoaXMubWVudS5yZWZyZXNoKCksaS5zaG93KCksdGhpcy5fcmVzaXplTWVudSgpLGkucG9zaXRpb24oZS5leHRlbmQoe29mOnRoaXMuZWxlbWVudH0sdGhpcy5vcHRpb25zLnBvc2l0aW9uKSksdGhpcy5vcHRpb25zLmF1dG9Gb2N1cyYmdGhpcy5tZW51Lm5leHQoKX0sX3Jlc2l6ZU1lbnU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1lbnUuZWxlbWVudDtlLm91dGVyV2lkdGgoTWF0aC5tYXgoZS53aWR0aChcIlwiKS5vdXRlcldpZHRoKCkrMSx0aGlzLmVsZW1lbnQub3V0ZXJXaWR0aCgpKSl9LF9yZW5kZXJNZW51OmZ1bmN0aW9uKHQsaSl7dmFyIGE9dGhpcztlLmVhY2goaSxmdW5jdGlvbihlLGkpe2EuX3JlbmRlckl0ZW1EYXRhKHQsaSl9KX0sX3JlbmRlckl0ZW1EYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3JlbmRlckl0ZW0oZSx0KS5kYXRhKFwidWktYXV0b2NvbXBsZXRlLWl0ZW1cIix0KX0sX3JlbmRlckl0ZW06ZnVuY3Rpb24odCxpKXtyZXR1cm4gZShcIjxsaT5cIikuYXBwZW5kKGUoXCI8YT5cIikudGV4dChpLmxhYmVsKSkuYXBwZW5kVG8odCl9LF9tb3ZlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubWVudS5lbGVtZW50LmlzKFwiOnZpc2libGVcIik/dGhpcy5tZW51LmlzRmlyc3RJdGVtKCkmJi9ecHJldmlvdXMvLnRlc3QoZSl8fHRoaXMubWVudS5pc0xhc3RJdGVtKCkmJi9ebmV4dC8udGVzdChlKT8odGhpcy5fdmFsdWUodGhpcy50ZXJtKSx0aGlzLm1lbnUuYmx1cigpLHVuZGVmaW5lZCk6KHRoaXMubWVudVtlXSh0KSx1bmRlZmluZWQpOih0aGlzLnNlYXJjaChudWxsLHQpLHVuZGVmaW5lZCl9LHdpZGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1lbnUuZWxlbWVudH0sX3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVNZXRob2QuYXBwbHkodGhpcy5lbGVtZW50LGFyZ3VtZW50cyl9LF9rZXlFdmVudDpmdW5jdGlvbihlLHQpeyghdGhpcy5pc011bHRpTGluZXx8dGhpcy5tZW51LmVsZW1lbnQuaXMoXCI6dmlzaWJsZVwiKSkmJih0aGlzLl9tb3ZlKGUsdCksdC5wcmV2ZW50RGVmYXVsdCgpKX19KSxlLmV4dGVuZChlLnVpLmF1dG9jb21wbGV0ZSx7ZXNjYXBlUmVnZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvW1xcLVxcW1xcXXt9KCkqKz8uLFxcXFxcXF4kfCNcXHNdL2csXCJcXFxcJCZcIil9LGZpbHRlcjpmdW5jdGlvbih0LGkpe3ZhciBhPVJlZ0V4cChlLnVpLmF1dG9jb21wbGV0ZS5lc2NhcGVSZWdleChpKSxcImlcIik7cmV0dXJuIGUuZ3JlcCh0LGZ1bmN0aW9uKGUpe3JldHVybiBhLnRlc3QoZS5sYWJlbHx8ZS52YWx1ZXx8ZSl9KX19KSxlLndpZGdldChcInVpLmF1dG9jb21wbGV0ZVwiLGUudWkuYXV0b2NvbXBsZXRlLHtvcHRpb25zOnttZXNzYWdlczp7bm9SZXN1bHRzOlwiTm8gc2VhcmNoIHJlc3VsdHMuXCIscmVzdWx0czpmdW5jdGlvbihlKXtyZXR1cm4gZSsoZT4xP1wiIHJlc3VsdHMgYXJlXCI6XCIgcmVzdWx0IGlzXCIpK1wiIGF2YWlsYWJsZSwgdXNlIHVwIGFuZCBkb3duIGFycm93IGtleXMgdG8gbmF2aWdhdGUuXCJ9fX0sX19yZXNwb25zZTpmdW5jdGlvbihlKXt2YXIgdDt0aGlzLl9zdXBlckFwcGx5KGFyZ3VtZW50cyksdGhpcy5vcHRpb25zLmRpc2FibGVkfHx0aGlzLmNhbmNlbFNlYXJjaHx8KHQ9ZSYmZS5sZW5ndGg/dGhpcy5vcHRpb25zLm1lc3NhZ2VzLnJlc3VsdHMoZS5sZW5ndGgpOnRoaXMub3B0aW9ucy5tZXNzYWdlcy5ub1Jlc3VsdHMsdGhpcy5saXZlUmVnaW9uLnRleHQodCkpfX0pfSkoalF1ZXJ5KTsoZnVuY3Rpb24oZSl7dmFyIHQsaSxhLHMsbj1cInVpLWJ1dHRvbiB1aS13aWRnZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsXCIscj1cInVpLXN0YXRlLWhvdmVyIHVpLXN0YXRlLWFjdGl2ZSBcIixvPVwidWktYnV0dG9uLWljb25zLW9ubHkgdWktYnV0dG9uLWljb24tb25seSB1aS1idXR0b24tdGV4dC1pY29ucyB1aS1idXR0b24tdGV4dC1pY29uLXByaW1hcnkgdWktYnV0dG9uLXRleHQtaWNvbi1zZWNvbmRhcnkgdWktYnV0dG9uLXRleHQtb25seVwiLGg9ZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmZpbmQoXCI6dWktYnV0dG9uXCIpLmJ1dHRvbihcInJlZnJlc2hcIil9LDEpfSxsPWZ1bmN0aW9uKHQpe3ZhciBpPXQubmFtZSxhPXQuZm9ybSxzPWUoW10pO3JldHVybiBpJiYoaT1pLnJlcGxhY2UoLycvZyxcIlxcXFwnXCIpLHM9YT9lKGEpLmZpbmQoXCJbbmFtZT0nXCIraStcIiddXCIpOmUoXCJbbmFtZT0nXCIraStcIiddXCIsdC5vd25lckRvY3VtZW50KS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5mb3JtfSkpLHN9O2Uud2lkZ2V0KFwidWkuYnV0dG9uXCIse3ZlcnNpb246XCIxLjEwLjNcIixkZWZhdWx0RWxlbWVudDpcIjxidXR0b24+XCIsb3B0aW9uczp7ZGlzYWJsZWQ6bnVsbCx0ZXh0OiEwLGxhYmVsOm51bGwsaWNvbnM6e3ByaW1hcnk6bnVsbCxzZWNvbmRhcnk6bnVsbH19LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuY2xvc2VzdChcImZvcm1cIikudW5iaW5kKFwicmVzZXRcIit0aGlzLmV2ZW50TmFtZXNwYWNlKS5iaW5kKFwicmVzZXRcIit0aGlzLmV2ZW50TmFtZXNwYWNlLGgpLFwiYm9vbGVhblwiIT10eXBlb2YgdGhpcy5vcHRpb25zLmRpc2FibGVkP3RoaXMub3B0aW9ucy5kaXNhYmxlZD0hIXRoaXMuZWxlbWVudC5wcm9wKFwiZGlzYWJsZWRcIik6dGhpcy5lbGVtZW50LnByb3AoXCJkaXNhYmxlZFwiLHRoaXMub3B0aW9ucy5kaXNhYmxlZCksdGhpcy5fZGV0ZXJtaW5lQnV0dG9uVHlwZSgpLHRoaXMuaGFzVGl0bGU9ISF0aGlzLmJ1dHRvbkVsZW1lbnQuYXR0cihcInRpdGxlXCIpO3ZhciByPXRoaXMsbz10aGlzLm9wdGlvbnMsdT1cImNoZWNrYm94XCI9PT10aGlzLnR5cGV8fFwicmFkaW9cIj09PXRoaXMudHlwZSxkPXU/XCJcIjpcInVpLXN0YXRlLWFjdGl2ZVwiLGM9XCJ1aS1zdGF0ZS1mb2N1c1wiO251bGw9PT1vLmxhYmVsJiYoby5sYWJlbD1cImlucHV0XCI9PT10aGlzLnR5cGU/dGhpcy5idXR0b25FbGVtZW50LnZhbCgpOnRoaXMuYnV0dG9uRWxlbWVudC5odG1sKCkpLHRoaXMuX2hvdmVyYWJsZSh0aGlzLmJ1dHRvbkVsZW1lbnQpLHRoaXMuYnV0dG9uRWxlbWVudC5hZGRDbGFzcyhuKS5hdHRyKFwicm9sZVwiLFwiYnV0dG9uXCIpLmJpbmQoXCJtb3VzZWVudGVyXCIrdGhpcy5ldmVudE5hbWVzcGFjZSxmdW5jdGlvbigpe28uZGlzYWJsZWR8fHRoaXM9PT10JiZlKHRoaXMpLmFkZENsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpfSkuYmluZChcIm1vdXNlbGVhdmVcIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKCl7by5kaXNhYmxlZHx8ZSh0aGlzKS5yZW1vdmVDbGFzcyhkKX0pLmJpbmQoXCJjbGlja1wiK3RoaXMuZXZlbnROYW1lc3BhY2UsZnVuY3Rpb24oZSl7by5kaXNhYmxlZCYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpKX0pLHRoaXMuZWxlbWVudC5iaW5kKFwiZm9jdXNcIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKCl7ci5idXR0b25FbGVtZW50LmFkZENsYXNzKGMpfSkuYmluZChcImJsdXJcIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKCl7ci5idXR0b25FbGVtZW50LnJlbW92ZUNsYXNzKGMpfSksdSYmKHRoaXMuZWxlbWVudC5iaW5kKFwiY2hhbmdlXCIrdGhpcy5ldmVudE5hbWVzcGFjZSxmdW5jdGlvbigpe3N8fHIucmVmcmVzaCgpfSksdGhpcy5idXR0b25FbGVtZW50LmJpbmQoXCJtb3VzZWRvd25cIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKGUpe28uZGlzYWJsZWR8fChzPSExLGk9ZS5wYWdlWCxhPWUucGFnZVkpfSkuYmluZChcIm1vdXNldXBcIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKGUpe28uZGlzYWJsZWR8fChpIT09ZS5wYWdlWHx8YSE9PWUucGFnZVkpJiYocz0hMCl9KSksXCJjaGVja2JveFwiPT09dGhpcy50eXBlP3RoaXMuYnV0dG9uRWxlbWVudC5iaW5kKFwiY2xpY2tcIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKCl7cmV0dXJuIG8uZGlzYWJsZWR8fHM/ITE6dW5kZWZpbmVkfSk6XCJyYWRpb1wiPT09dGhpcy50eXBlP3RoaXMuYnV0dG9uRWxlbWVudC5iaW5kKFwiY2xpY2tcIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKCl7aWYoby5kaXNhYmxlZHx8cylyZXR1cm4hMTtlKHRoaXMpLmFkZENsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpLHIuYnV0dG9uRWxlbWVudC5hdHRyKFwiYXJpYS1wcmVzc2VkXCIsXCJ0cnVlXCIpO3ZhciB0PXIuZWxlbWVudFswXTtsKHQpLm5vdCh0KS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKS5idXR0b24oXCJ3aWRnZXRcIilbMF19KS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKS5hdHRyKFwiYXJpYS1wcmVzc2VkXCIsXCJmYWxzZVwiKX0pOih0aGlzLmJ1dHRvbkVsZW1lbnQuYmluZChcIm1vdXNlZG93blwiK3RoaXMuZXZlbnROYW1lc3BhY2UsZnVuY3Rpb24oKXtyZXR1cm4gby5kaXNhYmxlZD8hMTooZSh0aGlzKS5hZGRDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKSx0PXRoaXMsci5kb2N1bWVudC5vbmUoXCJtb3VzZXVwXCIsZnVuY3Rpb24oKXt0PW51bGx9KSx1bmRlZmluZWQpfSkuYmluZChcIm1vdXNldXBcIit0aGlzLmV2ZW50TmFtZXNwYWNlLGZ1bmN0aW9uKCl7cmV0dXJuIG8uZGlzYWJsZWQ/ITE6KGUodGhpcykucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIiksdW5kZWZpbmVkKX0pLmJpbmQoXCJrZXlkb3duXCIrdGhpcy5ldmVudE5hbWVzcGFjZSxmdW5jdGlvbih0KXtyZXR1cm4gby5kaXNhYmxlZD8hMTooKHQua2V5Q29kZT09PWUudWkua2V5Q29kZS5TUEFDRXx8dC5rZXlDb2RlPT09ZS51aS5rZXlDb2RlLkVOVEVSKSYmZSh0aGlzKS5hZGRDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKSx1bmRlZmluZWQpfSkuYmluZChcImtleXVwXCIrdGhpcy5ldmVudE5hbWVzcGFjZStcIiBibHVyXCIrdGhpcy5ldmVudE5hbWVzcGFjZSxmdW5jdGlvbigpe2UodGhpcykucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIil9KSx0aGlzLmJ1dHRvbkVsZW1lbnQuaXMoXCJhXCIpJiZ0aGlzLmJ1dHRvbkVsZW1lbnQua2V5dXAoZnVuY3Rpb24odCl7dC5rZXlDb2RlPT09ZS51aS5rZXlDb2RlLlNQQUNFJiZlKHRoaXMpLmNsaWNrKCl9KSksdGhpcy5fc2V0T3B0aW9uKFwiZGlzYWJsZWRcIixvLmRpc2FibGVkKSx0aGlzLl9yZXNldEJ1dHRvbigpfSxfZGV0ZXJtaW5lQnV0dG9uVHlwZTpmdW5jdGlvbigpe3ZhciBlLHQsaTt0aGlzLnR5cGU9dGhpcy5lbGVtZW50LmlzKFwiW3R5cGU9Y2hlY2tib3hdXCIpP1wiY2hlY2tib3hcIjp0aGlzLmVsZW1lbnQuaXMoXCJbdHlwZT1yYWRpb11cIik/XCJyYWRpb1wiOnRoaXMuZWxlbWVudC5pcyhcImlucHV0XCIpP1wiaW5wdXRcIjpcImJ1dHRvblwiLFwiY2hlY2tib3hcIj09PXRoaXMudHlwZXx8XCJyYWRpb1wiPT09dGhpcy50eXBlPyhlPXRoaXMuZWxlbWVudC5wYXJlbnRzKCkubGFzdCgpLHQ9XCJsYWJlbFtmb3I9J1wiK3RoaXMuZWxlbWVudC5hdHRyKFwiaWRcIikrXCInXVwiLHRoaXMuYnV0dG9uRWxlbWVudD1lLmZpbmQodCksdGhpcy5idXR0b25FbGVtZW50Lmxlbmd0aHx8KGU9ZS5sZW5ndGg/ZS5zaWJsaW5ncygpOnRoaXMuZWxlbWVudC5zaWJsaW5ncygpLHRoaXMuYnV0dG9uRWxlbWVudD1lLmZpbHRlcih0KSx0aGlzLmJ1dHRvbkVsZW1lbnQubGVuZ3RofHwodGhpcy5idXR0b25FbGVtZW50PWUuZmluZCh0KSkpLHRoaXMuZWxlbWVudC5hZGRDbGFzcyhcInVpLWhlbHBlci1oaWRkZW4tYWNjZXNzaWJsZVwiKSxpPXRoaXMuZWxlbWVudC5pcyhcIjpjaGVja2VkXCIpLGkmJnRoaXMuYnV0dG9uRWxlbWVudC5hZGRDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKSx0aGlzLmJ1dHRvbkVsZW1lbnQucHJvcChcImFyaWEtcHJlc3NlZFwiLGkpKTp0aGlzLmJ1dHRvbkVsZW1lbnQ9dGhpcy5lbGVtZW50fSx3aWRnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idXR0b25FbGVtZW50fSxfZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLWhlbHBlci1oaWRkZW4tYWNjZXNzaWJsZVwiKSx0aGlzLmJ1dHRvbkVsZW1lbnQucmVtb3ZlQ2xhc3MobitcIiBcIityK1wiIFwiK28pLnJlbW92ZUF0dHIoXCJyb2xlXCIpLnJlbW92ZUF0dHIoXCJhcmlhLXByZXNzZWRcIikuaHRtbCh0aGlzLmJ1dHRvbkVsZW1lbnQuZmluZChcIi51aS1idXR0b24tdGV4dFwiKS5odG1sKCkpLHRoaXMuaGFzVGl0bGV8fHRoaXMuYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyKFwidGl0bGVcIil9LF9zZXRPcHRpb246ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fc3VwZXIoZSx0KSxcImRpc2FibGVkXCI9PT1lPyh0P3RoaXMuZWxlbWVudC5wcm9wKFwiZGlzYWJsZWRcIiwhMCk6dGhpcy5lbGVtZW50LnByb3AoXCJkaXNhYmxlZFwiLCExKSx1bmRlZmluZWQpOih0aGlzLl9yZXNldEJ1dHRvbigpLHVuZGVmaW5lZCl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmVsZW1lbnQuaXMoXCJpbnB1dCwgYnV0dG9uXCIpP3RoaXMuZWxlbWVudC5pcyhcIjpkaXNhYmxlZFwiKTp0aGlzLmVsZW1lbnQuaGFzQ2xhc3MoXCJ1aS1idXR0b24tZGlzYWJsZWRcIik7dCE9PXRoaXMub3B0aW9ucy5kaXNhYmxlZCYmdGhpcy5fc2V0T3B0aW9uKFwiZGlzYWJsZWRcIix0KSxcInJhZGlvXCI9PT10aGlzLnR5cGU/bCh0aGlzLmVsZW1lbnRbMF0pLmVhY2goZnVuY3Rpb24oKXtlKHRoaXMpLmlzKFwiOmNoZWNrZWRcIik/ZSh0aGlzKS5idXR0b24oXCJ3aWRnZXRcIikuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIikuYXR0cihcImFyaWEtcHJlc3NlZFwiLFwidHJ1ZVwiKTplKHRoaXMpLmJ1dHRvbihcIndpZGdldFwiKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKS5hdHRyKFwiYXJpYS1wcmVzc2VkXCIsXCJmYWxzZVwiKX0pOlwiY2hlY2tib3hcIj09PXRoaXMudHlwZSYmKHRoaXMuZWxlbWVudC5pcyhcIjpjaGVja2VkXCIpP3RoaXMuYnV0dG9uRWxlbWVudC5hZGRDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKS5hdHRyKFwiYXJpYS1wcmVzc2VkXCIsXCJ0cnVlXCIpOnRoaXMuYnV0dG9uRWxlbWVudC5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKS5hdHRyKFwiYXJpYS1wcmVzc2VkXCIsXCJmYWxzZVwiKSl9LF9yZXNldEJ1dHRvbjpmdW5jdGlvbigpe2lmKFwiaW5wdXRcIj09PXRoaXMudHlwZSlyZXR1cm4gdGhpcy5vcHRpb25zLmxhYmVsJiZ0aGlzLmVsZW1lbnQudmFsKHRoaXMub3B0aW9ucy5sYWJlbCksdW5kZWZpbmVkO3ZhciB0PXRoaXMuYnV0dG9uRWxlbWVudC5yZW1vdmVDbGFzcyhvKSxpPWUoXCI8c3Bhbj48L3NwYW4+XCIsdGhpcy5kb2N1bWVudFswXSkuYWRkQ2xhc3MoXCJ1aS1idXR0b24tdGV4dFwiKS5odG1sKHRoaXMub3B0aW9ucy5sYWJlbCkuYXBwZW5kVG8odC5lbXB0eSgpKS50ZXh0KCksYT10aGlzLm9wdGlvbnMuaWNvbnMscz1hLnByaW1hcnkmJmEuc2Vjb25kYXJ5LG49W107YS5wcmltYXJ5fHxhLnNlY29uZGFyeT8odGhpcy5vcHRpb25zLnRleHQmJm4ucHVzaChcInVpLWJ1dHRvbi10ZXh0LWljb25cIisocz9cInNcIjphLnByaW1hcnk/XCItcHJpbWFyeVwiOlwiLXNlY29uZGFyeVwiKSksYS5wcmltYXJ5JiZ0LnByZXBlbmQoXCI8c3BhbiBjbGFzcz0ndWktYnV0dG9uLWljb24tcHJpbWFyeSB1aS1pY29uIFwiK2EucHJpbWFyeStcIic+PC9zcGFuPlwiKSxhLnNlY29uZGFyeSYmdC5hcHBlbmQoXCI8c3BhbiBjbGFzcz0ndWktYnV0dG9uLWljb24tc2Vjb25kYXJ5IHVpLWljb24gXCIrYS5zZWNvbmRhcnkrXCInPjwvc3Bhbj5cIiksdGhpcy5vcHRpb25zLnRleHR8fChuLnB1c2gocz9cInVpLWJ1dHRvbi1pY29ucy1vbmx5XCI6XCJ1aS1idXR0b24taWNvbi1vbmx5XCIpLHRoaXMuaGFzVGl0bGV8fHQuYXR0cihcInRpdGxlXCIsZS50cmltKGkpKSkpOm4ucHVzaChcInVpLWJ1dHRvbi10ZXh0LW9ubHlcIiksdC5hZGRDbGFzcyhuLmpvaW4oXCIgXCIpKX19KSxlLndpZGdldChcInVpLmJ1dHRvbnNldFwiLHt2ZXJzaW9uOlwiMS4xMC4zXCIsb3B0aW9uczp7aXRlbXM6XCJidXR0b24sIGlucHV0W3R5cGU9YnV0dG9uXSwgaW5wdXRbdHlwZT1zdWJtaXRdLCBpbnB1dFt0eXBlPXJlc2V0XSwgaW5wdXRbdHlwZT1jaGVja2JveF0sIGlucHV0W3R5cGU9cmFkaW9dLCBhLCA6ZGF0YSh1aS1idXR0b24pXCJ9LF9jcmVhdGU6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1idXR0b25zZXRcIil9LF9pbml0OmZ1bmN0aW9uKCl7dGhpcy5yZWZyZXNoKCl9LF9zZXRPcHRpb246ZnVuY3Rpb24oZSx0KXtcImRpc2FibGVkXCI9PT1lJiZ0aGlzLmJ1dHRvbnMuYnV0dG9uKFwib3B0aW9uXCIsZSx0KSx0aGlzLl9zdXBlcihlLHQpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIHQ9XCJydGxcIj09PXRoaXMuZWxlbWVudC5jc3MoXCJkaXJlY3Rpb25cIik7dGhpcy5idXR0b25zPXRoaXMuZWxlbWVudC5maW5kKHRoaXMub3B0aW9ucy5pdGVtcykuZmlsdGVyKFwiOnVpLWJ1dHRvblwiKS5idXR0b24oXCJyZWZyZXNoXCIpLmVuZCgpLm5vdChcIjp1aS1idXR0b25cIikuYnV0dG9uKCkuZW5kKCkubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcykuYnV0dG9uKFwid2lkZ2V0XCIpWzBdfSkucmVtb3ZlQ2xhc3MoXCJ1aS1jb3JuZXItYWxsIHVpLWNvcm5lci1sZWZ0IHVpLWNvcm5lci1yaWdodFwiKS5maWx0ZXIoXCI6Zmlyc3RcIikuYWRkQ2xhc3ModD9cInVpLWNvcm5lci1yaWdodFwiOlwidWktY29ybmVyLWxlZnRcIikuZW5kKCkuZmlsdGVyKFwiOmxhc3RcIikuYWRkQ2xhc3ModD9cInVpLWNvcm5lci1sZWZ0XCI6XCJ1aS1jb3JuZXItcmlnaHRcIikuZW5kKCkuZW5kKCl9LF9kZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwidWktYnV0dG9uc2V0XCIpLHRoaXMuYnV0dG9ucy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gZSh0aGlzKS5idXR0b24oXCJ3aWRnZXRcIilbMF19KS5yZW1vdmVDbGFzcyhcInVpLWNvcm5lci1sZWZ0IHVpLWNvcm5lci1yaWdodFwiKS5lbmQoKS5idXR0b24oXCJkZXN0cm95XCIpfX0pfSkoalF1ZXJ5KTsoZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBpKCl7dGhpcy5fY3VySW5zdD1udWxsLHRoaXMuX2tleUV2ZW50PSExLHRoaXMuX2Rpc2FibGVkSW5wdXRzPVtdLHRoaXMuX2RhdGVwaWNrZXJTaG93aW5nPSExLHRoaXMuX2luRGlhbG9nPSExLHRoaXMuX21haW5EaXZJZD1cInVpLWRhdGVwaWNrZXItZGl2XCIsdGhpcy5faW5saW5lQ2xhc3M9XCJ1aS1kYXRlcGlja2VyLWlubGluZVwiLHRoaXMuX2FwcGVuZENsYXNzPVwidWktZGF0ZXBpY2tlci1hcHBlbmRcIix0aGlzLl90cmlnZ2VyQ2xhc3M9XCJ1aS1kYXRlcGlja2VyLXRyaWdnZXJcIix0aGlzLl9kaWFsb2dDbGFzcz1cInVpLWRhdGVwaWNrZXItZGlhbG9nXCIsdGhpcy5fZGlzYWJsZUNsYXNzPVwidWktZGF0ZXBpY2tlci1kaXNhYmxlZFwiLHRoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzPVwidWktZGF0ZXBpY2tlci11bnNlbGVjdGFibGVcIix0aGlzLl9jdXJyZW50Q2xhc3M9XCJ1aS1kYXRlcGlja2VyLWN1cnJlbnQtZGF5XCIsdGhpcy5fZGF5T3ZlckNsYXNzPVwidWktZGF0ZXBpY2tlci1kYXlzLWNlbGwtb3ZlclwiLHRoaXMucmVnaW9uYWw9W10sdGhpcy5yZWdpb25hbFtcIlwiXT17Y2xvc2VUZXh0OlwiRG9uZVwiLHByZXZUZXh0OlwiUHJldlwiLG5leHRUZXh0OlwiTmV4dFwiLGN1cnJlbnRUZXh0OlwiVG9kYXlcIixtb250aE5hbWVzOltcIkphbnVhcnlcIixcIkZlYnJ1YXJ5XCIsXCJNYXJjaFwiLFwiQXByaWxcIixcIk1heVwiLFwiSnVuZVwiLFwiSnVseVwiLFwiQXVndXN0XCIsXCJTZXB0ZW1iZXJcIixcIk9jdG9iZXJcIixcIk5vdmVtYmVyXCIsXCJEZWNlbWJlclwiXSxtb250aE5hbWVzU2hvcnQ6W1wiSmFuXCIsXCJGZWJcIixcIk1hclwiLFwiQXByXCIsXCJNYXlcIixcIkp1blwiLFwiSnVsXCIsXCJBdWdcIixcIlNlcFwiLFwiT2N0XCIsXCJOb3ZcIixcIkRlY1wiXSxkYXlOYW1lczpbXCJTdW5kYXlcIixcIk1vbmRheVwiLFwiVHVlc2RheVwiLFwiV2VkbmVzZGF5XCIsXCJUaHVyc2RheVwiLFwiRnJpZGF5XCIsXCJTYXR1cmRheVwiXSxkYXlOYW1lc1Nob3J0OltcIlN1blwiLFwiTW9uXCIsXCJUdWVcIixcIldlZFwiLFwiVGh1XCIsXCJGcmlcIixcIlNhdFwiXSxkYXlOYW1lc01pbjpbXCJTdVwiLFwiTW9cIixcIlR1XCIsXCJXZVwiLFwiVGhcIixcIkZyXCIsXCJTYVwiXSx3ZWVrSGVhZGVyOlwiV2tcIixkYXRlRm9ybWF0OlwibW0vZGQveXlcIixmaXJzdERheTowLGlzUlRMOiExLHNob3dNb250aEFmdGVyWWVhcjohMSx5ZWFyU3VmZml4OlwiXCJ9LHRoaXMuX2RlZmF1bHRzPXtzaG93T246XCJmb2N1c1wiLHNob3dBbmltOlwiZmFkZUluXCIsc2hvd09wdGlvbnM6e30sZGVmYXVsdERhdGU6bnVsbCxhcHBlbmRUZXh0OlwiXCIsYnV0dG9uVGV4dDpcIi4uLlwiLGJ1dHRvbkltYWdlOlwiXCIsYnV0dG9uSW1hZ2VPbmx5OiExLGhpZGVJZk5vUHJldk5leHQ6ITEsbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdDohMSxnb3RvQ3VycmVudDohMSxjaGFuZ2VNb250aDohMSxjaGFuZ2VZZWFyOiExLHllYXJSYW5nZTpcImMtMTA6YysxMFwiLHNob3dPdGhlck1vbnRoczohMSxzZWxlY3RPdGhlck1vbnRoczohMSxzaG93V2VlazohMSxjYWxjdWxhdGVXZWVrOnRoaXMuaXNvODYwMVdlZWssc2hvcnRZZWFyQ3V0b2ZmOlwiKzEwXCIsbWluRGF0ZTpudWxsLG1heERhdGU6bnVsbCxkdXJhdGlvbjpcImZhc3RcIixiZWZvcmVTaG93RGF5Om51bGwsYmVmb3JlU2hvdzpudWxsLG9uU2VsZWN0Om51bGwsb25DaGFuZ2VNb250aFllYXI6bnVsbCxvbkNsb3NlOm51bGwsbnVtYmVyT2ZNb250aHM6MSxzaG93Q3VycmVudEF0UG9zOjAsc3RlcE1vbnRoczoxLHN0ZXBCaWdNb250aHM6MTIsYWx0RmllbGQ6XCJcIixhbHRGb3JtYXQ6XCJcIixjb25zdHJhaW5JbnB1dDohMCxzaG93QnV0dG9uUGFuZWw6ITEsYXV0b1NpemU6ITEsZGlzYWJsZWQ6ITF9LGUuZXh0ZW5kKHRoaXMuX2RlZmF1bHRzLHRoaXMucmVnaW9uYWxbXCJcIl0pLHRoaXMuZHBEaXY9YShlKFwiPGRpdiBpZD0nXCIrdGhpcy5fbWFpbkRpdklkK1wiJyBjbGFzcz0ndWktZGF0ZXBpY2tlciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4IHVpLWNvcm5lci1hbGwnPjwvZGl2PlwiKSl9ZnVuY3Rpb24gYSh0KXt2YXIgaT1cImJ1dHRvbiwgLnVpLWRhdGVwaWNrZXItcHJldiwgLnVpLWRhdGVwaWNrZXItbmV4dCwgLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIgdGQgYVwiO3JldHVybiB0LmRlbGVnYXRlKGksXCJtb3VzZW91dFwiLGZ1bmN0aW9uKCl7ZSh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWhvdmVyXCIpLC0xIT09dGhpcy5jbGFzc05hbWUuaW5kZXhPZihcInVpLWRhdGVwaWNrZXItcHJldlwiKSYmZSh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLWRhdGVwaWNrZXItcHJldi1ob3ZlclwiKSwtMSE9PXRoaXMuY2xhc3NOYW1lLmluZGV4T2YoXCJ1aS1kYXRlcGlja2VyLW5leHRcIikmJmUodGhpcykucmVtb3ZlQ2xhc3MoXCJ1aS1kYXRlcGlja2VyLW5leHQtaG92ZXJcIil9KS5kZWxlZ2F0ZShpLFwibW91c2VvdmVyXCIsZnVuY3Rpb24oKXtlLmRhdGVwaWNrZXIuX2lzRGlzYWJsZWREYXRlcGlja2VyKG4uaW5saW5lP3QucGFyZW50KClbMF06bi5pbnB1dFswXSl8fChlKHRoaXMpLnBhcmVudHMoXCIudWktZGF0ZXBpY2tlci1jYWxlbmRhclwiKS5maW5kKFwiYVwiKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWhvdmVyXCIpLGUodGhpcykuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1ob3ZlclwiKSwtMSE9PXRoaXMuY2xhc3NOYW1lLmluZGV4T2YoXCJ1aS1kYXRlcGlja2VyLXByZXZcIikmJmUodGhpcykuYWRkQ2xhc3MoXCJ1aS1kYXRlcGlja2VyLXByZXYtaG92ZXJcIiksLTEhPT10aGlzLmNsYXNzTmFtZS5pbmRleE9mKFwidWktZGF0ZXBpY2tlci1uZXh0XCIpJiZlKHRoaXMpLmFkZENsYXNzKFwidWktZGF0ZXBpY2tlci1uZXh0LWhvdmVyXCIpKX0pfWZ1bmN0aW9uIHModCxpKXtlLmV4dGVuZCh0LGkpO2Zvcih2YXIgYSBpbiBpKW51bGw9PWlbYV0mJih0W2FdPWlbYV0pO3JldHVybiB0fWUuZXh0ZW5kKGUudWkse2RhdGVwaWNrZXI6e3ZlcnNpb246XCIxLjEwLjNcIn19KTt2YXIgbixyPVwiZGF0ZXBpY2tlclwiO2UuZXh0ZW5kKGkucHJvdG90eXBlLHttYXJrZXJDbGFzc05hbWU6XCJoYXNEYXRlcGlja2VyXCIsbWF4Um93czo0LF93aWRnZXREYXRlcGlja2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZHBEaXZ9LHNldERlZmF1bHRzOmZ1bmN0aW9uKGUpe3JldHVybiBzKHRoaXMuX2RlZmF1bHRzLGV8fHt9KSx0aGlzfSxfYXR0YWNoRGF0ZXBpY2tlcjpmdW5jdGlvbih0LGkpe3ZhciBhLHMsbjthPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxzPVwiZGl2XCI9PT1hfHxcInNwYW5cIj09PWEsdC5pZHx8KHRoaXMudXVpZCs9MSx0LmlkPVwiZHBcIit0aGlzLnV1aWQpLG49dGhpcy5fbmV3SW5zdChlKHQpLHMpLG4uc2V0dGluZ3M9ZS5leHRlbmQoe30saXx8e30pLFwiaW5wdXRcIj09PWE/dGhpcy5fY29ubmVjdERhdGVwaWNrZXIodCxuKTpzJiZ0aGlzLl9pbmxpbmVEYXRlcGlja2VyKHQsbil9LF9uZXdJbnN0OmZ1bmN0aW9uKHQsaSl7dmFyIHM9dFswXS5pZC5yZXBsYWNlKC8oW15BLVphLXowLTlfXFwtXSkvZyxcIlxcXFxcXFxcJDFcIik7cmV0dXJue2lkOnMsaW5wdXQ6dCxzZWxlY3RlZERheTowLHNlbGVjdGVkTW9udGg6MCxzZWxlY3RlZFllYXI6MCxkcmF3TW9udGg6MCxkcmF3WWVhcjowLGlubGluZTppLGRwRGl2Omk/YShlKFwiPGRpdiBjbGFzcz0nXCIrdGhpcy5faW5saW5lQ2xhc3MrXCIgdWktZGF0ZXBpY2tlciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4IHVpLWNvcm5lci1hbGwnPjwvZGl2PlwiKSk6dGhpcy5kcERpdn19LF9jb25uZWN0RGF0ZXBpY2tlcjpmdW5jdGlvbih0LGkpe3ZhciBhPWUodCk7aS5hcHBlbmQ9ZShbXSksaS50cmlnZ2VyPWUoW10pLGEuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpfHwodGhpcy5fYXR0YWNobWVudHMoYSxpKSxhLmFkZENsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5rZXlkb3duKHRoaXMuX2RvS2V5RG93bikua2V5cHJlc3ModGhpcy5fZG9LZXlQcmVzcykua2V5dXAodGhpcy5fZG9LZXlVcCksdGhpcy5fYXV0b1NpemUoaSksZS5kYXRhKHQscixpKSxpLnNldHRpbmdzLmRpc2FibGVkJiZ0aGlzLl9kaXNhYmxlRGF0ZXBpY2tlcih0KSl9LF9hdHRhY2htZW50czpmdW5jdGlvbih0LGkpe3ZhciBhLHMsbixyPXRoaXMuX2dldChpLFwiYXBwZW5kVGV4dFwiKSxvPXRoaXMuX2dldChpLFwiaXNSVExcIik7aS5hcHBlbmQmJmkuYXBwZW5kLnJlbW92ZSgpLHImJihpLmFwcGVuZD1lKFwiPHNwYW4gY2xhc3M9J1wiK3RoaXMuX2FwcGVuZENsYXNzK1wiJz5cIityK1wiPC9zcGFuPlwiKSx0W28/XCJiZWZvcmVcIjpcImFmdGVyXCJdKGkuYXBwZW5kKSksdC51bmJpbmQoXCJmb2N1c1wiLHRoaXMuX3Nob3dEYXRlcGlja2VyKSxpLnRyaWdnZXImJmkudHJpZ2dlci5yZW1vdmUoKSxhPXRoaXMuX2dldChpLFwic2hvd09uXCIpLChcImZvY3VzXCI9PT1hfHxcImJvdGhcIj09PWEpJiZ0LmZvY3VzKHRoaXMuX3Nob3dEYXRlcGlja2VyKSwoXCJidXR0b25cIj09PWF8fFwiYm90aFwiPT09YSkmJihzPXRoaXMuX2dldChpLFwiYnV0dG9uVGV4dFwiKSxuPXRoaXMuX2dldChpLFwiYnV0dG9uSW1hZ2VcIiksaS50cmlnZ2VyPWUodGhpcy5fZ2V0KGksXCJidXR0b25JbWFnZU9ubHlcIik/ZShcIjxpbWcvPlwiKS5hZGRDbGFzcyh0aGlzLl90cmlnZ2VyQ2xhc3MpLmF0dHIoe3NyYzpuLGFsdDpzLHRpdGxlOnN9KTplKFwiPGJ1dHRvbiB0eXBlPSdidXR0b24nPjwvYnV0dG9uPlwiKS5hZGRDbGFzcyh0aGlzLl90cmlnZ2VyQ2xhc3MpLmh0bWwobj9lKFwiPGltZy8+XCIpLmF0dHIoe3NyYzpuLGFsdDpzLHRpdGxlOnN9KTpzKSksdFtvP1wiYmVmb3JlXCI6XCJhZnRlclwiXShpLnRyaWdnZXIpLGkudHJpZ2dlci5jbGljayhmdW5jdGlvbigpe3JldHVybiBlLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiZlLmRhdGVwaWNrZXIuX2xhc3RJbnB1dD09PXRbMF0/ZS5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpOmUuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJmUuZGF0ZXBpY2tlci5fbGFzdElucHV0IT09dFswXT8oZS5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpLGUuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIodFswXSkpOmUuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIodFswXSksITF9KSl9LF9hdXRvU2l6ZTpmdW5jdGlvbihlKXtpZih0aGlzLl9nZXQoZSxcImF1dG9TaXplXCIpJiYhZS5pbmxpbmUpe3ZhciB0LGksYSxzLG49bmV3IERhdGUoMjAwOSwxMSwyMCkscj10aGlzLl9nZXQoZSxcImRhdGVGb3JtYXRcIik7ci5tYXRjaCgvW0RNXS8pJiYodD1mdW5jdGlvbihlKXtmb3IoaT0wLGE9MCxzPTA7ZS5sZW5ndGg+cztzKyspZVtzXS5sZW5ndGg+aSYmKGk9ZVtzXS5sZW5ndGgsYT1zKTtyZXR1cm4gYX0sbi5zZXRNb250aCh0KHRoaXMuX2dldChlLHIubWF0Y2goL01NLyk/XCJtb250aE5hbWVzXCI6XCJtb250aE5hbWVzU2hvcnRcIikpKSxuLnNldERhdGUodCh0aGlzLl9nZXQoZSxyLm1hdGNoKC9ERC8pP1wiZGF5TmFtZXNcIjpcImRheU5hbWVzU2hvcnRcIikpKzIwLW4uZ2V0RGF5KCkpKSxlLmlucHV0LmF0dHIoXCJzaXplXCIsdGhpcy5fZm9ybWF0RGF0ZShlLG4pLmxlbmd0aCl9fSxfaW5saW5lRGF0ZXBpY2tlcjpmdW5jdGlvbih0LGkpe3ZhciBhPWUodCk7YS5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSl8fChhLmFkZENsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5hcHBlbmQoaS5kcERpdiksZS5kYXRhKHQscixpKSx0aGlzLl9zZXREYXRlKGksdGhpcy5fZ2V0RGVmYXVsdERhdGUoaSksITApLHRoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaSksdGhpcy5fdXBkYXRlQWx0ZXJuYXRlKGkpLGkuc2V0dGluZ3MuZGlzYWJsZWQmJnRoaXMuX2Rpc2FibGVEYXRlcGlja2VyKHQpLGkuZHBEaXYuY3NzKFwiZGlzcGxheVwiLFwiYmxvY2tcIikpfSxfZGlhbG9nRGF0ZXBpY2tlcjpmdW5jdGlvbih0LGksYSxuLG8pe3ZhciBoLGwsdSxkLGMscD10aGlzLl9kaWFsb2dJbnN0O3JldHVybiBwfHwodGhpcy51dWlkKz0xLGg9XCJkcFwiK3RoaXMudXVpZCx0aGlzLl9kaWFsb2dJbnB1dD1lKFwiPGlucHV0IHR5cGU9J3RleHQnIGlkPSdcIitoK1wiJyBzdHlsZT0ncG9zaXRpb246IGFic29sdXRlOyB0b3A6IC0xMDBweDsgd2lkdGg6IDBweDsnLz5cIiksdGhpcy5fZGlhbG9nSW5wdXQua2V5ZG93bih0aGlzLl9kb0tleURvd24pLGUoXCJib2R5XCIpLmFwcGVuZCh0aGlzLl9kaWFsb2dJbnB1dCkscD10aGlzLl9kaWFsb2dJbnN0PXRoaXMuX25ld0luc3QodGhpcy5fZGlhbG9nSW5wdXQsITEpLHAuc2V0dGluZ3M9e30sZS5kYXRhKHRoaXMuX2RpYWxvZ0lucHV0WzBdLHIscCkpLHMocC5zZXR0aW5ncyxufHx7fSksaT1pJiZpLmNvbnN0cnVjdG9yPT09RGF0ZT90aGlzLl9mb3JtYXREYXRlKHAsaSk6aSx0aGlzLl9kaWFsb2dJbnB1dC52YWwoaSksdGhpcy5fcG9zPW8/by5sZW5ndGg/bzpbby5wYWdlWCxvLnBhZ2VZXTpudWxsLHRoaXMuX3Bvc3x8KGw9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLHU9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCxkPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fHxkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQsYz1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCx0aGlzLl9wb3M9W2wvMi0xMDArZCx1LzItMTUwK2NdKSx0aGlzLl9kaWFsb2dJbnB1dC5jc3MoXCJsZWZ0XCIsdGhpcy5fcG9zWzBdKzIwK1wicHhcIikuY3NzKFwidG9wXCIsdGhpcy5fcG9zWzFdK1wicHhcIikscC5zZXR0aW5ncy5vblNlbGVjdD1hLHRoaXMuX2luRGlhbG9nPSEwLHRoaXMuZHBEaXYuYWRkQ2xhc3ModGhpcy5fZGlhbG9nQ2xhc3MpLHRoaXMuX3Nob3dEYXRlcGlja2VyKHRoaXMuX2RpYWxvZ0lucHV0WzBdKSxlLmJsb2NrVUkmJmUuYmxvY2tVSSh0aGlzLmRwRGl2KSxlLmRhdGEodGhpcy5fZGlhbG9nSW5wdXRbMF0scixwKSx0aGlzfSxfZGVzdHJveURhdGVwaWNrZXI6ZnVuY3Rpb24odCl7dmFyIGksYT1lKHQpLHM9ZS5kYXRhKHQscik7YS5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkmJihpPXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxlLnJlbW92ZURhdGEodCxyKSxcImlucHV0XCI9PT1pPyhzLmFwcGVuZC5yZW1vdmUoKSxzLnRyaWdnZXIucmVtb3ZlKCksYS5yZW1vdmVDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkudW5iaW5kKFwiZm9jdXNcIix0aGlzLl9zaG93RGF0ZXBpY2tlcikudW5iaW5kKFwia2V5ZG93blwiLHRoaXMuX2RvS2V5RG93bikudW5iaW5kKFwia2V5cHJlc3NcIix0aGlzLl9kb0tleVByZXNzKS51bmJpbmQoXCJrZXl1cFwiLHRoaXMuX2RvS2V5VXApKTooXCJkaXZcIj09PWl8fFwic3BhblwiPT09aSkmJmEucmVtb3ZlQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmVtcHR5KCkpfSxfZW5hYmxlRGF0ZXBpY2tlcjpmdW5jdGlvbih0KXt2YXIgaSxhLHM9ZSh0KSxuPWUuZGF0YSh0LHIpO3MuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpJiYoaT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXCJpbnB1dFwiPT09aT8odC5kaXNhYmxlZD0hMSxuLnRyaWdnZXIuZmlsdGVyKFwiYnV0dG9uXCIpLmVhY2goZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPSExfSkuZW5kKCkuZmlsdGVyKFwiaW1nXCIpLmNzcyh7b3BhY2l0eTpcIjEuMFwiLGN1cnNvcjpcIlwifSkpOihcImRpdlwiPT09aXx8XCJzcGFuXCI9PT1pKSYmKGE9cy5jaGlsZHJlbihcIi5cIit0aGlzLl9pbmxpbmVDbGFzcyksYS5jaGlsZHJlbigpLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtZGlzYWJsZWRcIiksYS5maW5kKFwic2VsZWN0LnVpLWRhdGVwaWNrZXItbW9udGgsIHNlbGVjdC51aS1kYXRlcGlja2VyLXllYXJcIikucHJvcChcImRpc2FibGVkXCIsITEpKSx0aGlzLl9kaXNhYmxlZElucHV0cz1lLm1hcCh0aGlzLl9kaXNhYmxlZElucHV0cyxmdW5jdGlvbihlKXtyZXR1cm4gZT09PXQ/bnVsbDplfSkpfSxfZGlzYWJsZURhdGVwaWNrZXI6ZnVuY3Rpb24odCl7dmFyIGksYSxzPWUodCksbj1lLmRhdGEodCxyKTtzLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSYmKGk9dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLFwiaW5wdXRcIj09PWk/KHQuZGlzYWJsZWQ9ITAsbi50cmlnZ2VyLmZpbHRlcihcImJ1dHRvblwiKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD0hMH0pLmVuZCgpLmZpbHRlcihcImltZ1wiKS5jc3Moe29wYWNpdHk6XCIwLjVcIixjdXJzb3I6XCJkZWZhdWx0XCJ9KSk6KFwiZGl2XCI9PT1pfHxcInNwYW5cIj09PWkpJiYoYT1zLmNoaWxkcmVuKFwiLlwiK3RoaXMuX2lubGluZUNsYXNzKSxhLmNoaWxkcmVuKCkuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiKSxhLmZpbmQoXCJzZWxlY3QudWktZGF0ZXBpY2tlci1tb250aCwgc2VsZWN0LnVpLWRhdGVwaWNrZXIteWVhclwiKS5wcm9wKFwiZGlzYWJsZWRcIiwhMCkpLHRoaXMuX2Rpc2FibGVkSW5wdXRzPWUubWFwKHRoaXMuX2Rpc2FibGVkSW5wdXRzLGZ1bmN0aW9uKGUpe3JldHVybiBlPT09dD9udWxsOmV9KSx0aGlzLl9kaXNhYmxlZElucHV0c1t0aGlzLl9kaXNhYmxlZElucHV0cy5sZW5ndGhdPXQpfSxfaXNEaXNhYmxlZERhdGVwaWNrZXI6ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuITE7Zm9yKHZhciB0PTA7dGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoPnQ7dCsrKWlmKHRoaXMuX2Rpc2FibGVkSW5wdXRzW3RdPT09ZSlyZXR1cm4hMDtyZXR1cm4hMX0sX2dldEluc3Q6ZnVuY3Rpb24odCl7dHJ5e3JldHVybiBlLmRhdGEodCxyKX1jYXRjaChpKXt0aHJvd1wiTWlzc2luZyBpbnN0YW5jZSBkYXRhIGZvciB0aGlzIGRhdGVwaWNrZXJcIn19LF9vcHRpb25EYXRlcGlja2VyOmZ1bmN0aW9uKGksYSxuKXt2YXIgcixvLGgsbCx1PXRoaXMuX2dldEluc3QoaSk7cmV0dXJuIDI9PT1hcmd1bWVudHMubGVuZ3RoJiZcInN0cmluZ1wiPT10eXBlb2YgYT9cImRlZmF1bHRzXCI9PT1hP2UuZXh0ZW5kKHt9LGUuZGF0ZXBpY2tlci5fZGVmYXVsdHMpOnU/XCJhbGxcIj09PWE/ZS5leHRlbmQoe30sdS5zZXR0aW5ncyk6dGhpcy5fZ2V0KHUsYSk6bnVsbDoocj1hfHx7fSxcInN0cmluZ1wiPT10eXBlb2YgYSYmKHI9e30sclthXT1uKSx1JiYodGhpcy5fY3VySW5zdD09PXUmJnRoaXMuX2hpZGVEYXRlcGlja2VyKCksbz10aGlzLl9nZXREYXRlRGF0ZXBpY2tlcihpLCEwKSxoPXRoaXMuX2dldE1pbk1heERhdGUodSxcIm1pblwiKSxsPXRoaXMuX2dldE1pbk1heERhdGUodSxcIm1heFwiKSxzKHUuc2V0dGluZ3MsciksbnVsbCE9PWgmJnIuZGF0ZUZvcm1hdCE9PXQmJnIubWluRGF0ZT09PXQmJih1LnNldHRpbmdzLm1pbkRhdGU9dGhpcy5fZm9ybWF0RGF0ZSh1LGgpKSxudWxsIT09bCYmci5kYXRlRm9ybWF0IT09dCYmci5tYXhEYXRlPT09dCYmKHUuc2V0dGluZ3MubWF4RGF0ZT10aGlzLl9mb3JtYXREYXRlKHUsbCkpLFwiZGlzYWJsZWRcImluIHImJihyLmRpc2FibGVkP3RoaXMuX2Rpc2FibGVEYXRlcGlja2VyKGkpOnRoaXMuX2VuYWJsZURhdGVwaWNrZXIoaSkpLHRoaXMuX2F0dGFjaG1lbnRzKGUoaSksdSksdGhpcy5fYXV0b1NpemUodSksdGhpcy5fc2V0RGF0ZSh1LG8pLHRoaXMuX3VwZGF0ZUFsdGVybmF0ZSh1KSx0aGlzLl91cGRhdGVEYXRlcGlja2VyKHUpKSx0KX0sX2NoYW5nZURhdGVwaWNrZXI6ZnVuY3Rpb24oZSx0LGkpe3RoaXMuX29wdGlvbkRhdGVwaWNrZXIoZSx0LGkpfSxfcmVmcmVzaERhdGVwaWNrZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0SW5zdChlKTt0JiZ0aGlzLl91cGRhdGVEYXRlcGlja2VyKHQpfSxfc2V0RGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLl9nZXRJbnN0KGUpO2kmJih0aGlzLl9zZXREYXRlKGksdCksdGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpKSx0aGlzLl91cGRhdGVBbHRlcm5hdGUoaSkpfSxfZ2V0RGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLl9nZXRJbnN0KGUpO3JldHVybiBpJiYhaS5pbmxpbmUmJnRoaXMuX3NldERhdGVGcm9tRmllbGQoaSx0KSxpP3RoaXMuX2dldERhdGUoaSk6bnVsbH0sX2RvS2V5RG93bjpmdW5jdGlvbih0KXt2YXIgaSxhLHMsbj1lLmRhdGVwaWNrZXIuX2dldEluc3QodC50YXJnZXQpLHI9ITAsbz1uLmRwRGl2LmlzKFwiLnVpLWRhdGVwaWNrZXItcnRsXCIpO2lmKG4uX2tleUV2ZW50PSEwLGUuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcpc3dpdGNoKHQua2V5Q29kZSl7Y2FzZSA5OmUuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKSxyPSExO2JyZWFrO2Nhc2UgMTM6cmV0dXJuIHM9ZShcInRkLlwiK2UuZGF0ZXBpY2tlci5fZGF5T3ZlckNsYXNzK1wiOm5vdCguXCIrZS5kYXRlcGlja2VyLl9jdXJyZW50Q2xhc3MrXCIpXCIsbi5kcERpdiksc1swXSYmZS5kYXRlcGlja2VyLl9zZWxlY3REYXkodC50YXJnZXQsbi5zZWxlY3RlZE1vbnRoLG4uc2VsZWN0ZWRZZWFyLHNbMF0pLGk9ZS5kYXRlcGlja2VyLl9nZXQobixcIm9uU2VsZWN0XCIpLGk/KGE9ZS5kYXRlcGlja2VyLl9mb3JtYXREYXRlKG4pLGkuYXBwbHkobi5pbnB1dD9uLmlucHV0WzBdOm51bGwsW2Esbl0pKTplLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCksITE7Y2FzZSAyNzplLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7YnJlYWs7Y2FzZSAzMzplLmRhdGVwaWNrZXIuX2FkanVzdERhdGUodC50YXJnZXQsdC5jdHJsS2V5Py1lLmRhdGVwaWNrZXIuX2dldChuLFwic3RlcEJpZ01vbnRoc1wiKTotZS5kYXRlcGlja2VyLl9nZXQobixcInN0ZXBNb250aHNcIiksXCJNXCIpO2JyZWFrO2Nhc2UgMzQ6ZS5kYXRlcGlja2VyLl9hZGp1c3REYXRlKHQudGFyZ2V0LHQuY3RybEtleT8rZS5kYXRlcGlja2VyLl9nZXQobixcInN0ZXBCaWdNb250aHNcIik6K2UuZGF0ZXBpY2tlci5fZ2V0KG4sXCJzdGVwTW9udGhzXCIpLFwiTVwiKTticmVhaztjYXNlIDM1Oih0LmN0cmxLZXl8fHQubWV0YUtleSkmJmUuZGF0ZXBpY2tlci5fY2xlYXJEYXRlKHQudGFyZ2V0KSxyPXQuY3RybEtleXx8dC5tZXRhS2V5O2JyZWFrO2Nhc2UgMzY6KHQuY3RybEtleXx8dC5tZXRhS2V5KSYmZS5kYXRlcGlja2VyLl9nb3RvVG9kYXkodC50YXJnZXQpLHI9dC5jdHJsS2V5fHx0Lm1ldGFLZXk7YnJlYWs7Y2FzZSAzNzoodC5jdHJsS2V5fHx0Lm1ldGFLZXkpJiZlLmRhdGVwaWNrZXIuX2FkanVzdERhdGUodC50YXJnZXQsbz8xOi0xLFwiRFwiKSxyPXQuY3RybEtleXx8dC5tZXRhS2V5LHQub3JpZ2luYWxFdmVudC5hbHRLZXkmJmUuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSh0LnRhcmdldCx0LmN0cmxLZXk/LWUuZGF0ZXBpY2tlci5fZ2V0KG4sXCJzdGVwQmlnTW9udGhzXCIpOi1lLmRhdGVwaWNrZXIuX2dldChuLFwic3RlcE1vbnRoc1wiKSxcIk1cIik7YnJlYWs7Y2FzZSAzODoodC5jdHJsS2V5fHx0Lm1ldGFLZXkpJiZlLmRhdGVwaWNrZXIuX2FkanVzdERhdGUodC50YXJnZXQsLTcsXCJEXCIpLHI9dC5jdHJsS2V5fHx0Lm1ldGFLZXk7YnJlYWs7Y2FzZSAzOToodC5jdHJsS2V5fHx0Lm1ldGFLZXkpJiZlLmRhdGVwaWNrZXIuX2FkanVzdERhdGUodC50YXJnZXQsbz8tMToxLFwiRFwiKSxyPXQuY3RybEtleXx8dC5tZXRhS2V5LHQub3JpZ2luYWxFdmVudC5hbHRLZXkmJmUuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZSh0LnRhcmdldCx0LmN0cmxLZXk/K2UuZGF0ZXBpY2tlci5fZ2V0KG4sXCJzdGVwQmlnTW9udGhzXCIpOitlLmRhdGVwaWNrZXIuX2dldChuLFwic3RlcE1vbnRoc1wiKSxcIk1cIik7YnJlYWs7Y2FzZSA0MDoodC5jdHJsS2V5fHx0Lm1ldGFLZXkpJiZlLmRhdGVwaWNrZXIuX2FkanVzdERhdGUodC50YXJnZXQsNyxcIkRcIikscj10LmN0cmxLZXl8fHQubWV0YUtleTticmVhaztkZWZhdWx0OnI9ITF9ZWxzZSAzNj09PXQua2V5Q29kZSYmdC5jdHJsS2V5P2UuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIodGhpcyk6cj0hMTtyJiYodC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCkpfSxfZG9LZXlQcmVzczpmdW5jdGlvbihpKXt2YXIgYSxzLG49ZS5kYXRlcGlja2VyLl9nZXRJbnN0KGkudGFyZ2V0KTtyZXR1cm4gZS5kYXRlcGlja2VyLl9nZXQobixcImNvbnN0cmFpbklucHV0XCIpPyhhPWUuZGF0ZXBpY2tlci5fcG9zc2libGVDaGFycyhlLmRhdGVwaWNrZXIuX2dldChuLFwiZGF0ZUZvcm1hdFwiKSkscz1TdHJpbmcuZnJvbUNoYXJDb2RlKG51bGw9PWkuY2hhckNvZGU/aS5rZXlDb2RlOmkuY2hhckNvZGUpLGkuY3RybEtleXx8aS5tZXRhS2V5fHxcIiBcIj5zfHwhYXx8YS5pbmRleE9mKHMpPi0xKTp0fSxfZG9LZXlVcDpmdW5jdGlvbih0KXt2YXIgaSxhPWUuZGF0ZXBpY2tlci5fZ2V0SW5zdCh0LnRhcmdldCk7aWYoYS5pbnB1dC52YWwoKSE9PWEubGFzdFZhbCl0cnl7aT1lLmRhdGVwaWNrZXIucGFyc2VEYXRlKGUuZGF0ZXBpY2tlci5fZ2V0KGEsXCJkYXRlRm9ybWF0XCIpLGEuaW5wdXQ/YS5pbnB1dC52YWwoKTpudWxsLGUuZGF0ZXBpY2tlci5fZ2V0Rm9ybWF0Q29uZmlnKGEpKSxpJiYoZS5kYXRlcGlja2VyLl9zZXREYXRlRnJvbUZpZWxkKGEpLGUuZGF0ZXBpY2tlci5fdXBkYXRlQWx0ZXJuYXRlKGEpLGUuZGF0ZXBpY2tlci5fdXBkYXRlRGF0ZXBpY2tlcihhKSl9Y2F0Y2gocyl7fXJldHVybiEwfSxfc2hvd0RhdGVwaWNrZXI6ZnVuY3Rpb24odCl7aWYodD10LnRhcmdldHx8dCxcImlucHV0XCIhPT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJih0PWUoXCJpbnB1dFwiLHQucGFyZW50Tm9kZSlbMF0pLCFlLmRhdGVwaWNrZXIuX2lzRGlzYWJsZWREYXRlcGlja2VyKHQpJiZlLmRhdGVwaWNrZXIuX2xhc3RJbnB1dCE9PXQpe3ZhciBpLGEsbixyLG8saCxsO2k9ZS5kYXRlcGlja2VyLl9nZXRJbnN0KHQpLGUuZGF0ZXBpY2tlci5fY3VySW5zdCYmZS5kYXRlcGlja2VyLl9jdXJJbnN0IT09aSYmKGUuZGF0ZXBpY2tlci5fY3VySW5zdC5kcERpdi5zdG9wKCEwLCEwKSxpJiZlLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiZlLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKGUuZGF0ZXBpY2tlci5fY3VySW5zdC5pbnB1dFswXSkpLGE9ZS5kYXRlcGlja2VyLl9nZXQoaSxcImJlZm9yZVNob3dcIiksbj1hP2EuYXBwbHkodCxbdCxpXSk6e30sbiE9PSExJiYocyhpLnNldHRpbmdzLG4pLGkubGFzdFZhbD1udWxsLGUuZGF0ZXBpY2tlci5fbGFzdElucHV0PXQsZS5kYXRlcGlja2VyLl9zZXREYXRlRnJvbUZpZWxkKGkpLGUuZGF0ZXBpY2tlci5faW5EaWFsb2cmJih0LnZhbHVlPVwiXCIpLGUuZGF0ZXBpY2tlci5fcG9zfHwoZS5kYXRlcGlja2VyLl9wb3M9ZS5kYXRlcGlja2VyLl9maW5kUG9zKHQpLGUuZGF0ZXBpY2tlci5fcG9zWzFdKz10Lm9mZnNldEhlaWdodCkscj0hMSxlKHQpLnBhcmVudHMoKS5lYWNoKGZ1bmN0aW9uKCl7cmV0dXJuIHJ8PVwiZml4ZWRcIj09PWUodGhpcykuY3NzKFwicG9zaXRpb25cIiksIXJ9KSxvPXtsZWZ0OmUuZGF0ZXBpY2tlci5fcG9zWzBdLHRvcDplLmRhdGVwaWNrZXIuX3Bvc1sxXX0sZS5kYXRlcGlja2VyLl9wb3M9bnVsbCxpLmRwRGl2LmVtcHR5KCksaS5kcERpdi5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIixkaXNwbGF5OlwiYmxvY2tcIix0b3A6XCItMTAwMHB4XCJ9KSxlLmRhdGVwaWNrZXIuX3VwZGF0ZURhdGVwaWNrZXIoaSksbz1lLmRhdGVwaWNrZXIuX2NoZWNrT2Zmc2V0KGksbyxyKSxpLmRwRGl2LmNzcyh7cG9zaXRpb246ZS5kYXRlcGlja2VyLl9pbkRpYWxvZyYmZS5ibG9ja1VJP1wic3RhdGljXCI6cj9cImZpeGVkXCI6XCJhYnNvbHV0ZVwiLGRpc3BsYXk6XCJub25lXCIsbGVmdDpvLmxlZnQrXCJweFwiLHRvcDpvLnRvcCtcInB4XCJ9KSxpLmlubGluZXx8KGg9ZS5kYXRlcGlja2VyLl9nZXQoaSxcInNob3dBbmltXCIpLGw9ZS5kYXRlcGlja2VyLl9nZXQoaSxcImR1cmF0aW9uXCIpLGkuZHBEaXYuekluZGV4KGUodCkuekluZGV4KCkrMSksZS5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZz0hMCxlLmVmZmVjdHMmJmUuZWZmZWN0cy5lZmZlY3RbaF0/aS5kcERpdi5zaG93KGgsZS5kYXRlcGlja2VyLl9nZXQoaSxcInNob3dPcHRpb25zXCIpLGwpOmkuZHBEaXZbaHx8XCJzaG93XCJdKGg/bDpudWxsKSxlLmRhdGVwaWNrZXIuX3Nob3VsZEZvY3VzSW5wdXQoaSkmJmkuaW5wdXQuZm9jdXMoKSxlLmRhdGVwaWNrZXIuX2N1ckluc3Q9aSkpfX0sX3VwZGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24odCl7dGhpcy5tYXhSb3dzPTQsbj10LHQuZHBEaXYuZW1wdHkoKS5hcHBlbmQodGhpcy5fZ2VuZXJhdGVIVE1MKHQpKSx0aGlzLl9hdHRhY2hIYW5kbGVycyh0KSx0LmRwRGl2LmZpbmQoXCIuXCIrdGhpcy5fZGF5T3ZlckNsYXNzK1wiIGFcIikubW91c2VvdmVyKCk7dmFyIGksYT10aGlzLl9nZXROdW1iZXJPZk1vbnRocyh0KSxzPWFbMV0scj0xNzt0LmRwRGl2LnJlbW92ZUNsYXNzKFwidWktZGF0ZXBpY2tlci1tdWx0aS0yIHVpLWRhdGVwaWNrZXItbXVsdGktMyB1aS1kYXRlcGlja2VyLW11bHRpLTRcIikud2lkdGgoXCJcIikscz4xJiZ0LmRwRGl2LmFkZENsYXNzKFwidWktZGF0ZXBpY2tlci1tdWx0aS1cIitzKS5jc3MoXCJ3aWR0aFwiLHIqcytcImVtXCIpLHQuZHBEaXZbKDEhPT1hWzBdfHwxIT09YVsxXT9cImFkZFwiOlwicmVtb3ZlXCIpK1wiQ2xhc3NcIl0oXCJ1aS1kYXRlcGlja2VyLW11bHRpXCIpLHQuZHBEaXZbKHRoaXMuX2dldCh0LFwiaXNSVExcIik/XCJhZGRcIjpcInJlbW92ZVwiKStcIkNsYXNzXCJdKFwidWktZGF0ZXBpY2tlci1ydGxcIiksdD09PWUuZGF0ZXBpY2tlci5fY3VySW5zdCYmZS5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmZS5kYXRlcGlja2VyLl9zaG91bGRGb2N1c0lucHV0KHQpJiZ0LmlucHV0LmZvY3VzKCksdC55ZWFyc2h0bWwmJihpPXQueWVhcnNodG1sLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtpPT09dC55ZWFyc2h0bWwmJnQueWVhcnNodG1sJiZ0LmRwRGl2LmZpbmQoXCJzZWxlY3QudWktZGF0ZXBpY2tlci15ZWFyOmZpcnN0XCIpLnJlcGxhY2VXaXRoKHQueWVhcnNodG1sKSxpPXQueWVhcnNodG1sPW51bGx9LDApKX0sX3Nob3VsZEZvY3VzSW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5wdXQmJmUuaW5wdXQuaXMoXCI6dmlzaWJsZVwiKSYmIWUuaW5wdXQuaXMoXCI6ZGlzYWJsZWRcIikmJiFlLmlucHV0LmlzKFwiOmZvY3VzXCIpfSxfY2hlY2tPZmZzZXQ6ZnVuY3Rpb24odCxpLGEpe3ZhciBzPXQuZHBEaXYub3V0ZXJXaWR0aCgpLG49dC5kcERpdi5vdXRlckhlaWdodCgpLHI9dC5pbnB1dD90LmlucHV0Lm91dGVyV2lkdGgoKTowLG89dC5pbnB1dD90LmlucHV0Lm91dGVySGVpZ2h0KCk6MCxoPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCsoYT8wOmUoZG9jdW1lbnQpLnNjcm9sbExlZnQoKSksbD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KyhhPzA6ZShkb2N1bWVudCkuc2Nyb2xsVG9wKCkpO3JldHVybiBpLmxlZnQtPXRoaXMuX2dldCh0LFwiaXNSVExcIik/cy1yOjAsaS5sZWZ0LT1hJiZpLmxlZnQ9PT10LmlucHV0Lm9mZnNldCgpLmxlZnQ/ZShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpOjAsaS50b3AtPWEmJmkudG9wPT09dC5pbnB1dC5vZmZzZXQoKS50b3Arbz9lKGRvY3VtZW50KS5zY3JvbGxUb3AoKTowLGkubGVmdC09TWF0aC5taW4oaS5sZWZ0LGkubGVmdCtzPmgmJmg+cz9NYXRoLmFicyhpLmxlZnQrcy1oKTowKSxpLnRvcC09TWF0aC5taW4oaS50b3AsaS50b3Arbj5sJiZsPm4/TWF0aC5hYnMobitvKTowKSxpfSxfZmluZFBvczpmdW5jdGlvbih0KXtmb3IodmFyIGksYT10aGlzLl9nZXRJbnN0KHQpLHM9dGhpcy5fZ2V0KGEsXCJpc1JUTFwiKTt0JiYoXCJoaWRkZW5cIj09PXQudHlwZXx8MSE9PXQubm9kZVR5cGV8fGUuZXhwci5maWx0ZXJzLmhpZGRlbih0KSk7KXQ9dFtzP1wicHJldmlvdXNTaWJsaW5nXCI6XCJuZXh0U2libGluZ1wiXTtyZXR1cm4gaT1lKHQpLm9mZnNldCgpLFtpLmxlZnQsaS50b3BdfSxfaGlkZURhdGVwaWNrZXI6ZnVuY3Rpb24odCl7dmFyIGksYSxzLG4sbz10aGlzLl9jdXJJbnN0OyFvfHx0JiZvIT09ZS5kYXRhKHQscil8fHRoaXMuX2RhdGVwaWNrZXJTaG93aW5nJiYoaT10aGlzLl9nZXQobyxcInNob3dBbmltXCIpLGE9dGhpcy5fZ2V0KG8sXCJkdXJhdGlvblwiKSxzPWZ1bmN0aW9uKCl7ZS5kYXRlcGlja2VyLl90aWR5RGlhbG9nKG8pfSxlLmVmZmVjdHMmJihlLmVmZmVjdHMuZWZmZWN0W2ldfHxlLmVmZmVjdHNbaV0pP28uZHBEaXYuaGlkZShpLGUuZGF0ZXBpY2tlci5fZ2V0KG8sXCJzaG93T3B0aW9uc1wiKSxhLHMpOm8uZHBEaXZbXCJzbGlkZURvd25cIj09PWk/XCJzbGlkZVVwXCI6XCJmYWRlSW5cIj09PWk/XCJmYWRlT3V0XCI6XCJoaWRlXCJdKGk/YTpudWxsLHMpLGl8fHMoKSx0aGlzLl9kYXRlcGlja2VyU2hvd2luZz0hMSxuPXRoaXMuX2dldChvLFwib25DbG9zZVwiKSxuJiZuLmFwcGx5KG8uaW5wdXQ/by5pbnB1dFswXTpudWxsLFtvLmlucHV0P28uaW5wdXQudmFsKCk6XCJcIixvXSksdGhpcy5fbGFzdElucHV0PW51bGwsdGhpcy5faW5EaWFsb2cmJih0aGlzLl9kaWFsb2dJbnB1dC5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIixsZWZ0OlwiMFwiLHRvcDpcIi0xMDBweFwifSksZS5ibG9ja1VJJiYoZS51bmJsb2NrVUkoKSxlKFwiYm9keVwiKS5hcHBlbmQodGhpcy5kcERpdikpKSx0aGlzLl9pbkRpYWxvZz0hMSl9LF90aWR5RGlhbG9nOmZ1bmN0aW9uKGUpe2UuZHBEaXYucmVtb3ZlQ2xhc3ModGhpcy5fZGlhbG9nQ2xhc3MpLnVuYmluZChcIi51aS1kYXRlcGlja2VyLWNhbGVuZGFyXCIpfSxfY2hlY2tFeHRlcm5hbENsaWNrOmZ1bmN0aW9uKHQpe2lmKGUuZGF0ZXBpY2tlci5fY3VySW5zdCl7dmFyIGk9ZSh0LnRhcmdldCksYT1lLmRhdGVwaWNrZXIuX2dldEluc3QoaVswXSk7KGlbMF0uaWQhPT1lLmRhdGVwaWNrZXIuX21haW5EaXZJZCYmMD09PWkucGFyZW50cyhcIiNcIitlLmRhdGVwaWNrZXIuX21haW5EaXZJZCkubGVuZ3RoJiYhaS5oYXNDbGFzcyhlLmRhdGVwaWNrZXIubWFya2VyQ2xhc3NOYW1lKSYmIWkuY2xvc2VzdChcIi5cIitlLmRhdGVwaWNrZXIuX3RyaWdnZXJDbGFzcykubGVuZ3RoJiZlLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nJiYoIWUuZGF0ZXBpY2tlci5faW5EaWFsb2d8fCFlLmJsb2NrVUkpfHxpLmhhc0NsYXNzKGUuZGF0ZXBpY2tlci5tYXJrZXJDbGFzc05hbWUpJiZlLmRhdGVwaWNrZXIuX2N1ckluc3QhPT1hKSYmZS5kYXRlcGlja2VyLl9oaWRlRGF0ZXBpY2tlcigpfX0sX2FkanVzdERhdGU6ZnVuY3Rpb24odCxpLGEpe3ZhciBzPWUodCksbj10aGlzLl9nZXRJbnN0KHNbMF0pO3RoaXMuX2lzRGlzYWJsZWREYXRlcGlja2VyKHNbMF0pfHwodGhpcy5fYWRqdXN0SW5zdERhdGUobixpKyhcIk1cIj09PWE/dGhpcy5fZ2V0KG4sXCJzaG93Q3VycmVudEF0UG9zXCIpOjApLGEpLHRoaXMuX3VwZGF0ZURhdGVwaWNrZXIobikpfSxfZ290b1RvZGF5OmZ1bmN0aW9uKHQpe3ZhciBpLGE9ZSh0KSxzPXRoaXMuX2dldEluc3QoYVswXSk7dGhpcy5fZ2V0KHMsXCJnb3RvQ3VycmVudFwiKSYmcy5jdXJyZW50RGF5PyhzLnNlbGVjdGVkRGF5PXMuY3VycmVudERheSxzLmRyYXdNb250aD1zLnNlbGVjdGVkTW9udGg9cy5jdXJyZW50TW9udGgscy5kcmF3WWVhcj1zLnNlbGVjdGVkWWVhcj1zLmN1cnJlbnRZZWFyKTooaT1uZXcgRGF0ZSxzLnNlbGVjdGVkRGF5PWkuZ2V0RGF0ZSgpLHMuZHJhd01vbnRoPXMuc2VsZWN0ZWRNb250aD1pLmdldE1vbnRoKCkscy5kcmF3WWVhcj1zLnNlbGVjdGVkWWVhcj1pLmdldEZ1bGxZZWFyKCkpLHRoaXMuX25vdGlmeUNoYW5nZShzKSx0aGlzLl9hZGp1c3REYXRlKGEpfSxfc2VsZWN0TW9udGhZZWFyOmZ1bmN0aW9uKHQsaSxhKXt2YXIgcz1lKHQpLG49dGhpcy5fZ2V0SW5zdChzWzBdKTtuW1wic2VsZWN0ZWRcIisoXCJNXCI9PT1hP1wiTW9udGhcIjpcIlllYXJcIildPW5bXCJkcmF3XCIrKFwiTVwiPT09YT9cIk1vbnRoXCI6XCJZZWFyXCIpXT1wYXJzZUludChpLm9wdGlvbnNbaS5zZWxlY3RlZEluZGV4XS52YWx1ZSwxMCksdGhpcy5fbm90aWZ5Q2hhbmdlKG4pLHRoaXMuX2FkanVzdERhdGUocyl9LF9zZWxlY3REYXk6ZnVuY3Rpb24odCxpLGEscyl7dmFyIG4scj1lKHQpO2UocykuaGFzQ2xhc3ModGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MpfHx0aGlzLl9pc0Rpc2FibGVkRGF0ZXBpY2tlcihyWzBdKXx8KG49dGhpcy5fZ2V0SW5zdChyWzBdKSxuLnNlbGVjdGVkRGF5PW4uY3VycmVudERheT1lKFwiYVwiLHMpLmh0bWwoKSxuLnNlbGVjdGVkTW9udGg9bi5jdXJyZW50TW9udGg9aSxuLnNlbGVjdGVkWWVhcj1uLmN1cnJlbnRZZWFyPWEsdGhpcy5fc2VsZWN0RGF0ZSh0LHRoaXMuX2Zvcm1hdERhdGUobixuLmN1cnJlbnREYXksbi5jdXJyZW50TW9udGgsbi5jdXJyZW50WWVhcikpKX0sX2NsZWFyRGF0ZTpmdW5jdGlvbih0KXt2YXIgaT1lKHQpO3RoaXMuX3NlbGVjdERhdGUoaSxcIlwiKX0sX3NlbGVjdERhdGU6ZnVuY3Rpb24odCxpKXt2YXIgYSxzPWUodCksbj10aGlzLl9nZXRJbnN0KHNbMF0pO2k9bnVsbCE9aT9pOnRoaXMuX2Zvcm1hdERhdGUobiksbi5pbnB1dCYmbi5pbnB1dC52YWwoaSksdGhpcy5fdXBkYXRlQWx0ZXJuYXRlKG4pLGE9dGhpcy5fZ2V0KG4sXCJvblNlbGVjdFwiKSxhP2EuYXBwbHkobi5pbnB1dD9uLmlucHV0WzBdOm51bGwsW2ksbl0pOm4uaW5wdXQmJm4uaW5wdXQudHJpZ2dlcihcImNoYW5nZVwiKSxuLmlubGluZT90aGlzLl91cGRhdGVEYXRlcGlja2VyKG4pOih0aGlzLl9oaWRlRGF0ZXBpY2tlcigpLHRoaXMuX2xhc3RJbnB1dD1uLmlucHV0WzBdLFwib2JqZWN0XCIhPXR5cGVvZiBuLmlucHV0WzBdJiZuLmlucHV0LmZvY3VzKCksdGhpcy5fbGFzdElucHV0PW51bGwpfSxfdXBkYXRlQWx0ZXJuYXRlOmZ1bmN0aW9uKHQpe3ZhciBpLGEscyxuPXRoaXMuX2dldCh0LFwiYWx0RmllbGRcIik7biYmKGk9dGhpcy5fZ2V0KHQsXCJhbHRGb3JtYXRcIil8fHRoaXMuX2dldCh0LFwiZGF0ZUZvcm1hdFwiKSxhPXRoaXMuX2dldERhdGUodCkscz10aGlzLmZvcm1hdERhdGUoaSxhLHRoaXMuX2dldEZvcm1hdENvbmZpZyh0KSksZShuKS5lYWNoKGZ1bmN0aW9uKCl7ZSh0aGlzKS52YWwocyl9KSl9LG5vV2Vla2VuZHM6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5nZXREYXkoKTtyZXR1cm5bdD4wJiY2PnQsXCJcIl19LGlzbzg2MDFXZWVrOmZ1bmN0aW9uKGUpe3ZhciB0LGk9bmV3IERhdGUoZS5nZXRUaW1lKCkpO3JldHVybiBpLnNldERhdGUoaS5nZXREYXRlKCkrNC0oaS5nZXREYXkoKXx8NykpLHQ9aS5nZXRUaW1lKCksaS5zZXRNb250aCgwKSxpLnNldERhdGUoMSksTWF0aC5mbG9vcihNYXRoLnJvdW5kKCh0LWkpLzg2NGU1KS83KSsxfSxwYXJzZURhdGU6ZnVuY3Rpb24oaSxhLHMpe2lmKG51bGw9PWl8fG51bGw9PWEpdGhyb3dcIkludmFsaWQgYXJndW1lbnRzXCI7aWYoYT1cIm9iamVjdFwiPT10eXBlb2YgYT9cIlwiK2E6YStcIlwiLFwiXCI9PT1hKXJldHVybiBudWxsO3ZhciBuLHIsbyxoLGw9MCx1PShzP3Muc2hvcnRZZWFyQ3V0b2ZmOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5zaG9ydFllYXJDdXRvZmYsZD1cInN0cmluZ1wiIT10eXBlb2YgdT91OihuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSUxMDArcGFyc2VJbnQodSwxMCksYz0ocz9zLmRheU5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLmRheU5hbWVzU2hvcnQscD0ocz9zLmRheU5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lcyxtPShzP3MubW9udGhOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzU2hvcnQsZj0ocz9zLm1vbnRoTmFtZXM6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXMsZz0tMSx2PS0xLHk9LTEsYj0tMSxfPSExLGs9ZnVuY3Rpb24oZSl7dmFyIHQ9aS5sZW5ndGg+bisxJiZpLmNoYXJBdChuKzEpPT09ZTtyZXR1cm4gdCYmbisrLHR9LHg9ZnVuY3Rpb24oZSl7dmFyIHQ9ayhlKSxpPVwiQFwiPT09ZT8xNDpcIiFcIj09PWU/MjA6XCJ5XCI9PT1lJiZ0PzQ6XCJvXCI9PT1lPzM6MixzPVJlZ0V4cChcIl5cXFxcZHsxLFwiK2krXCJ9XCIpLG49YS5zdWJzdHJpbmcobCkubWF0Y2gocyk7aWYoIW4pdGhyb3dcIk1pc3NpbmcgbnVtYmVyIGF0IHBvc2l0aW9uIFwiK2w7cmV0dXJuIGwrPW5bMF0ubGVuZ3RoLHBhcnNlSW50KG5bMF0sMTApfSxEPWZ1bmN0aW9uKGkscyxuKXt2YXIgcj0tMSxvPWUubWFwKGsoaSk/bjpzLGZ1bmN0aW9uKGUsdCl7cmV0dXJuW1t0LGVdXX0pLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4tKGVbMV0ubGVuZ3RoLXRbMV0ubGVuZ3RoKX0pO2lmKGUuZWFjaChvLGZ1bmN0aW9uKGUsaSl7dmFyIHM9aVsxXTtyZXR1cm4gYS5zdWJzdHIobCxzLmxlbmd0aCkudG9Mb3dlckNhc2UoKT09PXMudG9Mb3dlckNhc2UoKT8ocj1pWzBdLGwrPXMubGVuZ3RoLCExKTp0fSksLTEhPT1yKXJldHVybiByKzE7dGhyb3dcIlVua25vd24gbmFtZSBhdCBwb3NpdGlvbiBcIitsfSx3PWZ1bmN0aW9uKCl7aWYoYS5jaGFyQXQobCkhPT1pLmNoYXJBdChuKSl0aHJvd1wiVW5leHBlY3RlZCBsaXRlcmFsIGF0IHBvc2l0aW9uIFwiK2w7bCsrfTtmb3Iobj0wO2kubGVuZ3RoPm47bisrKWlmKF8pXCInXCIhPT1pLmNoYXJBdChuKXx8ayhcIidcIik/dygpOl89ITE7ZWxzZSBzd2l0Y2goaS5jaGFyQXQobikpe2Nhc2VcImRcIjp5PXgoXCJkXCIpO2JyZWFrO2Nhc2VcIkRcIjpEKFwiRFwiLGMscCk7YnJlYWs7Y2FzZVwib1wiOmI9eChcIm9cIik7YnJlYWs7Y2FzZVwibVwiOnY9eChcIm1cIik7YnJlYWs7Y2FzZVwiTVwiOnY9RChcIk1cIixtLGYpO2JyZWFrO2Nhc2VcInlcIjpnPXgoXCJ5XCIpO2JyZWFrO2Nhc2VcIkBcIjpoPW5ldyBEYXRlKHgoXCJAXCIpKSxnPWguZ2V0RnVsbFllYXIoKSx2PWguZ2V0TW9udGgoKSsxLHk9aC5nZXREYXRlKCk7YnJlYWs7Y2FzZVwiIVwiOmg9bmV3IERhdGUoKHgoXCIhXCIpLXRoaXMuX3RpY2tzVG8xOTcwKS8xZTQpLGc9aC5nZXRGdWxsWWVhcigpLHY9aC5nZXRNb250aCgpKzEseT1oLmdldERhdGUoKTticmVhaztjYXNlXCInXCI6ayhcIidcIik/dygpOl89ITA7YnJlYWs7ZGVmYXVsdDp3KCl9aWYoYS5sZW5ndGg+bCYmKG89YS5zdWJzdHIobCksIS9eXFxzKy8udGVzdChvKSkpdGhyb3dcIkV4dHJhL3VucGFyc2VkIGNoYXJhY3RlcnMgZm91bmQgaW4gZGF0ZTogXCIrbztpZigtMT09PWc/Zz0obmV3IERhdGUpLmdldEZ1bGxZZWFyKCk6MTAwPmcmJihnKz0obmV3IERhdGUpLmdldEZ1bGxZZWFyKCktKG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpJTEwMCsoZD49Zz8wOi0xMDApKSxiPi0xKWZvcih2PTEseT1iOzspe2lmKHI9dGhpcy5fZ2V0RGF5c0luTW9udGgoZyx2LTEpLHI+PXkpYnJlYWs7disrLHktPXJ9aWYoaD10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShnLHYtMSx5KSksaC5nZXRGdWxsWWVhcigpIT09Z3x8aC5nZXRNb250aCgpKzEhPT12fHxoLmdldERhdGUoKSE9PXkpdGhyb3dcIkludmFsaWQgZGF0ZVwiO3JldHVybiBofSxBVE9NOlwieXktbW0tZGRcIixDT09LSUU6XCJELCBkZCBNIHl5XCIsSVNPXzg2MDE6XCJ5eS1tbS1kZFwiLFJGQ184MjI6XCJELCBkIE0geVwiLFJGQ184NTA6XCJERCwgZGQtTS15XCIsUkZDXzEwMzY6XCJELCBkIE0geVwiLFJGQ18xMTIzOlwiRCwgZCBNIHl5XCIsUkZDXzI4MjI6XCJELCBkIE0geXlcIixSU1M6XCJELCBkIE0geVwiLFRJQ0tTOlwiIVwiLFRJTUVTVEFNUDpcIkBcIixXM0M6XCJ5eS1tbS1kZFwiLF90aWNrc1RvMTk3MDoxZTcqNjAqNjAqMjQqKDcxODY4NStNYXRoLmZsb29yKDQ5Mi41KS1NYXRoLmZsb29yKDE5LjcpK01hdGguZmxvb3IoNC45MjUpKSxmb3JtYXREYXRlOmZ1bmN0aW9uKGUsdCxpKXtpZighdClyZXR1cm5cIlwiO3ZhciBhLHM9KGk/aS5kYXlOYW1lc1Nob3J0Om51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lc1Nob3J0LG49KGk/aS5kYXlOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXMscj0oaT9pLm1vbnRoTmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lc1Nob3J0LG89KGk/aS5tb250aE5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5tb250aE5hbWVzLGg9ZnVuY3Rpb24odCl7dmFyIGk9ZS5sZW5ndGg+YSsxJiZlLmNoYXJBdChhKzEpPT09dDtyZXR1cm4gaSYmYSsrLGl9LGw9ZnVuY3Rpb24oZSx0LGkpe3ZhciBhPVwiXCIrdDtpZihoKGUpKWZvcig7aT5hLmxlbmd0aDspYT1cIjBcIithO3JldHVybiBhfSx1PWZ1bmN0aW9uKGUsdCxpLGEpe3JldHVybiBoKGUpP2FbdF06aVt0XX0sZD1cIlwiLGM9ITE7aWYodClmb3IoYT0wO2UubGVuZ3RoPmE7YSsrKWlmKGMpXCInXCIhPT1lLmNoYXJBdChhKXx8aChcIidcIik/ZCs9ZS5jaGFyQXQoYSk6Yz0hMTtlbHNlIHN3aXRjaChlLmNoYXJBdChhKSl7Y2FzZVwiZFwiOmQrPWwoXCJkXCIsdC5nZXREYXRlKCksMik7YnJlYWs7Y2FzZVwiRFwiOmQrPXUoXCJEXCIsdC5nZXREYXkoKSxzLG4pO2JyZWFrO2Nhc2VcIm9cIjpkKz1sKFwib1wiLE1hdGgucm91bmQoKG5ldyBEYXRlKHQuZ2V0RnVsbFllYXIoKSx0LmdldE1vbnRoKCksdC5nZXREYXRlKCkpLmdldFRpbWUoKS1uZXcgRGF0ZSh0LmdldEZ1bGxZZWFyKCksMCwwKS5nZXRUaW1lKCkpLzg2NGU1KSwzKTticmVhaztjYXNlXCJtXCI6ZCs9bChcIm1cIix0LmdldE1vbnRoKCkrMSwyKTticmVhaztjYXNlXCJNXCI6ZCs9dShcIk1cIix0LmdldE1vbnRoKCkscixvKTticmVhaztjYXNlXCJ5XCI6ZCs9aChcInlcIik/dC5nZXRGdWxsWWVhcigpOigxMD50LmdldFllYXIoKSUxMDA/XCIwXCI6XCJcIikrdC5nZXRZZWFyKCklMTAwO2JyZWFrO2Nhc2VcIkBcIjpkKz10LmdldFRpbWUoKTticmVhaztjYXNlXCIhXCI6ZCs9MWU0KnQuZ2V0VGltZSgpK3RoaXMuX3RpY2tzVG8xOTcwO2JyZWFrO2Nhc2VcIidcIjpoKFwiJ1wiKT9kKz1cIidcIjpjPSEwO2JyZWFrO2RlZmF1bHQ6ZCs9ZS5jaGFyQXQoYSl9cmV0dXJuIGR9LF9wb3NzaWJsZUNoYXJzOmZ1bmN0aW9uKGUpe3ZhciB0LGk9XCJcIixhPSExLHM9ZnVuY3Rpb24oaSl7dmFyIGE9ZS5sZW5ndGg+dCsxJiZlLmNoYXJBdCh0KzEpPT09aTtyZXR1cm4gYSYmdCsrLGF9O2Zvcih0PTA7ZS5sZW5ndGg+dDt0KyspaWYoYSlcIidcIiE9PWUuY2hhckF0KHQpfHxzKFwiJ1wiKT9pKz1lLmNoYXJBdCh0KTphPSExO2Vsc2Ugc3dpdGNoKGUuY2hhckF0KHQpKXtjYXNlXCJkXCI6Y2FzZVwibVwiOmNhc2VcInlcIjpjYXNlXCJAXCI6aSs9XCIwMTIzNDU2Nzg5XCI7YnJlYWs7Y2FzZVwiRFwiOmNhc2VcIk1cIjpyZXR1cm4gbnVsbDtjYXNlXCInXCI6cyhcIidcIik/aSs9XCInXCI6YT0hMDticmVhaztkZWZhdWx0OmkrPWUuY2hhckF0KHQpfXJldHVybiBpfSxfZ2V0OmZ1bmN0aW9uKGUsaSl7cmV0dXJuIGUuc2V0dGluZ3NbaV0hPT10P2Uuc2V0dGluZ3NbaV06dGhpcy5fZGVmYXVsdHNbaV19LF9zZXREYXRlRnJvbUZpZWxkOmZ1bmN0aW9uKGUsdCl7aWYoZS5pbnB1dC52YWwoKSE9PWUubGFzdFZhbCl7dmFyIGk9dGhpcy5fZ2V0KGUsXCJkYXRlRm9ybWF0XCIpLGE9ZS5sYXN0VmFsPWUuaW5wdXQ/ZS5pbnB1dC52YWwoKTpudWxsLHM9dGhpcy5fZ2V0RGVmYXVsdERhdGUoZSksbj1zLHI9dGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGUpO3RyeXtuPXRoaXMucGFyc2VEYXRlKGksYSxyKXx8c31jYXRjaChvKXthPXQ/XCJcIjphfWUuc2VsZWN0ZWREYXk9bi5nZXREYXRlKCksZS5kcmF3TW9udGg9ZS5zZWxlY3RlZE1vbnRoPW4uZ2V0TW9udGgoKSxlLmRyYXdZZWFyPWUuc2VsZWN0ZWRZZWFyPW4uZ2V0RnVsbFllYXIoKSxlLmN1cnJlbnREYXk9YT9uLmdldERhdGUoKTowLGUuY3VycmVudE1vbnRoPWE/bi5nZXRNb250aCgpOjAsZS5jdXJyZW50WWVhcj1hP24uZ2V0RnVsbFllYXIoKTowLHRoaXMuX2FkanVzdEluc3REYXRlKGUpfX0sX2dldERlZmF1bHREYXRlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9yZXN0cmljdE1pbk1heChlLHRoaXMuX2RldGVybWluZURhdGUoZSx0aGlzLl9nZXQoZSxcImRlZmF1bHREYXRlXCIpLG5ldyBEYXRlKSl9LF9kZXRlcm1pbmVEYXRlOmZ1bmN0aW9uKHQsaSxhKXt2YXIgcz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgRGF0ZTtyZXR1cm4gdC5zZXREYXRlKHQuZ2V0RGF0ZSgpK2UpLHR9LG49ZnVuY3Rpb24oaSl7dHJ5e3JldHVybiBlLmRhdGVwaWNrZXIucGFyc2VEYXRlKGUuZGF0ZXBpY2tlci5fZ2V0KHQsXCJkYXRlRm9ybWF0XCIpLGksZS5kYXRlcGlja2VyLl9nZXRGb3JtYXRDb25maWcodCkpfWNhdGNoKGEpe31mb3IodmFyIHM9KGkudG9Mb3dlckNhc2UoKS5tYXRjaCgvXmMvKT9lLmRhdGVwaWNrZXIuX2dldERhdGUodCk6bnVsbCl8fG5ldyBEYXRlLG49cy5nZXRGdWxsWWVhcigpLHI9cy5nZXRNb250aCgpLG89cy5nZXREYXRlKCksaD0vKFsrXFwtXT9bMC05XSspXFxzKihkfER8d3xXfG18TXx5fFkpPy9nLGw9aC5leGVjKGkpO2w7KXtzd2l0Y2gobFsyXXx8XCJkXCIpe2Nhc2VcImRcIjpjYXNlXCJEXCI6bys9cGFyc2VJbnQobFsxXSwxMCk7YnJlYWs7Y2FzZVwid1wiOmNhc2VcIldcIjpvKz03KnBhcnNlSW50KGxbMV0sMTApO2JyZWFrO2Nhc2VcIm1cIjpjYXNlXCJNXCI6cis9cGFyc2VJbnQobFsxXSwxMCksbz1NYXRoLm1pbihvLGUuZGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgobixyKSk7YnJlYWs7Y2FzZVwieVwiOmNhc2VcIllcIjpuKz1wYXJzZUludChsWzFdLDEwKSxvPU1hdGgubWluKG8sZS5kYXRlcGlja2VyLl9nZXREYXlzSW5Nb250aChuLHIpKX1sPWguZXhlYyhpKX1yZXR1cm4gbmV3IERhdGUobixyLG8pfSxyPW51bGw9PWl8fFwiXCI9PT1pP2E6XCJzdHJpbmdcIj09dHlwZW9mIGk/bihpKTpcIm51bWJlclwiPT10eXBlb2YgaT9pc05hTihpKT9hOnMoaSk6bmV3IERhdGUoaS5nZXRUaW1lKCkpO3JldHVybiByPXImJlwiSW52YWxpZCBEYXRlXCI9PVwiXCIrcj9hOnIsciYmKHIuc2V0SG91cnMoMCksci5zZXRNaW51dGVzKDApLHIuc2V0U2Vjb25kcygwKSxyLnNldE1pbGxpc2Vjb25kcygwKSksdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3Qocil9LF9kYXlsaWdodFNhdmluZ0FkanVzdDpmdW5jdGlvbihlKXtyZXR1cm4gZT8oZS5zZXRIb3VycyhlLmdldEhvdXJzKCk+MTI/ZS5nZXRIb3VycygpKzI6MCksZSk6bnVsbH0sX3NldERhdGU6ZnVuY3Rpb24oZSx0LGkpe3ZhciBhPSF0LHM9ZS5zZWxlY3RlZE1vbnRoLG49ZS5zZWxlY3RlZFllYXIscj10aGlzLl9yZXN0cmljdE1pbk1heChlLHRoaXMuX2RldGVybWluZURhdGUoZSx0LG5ldyBEYXRlKSk7ZS5zZWxlY3RlZERheT1lLmN1cnJlbnREYXk9ci5nZXREYXRlKCksZS5kcmF3TW9udGg9ZS5zZWxlY3RlZE1vbnRoPWUuY3VycmVudE1vbnRoPXIuZ2V0TW9udGgoKSxlLmRyYXdZZWFyPWUuc2VsZWN0ZWRZZWFyPWUuY3VycmVudFllYXI9ci5nZXRGdWxsWWVhcigpLHM9PT1lLnNlbGVjdGVkTW9udGgmJm49PT1lLnNlbGVjdGVkWWVhcnx8aXx8dGhpcy5fbm90aWZ5Q2hhbmdlKGUpLHRoaXMuX2FkanVzdEluc3REYXRlKGUpLGUuaW5wdXQmJmUuaW5wdXQudmFsKGE/XCJcIjp0aGlzLl9mb3JtYXREYXRlKGUpKX0sX2dldERhdGU6ZnVuY3Rpb24oZSl7dmFyIHQ9IWUuY3VycmVudFllYXJ8fGUuaW5wdXQmJlwiXCI9PT1lLmlucHV0LnZhbCgpP251bGw6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZS5jdXJyZW50WWVhcixlLmN1cnJlbnRNb250aCxlLmN1cnJlbnREYXkpKTtyZXR1cm4gdH0sX2F0dGFjaEhhbmRsZXJzOmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX2dldCh0LFwic3RlcE1vbnRoc1wiKSxhPVwiI1wiK3QuaWQucmVwbGFjZSgvXFxcXFxcXFwvZyxcIlxcXFxcIik7dC5kcERpdi5maW5kKFwiW2RhdGEtaGFuZGxlcl1cIikubWFwKGZ1bmN0aW9uKCl7dmFyIHQ9e3ByZXY6ZnVuY3Rpb24oKXtlLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoYSwtaSxcIk1cIil9LG5leHQ6ZnVuY3Rpb24oKXtlLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoYSwraSxcIk1cIil9LGhpZGU6ZnVuY3Rpb24oKXtlLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCl9LHRvZGF5OmZ1bmN0aW9uKCl7ZS5kYXRlcGlja2VyLl9nb3RvVG9kYXkoYSl9LHNlbGVjdERheTpmdW5jdGlvbigpe3JldHVybiBlLmRhdGVwaWNrZXIuX3NlbGVjdERheShhLCt0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtbW9udGhcIiksK3RoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS15ZWFyXCIpLHRoaXMpLCExfSxzZWxlY3RNb250aDpmdW5jdGlvbigpe3JldHVybiBlLmRhdGVwaWNrZXIuX3NlbGVjdE1vbnRoWWVhcihhLHRoaXMsXCJNXCIpLCExfSxzZWxlY3RZZWFyOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZGF0ZXBpY2tlci5fc2VsZWN0TW9udGhZZWFyKGEsdGhpcyxcIllcIiksITF9fTtlKHRoaXMpLmJpbmQodGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWV2ZW50XCIpLHRbdGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWhhbmRsZXJcIildKX0pfSxfZ2VuZXJhdGVIVE1MOmZ1bmN0aW9uKGUpe3ZhciB0LGksYSxzLG4scixvLGgsbCx1LGQsYyxwLG0sZixnLHYseSxiLF8sayx4LEQsdyxULE0sUyxOLEMsQSxQLEksRixqLEgsRSx6LEwsTyxSPW5ldyBEYXRlLFc9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoUi5nZXRGdWxsWWVhcigpLFIuZ2V0TW9udGgoKSxSLmdldERhdGUoKSkpLFk9dGhpcy5fZ2V0KGUsXCJpc1JUTFwiKSxKPXRoaXMuX2dldChlLFwic2hvd0J1dHRvblBhbmVsXCIpLCQ9dGhpcy5fZ2V0KGUsXCJoaWRlSWZOb1ByZXZOZXh0XCIpLFE9dGhpcy5fZ2V0KGUsXCJuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0XCIpLEI9dGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoZSksSz10aGlzLl9nZXQoZSxcInNob3dDdXJyZW50QXRQb3NcIiksVj10aGlzLl9nZXQoZSxcInN0ZXBNb250aHNcIiksVT0xIT09QlswXXx8MSE9PUJbMV0sRz10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChlLmN1cnJlbnREYXk/bmV3IERhdGUoZS5jdXJyZW50WWVhcixlLmN1cnJlbnRNb250aCxlLmN1cnJlbnREYXkpOm5ldyBEYXRlKDk5OTksOSw5KSkscT10aGlzLl9nZXRNaW5NYXhEYXRlKGUsXCJtaW5cIiksWD10aGlzLl9nZXRNaW5NYXhEYXRlKGUsXCJtYXhcIiksWj1lLmRyYXdNb250aC1LLGV0PWUuZHJhd1llYXI7aWYoMD5aJiYoWis9MTIsZXQtLSksWClmb3IodD10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShYLmdldEZ1bGxZZWFyKCksWC5nZXRNb250aCgpLUJbMF0qQlsxXSsxLFguZ2V0RGF0ZSgpKSksdD1xJiZxPnQ/cTp0O3RoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGV0LFosMSkpPnQ7KVotLSwwPlomJihaPTExLGV0LS0pO2ZvcihlLmRyYXdNb250aD1aLGUuZHJhd1llYXI9ZXQsaT10aGlzLl9nZXQoZSxcInByZXZUZXh0XCIpLGk9UT90aGlzLmZvcm1hdERhdGUoaSx0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShldCxaLVYsMSkpLHRoaXMuX2dldEZvcm1hdENvbmZpZyhlKSk6aSxhPXRoaXMuX2NhbkFkanVzdE1vbnRoKGUsLTEsZXQsWik/XCI8YSBjbGFzcz0ndWktZGF0ZXBpY2tlci1wcmV2IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0ncHJldicgZGF0YS1ldmVudD0nY2xpY2snIHRpdGxlPSdcIitpK1wiJz48c3BhbiBjbGFzcz0ndWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS1cIisoWT9cImVcIjpcIndcIikrXCInPlwiK2krXCI8L3NwYW4+PC9hPlwiOiQ/XCJcIjpcIjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLXByZXYgdWktY29ybmVyLWFsbCB1aS1zdGF0ZS1kaXNhYmxlZCcgdGl0bGU9J1wiK2krXCInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLVwiKyhZP1wiZVwiOlwid1wiKStcIic+XCIraStcIjwvc3Bhbj48L2E+XCIscz10aGlzLl9nZXQoZSxcIm5leHRUZXh0XCIpLHM9UT90aGlzLmZvcm1hdERhdGUocyx0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShldCxaK1YsMSkpLHRoaXMuX2dldEZvcm1hdENvbmZpZyhlKSk6cyxuPXRoaXMuX2NhbkFkanVzdE1vbnRoKGUsMSxldCxaKT9cIjxhIGNsYXNzPSd1aS1kYXRlcGlja2VyLW5leHQgdWktY29ybmVyLWFsbCcgZGF0YS1oYW5kbGVyPSduZXh0JyBkYXRhLWV2ZW50PSdjbGljaycgdGl0bGU9J1wiK3MrXCInPjxzcGFuIGNsYXNzPSd1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLVwiKyhZP1wid1wiOlwiZVwiKStcIic+XCIrcytcIjwvc3Bhbj48L2E+XCI6JD9cIlwiOlwiPGEgY2xhc3M9J3VpLWRhdGVwaWNrZXItbmV4dCB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWRpc2FibGVkJyB0aXRsZT0nXCIrcytcIic+PHNwYW4gY2xhc3M9J3VpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtXCIrKFk/XCJ3XCI6XCJlXCIpK1wiJz5cIitzK1wiPC9zcGFuPjwvYT5cIixyPXRoaXMuX2dldChlLFwiY3VycmVudFRleHRcIiksbz10aGlzLl9nZXQoZSxcImdvdG9DdXJyZW50XCIpJiZlLmN1cnJlbnREYXk/RzpXLHI9UT90aGlzLmZvcm1hdERhdGUocixvLHRoaXMuX2dldEZvcm1hdENvbmZpZyhlKSk6cixoPWUuaW5saW5lP1wiXCI6XCI8YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J3VpLWRhdGVwaWNrZXItY2xvc2UgdWktc3RhdGUtZGVmYXVsdCB1aS1wcmlvcml0eS1wcmltYXJ5IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0naGlkZScgZGF0YS1ldmVudD0nY2xpY2snPlwiK3RoaXMuX2dldChlLFwiY2xvc2VUZXh0XCIpK1wiPC9idXR0b24+XCIsbD1KP1wiPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci1idXR0b25wYW5lIHVpLXdpZGdldC1jb250ZW50Jz5cIisoWT9oOlwiXCIpKyh0aGlzLl9pc0luUmFuZ2UoZSxvKT9cIjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0ndWktZGF0ZXBpY2tlci1jdXJyZW50IHVpLXN0YXRlLWRlZmF1bHQgdWktcHJpb3JpdHktc2Vjb25kYXJ5IHVpLWNvcm5lci1hbGwnIGRhdGEtaGFuZGxlcj0ndG9kYXknIGRhdGEtZXZlbnQ9J2NsaWNrJz5cIityK1wiPC9idXR0b24+XCI6XCJcIikrKFk/XCJcIjpoKStcIjwvZGl2PlwiOlwiXCIsdT1wYXJzZUludCh0aGlzLl9nZXQoZSxcImZpcnN0RGF5XCIpLDEwKSx1PWlzTmFOKHUpPzA6dSxkPXRoaXMuX2dldChlLFwic2hvd1dlZWtcIiksYz10aGlzLl9nZXQoZSxcImRheU5hbWVzXCIpLHA9dGhpcy5fZ2V0KGUsXCJkYXlOYW1lc01pblwiKSxtPXRoaXMuX2dldChlLFwibW9udGhOYW1lc1wiKSxmPXRoaXMuX2dldChlLFwibW9udGhOYW1lc1Nob3J0XCIpLGc9dGhpcy5fZ2V0KGUsXCJiZWZvcmVTaG93RGF5XCIpLHY9dGhpcy5fZ2V0KGUsXCJzaG93T3RoZXJNb250aHNcIikseT10aGlzLl9nZXQoZSxcInNlbGVjdE90aGVyTW9udGhzXCIpLGI9dGhpcy5fZ2V0RGVmYXVsdERhdGUoZSksXz1cIlwiLHg9MDtCWzBdPng7eCsrKXtmb3IoRD1cIlwiLHRoaXMubWF4Um93cz00LHc9MDtCWzFdPnc7dysrKXtpZihUPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGV0LFosZS5zZWxlY3RlZERheSkpLE09XCIgdWktY29ybmVyLWFsbFwiLFM9XCJcIixVKXtpZihTKz1cIjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItZ3JvdXBcIixCWzFdPjEpc3dpdGNoKHcpe2Nhc2UgMDpTKz1cIiB1aS1kYXRlcGlja2VyLWdyb3VwLWZpcnN0XCIsTT1cIiB1aS1jb3JuZXItXCIrKFk/XCJyaWdodFwiOlwibGVmdFwiKTticmVhaztjYXNlIEJbMV0tMTpTKz1cIiB1aS1kYXRlcGlja2VyLWdyb3VwLWxhc3RcIixNPVwiIHVpLWNvcm5lci1cIisoWT9cImxlZnRcIjpcInJpZ2h0XCIpO2JyZWFrO2RlZmF1bHQ6Uys9XCIgdWktZGF0ZXBpY2tlci1ncm91cC1taWRkbGVcIixNPVwiXCJ9Uys9XCInPlwifWZvcihTKz1cIjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItaGVhZGVyIHVpLXdpZGdldC1oZWFkZXIgdWktaGVscGVyLWNsZWFyZml4XCIrTStcIic+XCIrKC9hbGx8bGVmdC8udGVzdChNKSYmMD09PXg/WT9uOmE6XCJcIikrKC9hbGx8cmlnaHQvLnRlc3QoTSkmJjA9PT14P1k/YTpuOlwiXCIpK3RoaXMuX2dlbmVyYXRlTW9udGhZZWFySGVhZGVyKGUsWixldCxxLFgseD4wfHx3PjAsbSxmKStcIjwvZGl2Pjx0YWJsZSBjbGFzcz0ndWktZGF0ZXBpY2tlci1jYWxlbmRhcic+PHRoZWFkPlwiK1wiPHRyPlwiLE49ZD9cIjx0aCBjbGFzcz0ndWktZGF0ZXBpY2tlci13ZWVrLWNvbCc+XCIrdGhpcy5fZ2V0KGUsXCJ3ZWVrSGVhZGVyXCIpK1wiPC90aD5cIjpcIlwiLGs9MDs3Pms7aysrKUM9KGsrdSklNyxOKz1cIjx0aFwiKygoayt1KzYpJTc+PTU/XCIgY2xhc3M9J3VpLWRhdGVwaWNrZXItd2Vlay1lbmQnXCI6XCJcIikrXCI+XCIrXCI8c3BhbiB0aXRsZT0nXCIrY1tDXStcIic+XCIrcFtDXStcIjwvc3Bhbj48L3RoPlwiO2ZvcihTKz1OK1wiPC90cj48L3RoZWFkPjx0Ym9keT5cIixBPXRoaXMuX2dldERheXNJbk1vbnRoKGV0LFopLGV0PT09ZS5zZWxlY3RlZFllYXImJlo9PT1lLnNlbGVjdGVkTW9udGgmJihlLnNlbGVjdGVkRGF5PU1hdGgubWluKGUuc2VsZWN0ZWREYXksQSkpLFA9KHRoaXMuX2dldEZpcnN0RGF5T2ZNb250aChldCxaKS11KzcpJTcsST1NYXRoLmNlaWwoKFArQSkvNyksRj1VP3RoaXMubWF4Um93cz5JP3RoaXMubWF4Um93czpJOkksdGhpcy5tYXhSb3dzPUYsaj10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShldCxaLDEtUCkpLEg9MDtGPkg7SCsrKXtmb3IoUys9XCI8dHI+XCIsRT1kP1wiPHRkIGNsYXNzPSd1aS1kYXRlcGlja2VyLXdlZWstY29sJz5cIit0aGlzLl9nZXQoZSxcImNhbGN1bGF0ZVdlZWtcIikoaikrXCI8L3RkPlwiOlwiXCIsaz0wOzc+aztrKyspej1nP2cuYXBwbHkoZS5pbnB1dD9lLmlucHV0WzBdOm51bGwsW2pdKTpbITAsXCJcIl0sTD1qLmdldE1vbnRoKCkhPT1aLE89TCYmIXl8fCF6WzBdfHxxJiZxPmp8fFgmJmo+WCxFKz1cIjx0ZCBjbGFzcz0nXCIrKChrK3UrNiklNz49NT9cIiB1aS1kYXRlcGlja2VyLXdlZWstZW5kXCI6XCJcIikrKEw/XCIgdWktZGF0ZXBpY2tlci1vdGhlci1tb250aFwiOlwiXCIpKyhqLmdldFRpbWUoKT09PVQuZ2V0VGltZSgpJiZaPT09ZS5zZWxlY3RlZE1vbnRoJiZlLl9rZXlFdmVudHx8Yi5nZXRUaW1lKCk9PT1qLmdldFRpbWUoKSYmYi5nZXRUaW1lKCk9PT1ULmdldFRpbWUoKT9cIiBcIit0aGlzLl9kYXlPdmVyQ2xhc3M6XCJcIikrKE8/XCIgXCIrdGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MrXCIgdWktc3RhdGUtZGlzYWJsZWRcIjpcIlwiKSsoTCYmIXY/XCJcIjpcIiBcIit6WzFdKyhqLmdldFRpbWUoKT09PUcuZ2V0VGltZSgpP1wiIFwiK3RoaXMuX2N1cnJlbnRDbGFzczpcIlwiKSsoai5nZXRUaW1lKCk9PT1XLmdldFRpbWUoKT9cIiB1aS1kYXRlcGlja2VyLXRvZGF5XCI6XCJcIikpK1wiJ1wiKyhMJiYhdnx8IXpbMl0/XCJcIjpcIiB0aXRsZT0nXCIrelsyXS5yZXBsYWNlKC8nL2csXCImIzM5O1wiKStcIidcIikrKE8/XCJcIjpcIiBkYXRhLWhhbmRsZXI9J3NlbGVjdERheScgZGF0YS1ldmVudD0nY2xpY2snIGRhdGEtbW9udGg9J1wiK2ouZ2V0TW9udGgoKStcIicgZGF0YS15ZWFyPSdcIitqLmdldEZ1bGxZZWFyKCkrXCInXCIpK1wiPlwiKyhMJiYhdj9cIiYjeGEwO1wiOk8/XCI8c3BhbiBjbGFzcz0ndWktc3RhdGUtZGVmYXVsdCc+XCIrai5nZXREYXRlKCkrXCI8L3NwYW4+XCI6XCI8YSBjbGFzcz0ndWktc3RhdGUtZGVmYXVsdFwiKyhqLmdldFRpbWUoKT09PVcuZ2V0VGltZSgpP1wiIHVpLXN0YXRlLWhpZ2hsaWdodFwiOlwiXCIpKyhqLmdldFRpbWUoKT09PUcuZ2V0VGltZSgpP1wiIHVpLXN0YXRlLWFjdGl2ZVwiOlwiXCIpKyhMP1wiIHVpLXByaW9yaXR5LXNlY29uZGFyeVwiOlwiXCIpK1wiJyBocmVmPScjJz5cIitqLmdldERhdGUoKStcIjwvYT5cIikrXCI8L3RkPlwiLGouc2V0RGF0ZShqLmdldERhdGUoKSsxKSxqPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KGopO1MrPUUrXCI8L3RyPlwifVorKyxaPjExJiYoWj0wLGV0KyspLFMrPVwiPC90Ym9keT48L3RhYmxlPlwiKyhVP1wiPC9kaXY+XCIrKEJbMF0+MCYmdz09PUJbMV0tMT9cIjxkaXYgY2xhc3M9J3VpLWRhdGVwaWNrZXItcm93LWJyZWFrJz48L2Rpdj5cIjpcIlwiKTpcIlwiKSxEKz1TfV8rPUR9cmV0dXJuIF8rPWwsZS5fa2V5RXZlbnQ9ITEsX30sX2dlbmVyYXRlTW9udGhZZWFySGVhZGVyOmZ1bmN0aW9uKGUsdCxpLGEscyxuLHIsbyl7dmFyIGgsbCx1LGQsYyxwLG0sZixnPXRoaXMuX2dldChlLFwiY2hhbmdlTW9udGhcIiksdj10aGlzLl9nZXQoZSxcImNoYW5nZVllYXJcIikseT10aGlzLl9nZXQoZSxcInNob3dNb250aEFmdGVyWWVhclwiKSxiPVwiPGRpdiBjbGFzcz0ndWktZGF0ZXBpY2tlci10aXRsZSc+XCIsXz1cIlwiO2lmKG58fCFnKV8rPVwiPHNwYW4gY2xhc3M9J3VpLWRhdGVwaWNrZXItbW9udGgnPlwiK3JbdF0rXCI8L3NwYW4+XCI7ZWxzZXtmb3IoaD1hJiZhLmdldEZ1bGxZZWFyKCk9PT1pLGw9cyYmcy5nZXRGdWxsWWVhcigpPT09aSxfKz1cIjxzZWxlY3QgY2xhc3M9J3VpLWRhdGVwaWNrZXItbW9udGgnIGRhdGEtaGFuZGxlcj0nc2VsZWN0TW9udGgnIGRhdGEtZXZlbnQ9J2NoYW5nZSc+XCIsdT0wOzEyPnU7dSsrKSghaHx8dT49YS5nZXRNb250aCgpKSYmKCFsfHxzLmdldE1vbnRoKCk+PXUpJiYoXys9XCI8b3B0aW9uIHZhbHVlPSdcIit1K1wiJ1wiKyh1PT09dD9cIiBzZWxlY3RlZD0nc2VsZWN0ZWQnXCI6XCJcIikrXCI+XCIrb1t1XStcIjwvb3B0aW9uPlwiKTtfKz1cIjwvc2VsZWN0PlwifWlmKHl8fChiKz1fKyghbiYmZyYmdj9cIlwiOlwiJiN4YTA7XCIpKSwhZS55ZWFyc2h0bWwpaWYoZS55ZWFyc2h0bWw9XCJcIixufHwhdiliKz1cIjxzcGFuIGNsYXNzPSd1aS1kYXRlcGlja2VyLXllYXInPlwiK2krXCI8L3NwYW4+XCI7ZWxzZXtmb3IoZD10aGlzLl9nZXQoZSxcInllYXJSYW5nZVwiKS5zcGxpdChcIjpcIiksYz0obmV3IERhdGUpLmdldEZ1bGxZZWFyKCkscD1mdW5jdGlvbihlKXt2YXIgdD1lLm1hdGNoKC9jWytcXC1dLiovKT9pK3BhcnNlSW50KGUuc3Vic3RyaW5nKDEpLDEwKTplLm1hdGNoKC9bK1xcLV0uKi8pP2MrcGFyc2VJbnQoZSwxMCk6cGFyc2VJbnQoZSwxMCk7XG5yZXR1cm4gaXNOYU4odCk/Yzp0fSxtPXAoZFswXSksZj1NYXRoLm1heChtLHAoZFsxXXx8XCJcIikpLG09YT9NYXRoLm1heChtLGEuZ2V0RnVsbFllYXIoKSk6bSxmPXM/TWF0aC5taW4oZixzLmdldEZ1bGxZZWFyKCkpOmYsZS55ZWFyc2h0bWwrPVwiPHNlbGVjdCBjbGFzcz0ndWktZGF0ZXBpY2tlci15ZWFyJyBkYXRhLWhhbmRsZXI9J3NlbGVjdFllYXInIGRhdGEtZXZlbnQ9J2NoYW5nZSc+XCI7Zj49bTttKyspZS55ZWFyc2h0bWwrPVwiPG9wdGlvbiB2YWx1ZT0nXCIrbStcIidcIisobT09PWk/XCIgc2VsZWN0ZWQ9J3NlbGVjdGVkJ1wiOlwiXCIpK1wiPlwiK20rXCI8L29wdGlvbj5cIjtlLnllYXJzaHRtbCs9XCI8L3NlbGVjdD5cIixiKz1lLnllYXJzaHRtbCxlLnllYXJzaHRtbD1udWxsfXJldHVybiBiKz10aGlzLl9nZXQoZSxcInllYXJTdWZmaXhcIikseSYmKGIrPSghbiYmZyYmdj9cIlwiOlwiJiN4YTA7XCIpK18pLGIrPVwiPC9kaXY+XCJ9LF9hZGp1c3RJbnN0RGF0ZTpmdW5jdGlvbihlLHQsaSl7dmFyIGE9ZS5kcmF3WWVhcisoXCJZXCI9PT1pP3Q6MCkscz1lLmRyYXdNb250aCsoXCJNXCI9PT1pP3Q6MCksbj1NYXRoLm1pbihlLnNlbGVjdGVkRGF5LHRoaXMuX2dldERheXNJbk1vbnRoKGEscykpKyhcIkRcIj09PWk/dDowKSxyPXRoaXMuX3Jlc3RyaWN0TWluTWF4KGUsdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoYSxzLG4pKSk7ZS5zZWxlY3RlZERheT1yLmdldERhdGUoKSxlLmRyYXdNb250aD1lLnNlbGVjdGVkTW9udGg9ci5nZXRNb250aCgpLGUuZHJhd1llYXI9ZS5zZWxlY3RlZFllYXI9ci5nZXRGdWxsWWVhcigpLChcIk1cIj09PWl8fFwiWVwiPT09aSkmJnRoaXMuX25vdGlmeUNoYW5nZShlKX0sX3Jlc3RyaWN0TWluTWF4OmZ1bmN0aW9uKGUsdCl7dmFyIGk9dGhpcy5fZ2V0TWluTWF4RGF0ZShlLFwibWluXCIpLGE9dGhpcy5fZ2V0TWluTWF4RGF0ZShlLFwibWF4XCIpLHM9aSYmaT50P2k6dDtyZXR1cm4gYSYmcz5hP2E6c30sX25vdGlmeUNoYW5nZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nZXQoZSxcIm9uQ2hhbmdlTW9udGhZZWFyXCIpO3QmJnQuYXBwbHkoZS5pbnB1dD9lLmlucHV0WzBdOm51bGwsW2Uuc2VsZWN0ZWRZZWFyLGUuc2VsZWN0ZWRNb250aCsxLGVdKX0sX2dldE51bWJlck9mTW9udGhzOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dldChlLFwibnVtYmVyT2ZNb250aHNcIik7cmV0dXJuIG51bGw9PXQ/WzEsMV06XCJudW1iZXJcIj09dHlwZW9mIHQ/WzEsdF06dH0sX2dldE1pbk1heERhdGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZGV0ZXJtaW5lRGF0ZShlLHRoaXMuX2dldChlLHQrXCJEYXRlXCIpLG51bGwpfSxfZ2V0RGF5c0luTW9udGg6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gMzItdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZSx0LDMyKSkuZ2V0RGF0ZSgpfSxfZ2V0Rmlyc3REYXlPZk1vbnRoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBEYXRlKGUsdCwxKS5nZXREYXkoKX0sX2NhbkFkanVzdE1vbnRoOmZ1bmN0aW9uKGUsdCxpLGEpe3ZhciBzPXRoaXMuX2dldE51bWJlck9mTW9udGhzKGUpLG49dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaSxhKygwPnQ/dDpzWzBdKnNbMV0pLDEpKTtyZXR1cm4gMD50JiZuLnNldERhdGUodGhpcy5fZ2V0RGF5c0luTW9udGgobi5nZXRGdWxsWWVhcigpLG4uZ2V0TW9udGgoKSkpLHRoaXMuX2lzSW5SYW5nZShlLG4pfSxfaXNJblJhbmdlOmZ1bmN0aW9uKGUsdCl7dmFyIGksYSxzPXRoaXMuX2dldE1pbk1heERhdGUoZSxcIm1pblwiKSxuPXRoaXMuX2dldE1pbk1heERhdGUoZSxcIm1heFwiKSxyPW51bGwsbz1udWxsLGg9dGhpcy5fZ2V0KGUsXCJ5ZWFyUmFuZ2VcIik7cmV0dXJuIGgmJihpPWguc3BsaXQoXCI6XCIpLGE9KG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpLHI9cGFyc2VJbnQoaVswXSwxMCksbz1wYXJzZUludChpWzFdLDEwKSxpWzBdLm1hdGNoKC9bK1xcLV0uKi8pJiYocis9YSksaVsxXS5tYXRjaCgvWytcXC1dLiovKSYmKG8rPWEpKSwoIXN8fHQuZ2V0VGltZSgpPj1zLmdldFRpbWUoKSkmJighbnx8dC5nZXRUaW1lKCk8PW4uZ2V0VGltZSgpKSYmKCFyfHx0LmdldEZ1bGxZZWFyKCk+PXIpJiYoIW98fG8+PXQuZ2V0RnVsbFllYXIoKSl9LF9nZXRGb3JtYXRDb25maWc6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0KGUsXCJzaG9ydFllYXJDdXRvZmZcIik7cmV0dXJuIHQ9XCJzdHJpbmdcIiE9dHlwZW9mIHQ/dDoobmV3IERhdGUpLmdldEZ1bGxZZWFyKCklMTAwK3BhcnNlSW50KHQsMTApLHtzaG9ydFllYXJDdXRvZmY6dCxkYXlOYW1lc1Nob3J0OnRoaXMuX2dldChlLFwiZGF5TmFtZXNTaG9ydFwiKSxkYXlOYW1lczp0aGlzLl9nZXQoZSxcImRheU5hbWVzXCIpLG1vbnRoTmFtZXNTaG9ydDp0aGlzLl9nZXQoZSxcIm1vbnRoTmFtZXNTaG9ydFwiKSxtb250aE5hbWVzOnRoaXMuX2dldChlLFwibW9udGhOYW1lc1wiKX19LF9mb3JtYXREYXRlOmZ1bmN0aW9uKGUsdCxpLGEpe3R8fChlLmN1cnJlbnREYXk9ZS5zZWxlY3RlZERheSxlLmN1cnJlbnRNb250aD1lLnNlbGVjdGVkTW9udGgsZS5jdXJyZW50WWVhcj1lLnNlbGVjdGVkWWVhcik7dmFyIHM9dD9cIm9iamVjdFwiPT10eXBlb2YgdD90OnRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGEsaSx0KSk6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZS5jdXJyZW50WWVhcixlLmN1cnJlbnRNb250aCxlLmN1cnJlbnREYXkpKTtyZXR1cm4gdGhpcy5mb3JtYXREYXRlKHRoaXMuX2dldChlLFwiZGF0ZUZvcm1hdFwiKSxzLHRoaXMuX2dldEZvcm1hdENvbmZpZyhlKSl9fSksZS5mbi5kYXRlcGlja2VyPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLmxlbmd0aClyZXR1cm4gdGhpcztlLmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWR8fChlKGRvY3VtZW50KS5tb3VzZWRvd24oZS5kYXRlcGlja2VyLl9jaGVja0V4dGVybmFsQ2xpY2spLGUuZGF0ZXBpY2tlci5pbml0aWFsaXplZD0hMCksMD09PWUoXCIjXCIrZS5kYXRlcGlja2VyLl9tYWluRGl2SWQpLmxlbmd0aCYmZShcImJvZHlcIikuYXBwZW5kKGUuZGF0ZXBpY2tlci5kcERpdik7dmFyIGk9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiB0fHxcImlzRGlzYWJsZWRcIiE9PXQmJlwiZ2V0RGF0ZVwiIT09dCYmXCJ3aWRnZXRcIiE9PXQ/XCJvcHRpb25cIj09PXQmJjI9PT1hcmd1bWVudHMubGVuZ3RoJiZcInN0cmluZ1wiPT10eXBlb2YgYXJndW1lbnRzWzFdP2UuZGF0ZXBpY2tlcltcIl9cIit0K1wiRGF0ZXBpY2tlclwiXS5hcHBseShlLmRhdGVwaWNrZXIsW3RoaXNbMF1dLmNvbmNhdChpKSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7XCJzdHJpbmdcIj09dHlwZW9mIHQ/ZS5kYXRlcGlja2VyW1wiX1wiK3QrXCJEYXRlcGlja2VyXCJdLmFwcGx5KGUuZGF0ZXBpY2tlcixbdGhpc10uY29uY2F0KGkpKTplLmRhdGVwaWNrZXIuX2F0dGFjaERhdGVwaWNrZXIodGhpcyx0KX0pOmUuZGF0ZXBpY2tlcltcIl9cIit0K1wiRGF0ZXBpY2tlclwiXS5hcHBseShlLmRhdGVwaWNrZXIsW3RoaXNbMF1dLmNvbmNhdChpKSl9LGUuZGF0ZXBpY2tlcj1uZXcgaSxlLmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWQ9ITEsZS5kYXRlcGlja2VyLnV1aWQ9KG5ldyBEYXRlKS5nZXRUaW1lKCksZS5kYXRlcGlja2VyLnZlcnNpb249XCIxLjEwLjNcIn0pKGpRdWVyeSk7KGZ1bmN0aW9uKGUpe3ZhciB0PXtidXR0b25zOiEwLGhlaWdodDohMCxtYXhIZWlnaHQ6ITAsbWF4V2lkdGg6ITAsbWluSGVpZ2h0OiEwLG1pbldpZHRoOiEwLHdpZHRoOiEwfSxpPXttYXhIZWlnaHQ6ITAsbWF4V2lkdGg6ITAsbWluSGVpZ2h0OiEwLG1pbldpZHRoOiEwfTtlLndpZGdldChcInVpLmRpYWxvZ1wiLHt2ZXJzaW9uOlwiMS4xMC4zXCIsb3B0aW9uczp7YXBwZW5kVG86XCJib2R5XCIsYXV0b09wZW46ITAsYnV0dG9uczpbXSxjbG9zZU9uRXNjYXBlOiEwLGNsb3NlVGV4dDpcImNsb3NlXCIsZGlhbG9nQ2xhc3M6XCJcIixkcmFnZ2FibGU6ITAsaGlkZTpudWxsLGhlaWdodDpcImF1dG9cIixtYXhIZWlnaHQ6bnVsbCxtYXhXaWR0aDpudWxsLG1pbkhlaWdodDoxNTAsbWluV2lkdGg6MTUwLG1vZGFsOiExLHBvc2l0aW9uOntteTpcImNlbnRlclwiLGF0OlwiY2VudGVyXCIsb2Y6d2luZG93LGNvbGxpc2lvbjpcImZpdFwiLHVzaW5nOmZ1bmN0aW9uKHQpe3ZhciBpPWUodGhpcykuY3NzKHQpLm9mZnNldCgpLnRvcDswPmkmJmUodGhpcykuY3NzKFwidG9wXCIsdC50b3AtaSl9fSxyZXNpemFibGU6ITAsc2hvdzpudWxsLHRpdGxlOm51bGwsd2lkdGg6MzAwLGJlZm9yZUNsb3NlOm51bGwsY2xvc2U6bnVsbCxkcmFnOm51bGwsZHJhZ1N0YXJ0Om51bGwsZHJhZ1N0b3A6bnVsbCxmb2N1czpudWxsLG9wZW46bnVsbCxyZXNpemU6bnVsbCxyZXNpemVTdGFydDpudWxsLHJlc2l6ZVN0b3A6bnVsbH0sX2NyZWF0ZTpmdW5jdGlvbigpe3RoaXMub3JpZ2luYWxDc3M9e2Rpc3BsYXk6dGhpcy5lbGVtZW50WzBdLnN0eWxlLmRpc3BsYXksd2lkdGg6dGhpcy5lbGVtZW50WzBdLnN0eWxlLndpZHRoLG1pbkhlaWdodDp0aGlzLmVsZW1lbnRbMF0uc3R5bGUubWluSGVpZ2h0LG1heEhlaWdodDp0aGlzLmVsZW1lbnRbMF0uc3R5bGUubWF4SGVpZ2h0LGhlaWdodDp0aGlzLmVsZW1lbnRbMF0uc3R5bGUuaGVpZ2h0fSx0aGlzLm9yaWdpbmFsUG9zaXRpb249e3BhcmVudDp0aGlzLmVsZW1lbnQucGFyZW50KCksaW5kZXg6dGhpcy5lbGVtZW50LnBhcmVudCgpLmNoaWxkcmVuKCkuaW5kZXgodGhpcy5lbGVtZW50KX0sdGhpcy5vcmlnaW5hbFRpdGxlPXRoaXMuZWxlbWVudC5hdHRyKFwidGl0bGVcIiksdGhpcy5vcHRpb25zLnRpdGxlPXRoaXMub3B0aW9ucy50aXRsZXx8dGhpcy5vcmlnaW5hbFRpdGxlLHRoaXMuX2NyZWF0ZVdyYXBwZXIoKSx0aGlzLmVsZW1lbnQuc2hvdygpLnJlbW92ZUF0dHIoXCJ0aXRsZVwiKS5hZGRDbGFzcyhcInVpLWRpYWxvZy1jb250ZW50IHVpLXdpZGdldC1jb250ZW50XCIpLmFwcGVuZFRvKHRoaXMudWlEaWFsb2cpLHRoaXMuX2NyZWF0ZVRpdGxlYmFyKCksdGhpcy5fY3JlYXRlQnV0dG9uUGFuZSgpLHRoaXMub3B0aW9ucy5kcmFnZ2FibGUmJmUuZm4uZHJhZ2dhYmxlJiZ0aGlzLl9tYWtlRHJhZ2dhYmxlKCksdGhpcy5vcHRpb25zLnJlc2l6YWJsZSYmZS5mbi5yZXNpemFibGUmJnRoaXMuX21ha2VSZXNpemFibGUoKSx0aGlzLl9pc09wZW49ITF9LF9pbml0OmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmF1dG9PcGVuJiZ0aGlzLm9wZW4oKX0sX2FwcGVuZFRvOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLmFwcGVuZFRvO3JldHVybiB0JiYodC5qcXVlcnl8fHQubm9kZVR5cGUpP2UodCk6dGhpcy5kb2N1bWVudC5maW5kKHR8fFwiYm9keVwiKS5lcSgwKX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMub3JpZ2luYWxQb3NpdGlvbjt0aGlzLl9kZXN0cm95T3ZlcmxheSgpLHRoaXMuZWxlbWVudC5yZW1vdmVVbmlxdWVJZCgpLnJlbW92ZUNsYXNzKFwidWktZGlhbG9nLWNvbnRlbnQgdWktd2lkZ2V0LWNvbnRlbnRcIikuY3NzKHRoaXMub3JpZ2luYWxDc3MpLmRldGFjaCgpLHRoaXMudWlEaWFsb2cuc3RvcCghMCwhMCkucmVtb3ZlKCksdGhpcy5vcmlnaW5hbFRpdGxlJiZ0aGlzLmVsZW1lbnQuYXR0cihcInRpdGxlXCIsdGhpcy5vcmlnaW5hbFRpdGxlKSxlPXQucGFyZW50LmNoaWxkcmVuKCkuZXEodC5pbmRleCksZS5sZW5ndGgmJmVbMF0hPT10aGlzLmVsZW1lbnRbMF0/ZS5iZWZvcmUodGhpcy5lbGVtZW50KTp0LnBhcmVudC5hcHBlbmQodGhpcy5lbGVtZW50KX0sd2lkZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudWlEaWFsb2d9LGRpc2FibGU6ZS5ub29wLGVuYWJsZTplLm5vb3AsY2xvc2U6ZnVuY3Rpb24odCl7dmFyIGk9dGhpczt0aGlzLl9pc09wZW4mJnRoaXMuX3RyaWdnZXIoXCJiZWZvcmVDbG9zZVwiLHQpIT09ITEmJih0aGlzLl9pc09wZW49ITEsdGhpcy5fZGVzdHJveU92ZXJsYXkoKSx0aGlzLm9wZW5lci5maWx0ZXIoXCI6Zm9jdXNhYmxlXCIpLmZvY3VzKCkubGVuZ3RofHxlKHRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCkuYmx1cigpLHRoaXMuX2hpZGUodGhpcy51aURpYWxvZyx0aGlzLm9wdGlvbnMuaGlkZSxmdW5jdGlvbigpe2kuX3RyaWdnZXIoXCJjbG9zZVwiLHQpfSkpfSxpc09wZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNPcGVufSxtb3ZlVG9Ub3A6ZnVuY3Rpb24oKXt0aGlzLl9tb3ZlVG9Ub3AoKX0sX21vdmVUb1RvcDpmdW5jdGlvbihlLHQpe3ZhciBpPSEhdGhpcy51aURpYWxvZy5uZXh0QWxsKFwiOnZpc2libGVcIikuaW5zZXJ0QmVmb3JlKHRoaXMudWlEaWFsb2cpLmxlbmd0aDtyZXR1cm4gaSYmIXQmJnRoaXMuX3RyaWdnZXIoXCJmb2N1c1wiLGUpLGl9LG9wZW46ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLl9pc09wZW4/KHRoaXMuX21vdmVUb1RvcCgpJiZ0aGlzLl9mb2N1c1RhYmJhYmxlKCksdW5kZWZpbmVkKToodGhpcy5faXNPcGVuPSEwLHRoaXMub3BlbmVyPWUodGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50KSx0aGlzLl9zaXplKCksdGhpcy5fcG9zaXRpb24oKSx0aGlzLl9jcmVhdGVPdmVybGF5KCksdGhpcy5fbW92ZVRvVG9wKG51bGwsITApLHRoaXMuX3Nob3codGhpcy51aURpYWxvZyx0aGlzLm9wdGlvbnMuc2hvdyxmdW5jdGlvbigpe3QuX2ZvY3VzVGFiYmFibGUoKSx0Ll90cmlnZ2VyKFwiZm9jdXNcIil9KSx0aGlzLl90cmlnZ2VyKFwib3BlblwiKSx1bmRlZmluZWQpfSxfZm9jdXNUYWJiYWJsZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZWxlbWVudC5maW5kKFwiW2F1dG9mb2N1c11cIik7ZS5sZW5ndGh8fChlPXRoaXMuZWxlbWVudC5maW5kKFwiOnRhYmJhYmxlXCIpKSxlLmxlbmd0aHx8KGU9dGhpcy51aURpYWxvZ0J1dHRvblBhbmUuZmluZChcIjp0YWJiYWJsZVwiKSksZS5sZW5ndGh8fChlPXRoaXMudWlEaWFsb2dUaXRsZWJhckNsb3NlLmZpbHRlcihcIjp0YWJiYWJsZVwiKSksZS5sZW5ndGh8fChlPXRoaXMudWlEaWFsb2cpLGUuZXEoMCkuZm9jdXMoKX0sX2tlZXBGb2N1czpmdW5jdGlvbih0KXtmdW5jdGlvbiBpKCl7dmFyIHQ9dGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50LGk9dGhpcy51aURpYWxvZ1swXT09PXR8fGUuY29udGFpbnModGhpcy51aURpYWxvZ1swXSx0KTtpfHx0aGlzLl9mb2N1c1RhYmJhYmxlKCl9dC5wcmV2ZW50RGVmYXVsdCgpLGkuY2FsbCh0aGlzKSx0aGlzLl9kZWxheShpKX0sX2NyZWF0ZVdyYXBwZXI6ZnVuY3Rpb24oKXt0aGlzLnVpRGlhbG9nPWUoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcInVpLWRpYWxvZyB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCB1aS1mcm9udCBcIit0aGlzLm9wdGlvbnMuZGlhbG9nQ2xhc3MpLmhpZGUoKS5hdHRyKHt0YWJJbmRleDotMSxyb2xlOlwiZGlhbG9nXCJ9KS5hcHBlbmRUbyh0aGlzLl9hcHBlbmRUbygpKSx0aGlzLl9vbih0aGlzLnVpRGlhbG9nLHtrZXlkb3duOmZ1bmN0aW9uKHQpe2lmKHRoaXMub3B0aW9ucy5jbG9zZU9uRXNjYXBlJiYhdC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmdC5rZXlDb2RlJiZ0LmtleUNvZGU9PT1lLnVpLmtleUNvZGUuRVNDQVBFKXJldHVybiB0LnByZXZlbnREZWZhdWx0KCksdGhpcy5jbG9zZSh0KSx1bmRlZmluZWQ7aWYodC5rZXlDb2RlPT09ZS51aS5rZXlDb2RlLlRBQil7dmFyIGk9dGhpcy51aURpYWxvZy5maW5kKFwiOnRhYmJhYmxlXCIpLGE9aS5maWx0ZXIoXCI6Zmlyc3RcIikscz1pLmZpbHRlcihcIjpsYXN0XCIpO3QudGFyZ2V0IT09c1swXSYmdC50YXJnZXQhPT10aGlzLnVpRGlhbG9nWzBdfHx0LnNoaWZ0S2V5P3QudGFyZ2V0IT09YVswXSYmdC50YXJnZXQhPT10aGlzLnVpRGlhbG9nWzBdfHwhdC5zaGlmdEtleXx8KHMuZm9jdXMoMSksdC5wcmV2ZW50RGVmYXVsdCgpKTooYS5mb2N1cygxKSx0LnByZXZlbnREZWZhdWx0KCkpfX0sbW91c2Vkb3duOmZ1bmN0aW9uKGUpe3RoaXMuX21vdmVUb1RvcChlKSYmdGhpcy5fZm9jdXNUYWJiYWJsZSgpfX0pLHRoaXMuZWxlbWVudC5maW5kKFwiW2FyaWEtZGVzY3JpYmVkYnldXCIpLmxlbmd0aHx8dGhpcy51aURpYWxvZy5hdHRyKHtcImFyaWEtZGVzY3JpYmVkYnlcIjp0aGlzLmVsZW1lbnQudW5pcXVlSWQoKS5hdHRyKFwiaWRcIil9KX0sX2NyZWF0ZVRpdGxlYmFyOmZ1bmN0aW9uKCl7dmFyIHQ7dGhpcy51aURpYWxvZ1RpdGxlYmFyPWUoXCI8ZGl2PlwiKS5hZGRDbGFzcyhcInVpLWRpYWxvZy10aXRsZWJhciB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGwgdWktaGVscGVyLWNsZWFyZml4XCIpLnByZXBlbmRUbyh0aGlzLnVpRGlhbG9nKSx0aGlzLl9vbih0aGlzLnVpRGlhbG9nVGl0bGViYXIse21vdXNlZG93bjpmdW5jdGlvbih0KXtlKHQudGFyZ2V0KS5jbG9zZXN0KFwiLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZVwiKXx8dGhpcy51aURpYWxvZy5mb2N1cygpfX0pLHRoaXMudWlEaWFsb2dUaXRsZWJhckNsb3NlPWUoXCI8YnV0dG9uPjwvYnV0dG9uPlwiKS5idXR0b24oe2xhYmVsOnRoaXMub3B0aW9ucy5jbG9zZVRleHQsaWNvbnM6e3ByaW1hcnk6XCJ1aS1pY29uLWNsb3NldGhpY2tcIn0sdGV4dDohMX0pLmFkZENsYXNzKFwidWktZGlhbG9nLXRpdGxlYmFyLWNsb3NlXCIpLmFwcGVuZFRvKHRoaXMudWlEaWFsb2dUaXRsZWJhciksdGhpcy5fb24odGhpcy51aURpYWxvZ1RpdGxlYmFyQ2xvc2Use2NsaWNrOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKSx0aGlzLmNsb3NlKGUpfX0pLHQ9ZShcIjxzcGFuPlwiKS51bmlxdWVJZCgpLmFkZENsYXNzKFwidWktZGlhbG9nLXRpdGxlXCIpLnByZXBlbmRUbyh0aGlzLnVpRGlhbG9nVGl0bGViYXIpLHRoaXMuX3RpdGxlKHQpLHRoaXMudWlEaWFsb2cuYXR0cih7XCJhcmlhLWxhYmVsbGVkYnlcIjp0LmF0dHIoXCJpZFwiKX0pfSxfdGl0bGU6ZnVuY3Rpb24oZSl7dGhpcy5vcHRpb25zLnRpdGxlfHxlLmh0bWwoXCImIzE2MDtcIiksZS50ZXh0KHRoaXMub3B0aW9ucy50aXRsZSl9LF9jcmVhdGVCdXR0b25QYW5lOmZ1bmN0aW9uKCl7dGhpcy51aURpYWxvZ0J1dHRvblBhbmU9ZShcIjxkaXY+XCIpLmFkZENsYXNzKFwidWktZGlhbG9nLWJ1dHRvbnBhbmUgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4XCIpLHRoaXMudWlCdXR0b25TZXQ9ZShcIjxkaXY+XCIpLmFkZENsYXNzKFwidWktZGlhbG9nLWJ1dHRvbnNldFwiKS5hcHBlbmRUbyh0aGlzLnVpRGlhbG9nQnV0dG9uUGFuZSksdGhpcy5fY3JlYXRlQnV0dG9ucygpfSxfY3JlYXRlQnV0dG9uczpmdW5jdGlvbigpe3ZhciB0PXRoaXMsaT10aGlzLm9wdGlvbnMuYnV0dG9ucztyZXR1cm4gdGhpcy51aURpYWxvZ0J1dHRvblBhbmUucmVtb3ZlKCksdGhpcy51aUJ1dHRvblNldC5lbXB0eSgpLGUuaXNFbXB0eU9iamVjdChpKXx8ZS5pc0FycmF5KGkpJiYhaS5sZW5ndGg/KHRoaXMudWlEaWFsb2cucmVtb3ZlQ2xhc3MoXCJ1aS1kaWFsb2ctYnV0dG9uc1wiKSx1bmRlZmluZWQpOihlLmVhY2goaSxmdW5jdGlvbihpLGEpe3ZhciBzLG47YT1lLmlzRnVuY3Rpb24oYSk/e2NsaWNrOmEsdGV4dDppfTphLGE9ZS5leHRlbmQoe3R5cGU6XCJidXR0b25cIn0sYSkscz1hLmNsaWNrLGEuY2xpY2s9ZnVuY3Rpb24oKXtzLmFwcGx5KHQuZWxlbWVudFswXSxhcmd1bWVudHMpfSxuPXtpY29uczphLmljb25zLHRleHQ6YS5zaG93VGV4dH0sZGVsZXRlIGEuaWNvbnMsZGVsZXRlIGEuc2hvd1RleHQsZShcIjxidXR0b24+PC9idXR0b24+XCIsYSkuYnV0dG9uKG4pLmFwcGVuZFRvKHQudWlCdXR0b25TZXQpfSksdGhpcy51aURpYWxvZy5hZGRDbGFzcyhcInVpLWRpYWxvZy1idXR0b25zXCIpLHRoaXMudWlEaWFsb2dCdXR0b25QYW5lLmFwcGVuZFRvKHRoaXMudWlEaWFsb2cpLHVuZGVmaW5lZCl9LF9tYWtlRHJhZ2dhYmxlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtyZXR1cm57cG9zaXRpb246ZS5wb3NpdGlvbixvZmZzZXQ6ZS5vZmZzZXR9fXZhciBpPXRoaXMsYT10aGlzLm9wdGlvbnM7dGhpcy51aURpYWxvZy5kcmFnZ2FibGUoe2NhbmNlbDpcIi51aS1kaWFsb2ctY29udGVudCwgLnVpLWRpYWxvZy10aXRsZWJhci1jbG9zZVwiLGhhbmRsZTpcIi51aS1kaWFsb2ctdGl0bGViYXJcIixjb250YWlubWVudDpcImRvY3VtZW50XCIsc3RhcnQ6ZnVuY3Rpb24oYSxzKXtlKHRoaXMpLmFkZENsYXNzKFwidWktZGlhbG9nLWRyYWdnaW5nXCIpLGkuX2Jsb2NrRnJhbWVzKCksaS5fdHJpZ2dlcihcImRyYWdTdGFydFwiLGEsdChzKSl9LGRyYWc6ZnVuY3Rpb24oZSxhKXtpLl90cmlnZ2VyKFwiZHJhZ1wiLGUsdChhKSl9LHN0b3A6ZnVuY3Rpb24ocyxuKXthLnBvc2l0aW9uPVtuLnBvc2l0aW9uLmxlZnQtaS5kb2N1bWVudC5zY3JvbGxMZWZ0KCksbi5wb3NpdGlvbi50b3AtaS5kb2N1bWVudC5zY3JvbGxUb3AoKV0sZSh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLWRpYWxvZy1kcmFnZ2luZ1wiKSxpLl91bmJsb2NrRnJhbWVzKCksaS5fdHJpZ2dlcihcImRyYWdTdG9wXCIscyx0KG4pKX19KX0sX21ha2VSZXNpemFibGU6ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3JldHVybntvcmlnaW5hbFBvc2l0aW9uOmUub3JpZ2luYWxQb3NpdGlvbixvcmlnaW5hbFNpemU6ZS5vcmlnaW5hbFNpemUscG9zaXRpb246ZS5wb3NpdGlvbixzaXplOmUuc2l6ZX19dmFyIGk9dGhpcyxhPXRoaXMub3B0aW9ucyxzPWEucmVzaXphYmxlLG49dGhpcy51aURpYWxvZy5jc3MoXCJwb3NpdGlvblwiKSxyPVwic3RyaW5nXCI9PXR5cGVvZiBzP3M6XCJuLGUscyx3LHNlLHN3LG5lLG53XCI7dGhpcy51aURpYWxvZy5yZXNpemFibGUoe2NhbmNlbDpcIi51aS1kaWFsb2ctY29udGVudFwiLGNvbnRhaW5tZW50OlwiZG9jdW1lbnRcIixhbHNvUmVzaXplOnRoaXMuZWxlbWVudCxtYXhXaWR0aDphLm1heFdpZHRoLG1heEhlaWdodDphLm1heEhlaWdodCxtaW5XaWR0aDphLm1pbldpZHRoLG1pbkhlaWdodDp0aGlzLl9taW5IZWlnaHQoKSxoYW5kbGVzOnIsc3RhcnQ6ZnVuY3Rpb24oYSxzKXtlKHRoaXMpLmFkZENsYXNzKFwidWktZGlhbG9nLXJlc2l6aW5nXCIpLGkuX2Jsb2NrRnJhbWVzKCksaS5fdHJpZ2dlcihcInJlc2l6ZVN0YXJ0XCIsYSx0KHMpKX0scmVzaXplOmZ1bmN0aW9uKGUsYSl7aS5fdHJpZ2dlcihcInJlc2l6ZVwiLGUsdChhKSl9LHN0b3A6ZnVuY3Rpb24ocyxuKXthLmhlaWdodD1lKHRoaXMpLmhlaWdodCgpLGEud2lkdGg9ZSh0aGlzKS53aWR0aCgpLGUodGhpcykucmVtb3ZlQ2xhc3MoXCJ1aS1kaWFsb2ctcmVzaXppbmdcIiksaS5fdW5ibG9ja0ZyYW1lcygpLGkuX3RyaWdnZXIoXCJyZXNpemVTdG9wXCIscyx0KG4pKX19KS5jc3MoXCJwb3NpdGlvblwiLG4pfSxfbWluSGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zO3JldHVyblwiYXV0b1wiPT09ZS5oZWlnaHQ/ZS5taW5IZWlnaHQ6TWF0aC5taW4oZS5taW5IZWlnaHQsZS5oZWlnaHQpfSxfcG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnVpRGlhbG9nLmlzKFwiOnZpc2libGVcIik7ZXx8dGhpcy51aURpYWxvZy5zaG93KCksdGhpcy51aURpYWxvZy5wb3NpdGlvbih0aGlzLm9wdGlvbnMucG9zaXRpb24pLGV8fHRoaXMudWlEaWFsb2cuaGlkZSgpfSxfc2V0T3B0aW9uczpmdW5jdGlvbihhKXt2YXIgcz10aGlzLG49ITEscj17fTtlLmVhY2goYSxmdW5jdGlvbihlLGEpe3MuX3NldE9wdGlvbihlLGEpLGUgaW4gdCYmKG49ITApLGUgaW4gaSYmKHJbZV09YSl9KSxuJiYodGhpcy5fc2l6ZSgpLHRoaXMuX3Bvc2l0aW9uKCkpLHRoaXMudWlEaWFsb2cuaXMoXCI6ZGF0YSh1aS1yZXNpemFibGUpXCIpJiZ0aGlzLnVpRGlhbG9nLnJlc2l6YWJsZShcIm9wdGlvblwiLHIpfSxfc2V0T3B0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIGksYSxzPXRoaXMudWlEaWFsb2c7XCJkaWFsb2dDbGFzc1wiPT09ZSYmcy5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuZGlhbG9nQ2xhc3MpLmFkZENsYXNzKHQpLFwiZGlzYWJsZWRcIiE9PWUmJih0aGlzLl9zdXBlcihlLHQpLFwiYXBwZW5kVG9cIj09PWUmJnRoaXMudWlEaWFsb2cuYXBwZW5kVG8odGhpcy5fYXBwZW5kVG8oKSksXCJidXR0b25zXCI9PT1lJiZ0aGlzLl9jcmVhdGVCdXR0b25zKCksXCJjbG9zZVRleHRcIj09PWUmJnRoaXMudWlEaWFsb2dUaXRsZWJhckNsb3NlLmJ1dHRvbih7bGFiZWw6XCJcIit0fSksXCJkcmFnZ2FibGVcIj09PWUmJihpPXMuaXMoXCI6ZGF0YSh1aS1kcmFnZ2FibGUpXCIpLGkmJiF0JiZzLmRyYWdnYWJsZShcImRlc3Ryb3lcIiksIWkmJnQmJnRoaXMuX21ha2VEcmFnZ2FibGUoKSksXCJwb3NpdGlvblwiPT09ZSYmdGhpcy5fcG9zaXRpb24oKSxcInJlc2l6YWJsZVwiPT09ZSYmKGE9cy5pcyhcIjpkYXRhKHVpLXJlc2l6YWJsZSlcIiksYSYmIXQmJnMucmVzaXphYmxlKFwiZGVzdHJveVwiKSxhJiZcInN0cmluZ1wiPT10eXBlb2YgdCYmcy5yZXNpemFibGUoXCJvcHRpb25cIixcImhhbmRsZXNcIix0KSxhfHx0PT09ITF8fHRoaXMuX21ha2VSZXNpemFibGUoKSksXCJ0aXRsZVwiPT09ZSYmdGhpcy5fdGl0bGUodGhpcy51aURpYWxvZ1RpdGxlYmFyLmZpbmQoXCIudWktZGlhbG9nLXRpdGxlXCIpKSl9LF9zaXplOmZ1bmN0aW9uKCl7dmFyIGUsdCxpLGE9dGhpcy5vcHRpb25zO3RoaXMuZWxlbWVudC5zaG93KCkuY3NzKHt3aWR0aDpcImF1dG9cIixtaW5IZWlnaHQ6MCxtYXhIZWlnaHQ6XCJub25lXCIsaGVpZ2h0OjB9KSxhLm1pbldpZHRoPmEud2lkdGgmJihhLndpZHRoPWEubWluV2lkdGgpLGU9dGhpcy51aURpYWxvZy5jc3Moe2hlaWdodDpcImF1dG9cIix3aWR0aDphLndpZHRofSkub3V0ZXJIZWlnaHQoKSx0PU1hdGgubWF4KDAsYS5taW5IZWlnaHQtZSksaT1cIm51bWJlclwiPT10eXBlb2YgYS5tYXhIZWlnaHQ/TWF0aC5tYXgoMCxhLm1heEhlaWdodC1lKTpcIm5vbmVcIixcImF1dG9cIj09PWEuaGVpZ2h0P3RoaXMuZWxlbWVudC5jc3Moe21pbkhlaWdodDp0LG1heEhlaWdodDppLGhlaWdodDpcImF1dG9cIn0pOnRoaXMuZWxlbWVudC5oZWlnaHQoTWF0aC5tYXgoMCxhLmhlaWdodC1lKSksdGhpcy51aURpYWxvZy5pcyhcIjpkYXRhKHVpLXJlc2l6YWJsZSlcIikmJnRoaXMudWlEaWFsb2cucmVzaXphYmxlKFwib3B0aW9uXCIsXCJtaW5IZWlnaHRcIix0aGlzLl9taW5IZWlnaHQoKSl9LF9ibG9ja0ZyYW1lczpmdW5jdGlvbigpe3RoaXMuaWZyYW1lQmxvY2tzPXRoaXMuZG9jdW1lbnQuZmluZChcImlmcmFtZVwiKS5tYXAoZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpO3JldHVybiBlKFwiPGRpdj5cIikuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsd2lkdGg6dC5vdXRlcldpZHRoKCksaGVpZ2h0OnQub3V0ZXJIZWlnaHQoKX0pLmFwcGVuZFRvKHQucGFyZW50KCkpLm9mZnNldCh0Lm9mZnNldCgpKVswXX0pfSxfdW5ibG9ja0ZyYW1lczpmdW5jdGlvbigpe3RoaXMuaWZyYW1lQmxvY2tzJiYodGhpcy5pZnJhbWVCbG9ja3MucmVtb3ZlKCksZGVsZXRlIHRoaXMuaWZyYW1lQmxvY2tzKX0sX2FsbG93SW50ZXJhY3Rpb246ZnVuY3Rpb24odCl7cmV0dXJuIGUodC50YXJnZXQpLmNsb3Nlc3QoXCIudWktZGlhbG9nXCIpLmxlbmd0aD8hMDohIWUodC50YXJnZXQpLmNsb3Nlc3QoXCIudWktZGF0ZXBpY2tlclwiKS5sZW5ndGh9LF9jcmVhdGVPdmVybGF5OmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLm1vZGFsKXt2YXIgdD10aGlzLGk9dGhpcy53aWRnZXRGdWxsTmFtZTtlLnVpLmRpYWxvZy5vdmVybGF5SW5zdGFuY2VzfHx0aGlzLl9kZWxheShmdW5jdGlvbigpe2UudWkuZGlhbG9nLm92ZXJsYXlJbnN0YW5jZXMmJnRoaXMuZG9jdW1lbnQuYmluZChcImZvY3VzaW4uZGlhbG9nXCIsZnVuY3Rpb24oYSl7dC5fYWxsb3dJbnRlcmFjdGlvbihhKXx8KGEucHJldmVudERlZmF1bHQoKSxlKFwiLnVpLWRpYWxvZzp2aXNpYmxlOmxhc3QgLnVpLWRpYWxvZy1jb250ZW50XCIpLmRhdGEoaSkuX2ZvY3VzVGFiYmFibGUoKSl9KX0pLHRoaXMub3ZlcmxheT1lKFwiPGRpdj5cIikuYWRkQ2xhc3MoXCJ1aS13aWRnZXQtb3ZlcmxheSB1aS1mcm9udFwiKS5hcHBlbmRUbyh0aGlzLl9hcHBlbmRUbygpKSx0aGlzLl9vbih0aGlzLm92ZXJsYXkse21vdXNlZG93bjpcIl9rZWVwRm9jdXNcIn0pLGUudWkuZGlhbG9nLm92ZXJsYXlJbnN0YW5jZXMrK319LF9kZXN0cm95T3ZlcmxheTpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5tb2RhbCYmdGhpcy5vdmVybGF5JiYoZS51aS5kaWFsb2cub3ZlcmxheUluc3RhbmNlcy0tLGUudWkuZGlhbG9nLm92ZXJsYXlJbnN0YW5jZXN8fHRoaXMuZG9jdW1lbnQudW5iaW5kKFwiZm9jdXNpbi5kaWFsb2dcIiksdGhpcy5vdmVybGF5LnJlbW92ZSgpLHRoaXMub3ZlcmxheT1udWxsKX19KSxlLnVpLmRpYWxvZy5vdmVybGF5SW5zdGFuY2VzPTAsZS51aUJhY2tDb21wYXQhPT0hMSYmZS53aWRnZXQoXCJ1aS5kaWFsb2dcIixlLnVpLmRpYWxvZyx7X3Bvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIHQsaT10aGlzLm9wdGlvbnMucG9zaXRpb24sYT1bXSxzPVswLDBdO2k/KChcInN0cmluZ1wiPT10eXBlb2YgaXx8XCJvYmplY3RcIj09dHlwZW9mIGkmJlwiMFwiaW4gaSkmJihhPWkuc3BsaXQ/aS5zcGxpdChcIiBcIik6W2lbMF0saVsxXV0sMT09PWEubGVuZ3RoJiYoYVsxXT1hWzBdKSxlLmVhY2goW1wibGVmdFwiLFwidG9wXCJdLGZ1bmN0aW9uKGUsdCl7K2FbZV09PT1hW2VdJiYoc1tlXT1hW2VdLGFbZV09dCl9KSxpPXtteTphWzBdKygwPnNbMF0/c1swXTpcIitcIitzWzBdKStcIiBcIithWzFdKygwPnNbMV0/c1sxXTpcIitcIitzWzFdKSxhdDphLmpvaW4oXCIgXCIpfSksaT1lLmV4dGVuZCh7fSxlLnVpLmRpYWxvZy5wcm90b3R5cGUub3B0aW9ucy5wb3NpdGlvbixpKSk6aT1lLnVpLmRpYWxvZy5wcm90b3R5cGUub3B0aW9ucy5wb3NpdGlvbix0PXRoaXMudWlEaWFsb2cuaXMoXCI6dmlzaWJsZVwiKSx0fHx0aGlzLnVpRGlhbG9nLnNob3coKSx0aGlzLnVpRGlhbG9nLnBvc2l0aW9uKGkpLHR8fHRoaXMudWlEaWFsb2cuaGlkZSgpfX0pfSkoalF1ZXJ5KTsoZnVuY3Rpb24oZSl7ZS53aWRnZXQoXCJ1aS5tZW51XCIse3ZlcnNpb246XCIxLjEwLjNcIixkZWZhdWx0RWxlbWVudDpcIjx1bD5cIixkZWxheTozMDAsb3B0aW9uczp7aWNvbnM6e3N1Ym1lbnU6XCJ1aS1pY29uLWNhcmF0LTEtZVwifSxtZW51czpcInVsXCIscG9zaXRpb246e215OlwibGVmdCB0b3BcIixhdDpcInJpZ2h0IHRvcFwifSxyb2xlOlwibWVudVwiLGJsdXI6bnVsbCxmb2N1czpudWxsLHNlbGVjdDpudWxsfSxfY3JlYXRlOmZ1bmN0aW9uKCl7dGhpcy5hY3RpdmVNZW51PXRoaXMuZWxlbWVudCx0aGlzLm1vdXNlSGFuZGxlZD0hMSx0aGlzLmVsZW1lbnQudW5pcXVlSWQoKS5hZGRDbGFzcyhcInVpLW1lbnUgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGxcIikudG9nZ2xlQ2xhc3MoXCJ1aS1tZW51LWljb25zXCIsISF0aGlzLmVsZW1lbnQuZmluZChcIi51aS1pY29uXCIpLmxlbmd0aCkuYXR0cih7cm9sZTp0aGlzLm9wdGlvbnMucm9sZSx0YWJJbmRleDowfSkuYmluZChcImNsaWNrXCIrdGhpcy5ldmVudE5hbWVzcGFjZSxlLnByb3h5KGZ1bmN0aW9uKGUpe3RoaXMub3B0aW9ucy5kaXNhYmxlZCYmZS5wcmV2ZW50RGVmYXVsdCgpfSx0aGlzKSksdGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiKS5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLFwidHJ1ZVwiKSx0aGlzLl9vbih7XCJtb3VzZWRvd24gLnVpLW1lbnUtaXRlbSA+IGFcIjpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9LFwiY2xpY2sgLnVpLXN0YXRlLWRpc2FibGVkID4gYVwiOmZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQoKX0sXCJjbGljayAudWktbWVudS1pdGVtOmhhcyhhKVwiOmZ1bmN0aW9uKHQpe3ZhciBpPWUodC50YXJnZXQpLmNsb3Nlc3QoXCIudWktbWVudS1pdGVtXCIpOyF0aGlzLm1vdXNlSGFuZGxlZCYmaS5ub3QoXCIudWktc3RhdGUtZGlzYWJsZWRcIikubGVuZ3RoJiYodGhpcy5tb3VzZUhhbmRsZWQ9ITAsdGhpcy5zZWxlY3QodCksaS5oYXMoXCIudWktbWVudVwiKS5sZW5ndGg/dGhpcy5leHBhbmQodCk6dGhpcy5lbGVtZW50LmlzKFwiOmZvY3VzXCIpfHwodGhpcy5lbGVtZW50LnRyaWdnZXIoXCJmb2N1c1wiLFshMF0pLHRoaXMuYWN0aXZlJiYxPT09dGhpcy5hY3RpdmUucGFyZW50cyhcIi51aS1tZW51XCIpLmxlbmd0aCYmY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpKSl9LFwibW91c2VlbnRlciAudWktbWVudS1pdGVtXCI6ZnVuY3Rpb24odCl7dmFyIGk9ZSh0LmN1cnJlbnRUYXJnZXQpO2kuc2libGluZ3MoKS5jaGlsZHJlbihcIi51aS1zdGF0ZS1hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1hY3RpdmVcIiksdGhpcy5mb2N1cyh0LGkpfSxtb3VzZWxlYXZlOlwiY29sbGFwc2VBbGxcIixcIm1vdXNlbGVhdmUgLnVpLW1lbnVcIjpcImNvbGxhcHNlQWxsXCIsZm9jdXM6ZnVuY3Rpb24oZSx0KXt2YXIgaT10aGlzLmFjdGl2ZXx8dGhpcy5lbGVtZW50LmNoaWxkcmVuKFwiLnVpLW1lbnUtaXRlbVwiKS5lcSgwKTt0fHx0aGlzLmZvY3VzKGUsaSl9LGJsdXI6ZnVuY3Rpb24odCl7dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXtlLmNvbnRhaW5zKHRoaXMuZWxlbWVudFswXSx0aGlzLmRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQpfHx0aGlzLmNvbGxhcHNlQWxsKHQpfSl9LGtleWRvd246XCJfa2V5ZG93blwifSksdGhpcy5yZWZyZXNoKCksdGhpcy5fb24odGhpcy5kb2N1bWVudCx7Y2xpY2s6ZnVuY3Rpb24odCl7ZSh0LnRhcmdldCkuY2xvc2VzdChcIi51aS1tZW51XCIpLmxlbmd0aHx8dGhpcy5jb2xsYXBzZUFsbCh0KSx0aGlzLm1vdXNlSGFuZGxlZD0hMX19KX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKS5maW5kKFwiLnVpLW1lbnVcIikuYWRkQmFjaygpLnJlbW92ZUNsYXNzKFwidWktbWVudSB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCB1aS1tZW51LWljb25zXCIpLnJlbW92ZUF0dHIoXCJyb2xlXCIpLnJlbW92ZUF0dHIoXCJ0YWJJbmRleFwiKS5yZW1vdmVBdHRyKFwiYXJpYS1sYWJlbGxlZGJ5XCIpLnJlbW92ZUF0dHIoXCJhcmlhLWV4cGFuZGVkXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWhpZGRlblwiKS5yZW1vdmVBdHRyKFwiYXJpYS1kaXNhYmxlZFwiKS5yZW1vdmVVbmlxdWVJZCgpLnNob3coKSx0aGlzLmVsZW1lbnQuZmluZChcIi51aS1tZW51LWl0ZW1cIikucmVtb3ZlQ2xhc3MoXCJ1aS1tZW51LWl0ZW1cIikucmVtb3ZlQXR0cihcInJvbGVcIikucmVtb3ZlQXR0cihcImFyaWEtZGlzYWJsZWRcIikuY2hpbGRyZW4oXCJhXCIpLnJlbW92ZVVuaXF1ZUlkKCkucmVtb3ZlQ2xhc3MoXCJ1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWhvdmVyXCIpLnJlbW92ZUF0dHIoXCJ0YWJJbmRleFwiKS5yZW1vdmVBdHRyKFwicm9sZVwiKS5yZW1vdmVBdHRyKFwiYXJpYS1oYXNwb3B1cFwiKS5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpO3QuZGF0YShcInVpLW1lbnUtc3VibWVudS1jYXJhdFwiKSYmdC5yZW1vdmUoKX0pLHRoaXMuZWxlbWVudC5maW5kKFwiLnVpLW1lbnUtZGl2aWRlclwiKS5yZW1vdmVDbGFzcyhcInVpLW1lbnUtZGl2aWRlciB1aS13aWRnZXQtY29udGVudFwiKX0sX2tleWRvd246ZnVuY3Rpb24odCl7ZnVuY3Rpb24gaShlKXtyZXR1cm4gZS5yZXBsYWNlKC9bXFwtXFxbXFxde30oKSorPy4sXFxcXFxcXiR8I1xcc10vZyxcIlxcXFwkJlwiKX12YXIgcyxhLG4scixvLGg9ITA7c3dpdGNoKHQua2V5Q29kZSl7Y2FzZSBlLnVpLmtleUNvZGUuUEFHRV9VUDp0aGlzLnByZXZpb3VzUGFnZSh0KTticmVhaztjYXNlIGUudWkua2V5Q29kZS5QQUdFX0RPV046dGhpcy5uZXh0UGFnZSh0KTticmVhaztjYXNlIGUudWkua2V5Q29kZS5IT01FOnRoaXMuX21vdmUoXCJmaXJzdFwiLFwiZmlyc3RcIix0KTticmVhaztjYXNlIGUudWkua2V5Q29kZS5FTkQ6dGhpcy5fbW92ZShcImxhc3RcIixcImxhc3RcIix0KTticmVhaztjYXNlIGUudWkua2V5Q29kZS5VUDp0aGlzLnByZXZpb3VzKHQpO2JyZWFrO2Nhc2UgZS51aS5rZXlDb2RlLkRPV046dGhpcy5uZXh0KHQpO2JyZWFrO2Nhc2UgZS51aS5rZXlDb2RlLkxFRlQ6dGhpcy5jb2xsYXBzZSh0KTticmVhaztjYXNlIGUudWkua2V5Q29kZS5SSUdIVDp0aGlzLmFjdGl2ZSYmIXRoaXMuYWN0aXZlLmlzKFwiLnVpLXN0YXRlLWRpc2FibGVkXCIpJiZ0aGlzLmV4cGFuZCh0KTticmVhaztjYXNlIGUudWkua2V5Q29kZS5FTlRFUjpjYXNlIGUudWkua2V5Q29kZS5TUEFDRTp0aGlzLl9hY3RpdmF0ZSh0KTticmVhaztjYXNlIGUudWkua2V5Q29kZS5FU0NBUEU6dGhpcy5jb2xsYXBzZSh0KTticmVhaztkZWZhdWx0Omg9ITEsYT10aGlzLnByZXZpb3VzRmlsdGVyfHxcIlwiLG49U3RyaW5nLmZyb21DaGFyQ29kZSh0LmtleUNvZGUpLHI9ITEsY2xlYXJUaW1lb3V0KHRoaXMuZmlsdGVyVGltZXIpLG49PT1hP3I9ITA6bj1hK24sbz1SZWdFeHAoXCJeXCIraShuKSxcImlcIikscz10aGlzLmFjdGl2ZU1lbnUuY2hpbGRyZW4oXCIudWktbWVudS1pdGVtXCIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiBvLnRlc3QoZSh0aGlzKS5jaGlsZHJlbihcImFcIikudGV4dCgpKX0pLHM9ciYmLTEhPT1zLmluZGV4KHRoaXMuYWN0aXZlLm5leHQoKSk/dGhpcy5hY3RpdmUubmV4dEFsbChcIi51aS1tZW51LWl0ZW1cIik6cyxzLmxlbmd0aHx8KG49U3RyaW5nLmZyb21DaGFyQ29kZSh0LmtleUNvZGUpLG89UmVnRXhwKFwiXlwiK2kobiksXCJpXCIpLHM9dGhpcy5hY3RpdmVNZW51LmNoaWxkcmVuKFwiLnVpLW1lbnUtaXRlbVwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gby50ZXN0KGUodGhpcykuY2hpbGRyZW4oXCJhXCIpLnRleHQoKSl9KSkscy5sZW5ndGg/KHRoaXMuZm9jdXModCxzKSxzLmxlbmd0aD4xPyh0aGlzLnByZXZpb3VzRmlsdGVyPW4sdGhpcy5maWx0ZXJUaW1lcj10aGlzLl9kZWxheShmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLnByZXZpb3VzRmlsdGVyfSwxZTMpKTpkZWxldGUgdGhpcy5wcmV2aW91c0ZpbHRlcik6ZGVsZXRlIHRoaXMucHJldmlvdXNGaWx0ZXJ9aCYmdC5wcmV2ZW50RGVmYXVsdCgpfSxfYWN0aXZhdGU6ZnVuY3Rpb24oZSl7dGhpcy5hY3RpdmUuaXMoXCIudWktc3RhdGUtZGlzYWJsZWRcIil8fCh0aGlzLmFjdGl2ZS5jaGlsZHJlbihcImFbYXJpYS1oYXNwb3B1cD0ndHJ1ZSddXCIpLmxlbmd0aD90aGlzLmV4cGFuZChlKTp0aGlzLnNlbGVjdChlKSl9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgdCxpPXRoaXMub3B0aW9ucy5pY29ucy5zdWJtZW51LHM9dGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLm1lbnVzKTtzLmZpbHRlcihcIjpub3QoLnVpLW1lbnUpXCIpLmFkZENsYXNzKFwidWktbWVudSB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbFwiKS5oaWRlKCkuYXR0cih7cm9sZTp0aGlzLm9wdGlvbnMucm9sZSxcImFyaWEtaGlkZGVuXCI6XCJ0cnVlXCIsXCJhcmlhLWV4cGFuZGVkXCI6XCJmYWxzZVwifSkuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcykscz10LnByZXYoXCJhXCIpLGE9ZShcIjxzcGFuPlwiKS5hZGRDbGFzcyhcInVpLW1lbnUtaWNvbiB1aS1pY29uIFwiK2kpLmRhdGEoXCJ1aS1tZW51LXN1Ym1lbnUtY2FyYXRcIiwhMCk7cy5hdHRyKFwiYXJpYS1oYXNwb3B1cFwiLFwidHJ1ZVwiKS5wcmVwZW5kKGEpLHQuYXR0cihcImFyaWEtbGFiZWxsZWRieVwiLHMuYXR0cihcImlkXCIpKX0pLHQ9cy5hZGQodGhpcy5lbGVtZW50KSx0LmNoaWxkcmVuKFwiOm5vdCgudWktbWVudS1pdGVtKTpoYXMoYSlcIikuYWRkQ2xhc3MoXCJ1aS1tZW51LWl0ZW1cIikuYXR0cihcInJvbGVcIixcInByZXNlbnRhdGlvblwiKS5jaGlsZHJlbihcImFcIikudW5pcXVlSWQoKS5hZGRDbGFzcyhcInVpLWNvcm5lci1hbGxcIikuYXR0cih7dGFiSW5kZXg6LTEscm9sZTp0aGlzLl9pdGVtUm9sZSgpfSksdC5jaGlsZHJlbihcIjpub3QoLnVpLW1lbnUtaXRlbSlcIikuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7L1teXFwtXFx1MjAxNFxcdTIwMTNcXHNdLy50ZXN0KHQudGV4dCgpKXx8dC5hZGRDbGFzcyhcInVpLXdpZGdldC1jb250ZW50IHVpLW1lbnUtZGl2aWRlclwiKX0pLHQuY2hpbGRyZW4oXCIudWktc3RhdGUtZGlzYWJsZWRcIikuYXR0cihcImFyaWEtZGlzYWJsZWRcIixcInRydWVcIiksdGhpcy5hY3RpdmUmJiFlLmNvbnRhaW5zKHRoaXMuZWxlbWVudFswXSx0aGlzLmFjdGl2ZVswXSkmJnRoaXMuYmx1cigpfSxfaXRlbVJvbGU6ZnVuY3Rpb24oKXtyZXR1cm57bWVudTpcIm1lbnVpdGVtXCIsbGlzdGJveDpcIm9wdGlvblwifVt0aGlzLm9wdGlvbnMucm9sZV19LF9zZXRPcHRpb246ZnVuY3Rpb24oZSx0KXtcImljb25zXCI9PT1lJiZ0aGlzLmVsZW1lbnQuZmluZChcIi51aS1tZW51LWljb25cIikucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmljb25zLnN1Ym1lbnUpLmFkZENsYXNzKHQuc3VibWVudSksdGhpcy5fc3VwZXIoZSx0KX0sZm9jdXM6ZnVuY3Rpb24oZSx0KXt2YXIgaSxzO3RoaXMuYmx1cihlLGUmJlwiZm9jdXNcIj09PWUudHlwZSksdGhpcy5fc2Nyb2xsSW50b1ZpZXcodCksdGhpcy5hY3RpdmU9dC5maXJzdCgpLHM9dGhpcy5hY3RpdmUuY2hpbGRyZW4oXCJhXCIpLmFkZENsYXNzKFwidWktc3RhdGUtZm9jdXNcIiksdGhpcy5vcHRpb25zLnJvbGUmJnRoaXMuZWxlbWVudC5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIscy5hdHRyKFwiaWRcIikpLHRoaXMuYWN0aXZlLnBhcmVudCgpLmNsb3Nlc3QoXCIudWktbWVudS1pdGVtXCIpLmNoaWxkcmVuKFwiYTpmaXJzdFwiKS5hZGRDbGFzcyhcInVpLXN0YXRlLWFjdGl2ZVwiKSxlJiZcImtleWRvd25cIj09PWUudHlwZT90aGlzLl9jbG9zZSgpOnRoaXMudGltZXI9dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0aGlzLl9jbG9zZSgpfSx0aGlzLmRlbGF5KSxpPXQuY2hpbGRyZW4oXCIudWktbWVudVwiKSxpLmxlbmd0aCYmL15tb3VzZS8udGVzdChlLnR5cGUpJiZ0aGlzLl9zdGFydE9wZW5pbmcoaSksdGhpcy5hY3RpdmVNZW51PXQucGFyZW50KCksdGhpcy5fdHJpZ2dlcihcImZvY3VzXCIsZSx7aXRlbTp0fSl9LF9zY3JvbGxJbnRvVmlldzpmdW5jdGlvbih0KXt2YXIgaSxzLGEsbixyLG87dGhpcy5faGFzU2Nyb2xsKCkmJihpPXBhcnNlRmxvYXQoZS5jc3ModGhpcy5hY3RpdmVNZW51WzBdLFwiYm9yZGVyVG9wV2lkdGhcIikpfHwwLHM9cGFyc2VGbG9hdChlLmNzcyh0aGlzLmFjdGl2ZU1lbnVbMF0sXCJwYWRkaW5nVG9wXCIpKXx8MCxhPXQub2Zmc2V0KCkudG9wLXRoaXMuYWN0aXZlTWVudS5vZmZzZXQoKS50b3AtaS1zLG49dGhpcy5hY3RpdmVNZW51LnNjcm9sbFRvcCgpLHI9dGhpcy5hY3RpdmVNZW51LmhlaWdodCgpLG89dC5oZWlnaHQoKSwwPmE/dGhpcy5hY3RpdmVNZW51LnNjcm9sbFRvcChuK2EpOmErbz5yJiZ0aGlzLmFjdGl2ZU1lbnUuc2Nyb2xsVG9wKG4rYS1yK28pKX0sYmx1cjpmdW5jdGlvbihlLHQpe3R8fGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKSx0aGlzLmFjdGl2ZSYmKHRoaXMuYWN0aXZlLmNoaWxkcmVuKFwiYVwiKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWZvY3VzXCIpLHRoaXMuYWN0aXZlPW51bGwsdGhpcy5fdHJpZ2dlcihcImJsdXJcIixlLHtpdGVtOnRoaXMuYWN0aXZlfSkpfSxfc3RhcnRPcGVuaW5nOmZ1bmN0aW9uKGUpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKSxcInRydWVcIj09PWUuYXR0cihcImFyaWEtaGlkZGVuXCIpJiYodGhpcy50aW1lcj10aGlzLl9kZWxheShmdW5jdGlvbigpe3RoaXMuX2Nsb3NlKCksdGhpcy5fb3BlbihlKX0sdGhpcy5kZWxheSkpfSxfb3BlbjpmdW5jdGlvbih0KXt2YXIgaT1lLmV4dGVuZCh7b2Y6dGhpcy5hY3RpdmV9LHRoaXMub3B0aW9ucy5wb3NpdGlvbik7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpLHRoaXMuZWxlbWVudC5maW5kKFwiLnVpLW1lbnVcIikubm90KHQucGFyZW50cyhcIi51aS1tZW51XCIpKS5oaWRlKCkuYXR0cihcImFyaWEtaGlkZGVuXCIsXCJ0cnVlXCIpLHQuc2hvdygpLnJlbW92ZUF0dHIoXCJhcmlhLWhpZGRlblwiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLFwidHJ1ZVwiKS5wb3NpdGlvbihpKX0sY29sbGFwc2VBbGw6ZnVuY3Rpb24odCxpKXtjbGVhclRpbWVvdXQodGhpcy50aW1lciksdGhpcy50aW1lcj10aGlzLl9kZWxheShmdW5jdGlvbigpe3ZhciBzPWk/dGhpcy5lbGVtZW50OmUodCYmdC50YXJnZXQpLmNsb3Nlc3QodGhpcy5lbGVtZW50LmZpbmQoXCIudWktbWVudVwiKSk7cy5sZW5ndGh8fChzPXRoaXMuZWxlbWVudCksdGhpcy5fY2xvc2UocyksdGhpcy5ibHVyKHQpLHRoaXMuYWN0aXZlTWVudT1zfSx0aGlzLmRlbGF5KX0sX2Nsb3NlOmZ1bmN0aW9uKGUpe2V8fChlPXRoaXMuYWN0aXZlP3RoaXMuYWN0aXZlLnBhcmVudCgpOnRoaXMuZWxlbWVudCksZS5maW5kKFwiLnVpLW1lbnVcIikuaGlkZSgpLmF0dHIoXCJhcmlhLWhpZGRlblwiLFwidHJ1ZVwiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLFwiZmFsc2VcIikuZW5kKCkuZmluZChcImEudWktc3RhdGUtYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwidWktc3RhdGUtYWN0aXZlXCIpfSxjb2xsYXBzZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmFjdGl2ZSYmdGhpcy5hY3RpdmUucGFyZW50KCkuY2xvc2VzdChcIi51aS1tZW51LWl0ZW1cIix0aGlzLmVsZW1lbnQpO3QmJnQubGVuZ3RoJiYodGhpcy5fY2xvc2UoKSx0aGlzLmZvY3VzKGUsdCkpfSxleHBhbmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5hY3RpdmUmJnRoaXMuYWN0aXZlLmNoaWxkcmVuKFwiLnVpLW1lbnUgXCIpLmNoaWxkcmVuKFwiLnVpLW1lbnUtaXRlbVwiKS5maXJzdCgpO3QmJnQubGVuZ3RoJiYodGhpcy5fb3Blbih0LnBhcmVudCgpKSx0aGlzLl9kZWxheShmdW5jdGlvbigpe3RoaXMuZm9jdXMoZSx0KX0pKX0sbmV4dDpmdW5jdGlvbihlKXt0aGlzLl9tb3ZlKFwibmV4dFwiLFwiZmlyc3RcIixlKX0scHJldmlvdXM6ZnVuY3Rpb24oZSl7dGhpcy5fbW92ZShcInByZXZcIixcImxhc3RcIixlKX0saXNGaXJzdEl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmUmJiF0aGlzLmFjdGl2ZS5wcmV2QWxsKFwiLnVpLW1lbnUtaXRlbVwiKS5sZW5ndGh9LGlzTGFzdEl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmUmJiF0aGlzLmFjdGl2ZS5uZXh0QWxsKFwiLnVpLW1lbnUtaXRlbVwiKS5sZW5ndGh9LF9tb3ZlOmZ1bmN0aW9uKGUsdCxpKXt2YXIgczt0aGlzLmFjdGl2ZSYmKHM9XCJmaXJzdFwiPT09ZXx8XCJsYXN0XCI9PT1lP3RoaXMuYWN0aXZlW1wiZmlyc3RcIj09PWU/XCJwcmV2QWxsXCI6XCJuZXh0QWxsXCJdKFwiLnVpLW1lbnUtaXRlbVwiKS5lcSgtMSk6dGhpcy5hY3RpdmVbZStcIkFsbFwiXShcIi51aS1tZW51LWl0ZW1cIikuZXEoMCkpLHMmJnMubGVuZ3RoJiZ0aGlzLmFjdGl2ZXx8KHM9dGhpcy5hY3RpdmVNZW51LmNoaWxkcmVuKFwiLnVpLW1lbnUtaXRlbVwiKVt0XSgpKSx0aGlzLmZvY3VzKGkscyl9LG5leHRQYWdlOmZ1bmN0aW9uKHQpe3ZhciBpLHMsYTtyZXR1cm4gdGhpcy5hY3RpdmU/KHRoaXMuaXNMYXN0SXRlbSgpfHwodGhpcy5faGFzU2Nyb2xsKCk/KHM9dGhpcy5hY3RpdmUub2Zmc2V0KCkudG9wLGE9dGhpcy5lbGVtZW50LmhlaWdodCgpLHRoaXMuYWN0aXZlLm5leHRBbGwoXCIudWktbWVudS1pdGVtXCIpLmVhY2goZnVuY3Rpb24oKXtyZXR1cm4gaT1lKHRoaXMpLDA+aS5vZmZzZXQoKS50b3Atcy1hfSksdGhpcy5mb2N1cyh0LGkpKTp0aGlzLmZvY3VzKHQsdGhpcy5hY3RpdmVNZW51LmNoaWxkcmVuKFwiLnVpLW1lbnUtaXRlbVwiKVt0aGlzLmFjdGl2ZT9cImxhc3RcIjpcImZpcnN0XCJdKCkpKSx1bmRlZmluZWQpOih0aGlzLm5leHQodCksdW5kZWZpbmVkKX0scHJldmlvdXNQYWdlOmZ1bmN0aW9uKHQpe3ZhciBpLHMsYTtyZXR1cm4gdGhpcy5hY3RpdmU/KHRoaXMuaXNGaXJzdEl0ZW0oKXx8KHRoaXMuX2hhc1Njcm9sbCgpPyhzPXRoaXMuYWN0aXZlLm9mZnNldCgpLnRvcCxhPXRoaXMuZWxlbWVudC5oZWlnaHQoKSx0aGlzLmFjdGl2ZS5wcmV2QWxsKFwiLnVpLW1lbnUtaXRlbVwiKS5lYWNoKGZ1bmN0aW9uKCl7cmV0dXJuIGk9ZSh0aGlzKSxpLm9mZnNldCgpLnRvcC1zK2E+MH0pLHRoaXMuZm9jdXModCxpKSk6dGhpcy5mb2N1cyh0LHRoaXMuYWN0aXZlTWVudS5jaGlsZHJlbihcIi51aS1tZW51LWl0ZW1cIikuZmlyc3QoKSkpLHVuZGVmaW5lZCk6KHRoaXMubmV4dCh0KSx1bmRlZmluZWQpfSxfaGFzU2Nyb2xsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpPHRoaXMuZWxlbWVudC5wcm9wKFwic2Nyb2xsSGVpZ2h0XCIpfSxzZWxlY3Q6ZnVuY3Rpb24odCl7dGhpcy5hY3RpdmU9dGhpcy5hY3RpdmV8fGUodC50YXJnZXQpLmNsb3Nlc3QoXCIudWktbWVudS1pdGVtXCIpO3ZhciBpPXtpdGVtOnRoaXMuYWN0aXZlfTt0aGlzLmFjdGl2ZS5oYXMoXCIudWktbWVudVwiKS5sZW5ndGh8fHRoaXMuY29sbGFwc2VBbGwodCwhMCksdGhpcy5fdHJpZ2dlcihcInNlbGVjdFwiLHQsaSl9fSl9KShqUXVlcnkpOyhmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIGkoKXtyZXR1cm4rK2F9ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZS5oYXNoLmxlbmd0aD4xJiZkZWNvZGVVUklDb21wb25lbnQoZS5ocmVmLnJlcGxhY2UobixcIlwiKSk9PT1kZWNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaHJlZi5yZXBsYWNlKG4sXCJcIikpfXZhciBhPTAsbj0vIy4qJC87ZS53aWRnZXQoXCJ1aS50YWJzXCIse3ZlcnNpb246XCIxLjEwLjNcIixkZWxheTozMDAsb3B0aW9uczp7YWN0aXZlOm51bGwsY29sbGFwc2libGU6ITEsZXZlbnQ6XCJjbGlja1wiLGhlaWdodFN0eWxlOlwiY29udGVudFwiLGhpZGU6bnVsbCxzaG93Om51bGwsYWN0aXZhdGU6bnVsbCxiZWZvcmVBY3RpdmF0ZTpudWxsLGJlZm9yZUxvYWQ6bnVsbCxsb2FkOm51bGx9LF9jcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGk9dGhpcy5vcHRpb25zO3RoaXMucnVubmluZz0hMSx0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1aS10YWJzIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsXCIpLnRvZ2dsZUNsYXNzKFwidWktdGFicy1jb2xsYXBzaWJsZVwiLGkuY29sbGFwc2libGUpLmRlbGVnYXRlKFwiLnVpLXRhYnMtbmF2ID4gbGlcIixcIm1vdXNlZG93blwiK3RoaXMuZXZlbnROYW1lc3BhY2UsZnVuY3Rpb24odCl7ZSh0aGlzKS5pcyhcIi51aS1zdGF0ZS1kaXNhYmxlZFwiKSYmdC5wcmV2ZW50RGVmYXVsdCgpfSkuZGVsZWdhdGUoXCIudWktdGFicy1hbmNob3JcIixcImZvY3VzXCIrdGhpcy5ldmVudE5hbWVzcGFjZSxmdW5jdGlvbigpe2UodGhpcykuY2xvc2VzdChcImxpXCIpLmlzKFwiLnVpLXN0YXRlLWRpc2FibGVkXCIpJiZ0aGlzLmJsdXIoKX0pLHRoaXMuX3Byb2Nlc3NUYWJzKCksaS5hY3RpdmU9dGhpcy5faW5pdGlhbEFjdGl2ZSgpLGUuaXNBcnJheShpLmRpc2FibGVkKSYmKGkuZGlzYWJsZWQ9ZS51bmlxdWUoaS5kaXNhYmxlZC5jb25jYXQoZS5tYXAodGhpcy50YWJzLmZpbHRlcihcIi51aS1zdGF0ZS1kaXNhYmxlZFwiKSxmdW5jdGlvbihlKXtyZXR1cm4gdC50YWJzLmluZGV4KGUpfSkpKS5zb3J0KCkpLHRoaXMuYWN0aXZlPXRoaXMub3B0aW9ucy5hY3RpdmUhPT0hMSYmdGhpcy5hbmNob3JzLmxlbmd0aD90aGlzLl9maW5kQWN0aXZlKGkuYWN0aXZlKTplKCksdGhpcy5fcmVmcmVzaCgpLHRoaXMuYWN0aXZlLmxlbmd0aCYmdGhpcy5sb2FkKGkuYWN0aXZlKX0sX2luaXRpYWxBY3RpdmU6ZnVuY3Rpb24oKXt2YXIgaT10aGlzLm9wdGlvbnMuYWN0aXZlLHM9dGhpcy5vcHRpb25zLmNvbGxhcHNpYmxlLGE9bG9jYXRpb24uaGFzaC5zdWJzdHJpbmcoMSk7cmV0dXJuIG51bGw9PT1pJiYoYSYmdGhpcy50YWJzLmVhY2goZnVuY3Rpb24ocyxuKXtyZXR1cm4gZShuKS5hdHRyKFwiYXJpYS1jb250cm9sc1wiKT09PWE/KGk9cywhMSk6dH0pLG51bGw9PT1pJiYoaT10aGlzLnRhYnMuaW5kZXgodGhpcy50YWJzLmZpbHRlcihcIi51aS10YWJzLWFjdGl2ZVwiKSkpLChudWxsPT09aXx8LTE9PT1pKSYmKGk9dGhpcy50YWJzLmxlbmd0aD8wOiExKSksaSE9PSExJiYoaT10aGlzLnRhYnMuaW5kZXgodGhpcy50YWJzLmVxKGkpKSwtMT09PWkmJihpPXM/ITE6MCkpLCFzJiZpPT09ITEmJnRoaXMuYW5jaG9ycy5sZW5ndGgmJihpPTApLGl9LF9nZXRDcmVhdGVFdmVudERhdGE6ZnVuY3Rpb24oKXtyZXR1cm57dGFiOnRoaXMuYWN0aXZlLHBhbmVsOnRoaXMuYWN0aXZlLmxlbmd0aD90aGlzLl9nZXRQYW5lbEZvclRhYih0aGlzLmFjdGl2ZSk6ZSgpfX0sX3RhYktleWRvd246ZnVuY3Rpb24oaSl7dmFyIHM9ZSh0aGlzLmRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQpLmNsb3Nlc3QoXCJsaVwiKSxhPXRoaXMudGFicy5pbmRleChzKSxuPSEwO2lmKCF0aGlzLl9oYW5kbGVQYWdlTmF2KGkpKXtzd2l0Y2goaS5rZXlDb2RlKXtjYXNlIGUudWkua2V5Q29kZS5SSUdIVDpjYXNlIGUudWkua2V5Q29kZS5ET1dOOmErKzticmVhaztjYXNlIGUudWkua2V5Q29kZS5VUDpjYXNlIGUudWkua2V5Q29kZS5MRUZUOm49ITEsYS0tO2JyZWFrO2Nhc2UgZS51aS5rZXlDb2RlLkVORDphPXRoaXMuYW5jaG9ycy5sZW5ndGgtMTticmVhaztjYXNlIGUudWkua2V5Q29kZS5IT01FOmE9MDticmVhaztjYXNlIGUudWkua2V5Q29kZS5TUEFDRTpyZXR1cm4gaS5wcmV2ZW50RGVmYXVsdCgpLGNsZWFyVGltZW91dCh0aGlzLmFjdGl2YXRpbmcpLHRoaXMuX2FjdGl2YXRlKGEpLHQ7Y2FzZSBlLnVpLmtleUNvZGUuRU5URVI6cmV0dXJuIGkucHJldmVudERlZmF1bHQoKSxjbGVhclRpbWVvdXQodGhpcy5hY3RpdmF0aW5nKSx0aGlzLl9hY3RpdmF0ZShhPT09dGhpcy5vcHRpb25zLmFjdGl2ZT8hMTphKSx0O2RlZmF1bHQ6cmV0dXJufWkucHJldmVudERlZmF1bHQoKSxjbGVhclRpbWVvdXQodGhpcy5hY3RpdmF0aW5nKSxhPXRoaXMuX2ZvY3VzTmV4dFRhYihhLG4pLGkuY3RybEtleXx8KHMuYXR0cihcImFyaWEtc2VsZWN0ZWRcIixcImZhbHNlXCIpLHRoaXMudGFicy5lcShhKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLFwidHJ1ZVwiKSx0aGlzLmFjdGl2YXRpbmc9dGhpcy5fZGVsYXkoZnVuY3Rpb24oKXt0aGlzLm9wdGlvbihcImFjdGl2ZVwiLGEpfSx0aGlzLmRlbGF5KSl9fSxfcGFuZWxLZXlkb3duOmZ1bmN0aW9uKHQpe3RoaXMuX2hhbmRsZVBhZ2VOYXYodCl8fHQuY3RybEtleSYmdC5rZXlDb2RlPT09ZS51aS5rZXlDb2RlLlVQJiYodC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuYWN0aXZlLmZvY3VzKCkpfSxfaGFuZGxlUGFnZU5hdjpmdW5jdGlvbihpKXtyZXR1cm4gaS5hbHRLZXkmJmkua2V5Q29kZT09PWUudWkua2V5Q29kZS5QQUdFX1VQPyh0aGlzLl9hY3RpdmF0ZSh0aGlzLl9mb2N1c05leHRUYWIodGhpcy5vcHRpb25zLmFjdGl2ZS0xLCExKSksITApOmkuYWx0S2V5JiZpLmtleUNvZGU9PT1lLnVpLmtleUNvZGUuUEFHRV9ET1dOPyh0aGlzLl9hY3RpdmF0ZSh0aGlzLl9mb2N1c05leHRUYWIodGhpcy5vcHRpb25zLmFjdGl2ZSsxLCEwKSksITApOnR9LF9maW5kTmV4dFRhYjpmdW5jdGlvbih0LGkpe2Z1bmN0aW9uIHMoKXtyZXR1cm4gdD5hJiYodD0wKSwwPnQmJih0PWEpLHR9Zm9yKHZhciBhPXRoaXMudGFicy5sZW5ndGgtMTstMSE9PWUuaW5BcnJheShzKCksdGhpcy5vcHRpb25zLmRpc2FibGVkKTspdD1pP3QrMTp0LTE7cmV0dXJuIHR9LF9mb2N1c05leHRUYWI6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT10aGlzLl9maW5kTmV4dFRhYihlLHQpLHRoaXMudGFicy5lcShlKS5mb2N1cygpLGV9LF9zZXRPcHRpb246ZnVuY3Rpb24oZSxpKXtyZXR1cm5cImFjdGl2ZVwiPT09ZT8odGhpcy5fYWN0aXZhdGUoaSksdCk6XCJkaXNhYmxlZFwiPT09ZT8odGhpcy5fc2V0dXBEaXNhYmxlZChpKSx0KToodGhpcy5fc3VwZXIoZSxpKSxcImNvbGxhcHNpYmxlXCI9PT1lJiYodGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKFwidWktdGFicy1jb2xsYXBzaWJsZVwiLGkpLGl8fHRoaXMub3B0aW9ucy5hY3RpdmUhPT0hMXx8dGhpcy5fYWN0aXZhdGUoMCkpLFwiZXZlbnRcIj09PWUmJnRoaXMuX3NldHVwRXZlbnRzKGkpLFwiaGVpZ2h0U3R5bGVcIj09PWUmJnRoaXMuX3NldHVwSGVpZ2h0U3R5bGUoaSksdCl9LF90YWJJZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5hdHRyKFwiYXJpYS1jb250cm9sc1wiKXx8XCJ1aS10YWJzLVwiK2koKX0sX3Nhbml0aXplU2VsZWN0b3I6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/ZS5yZXBsYWNlKC9bIVwiJCUmJygpKissLlxcLzo7PD0+P0BcXFtcXF1cXF5ge3x9fl0vZyxcIlxcXFwkJlwiKTpcIlwifSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLGk9dGhpcy50YWJsaXN0LmNoaWxkcmVuKFwiOmhhcyhhW2hyZWZdKVwiKTt0LmRpc2FibGVkPWUubWFwKGkuZmlsdGVyKFwiLnVpLXN0YXRlLWRpc2FibGVkXCIpLGZ1bmN0aW9uKGUpe3JldHVybiBpLmluZGV4KGUpfSksdGhpcy5fcHJvY2Vzc1RhYnMoKSx0LmFjdGl2ZSE9PSExJiZ0aGlzLmFuY2hvcnMubGVuZ3RoP3RoaXMuYWN0aXZlLmxlbmd0aCYmIWUuY29udGFpbnModGhpcy50YWJsaXN0WzBdLHRoaXMuYWN0aXZlWzBdKT90aGlzLnRhYnMubGVuZ3RoPT09dC5kaXNhYmxlZC5sZW5ndGg/KHQuYWN0aXZlPSExLHRoaXMuYWN0aXZlPWUoKSk6dGhpcy5fYWN0aXZhdGUodGhpcy5fZmluZE5leHRUYWIoTWF0aC5tYXgoMCx0LmFjdGl2ZS0xKSwhMSkpOnQuYWN0aXZlPXRoaXMudGFicy5pbmRleCh0aGlzLmFjdGl2ZSk6KHQuYWN0aXZlPSExLHRoaXMuYWN0aXZlPWUoKSksdGhpcy5fcmVmcmVzaCgpfSxfcmVmcmVzaDpmdW5jdGlvbigpe3RoaXMuX3NldHVwRGlzYWJsZWQodGhpcy5vcHRpb25zLmRpc2FibGVkKSx0aGlzLl9zZXR1cEV2ZW50cyh0aGlzLm9wdGlvbnMuZXZlbnQpLHRoaXMuX3NldHVwSGVpZ2h0U3R5bGUodGhpcy5vcHRpb25zLmhlaWdodFN0eWxlKSx0aGlzLnRhYnMubm90KHRoaXMuYWN0aXZlKS5hdHRyKHtcImFyaWEtc2VsZWN0ZWRcIjpcImZhbHNlXCIsdGFiSW5kZXg6LTF9KSx0aGlzLnBhbmVscy5ub3QodGhpcy5fZ2V0UGFuZWxGb3JUYWIodGhpcy5hY3RpdmUpKS5oaWRlKCkuYXR0cih7XCJhcmlhLWV4cGFuZGVkXCI6XCJmYWxzZVwiLFwiYXJpYS1oaWRkZW5cIjpcInRydWVcIn0pLHRoaXMuYWN0aXZlLmxlbmd0aD8odGhpcy5hY3RpdmUuYWRkQ2xhc3MoXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIikuYXR0cih7XCJhcmlhLXNlbGVjdGVkXCI6XCJ0cnVlXCIsdGFiSW5kZXg6MH0pLHRoaXMuX2dldFBhbmVsRm9yVGFiKHRoaXMuYWN0aXZlKS5zaG93KCkuYXR0cih7XCJhcmlhLWV4cGFuZGVkXCI6XCJ0cnVlXCIsXCJhcmlhLWhpZGRlblwiOlwiZmFsc2VcIn0pKTp0aGlzLnRhYnMuZXEoMCkuYXR0cihcInRhYkluZGV4XCIsMCl9LF9wcm9jZXNzVGFiczpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy50YWJsaXN0PXRoaXMuX2dldExpc3QoKS5hZGRDbGFzcyhcInVpLXRhYnMtbmF2IHVpLWhlbHBlci1yZXNldCB1aS1oZWxwZXItY2xlYXJmaXggdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItYWxsXCIpLmF0dHIoXCJyb2xlXCIsXCJ0YWJsaXN0XCIpLHRoaXMudGFicz10aGlzLnRhYmxpc3QuZmluZChcIj4gbGk6aGFzKGFbaHJlZl0pXCIpLmFkZENsYXNzKFwidWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItdG9wXCIpLmF0dHIoe3JvbGU6XCJ0YWJcIix0YWJJbmRleDotMX0pLHRoaXMuYW5jaG9ycz10aGlzLnRhYnMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGUoXCJhXCIsdGhpcylbMF19KS5hZGRDbGFzcyhcInVpLXRhYnMtYW5jaG9yXCIpLmF0dHIoe3JvbGU6XCJwcmVzZW50YXRpb25cIix0YWJJbmRleDotMX0pLHRoaXMucGFuZWxzPWUoKSx0aGlzLmFuY2hvcnMuZWFjaChmdW5jdGlvbihpLGEpe3ZhciBuLHIsbyxoPWUoYSkudW5pcXVlSWQoKS5hdHRyKFwiaWRcIiksbD1lKGEpLmNsb3Nlc3QoXCJsaVwiKSx1PWwuYXR0cihcImFyaWEtY29udHJvbHNcIik7cyhhKT8obj1hLmhhc2gscj10LmVsZW1lbnQuZmluZCh0Ll9zYW5pdGl6ZVNlbGVjdG9yKG4pKSk6KG89dC5fdGFiSWQobCksbj1cIiNcIitvLHI9dC5lbGVtZW50LmZpbmQobiksci5sZW5ndGh8fChyPXQuX2NyZWF0ZVBhbmVsKG8pLHIuaW5zZXJ0QWZ0ZXIodC5wYW5lbHNbaS0xXXx8dC50YWJsaXN0KSksci5hdHRyKFwiYXJpYS1saXZlXCIsXCJwb2xpdGVcIikpLHIubGVuZ3RoJiYodC5wYW5lbHM9dC5wYW5lbHMuYWRkKHIpKSx1JiZsLmRhdGEoXCJ1aS10YWJzLWFyaWEtY29udHJvbHNcIix1KSxsLmF0dHIoe1wiYXJpYS1jb250cm9sc1wiOm4uc3Vic3RyaW5nKDEpLFwiYXJpYS1sYWJlbGxlZGJ5XCI6aH0pLHIuYXR0cihcImFyaWEtbGFiZWxsZWRieVwiLGgpfSksdGhpcy5wYW5lbHMuYWRkQ2xhc3MoXCJ1aS10YWJzLXBhbmVsIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b21cIikuYXR0cihcInJvbGVcIixcInRhYnBhbmVsXCIpfSxfZ2V0TGlzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnQuZmluZChcIm9sLHVsXCIpLmVxKDApfSxfY3JlYXRlUGFuZWw6ZnVuY3Rpb24odCl7cmV0dXJuIGUoXCI8ZGl2PlwiKS5hdHRyKFwiaWRcIix0KS5hZGRDbGFzcyhcInVpLXRhYnMtcGFuZWwgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbVwiKS5kYXRhKFwidWktdGFicy1kZXN0cm95XCIsITApfSxfc2V0dXBEaXNhYmxlZDpmdW5jdGlvbih0KXtlLmlzQXJyYXkodCkmJih0Lmxlbmd0aD90Lmxlbmd0aD09PXRoaXMuYW5jaG9ycy5sZW5ndGgmJih0PSEwKTp0PSExKTtmb3IodmFyIGkscz0wO2k9dGhpcy50YWJzW3NdO3MrKyl0PT09ITB8fC0xIT09ZS5pbkFycmF5KHMsdCk/ZShpKS5hZGRDbGFzcyhcInVpLXN0YXRlLWRpc2FibGVkXCIpLmF0dHIoXCJhcmlhLWRpc2FibGVkXCIsXCJ0cnVlXCIpOmUoaSkucmVtb3ZlQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiKS5yZW1vdmVBdHRyKFwiYXJpYS1kaXNhYmxlZFwiKTt0aGlzLm9wdGlvbnMuZGlzYWJsZWQ9dH0sX3NldHVwRXZlbnRzOmZ1bmN0aW9uKHQpe3ZhciBpPXtjbGljazpmdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCl9fTt0JiZlLmVhY2godC5zcGxpdChcIiBcIiksZnVuY3Rpb24oZSx0KXtpW3RdPVwiX2V2ZW50SGFuZGxlclwifSksdGhpcy5fb2ZmKHRoaXMuYW5jaG9ycy5hZGQodGhpcy50YWJzKS5hZGQodGhpcy5wYW5lbHMpKSx0aGlzLl9vbih0aGlzLmFuY2hvcnMsaSksdGhpcy5fb24odGhpcy50YWJzLHtrZXlkb3duOlwiX3RhYktleWRvd25cIn0pLHRoaXMuX29uKHRoaXMucGFuZWxzLHtrZXlkb3duOlwiX3BhbmVsS2V5ZG93blwifSksdGhpcy5fZm9jdXNhYmxlKHRoaXMudGFicyksdGhpcy5faG92ZXJhYmxlKHRoaXMudGFicyl9LF9zZXR1cEhlaWdodFN0eWxlOmZ1bmN0aW9uKHQpe3ZhciBpLHM9dGhpcy5lbGVtZW50LnBhcmVudCgpO1wiZmlsbFwiPT09dD8oaT1zLmhlaWdodCgpLGktPXRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpLXRoaXMuZWxlbWVudC5oZWlnaHQoKSx0aGlzLmVsZW1lbnQuc2libGluZ3MoXCI6dmlzaWJsZVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxzPXQuY3NzKFwicG9zaXRpb25cIik7XCJhYnNvbHV0ZVwiIT09cyYmXCJmaXhlZFwiIT09cyYmKGktPXQub3V0ZXJIZWlnaHQoITApKX0pLHRoaXMuZWxlbWVudC5jaGlsZHJlbigpLm5vdCh0aGlzLnBhbmVscykuZWFjaChmdW5jdGlvbigpe2ktPWUodGhpcykub3V0ZXJIZWlnaHQoITApfSksdGhpcy5wYW5lbHMuZWFjaChmdW5jdGlvbigpe2UodGhpcykuaGVpZ2h0KE1hdGgubWF4KDAsaS1lKHRoaXMpLmlubmVySGVpZ2h0KCkrZSh0aGlzKS5oZWlnaHQoKSkpfSkuY3NzKFwib3ZlcmZsb3dcIixcImF1dG9cIikpOlwiYXV0b1wiPT09dCYmKGk9MCx0aGlzLnBhbmVscy5lYWNoKGZ1bmN0aW9uKCl7aT1NYXRoLm1heChpLGUodGhpcykuaGVpZ2h0KFwiXCIpLmhlaWdodCgpKX0pLmhlaWdodChpKSl9LF9ldmVudEhhbmRsZXI6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5vcHRpb25zLHM9dGhpcy5hY3RpdmUsYT1lKHQuY3VycmVudFRhcmdldCksbj1hLmNsb3Nlc3QoXCJsaVwiKSxyPW5bMF09PT1zWzBdLG89ciYmaS5jb2xsYXBzaWJsZSxoPW8/ZSgpOnRoaXMuX2dldFBhbmVsRm9yVGFiKG4pLGw9cy5sZW5ndGg/dGhpcy5fZ2V0UGFuZWxGb3JUYWIocyk6ZSgpLHU9e29sZFRhYjpzLG9sZFBhbmVsOmwsbmV3VGFiOm8/ZSgpOm4sbmV3UGFuZWw6aH07dC5wcmV2ZW50RGVmYXVsdCgpLG4uaGFzQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiKXx8bi5oYXNDbGFzcyhcInVpLXRhYnMtbG9hZGluZ1wiKXx8dGhpcy5ydW5uaW5nfHxyJiYhaS5jb2xsYXBzaWJsZXx8dGhpcy5fdHJpZ2dlcihcImJlZm9yZUFjdGl2YXRlXCIsdCx1KT09PSExfHwoaS5hY3RpdmU9bz8hMTp0aGlzLnRhYnMuaW5kZXgobiksdGhpcy5hY3RpdmU9cj9lKCk6bix0aGlzLnhociYmdGhpcy54aHIuYWJvcnQoKSxsLmxlbmd0aHx8aC5sZW5ndGh8fGUuZXJyb3IoXCJqUXVlcnkgVUkgVGFiczogTWlzbWF0Y2hpbmcgZnJhZ21lbnQgaWRlbnRpZmllci5cIiksaC5sZW5ndGgmJnRoaXMubG9hZCh0aGlzLnRhYnMuaW5kZXgobiksdCksdGhpcy5fdG9nZ2xlKHQsdSkpfSxfdG9nZ2xlOmZ1bmN0aW9uKHQsaSl7ZnVuY3Rpb24gcygpe24ucnVubmluZz0hMSxuLl90cmlnZ2VyKFwiYWN0aXZhdGVcIix0LGkpfWZ1bmN0aW9uIGEoKXtpLm5ld1RhYi5jbG9zZXN0KFwibGlcIikuYWRkQ2xhc3MoXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIiksci5sZW5ndGgmJm4ub3B0aW9ucy5zaG93P24uX3Nob3cocixuLm9wdGlvbnMuc2hvdyxzKTooci5zaG93KCkscygpKX12YXIgbj10aGlzLHI9aS5uZXdQYW5lbCxvPWkub2xkUGFuZWw7dGhpcy5ydW5uaW5nPSEwLG8ubGVuZ3RoJiZ0aGlzLm9wdGlvbnMuaGlkZT90aGlzLl9oaWRlKG8sdGhpcy5vcHRpb25zLmhpZGUsZnVuY3Rpb24oKXtpLm9sZFRhYi5jbG9zZXN0KFwibGlcIikucmVtb3ZlQ2xhc3MoXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIiksYSgpfSk6KGkub2xkVGFiLmNsb3Nlc3QoXCJsaVwiKS5yZW1vdmVDbGFzcyhcInVpLXRhYnMtYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZVwiKSxvLmhpZGUoKSxhKCkpLG8uYXR0cih7XCJhcmlhLWV4cGFuZGVkXCI6XCJmYWxzZVwiLFwiYXJpYS1oaWRkZW5cIjpcInRydWVcIn0pLGkub2xkVGFiLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsXCJmYWxzZVwiKSxyLmxlbmd0aCYmby5sZW5ndGg/aS5vbGRUYWIuYXR0cihcInRhYkluZGV4XCIsLTEpOnIubGVuZ3RoJiZ0aGlzLnRhYnMuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIDA9PT1lKHRoaXMpLmF0dHIoXCJ0YWJJbmRleFwiKX0pLmF0dHIoXCJ0YWJJbmRleFwiLC0xKSxyLmF0dHIoe1wiYXJpYS1leHBhbmRlZFwiOlwidHJ1ZVwiLFwiYXJpYS1oaWRkZW5cIjpcImZhbHNlXCJ9KSxpLm5ld1RhYi5hdHRyKHtcImFyaWEtc2VsZWN0ZWRcIjpcInRydWVcIix0YWJJbmRleDowfSl9LF9hY3RpdmF0ZTpmdW5jdGlvbih0KXt2YXIgaSxzPXRoaXMuX2ZpbmRBY3RpdmUodCk7c1swXSE9PXRoaXMuYWN0aXZlWzBdJiYocy5sZW5ndGh8fChzPXRoaXMuYWN0aXZlKSxpPXMuZmluZChcIi51aS10YWJzLWFuY2hvclwiKVswXSx0aGlzLl9ldmVudEhhbmRsZXIoe3RhcmdldDppLGN1cnJlbnRUYXJnZXQ6aSxwcmV2ZW50RGVmYXVsdDplLm5vb3B9KSl9LF9maW5kQWN0aXZlOmZ1bmN0aW9uKHQpe3JldHVybiB0PT09ITE/ZSgpOnRoaXMudGFicy5lcSh0KX0sX2dldEluZGV4OmZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT10aGlzLmFuY2hvcnMuaW5kZXgodGhpcy5hbmNob3JzLmZpbHRlcihcIltocmVmJD0nXCIrZStcIiddXCIpKSksZX0sX2Rlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnhociYmdGhpcy54aHIuYWJvcnQoKSx0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1aS10YWJzIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIHVpLXRhYnMtY29sbGFwc2libGVcIiksdGhpcy50YWJsaXN0LnJlbW92ZUNsYXNzKFwidWktdGFicy1uYXYgdWktaGVscGVyLXJlc2V0IHVpLWhlbHBlci1jbGVhcmZpeCB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGxcIikucmVtb3ZlQXR0cihcInJvbGVcIiksdGhpcy5hbmNob3JzLnJlbW92ZUNsYXNzKFwidWktdGFicy1hbmNob3JcIikucmVtb3ZlQXR0cihcInJvbGVcIikucmVtb3ZlQXR0cihcInRhYkluZGV4XCIpLnJlbW92ZVVuaXF1ZUlkKCksdGhpcy50YWJzLmFkZCh0aGlzLnBhbmVscykuZWFjaChmdW5jdGlvbigpe2UuZGF0YSh0aGlzLFwidWktdGFicy1kZXN0cm95XCIpP2UodGhpcykucmVtb3ZlKCk6ZSh0aGlzKS5yZW1vdmVDbGFzcyhcInVpLXN0YXRlLWRlZmF1bHQgdWktc3RhdGUtYWN0aXZlIHVpLXN0YXRlLWRpc2FibGVkIHVpLWNvcm5lci10b3AgdWktY29ybmVyLWJvdHRvbSB1aS13aWRnZXQtY29udGVudCB1aS10YWJzLWFjdGl2ZSB1aS10YWJzLXBhbmVsXCIpLnJlbW92ZUF0dHIoXCJ0YWJJbmRleFwiKS5yZW1vdmVBdHRyKFwiYXJpYS1saXZlXCIpLnJlbW92ZUF0dHIoXCJhcmlhLWJ1c3lcIikucmVtb3ZlQXR0cihcImFyaWEtc2VsZWN0ZWRcIikucmVtb3ZlQXR0cihcImFyaWEtbGFiZWxsZWRieVwiKS5yZW1vdmVBdHRyKFwiYXJpYS1oaWRkZW5cIikucmVtb3ZlQXR0cihcImFyaWEtZXhwYW5kZWRcIikucmVtb3ZlQXR0cihcInJvbGVcIil9KSx0aGlzLnRhYnMuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyksaT10LmRhdGEoXCJ1aS10YWJzLWFyaWEtY29udHJvbHNcIik7aT90LmF0dHIoXCJhcmlhLWNvbnRyb2xzXCIsaSkucmVtb3ZlRGF0YShcInVpLXRhYnMtYXJpYS1jb250cm9sc1wiKTp0LnJlbW92ZUF0dHIoXCJhcmlhLWNvbnRyb2xzXCIpfSksdGhpcy5wYW5lbHMuc2hvdygpLFwiY29udGVudFwiIT09dGhpcy5vcHRpb25zLmhlaWdodFN0eWxlJiZ0aGlzLnBhbmVscy5jc3MoXCJoZWlnaHRcIixcIlwiKX0sZW5hYmxlOmZ1bmN0aW9uKGkpe3ZhciBzPXRoaXMub3B0aW9ucy5kaXNhYmxlZDtzIT09ITEmJihpPT09dD9zPSExOihpPXRoaXMuX2dldEluZGV4KGkpLHM9ZS5pc0FycmF5KHMpP2UubWFwKHMsZnVuY3Rpb24oZSl7cmV0dXJuIGUhPT1pP2U6bnVsbH0pOmUubWFwKHRoaXMudGFicyxmdW5jdGlvbihlLHQpe3JldHVybiB0IT09aT90Om51bGx9KSksdGhpcy5fc2V0dXBEaXNhYmxlZChzKSl9LGRpc2FibGU6ZnVuY3Rpb24oaSl7dmFyIHM9dGhpcy5vcHRpb25zLmRpc2FibGVkO2lmKHMhPT0hMCl7aWYoaT09PXQpcz0hMDtlbHNle2lmKGk9dGhpcy5fZ2V0SW5kZXgoaSksLTEhPT1lLmluQXJyYXkoaSxzKSlyZXR1cm47cz1lLmlzQXJyYXkocyk/ZS5tZXJnZShbaV0scykuc29ydCgpOltpXX10aGlzLl9zZXR1cERpc2FibGVkKHMpfX0sbG9hZDpmdW5jdGlvbih0LGkpe3Q9dGhpcy5fZ2V0SW5kZXgodCk7dmFyIGE9dGhpcyxuPXRoaXMudGFicy5lcSh0KSxyPW4uZmluZChcIi51aS10YWJzLWFuY2hvclwiKSxvPXRoaXMuX2dldFBhbmVsRm9yVGFiKG4pLGg9e3RhYjpuLHBhbmVsOm99O3MoclswXSl8fCh0aGlzLnhocj1lLmFqYXgodGhpcy5fYWpheFNldHRpbmdzKHIsaSxoKSksdGhpcy54aHImJlwiY2FuY2VsZWRcIiE9PXRoaXMueGhyLnN0YXR1c1RleHQmJihuLmFkZENsYXNzKFwidWktdGFicy1sb2FkaW5nXCIpLG8uYXR0cihcImFyaWEtYnVzeVwiLFwidHJ1ZVwiKSx0aGlzLnhoci5zdWNjZXNzKGZ1bmN0aW9uKGUpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtvLmh0bWwoZSksYS5fdHJpZ2dlcihcImxvYWRcIixpLGgpfSwxKX0pLmNvbXBsZXRlKGZ1bmN0aW9uKGUsdCl7c2V0VGltZW91dChmdW5jdGlvbigpe1wiYWJvcnRcIj09PXQmJmEucGFuZWxzLnN0b3AoITEsITApLG4ucmVtb3ZlQ2xhc3MoXCJ1aS10YWJzLWxvYWRpbmdcIiksby5yZW1vdmVBdHRyKFwiYXJpYS1idXN5XCIpLGU9PT1hLnhociYmZGVsZXRlIGEueGhyfSwxKX0pKSl9LF9hamF4U2V0dGluZ3M6ZnVuY3Rpb24odCxpLHMpe3ZhciBhPXRoaXM7cmV0dXJue3VybDp0LmF0dHIoXCJocmVmXCIpLGJlZm9yZVNlbmQ6ZnVuY3Rpb24odCxuKXtyZXR1cm4gYS5fdHJpZ2dlcihcImJlZm9yZUxvYWRcIixpLGUuZXh0ZW5kKHtqcVhIUjp0LGFqYXhTZXR0aW5nczpufSxzKSl9fX0sX2dldFBhbmVsRm9yVGFiOmZ1bmN0aW9uKHQpe3ZhciBpPWUodCkuYXR0cihcImFyaWEtY29udHJvbHNcIik7cmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKHRoaXMuX3Nhbml0aXplU2VsZWN0b3IoXCIjXCIraSkpfX0pfSkoalF1ZXJ5KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL21haW4vanF1ZXJ5L2xpYi9qcXVlcnktdWktMS4xMC4zLmN1c3RvbS5taW4uanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIGpRdWVyeSBwbHVnaW4gdG8gd3JhcCBlbGVtZW50c1xuICpcbiAqIGh0dHA6Ly9qc2Jpbi5jb20vaWRpemVcbiAqXG4gKi9cbihmdW5jdGlvbihhKSB7XG4gICAgYS5mbi53cmFwQ2hpbGRyZW4gPSBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZhciBiID0gYS5leHRlbmQoe2NoaWxkRWxlbTogdW5kZWZpbmVkLCBzZXRzOiAxLCB3cmFwcGVyOiBcImRpdlwifSwgYiB8fCB7fSk7XG4gICAgICAgIGlmIChiLmNoaWxkRWxlbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZCA9IGEodGhpcykuY2hpbGRyZW4oYi5jaGlsZEVsZW0pO1xuICAgICAgICAgICAgdmFyIGMgPSBbXTtcbiAgICAgICAgICAgIGQuZWFjaChmdW5jdGlvbihlLCBmKSB7XG4gICAgICAgICAgICAgICAgYy5wdXNoKGYpO1xuICAgICAgICAgICAgICAgIGlmICgoKGUgKyAxKSAlIGIuc2V0cyA9PT0gMCkgfHwgKGUgPT09IGQubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBhKGMpO1xuICAgICAgICAgICAgICAgICAgICBjID0gW107XG4gICAgICAgICAgICAgICAgICAgIGcud3JhcEFsbChhKFwiPFwiICsgYi53cmFwcGVyICsgXCI+XCIpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxufSkoalF1ZXJ5KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL21haW4vanF1ZXJ5L2xpYi9qcXVlcnkud3JhcENoaWxkcmVuLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogQnhTbGlkZXIgdjQuMCAtIEZ1bGx5IGxvYWRlZCwgcmVzcG9uc2l2ZSBjb250ZW50IHNsaWRlclxuICogaHR0cDovL2J4c2xpZGVyLmNvbVxuICpcbiAqIENvcHlyaWdodCAyMDEyLCBTdGV2ZW4gV2FuZGVyc2tpIC0gaHR0cDovL3N0ZXZlbndhbmRlcnNraS5jb20gLSBodHRwOi8vYnhjcmVhdGl2ZS5jb21cbiAqIFdyaXR0ZW4gd2hpbGUgZHJpbmtpbmcgQmVsZ2lhbiBhbGVzIGFuZCBsaXN0ZW5pbmcgdG8gamF6elxuICpcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBXVEZQTCBsaWNlbnNlIC0gaHR0cDovL3NhbS56b3kub3JnL3d0ZnBsL1xuICovXG5cbjsoZnVuY3Rpb24oJCl7XG5cbiAgICB2YXIgcGx1Z2luID0ge307XG4gICAgXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICBcbiAgICAgICAgLy8gR0VORVJBTFxuICAgICAgICBtb2RlOiAnaG9yaXpvbnRhbCcsXG4gICAgICAgIHNsaWRlU2VsZWN0b3I6ICcnLFxuICAgICAgICBpbmZpbml0ZUxvb3A6IHRydWUsXG4gICAgICAgIGhpZGVDb250cm9sT25FbmQ6IGZhbHNlLFxuICAgICAgICBzcGVlZDogNTAwLFxuICAgICAgICBlYXNpbmc6IG51bGwsXG4gICAgICAgIHNsaWRlTWFyZ2luOiAwLFxuICAgICAgICBzdGFydFNsaWRlOiAwLFxuICAgICAgICByYW5kb21TdGFydDogZmFsc2UsXG4gICAgICAgIGNhcHRpb25zOiBmYWxzZSxcbiAgICAgICAgdGlja2VyOiBmYWxzZSxcbiAgICAgICAgdGlja2VySG92ZXI6IGZhbHNlLFxuICAgICAgICBhZGFwdGl2ZUhlaWdodDogZmFsc2UsXG4gICAgICAgIGFkYXB0aXZlSGVpZ2h0U3BlZWQ6IDUwMCxcbiAgICAgICAgdG91Y2hFbmFibGVkOiB0cnVlLFxuICAgICAgICBzd2lwZVRocmVzaG9sZDogNTAsXG4gICAgICAgIHZpZGVvOiBmYWxzZSxcbiAgICAgICAgdXNlQ1NTOiB0cnVlLFxuICAgICAgICBcbiAgICAgICAgLy8gUEFHRVJcbiAgICAgICAgcGFnZXI6IHRydWUsXG4gICAgICAgIHBhZ2VyVHlwZTogJ2Z1bGwnLFxuICAgICAgICBwYWdlclNob3J0U2VwYXJhdG9yOiAnIC8gJyxcbiAgICAgICAgcGFnZXJTZWxlY3RvcjogbnVsbCxcbiAgICAgICAgYnVpbGRQYWdlcjogbnVsbCxcbiAgICAgICAgcGFnZXJDdXN0b206IG51bGwsXG4gICAgICAgIFxuICAgICAgICAvLyBDT05UUk9MU1xuICAgICAgICBjb250cm9sczogdHJ1ZSxcbiAgICAgICAgbmV4dFRleHQ6ICdOZXh0JyxcbiAgICAgICAgcHJldlRleHQ6ICdQcmV2JyxcbiAgICAgICAgbmV4dFNlbGVjdG9yOiBudWxsLFxuICAgICAgICBwcmV2U2VsZWN0b3I6IG51bGwsXG4gICAgICAgIGF1dG9Db250cm9sczogZmFsc2UsXG4gICAgICAgIHN0YXJ0VGV4dDogJ1N0YXJ0JyxcbiAgICAgICAgc3RvcFRleHQ6ICdTdG9wJyxcbiAgICAgICAgYXV0b0NvbnRyb2xzQ29tYmluZTogZmFsc2UsXG4gICAgICAgIGF1dG9Db250cm9sc1NlbGVjdG9yOiBudWxsLFxuICAgICAgICBcbiAgICAgICAgLy8gQVVUT1xuICAgICAgICBhdXRvOiBmYWxzZSxcbiAgICAgICAgcGF1c2U6IDQwMDAsXG4gICAgICAgIGF1dG9TdGFydDogdHJ1ZSxcbiAgICAgICAgYXV0b0RpcmVjdGlvbjogJ25leHQnLFxuICAgICAgICBhdXRvSG92ZXI6IGZhbHNlLFxuICAgICAgICBhdXRvRGVsYXk6IDAsXG4gICAgICAgIFxuICAgICAgICAvLyBDQVJPVVNFTFxuICAgICAgICBtaW5TbGlkZXM6IDEsXG4gICAgICAgIG1heFNsaWRlczogMSxcbiAgICAgICAgbW92ZVNsaWRlczogMCxcbiAgICAgICAgc2xpZGVXaWR0aDogMCxcbiAgICAgICAgXG4gICAgICAgIC8vIENBTExCQUNLU1xuICAgICAgICBvblNsaWRlckxvYWQ6IGZ1bmN0aW9uKCkge30sXG4gICAgICAgIG9uU2xpZGVCZWZvcmU6IGZ1bmN0aW9uKCkge30sXG4gICAgICAgIG9uU2xpZGVBZnRlcjogZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgb25TbGlkZU5leHQ6IGZ1bmN0aW9uKCkge30sXG4gICAgICAgIG9uU2xpZGVQcmV2OiBmdW5jdGlvbigpIHt9XG4gICAgfVxuXG4gICAgJC5mbi5ieFNsaWRlciA9IGZ1bmN0aW9uKG9wdGlvbnMpe1xuICAgICAgICBcbiAgICAgICAgaWYodGhpcy5sZW5ndGggPT0gMCkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgLy8gc3VwcG9ydCBtdXRsdGlwbGUgZWxlbWVudHNcbiAgICAgICAgaWYodGhpcy5sZW5ndGggPiAxKXtcbiAgICAgICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpeyQodGhpcykuYnhTbGlkZXIob3B0aW9ucyl9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBjcmVhdGUgYSBuYW1lc3BhY2UgdG8gYmUgdXNlZCB0aHJvdWdob3V0IHRoZSBwbHVnaW5cbiAgICAgICAgdmFyIHNsaWRlciA9IHt9O1xuICAgICAgICAvLyBzZXQgYSByZWZlcmVuY2UgdG8gb3VyIHNsaWRlciBlbGVtZW50XG4gICAgICAgIHZhciBlbCA9IHRoaXM7XG4gICAgICAgIHBsdWdpbi5lbCA9IHRoaXM7XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgICogPSBQUklWQVRFIEZVTkNUSU9OU1xuICAgICAgICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAgKi9cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsaXplcyBuYW1lc3BhY2Ugc2V0dGluZ3MgdG8gYmUgdXNlZCB0aHJvdWdob3V0IHBsdWdpblxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGluaXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8gbWVyZ2UgdXNlci1zdXBwbGllZCBvcHRpb25zIHdpdGggdGhlIGRlZmF1bHRzXG4gICAgICAgICAgICBzbGlkZXIuc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgLy8gc3RvcmUgdGhlIG9yaWdpbmFsIGNoaWxkcmVuXG4gICAgICAgICAgICBzbGlkZXIuY2hpbGRyZW4gPSBlbC5jaGlsZHJlbihzbGlkZXIuc2V0dGluZ3Muc2xpZGVTZWxlY3Rvcik7XG4gICAgICAgICAgICAvLyBpZiByYW5kb20gc3RhcnQsIHNldCB0aGUgc3RhcnRTbGlkZSBzZXR0aW5nIHRvIHJhbmRvbSBudW1iZXJcbiAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy5yYW5kb21TdGFydCkgc2xpZGVyLnNldHRpbmdzLnN0YXJ0U2xpZGUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoKTtcbiAgICAgICAgICAgIC8vIHN0b3JlIGFjdGl2ZSBzbGlkZSBpbmZvcm1hdGlvblxuICAgICAgICAgICAgc2xpZGVyLmFjdGl2ZSA9IHsgaW5kZXg6IHNsaWRlci5zZXR0aW5ncy5zdGFydFNsaWRlIH1cbiAgICAgICAgICAgIC8vIHN0b3JlIGlmIHRoZSBzbGlkZXIgaXMgaW4gY2Fyb3VzZWwgbW9kZSAoZGlzcGxheWluZyAvIG1vdmluZyBtdWx0aXBsZSBzbGlkZXMpXG4gICAgICAgICAgICBzbGlkZXIuY2Fyb3VzZWwgPSBzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzID4gMSB8fCBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzID4gMTtcbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgbWluIC8gbWF4IHdpZHRoIHRocmVzaG9sZHMgYmFzZWQgb24gbWluIC8gbWF4IG51bWJlciBvZiBzbGlkZXNcbiAgICAgICAgICAgIC8vIHVzZWQgdG8gc2V0dXAgYW5kIHVwZGF0ZSBjYXJvdXNlbCBzbGlkZXMgZGltZW5zaW9uc1xuICAgICAgICAgICAgc2xpZGVyLm1pblRocmVzaG9sZCA9IChzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzICogc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgpICsgKChzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzIC0gMSkgKiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pO1xuICAgICAgICAgICAgc2xpZGVyLm1heFRocmVzaG9sZCA9IChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzICogc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgpICsgKChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzIC0gMSkgKiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pO1xuICAgICAgICAgICAgLy8gc3RvcmUgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHNsaWRlciAoaWYgY3VycmVudGx5IGFuaW1hdGluZywgd29ya2luZyBpcyB0cnVlKVxuICAgICAgICAgICAgc2xpZGVyLndvcmtpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIGluaXRpYWxpemUgdGhlIGNvbnRyb2xzIG9iamVjdFxuICAgICAgICAgICAgc2xpZGVyLmNvbnRyb2xzID0ge307XG4gICAgICAgICAgICAvLyBkZXRlcm1pbmUgd2hpY2ggcHJvcGVydHkgdG8gdXNlIGZvciB0cmFuc2l0aW9uc1xuICAgICAgICAgICAgc2xpZGVyLmFuaW1Qcm9wID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJyA/ICd0b3AnIDogJ2xlZnQnO1xuICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIGlmIGhhcmR3YXJlIGFjY2VsZXJhdGlvbiBjYW4gYmUgdXNlZFxuICAgICAgICAgICAgc2xpZGVyLnVzaW5nQ1NTID0gc2xpZGVyLnNldHRpbmdzLnVzZUNTUyAmJiBzbGlkZXIuc2V0dGluZ3MubW9kZSAhPSAnZmFkZScgJiYgKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIG91ciB0ZXN0IGRpdiBlbGVtZW50XG4gICAgICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIC8vIGNzcyB0cmFuc2l0aW9uIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICB2YXIgcHJvcHMgPSBbJ1dlYmtpdFBlcnNwZWN0aXZlJywgJ01velBlcnNwZWN0aXZlJywgJ09QZXJzcGVjdGl2ZScsICdtc1BlcnNwZWN0aXZlJ107XG4gICAgICAgICAgICAgICAgLy8gdGVzdCBmb3IgZWFjaCBwcm9wZXJ0eVxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSBpbiBwcm9wcyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKGRpdi5zdHlsZVtwcm9wc1tpXV0gIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXIuY3NzUHJlZml4ID0gcHJvcHNbaV0ucmVwbGFjZSgnUGVyc3BlY3RpdmUnLCAnJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci5hbmltUHJvcCA9ICctJyArIHNsaWRlci5jc3NQcmVmaXggKyAnLXRyYW5zZm9ybSc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KCkpO1xuICAgICAgICAgICAgLy8gaWYgdmVydGljYWwgbW9kZSBhbHdheXMgbWFrZSBtYXhTbGlkZXMgYW5kIG1pblNsaWRlcyBlcXVhbFxuICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJykgc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyA9IHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXM7XG4gICAgICAgICAgICAvLyBwZXJmb3JtIGFsbCBET00gLyBDU1MgbW9kaWZpY2F0aW9uc1xuICAgICAgICAgICAgc2V0dXAoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQZXJmb3JtcyBhbGwgRE9NIGFuZCBDU1MgbW9kaWZpY2F0aW9uc1xuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHNldHVwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vIHdyYXAgZWwgaW4gYSB3cmFwcGVyXG4gICAgICAgICAgICBlbC53cmFwKCc8ZGl2IGNsYXNzPVwiYngtd3JhcHBlclwiPjxkaXYgY2xhc3M9XCJieC12aWV3cG9ydFwiPjwvZGl2PjwvZGl2PicpO1xuICAgICAgICAgICAgLy8gc3RvcmUgYSBuYW1zcGFjZSByZWZlcmVuY2UgdG8gLmJ4LXZpZXdwb3J0XG4gICAgICAgICAgICBzbGlkZXIudmlld3BvcnQgPSBlbC5wYXJlbnQoKTtcbiAgICAgICAgICAgIC8vIGFkZCBhIGxvYWRpbmcgZGl2IHRvIGRpc3BsYXkgd2hpbGUgaW1hZ2VzIGFyZSBsb2FkaW5nXG4gICAgICAgICAgICBzbGlkZXIubG9hZGVyID0gJCgnPGRpdiBjbGFzcz1cImJ4LWxvYWRpbmdcIiAvPicpO1xuICAgICAgICAgICAgc2xpZGVyLnZpZXdwb3J0LnByZXBlbmQoc2xpZGVyLmxvYWRlcik7XG4gICAgICAgICAgICAvLyBzZXQgZWwgdG8gYSBtYXNzaXZlIHdpZHRoLCB0byBob2xkIGFueSBuZWVkZWQgc2xpZGVzXG4gICAgICAgICAgICAvLyBhbHNvIHN0cmlwIGFueSBtYXJnaW4gYW5kIHBhZGRpbmcgZnJvbSBlbFxuICAgICAgICAgICAgZWwuY3NzKHtcbiAgICAgICAgICAgICAgICB3aWR0aDogc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnID8gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAqIDIxNSArICclJyA6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gaWYgdXNpbmcgQ1NTLCBhZGQgdGhlIGVhc2luZyBwcm9wZXJ0eVxuICAgICAgICAgICAgaWYoc2xpZGVyLnVzaW5nQ1NTICYmIHNsaWRlci5zZXR0aW5ncy5lYXNpbmcpe1xuICAgICAgICAgICAgICAgIGVsLmNzcygnLScgKyBzbGlkZXIuY3NzUHJlZml4ICsgJy10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbicsIHNsaWRlci5zZXR0aW5ncy5lYXNpbmcpO1xuICAgICAgICAgICAgLy8gaWYgbm90IHVzaW5nIENTUyBhbmQgbm8gZWFzaW5nIHZhbHVlIHdhcyBzdXBwbGllZCwgdXNlIHRoZSBkZWZhdWx0IEpTIGFuaW1hdGlvbiBlYXNpbmcgKHN3aW5nKVxuICAgICAgICAgICAgfWVsc2UgaWYoIXNsaWRlci5zZXR0aW5ncy5lYXNpbmcpe1xuICAgICAgICAgICAgICAgIHNsaWRlci5zZXR0aW5ncy5lYXNpbmcgPSAnc3dpbmcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbWFrZSBtb2RpZmljYXRpb25zIHRvIHRoZSB2aWV3cG9ydCAoLmJ4LXZpZXdwb3J0KVxuICAgICAgICAgICAgc2xpZGVyLnZpZXdwb3J0LmNzcyh7XG4gICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gYXBwbHkgY3NzIHRvIGFsbCBzbGlkZXIgY2hpbGRyZW5cbiAgICAgICAgICAgIHNsaWRlci5jaGlsZHJlbi5jc3Moe1xuICAgICAgICAgICAgICAgIGZsb2F0OiBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnaG9yaXpvbnRhbCcgPyAnbGVmdCcgOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgbGlzdFN0eWxlOiAnbm9uZScsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGFwcGx5IHRoZSBjYWxjdWxhdGVkIHdpZHRoIGFmdGVyIHRoZSBmbG9hdCBpcyBhcHBsaWVkIHRvIHByZXZlbnQgc2Nyb2xsYmFyIGludGVyZmVyZW5jZVxuICAgICAgICAgICAgc2xpZGVyLmNoaWxkcmVuLndpZHRoKGdldFNsaWRlV2lkdGgoKSk7XG4gICAgICAgICAgICAvLyBpZiBzbGlkZU1hcmdpbiBpcyBzdXBwbGllZCwgYWRkIHRoZSBjc3NcbiAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyAmJiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4gPiAwKSBzbGlkZXIuY2hpbGRyZW4uY3NzKCdtYXJnaW5SaWdodCcsIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbik7XG4gICAgICAgICAgICBpZihzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAndmVydGljYWwnICYmIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbiA+IDApIHNsaWRlci5jaGlsZHJlbi5jc3MoJ21hcmdpbkJvdHRvbScsIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbik7XG4gICAgICAgICAgICAvLyBpZiBcImZhZGVcIiBtb2RlLCBhZGQgcG9zaXRpb25pbmcgYW5kIHotaW5kZXggQ1NTXG4gICAgICAgICAgICBpZihzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnZmFkZScpe1xuICAgICAgICAgICAgICAgIHNsaWRlci5jaGlsZHJlbi5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgekluZGV4OiAwLFxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBwcmVwYXJlIHRoZSB6LWluZGV4IG9uIHRoZSBzaG93aW5nIGVsZW1lbnRcbiAgICAgICAgICAgICAgICBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLnNldHRpbmdzLnN0YXJ0U2xpZGUpLmNzcyh7ekluZGV4OiA1MCwgZGlzcGxheTogJ2Jsb2NrJ30pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY3JlYXRlIGFuIGVsZW1lbnQgdG8gY29udGFpbiBhbGwgc2xpZGVyIGNvbnRyb2xzIChwYWdlciwgc3RhcnQgLyBzdG9wLCBldGMpXG4gICAgICAgICAgICBzbGlkZXIuY29udHJvbHMuZWwgPSAkKCc8ZGl2IGNsYXNzPVwiYngtY29udHJvbHNcIiAvPicpO1xuICAgICAgICAgICAgLy8gaWYgY2FwdGlvbnMgYXJlIHJlcXVlc3RlZCwgYWRkIHRoZW1cbiAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy5jYXB0aW9ucykgYXBwZW5kQ2FwdGlvbnMoKTtcbiAgICAgICAgICAgIC8vIGlmIGluZmluaXRlIGxvb3AsIHByZXBhcmUgYWRkaXRpb25hbCBzbGlkZXNcbiAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgc2xpZGVyLnNldHRpbmdzLm1vZGUgIT0gJ2ZhZGUnICYmICFzbGlkZXIuc2V0dGluZ3MudGlja2VyKXtcbiAgICAgICAgICAgICAgICB2YXIgc2xpY2UgPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAndmVydGljYWwnID8gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyA6IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXM7XG4gICAgICAgICAgICAgICAgdmFyIHNsaWNlQXBwZW5kID0gc2xpZGVyLmNoaWxkcmVuLnNsaWNlKDAsIHNsaWNlKS5jbG9uZSgpLmFkZENsYXNzKCdieC1jbG9uZScpO1xuICAgICAgICAgICAgICAgIHZhciBzbGljZVByZXBlbmQgPSBzbGlkZXIuY2hpbGRyZW4uc2xpY2UoLXNsaWNlKS5jbG9uZSgpLmFkZENsYXNzKCdieC1jbG9uZScpO1xuICAgICAgICAgICAgICAgIGVsLmFwcGVuZChzbGljZUFwcGVuZCkucHJlcGVuZChzbGljZVByZXBlbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgc3RhcnRTbGlkZSBpcyBsYXN0IHNsaWRlXG4gICAgICAgICAgICBzbGlkZXIuYWN0aXZlLmxhc3QgPSBzbGlkZXIuc2V0dGluZ3Muc3RhcnRTbGlkZSA9PSBnZXRQYWdlclF0eSgpIC0gMTtcbiAgICAgICAgICAgIC8vIGlmIHZpZGVvIGlzIHRydWUsIHNldCB1cCB0aGUgZml0VmlkcyBwbHVnaW5cbiAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy52aWRlbykgZWwuZml0VmlkcygpO1xuICAgICAgICAgICAgLy8gb25seSBjaGVjayBmb3IgY29udHJvbCBhZGRpdGlvbiBpZiBub3QgaW4gXCJ0aWNrZXJcIiBtb2RlXG4gICAgICAgICAgICBpZighc2xpZGVyLnNldHRpbmdzLnRpY2tlcil7XG4gICAgICAgICAgICAgICAgLy8gaWYgcGFnZXIgaXMgcmVxdWVzdGVkLCBhZGQgaXRcbiAgICAgICAgICAgICAgICBpZihzbGlkZXIuc2V0dGluZ3MucGFnZXIpIGFwcGVuZFBhZ2VyKCk7XG4gICAgICAgICAgICAgICAgLy8gaWYgY29udHJvbHMgYXJlIHJlcXVlc3RlZCwgYWRkIHRoZW1cbiAgICAgICAgICAgICAgICBpZihzbGlkZXIuc2V0dGluZ3MuY29udHJvbHMpIGFwcGVuZENvbnRyb2xzKCk7XG4gICAgICAgICAgICAgICAgLy8gaWYgYXV0byBpcyB0cnVlLCBhbmQgYXV0byBjb250cm9scyBhcmUgcmVxdWVzdGVkLCBhZGQgdGhlbVxuICAgICAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy5hdXRvICYmIHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHMpIGFwcGVuZENvbnRyb2xzQXV0bygpO1xuICAgICAgICAgICAgICAgIC8vIGlmIGFueSBjb250cm9sIG9wdGlvbiBpcyByZXF1ZXN0ZWQsIGFkZCB0aGUgY29udHJvbHMgd3JhcHBlclxuICAgICAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy5jb250cm9scyB8fCBzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzIHx8IHNsaWRlci5zZXR0aW5ncy5wYWdlcikgc2xpZGVyLnZpZXdwb3J0LmFmdGVyKHNsaWRlci5jb250cm9scy5lbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBwcmVsb2FkIGFsbCBpbWFnZXMsIHRoZW4gcGVyZm9ybSBmaW5hbCBET00gLyBDU1MgbW9kaWZpY2F0aW9ucyB0aGF0IGRlcGVuZCBvbiBpbWFnZXMgYmVpbmcgbG9hZGVkXG4gICAgICAgICAgICBlbC5jaGlsZHJlbigpLmltYWdlc0xvYWRlZChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgbG9hZGluZyBET00gZWxlbWVudFxuICAgICAgICAgICAgICAgIHNsaWRlci5sb2FkZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBsZWZ0IC8gdG9wIHBvc2l0aW9uIG9mIFwiZWxcIlxuICAgICAgICAgICAgICAgIHNldFNsaWRlUG9zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAvLyBpZiBcInZlcnRpY2FsXCIgbW9kZSwgYWx3YXlzIHVzZSBhZGFwdGl2ZUhlaWdodCB0byBwcmV2ZW50IG9kZCBiZWhhdmlvclxuICAgICAgICAgICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAndmVydGljYWwnKSBzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgdmlld3BvcnQgaGVpZ2h0XG4gICAgICAgICAgICAgICAgc2xpZGVyLnZpZXdwb3J0LmhlaWdodChnZXRWaWV3cG9ydEhlaWdodCgpKTtcbiAgICAgICAgICAgICAgICAvLyBvblNsaWRlckxvYWQgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICBzbGlkZXIuc2V0dGluZ3Mub25TbGlkZXJMb2FkKHNsaWRlci5hY3RpdmUuaW5kZXgpO1xuICAgICAgICAgICAgICAgIC8vIGlmIGF1dG8gaXMgdHJ1ZSwgc3RhcnQgdGhlIHNob3dcbiAgICAgICAgICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG8gJiYgc2xpZGVyLnNldHRpbmdzLmF1dG9TdGFydCkgaW5pdEF1dG8oKTtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aWNrZXIgaXMgdHJ1ZSwgc3RhcnQgdGhlIHRpY2tlclxuICAgICAgICAgICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MudGlja2VyKSBpbml0VGlja2VyKCk7XG4gICAgICAgICAgICAgICAgLy8gaWYgcGFnZXIgaXMgcmVxdWVzdGVkLCBtYWtlIHRoZSBhcHByb3ByaWF0ZSBwYWdlciBsaW5rIGFjdGl2ZVxuICAgICAgICAgICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MucGFnZXIpIHVwZGF0ZVBhZ2VyQWN0aXZlKHNsaWRlci5zZXR0aW5ncy5zdGFydFNsaWRlKTtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBmb3IgYW55IHVwZGF0ZXMgdG8gdGhlIGNvbnRyb2xzIChsaWtlIGhpZGVDb250cm9sT25FbmQgdXBkYXRlcylcbiAgICAgICAgICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmNvbnRyb2xzKSB1cGRhdGVEaXJlY3Rpb25Db250cm9scygpO1xuICAgICAgICAgICAgICAgIC8vIGlmIHRvdWNoRW5hYmxlZCBpcyB0cnVlLCBzZXR1cCB0aGUgdG91Y2ggZXZlbnRzXG4gICAgICAgICAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy50b3VjaEVuYWJsZWQgJiYgIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIGluaXRUb3VjaCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBjYWxjdWxhdGVkIGhlaWdodCBvZiB0aGUgdmlld3BvcnQsIHVzZWQgdG8gZGV0ZXJtaW5lIGVpdGhlciBhZGFwdGl2ZUhlaWdodCBvciB0aGUgbWF4SGVpZ2h0IHZhbHVlXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgZ2V0Vmlld3BvcnRIZWlnaHQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IDA7XG4gICAgICAgICAgICAvLyBmaXJzdCBkZXRlcm1pbmUgd2hpY2ggY2hpbGRyZW4gKHNsaWRlcykgc2hvdWxkIGJlIHVzZWQgaW4gb3VyIGhlaWdodCBjYWxjdWxhdGlvblxuICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gJCgpO1xuICAgICAgICAgICAgLy8gaWYgbW9kZSBpcyBub3QgXCJ2ZXJ0aWNhbFwiLCBhZGFwdGl2ZUhlaWdodCBpcyBhbHdheXMgZmFsc2UsIHNvIHJldHVybiBhbGwgY2hpbGRyZW5cbiAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy5tb2RlICE9ICd2ZXJ0aWNhbCcgJiYgIXNsaWRlci5zZXR0aW5ncy5hZGFwdGl2ZUhlaWdodCl7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4gPSBzbGlkZXIuY2hpbGRyZW47XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAvLyBpZiBub3QgY2Fyb3VzZWwsIHJldHVybiB0aGUgc2luZ2xlIGFjdGl2ZSBjaGlsZFxuICAgICAgICAgICAgICAgIGlmKCFzbGlkZXIuY2Fyb3VzZWwpe1xuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbiA9IHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KTtcbiAgICAgICAgICAgICAgICAvLyBpZiBjYXJvdXNlbCwgcmV0dXJuIGEgc2xpY2Ugb2YgY2hpbGRyZW5cbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBpbmRpdmlkdWFsIHNsaWRlIGluZGV4XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SW5kZXggPSBzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA9PSAxID8gc2xpZGVyLmFjdGl2ZS5pbmRleCA6IHNsaWRlci5hY3RpdmUuaW5kZXggKiBnZXRNb3ZlQnkoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBjdXJyZW50IHNsaWRlIHRvIHRoZSBjaGlsZHJlblxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbiA9IHNsaWRlci5jaGlsZHJlbi5lcShjdXJyZW50SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjeWNsZSB0aHJvdWdoIHRoZSByZW1haW5pbmcgXCJzaG93aW5nXCIgc2xpZGVzXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPD0gc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyAtIDE7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBsb29wZWQgYmFjayB0byB0aGUgc3RhcnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRJbmRleCArIGkgPj0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW4gPSBjaGlsZHJlbi5hZGQoc2xpZGVyLmNoaWxkcmVuLmVxKGkgLSAxKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmFkZChzbGlkZXIuY2hpbGRyZW4uZXEoY3VycmVudEluZGV4ICsgaSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgXCJ2ZXJ0aWNhbFwiIG1vZGUsIGNhbGN1bGF0ZSB0aGUgc3VtIG9mIHRoZSBoZWlnaHRzIG9mIHRoZSBjaGlsZHJlblxuICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJyl7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4uZWFjaChmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgICAgICAgICAgaGVpZ2h0ICs9ICQodGhpcykub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBhZGQgdXNlci1zdXBwbGllZCBtYXJnaW5zXG4gICAgICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luID4gMCl7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCArPSBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4gKiAoc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyAtIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmIG5vdCBcInZlcnRpY2FsXCIgbW9kZSwgY2FsY3VsYXRlIHRoZSBtYXggaGVpZ2h0IG9mIHRoZSBjaGlsZHJlblxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLm91dGVySGVpZ2h0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KS5nZXQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgY2FsY3VsYXRlZCB3aWR0aCB0byBiZSBhcHBsaWVkIHRvIGVhY2ggc2xpZGVcbiAgICAgICAgICovXG4gICAgICAgIHZhciBnZXRTbGlkZVdpZHRoID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vIHN0YXJ0IHdpdGggYW55IHVzZXItc3VwcGxpZWQgc2xpZGUgd2lkdGhcbiAgICAgICAgICAgIHZhciBuZXdFbFdpZHRoID0gc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGg7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIGN1cnJlbnQgdmlld3BvcnQgd2lkdGhcbiAgICAgICAgICAgIHZhciB3cmFwV2lkdGggPSBzbGlkZXIudmlld3BvcnQud2lkdGgoKTtcbiAgICAgICAgICAgIC8vIGlmIHNsaWRlIHdpZHRoIHdhcyBub3Qgc3VwcGxpZWQsIHVzZSB0aGUgdmlld3BvcnQgd2lkdGggKG1lYW5zIG5vdCBjYXJvdXNlbClcbiAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoID09IDApe1xuICAgICAgICAgICAgICAgIG5ld0VsV2lkdGggPSB3cmFwV2lkdGg7XG4gICAgICAgICAgICAvLyBpZiBjYXJvdXNlbCwgdXNlIHRoZSB0aHJlc2hvbGRzIHRvIGRldGVybWluZSB0aGUgd2lkdGhcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGlmKHdyYXBXaWR0aCA+IHNsaWRlci5tYXhUaHJlc2hvbGQpe1xuICAgICAgICAgICAgICAgICAgICBuZXdFbFdpZHRoID0gKHdyYXBXaWR0aCAtIChzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4gKiAoc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyAtIDEpKSkgLyBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzO1xuICAgICAgICAgICAgICAgIH1lbHNlIGlmKHdyYXBXaWR0aCA8IHNsaWRlci5taW5UaHJlc2hvbGQpe1xuICAgICAgICAgICAgICAgICAgICBuZXdFbFdpZHRoID0gKHdyYXBXaWR0aCAtIChzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4gKiAoc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyAtIDEpKSkgLyBzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXdFbFdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHNsaWRlcyBjdXJyZW50bHkgdmlzaWJsZSBpbiB0aGUgdmlld3BvcnQgKGluY2x1ZGVzIHBhcnRpYWxseSB2aXNpYmxlIHNsaWRlcylcbiAgICAgICAgICovXG4gICAgICAgIHZhciBnZXROdW1iZXJTbGlkZXNTaG93aW5nID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBzbGlkZXNTaG93aW5nID0gMTtcbiAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyl7XG4gICAgICAgICAgICAgICAgLy8gaWYgdmlld3BvcnQgaXMgc21hbGxlciB0aGFuIG1pblRocmVzaG9sZCwgcmV0dXJuIG1pblNsaWRlc1xuICAgICAgICAgICAgICAgIGlmKHNsaWRlci52aWV3cG9ydC53aWR0aCgpIDwgc2xpZGVyLm1pblRocmVzaG9sZCl7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1Nob3dpbmcgPSBzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzO1xuICAgICAgICAgICAgICAgIC8vIGlmIHZpZXdwb3J0IGlzIGxhcmdlciB0aGFuIG1pblRocmVzaG9sZCwgcmV0dXJuIG1heFNsaWRlc1xuICAgICAgICAgICAgICAgIH1lbHNlIGlmKHNsaWRlci52aWV3cG9ydC53aWR0aCgpID4gc2xpZGVyLm1heFRocmVzaG9sZCl7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1Nob3dpbmcgPSBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzO1xuICAgICAgICAgICAgICAgIC8vIGlmIHZpZXdwb3J0IGlzIGJldHdlZW4gbWluIC8gbWF4IHRocmVzaG9sZHMsIGRpdmlkZSB2aWV3cG9ydCB3aWR0aCBieSBmaXJzdCBjaGlsZCB3aWR0aFxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRXaWR0aCA9IHNsaWRlci5jaGlsZHJlbi5maXJzdCgpLndpZHRoKCk7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1Nob3dpbmcgPSBNYXRoLmZsb29yKHNsaWRlci52aWV3cG9ydC53aWR0aCgpIC8gY2hpbGRXaWR0aCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgXCJ2ZXJ0aWNhbFwiIG1vZGUsIHNsaWRlcyBzaG93aW5nIHdpbGwgYWx3YXlzIGJlIG1pblNsaWRlc1xuICAgICAgICAgICAgfWVsc2UgaWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJyl7XG4gICAgICAgICAgICAgICAgc2xpZGVzU2hvd2luZyA9IHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2xpZGVzU2hvd2luZztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBwYWdlcyAob25lIGZ1bGwgdmlld3BvcnQgb2Ygc2xpZGVzIGlzIG9uZSBcInBhZ2VcIilcbiAgICAgICAgICovXG4gICAgICAgIHZhciBnZXRQYWdlclF0eSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgcGFnZXJRdHkgPSAwO1xuICAgICAgICAgICAgLy8gaWYgbW92ZVNsaWRlcyBpcyBzcGVjaWZpZWQgYnkgdGhlIHVzZXJcbiAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzID4gMCl7XG4gICAgICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCl7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VyUXR5ID0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAvIGdldE1vdmVCeSgpO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAvLyB1c2UgYSB3aGlsZSBsb29wIHRvIGRldGVybWluZSBwYWdlc1xuICAgICAgICAgICAgICAgICAgICB2YXIgYnJlYWtQb2ludCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb3VudGVyID0gMFxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIGJyZWFrcG9pbnQgZ29lcyBhYm92ZSBjaGlsZHJlbiBsZW5ndGgsIGNvdW50ZXIgaXMgdGhlIG51bWJlciBvZiBwYWdlc1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoYnJlYWtQb2ludCA8IHNsaWRlci5jaGlsZHJlbi5sZW5ndGgpe1xuICAgICAgICAgICAgICAgICAgICAgICAgKytwYWdlclF0eTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrUG9pbnQgPSBjb3VudGVyICsgZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlciArPSBzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA8PSBnZXROdW1iZXJTbGlkZXNTaG93aW5nKCkgPyBzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA6IGdldE51bWJlclNsaWRlc1Nob3dpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmIG1vdmVTbGlkZXMgaXMgMCAoYXV0bykgZGl2aWRlIGNoaWxkcmVuIGxlbmd0aCBieSBzaWRlcyBzaG93aW5nLCB0aGVuIHJvdW5kIHVwXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBwYWdlclF0eSA9IE1hdGguY2VpbChzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC8gZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwYWdlclF0eTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBpbmRpdnVhbCBzbGlkZXMgYnkgd2hpY2ggdG8gc2hpZnQgdGhlIHNsaWRlclxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGdldE1vdmVCeSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvLyBpZiBtb3ZlU2xpZGVzIHdhcyBzZXQgYnkgdGhlIHVzZXIgYW5kIG1vdmVTbGlkZXMgaXMgbGVzcyB0aGFuIG51bWJlciBvZiBzbGlkZXMgc2hvd2luZ1xuICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXMgPiAwICYmIHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzIDw9IGdldE51bWJlclNsaWRlc1Nob3dpbmcoKSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgbW92ZVNsaWRlcyBpcyAwIChhdXRvKVxuICAgICAgICAgICAgcmV0dXJuIGdldE51bWJlclNsaWRlc1Nob3dpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHMgdGhlIHNsaWRlcidzIChlbCkgbGVmdCBvciB0b3AgcG9zaXRpb25cbiAgICAgICAgICovXG4gICAgICAgIHZhciBzZXRTbGlkZVBvc2l0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vIGlmIGxhc3Qgc2xpZGVcbiAgICAgICAgICAgIGlmKHNsaWRlci5hY3RpdmUubGFzdCl7XG4gICAgICAgICAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyl7XG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgbGFzdCBjaGlsZCdzIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXN0Q2hpbGQgPSBzbGlkZXIuY2hpbGRyZW4ubGFzdCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBsYXN0Q2hpbGQucG9zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IHRoZSBsZWZ0IHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkoLShwb3NpdGlvbi5sZWZ0IC0gKHNsaWRlci52aWV3cG9ydC53aWR0aCgpIC0gbGFzdENoaWxkLndpZHRoKCkpKSwgJ3Jlc2V0JywgMCk7XG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ3ZlcnRpY2FsJyl7XG4gICAgICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgbGFzdCBzaG93aW5nIGluZGV4J3MgcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RTaG93aW5nSW5kZXggPSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmVxKGxhc3RTaG93aW5nSW5kZXgpLnBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgdG9wIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkoLXBvc2l0aW9uLnRvcCwgJ3Jlc2V0JywgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgbm90IGxhc3Qgc2xpZGVcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgcG9zaXRpb24gb2YgdGhlIGZpcnN0IHNob3dpbmcgc2xpZGVcbiAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmFjdGl2ZS5pbmRleCAqIGdldE1vdmVCeSgpKS5wb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGZvciBsYXN0IHNsaWRlXG4gICAgICAgICAgICAgICAgaWYgKHNsaWRlci5hY3RpdmUuaW5kZXggPT0gZ2V0UGFnZXJRdHkoKSAtIDEpIHNsaWRlci5hY3RpdmUubGFzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8gc2V0IHRoZSByZXBlY3RpdmUgcG9zaXRpb25cbiAgICAgICAgICAgICAgICBpZiAocG9zaXRpb24gIT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJykgc2V0UG9zaXRpb25Qcm9wZXJ0eSgtcG9zaXRpb24ubGVmdCwgJ3Jlc2V0JywgMCk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICd2ZXJ0aWNhbCcpIHNldFBvc2l0aW9uUHJvcGVydHkoLXBvc2l0aW9uLnRvcCwgJ3Jlc2V0JywgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgZWwncyBhbmltYXRpbmcgcHJvcGVydHkgcG9zaXRpb24gKHdoaWNoIGluIHR1cm4gd2lsbCBzb21ldGltZXMgYW5pbWF0ZSBlbCkuXG4gICAgICAgICAqIElmIHVzaW5nIENTUywgc2V0cyB0aGUgdHJhbnNmb3JtIHByb3BlcnR5LiBJZiBub3QgdXNpbmcgQ1NTLCBzZXRzIHRoZSB0b3AgLyBsZWZ0IHByb3BlcnR5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gdmFsdWUgKGludCkgXG4gICAgICAgICAqICAtIHRoZSBhbmltYXRpbmcgcHJvcGVydHkncyB2YWx1ZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gdHlwZSAoc3RyaW5nKSAnc2xpZGVyJywgJ3Jlc2V0JywgJ3RpY2tlcidcbiAgICAgICAgICogIC0gdGhlIHR5cGUgb2YgaW5zdGFuY2UgZm9yIHdoaWNoIHRoZSBmdW5jdGlvbiBpcyBiZWluZ1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gZHVyYXRpb24gKGludCkgXG4gICAgICAgICAqICAtIHRoZSBhbW91bnQgb2YgdGltZSAoaW4gbXMpIHRoZSB0cmFuc2l0aW9uIHNob3VsZCBvY2N1cHlcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHBhcmFtcyAoYXJyYXkpIG9wdGlvbmFsXG4gICAgICAgICAqICAtIGFuIG9wdGlvbmFsIHBhcmFtZXRlciBjb250YWluaW5nIGFueSB2YXJpYWJsZXMgdGhhdCBuZWVkIHRvIGJlIHBhc3NlZCBpblxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHNldFBvc2l0aW9uUHJvcGVydHkgPSBmdW5jdGlvbih2YWx1ZSwgdHlwZSwgZHVyYXRpb24sIHBhcmFtcyl7XG4gICAgICAgICAgICAvLyB1c2UgQ1NTIHRyYW5zZm9ybVxuICAgICAgICAgICAgaWYoc2xpZGVyLnVzaW5nQ1NTKXtcbiAgICAgICAgICAgICAgICAvLyBkZXRlcm1pbmUgdGhlIHRyYW5zbGF0ZTNkIHZhbHVlXG4gICAgICAgICAgICAgICAgdmFyIHByb3BWYWx1ZSA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICd2ZXJ0aWNhbCcgPyAndHJhbnNsYXRlM2QoMCwgJyArIHZhbHVlICsgJ3B4LCAwKScgOiAndHJhbnNsYXRlM2QoJyArIHZhbHVlICsgJ3B4LCAwLCAwKSc7XG4gICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBDU1MgdHJhbnNpdGlvbi1kdXJhdGlvblxuICAgICAgICAgICAgICAgIGVsLmNzcygnLScgKyBzbGlkZXIuY3NzUHJlZml4ICsgJy10cmFuc2l0aW9uLWR1cmF0aW9uJywgZHVyYXRpb24gLyAxMDAwICsgJ3MnKTtcbiAgICAgICAgICAgICAgICBpZih0eXBlID09ICdzbGlkZScpe1xuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIHByb3BlcnR5IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIGVsLmNzcyhzbGlkZXIuYW5pbVByb3AsIHByb3BWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGJpbmQgYSBjYWxsYmFjayBtZXRob2QgLSBleGVjdXRlcyB3aGVuIENTUyB0cmFuc2l0aW9uIGNvbXBsZXRlc1xuICAgICAgICAgICAgICAgICAgICBlbC5iaW5kKCd0cmFuc2l0aW9uZW5kIHdlYmtpdFRyYW5zaXRpb25FbmQgb1RyYW5zaXRpb25FbmQgTVNUcmFuc2l0aW9uRW5kJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVuYmluZCB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnVuYmluZCgndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQWZ0ZXJTbGlkZVRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfWVsc2UgaWYodHlwZSA9PSAncmVzZXQnKXtcbiAgICAgICAgICAgICAgICAgICAgZWwuY3NzKHNsaWRlci5hbmltUHJvcCwgcHJvcFZhbHVlKTtcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZih0eXBlID09ICd0aWNrZXInKXtcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSB0aGUgdHJhbnNpdGlvbiB1c2UgJ2xpbmVhcidcbiAgICAgICAgICAgICAgICAgICAgZWwuY3NzKCctJyArIHNsaWRlci5jc3NQcmVmaXggKyAnLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJywgJ2xpbmVhcicpO1xuICAgICAgICAgICAgICAgICAgICBlbC5jc3Moc2xpZGVyLmFuaW1Qcm9wLCBwcm9wVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAvLyBiaW5kIGEgY2FsbGJhY2sgbWV0aG9kIC0gZXhlY3V0ZXMgd2hlbiBDU1MgdHJhbnNpdGlvbiBjb21wbGV0ZXNcbiAgICAgICAgICAgICAgICAgICAgZWwuYmluZCgndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1bmJpbmQgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC51bmJpbmQoJ3RyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBNU1RyYW5zaXRpb25FbmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBwb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eShwYXJhbXNbJ3Jlc2V0VmFsdWUnXSwgJ3Jlc2V0JywgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydCB0aGUgbG9vcCBhZ2FpblxuICAgICAgICAgICAgICAgICAgICAgICAgdGlja2VyTG9vcCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB1c2UgSlMgYW5pbWF0ZVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdmFyIGFuaW1hdGVPYmogPSB7fTtcbiAgICAgICAgICAgICAgICBhbmltYXRlT2JqW3NsaWRlci5hbmltUHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBpZih0eXBlID09ICdzbGlkZScpe1xuICAgICAgICAgICAgICAgICAgICBlbC5hbmltYXRlKGFuaW1hdGVPYmosIGR1cmF0aW9uLCBzbGlkZXIuc2V0dGluZ3MuZWFzaW5nLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQWZ0ZXJTbGlkZVRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfWVsc2UgaWYodHlwZSA9PSAncmVzZXQnKXtcbiAgICAgICAgICAgICAgICAgICAgZWwuY3NzKHNsaWRlci5hbmltUHJvcCwgdmFsdWUpXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYodHlwZSA9PSAndGlja2VyJyl7XG4gICAgICAgICAgICAgICAgICAgIGVsLmFuaW1hdGUoYW5pbWF0ZU9iaiwgc3BlZWQsICdsaW5lYXInLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eShwYXJhbXNbJ3Jlc2V0VmFsdWUnXSwgJ3Jlc2V0JywgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBydW4gdGhlIHJlY3Vyc2l2ZSBsb29wIGFmdGVyIGFuaW1hdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgdGlja2VyTG9vcCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQb3B1bGF0ZXMgdGhlIHBhZ2VyIHdpdGggcHJvcGVyIGFtb3VudCBvZiBwYWdlc1xuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHBvcHVsYXRlUGFnZXIgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIHBhZ2VySHRtbCA9ICcnO1xuICAgICAgICAgICAgcGFnZXJRdHkgPSBnZXRQYWdlclF0eSgpO1xuICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGVhY2ggcGFnZXIgaXRlbVxuICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCBwYWdlclF0eTsgaSsrKXtcbiAgICAgICAgICAgICAgICB2YXIgbGlua0NvbnRlbnQgPSAnJztcbiAgICAgICAgICAgICAgICAvLyBpZiBhIGJ1aWxkUGFnZXIgZnVuY3Rpb24gaXMgc3VwcGxpZWQsIHVzZSBpdCB0byBnZXQgcGFnZXIgbGluayB2YWx1ZSwgZWxzZSB1c2UgaW5kZXggKyAxXG4gICAgICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIgJiYgJC5pc0Z1bmN0aW9uKHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyKSl7XG4gICAgICAgICAgICAgICAgICAgIGxpbmtDb250ZW50ID0gc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIoaSk7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlci5wYWdlckVsLmFkZENsYXNzKCdieC1jdXN0b20tcGFnZXInKTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgbGlua0NvbnRlbnQgPSBpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyLnBhZ2VyRWwuYWRkQ2xhc3MoJ2J4LWRlZmF1bHQtcGFnZXInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gdmFyIGxpbmtDb250ZW50ID0gc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIgJiYgJC5pc0Z1bmN0aW9uKHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyKSA/IHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyKGkpIDogaSArIDE7XG4gICAgICAgICAgICAgICAgLy8gYWRkIHRoZSBtYXJrdXAgdG8gdGhlIHN0cmluZ1xuICAgICAgICAgICAgICAgIHBhZ2VySHRtbCArPSAnPGRpdiBjbGFzcz1cImJ4LXBhZ2VyLWl0ZW1cIj48YSBocmVmPVwiXCIgZGF0YS1zbGlkZS1pbmRleD1cIicgKyBpICsgJ1wiIGNsYXNzPVwiYngtcGFnZXItbGlua1wiPicgKyBsaW5rQ29udGVudCArICc8L2E+PC9kaXY+JztcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBwb3B1bGF0ZSB0aGUgcGFnZXIgZWxlbWVudCB3aXRoIHBhZ2VyIGxpbmtzXG4gICAgICAgICAgICBzbGlkZXIucGFnZXJFbC5odG1sKHBhZ2VySHRtbCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBcHBlbmRzIHRoZSBwYWdlciB0byB0aGUgY29udHJvbHMgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGFwcGVuZFBhZ2VyID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmKCFzbGlkZXIuc2V0dGluZ3MucGFnZXJDdXN0b20pe1xuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgcGFnZXIgRE9NIGVsZW1lbnRcbiAgICAgICAgICAgICAgICBzbGlkZXIucGFnZXJFbCA9ICQoJzxkaXYgY2xhc3M9XCJieC1wYWdlclwiIC8+Jyk7XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBwYWdlciBzZWxlY3RvciB3YXMgc3VwcGxpZWQsIHBvcHVsYXRlIGl0IHdpdGggdGhlIHBhZ2VyXG4gICAgICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLnBhZ2VyU2VsZWN0b3Ipe1xuICAgICAgICAgICAgICAgICAgICAkKHNsaWRlci5zZXR0aW5ncy5wYWdlclNlbGVjdG9yKS5odG1sKHNsaWRlci5wYWdlckVsKTtcbiAgICAgICAgICAgICAgICAvLyBpZiBubyBwYWdlciBzZWxlY3RvciB3YXMgc3VwcGxpZWQsIGFkZCBpdCBhZnRlciB0aGUgd3JhcHBlclxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXIuY29udHJvbHMuZWwuYWRkQ2xhc3MoJ2J4LWhhcy1wYWdlcicpLmFwcGVuZChzbGlkZXIucGFnZXJFbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHBvcHVsYXRlIHRoZSBwYWdlclxuICAgICAgICAgICAgICAgIHBvcHVsYXRlUGFnZXIoKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHNsaWRlci5wYWdlckVsID0gJChzbGlkZXIuc2V0dGluZ3MucGFnZXJDdXN0b20pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYXNzaWduIHRoZSBwYWdlciBjbGljayBiaW5kaW5nXG4gICAgICAgICAgICBzbGlkZXIucGFnZXJFbC5kZWxlZ2F0ZSgnYScsICdjbGljaycsIGNsaWNrUGFnZXJCaW5kKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFwcGVuZHMgcHJldiAvIG5leHQgY29udHJvbHMgdG8gdGhlIGNvbnRyb2xzIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIHZhciBhcHBlbmRDb250cm9scyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzbGlkZXIuY29udHJvbHMubmV4dCA9ICQoJzxhIGNsYXNzPVwiYngtbmV4dFwiIGhyZWY9XCJcIj4nICsgc2xpZGVyLnNldHRpbmdzLm5leHRUZXh0ICsgJzwvYT4nKTtcbiAgICAgICAgICAgIHNsaWRlci5jb250cm9scy5wcmV2ID0gJCgnPGEgY2xhc3M9XCJieC1wcmV2XCIgaHJlZj1cIlwiPicgKyBzbGlkZXIuc2V0dGluZ3MucHJldlRleHQgKyAnPC9hPicpO1xuICAgICAgICAgICAgLy8gYmluZCBjbGljayBhY3Rpb25zIHRvIHRoZSBjb250cm9sc1xuICAgICAgICAgICAgc2xpZGVyLmNvbnRyb2xzLm5leHQuYmluZCgnY2xpY2snLCBjbGlja05leHRCaW5kKTtcbiAgICAgICAgICAgIHNsaWRlci5jb250cm9scy5wcmV2LmJpbmQoJ2NsaWNrJywgY2xpY2tQcmV2QmluZCk7XG4gICAgICAgICAgICAvLyBpZiBuZXh0U2xlY3RvciB3YXMgc3VwcGxpZWQsIHBvcHVsYXRlIGl0XG4gICAgICAgICAgICBpZihzbGlkZXIuc2V0dGluZ3MubmV4dFNlbGVjdG9yKXtcbiAgICAgICAgICAgICAgICAkKHNsaWRlci5zZXR0aW5ncy5uZXh0U2VsZWN0b3IpLmFwcGVuZChzbGlkZXIuY29udHJvbHMubmV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiBwcmV2U2xlY3RvciB3YXMgc3VwcGxpZWQsIHBvcHVsYXRlIGl0XG4gICAgICAgICAgICBpZihzbGlkZXIuc2V0dGluZ3MucHJldlNlbGVjdG9yKXtcbiAgICAgICAgICAgICAgICAkKHNsaWRlci5zZXR0aW5ncy5wcmV2U2VsZWN0b3IpLmFwcGVuZChzbGlkZXIuY29udHJvbHMucHJldik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBpZiBubyBjdXN0b20gc2VsZWN0b3JzIHdlcmUgc3VwcGxpZWRcbiAgICAgICAgICAgIGlmKCFzbGlkZXIuc2V0dGluZ3MubmV4dFNlbGVjdG9yICYmICFzbGlkZXIuc2V0dGluZ3MucHJldlNlbGVjdG9yKXtcbiAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIGNvbnRyb2xzIHRvIHRoZSBET01cbiAgICAgICAgICAgICAgICBzbGlkZXIuY29udHJvbHMuZGlyZWN0aW9uRWwgPSAkKCc8ZGl2IGNsYXNzPVwiYngtY29udHJvbHMtZGlyZWN0aW9uXCIgLz4nKTtcbiAgICAgICAgICAgICAgICAvLyBhZGQgdGhlIGNvbnRyb2wgZWxlbWVudHMgdG8gdGhlIGRpcmVjdGlvbkVsXG4gICAgICAgICAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmRpcmVjdGlvbkVsLmFwcGVuZChzbGlkZXIuY29udHJvbHMucHJldikuYXBwZW5kKHNsaWRlci5jb250cm9scy5uZXh0KTtcbiAgICAgICAgICAgICAgICAvLyBzbGlkZXIudmlld3BvcnQuYXBwZW5kKHNsaWRlci5jb250cm9scy5kaXJlY3Rpb25FbCk7XG4gICAgICAgICAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmVsLmFkZENsYXNzKCdieC1oYXMtY29udHJvbHMtZGlyZWN0aW9uJykuYXBwZW5kKHNsaWRlci5jb250cm9scy5kaXJlY3Rpb25FbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBcHBlbmRzIHN0YXJ0IC8gc3RvcCBhdXRvIGNvbnRyb2xzIHRvIHRoZSBjb250cm9scyBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgYXBwZW5kQ29udHJvbHNBdXRvID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHNsaWRlci5jb250cm9scy5zdGFydCA9ICQoJzxkaXYgY2xhc3M9XCJieC1jb250cm9scy1hdXRvLWl0ZW1cIj48YSBjbGFzcz1cImJ4LXN0YXJ0XCIgaHJlZj1cIlwiPicgKyBzbGlkZXIuc2V0dGluZ3Muc3RhcnRUZXh0ICsgJzwvYT48L2Rpdj4nKTtcbiAgICAgICAgICAgIHNsaWRlci5jb250cm9scy5zdG9wID0gJCgnPGRpdiBjbGFzcz1cImJ4LWNvbnRyb2xzLWF1dG8taXRlbVwiPjxhIGNsYXNzPVwiYngtc3RvcFwiIGhyZWY9XCJcIj4nICsgc2xpZGVyLnNldHRpbmdzLnN0b3BUZXh0ICsgJzwvYT48L2Rpdj4nKTtcbiAgICAgICAgICAgIC8vIGFkZCB0aGUgY29udHJvbHMgdG8gdGhlIERPTVxuICAgICAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmF1dG9FbCA9ICQoJzxkaXYgY2xhc3M9XCJieC1jb250cm9scy1hdXRvXCIgLz4nKTtcbiAgICAgICAgICAgIC8vIGJpbmQgY2xpY2sgYWN0aW9ucyB0byB0aGUgY29udHJvbHNcbiAgICAgICAgICAgIHNsaWRlci5jb250cm9scy5hdXRvRWwuZGVsZWdhdGUoJy5ieC1zdGFydCcsICdjbGljaycsIGNsaWNrU3RhcnRCaW5kKTtcbiAgICAgICAgICAgIHNsaWRlci5jb250cm9scy5hdXRvRWwuZGVsZWdhdGUoJy5ieC1zdG9wJywgJ2NsaWNrJywgY2xpY2tTdG9wQmluZCk7XG4gICAgICAgICAgICAvLyBpZiBhdXRvQ29udHJvbHNDb21iaW5lLCBpbnNlcnQgb25seSB0aGUgXCJzdGFydFwiIGNvbnRyb2xcbiAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHNDb21iaW5lKXtcbiAgICAgICAgICAgICAgICBzbGlkZXIuY29udHJvbHMuYXV0b0VsLmFwcGVuZChzbGlkZXIuY29udHJvbHMuc3RhcnQpO1xuICAgICAgICAgICAgLy8gaWYgYXV0b0NvbnRyb2xzQ29tYmluZSBpcyBmYWxzZSwgaW5zZXJ0IGJvdGggY29udHJvbHNcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHNsaWRlci5jb250cm9scy5hdXRvRWwuYXBwZW5kKHNsaWRlci5jb250cm9scy5zdGFydCkuYXBwZW5kKHNsaWRlci5jb250cm9scy5zdG9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmIGF1dG8gY29udHJvbHMgc2VsZWN0b3Igd2FzIHN1cHBsaWVkLCBwb3B1bGF0ZSBpdCB3aXRoIHRoZSBjb250cm9sc1xuICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9sc1NlbGVjdG9yKXtcbiAgICAgICAgICAgICAgICAkKHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHNTZWxlY3RvcikuaHRtbChzbGlkZXIuY29udHJvbHMuYXV0b0VsKTtcbiAgICAgICAgICAgIC8vIGlmIGF1dG8gY29udHJvbHMgc2VsZWN0b3Igd2FzIG5vdCBzdXBwbGllZCwgYWRkIGl0IGFmdGVyIHRoZSB3cmFwcGVyXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBzbGlkZXIuY29udHJvbHMuZWwuYWRkQ2xhc3MoJ2J4LWhhcy1jb250cm9scy1hdXRvJykuYXBwZW5kKHNsaWRlci5jb250cm9scy5hdXRvRWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBhdXRvIGNvbnRyb2xzXG4gICAgICAgICAgICB1cGRhdGVBdXRvQ29udHJvbHMoc2xpZGVyLnNldHRpbmdzLmF1dG9TdGFydCA/ICdzdG9wJyA6ICdzdGFydCcpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogQXBwZW5kcyBpbWFnZSBjYXB0aW9ucyB0byB0aGUgRE9NXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgYXBwZW5kQ2FwdGlvbnMgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8gY3ljbGUgdGhyb3VnaCBlYWNoIGNoaWxkXG4gICAgICAgICAgICBzbGlkZXIuY2hpbGRyZW4uZWFjaChmdW5jdGlvbihpbmRleCl7XG4gICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBpbWFnZSB0aXRsZSBhdHRyaWJ1dGVcbiAgICAgICAgICAgICAgICB2YXIgdGl0bGUgPSAkKHRoaXMpLmZpbmQoJ2ltZzpmaXJzdCcpLmF0dHIoJ3RpdGxlJyk7XG4gICAgICAgICAgICAgICAgLy8gYXBwZW5kIHRoZSBjYXB0aW9uXG4gICAgICAgICAgICAgICAgaWYgKHRpdGxlICE9IHVuZGVmaW5lZCkgJCh0aGlzKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJieC1jYXB0aW9uXCI+PHNwYW4+JyArIHRpdGxlICsgJzwvc3Bhbj48L2Rpdj4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2xpY2sgbmV4dCBiaW5kaW5nXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBlIChldmVudCkgXG4gICAgICAgICAqICAtIERPTSBldmVudCBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIHZhciBjbGlja05leHRCaW5kID0gZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAvLyBpZiBhdXRvIHNob3cgaXMgcnVubmluZywgc3RvcCBpdFxuICAgICAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvKSBlbC5zdG9wQXV0bygpO1xuICAgICAgICAgICAgZWwuZ29Ub05leHRTbGlkZSgpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2xpY2sgcHJldiBiaW5kaW5nXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBlIChldmVudCkgXG4gICAgICAgICAqICAtIERPTSBldmVudCBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIHZhciBjbGlja1ByZXZCaW5kID0gZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAvLyBpZiBhdXRvIHNob3cgaXMgcnVubmluZywgc3RvcCBpdFxuICAgICAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvKSBlbC5zdG9wQXV0bygpO1xuICAgICAgICAgICAgZWwuZ29Ub1ByZXZTbGlkZSgpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2xpY2sgc3RhcnQgYmluZGluZ1xuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gZSAoZXZlbnQpIFxuICAgICAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgY2xpY2tTdGFydEJpbmQgPSBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgIGVsLnN0YXJ0QXV0bygpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2xpY2sgc3RvcCBiaW5kaW5nXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBlIChldmVudCkgXG4gICAgICAgICAqICAtIERPTSBldmVudCBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIHZhciBjbGlja1N0b3BCaW5kID0gZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICBlbC5zdG9wQXV0bygpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENsaWNrIHBhZ2VyIGJpbmRpbmdcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIGUgKGV2ZW50KSBcbiAgICAgICAgICogIC0gRE9NIGV2ZW50IG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGNsaWNrUGFnZXJCaW5kID0gZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAvLyBpZiBhdXRvIHNob3cgaXMgcnVubmluZywgc3RvcCBpdFxuICAgICAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvKSBlbC5zdG9wQXV0bygpO1xuICAgICAgICAgICAgdmFyIHBhZ2VyTGluayA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciBwYWdlckluZGV4ID0gcGFyc2VJbnQocGFnZXJMaW5rLmF0dHIoJ2RhdGEtc2xpZGUtaW5kZXgnKSk7XG4gICAgICAgICAgICAvLyBpZiBjbGlja2VkIHBhZ2VyIGxpbmsgaXMgbm90IGFjdGl2ZSwgY29udGludWUgd2l0aCB0aGUgZ29Ub1NsaWRlIGNhbGxcbiAgICAgICAgICAgIGlmKHBhZ2VySW5kZXggIT0gc2xpZGVyLmFjdGl2ZS5pbmRleCkgZWwuZ29Ub1NsaWRlKHBhZ2VySW5kZXgpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlcyB0aGUgcGFnZXIgbGlua3Mgd2l0aCBhbiBhY3RpdmUgY2xhc3NcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHNsaWRlSW5kZXggKGludCkgXG4gICAgICAgICAqICAtIGluZGV4IG9mIHNsaWRlIHRvIG1ha2UgYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgdXBkYXRlUGFnZXJBY3RpdmUgPSBmdW5jdGlvbihzbGlkZUluZGV4KXtcbiAgICAgICAgICAgIC8vIGlmIFwic2hvcnRcIiBwYWdlciB0eXBlXG4gICAgICAgICAgICBpZihzbGlkZXIuc2V0dGluZ3MucGFnZXJUeXBlID09ICdzaG9ydCcpe1xuICAgICAgICAgICAgICAgIHNsaWRlci5wYWdlckVsLmh0bWwoKHNsaWRlSW5kZXggKyAxKSArIHNsaWRlci5zZXR0aW5ncy5wYWdlclNob3J0U2VwYXJhdG9yICsgc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmVtb3ZlIGFsbCBwYWdlciBhY3RpdmUgY2xhc3Nlc1xuICAgICAgICAgICAgc2xpZGVyLnBhZ2VyRWwuZmluZCgnYScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIC8vIGFwcGx5IHRoZSBhY3RpdmUgY2xhc3NcbiAgICAgICAgICAgIHNsaWRlci5wYWdlckVsLmZpbmQoJ2EnKS5lcShzbGlkZUluZGV4KS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQZXJmb3JtcyBuZWVkZWQgYWN0aW9ucyBhZnRlciBhIHNsaWRlIHRyYW5zaXRpb25cbiAgICAgICAgICovXG4gICAgICAgIHZhciB1cGRhdGVBZnRlclNsaWRlVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvLyBpZiBpbmZpbnRlIGxvb3AgaXMgdHJ1ZVxuICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCl7XG4gICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gJyc7XG4gICAgICAgICAgICAgICAgLy8gZmlyc3Qgc2xpZGVcbiAgICAgICAgICAgICAgICBpZihzbGlkZXIuYWN0aXZlLmluZGV4ID09IDApe1xuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgdGhlIG5ldyBwb3NpdGlvblxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcSgwKS5wb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgIC8vIGNhcm91c2VsLCBsYXN0IHNsaWRlXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PSBnZXRQYWdlclF0eSgpIC0gMSAmJiBzbGlkZXIuY2Fyb3VzZWwpe1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcSgoZ2V0UGFnZXJRdHkoKSAtIDEpICogZ2V0TW92ZUJ5KCkpLnBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgLy8gbGFzdCBzbGlkZVxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKHNsaWRlci5hY3RpdmUuaW5kZXggPT0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAtIDEpe1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMSkucG9zaXRpb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJykgeyBzZXRQb3NpdGlvblByb3BlcnR5KC1wb3NpdGlvbi5sZWZ0LCAncmVzZXQnLCAwKTs7IH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAndmVydGljYWwnKSB7IHNldFBvc2l0aW9uUHJvcGVydHkoLXBvc2l0aW9uLnRvcCwgJ3Jlc2V0JywgMCk7OyB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBkZWNsYXJlIHRoYXQgdGhlIHRyYW5zaXRpb24gaXMgY29tcGxldGVcbiAgICAgICAgICAgIHNsaWRlci53b3JraW5nID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBvblNsaWRlQWZ0ZXIgY2FsbGJhY2tcbiAgICAgICAgICAgIHNsaWRlci5zZXR0aW5ncy5vblNsaWRlQWZ0ZXIoc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXgpLCBzbGlkZXIub2xkSW5kZXgsIHNsaWRlci5hY3RpdmUuaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlcyB0aGUgYXV0byBjb250cm9scyBzdGF0ZSAoZWl0aGVyIGFjdGl2ZSwgb3IgY29tYmluZWQgc3dpdGNoKVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gc3RhdGUgKHN0cmluZykgXCJzdGFydFwiLCBcInN0b3BcIlxuICAgICAgICAgKiAgLSB0aGUgbmV3IHN0YXRlIG9mIHRoZSBhdXRvIHNob3dcbiAgICAgICAgICovXG4gICAgICAgIHZhciB1cGRhdGVBdXRvQ29udHJvbHMgPSBmdW5jdGlvbihzdGF0ZSl7XG4gICAgICAgICAgICAvLyBpZiBhdXRvQ29udHJvbHNDb21iaW5lIGlzIHRydWUsIHJlcGxhY2UgdGhlIGN1cnJlbnQgY29udHJvbCB3aXRoIHRoZSBuZXcgc3RhdGUgXG4gICAgICAgICAgICBpZihzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzQ29tYmluZSl7XG4gICAgICAgICAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5odG1sKHNsaWRlci5jb250cm9sc1tzdGF0ZV0pO1xuICAgICAgICAgICAgLy8gaWYgYXV0b0NvbnRyb2xzQ29tYmluZSBpcyBmYWxzZSwgYXBwbHkgdGhlIFwiYWN0aXZlXCIgY2xhc3MgdG8gdGhlIGFwcHJvcHJpYXRlIGNvbnRyb2wgXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBzbGlkZXIuY29udHJvbHMuYXV0b0VsLmZpbmQoJ2EnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5maW5kKCdhOm5vdCguYngtJyArIHN0YXRlICsgJyknKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcGRhdGVzIHRoZSBkaXJlY3Rpb24gY29udHJvbHMgKGNoZWNrcyBpZiBlaXRoZXIgc2hvdWxkIGJlIGhpZGRlbilcbiAgICAgICAgICovXG4gICAgICAgIHZhciB1cGRhdGVEaXJlY3Rpb25Db250cm9scyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvLyBpZiBpbmZpbml0ZUxvb3AgaXMgZmFsc2UgYW5kIGhpZGVDb250cm9sT25FbmQgaXMgdHJ1ZVxuICAgICAgICAgICAgaWYoIXNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgc2xpZGVyLnNldHRpbmdzLmhpZGVDb250cm9sT25FbmQpe1xuICAgICAgICAgICAgICAgIC8vIGlmIGZpcnN0IHNsaWRlXG4gICAgICAgICAgICAgICAgaWYgKHNsaWRlci5hY3RpdmUuaW5kZXggPT0gMCl7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlci5jb250cm9scy5wcmV2LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXIuY29udHJvbHMubmV4dC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAvLyBpZiBsYXN0IHNsaWRlXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PSBnZXRQYWdlclF0eSgpIC0gMSl7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlci5jb250cm9scy5uZXh0LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXIuY29udHJvbHMucHJldi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAvLyBpZiBhbnkgc2xpZGUgaW4gdGhlIG1pZGRsZVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXIuY29udHJvbHMucHJldi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyLmNvbnRyb2xzLm5leHQucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbHplcyB0aGUgYXV0byBwcm9jZXNzXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgaW5pdEF1dG8gPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgLy8gaWYgYXV0b0RlbGF5IHdhcyBzdXBwbGllZCwgbGF1bmNoIHRoZSBhdXRvIHNob3cgdXNpbmcgYSBzZXRUaW1lb3V0KCkgY2FsbFxuICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLmF1dG9EZWxheSA+IDApe1xuICAgICAgICAgICAgICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChlbC5zdGFydEF1dG8sIHNsaWRlci5zZXR0aW5ncy5hdXRvRGVsYXkpO1xuICAgICAgICAgICAgLy8gaWYgYXV0b0RlbGF5IHdhcyBub3Qgc3VwcGxpZWQsIHN0YXJ0IHRoZSBhdXRvIHNob3cgbm9ybWFsbHlcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGVsLnN0YXJ0QXV0bygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYgYXV0b0hvdmVyIGlzIHJlcXVlc3RlZFxuICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLmF1dG9Ib3Zlcil7XG4gICAgICAgICAgICAgICAgLy8gb24gZWwgaG92ZXJcbiAgICAgICAgICAgICAgICBlbC5ob3ZlcihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgYXV0byBzaG93IGlzIGN1cnJlbnRseSBwbGF5aW5nIChoYXMgYW4gYWN0aXZlIGludGVydmFsKVxuICAgICAgICAgICAgICAgICAgICBpZihzbGlkZXIuaW50ZXJ2YWwpe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RvcCB0aGUgYXV0byBzaG93IGFuZCBwYXNzIHRydWUgYWd1bWVudCB3aGljaCB3aWxsIHByZXZlbnQgY29udHJvbCB1cGRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsLnN0b3BBdXRvKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIGEgbmV3IGF1dG9QYXVzZWQgdmFsdWUgd2hpY2ggd2lsbCBiZSB1c2VkIGJ5IHRoZSByZWxhdGl2ZSBcIm1vdXNlb3V0XCIgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci5hdXRvUGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBhdXRvUGF1c2VkIHZhbHVlIHdhcyBjcmVhdGVkIGJlIHRoZSBwcmlvciBcIm1vdXNlb3ZlclwiIGV2ZW50XG4gICAgICAgICAgICAgICAgICAgIGlmKHNsaWRlci5hdXRvUGF1c2VkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0IHRoZSBhdXRvIHNob3cgYW5kIHBhc3MgdHJ1ZSBhZ3VtZW50IHdoaWNoIHdpbGwgcHJldmVudCBjb250cm9sIHVwZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3RhcnRBdXRvKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVzZXQgdGhlIGF1dG9QYXVzZWQgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci5hdXRvUGF1c2VkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW5pdGlhbHplcyB0aGUgdGlja2VyIHByb2Nlc3NcbiAgICAgICAgICovXG4gICAgICAgIHZhciBpbml0VGlja2VyID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBzdGFydFBvc2l0aW9uID0gMDtcbiAgICAgICAgICAgIC8vIGlmIGF1dG9EaXJlY3Rpb24gaXMgXCJuZXh0XCIsIGFwcGVuZCBhIGNsb25lIG9mIHRoZSBlbnRpcmUgc2xpZGVyXG4gICAgICAgICAgICBpZihzbGlkZXIuc2V0dGluZ3MuYXV0b0RpcmVjdGlvbiA9PSAnbmV4dCcpe1xuICAgICAgICAgICAgICAgIGVsLmFwcGVuZChzbGlkZXIuY2hpbGRyZW4uY2xvbmUoKS5hZGRDbGFzcygnYngtY2xvbmUnKSk7XG4gICAgICAgICAgICAvLyBpZiBhdXRvRGlyZWN0aW9uIGlzIFwicHJldlwiLCBwcmVwZW5kIGEgY2xvbmUgb2YgdGhlIGVudGlyZSBzbGlkZXIsIGFuZCBzZXQgdGhlIGxlZnQgcG9zaXRpb25cbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGVsLnByZXBlbmQoc2xpZGVyLmNoaWxkcmVuLmNsb25lKCkuYWRkQ2xhc3MoJ2J4LWNsb25lJykpO1xuICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5maXJzdCgpLnBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgc3RhcnRQb3NpdGlvbiA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyA/IC1wb3NpdGlvbi5sZWZ0IDogLXBvc2l0aW9uLnRvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkoc3RhcnRQb3NpdGlvbiwgJ3Jlc2V0JywgMCk7XG4gICAgICAgICAgICAvLyBkbyBub3QgYWxsb3cgY29udHJvbHMgaW4gdGlja2VyIG1vZGVcbiAgICAgICAgICAgIHNsaWRlci5zZXR0aW5ncy5wYWdlciA9IGZhbHNlO1xuICAgICAgICAgICAgc2xpZGVyLnNldHRpbmdzLmNvbnRyb2xzID0gZmFsc2U7XG4gICAgICAgICAgICBzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBpZiBhdXRvSG92ZXIgaXMgcmVxdWVzdGVkXG4gICAgICAgICAgICBpZihzbGlkZXIuc2V0dGluZ3MudGlja2VySG92ZXIgJiYgIXNsaWRlci51c2luZ0NTUyl7XG4gICAgICAgICAgICAgICAgLy8gb24gZWwgaG92ZXJcbiAgICAgICAgICAgICAgICBzbGlkZXIudmlld3BvcnQuaG92ZXIoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgZWwuc3RvcCgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgdG90YWwgd2lkdGggb2YgY2hpbGRyZW4gKHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBzcGVlZCByYXRpbylcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsRGltZW5zID0gMDtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyLmNoaWxkcmVuLmVhY2goZnVuY3Rpb24oaW5kZXgpe1xuICAgICAgICAgICAgICAgICAgICAgIHRvdGFsRGltZW5zICs9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdob3Jpem9udGFsJyA/ICQodGhpcykub3V0ZXJXaWR0aCh0cnVlKSA6ICQodGhpcykub3V0ZXJIZWlnaHQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIHNwZWVkIHJhdGlvICh1c2VkIHRvIGRldGVybWluZSB0aGUgbmV3IHNwZWVkIHRvIGZpbmlzaCB0aGUgcGF1c2VkIGFuaW1hdGlvbilcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGlvID0gc2xpZGVyLnNldHRpbmdzLnNwZWVkIC8gdG90YWxEaW1lbnM7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRldGVybWluZSB3aGljaCBwcm9wZXJ0eSB0byB1c2VcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BlcnR5ID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnID8gJ2xlZnQnIDogJ3RvcCc7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgbmV3IHNwZWVkXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdTcGVlZCA9IHJhdGlvICogKHRvdGFsRGltZW5zIC0gKE1hdGguYWJzKHBhcnNlSW50KGVsLmNzcyhwcm9wZXJ0eSkpKSkpO1xuICAgICAgICAgICAgICAgICAgICB0aWNrZXJMb29wKG5ld1NwZWVkKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHN0YXJ0IHRoZSB0aWNrZXIgbG9vcFxuICAgICAgICAgICAgdGlja2VyTG9vcCgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogUnVucyBhIGNvbnRpbnVvdXMgbG9vcCwgbmV3cyB0aWNrZXItc3R5bGVcbiAgICAgICAgICovXG4gICAgICAgIHZhciB0aWNrZXJMb29wID0gZnVuY3Rpb24ocmVzdW1lU3BlZWQpe1xuICAgICAgICAgICAgc3BlZWQgPSByZXN1bWVTcGVlZCA/IHJlc3VtZVNwZWVkIDogc2xpZGVyLnNldHRpbmdzLnNwZWVkO1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0ge2xlZnQ6IDAsIHRvcDogMH07XG4gICAgICAgICAgICB2YXIgcmVzZXQgPSB7bGVmdDogMCwgdG9wOiAwfTtcbiAgICAgICAgICAgIC8vIGlmIFwibmV4dFwiIGFuaW1hdGUgbGVmdCBwb3NpdGlvbiB0byBsYXN0IGNoaWxkLCB0aGVuIHJlc2V0IGxlZnQgdG8gMFxuICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLmF1dG9EaXJlY3Rpb24gPT0gJ25leHQnKXtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IGVsLmZpbmQoJy5ieC1jbG9uZScpLmZpcnN0KCkucG9zaXRpb24oKTtcbiAgICAgICAgICAgIC8vIGlmIFwicHJldlwiIGFuaW1hdGUgbGVmdCBwb3NpdGlvbiB0byAwLCB0aGVuIHJlc2V0IGxlZnQgdG8gZmlyc3Qgbm9uLWNsb25lIGNoaWxkXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICByZXNldCA9IHNsaWRlci5jaGlsZHJlbi5maXJzdCgpLnBvc2l0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYW5pbWF0ZVByb3BlcnR5ID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnID8gLXBvc2l0aW9uLmxlZnQgOiAtcG9zaXRpb24udG9wO1xuICAgICAgICAgICAgdmFyIHJlc2V0VmFsdWUgPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnaG9yaXpvbnRhbCcgPyAtcmVzZXQubGVmdCA6IC1yZXNldC50b3A7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0ge3Jlc2V0VmFsdWU6IHJlc2V0VmFsdWV9O1xuICAgICAgICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eShhbmltYXRlUHJvcGVydHksICd0aWNrZXInLCBzcGVlZCwgcGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWxpemVzIHRvdWNoIGV2ZW50c1xuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGluaXRUb3VjaCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvLyBpbml0aWFsaXplIG9iamVjdCB0byBjb250YWluIGFsbCB0b3VjaCB2YWx1ZXNcbiAgICAgICAgICAgIHNsaWRlci50b3VjaCA9IHtcbiAgICAgICAgICAgICAgICBzdGFydDoge3g6IDAsIHk6IDB9LFxuICAgICAgICAgICAgICAgIGVuZDoge3g6IDAsIHk6IDB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzbGlkZXIudmlld3BvcnQuYmluZCgndG91Y2hzdGFydCcsIG9uVG91Y2hTdGFydCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIGZvciBcInRvdWNoc3RhcnRcIlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gZSAoZXZlbnQpIFxuICAgICAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgb25Ub3VjaFN0YXJ0ID0gZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICBpZihzbGlkZXIud29ya2luZyl7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgLy8gcmVjb3JkIHRoZSBvcmlnaW5hbCBwb3NpdGlvbiB3aGVuIHRvdWNoIHN0YXJ0c1xuICAgICAgICAgICAgICAgIHNsaWRlci50b3VjaC5vcmlnaW5hbFBvcyA9IGVsLnBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgdmFyIG9yaWcgPSBlLm9yaWdpbmFsRXZlbnQ7XG4gICAgICAgICAgICAgICAgLy8gcmVjb3JkIHRoZSBzdGFydGluZyB0b3VjaCB4LCB5IGNvb3JkaW5hdGVzXG4gICAgICAgICAgICAgICAgc2xpZGVyLnRvdWNoLnN0YXJ0LnggPSBvcmlnLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYO1xuICAgICAgICAgICAgICAgIHNsaWRlci50b3VjaC5zdGFydC55ID0gb3JpZy5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWTtcbiAgICAgICAgICAgICAgICAvLyBiaW5kIGEgXCJ0b3VjaG1vdmVcIiBldmVudCB0byB0aGUgdmlld3BvcnRcbiAgICAgICAgICAgICAgICBzbGlkZXIudmlld3BvcnQuYmluZCgndG91Y2htb3ZlJywgb25Ub3VjaE1vdmUpO1xuICAgICAgICAgICAgICAgIC8vIGJpbmQgYSBcInRvdWNoZW5kXCIgZXZlbnQgdG8gdGhlIHZpZXdwb3J0XG4gICAgICAgICAgICAgICAgc2xpZGVyLnZpZXdwb3J0LmJpbmQoJ3RvdWNoZW5kJywgb25Ub3VjaEVuZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIGZvciBcInRvdWNobW92ZVwiXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSBlIChldmVudCkgXG4gICAgICAgICAqICAtIERPTSBldmVudCBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIHZhciBvblRvdWNoTW92ZSA9IGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgIT0gJ2ZhZGUnKXtcbiAgICAgICAgICAgICAgICB2YXIgb3JpZyA9IGUub3JpZ2luYWxFdmVudDtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSAwO1xuICAgICAgICAgICAgICAgIC8vIGlmIGhvcml6b250YWwsIGRyYWcgYWxvbmcgeCBheGlzXG4gICAgICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoYW5nZSA9IG9yaWcuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVggLSBzbGlkZXIudG91Y2guc3RhcnQueDtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MubGVmdCArIGNoYW5nZTtcbiAgICAgICAgICAgICAgICAvLyBpZiB2ZXJ0aWNhbCwgZHJhZyBhbG9uZyB5IGF4aXNcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoYW5nZSA9IG9yaWcuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVkgLSBzbGlkZXIudG91Y2guc3RhcnQueTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MudG9wICsgY2hhbmdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHZhbHVlLCAncmVzZXQnLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgZm9yIFwidG91Y2hlbmRcIlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gZSAoZXZlbnQpIFxuICAgICAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgb25Ub3VjaEVuZCA9IGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgc2xpZGVyLnZpZXdwb3J0LnVuYmluZCgndG91Y2htb3ZlJywgb25Ub3VjaE1vdmUpO1xuICAgICAgICAgICAgdmFyIG9yaWcgPSBlLm9yaWdpbmFsRXZlbnQ7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSAwO1xuICAgICAgICAgICAgLy8gcmVjb3JkIGVuZCB4LCB5IHBvc2l0aW9uc1xuICAgICAgICAgICAgc2xpZGVyLnRvdWNoLmVuZC54ID0gb3JpZy5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgICAgIHNsaWRlci50b3VjaC5lbmQueSA9IG9yaWcuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVk7XG4gICAgICAgICAgICAvLyBpZiBmYWRlIG1vZGUsIGNoZWNrIGlmIGFic29sdXRlIHggZGlzdGFuY2UgY2xlYXJzIHRoZSB0aHJlc2hvbGRcbiAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdmYWRlJyl7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3RhbmNlID0gTWF0aC5hYnMoc2xpZGVyLnRvdWNoLnN0YXJ0LnggLSBzbGlkZXIudG91Y2guZW5kLngpO1xuICAgICAgICAgICAgICAgIGlmKGRpc3RhbmNlID49IHNsaWRlci5zZXR0aW5ncy5zd2lwZVRocmVzaG9sZCl7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlci50b3VjaC5zdGFydC54ID4gc2xpZGVyLnRvdWNoLmVuZC54ID8gZWwuZ29Ub05leHRTbGlkZSgpIDogZWwuZ29Ub1ByZXZTbGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBlbC5zdG9wQXV0bygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG5vdCBmYWRlIG1vZGVcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IDA7XG4gICAgICAgICAgICAgICAgLy8gY2FsY3VsYXRlIGRpc3RhbmNlIGFuZCBlbCdzIGFuaW1hdGUgcHJvcGVydHlcbiAgICAgICAgICAgICAgICBpZihzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnaG9yaXpvbnRhbCcpe1xuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IHNsaWRlci50b3VjaC5lbmQueCAtIHNsaWRlci50b3VjaC5zdGFydC54O1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHNsaWRlci50b3VjaC5vcmlnaW5hbFBvcy5sZWZ0O1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IHNsaWRlci50b3VjaC5lbmQueSAtIHNsaWRlci50b3VjaC5zdGFydC55O1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHNsaWRlci50b3VjaC5vcmlnaW5hbFBvcy50b3A7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGlmIG5vdCBpbmZpbml0ZSBsb29wIGFuZCBmaXJzdCAvIGxhc3Qgc2xpZGUsIGRvIG5vdCBhdHRlbXB0IGEgc2xpZGUgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIGlmKCFzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wICYmICgoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PSAwICYmIGRpc3RhbmNlID4gMCkgfHwgKHNsaWRlci5hY3RpdmUubGFzdCAmJiBkaXN0YW5jZSA8IDApKSl7XG4gICAgICAgICAgICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkodmFsdWUsICdyZXNldCcsIDIwMCk7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGRpc3RhbmNlIGNsZWFycyB0aHJlc2hvbGRcbiAgICAgICAgICAgICAgICAgICAgaWYoTWF0aC5hYnMoZGlzdGFuY2UpID49IHNsaWRlci5zZXR0aW5ncy5zd2lwZVRocmVzaG9sZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA8IDAgPyBlbC5nb1RvTmV4dFNsaWRlKCkgOiBlbC5nb1RvUHJldlNsaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5zdG9wQXV0bygpO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsLmFuaW1hdGUocHJvcGVydHksIDIwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHZhbHVlLCAncmVzZXQnLCAyMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2xpZGVyLnZpZXdwb3J0LnVuYmluZCgndG91Y2hlbmQnLCBvblRvdWNoRW5kKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgICAqID0gUFVCTElDIEZVTkNUSU9OU1xuICAgICAgICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAgKi9cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQZXJmb3JtcyBzbGlkZSB0cmFuc2l0aW9uIHRvIHRoZSBzcGVjaWZpZWQgc2xpZGVcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHNsaWRlSW5kZXggKGludCkgXG4gICAgICAgICAqICAtIHRoZSBkZXN0aW5hdGlvbiBzbGlkZSdzIGluZGV4ICh6ZXJvLWJhc2VkKVxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gZGlyZWN0aW9uIChzdHJpbmcpIFxuICAgICAgICAgKiAgLSBJTlRFUk5BTCBVU0UgT05MWSAtIHRoZSBkaXJlY3Rpb24gb2YgdHJhdmVsIChcInByZXZcIiAvIFwibmV4dFwiKVxuICAgICAgICAgKi9cbiAgICAgICAgZWwuZ29Ub1NsaWRlID0gZnVuY3Rpb24oc2xpZGVJbmRleCwgZGlyZWN0aW9uKXtcbiAgICAgICAgICAgIC8vIGlmIHBsdWdpbiBpcyBjdXJyZW50bHkgaW4gbW90aW9uLCBpZ25vcmUgcmVxdWVzdFxuICAgICAgICAgICAgaWYoc2xpZGVyLndvcmtpbmcgfHwgc2xpZGVyLmFjdGl2ZS5pbmRleCA9PSBzbGlkZUluZGV4KSByZXR1cm47XG4gICAgICAgICAgICAvLyBkZWNsYXJlIHRoYXQgcGx1Z2luIGlzIGluIG1vdGlvblxuICAgICAgICAgICAgc2xpZGVyLndvcmtpbmcgPSB0cnVlO1xuICAgICAgICAgICAgLy8gc3RvcmUgdGhlIG9sZCBpbmRleFxuICAgICAgICAgICAgc2xpZGVyLm9sZEluZGV4ID0gc2xpZGVyLmFjdGl2ZS5pbmRleDtcbiAgICAgICAgICAgIC8vIGlmIHNsaWRlSW5kZXggaXMgbGVzcyB0aGFuIHplcm8sIHNldCBhY3RpdmUgaW5kZXggdG8gbGFzdCBjaGlsZCAodGhpcyBoYXBwZW5zIGR1cmluZyBpbmZpbml0ZSBsb29wKVxuICAgICAgICAgICAgaWYoc2xpZGVJbmRleCA8IDApe1xuICAgICAgICAgICAgICAgIHNsaWRlci5hY3RpdmUuaW5kZXggPSBnZXRQYWdlclF0eSgpIC0gMTtcbiAgICAgICAgICAgIC8vIGlmIHNsaWRlSW5kZXggaXMgZ3JlYXRlciB0aGFuIGNoaWxkcmVuIGxlbmd0aCwgc2V0IGFjdGl2ZSBpbmRleCB0byAwICh0aGlzIGhhcHBlbnMgZHVyaW5nIGluZmluaXRlIGxvb3ApXG4gICAgICAgICAgICB9ZWxzZSBpZihzbGlkZUluZGV4ID49IGdldFBhZ2VyUXR5KCkpe1xuICAgICAgICAgICAgICAgIHNsaWRlci5hY3RpdmUuaW5kZXggPSAwO1xuICAgICAgICAgICAgLy8gc2V0IGFjdGl2ZSBpbmRleCB0byByZXF1ZXN0ZWQgc2xpZGVcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHNsaWRlci5hY3RpdmUuaW5kZXggPSBzbGlkZUluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gb25TbGlkZUJlZm9yZSwgb25TbGlkZU5leHQsIG9uU2xpZGVQcmV2IGNhbGxiYWNrc1xuICAgICAgICAgICAgc2xpZGVyLnNldHRpbmdzLm9uU2xpZGVCZWZvcmUoc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXgpLCBzbGlkZXIub2xkSW5kZXgsIHNsaWRlci5hY3RpdmUuaW5kZXgpO1xuICAgICAgICAgICAgaWYoZGlyZWN0aW9uID09ICduZXh0Jyl7XG4gICAgICAgICAgICAgICAgc2xpZGVyLnNldHRpbmdzLm9uU2xpZGVOZXh0KHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KSwgc2xpZGVyLm9sZEluZGV4LCBzbGlkZXIuYWN0aXZlLmluZGV4KTtcbiAgICAgICAgICAgIH1lbHNlIGlmKGRpcmVjdGlvbiA9PSAncHJldicpe1xuICAgICAgICAgICAgICAgIHNsaWRlci5zZXR0aW5ncy5vblNsaWRlUHJldihzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmFjdGl2ZS5pbmRleCksIHNsaWRlci5vbGRJbmRleCwgc2xpZGVyLmFjdGl2ZS5pbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjaGVjayBpZiBsYXN0IHNsaWRlXG4gICAgICAgICAgICBzbGlkZXIuYWN0aXZlLmxhc3QgPSBzbGlkZXIuYWN0aXZlLmluZGV4ID49IGdldFBhZ2VyUXR5KCkgLSAxO1xuICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBwYWdlciB3aXRoIGFjdGl2ZSBjbGFzc1xuICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLnBhZ2VyKSB1cGRhdGVQYWdlckFjdGl2ZShzbGlkZXIuYWN0aXZlLmluZGV4KTtcbiAgICAgICAgICAgIC8vIC8vIGNoZWNrIGZvciBkaXJlY3Rpb24gY29udHJvbCB1cGRhdGVcbiAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy5jb250cm9scykgdXBkYXRlRGlyZWN0aW9uQ29udHJvbHMoKTtcbiAgICAgICAgICAgIC8vIGlmIHNsaWRlciBpcyBzZXQgdG8gbW9kZTogXCJmYWRlXCJcbiAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy5tb2RlID09ICdmYWRlJyl7XG4gICAgICAgICAgICAgICAgLy8gaWYgYWRhcHRpdmVIZWlnaHQgaXMgdHJ1ZSBhbmQgbmV4dCBoZWlnaHQgaXMgZGlmZmVyZW50IGZyb20gY3VycmVudCBoZWlnaHQsIGFuaW1hdGUgdG8gdGhlIG5ldyBoZWlnaHRcbiAgICAgICAgICAgICAgICBpZihzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHQgJiYgc2xpZGVyLnZpZXdwb3J0LmhlaWdodCgpICE9IGdldFZpZXdwb3J0SGVpZ2h0KCkpe1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXIudmlld3BvcnQuYW5pbWF0ZSh7aGVpZ2h0OiBnZXRWaWV3cG9ydEhlaWdodCgpfSwgc2xpZGVyLnNldHRpbmdzLmFkYXB0aXZlSGVpZ2h0U3BlZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBmYWRlIG91dCB0aGUgdmlzaWJsZSBjaGlsZCBhbmQgcmVzZXQgaXRzIHotaW5kZXggdmFsdWVcbiAgICAgICAgICAgICAgICBzbGlkZXIuY2hpbGRyZW4uZmlsdGVyKCc6dmlzaWJsZScpLmZhZGVPdXQoc2xpZGVyLnNldHRpbmdzLnNwZWVkKS5jc3Moe3pJbmRleDogMH0pO1xuICAgICAgICAgICAgICAgIC8vIGZhZGUgaW4gdGhlIG5ld2x5IHJlcXVlc3RlZCBzbGlkZVxuICAgICAgICAgICAgICAgIHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KS5jc3MoJ3pJbmRleCcsIDUxKS5mYWRlSW4oc2xpZGVyLnNldHRpbmdzLnNwZWVkLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnekluZGV4JywgNTApO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVBZnRlclNsaWRlVHJhbnNpdGlvbigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gc2xpZGVyIG1vZGUgaXMgbm90IFwiZmFkZVwiXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAvLyBpZiBhZGFwdGl2ZUhlaWdodCBpcyB0cnVlIGFuZCBuZXh0IGhlaWdodCBpcyBkaWZmZXJlbnQgZnJvbSBjdXJyZW50IGhlaWdodCwgYW5pbWF0ZSB0byB0aGUgbmV3IGhlaWdodFxuICAgICAgICAgICAgICAgIGlmKHNsaWRlci5zZXR0aW5ncy5hZGFwdGl2ZUhlaWdodCAmJiBzbGlkZXIudmlld3BvcnQuaGVpZ2h0KCkgIT0gZ2V0Vmlld3BvcnRIZWlnaHQoKSl7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlci52aWV3cG9ydC5hbmltYXRlKHtoZWlnaHQ6IGdldFZpZXdwb3J0SGVpZ2h0KCl9LCBzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHRTcGVlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBtb3ZlQnkgPSAwO1xuICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHtsZWZ0OiAwLCB0b3A6IDB9O1xuICAgICAgICAgICAgICAgIC8vIGlmIGNhcm91c2VsIGFuZCBub3QgaW5maW5pdGUgbG9vcFxuICAgICAgICAgICAgICAgIGlmKCFzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wICYmIHNsaWRlci5jYXJvdXNlbCAmJiBzbGlkZXIuYWN0aXZlLmxhc3Qpe1xuICAgICAgICAgICAgICAgICAgICBpZihzbGlkZXIuc2V0dGluZ3MubW9kZSA9PSAnaG9yaXpvbnRhbCcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBsYXN0IGNoaWxkIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdENoaWxkID0gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gbGFzdENoaWxkLnBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIHBvc2l0aW9uIG9mIHRoZSBsYXN0IHNsaWRlXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlQnkgPSBzbGlkZXIudmlld3BvcnQud2lkdGgoKSAtIGxhc3RDaGlsZC53aWR0aCgpO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdldCBsYXN0IHNob3dpbmcgaW5kZXggcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYXN0U2hvd2luZ0luZGV4ID0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAtIHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcShsYXN0U2hvd2luZ0luZGV4KS5wb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGhvcml6b250YWwgY2Fyb3VzZWwsIGdvaW5nIHByZXZpb3VzIHdoaWxlIG9uIGZpcnN0IHNsaWRlIChpbmZpbml0ZUxvb3AgbW9kZSlcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihzbGlkZXIuY2Fyb3VzZWwgJiYgc2xpZGVyLmFjdGl2ZS5sYXN0ICYmIGRpcmVjdGlvbiA9PSAncHJldicpe1xuICAgICAgICAgICAgICAgICAgICAvLyBnZXQgdGhlIGxhc3QgY2hpbGQgcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVxID0gc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXMgPT0gMSA/IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgLSBnZXRNb3ZlQnkoKSA6ICgoZ2V0UGFnZXJRdHkoKSAtIDEpICogZ2V0TW92ZUJ5KCkpIC0gKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggLSBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RDaGlsZCA9IGVsLmNoaWxkcmVuKCcuYngtY2xvbmUnKS5lcShlcSk7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gbGFzdENoaWxkLnBvc2l0aW9uKCk7XG4gICAgICAgICAgICAgICAgLy8gaWYgaW5maW5pdGUgbG9vcCBhbmQgXCJOZXh0XCIgaXMgY2xpY2tlZCBvbiB0aGUgbGFzdCBzbGlkZVxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGRpcmVjdGlvbiA9PSAnbmV4dCcgJiYgc2xpZGVyLmFjdGl2ZS5pbmRleCA9PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgLy8gZ2V0IHRoZSBsYXN0IGNsb25lIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gZWwuZmluZCgnLmJ4LWNsb25lJykuZXEoc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcykucG9zaXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyLmFjdGl2ZS5sYXN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gbm9ybWFsIG5vbi16ZXJvIHJlcXVlc3RzXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoc2xpZGVJbmRleCA+PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RFbCA9IHNsaWRlSW5kZXggKiBnZXRNb3ZlQnkoKTtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZXEocmVxdWVzdEVsKS5wb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBwbHVnaW4gdmFsdWVzIHRvIGJlIGFuaW1hdGVkXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT0gJ2hvcml6b250YWwnID8gLShwb3NpdGlvbi5sZWZ0IC0gbW92ZUJ5KSA6IC1wb3NpdGlvbi50b3A7XG4gICAgICAgICAgICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eSh2YWx1ZSwgJ3NsaWRlJywgc2xpZGVyLnNldHRpbmdzLnNwZWVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyYW5zaXRpb25zIHRvIHRoZSBuZXh0IHNsaWRlIGluIHRoZSBzaG93XG4gICAgICAgICAqL1xuICAgICAgICBlbC5nb1RvTmV4dFNsaWRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIC8vIGlmIGluZmluaXRlTG9vcCBpcyBmYWxzZSBhbmQgbGFzdCBwYWdlIGlzIHNob3dpbmcsIGRpc3JlZ2FyZCBjYWxsXG4gICAgICAgICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgc2xpZGVyLmFjdGl2ZS5sYXN0KSByZXR1cm47XG4gICAgICAgICAgICB2YXIgcGFnZXJJbmRleCA9IHNsaWRlci5hY3RpdmUuaW5kZXggKyAxO1xuICAgICAgICAgICAgZWwuZ29Ub1NsaWRlKHBhZ2VySW5kZXgsICduZXh0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmFuc2l0aW9ucyB0byB0aGUgcHJldiBzbGlkZSBpbiB0aGUgc2hvd1xuICAgICAgICAgKi9cbiAgICAgICAgZWwuZ29Ub1ByZXZTbGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvLyBpZiBpbmZpbml0ZUxvb3AgaXMgZmFsc2UgYW5kIGxhc3QgcGFnZSBpcyBzaG93aW5nLCBkaXNyZWdhcmQgY2FsbFxuICAgICAgICAgICAgaWYgKCFzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wICYmIHNsaWRlci5hY3RpdmUuaW5kZXggPT0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIHBhZ2VySW5kZXggPSBzbGlkZXIuYWN0aXZlLmluZGV4IC0gMTtcbiAgICAgICAgICAgIGVsLmdvVG9TbGlkZShwYWdlckluZGV4LCAncHJldicpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3RhcnRzIHRoZSBhdXRvIHNob3dcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHByZXZlbnRDb250cm9sVXBkYXRlIChib29sZWFuKSBcbiAgICAgICAgICogIC0gaWYgdHJ1ZSwgYXV0byBjb250cm9scyBzdGF0ZSB3aWxsIG5vdCBiZSB1cGRhdGVkXG4gICAgICAgICAqL1xuICAgICAgICBlbC5zdGFydEF1dG8gPSBmdW5jdGlvbihwcmV2ZW50Q29udHJvbFVwZGF0ZSl7XG4gICAgICAgICAgICAvLyBpZiBhbiBpbnRlcnZhbCBhbHJlYWR5IGV4aXN0cywgZGlzcmVnYXJkIGNhbGxcbiAgICAgICAgICAgIGlmKHNsaWRlci5pbnRlcnZhbCkgcmV0dXJuO1xuICAgICAgICAgICAgLy8gY3JlYXRlIGFuIGludGVydmFsXG4gICAgICAgICAgICBzbGlkZXIuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIHNsaWRlci5zZXR0aW5ncy5hdXRvRGlyZWN0aW9uID09ICduZXh0JyA/IGVsLmdvVG9OZXh0U2xpZGUoKSA6IGVsLmdvVG9QcmV2U2xpZGUoKTtcbiAgICAgICAgICAgIH0sIHNsaWRlci5zZXR0aW5ncy5wYXVzZSk7XG4gICAgICAgICAgICAvLyBpZiBhdXRvIGNvbnRyb2xzIGFyZSBkaXNwbGF5ZWQgYW5kIHByZXZlbnRDb250cm9sVXBkYXRlIGlzIG5vdCB0cnVlXG4gICAgICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9scyAmJiBwcmV2ZW50Q29udHJvbFVwZGF0ZSAhPSB0cnVlKSB1cGRhdGVBdXRvQ29udHJvbHMoJ3N0b3AnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3BzIHRoZSBhdXRvIHNob3dcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHByZXZlbnRDb250cm9sVXBkYXRlIChib29sZWFuKSBcbiAgICAgICAgICogIC0gaWYgdHJ1ZSwgYXV0byBjb250cm9scyBzdGF0ZSB3aWxsIG5vdCBiZSB1cGRhdGVkXG4gICAgICAgICAqL1xuICAgICAgICBlbC5zdG9wQXV0byA9IGZ1bmN0aW9uKHByZXZlbnRDb250cm9sVXBkYXRlKXtcbiAgICAgICAgICAgIC8vIGlmIG5vIGludGVydmFsIGV4aXN0cywgZGlzcmVnYXJkIGNhbGxcbiAgICAgICAgICAgIGlmKCFzbGlkZXIuaW50ZXJ2YWwpIHJldHVybjtcbiAgICAgICAgICAgIC8vIGNsZWFyIHRoZSBpbnRlcnZhbFxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChzbGlkZXIuaW50ZXJ2YWwpO1xuICAgICAgICAgICAgc2xpZGVyLmludGVydmFsID0gbnVsbDtcbiAgICAgICAgICAgIC8vIGlmIGF1dG8gY29udHJvbHMgYXJlIGRpc3BsYXllZCBhbmQgcHJldmVudENvbnRyb2xVcGRhdGUgaXMgbm90IHRydWVcbiAgICAgICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzICYmIHByZXZlbnRDb250cm9sVXBkYXRlICE9IHRydWUpIHVwZGF0ZUF1dG9Db250cm9scygnc3RhcnQnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgY3VycmVudCBzbGlkZSBpbmRleCAoemVyby1iYXNlZClcbiAgICAgICAgICovXG4gICAgICAgIGVsLmdldEN1cnJlbnRTbGlkZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZXR1cm4gc2xpZGVyLmFjdGl2ZS5pbmRleDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJldHVybnMgbnVtYmVyIG9mIHNsaWRlcyBpbiBzaG93XG4gICAgICAgICAqL1xuICAgICAgICBlbC5nZXRTbGlkZUNvdW50ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHJldHVybiBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFrZXMgc2xpZGVzaG93IHJlc3BvbnNpdmVcbiAgICAgICAgICovXG4gICAgICAgIC8vIGZpcnN0IGdldCB0aGUgb3JpZ2luYWwgd2luZG93IGRpbWVucyAodGhhbmtzIGFsb3QgSUUpXG4gICAgICAgIHZhciB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuICAgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAvLyBnZXQgdGhlIG5ldyB3aW5kb3cgZGltZW5zIChhZ2FpbiwgdGhhbmsgeW91IElFKVxuICAgICAgICAgICAgdmFyIHdpbmRvd1dpZHRoTmV3ID0gJCh3aW5kb3cpLndpZHRoKCk7XG4gICAgICAgICAgICB2YXIgd2luZG93SGVpZ2h0TmV3ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRoYXQgaXQgaXMgYSB0cnVlIHdpbmRvdyByZXNpemVcbiAgICAgICAgICAgIC8vICp3ZSBtdXN0IGNoZWNrIHRoaXMgYmVjYXVzZSBvdXIgZGlub3NhdXIgZnJpZW5kIElFIGZpcmVzIGEgd2luZG93IHJlc2l6ZSBldmVudCB3aGVuIGNlcnRhaW4gRE9NIGVsZW1lbnRzXG4gICAgICAgICAgICAvLyBhcmUgcmVzaXplZC4gQ2FuIHlvdSBqdXN0IGRpZSBhbHJlYWR5PypcbiAgICAgICAgICAgIGlmKHdpbmRvd1dpZHRoICE9IHdpbmRvd1dpZHRoTmV3IHx8IHdpbmRvd0hlaWdodCAhPSB3aW5kb3dIZWlnaHROZXcpe1xuICAgICAgICAgICAgICAgIC8vIHNldCB0aGUgbmV3IHdpbmRvdyBkaW1lbnNcbiAgICAgICAgICAgICAgICB3aW5kb3dXaWR0aCA9IHdpbmRvd1dpZHRoTmV3O1xuICAgICAgICAgICAgICAgIHdpbmRvd0hlaWdodCA9IHdpbmRvd0hlaWdodE5ldztcbiAgICAgICAgICAgICAgICAvLyByZXNpemUgYWxsIGNoaWxkcmVuIGluIHJhdGlvIHRvIG5ldyBzY3JlZW4gc2l6ZVxuICAgICAgICAgICAgICAgIHNsaWRlci5jaGlsZHJlbi5hZGQoZWwuZmluZCgnLmJ4LWNsb25lJykpLndpZHRoKGdldFNsaWRlV2lkdGgoKSk7XG4gICAgICAgICAgICAgICAgLy8gYWRqdXN0IHRoZSBoZWlnaHRcbiAgICAgICAgICAgICAgICBzbGlkZXIudmlld3BvcnQuY3NzKCdoZWlnaHQnLCBnZXRWaWV3cG9ydEhlaWdodCgpKTtcbiAgICAgICAgICAgICAgICAvLyBpZiBhY3RpdmUubGFzdCB3YXMgdHJ1ZSBiZWZvcmUgdGhlIHNjcmVlbiByZXNpemUsIHdlIHdhbnRcbiAgICAgICAgICAgICAgICAvLyB0byBrZWVwIGl0IGxhc3Qgbm8gbWF0dGVyIHdoYXQgc2NyZWVuIHNpemUgd2UgZW5kIG9uXG4gICAgICAgICAgICAgICAgaWYgKHNsaWRlci5hY3RpdmUubGFzdCkgc2xpZGVyLmFjdGl2ZS5pbmRleCA9IGdldFBhZ2VyUXR5KCkgLSAxO1xuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBhY3RpdmUgaW5kZXggKHBhZ2UpIG5vIGxvbmdlciBleGlzdHMgZHVlIHRvIHRoZSByZXNpemUsIHNpbXBseSBzZXQgdGhlIGluZGV4IGFzIGxhc3RcbiAgICAgICAgICAgICAgICBpZiAoc2xpZGVyLmFjdGl2ZS5pbmRleCA+PSBnZXRQYWdlclF0eSgpKSBzbGlkZXIuYWN0aXZlLmxhc3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIGlmIGEgcGFnZXIgaXMgYmVpbmcgZGlzcGxheWVkIGFuZCBhIGN1c3RvbSBwYWdlciBpcyBub3QgYmVpbmcgdXNlZCwgdXBkYXRlIGl0XG4gICAgICAgICAgICAgICAgaWYoc2xpZGVyLnNldHRpbmdzLnBhZ2VyICYmICFzbGlkZXIuc2V0dGluZ3MucGFnZXJDdXN0b20pe1xuICAgICAgICAgICAgICAgICAgICBwb3B1bGF0ZVBhZ2VyKCk7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBhZ2VyQWN0aXZlKHNsaWRlci5hY3RpdmUuaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdGhlIHNsaWRlIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgaWYoIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHNldFNsaWRlUG9zaXRpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpbml0KCk7XG4gICAgICAgIFxuICAgICAgICAvLyByZXR1cm5zIHRoZSBjdXJyZW50IGpRdWVyeSBvYmplY3RcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG59KShqUXVlcnkpO1xuXG4vKiFcbiAqIGpRdWVyeSBpbWFnZXNMb2FkZWQgcGx1Z2luIHYyLjEuMFxuICogaHR0cDovL2dpdGh1Yi5jb20vZGVzYW5kcm8vaW1hZ2VzbG9hZGVkXG4gKlxuICogTUlUIExpY2Vuc2UuIGJ5IFBhdWwgSXJpc2ggZXQgYWwuXG4gKi9cblxuLypqc2hpbnQgY3VybHk6IHRydWUsIGVxZXFlcTogdHJ1ZSwgbm9lbXB0eTogdHJ1ZSwgc3RyaWN0OiB0cnVlLCB1bmRlZjogdHJ1ZSwgYnJvd3NlcjogdHJ1ZSAqL1xuLypnbG9iYWwgalF1ZXJ5OiBmYWxzZSAqL1xuXG4oZnVuY3Rpb24oYyxuKXt2YXIgbD1cImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQUFBQUFQLy8veXdBQUFBQUFRQUJBQUFDQVV3QU93PT1cIjtjLmZuLmltYWdlc0xvYWRlZD1mdW5jdGlvbihmKXtmdW5jdGlvbiBtKCl7dmFyIGI9YyhpKSxhPWMoaCk7ZCYmKGgubGVuZ3RoP2QucmVqZWN0KGUsYixhKTpkLnJlc29sdmUoZSkpO2MuaXNGdW5jdGlvbihmKSYmZi5jYWxsKGcsZSxiLGEpfWZ1bmN0aW9uIGooYixhKXtiLnNyYz09PWx8fC0xIT09Yy5pbkFycmF5KGIsayl8fChrLnB1c2goYiksYT9oLnB1c2goYik6aS5wdXNoKGIpLGMuZGF0YShiLFwiaW1hZ2VzTG9hZGVkXCIse2lzQnJva2VuOmEsc3JjOmIuc3JjfSksbyYmZC5ub3RpZnlXaXRoKGMoYiksW2EsZSxjKGkpLGMoaCldKSxlLmxlbmd0aD09PWsubGVuZ3RoJiYoc2V0VGltZW91dChtKSxlLnVuYmluZChcIi5pbWFnZXNMb2FkZWRcIikpKX12YXIgZz10aGlzLGQ9Yy5pc0Z1bmN0aW9uKGMuRGVmZXJyZWQpP2MuRGVmZXJyZWQoKTpcbjAsbz1jLmlzRnVuY3Rpb24oZC5ub3RpZnkpLGU9Zy5maW5kKFwiaW1nXCIpLmFkZChnLmZpbHRlcihcImltZ1wiKSksaz1bXSxpPVtdLGg9W107Yy5pc1BsYWluT2JqZWN0KGYpJiZjLmVhY2goZixmdW5jdGlvbihiLGEpe2lmKFwiY2FsbGJhY2tcIj09PWIpZj1hO2Vsc2UgaWYoZClkW2JdKGEpfSk7ZS5sZW5ndGg/ZS5iaW5kKFwibG9hZC5pbWFnZXNMb2FkZWQgZXJyb3IuaW1hZ2VzTG9hZGVkXCIsZnVuY3Rpb24oYil7aihiLnRhcmdldCxcImVycm9yXCI9PT1iLnR5cGUpfSkuZWFjaChmdW5jdGlvbihiLGEpe3ZhciBkPWEuc3JjLGU9Yy5kYXRhKGEsXCJpbWFnZXNMb2FkZWRcIik7aWYoZSYmZS5zcmM9PT1kKWooYSxlLmlzQnJva2VuKTtlbHNlIGlmKGEuY29tcGxldGUmJmEubmF0dXJhbFdpZHRoIT09bilqKGEsMD09PWEubmF0dXJhbFdpZHRofHwwPT09YS5uYXR1cmFsSGVpZ2h0KTtlbHNlIGlmKGEucmVhZHlTdGF0ZXx8YS5jb21wbGV0ZSlhLnNyYz1sLGEuc3JjPWR9KTptKCk7cmV0dXJuIGQ/ZC5wcm9taXNlKGcpOlxuZ319KShqUXVlcnkpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2pzL21haW4vanF1ZXJ5L2xpYi9qcXVlcnkuYnhzbGlkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoJCkge1xuICAgIHZhciBhY2Nlc3MgPSBmYWxzZSxcbiAgICAgICAgbG9nID0gZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5sb2cpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBpbml0ID0gZnVuY3Rpb24gKHZpZGVvQ29udGFpbmVycywgb3B0KSB7XG4gICAgICAgICAgICB2aWRlb0NvbnRhaW5lcnMubm90KCdbZGF0YS12aWRlby1pZC1yZWFkeV0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0gJCh0aGlzKS5hdHRyKCdkYXRhLXZpZGVvLWlkLXJlYWR5JywgMSksXG4gICAgICAgICAgICAgICAgICAgIGltZ0dyb3VwID0gY29udGFpbmVyLmZpbmQoJy55b3V0dWJlLXByZXZpZXcnKSxcbiAgICAgICAgICAgICAgICAgICAgaWZyYW1lSWQgPSBjb250YWluZXIuYXR0cignZGF0YS12aWRlby1pZnJhbWUtaWQnKSxcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yID0gaW1nR3JvdXAuY2hpbGRyZW4oJ2EnKSxcbiAgICAgICAgICAgICAgICAgICAgY2xpY2thYmxlID0gYW5jaG9yLmxlbmd0aCA+IDAgPyBhbmNob3IgOiBpbWdHcm91cCxcblxuICAgICAgICAgICAgICAgICAgICBsb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vZGUgPSBhY2Nlc3MgPT0gJ3lvdWt1JyAmJiBjb250YWluZXIuYXR0cignZGF0YS15b3VrdS1pZCcpID8gJ3lvdWt1JyA6ICd5b3V0dWJlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RlID09PSAneW91dHViZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvJyArIGNvbnRhaW5lci5hdHRyKCdkYXRhLXZpZGVvLWlkJykgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnP3JlbD0wJmF1dG9wbGF5PTEmd21vZGU9dHJhbnNwYXJlbnQmY29udHJvbHM9JyArIG9wdC5jb250cm9scyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcmc2hvd2luZm89JyArIG9wdC5zaG93SW5mbztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0LmF1dG9QbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYyArPSAnJmVuYWJsZWpzYXBpPTEmdmVyc2lvbj0zJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gJ2h0dHA6Ly9wbGF5ZXIueW91a3UuY29tL2VtYmVkLycgKyBjb250YWluZXIuYXR0cignZGF0YS15b3VrdS1pZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHQuYXV0b1BsYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjICs9ICcmYXV0b3BsYXk9MSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZyhtb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZyhzcmMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWZyYW1lID0gJCgnPGlmcmFtZT48L2lmcmFtZT4nKS5hdHRyKCdpZCcsIGlmcmFtZUlkKS5hdHRyKCdzcmMnLCBzcmMpLmF0dHIoJ2ZyYW1lYm9yZGVyJywgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0LmFsbG93RnVsbHNjcmVlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmcmFtZS5hdHRyKCdhbGxvd2Z1bGxzY3JlZW4nLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmcmFtZS5hcHBlbmRUbyhjb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdC5jYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdC5jYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICd5b3V0dWJlJyAmJiBvcHQuYXV0b1BsYXkgJiYgdHlwZW9mIFlUICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBZVC5QbGF5ZXIoaWZyYW1lSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb25SZWFkeSc6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5wbGF5VmlkZW8oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWZyYW1lLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjbGlja2FibGUuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY2xpY2thYmxlLnVuYmluZCgpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjY2VzcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXN0ID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3MgPSAneW91dHViZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlc3Qub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3MgPSAneW91a3UnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXN0LnNyYyA9IFwiaHR0cDovL3lvdXR1YmUuY29tL2Zhdmljb24uaWNvXCI7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgJC5mbi52aWRlb1ByZXZpZXcgPSBmdW5jdGlvbiAob3B0KSB7XG4gICAgICAgIGluaXQodGhpcywgJC5leHRlbmQoe1xuICAgICAgICAgICAgYXV0b1BsYXk6IHRydWUsXG4gICAgICAgICAgICBhbGxvd0Z1bGxzY3JlZW46IGZhbHNlLFxuICAgICAgICAgICAgY29udHJvbHM6IDIsXG4gICAgICAgICAgICBzaG93SW5mbzogMVxuICAgICAgICB9LCBvcHQpKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9tYWluL2pxdWVyeS9qcXVlcnkueW91dHViZXByZXZpZXcuanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIFNoYWRvd2JveC5qcywgdmVyc2lvbiAzLjAuM1xuICogaHR0cDovL3NoYWRvd2JveC1qcy5jb20vXG4gKlxuICogQ29weXJpZ2h0IDIwMDctMjAxMCwgTWljaGFlbCBKLiBJLiBKYWNrc29uXG4gKiBEYXRlOiAyMDExLTAyLTI0IDAxOjIzOjM4ICswMDAwXG4gKi9cbihmdW5jdGlvbih3aW5kb3csdW5kZWZpbmVkKXt2YXIgUz17dmVyc2lvbjpcIjMuMC4zXCJ9O3ZhciB1YT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7aWYodWEuaW5kZXhPZihcIndpbmRvd3NcIik+LTF8fHVhLmluZGV4T2YoXCJ3aW4zMlwiKT4tMSl7Uy5pc1dpbmRvd3M9dHJ1ZX1lbHNle2lmKHVhLmluZGV4T2YoXCJtYWNpbnRvc2hcIik+LTF8fHVhLmluZGV4T2YoXCJtYWMgb3MgeFwiKT4tMSl7Uy5pc01hYz10cnVlfWVsc2V7aWYodWEuaW5kZXhPZihcImxpbnV4XCIpPi0xKXtTLmlzTGludXg9dHJ1ZX19fVMuaXNJRT11YS5pbmRleE9mKFwibXNpZVwiKT4tMTtTLmlzSUU2PXVhLmluZGV4T2YoXCJtc2llIDZcIik+LTE7Uy5pc0lFNz11YS5pbmRleE9mKFwibXNpZSA3XCIpPi0xO1MuaXNHZWNrbz11YS5pbmRleE9mKFwiZ2Vja29cIik+LTEmJnVhLmluZGV4T2YoXCJzYWZhcmlcIik9PS0xO1MuaXNXZWJLaXQ9dWEuaW5kZXhPZihcImFwcGxld2Via2l0L1wiKT4tMTt2YXIgaW5saW5lSWQ9LyMoLispJC8sZ2FsbGVyeU5hbWU9L14obGlnaHR8c2hhZG93KWJveFxcWyguKj8pXFxdL2ksaW5saW5lUGFyYW09L1xccyooW2Etel9dKj8pXFxzKj1cXHMqKC4rKVxccyovLGZpbGVFeHRlbnNpb249L1swLTlhLXpdKyQvaSxzY3JpcHRQYXRoPS8oLitcXC8pc2hhZG93Ym94XFwuanMvaTt2YXIgb3Blbj1mYWxzZSxpbml0aWFsaXplZD1mYWxzZSxsYXN0T3B0aW9ucz17fSxzbGlkZURlbGF5PTAsc2xpZGVTdGFydCxzbGlkZVRpbWVyO1MuY3VycmVudD0tMTtTLmRpbWVuc2lvbnM9bnVsbDtTLmVhc2U9ZnVuY3Rpb24oc3RhdGUpe3JldHVybiAxK01hdGgucG93KHN0YXRlLTEsMyl9O1MuZXJyb3JJbmZvPXtmbGE6e25hbWU6XCJGbGFzaFwiLHVybDpcImh0dHA6Ly93d3cuYWRvYmUuY29tL3Byb2R1Y3RzL2ZsYXNocGxheWVyL1wifSxxdDp7bmFtZTpcIlF1aWNrVGltZVwiLHVybDpcImh0dHA6Ly93d3cuYXBwbGUuY29tL3F1aWNrdGltZS9kb3dubG9hZC9cIn0sd21wOntuYW1lOlwiV2luZG93cyBNZWRpYSBQbGF5ZXJcIix1cmw6XCJodHRwOi8vd3d3Lm1pY3Jvc29mdC5jb20vd2luZG93cy93aW5kb3dzbWVkaWEvXCJ9LGY0bTp7bmFtZTpcIkZsaXA0TWFjXCIsdXJsOlwiaHR0cDovL3d3dy5mbGlwNG1hYy5jb20vd212X2Rvd25sb2FkLmh0bVwifX07Uy5nYWxsZXJ5PVtdO1Mub25SZWFkeT1ub29wO1MucGF0aD1udWxsO1MucGxheWVyPW51bGw7Uy5wbGF5ZXJJZD1cInNiLXBsYXllclwiO1Mub3B0aW9ucz17YW5pbWF0ZTp0cnVlLGFuaW1hdGVGYWRlOnRydWUsYXV0b3BsYXlNb3ZpZXM6dHJ1ZSxjb250aW51b3VzOmZhbHNlLGVuYWJsZUtleXM6dHJ1ZSxmbGFzaFBhcmFtczp7Ymdjb2xvcjpcIiMwMDAwMDBcIixhbGxvd2Z1bGxzY3JlZW46dHJ1ZX0sZmxhc2hWYXJzOnt9LGZsYXNoVmVyc2lvbjpcIjkuMC4xMTVcIixoYW5kbGVPdmVyc2l6ZTpcInJlc2l6ZVwiLGhhbmRsZVVuc3VwcG9ydGVkOlwibGlua1wiLG9uQ2hhbmdlOm5vb3Asb25DbG9zZTpub29wLG9uRmluaXNoOm5vb3Asb25PcGVuOm5vb3Asc2hvd01vdmllQ29udHJvbHM6dHJ1ZSxza2lwU2V0dXA6ZmFsc2Usc2xpZGVzaG93RGVsYXk6MCx2aWV3cG9ydFBhZGRpbmc6MjB9O1MuZ2V0Q3VycmVudD1mdW5jdGlvbigpe3JldHVybiBTLmN1cnJlbnQ+LTE/Uy5nYWxsZXJ5W1MuY3VycmVudF06bnVsbH07Uy5oYXNOZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIFMuZ2FsbGVyeS5sZW5ndGg+MSYmKFMuY3VycmVudCE9Uy5nYWxsZXJ5Lmxlbmd0aC0xfHxTLm9wdGlvbnMuY29udGludW91cyl9O1MuaXNPcGVuPWZ1bmN0aW9uKCl7cmV0dXJuIG9wZW59O1MuaXNQYXVzZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gc2xpZGVUaW1lcj09XCJwYXVzZVwifTtTLmFwcGx5T3B0aW9ucz1mdW5jdGlvbihvcHRpb25zKXtsYXN0T3B0aW9ucz1hcHBseSh7fSxTLm9wdGlvbnMpO2FwcGx5KFMub3B0aW9ucyxvcHRpb25zKX07Uy5yZXZlcnRPcHRpb25zPWZ1bmN0aW9uKCl7YXBwbHkoUy5vcHRpb25zLGxhc3RPcHRpb25zKX07Uy5pbml0PWZ1bmN0aW9uKG9wdGlvbnMsY2FsbGJhY2spe2lmKGluaXRpYWxpemVkKXtyZXR1cm59aW5pdGlhbGl6ZWQ9dHJ1ZTtpZihTLnNraW4ub3B0aW9ucyl7YXBwbHkoUy5vcHRpb25zLFMuc2tpbi5vcHRpb25zKX1pZihvcHRpb25zKXthcHBseShTLm9wdGlvbnMsb3B0aW9ucyl9aWYoIVMucGF0aCl7dmFyIHBhdGgsc2NyaXB0cz1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtmb3IodmFyIGk9MCxsZW49c2NyaXB0cy5sZW5ndGg7aTxsZW47KytpKXtwYXRoPXNjcmlwdFBhdGguZXhlYyhzY3JpcHRzW2ldLnNyYyk7aWYocGF0aCl7Uy5wYXRoPXBhdGhbMV07YnJlYWt9fX1pZihjYWxsYmFjayl7Uy5vblJlYWR5PWNhbGxiYWNrfWJpbmRMb2FkKCl9O1Mub3Blbj1mdW5jdGlvbihvYmope2lmKG9wZW4pe3JldHVybn12YXIgZ2M9Uy5tYWtlR2FsbGVyeShvYmopO1MuZ2FsbGVyeT1nY1swXTtTLmN1cnJlbnQ9Z2NbMV07b2JqPVMuZ2V0Q3VycmVudCgpO2lmKG9iaj09bnVsbCl7cmV0dXJufVMuYXBwbHlPcHRpb25zKG9iai5vcHRpb25zfHx7fSk7ZmlsdGVyR2FsbGVyeSgpO2lmKFMuZ2FsbGVyeS5sZW5ndGgpe29iaj1TLmdldEN1cnJlbnQoKTtpZihTLm9wdGlvbnMub25PcGVuKG9iaik9PT1mYWxzZSl7cmV0dXJufW9wZW49dHJ1ZTtTLnNraW4ub25PcGVuKG9iaixsb2FkKX19O1MuY2xvc2U9ZnVuY3Rpb24oKXtpZighb3Blbil7cmV0dXJufW9wZW49ZmFsc2U7aWYoUy5wbGF5ZXIpe1MucGxheWVyLnJlbW92ZSgpO1MucGxheWVyPW51bGx9aWYodHlwZW9mIHNsaWRlVGltZXI9PVwibnVtYmVyXCIpe2NsZWFyVGltZW91dChzbGlkZVRpbWVyKTtzbGlkZVRpbWVyPW51bGx9c2xpZGVEZWxheT0wO2xpc3RlbktleXMoZmFsc2UpO1Mub3B0aW9ucy5vbkNsb3NlKFMuZ2V0Q3VycmVudCgpKTtTLnNraW4ub25DbG9zZSgpO1MucmV2ZXJ0T3B0aW9ucygpfTtTLnBsYXk9ZnVuY3Rpb24oKXtpZighUy5oYXNOZXh0KCkpe3JldHVybn1pZighc2xpZGVEZWxheSl7c2xpZGVEZWxheT1TLm9wdGlvbnMuc2xpZGVzaG93RGVsYXkqMTAwMH1pZihzbGlkZURlbGF5KXtzbGlkZVN0YXJ0PW5vdygpO3NsaWRlVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3NsaWRlRGVsYXk9c2xpZGVTdGFydD0wO1MubmV4dCgpfSxzbGlkZURlbGF5KTtpZihTLnNraW4ub25QbGF5KXtTLnNraW4ub25QbGF5KCl9fX07Uy5wYXVzZT1mdW5jdGlvbigpe2lmKHR5cGVvZiBzbGlkZVRpbWVyIT1cIm51bWJlclwiKXtyZXR1cm59c2xpZGVEZWxheT1NYXRoLm1heCgwLHNsaWRlRGVsYXktKG5vdygpLXNsaWRlU3RhcnQpKTtpZihzbGlkZURlbGF5KXtjbGVhclRpbWVvdXQoc2xpZGVUaW1lcik7c2xpZGVUaW1lcj1cInBhdXNlXCI7aWYoUy5za2luLm9uUGF1c2Upe1Muc2tpbi5vblBhdXNlKCl9fX07Uy5jaGFuZ2U9ZnVuY3Rpb24oaW5kZXgpe2lmKCEoaW5kZXggaW4gUy5nYWxsZXJ5KSl7aWYoUy5vcHRpb25zLmNvbnRpbnVvdXMpe2luZGV4PShpbmRleDwwP1MuZ2FsbGVyeS5sZW5ndGgraW5kZXg6MCk7aWYoIShpbmRleCBpbiBTLmdhbGxlcnkpKXtyZXR1cm59fWVsc2V7cmV0dXJufX1TLmN1cnJlbnQ9aW5kZXg7aWYodHlwZW9mIHNsaWRlVGltZXI9PVwibnVtYmVyXCIpe2NsZWFyVGltZW91dChzbGlkZVRpbWVyKTtzbGlkZVRpbWVyPW51bGw7c2xpZGVEZWxheT1zbGlkZVN0YXJ0PTB9Uy5vcHRpb25zLm9uQ2hhbmdlKFMuZ2V0Q3VycmVudCgpKTtsb2FkKHRydWUpfTtTLm5leHQ9ZnVuY3Rpb24oKXtTLmNoYW5nZShTLmN1cnJlbnQrMSl9O1MucHJldmlvdXM9ZnVuY3Rpb24oKXtTLmNoYW5nZShTLmN1cnJlbnQtMSl9O1Muc2V0RGltZW5zaW9ucz1mdW5jdGlvbihoZWlnaHQsd2lkdGgsbWF4SGVpZ2h0LG1heFdpZHRoLHRvcEJvdHRvbSxsZWZ0UmlnaHQscGFkZGluZyxwcmVzZXJ2ZUFzcGVjdCl7dmFyIG9yaWdpbmFsSGVpZ2h0PWhlaWdodCxvcmlnaW5hbFdpZHRoPXdpZHRoO3ZhciBleHRyYUhlaWdodD0yKnBhZGRpbmcrdG9wQm90dG9tO2lmKGhlaWdodCtleHRyYUhlaWdodD5tYXhIZWlnaHQpe2hlaWdodD1tYXhIZWlnaHQtZXh0cmFIZWlnaHR9dmFyIGV4dHJhV2lkdGg9MipwYWRkaW5nK2xlZnRSaWdodDtpZih3aWR0aCtleHRyYVdpZHRoPm1heFdpZHRoKXt3aWR0aD1tYXhXaWR0aC1leHRyYVdpZHRofXZhciBjaGFuZ2VIZWlnaHQ9KG9yaWdpbmFsSGVpZ2h0LWhlaWdodCkvb3JpZ2luYWxIZWlnaHQsY2hhbmdlV2lkdGg9KG9yaWdpbmFsV2lkdGgtd2lkdGgpL29yaWdpbmFsV2lkdGgsb3ZlcnNpemVkPShjaGFuZ2VIZWlnaHQ+MHx8Y2hhbmdlV2lkdGg+MCk7aWYocHJlc2VydmVBc3BlY3QmJm92ZXJzaXplZCl7aWYoY2hhbmdlSGVpZ2h0PmNoYW5nZVdpZHRoKXt3aWR0aD1NYXRoLnJvdW5kKChvcmlnaW5hbFdpZHRoL29yaWdpbmFsSGVpZ2h0KSpoZWlnaHQpfWVsc2V7aWYoY2hhbmdlV2lkdGg+Y2hhbmdlSGVpZ2h0KXtoZWlnaHQ9TWF0aC5yb3VuZCgob3JpZ2luYWxIZWlnaHQvb3JpZ2luYWxXaWR0aCkqd2lkdGgpfX19Uy5kaW1lbnNpb25zPXtoZWlnaHQ6aGVpZ2h0K3RvcEJvdHRvbSx3aWR0aDp3aWR0aCtsZWZ0UmlnaHQsaW5uZXJIZWlnaHQ6aGVpZ2h0LGlubmVyV2lkdGg6d2lkdGgsdG9wOk1hdGguZmxvb3IoKG1heEhlaWdodC0oaGVpZ2h0K2V4dHJhSGVpZ2h0KSkvMitwYWRkaW5nKSxsZWZ0Ok1hdGguZmxvb3IoKG1heFdpZHRoLSh3aWR0aCtleHRyYVdpZHRoKSkvMitwYWRkaW5nKSxvdmVyc2l6ZWQ6b3ZlcnNpemVkfTtyZXR1cm4gUy5kaW1lbnNpb25zfTtTLm1ha2VHYWxsZXJ5PWZ1bmN0aW9uKG9iail7dmFyIGdhbGxlcnk9W10sY3VycmVudD0tMTtpZih0eXBlb2Ygb2JqPT1cInN0cmluZ1wiKXtvYmo9W29ial19aWYodHlwZW9mIG9iai5sZW5ndGg9PVwibnVtYmVyXCIpe2VhY2gob2JqLGZ1bmN0aW9uKGksbyl7aWYoby5jb250ZW50KXtnYWxsZXJ5W2ldPW99ZWxzZXtnYWxsZXJ5W2ldPXtjb250ZW50Om99fX0pO2N1cnJlbnQ9MH1lbHNle2lmKG9iai50YWdOYW1lKXt2YXIgY2FjaGVPYmo9Uy5nZXRDYWNoZShvYmopO29iaj1jYWNoZU9iaj9jYWNoZU9iajpTLm1ha2VPYmplY3Qob2JqKX1pZihvYmouZ2FsbGVyeSl7Z2FsbGVyeT1bXTt2YXIgbztmb3IodmFyIGtleSBpbiBTLmNhY2hlKXtvPVMuY2FjaGVba2V5XTtpZihvLmdhbGxlcnkmJm8uZ2FsbGVyeT09b2JqLmdhbGxlcnkpe2lmKGN1cnJlbnQ9PS0xJiZvLmNvbnRlbnQ9PW9iai5jb250ZW50KXtjdXJyZW50PWdhbGxlcnkubGVuZ3RofWdhbGxlcnkucHVzaChvKX19aWYoY3VycmVudD09LTEpe2dhbGxlcnkudW5zaGlmdChvYmopO2N1cnJlbnQ9MH19ZWxzZXtnYWxsZXJ5PVtvYmpdO2N1cnJlbnQ9MH19ZWFjaChnYWxsZXJ5LGZ1bmN0aW9uKGksbyl7Z2FsbGVyeVtpXT1hcHBseSh7fSxvKX0pO3JldHVybltnYWxsZXJ5LGN1cnJlbnRdfTtTLm1ha2VPYmplY3Q9ZnVuY3Rpb24obGluayxvcHRpb25zKXt2YXIgb2JqPXtjb250ZW50OmxpbmsuaHJlZix0aXRsZTpsaW5rLmdldEF0dHJpYnV0ZShcInRpdGxlXCIpfHxcIlwiLGxpbms6bGlua307aWYob3B0aW9ucyl7b3B0aW9ucz1hcHBseSh7fSxvcHRpb25zKTtlYWNoKFtcInBsYXllclwiLFwidGl0bGVcIixcImhlaWdodFwiLFwid2lkdGhcIixcImdhbGxlcnlcIl0sZnVuY3Rpb24oaSxvKXtpZih0eXBlb2Ygb3B0aW9uc1tvXSE9XCJ1bmRlZmluZWRcIil7b2JqW29dPW9wdGlvbnNbb107ZGVsZXRlIG9wdGlvbnNbb119fSk7b2JqLm9wdGlvbnM9b3B0aW9uc31lbHNle29iai5vcHRpb25zPXt9fWlmKCFvYmoucGxheWVyKXtvYmoucGxheWVyPVMuZ2V0UGxheWVyKG9iai5jb250ZW50KX12YXIgcmVsPWxpbmsuZ2V0QXR0cmlidXRlKFwicmVsXCIpO2lmKHJlbCl7dmFyIG1hdGNoPXJlbC5tYXRjaChnYWxsZXJ5TmFtZSk7aWYobWF0Y2gpe29iai5nYWxsZXJ5PWVzY2FwZShtYXRjaFsyXSl9ZWFjaChyZWwuc3BsaXQoXCI7XCIpLGZ1bmN0aW9uKGkscCl7bWF0Y2g9cC5tYXRjaChpbmxpbmVQYXJhbSk7aWYobWF0Y2gpe29ialttYXRjaFsxXV09bWF0Y2hbMl19fSl9cmV0dXJuIG9ian07Uy5nZXRQbGF5ZXI9ZnVuY3Rpb24oY29udGVudCl7aWYoY29udGVudC5pbmRleE9mKFwiI1wiKT4tMSYmY29udGVudC5pbmRleE9mKGRvY3VtZW50LmxvY2F0aW9uLmhyZWYpPT0wKXtyZXR1cm5cImlubGluZVwifXZhciBxPWNvbnRlbnQuaW5kZXhPZihcIj9cIik7aWYocT4tMSl7Y29udGVudD1jb250ZW50LnN1YnN0cmluZygwLHEpfXZhciBleHQsbT1jb250ZW50Lm1hdGNoKGZpbGVFeHRlbnNpb24pO2lmKG0pe2V4dD1tWzBdLnRvTG93ZXJDYXNlKCl9aWYoZXh0KXtpZihTLmltZyYmUy5pbWcuZXh0LmluZGV4T2YoZXh0KT4tMSl7cmV0dXJuXCJpbWdcIn1pZihTLnN3ZiYmUy5zd2YuZXh0LmluZGV4T2YoZXh0KT4tMSl7cmV0dXJuXCJzd2ZcIn1pZihTLmZsdiYmUy5mbHYuZXh0LmluZGV4T2YoZXh0KT4tMSl7cmV0dXJuXCJmbHZcIn1pZihTLnF0JiZTLnF0LmV4dC5pbmRleE9mKGV4dCk+LTEpe2lmKFMud21wJiZTLndtcC5leHQuaW5kZXhPZihleHQpPi0xKXtyZXR1cm5cInF0d21wXCJ9ZWxzZXtyZXR1cm5cInF0XCJ9fWlmKFMud21wJiZTLndtcC5leHQuaW5kZXhPZihleHQpPi0xKXtyZXR1cm5cIndtcFwifX1yZXR1cm5cImlmcmFtZVwifTtmdW5jdGlvbiBmaWx0ZXJHYWxsZXJ5KCl7dmFyIGVycj1TLmVycm9ySW5mbyxwbHVnaW5zPVMucGx1Z2lucyxvYmoscmVtb3ZlLG5lZWRlZCxtLGZvcm1hdCxyZXBsYWNlLGlubGluZUVsLGZsYXNoVmVyc2lvbjtmb3IodmFyIGk9MDtpPFMuZ2FsbGVyeS5sZW5ndGg7KytpKXtvYmo9Uy5nYWxsZXJ5W2ldO3JlbW92ZT1mYWxzZTtuZWVkZWQ9bnVsbDtzd2l0Y2gob2JqLnBsYXllcil7Y2FzZVwiZmx2XCI6Y2FzZVwic3dmXCI6aWYoIXBsdWdpbnMuZmxhKXtuZWVkZWQ9XCJmbGFcIn1icmVhaztjYXNlXCJxdFwiOmlmKCFwbHVnaW5zLnF0KXtuZWVkZWQ9XCJxdFwifWJyZWFrO2Nhc2VcIndtcFwiOmlmKFMuaXNNYWMpe2lmKHBsdWdpbnMucXQmJnBsdWdpbnMuZjRtKXtvYmoucGxheWVyPVwicXRcIn1lbHNle25lZWRlZD1cInF0ZjRtXCJ9fWVsc2V7aWYoIXBsdWdpbnMud21wKXtuZWVkZWQ9XCJ3bXBcIn19YnJlYWs7Y2FzZVwicXR3bXBcIjppZihwbHVnaW5zLnF0KXtvYmoucGxheWVyPVwicXRcIn1lbHNle2lmKHBsdWdpbnMud21wKXtvYmoucGxheWVyPVwid21wXCJ9ZWxzZXtuZWVkZWQ9XCJxdHdtcFwifX1icmVha31pZihuZWVkZWQpe2lmKFMub3B0aW9ucy5oYW5kbGVVbnN1cHBvcnRlZD09XCJsaW5rXCIpe3N3aXRjaChuZWVkZWQpe2Nhc2VcInF0ZjRtXCI6Zm9ybWF0PVwic2hhcmVkXCI7cmVwbGFjZT1bZXJyLnF0LnVybCxlcnIucXQubmFtZSxlcnIuZjRtLnVybCxlcnIuZjRtLm5hbWVdO2JyZWFrO2Nhc2VcInF0d21wXCI6Zm9ybWF0PVwiZWl0aGVyXCI7cmVwbGFjZT1bZXJyLnF0LnVybCxlcnIucXQubmFtZSxlcnIud21wLnVybCxlcnIud21wLm5hbWVdO2JyZWFrO2RlZmF1bHQ6Zm9ybWF0PVwic2luZ2xlXCI7cmVwbGFjZT1bZXJyW25lZWRlZF0udXJsLGVycltuZWVkZWRdLm5hbWVdfW9iai5wbGF5ZXI9XCJodG1sXCI7b2JqLmNvbnRlbnQ9JzxkaXYgY2xhc3M9XCJzYi1tZXNzYWdlXCI+JytzcHJpbnRmKFMubGFuZy5lcnJvcnNbZm9ybWF0XSxyZXBsYWNlKStcIjwvZGl2PlwifWVsc2V7cmVtb3ZlPXRydWV9fWVsc2V7aWYob2JqLnBsYXllcj09XCJpbmxpbmVcIil7bT1pbmxpbmVJZC5leGVjKG9iai5jb250ZW50KTtpZihtKXtpbmxpbmVFbD1nZXQobVsxXSk7aWYoaW5saW5lRWwpe29iai5jb250ZW50PWlubGluZUVsLmlubmVySFRNTH1lbHNle3JlbW92ZT10cnVlfX1lbHNle3JlbW92ZT10cnVlfX1lbHNle2lmKG9iai5wbGF5ZXI9PVwic3dmXCJ8fG9iai5wbGF5ZXI9PVwiZmx2XCIpe2ZsYXNoVmVyc2lvbj0ob2JqLm9wdGlvbnMmJm9iai5vcHRpb25zLmZsYXNoVmVyc2lvbil8fFMub3B0aW9ucy5mbGFzaFZlcnNpb247aWYoUy5mbGFzaCYmIVMuZmxhc2guaGFzRmxhc2hQbGF5ZXJWZXJzaW9uKGZsYXNoVmVyc2lvbikpe29iai53aWR0aD0zMTA7b2JqLmhlaWdodD0xNzd9fX19aWYocmVtb3ZlKXtTLmdhbGxlcnkuc3BsaWNlKGksMSk7aWYoaTxTLmN1cnJlbnQpey0tUy5jdXJyZW50fWVsc2V7aWYoaT09Uy5jdXJyZW50KXtTLmN1cnJlbnQ9aT4wP2ktMTppfX0tLWl9fX1mdW5jdGlvbiBsaXN0ZW5LZXlzKG9uKXtpZighUy5vcHRpb25zLmVuYWJsZUtleXMpe3JldHVybn0ob24/YWRkRXZlbnQ6cmVtb3ZlRXZlbnQpKGRvY3VtZW50LFwia2V5ZG93blwiLGhhbmRsZUtleSl9ZnVuY3Rpb24gaGFuZGxlS2V5KGUpe2lmKGUubWV0YUtleXx8ZS5zaGlmdEtleXx8ZS5hbHRLZXl8fGUuY3RybEtleSl7cmV0dXJufXZhciBjb2RlPWtleUNvZGUoZSksaGFuZGxlcjtzd2l0Y2goY29kZSl7Y2FzZSA4MTpjYXNlIDg4OmNhc2UgMjc6aGFuZGxlcj1TLmNsb3NlO2JyZWFrO2Nhc2UgMzc6aGFuZGxlcj1TLnByZXZpb3VzO2JyZWFrO2Nhc2UgMzk6aGFuZGxlcj1TLm5leHQ7YnJlYWs7Y2FzZSAzMjpoYW5kbGVyPXR5cGVvZiBzbGlkZVRpbWVyPT1cIm51bWJlclwiP1MucGF1c2U6Uy5wbGF5O2JyZWFrfWlmKGhhbmRsZXIpe3ByZXZlbnREZWZhdWx0KGUpO2hhbmRsZXIoKX19ZnVuY3Rpb24gbG9hZChjaGFuZ2luZyl7bGlzdGVuS2V5cyhmYWxzZSk7dmFyIG9iaj1TLmdldEN1cnJlbnQoKTt2YXIgcGxheWVyPShvYmoucGxheWVyPT1cImlubGluZVwiP1wiaHRtbFwiOm9iai5wbGF5ZXIpO2lmKHR5cGVvZiBTW3BsYXllcl0hPVwiZnVuY3Rpb25cIil7dGhyb3dcInVua25vd24gcGxheWVyIFwiK3BsYXllcn1pZihjaGFuZ2luZyl7Uy5wbGF5ZXIucmVtb3ZlKCk7Uy5yZXZlcnRPcHRpb25zKCk7Uy5hcHBseU9wdGlvbnMob2JqLm9wdGlvbnN8fHt9KX1TLnBsYXllcj1uZXcgU1twbGF5ZXJdKG9iaixTLnBsYXllcklkKTtpZihTLmdhbGxlcnkubGVuZ3RoPjEpe3ZhciBuZXh0PVMuZ2FsbGVyeVtTLmN1cnJlbnQrMV18fFMuZ2FsbGVyeVswXTtpZihuZXh0LnBsYXllcj09XCJpbWdcIil7dmFyIGE9bmV3IEltYWdlKCk7YS5zcmM9bmV4dC5jb250ZW50fXZhciBwcmV2PVMuZ2FsbGVyeVtTLmN1cnJlbnQtMV18fFMuZ2FsbGVyeVtTLmdhbGxlcnkubGVuZ3RoLTFdO2lmKHByZXYucGxheWVyPT1cImltZ1wiKXt2YXIgYj1uZXcgSW1hZ2UoKTtiLnNyYz1wcmV2LmNvbnRlbnR9fVMuc2tpbi5vbkxvYWQoY2hhbmdpbmcsd2FpdFJlYWR5KX1mdW5jdGlvbiB3YWl0UmVhZHkoKXtpZighb3Blbil7cmV0dXJufWlmKHR5cGVvZiBTLnBsYXllci5yZWFkeSE9XCJ1bmRlZmluZWRcIil7dmFyIHRpbWVyPXNldEludGVydmFsKGZ1bmN0aW9uKCl7aWYob3Blbil7aWYoUy5wbGF5ZXIucmVhZHkpe2NsZWFySW50ZXJ2YWwodGltZXIpO3RpbWVyPW51bGw7Uy5za2luLm9uUmVhZHkoc2hvdyl9fWVsc2V7Y2xlYXJJbnRlcnZhbCh0aW1lcik7dGltZXI9bnVsbH19LDEwKX1lbHNle1Muc2tpbi5vblJlYWR5KHNob3cpfX1mdW5jdGlvbiBzaG93KCl7aWYoIW9wZW4pe3JldHVybn1TLnBsYXllci5hcHBlbmQoUy5za2luLmJvZHksUy5kaW1lbnNpb25zKTtTLnNraW4ub25TaG93KGZpbmlzaCl9ZnVuY3Rpb24gZmluaXNoKCl7aWYoIW9wZW4pe3JldHVybn1pZihTLnBsYXllci5vbkxvYWQpe1MucGxheWVyLm9uTG9hZCgpfVMub3B0aW9ucy5vbkZpbmlzaChTLmdldEN1cnJlbnQoKSk7aWYoIVMuaXNQYXVzZWQoKSl7Uy5wbGF5KCl9bGlzdGVuS2V5cyh0cnVlKX1pZighQXJyYXkucHJvdG90eXBlLmluZGV4T2Ype0FycmF5LnByb3RvdHlwZS5pbmRleE9mPWZ1bmN0aW9uKG9iaixmcm9tKXt2YXIgbGVuPXRoaXMubGVuZ3RoPj4+MDtmcm9tPWZyb218fDA7aWYoZnJvbTwwKXtmcm9tKz1sZW59Zm9yKDtmcm9tPGxlbjsrK2Zyb20pe2lmKGZyb20gaW4gdGhpcyYmdGhpc1tmcm9tXT09PW9iail7cmV0dXJuIGZyb219fXJldHVybiAtMX19ZnVuY3Rpb24gbm93KCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9ZnVuY3Rpb24gYXBwbHkob3JpZ2luYWwsZXh0ZW5zaW9uKXtmb3IodmFyIHByb3BlcnR5IGluIGV4dGVuc2lvbil7b3JpZ2luYWxbcHJvcGVydHldPWV4dGVuc2lvbltwcm9wZXJ0eV19cmV0dXJuIG9yaWdpbmFsfWZ1bmN0aW9uIGVhY2gob2JqLGNhbGxiYWNrKXt2YXIgaT0wLGxlbj1vYmoubGVuZ3RoO2Zvcih2YXIgdmFsdWU9b2JqWzBdO2k8bGVuJiZjYWxsYmFjay5jYWxsKHZhbHVlLGksdmFsdWUpIT09ZmFsc2U7dmFsdWU9b2JqWysraV0pe319ZnVuY3Rpb24gc3ByaW50ZihzdHIscmVwbGFjZSl7cmV0dXJuIHN0ci5yZXBsYWNlKC9cXHsoXFx3Kz8pXFx9L2csZnVuY3Rpb24obWF0Y2gsaSl7cmV0dXJuIHJlcGxhY2VbaV19KX1mdW5jdGlvbiBub29wKCl7fWZ1bmN0aW9uIGdldChpZCl7cmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKX1mdW5jdGlvbiByZW1vdmUoZWwpe2VsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpfXZhciBzdXBwb3J0c09wYWNpdHk9dHJ1ZSxzdXBwb3J0c0ZpeGVkPXRydWU7ZnVuY3Rpb24gY2hlY2tTdXBwb3J0KCl7dmFyIGJvZHk9ZG9jdW1lbnQuYm9keSxkaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtzdXBwb3J0c09wYWNpdHk9dHlwZW9mIGRpdi5zdHlsZS5vcGFjaXR5PT09XCJzdHJpbmdcIjtkaXYuc3R5bGUucG9zaXRpb249XCJmaXhlZFwiO2Rpdi5zdHlsZS5tYXJnaW49MDtkaXYuc3R5bGUudG9wPVwiMjBweFwiO2JvZHkuYXBwZW5kQ2hpbGQoZGl2LGJvZHkuZmlyc3RDaGlsZCk7c3VwcG9ydHNGaXhlZD1kaXYub2Zmc2V0VG9wPT0yMDtib2R5LnJlbW92ZUNoaWxkKGRpdil9Uy5nZXRTdHlsZT0oZnVuY3Rpb24oKXt2YXIgb3BhY2l0eT0vb3BhY2l0eT0oW14pXSopLyxnZXRDb21wdXRlZFN0eWxlPWRvY3VtZW50LmRlZmF1bHRWaWV3JiZkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlO3JldHVybiBmdW5jdGlvbihlbCxzdHlsZSl7dmFyIHJldDtpZighc3VwcG9ydHNPcGFjaXR5JiZzdHlsZT09XCJvcGFjaXR5XCImJmVsLmN1cnJlbnRTdHlsZSl7cmV0PW9wYWNpdHkudGVzdChlbC5jdXJyZW50U3R5bGUuZmlsdGVyfHxcIlwiKT8ocGFyc2VGbG9hdChSZWdFeHAuJDEpLzEwMCkrXCJcIjpcIlwiO3JldHVybiByZXQ9PT1cIlwiP1wiMVwiOnJldH1pZihnZXRDb21wdXRlZFN0eWxlKXt2YXIgY29tcHV0ZWRTdHlsZT1nZXRDb21wdXRlZFN0eWxlKGVsLG51bGwpO2lmKGNvbXB1dGVkU3R5bGUpe3JldD1jb21wdXRlZFN0eWxlW3N0eWxlXX1pZihzdHlsZT09XCJvcGFjaXR5XCImJnJldD09XCJcIil7cmV0PVwiMVwifX1lbHNle3JldD1lbC5jdXJyZW50U3R5bGVbc3R5bGVdfXJldHVybiByZXR9fSkoKTtTLmFwcGVuZEhUTUw9ZnVuY3Rpb24oZWwsaHRtbCl7aWYoZWwuaW5zZXJ0QWRqYWNlbnRIVE1MKXtlbC5pbnNlcnRBZGphY2VudEhUTUwoXCJCZWZvcmVFbmRcIixodG1sKX1lbHNle2lmKGVsLmxhc3RDaGlsZCl7dmFyIHJhbmdlPWVsLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtyYW5nZS5zZXRTdGFydEFmdGVyKGVsLmxhc3RDaGlsZCk7dmFyIGZyYWc9cmFuZ2UuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGh0bWwpO2VsLmFwcGVuZENoaWxkKGZyYWcpfWVsc2V7ZWwuaW5uZXJIVE1MPWh0bWx9fX07Uy5nZXRXaW5kb3dTaXplPWZ1bmN0aW9uKGRpbWVuc2lvbil7aWYoZG9jdW1lbnQuY29tcGF0TW9kZT09PVwiQ1NTMUNvbXBhdFwiKXtyZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W1wiY2xpZW50XCIrZGltZW5zaW9uXX1yZXR1cm4gZG9jdW1lbnQuYm9keVtcImNsaWVudFwiK2RpbWVuc2lvbl19O1Muc2V0T3BhY2l0eT1mdW5jdGlvbihlbCxvcGFjaXR5KXt2YXIgc3R5bGU9ZWwuc3R5bGU7aWYoc3VwcG9ydHNPcGFjaXR5KXtzdHlsZS5vcGFjaXR5PShvcGFjaXR5PT0xP1wiXCI6b3BhY2l0eSl9ZWxzZXtzdHlsZS56b29tPTE7aWYob3BhY2l0eT09MSl7aWYodHlwZW9mIHN0eWxlLmZpbHRlcj09XCJzdHJpbmdcIiYmKC9hbHBoYS9pKS50ZXN0KHN0eWxlLmZpbHRlcikpe3N0eWxlLmZpbHRlcj1zdHlsZS5maWx0ZXIucmVwbGFjZSgvXFxzKltcXHdcXC5dKmFscGhhXFwoW15cXCldKlxcKTs/L2dpLFwiXCIpfX1lbHNle3N0eWxlLmZpbHRlcj0oc3R5bGUuZmlsdGVyfHxcIlwiKS5yZXBsYWNlKC9cXHMqW1xcd1xcLl0qYWxwaGFcXChbXlxcKV0qXFwpL2dpLFwiXCIpK1wiIGFscGhhKG9wYWNpdHk9XCIrKG9wYWNpdHkqMTAwKStcIilcIn19fTtTLmNsZWFyT3BhY2l0eT1mdW5jdGlvbihlbCl7Uy5zZXRPcGFjaXR5KGVsLDEpfTtmdW5jdGlvbiBnZXRUYXJnZXQoZSl7cmV0dXJuIGUudGFyZ2V0fWZ1bmN0aW9uIGdldFBhZ2VYWShlKXtyZXR1cm5bZS5wYWdlWCxlLnBhZ2VZXX1mdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChlKXtlLnByZXZlbnREZWZhdWx0KCl9ZnVuY3Rpb24ga2V5Q29kZShlKXtyZXR1cm4gZS5rZXlDb2RlfWZ1bmN0aW9uIGFkZEV2ZW50KGVsLHR5cGUsaGFuZGxlcil7alF1ZXJ5KGVsKS5iaW5kKHR5cGUsaGFuZGxlcil9ZnVuY3Rpb24gcmVtb3ZlRXZlbnQoZWwsdHlwZSxoYW5kbGVyKXtqUXVlcnkoZWwpLnVuYmluZCh0eXBlLGhhbmRsZXIpfWpRdWVyeS5mbi5zaGFkb3dib3g9ZnVuY3Rpb24ob3B0aW9ucyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlbD1qUXVlcnkodGhpcyk7dmFyIG9wdHM9alF1ZXJ5LmV4dGVuZCh7fSxvcHRpb25zfHx7fSxqUXVlcnkubWV0YWRhdGE/ZWwubWV0YWRhdGEoKTpqUXVlcnkubWV0YT9lbC5kYXRhKCk6e30pO3ZhciBjbHM9dGhpcy5jbGFzc05hbWV8fFwiXCI7b3B0cy53aWR0aD1wYXJzZUludCgoY2xzLm1hdGNoKC93OihcXGQrKS8pfHxbXSlbMV0pfHxvcHRzLndpZHRoO29wdHMuaGVpZ2h0PXBhcnNlSW50KChjbHMubWF0Y2goL2g6KFxcZCspLyl8fFtdKVsxXSl8fG9wdHMuaGVpZ2h0O1NoYWRvd2JveC5zZXR1cChlbCxvcHRzKX0pfTt2YXIgbG9hZGVkPWZhbHNlLERPTUNvbnRlbnRMb2FkZWQ7aWYoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcil7RE9NQ29udGVudExvYWRlZD1mdW5jdGlvbigpe2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsRE9NQ29udGVudExvYWRlZCxmYWxzZSk7Uy5sb2FkKCl9fWVsc2V7aWYoZG9jdW1lbnQuYXR0YWNoRXZlbnQpe0RPTUNvbnRlbnRMb2FkZWQ9ZnVuY3Rpb24oKXtpZihkb2N1bWVudC5yZWFkeVN0YXRlPT09XCJjb21wbGV0ZVwiKXtkb2N1bWVudC5kZXRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLERPTUNvbnRlbnRMb2FkZWQpO1MubG9hZCgpfX19fWZ1bmN0aW9uIGRvU2Nyb2xsQ2hlY2soKXtpZihsb2FkZWQpe3JldHVybn10cnl7ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsKFwibGVmdFwiKX1jYXRjaChlKXtzZXRUaW1lb3V0KGRvU2Nyb2xsQ2hlY2ssMSk7cmV0dXJufVMubG9hZCgpfWZ1bmN0aW9uIGJpbmRMb2FkKCl7aWYoZG9jdW1lbnQucmVhZHlTdGF0ZT09PVwiY29tcGxldGVcIil7cmV0dXJuIFMubG9hZCgpfWlmKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIpe2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsRE9NQ29udGVudExvYWRlZCxmYWxzZSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsUy5sb2FkLGZhbHNlKX1lbHNle2lmKGRvY3VtZW50LmF0dGFjaEV2ZW50KXtkb2N1bWVudC5hdHRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLERPTUNvbnRlbnRMb2FkZWQpO3dpbmRvdy5hdHRhY2hFdmVudChcIm9ubG9hZFwiLFMubG9hZCk7dmFyIHRvcExldmVsPWZhbHNlO3RyeXt0b3BMZXZlbD13aW5kb3cuZnJhbWVFbGVtZW50PT09bnVsbH1jYXRjaChlKXt9aWYoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsJiZ0b3BMZXZlbCl7ZG9TY3JvbGxDaGVjaygpfX19fVMubG9hZD1mdW5jdGlvbigpe2lmKGxvYWRlZCl7cmV0dXJufWlmKCFkb2N1bWVudC5ib2R5KXtyZXR1cm4gc2V0VGltZW91dChTLmxvYWQsMTMpfWxvYWRlZD10cnVlO2NoZWNrU3VwcG9ydCgpO1Mub25SZWFkeSgpO2lmKCFTLm9wdGlvbnMuc2tpcFNldHVwKXtTLnNldHVwKCl9Uy5za2luLmluaXQoKX07Uy5wbHVnaW5zPXt9O2lmKG5hdmlnYXRvci5wbHVnaW5zJiZuYXZpZ2F0b3IucGx1Z2lucy5sZW5ndGgpe3ZhciBuYW1lcz1bXTtlYWNoKG5hdmlnYXRvci5wbHVnaW5zLGZ1bmN0aW9uKGkscCl7bmFtZXMucHVzaChwLm5hbWUpfSk7bmFtZXM9bmFtZXMuam9pbihcIixcIik7dmFyIGY0bT1uYW1lcy5pbmRleE9mKFwiRmxpcDRNYWNcIik+LTE7Uy5wbHVnaW5zPXtmbGE6bmFtZXMuaW5kZXhPZihcIlNob2Nrd2F2ZSBGbGFzaFwiKT4tMSxxdDpuYW1lcy5pbmRleE9mKFwiUXVpY2tUaW1lXCIpPi0xLHdtcDohZjRtJiZuYW1lcy5pbmRleE9mKFwiV2luZG93cyBNZWRpYVwiKT4tMSxmNG06ZjRtfX1lbHNle3ZhciBkZXRlY3RQbHVnaW49ZnVuY3Rpb24obmFtZSl7dmFyIGF4bzt0cnl7YXhvPW5ldyBBY3RpdmVYT2JqZWN0KG5hbWUpfWNhdGNoKGUpe31yZXR1cm4gISFheG99O1MucGx1Z2lucz17ZmxhOmRldGVjdFBsdWdpbihcIlNob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoXCIpLHF0OmRldGVjdFBsdWdpbihcIlF1aWNrVGltZS5RdWlja1RpbWVcIiksd21wOmRldGVjdFBsdWdpbihcIndtcGxheWVyLm9jeFwiKSxmNG06ZmFsc2V9fXZhciByZWxBdHRyPS9eKGxpZ2h0fHNoYWRvdylib3gvaSxleHBhbmRvPVwic2hhZG93Ym94Q2FjaGVLZXlcIixjYWNoZUtleT0xO1MuY2FjaGU9e307Uy5zZWxlY3Q9ZnVuY3Rpb24oc2VsZWN0b3Ipe3ZhciBsaW5rcz1bXTtpZighc2VsZWN0b3Ipe3ZhciByZWw7ZWFjaChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImFcIiksZnVuY3Rpb24oaSxlbCl7cmVsPWVsLmdldEF0dHJpYnV0ZShcInJlbFwiKTtpZihyZWwmJnJlbEF0dHIudGVzdChyZWwpKXtsaW5rcy5wdXNoKGVsKX19KX1lbHNle3ZhciBsZW5ndGg9c2VsZWN0b3IubGVuZ3RoO2lmKGxlbmd0aCl7aWYodHlwZW9mIHNlbGVjdG9yPT1cInN0cmluZ1wiKXtpZihTLmZpbmQpe2xpbmtzPVMuZmluZChzZWxlY3Rvcil9fWVsc2V7aWYobGVuZ3RoPT0yJiZ0eXBlb2Ygc2VsZWN0b3JbMF09PVwic3RyaW5nXCImJnNlbGVjdG9yWzFdLm5vZGVUeXBlKXtpZihTLmZpbmQpe2xpbmtzPVMuZmluZChzZWxlY3RvclswXSxzZWxlY3RvclsxXSl9fWVsc2V7Zm9yKHZhciBpPTA7aTxsZW5ndGg7KytpKXtsaW5rc1tpXT1zZWxlY3RvcltpXX19fX1lbHNle2xpbmtzLnB1c2goc2VsZWN0b3IpfX1yZXR1cm4gbGlua3N9O1Muc2V0dXA9ZnVuY3Rpb24oc2VsZWN0b3Isb3B0aW9ucyl7ZWFjaChTLnNlbGVjdChzZWxlY3RvciksZnVuY3Rpb24oaSxsaW5rKXtTLmFkZENhY2hlKGxpbmssb3B0aW9ucyl9KX07Uy50ZWFyZG93bj1mdW5jdGlvbihzZWxlY3Rvcil7ZWFjaChTLnNlbGVjdChzZWxlY3RvciksZnVuY3Rpb24oaSxsaW5rKXtTLnJlbW92ZUNhY2hlKGxpbmspfSl9O1MuYWRkQ2FjaGU9ZnVuY3Rpb24obGluayxvcHRpb25zKXt2YXIga2V5PWxpbmtbZXhwYW5kb107aWYoa2V5PT11bmRlZmluZWQpe2tleT1jYWNoZUtleSsrO2xpbmtbZXhwYW5kb109a2V5O2FkZEV2ZW50KGxpbmssXCJjbGlja1wiLGhhbmRsZUNsaWNrKX1TLmNhY2hlW2tleV09Uy5tYWtlT2JqZWN0KGxpbmssb3B0aW9ucyl9O1MucmVtb3ZlQ2FjaGU9ZnVuY3Rpb24obGluayl7cmVtb3ZlRXZlbnQobGluayxcImNsaWNrXCIsaGFuZGxlQ2xpY2spO2RlbGV0ZSBTLmNhY2hlW2xpbmtbZXhwYW5kb11dO2xpbmtbZXhwYW5kb109bnVsbH07Uy5nZXRDYWNoZT1mdW5jdGlvbihsaW5rKXt2YXIga2V5PWxpbmtbZXhwYW5kb107cmV0dXJuKGtleSBpbiBTLmNhY2hlJiZTLmNhY2hlW2tleV0pfTtTLmNsZWFyQ2FjaGU9ZnVuY3Rpb24oKXtmb3IodmFyIGtleSBpbiBTLmNhY2hlKXtTLnJlbW92ZUNhY2hlKFMuY2FjaGVba2V5XS5saW5rKX1TLmNhY2hlPXt9fTtmdW5jdGlvbiBoYW5kbGVDbGljayhlKXtTLm9wZW4odGhpcyk7aWYoUy5nYWxsZXJ5Lmxlbmd0aCl7cHJldmVudERlZmF1bHQoZSl9fVxuLypcbiAqIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIC0gdjEuMFxuICogIENvcHlyaWdodCAyMDA5LCBUaGUgRG9qbyBGb3VuZGF0aW9uXG4gKiAgUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCwgQlNELCBhbmQgR1BMIExpY2Vuc2VzLlxuICogIE1vcmUgaW5mb3JtYXRpb246IGh0dHA6Ly9zaXp6bGVqcy5jb20vXG4gKlxuICogTW9kaWZpZWQgZm9yIGluY2x1c2lvbiBpbiBTaGFkb3dib3guanNcbiAqL1xuUy5maW5kPShmdW5jdGlvbigpe3ZhciBjaHVua2VyPS8oKD86XFwoKD86XFwoW14oKV0rXFwpfFteKCldKykrXFwpfFxcWyg/OlxcW1teW1xcXV0qXFxdfFsnXCJdW14nXCJdKlsnXCJdfFteW1xcXSdcIl0rKStcXF18XFxcXC58W14gPit+LChcXFtcXFxcXSspK3xbPit+XSkoXFxzKixcXHMqKT8oKD86LnxcXHJ8XFxuKSopL2csZG9uZT0wLHRvU3RyaW5nPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsaGFzRHVwbGljYXRlPWZhbHNlLGJhc2VIYXNEdXBsaWNhdGU9dHJ1ZTtbMCwwXS5zb3J0KGZ1bmN0aW9uKCl7YmFzZUhhc0R1cGxpY2F0ZT1mYWxzZTtyZXR1cm4gMH0pO3ZhciBTaXp6bGU9ZnVuY3Rpb24oc2VsZWN0b3IsY29udGV4dCxyZXN1bHRzLHNlZWQpe3Jlc3VsdHM9cmVzdWx0c3x8W107dmFyIG9yaWdDb250ZXh0PWNvbnRleHQ9Y29udGV4dHx8ZG9jdW1lbnQ7aWYoY29udGV4dC5ub2RlVHlwZSE9PTEmJmNvbnRleHQubm9kZVR5cGUhPT05KXtyZXR1cm5bXX1pZighc2VsZWN0b3J8fHR5cGVvZiBzZWxlY3RvciE9PVwic3RyaW5nXCIpe3JldHVybiByZXN1bHRzfXZhciBwYXJ0cz1bXSxtLHNldCxjaGVja1NldCxleHRyYSxwcnVuZT10cnVlLGNvbnRleHRYTUw9aXNYTUwoY29udGV4dCksc29GYXI9c2VsZWN0b3I7d2hpbGUoKGNodW5rZXIuZXhlYyhcIlwiKSxtPWNodW5rZXIuZXhlYyhzb0ZhcikpIT09bnVsbCl7c29GYXI9bVszXTtwYXJ0cy5wdXNoKG1bMV0pO2lmKG1bMl0pe2V4dHJhPW1bM107YnJlYWt9fWlmKHBhcnRzLmxlbmd0aD4xJiZvcmlnUE9TLmV4ZWMoc2VsZWN0b3IpKXtpZihwYXJ0cy5sZW5ndGg9PT0yJiZFeHByLnJlbGF0aXZlW3BhcnRzWzBdXSl7c2V0PXBvc1Byb2Nlc3MocGFydHNbMF0rcGFydHNbMV0sY29udGV4dCl9ZWxzZXtzZXQ9RXhwci5yZWxhdGl2ZVtwYXJ0c1swXV0/W2NvbnRleHRdOlNpenpsZShwYXJ0cy5zaGlmdCgpLGNvbnRleHQpO3doaWxlKHBhcnRzLmxlbmd0aCl7c2VsZWN0b3I9cGFydHMuc2hpZnQoKTtpZihFeHByLnJlbGF0aXZlW3NlbGVjdG9yXSl7c2VsZWN0b3IrPXBhcnRzLnNoaWZ0KCl9c2V0PXBvc1Byb2Nlc3Moc2VsZWN0b3Isc2V0KX19fWVsc2V7aWYoIXNlZWQmJnBhcnRzLmxlbmd0aD4xJiZjb250ZXh0Lm5vZGVUeXBlPT09OSYmIWNvbnRleHRYTUwmJkV4cHIubWF0Y2guSUQudGVzdChwYXJ0c1swXSkmJiFFeHByLm1hdGNoLklELnRlc3QocGFydHNbcGFydHMubGVuZ3RoLTFdKSl7dmFyIHJldD1TaXp6bGUuZmluZChwYXJ0cy5zaGlmdCgpLGNvbnRleHQsY29udGV4dFhNTCk7Y29udGV4dD1yZXQuZXhwcj9TaXp6bGUuZmlsdGVyKHJldC5leHByLHJldC5zZXQpWzBdOnJldC5zZXRbMF19aWYoY29udGV4dCl7dmFyIHJldD1zZWVkP3tleHByOnBhcnRzLnBvcCgpLHNldDptYWtlQXJyYXkoc2VlZCl9OlNpenpsZS5maW5kKHBhcnRzLnBvcCgpLHBhcnRzLmxlbmd0aD09PTEmJihwYXJ0c1swXT09PVwiflwifHxwYXJ0c1swXT09PVwiK1wiKSYmY29udGV4dC5wYXJlbnROb2RlP2NvbnRleHQucGFyZW50Tm9kZTpjb250ZXh0LGNvbnRleHRYTUwpO3NldD1yZXQuZXhwcj9TaXp6bGUuZmlsdGVyKHJldC5leHByLHJldC5zZXQpOnJldC5zZXQ7aWYocGFydHMubGVuZ3RoPjApe2NoZWNrU2V0PW1ha2VBcnJheShzZXQpfWVsc2V7cHJ1bmU9ZmFsc2V9d2hpbGUocGFydHMubGVuZ3RoKXt2YXIgY3VyPXBhcnRzLnBvcCgpLHBvcD1jdXI7aWYoIUV4cHIucmVsYXRpdmVbY3VyXSl7Y3VyPVwiXCJ9ZWxzZXtwb3A9cGFydHMucG9wKCl9aWYocG9wPT1udWxsKXtwb3A9Y29udGV4dH1FeHByLnJlbGF0aXZlW2N1cl0oY2hlY2tTZXQscG9wLGNvbnRleHRYTUwpfX1lbHNle2NoZWNrU2V0PXBhcnRzPVtdfX1pZighY2hlY2tTZXQpe2NoZWNrU2V0PXNldH1pZighY2hlY2tTZXQpe3Rocm93XCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIisoY3VyfHxzZWxlY3Rvcil9aWYodG9TdHJpbmcuY2FsbChjaGVja1NldCk9PT1cIltvYmplY3QgQXJyYXldXCIpe2lmKCFwcnVuZSl7cmVzdWx0cy5wdXNoLmFwcGx5KHJlc3VsdHMsY2hlY2tTZXQpfWVsc2V7aWYoY29udGV4dCYmY29udGV4dC5ub2RlVHlwZT09PTEpe2Zvcih2YXIgaT0wO2NoZWNrU2V0W2ldIT1udWxsO2krKyl7aWYoY2hlY2tTZXRbaV0mJihjaGVja1NldFtpXT09PXRydWV8fGNoZWNrU2V0W2ldLm5vZGVUeXBlPT09MSYmY29udGFpbnMoY29udGV4dCxjaGVja1NldFtpXSkpKXtyZXN1bHRzLnB1c2goc2V0W2ldKX19fWVsc2V7Zm9yKHZhciBpPTA7Y2hlY2tTZXRbaV0hPW51bGw7aSsrKXtpZihjaGVja1NldFtpXSYmY2hlY2tTZXRbaV0ubm9kZVR5cGU9PT0xKXtyZXN1bHRzLnB1c2goc2V0W2ldKX19fX19ZWxzZXttYWtlQXJyYXkoY2hlY2tTZXQscmVzdWx0cyl9aWYoZXh0cmEpe1NpenpsZShleHRyYSxvcmlnQ29udGV4dCxyZXN1bHRzLHNlZWQpO1NpenpsZS51bmlxdWVTb3J0KHJlc3VsdHMpfXJldHVybiByZXN1bHRzfTtTaXp6bGUudW5pcXVlU29ydD1mdW5jdGlvbihyZXN1bHRzKXtpZihzb3J0T3JkZXIpe2hhc0R1cGxpY2F0ZT1iYXNlSGFzRHVwbGljYXRlO3Jlc3VsdHMuc29ydChzb3J0T3JkZXIpO2lmKGhhc0R1cGxpY2F0ZSl7Zm9yKHZhciBpPTE7aTxyZXN1bHRzLmxlbmd0aDtpKyspe2lmKHJlc3VsdHNbaV09PT1yZXN1bHRzW2ktMV0pe3Jlc3VsdHMuc3BsaWNlKGktLSwxKX19fX1yZXR1cm4gcmVzdWx0c307U2l6emxlLm1hdGNoZXM9ZnVuY3Rpb24oZXhwcixzZXQpe3JldHVybiBTaXp6bGUoZXhwcixudWxsLG51bGwsc2V0KX07U2l6emxlLmZpbmQ9ZnVuY3Rpb24oZXhwcixjb250ZXh0LGlzWE1MKXt2YXIgc2V0LG1hdGNoO2lmKCFleHByKXtyZXR1cm5bXX1mb3IodmFyIGk9MCxsPUV4cHIub3JkZXIubGVuZ3RoO2k8bDtpKyspe3ZhciB0eXBlPUV4cHIub3JkZXJbaV0sbWF0Y2g7aWYoKG1hdGNoPUV4cHIubGVmdE1hdGNoW3R5cGVdLmV4ZWMoZXhwcikpKXt2YXIgbGVmdD1tYXRjaFsxXTttYXRjaC5zcGxpY2UoMSwxKTtpZihsZWZ0LnN1YnN0cihsZWZ0Lmxlbmd0aC0xKSE9PVwiXFxcXFwiKXttYXRjaFsxXT0obWF0Y2hbMV18fFwiXCIpLnJlcGxhY2UoL1xcXFwvZyxcIlwiKTtzZXQ9RXhwci5maW5kW3R5cGVdKG1hdGNoLGNvbnRleHQsaXNYTUwpO2lmKHNldCE9bnVsbCl7ZXhwcj1leHByLnJlcGxhY2UoRXhwci5tYXRjaFt0eXBlXSxcIlwiKTticmVha319fX1pZighc2V0KXtzZXQ9Y29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIil9cmV0dXJue3NldDpzZXQsZXhwcjpleHByfX07U2l6emxlLmZpbHRlcj1mdW5jdGlvbihleHByLHNldCxpbnBsYWNlLG5vdCl7dmFyIG9sZD1leHByLHJlc3VsdD1bXSxjdXJMb29wPXNldCxtYXRjaCxhbnlGb3VuZCxpc1hNTEZpbHRlcj1zZXQmJnNldFswXSYmaXNYTUwoc2V0WzBdKTt3aGlsZShleHByJiZzZXQubGVuZ3RoKXtmb3IodmFyIHR5cGUgaW4gRXhwci5maWx0ZXIpe2lmKChtYXRjaD1FeHByLm1hdGNoW3R5cGVdLmV4ZWMoZXhwcikpIT1udWxsKXt2YXIgZmlsdGVyPUV4cHIuZmlsdGVyW3R5cGVdLGZvdW5kLGl0ZW07YW55Rm91bmQ9ZmFsc2U7aWYoY3VyTG9vcD09PXJlc3VsdCl7cmVzdWx0PVtdfWlmKEV4cHIucHJlRmlsdGVyW3R5cGVdKXttYXRjaD1FeHByLnByZUZpbHRlclt0eXBlXShtYXRjaCxjdXJMb29wLGlucGxhY2UscmVzdWx0LG5vdCxpc1hNTEZpbHRlcik7aWYoIW1hdGNoKXthbnlGb3VuZD1mb3VuZD10cnVlfWVsc2V7aWYobWF0Y2g9PT10cnVlKXtjb250aW51ZX19fWlmKG1hdGNoKXtmb3IodmFyIGk9MDsoaXRlbT1jdXJMb29wW2ldKSE9bnVsbDtpKyspe2lmKGl0ZW0pe2ZvdW5kPWZpbHRlcihpdGVtLG1hdGNoLGksY3VyTG9vcCk7dmFyIHBhc3M9bm90XiEhZm91bmQ7aWYoaW5wbGFjZSYmZm91bmQhPW51bGwpe2lmKHBhc3Mpe2FueUZvdW5kPXRydWV9ZWxzZXtjdXJMb29wW2ldPWZhbHNlfX1lbHNle2lmKHBhc3Mpe3Jlc3VsdC5wdXNoKGl0ZW0pO2FueUZvdW5kPXRydWV9fX19fWlmKGZvdW5kIT09dW5kZWZpbmVkKXtpZighaW5wbGFjZSl7Y3VyTG9vcD1yZXN1bHR9ZXhwcj1leHByLnJlcGxhY2UoRXhwci5tYXRjaFt0eXBlXSxcIlwiKTtpZighYW55Rm91bmQpe3JldHVybltdfWJyZWFrfX19aWYoZXhwcj09PW9sZCl7aWYoYW55Rm91bmQ9PW51bGwpe3Rocm93XCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIitleHByfWVsc2V7YnJlYWt9fW9sZD1leHByfXJldHVybiBjdXJMb29wfTt2YXIgRXhwcj1TaXp6bGUuc2VsZWN0b3JzPXtvcmRlcjpbXCJJRFwiLFwiTkFNRVwiLFwiVEFHXCJdLG1hdGNoOntJRDovIygoPzpbXFx3XFx1MDBjMC1cXHVGRkZGLV18XFxcXC4pKykvLENMQVNTOi9cXC4oKD86W1xcd1xcdTAwYzAtXFx1RkZGRi1dfFxcXFwuKSspLyxOQU1FOi9cXFtuYW1lPVsnXCJdKigoPzpbXFx3XFx1MDBjMC1cXHVGRkZGLV18XFxcXC4pKylbJ1wiXSpcXF0vLEFUVFI6L1xcW1xccyooKD86W1xcd1xcdTAwYzAtXFx1RkZGRi1dfFxcXFwuKSspXFxzKig/OihcXFM/PSlcXHMqKFsnXCJdKikoLio/KVxcM3wpXFxzKlxcXS8sVEFHOi9eKCg/OltcXHdcXHUwMGMwLVxcdUZGRkZcXCotXXxcXFxcLikrKS8sQ0hJTEQ6Lzoob25seXxudGh8bGFzdHxmaXJzdCktY2hpbGQoPzpcXCgoZXZlbnxvZGR8W1xcZG4rLV0qKVxcKSk/LyxQT1M6LzoobnRofGVxfGd0fGx0fGZpcnN0fGxhc3R8ZXZlbnxvZGQpKD86XFwoKFxcZCopXFwpKT8oPz1bXi1dfCQpLyxQU0VVRE86LzooKD86W1xcd1xcdTAwYzAtXFx1RkZGRi1dfFxcXFwuKSspKD86XFwoKFsnXCJdKikoKD86XFwoW15cXCldK1xcKXxbXlxcMlxcKFxcKV0qKSspXFwyXFwpKT8vfSxsZWZ0TWF0Y2g6e30sYXR0ck1hcDp7XCJjbGFzc1wiOlwiY2xhc3NOYW1lXCIsXCJmb3JcIjpcImh0bWxGb3JcIn0sYXR0ckhhbmRsZTp7aHJlZjpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpfX0scmVsYXRpdmU6e1wiK1wiOmZ1bmN0aW9uKGNoZWNrU2V0LHBhcnQpe3ZhciBpc1BhcnRTdHI9dHlwZW9mIHBhcnQ9PT1cInN0cmluZ1wiLGlzVGFnPWlzUGFydFN0ciYmIS9cXFcvLnRlc3QocGFydCksaXNQYXJ0U3RyTm90VGFnPWlzUGFydFN0ciYmIWlzVGFnO2lmKGlzVGFnKXtwYXJ0PXBhcnQudG9Mb3dlckNhc2UoKX1mb3IodmFyIGk9MCxsPWNoZWNrU2V0Lmxlbmd0aCxlbGVtO2k8bDtpKyspe2lmKChlbGVtPWNoZWNrU2V0W2ldKSl7d2hpbGUoKGVsZW09ZWxlbS5wcmV2aW91c1NpYmxpbmcpJiZlbGVtLm5vZGVUeXBlIT09MSl7fWNoZWNrU2V0W2ldPWlzUGFydFN0ck5vdFRhZ3x8ZWxlbSYmZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cGFydD9lbGVtfHxmYWxzZTplbGVtPT09cGFydH19aWYoaXNQYXJ0U3RyTm90VGFnKXtTaXp6bGUuZmlsdGVyKHBhcnQsY2hlY2tTZXQsdHJ1ZSl9fSxcIj5cIjpmdW5jdGlvbihjaGVja1NldCxwYXJ0KXt2YXIgaXNQYXJ0U3RyPXR5cGVvZiBwYXJ0PT09XCJzdHJpbmdcIjtpZihpc1BhcnRTdHImJiEvXFxXLy50ZXN0KHBhcnQpKXtwYXJ0PXBhcnQudG9Mb3dlckNhc2UoKTtmb3IodmFyIGk9MCxsPWNoZWNrU2V0Lmxlbmd0aDtpPGw7aSsrKXt2YXIgZWxlbT1jaGVja1NldFtpXTtpZihlbGVtKXt2YXIgcGFyZW50PWVsZW0ucGFyZW50Tm9kZTtjaGVja1NldFtpXT1wYXJlbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXBhcnQ/cGFyZW50OmZhbHNlfX19ZWxzZXtmb3IodmFyIGk9MCxsPWNoZWNrU2V0Lmxlbmd0aDtpPGw7aSsrKXt2YXIgZWxlbT1jaGVja1NldFtpXTtpZihlbGVtKXtjaGVja1NldFtpXT1pc1BhcnRTdHI/ZWxlbS5wYXJlbnROb2RlOmVsZW0ucGFyZW50Tm9kZT09PXBhcnR9fWlmKGlzUGFydFN0cil7U2l6emxlLmZpbHRlcihwYXJ0LGNoZWNrU2V0LHRydWUpfX19LFwiXCI6ZnVuY3Rpb24oY2hlY2tTZXQscGFydCxpc1hNTCl7dmFyIGRvbmVOYW1lPWRvbmUrKyxjaGVja0ZuPWRpckNoZWNrO2lmKHR5cGVvZiBwYXJ0PT09XCJzdHJpbmdcIiYmIS9cXFcvLnRlc3QocGFydCkpe3ZhciBub2RlQ2hlY2s9cGFydD1wYXJ0LnRvTG93ZXJDYXNlKCk7Y2hlY2tGbj1kaXJOb2RlQ2hlY2t9Y2hlY2tGbihcInBhcmVudE5vZGVcIixwYXJ0LGRvbmVOYW1lLGNoZWNrU2V0LG5vZGVDaGVjayxpc1hNTCl9LFwiflwiOmZ1bmN0aW9uKGNoZWNrU2V0LHBhcnQsaXNYTUwpe3ZhciBkb25lTmFtZT1kb25lKyssY2hlY2tGbj1kaXJDaGVjaztpZih0eXBlb2YgcGFydD09PVwic3RyaW5nXCImJiEvXFxXLy50ZXN0KHBhcnQpKXt2YXIgbm9kZUNoZWNrPXBhcnQ9cGFydC50b0xvd2VyQ2FzZSgpO2NoZWNrRm49ZGlyTm9kZUNoZWNrfWNoZWNrRm4oXCJwcmV2aW91c1NpYmxpbmdcIixwYXJ0LGRvbmVOYW1lLGNoZWNrU2V0LG5vZGVDaGVjayxpc1hNTCl9fSxmaW5kOntJRDpmdW5jdGlvbihtYXRjaCxjb250ZXh0LGlzWE1MKXtpZih0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50QnlJZCE9PVwidW5kZWZpbmVkXCImJiFpc1hNTCl7dmFyIG09Y29udGV4dC5nZXRFbGVtZW50QnlJZChtYXRjaFsxXSk7cmV0dXJuIG0/W21dOltdfX0sTkFNRTpmdW5jdGlvbihtYXRjaCxjb250ZXh0KXtpZih0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5TmFtZSE9PVwidW5kZWZpbmVkXCIpe3ZhciByZXQ9W10scmVzdWx0cz1jb250ZXh0LmdldEVsZW1lbnRzQnlOYW1lKG1hdGNoWzFdKTtmb3IodmFyIGk9MCxsPXJlc3VsdHMubGVuZ3RoO2k8bDtpKyspe2lmKHJlc3VsdHNbaV0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKT09PW1hdGNoWzFdKXtyZXQucHVzaChyZXN1bHRzW2ldKX19cmV0dXJuIHJldC5sZW5ndGg9PT0wP251bGw6cmV0fX0sVEFHOmZ1bmN0aW9uKG1hdGNoLGNvbnRleHQpe3JldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKG1hdGNoWzFdKX19LHByZUZpbHRlcjp7Q0xBU1M6ZnVuY3Rpb24obWF0Y2gsY3VyTG9vcCxpbnBsYWNlLHJlc3VsdCxub3QsaXNYTUwpe21hdGNoPVwiIFwiK21hdGNoWzFdLnJlcGxhY2UoL1xcXFwvZyxcIlwiKStcIiBcIjtpZihpc1hNTCl7cmV0dXJuIG1hdGNofWZvcih2YXIgaT0wLGVsZW07KGVsZW09Y3VyTG9vcFtpXSkhPW51bGw7aSsrKXtpZihlbGVtKXtpZihub3ReKGVsZW0uY2xhc3NOYW1lJiYoXCIgXCIrZWxlbS5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoL1tcXHRcXG5dL2csXCIgXCIpLmluZGV4T2YobWF0Y2gpPj0wKSl7aWYoIWlucGxhY2Upe3Jlc3VsdC5wdXNoKGVsZW0pfX1lbHNle2lmKGlucGxhY2Upe2N1ckxvb3BbaV09ZmFsc2V9fX19cmV0dXJuIGZhbHNlfSxJRDpmdW5jdGlvbihtYXRjaCl7cmV0dXJuIG1hdGNoWzFdLnJlcGxhY2UoL1xcXFwvZyxcIlwiKX0sVEFHOmZ1bmN0aW9uKG1hdGNoLGN1ckxvb3Ape3JldHVybiBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpfSxDSElMRDpmdW5jdGlvbihtYXRjaCl7aWYobWF0Y2hbMV09PT1cIm50aFwiKXt2YXIgdGVzdD0vKC0/KShcXGQqKW4oKD86XFwrfC0pP1xcZCopLy5leGVjKG1hdGNoWzJdPT09XCJldmVuXCImJlwiMm5cInx8bWF0Y2hbMl09PT1cIm9kZFwiJiZcIjJuKzFcInx8IS9cXEQvLnRlc3QobWF0Y2hbMl0pJiZcIjBuK1wiK21hdGNoWzJdfHxtYXRjaFsyXSk7bWF0Y2hbMl09KHRlc3RbMV0rKHRlc3RbMl18fDEpKS0wO21hdGNoWzNdPXRlc3RbM10tMH1tYXRjaFswXT1kb25lKys7cmV0dXJuIG1hdGNofSxBVFRSOmZ1bmN0aW9uKG1hdGNoLGN1ckxvb3AsaW5wbGFjZSxyZXN1bHQsbm90LGlzWE1MKXt2YXIgbmFtZT1tYXRjaFsxXS5yZXBsYWNlKC9cXFxcL2csXCJcIik7aWYoIWlzWE1MJiZFeHByLmF0dHJNYXBbbmFtZV0pe21hdGNoWzFdPUV4cHIuYXR0ck1hcFtuYW1lXX1pZihtYXRjaFsyXT09PVwifj1cIil7bWF0Y2hbNF09XCIgXCIrbWF0Y2hbNF0rXCIgXCJ9cmV0dXJuIG1hdGNofSxQU0VVRE86ZnVuY3Rpb24obWF0Y2gsY3VyTG9vcCxpbnBsYWNlLHJlc3VsdCxub3Qpe2lmKG1hdGNoWzFdPT09XCJub3RcIil7aWYoKGNodW5rZXIuZXhlYyhtYXRjaFszXSl8fFwiXCIpLmxlbmd0aD4xfHwvXlxcdy8udGVzdChtYXRjaFszXSkpe21hdGNoWzNdPVNpenpsZShtYXRjaFszXSxudWxsLG51bGwsY3VyTG9vcCl9ZWxzZXt2YXIgcmV0PVNpenpsZS5maWx0ZXIobWF0Y2hbM10sY3VyTG9vcCxpbnBsYWNlLHRydWVebm90KTtpZighaW5wbGFjZSl7cmVzdWx0LnB1c2guYXBwbHkocmVzdWx0LHJldCl9cmV0dXJuIGZhbHNlfX1lbHNle2lmKEV4cHIubWF0Y2guUE9TLnRlc3QobWF0Y2hbMF0pfHxFeHByLm1hdGNoLkNISUxELnRlc3QobWF0Y2hbMF0pKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIG1hdGNofSxQT1M6ZnVuY3Rpb24obWF0Y2gpe21hdGNoLnVuc2hpZnQodHJ1ZSk7cmV0dXJuIG1hdGNofX0sZmlsdGVyczp7ZW5hYmxlZDpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5kaXNhYmxlZD09PWZhbHNlJiZlbGVtLnR5cGUhPT1cImhpZGRlblwifSxkaXNhYmxlZDpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5kaXNhYmxlZD09PXRydWV9LGNoZWNrZWQ6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGVsZW0uY2hlY2tlZD09PXRydWV9LHNlbGVjdGVkOmZ1bmN0aW9uKGVsZW0pe2VsZW0ucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O3JldHVybiBlbGVtLnNlbGVjdGVkPT09dHJ1ZX0scGFyZW50OmZ1bmN0aW9uKGVsZW0pe3JldHVybiAhIWVsZW0uZmlyc3RDaGlsZH0sZW1wdHk6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuICFlbGVtLmZpcnN0Q2hpbGR9LGhhczpmdW5jdGlvbihlbGVtLGksbWF0Y2gpe3JldHVybiAhIVNpenpsZShtYXRjaFszXSxlbGVtKS5sZW5ndGh9LGhlYWRlcjpmdW5jdGlvbihlbGVtKXtyZXR1cm4vaFxcZC9pLnRlc3QoZWxlbS5ub2RlTmFtZSl9LHRleHQ6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuXCJ0ZXh0XCI9PT1lbGVtLnR5cGV9LHJhZGlvOmZ1bmN0aW9uKGVsZW0pe3JldHVyblwicmFkaW9cIj09PWVsZW0udHlwZX0sY2hlY2tib3g6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuXCJjaGVja2JveFwiPT09ZWxlbS50eXBlfSxmaWxlOmZ1bmN0aW9uKGVsZW0pe3JldHVyblwiZmlsZVwiPT09ZWxlbS50eXBlfSxwYXNzd29yZDpmdW5jdGlvbihlbGVtKXtyZXR1cm5cInBhc3N3b3JkXCI9PT1lbGVtLnR5cGV9LHN1Ym1pdDpmdW5jdGlvbihlbGVtKXtyZXR1cm5cInN1Ym1pdFwiPT09ZWxlbS50eXBlfSxpbWFnZTpmdW5jdGlvbihlbGVtKXtyZXR1cm5cImltYWdlXCI9PT1lbGVtLnR5cGV9LHJlc2V0OmZ1bmN0aW9uKGVsZW0pe3JldHVyblwicmVzZXRcIj09PWVsZW0udHlwZX0sYnV0dG9uOmZ1bmN0aW9uKGVsZW0pe3JldHVyblwiYnV0dG9uXCI9PT1lbGVtLnR5cGV8fGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PVwiYnV0dG9uXCJ9LGlucHV0OmZ1bmN0aW9uKGVsZW0pe3JldHVybi9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uL2kudGVzdChlbGVtLm5vZGVOYW1lKX19LHNldEZpbHRlcnM6e2ZpcnN0OmZ1bmN0aW9uKGVsZW0saSl7cmV0dXJuIGk9PT0wfSxsYXN0OmZ1bmN0aW9uKGVsZW0saSxtYXRjaCxhcnJheSl7cmV0dXJuIGk9PT1hcnJheS5sZW5ndGgtMX0sZXZlbjpmdW5jdGlvbihlbGVtLGkpe3JldHVybiBpJTI9PT0wfSxvZGQ6ZnVuY3Rpb24oZWxlbSxpKXtyZXR1cm4gaSUyPT09MX0sbHQ6ZnVuY3Rpb24oZWxlbSxpLG1hdGNoKXtyZXR1cm4gaTxtYXRjaFszXS0wfSxndDpmdW5jdGlvbihlbGVtLGksbWF0Y2gpe3JldHVybiBpPm1hdGNoWzNdLTB9LG50aDpmdW5jdGlvbihlbGVtLGksbWF0Y2gpe3JldHVybiBtYXRjaFszXS0wPT09aX0sZXE6ZnVuY3Rpb24oZWxlbSxpLG1hdGNoKXtyZXR1cm4gbWF0Y2hbM10tMD09PWl9fSxmaWx0ZXI6e1BTRVVETzpmdW5jdGlvbihlbGVtLG1hdGNoLGksYXJyYXkpe3ZhciBuYW1lPW1hdGNoWzFdLGZpbHRlcj1FeHByLmZpbHRlcnNbbmFtZV07aWYoZmlsdGVyKXtyZXR1cm4gZmlsdGVyKGVsZW0saSxtYXRjaCxhcnJheSl9ZWxzZXtpZihuYW1lPT09XCJjb250YWluc1wiKXtyZXR1cm4oZWxlbS50ZXh0Q29udGVudHx8ZWxlbS5pbm5lclRleHR8fGdldFRleHQoW2VsZW1dKXx8XCJcIikuaW5kZXhPZihtYXRjaFszXSk+PTB9ZWxzZXtpZihuYW1lPT09XCJub3RcIil7dmFyIG5vdD1tYXRjaFszXTtmb3IodmFyIGk9MCxsPW5vdC5sZW5ndGg7aTxsO2krKyl7aWYobm90W2ldPT09ZWxlbSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX1lbHNle3Rocm93XCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIituYW1lfX19fSxDSElMRDpmdW5jdGlvbihlbGVtLG1hdGNoKXt2YXIgdHlwZT1tYXRjaFsxXSxub2RlPWVsZW07c3dpdGNoKHR5cGUpe2Nhc2VcIm9ubHlcIjpjYXNlXCJmaXJzdFwiOndoaWxlKChub2RlPW5vZGUucHJldmlvdXNTaWJsaW5nKSl7aWYobm9kZS5ub2RlVHlwZT09PTEpe3JldHVybiBmYWxzZX19aWYodHlwZT09PVwiZmlyc3RcIil7cmV0dXJuIHRydWV9bm9kZT1lbGVtO2Nhc2VcImxhc3RcIjp3aGlsZSgobm9kZT1ub2RlLm5leHRTaWJsaW5nKSl7aWYobm9kZS5ub2RlVHlwZT09PTEpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWU7Y2FzZVwibnRoXCI6dmFyIGZpcnN0PW1hdGNoWzJdLGxhc3Q9bWF0Y2hbM107aWYoZmlyc3Q9PT0xJiZsYXN0PT09MCl7cmV0dXJuIHRydWV9dmFyIGRvbmVOYW1lPW1hdGNoWzBdLHBhcmVudD1lbGVtLnBhcmVudE5vZGU7aWYocGFyZW50JiYocGFyZW50LnNpemNhY2hlIT09ZG9uZU5hbWV8fCFlbGVtLm5vZGVJbmRleCkpe3ZhciBjb3VudD0wO2Zvcihub2RlPXBhcmVudC5maXJzdENoaWxkO25vZGU7bm9kZT1ub2RlLm5leHRTaWJsaW5nKXtpZihub2RlLm5vZGVUeXBlPT09MSl7bm9kZS5ub2RlSW5kZXg9Kytjb3VudH19cGFyZW50LnNpemNhY2hlPWRvbmVOYW1lfXZhciBkaWZmPWVsZW0ubm9kZUluZGV4LWxhc3Q7aWYoZmlyc3Q9PT0wKXtyZXR1cm4gZGlmZj09PTB9ZWxzZXtyZXR1cm4oZGlmZiVmaXJzdD09PTAmJmRpZmYvZmlyc3Q+PTApfX19LElEOmZ1bmN0aW9uKGVsZW0sbWF0Y2gpe3JldHVybiBlbGVtLm5vZGVUeXBlPT09MSYmZWxlbS5nZXRBdHRyaWJ1dGUoXCJpZFwiKT09PW1hdGNofSxUQUc6ZnVuY3Rpb24oZWxlbSxtYXRjaCl7cmV0dXJuKG1hdGNoPT09XCIqXCImJmVsZW0ubm9kZVR5cGU9PT0xKXx8ZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09bWF0Y2h9LENMQVNTOmZ1bmN0aW9uKGVsZW0sbWF0Y2gpe3JldHVybihcIiBcIisoZWxlbS5jbGFzc05hbWV8fGVsZW0uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikpK1wiIFwiKS5pbmRleE9mKG1hdGNoKT4tMX0sQVRUUjpmdW5jdGlvbihlbGVtLG1hdGNoKXt2YXIgbmFtZT1tYXRjaFsxXSxyZXN1bHQ9RXhwci5hdHRySGFuZGxlW25hbWVdP0V4cHIuYXR0ckhhbmRsZVtuYW1lXShlbGVtKTplbGVtW25hbWVdIT1udWxsP2VsZW1bbmFtZV06ZWxlbS5nZXRBdHRyaWJ1dGUobmFtZSksdmFsdWU9cmVzdWx0K1wiXCIsdHlwZT1tYXRjaFsyXSxjaGVjaz1tYXRjaFs0XTtyZXR1cm4gcmVzdWx0PT1udWxsP3R5cGU9PT1cIiE9XCI6dHlwZT09PVwiPVwiP3ZhbHVlPT09Y2hlY2s6dHlwZT09PVwiKj1cIj92YWx1ZS5pbmRleE9mKGNoZWNrKT49MDp0eXBlPT09XCJ+PVwiPyhcIiBcIit2YWx1ZStcIiBcIikuaW5kZXhPZihjaGVjayk+PTA6IWNoZWNrP3ZhbHVlJiZyZXN1bHQhPT1mYWxzZTp0eXBlPT09XCIhPVwiP3ZhbHVlIT09Y2hlY2s6dHlwZT09PVwiXj1cIj92YWx1ZS5pbmRleE9mKGNoZWNrKT09PTA6dHlwZT09PVwiJD1cIj92YWx1ZS5zdWJzdHIodmFsdWUubGVuZ3RoLWNoZWNrLmxlbmd0aCk9PT1jaGVjazp0eXBlPT09XCJ8PVwiP3ZhbHVlPT09Y2hlY2t8fHZhbHVlLnN1YnN0cigwLGNoZWNrLmxlbmd0aCsxKT09PWNoZWNrK1wiLVwiOmZhbHNlfSxQT1M6ZnVuY3Rpb24oZWxlbSxtYXRjaCxpLGFycmF5KXt2YXIgbmFtZT1tYXRjaFsyXSxmaWx0ZXI9RXhwci5zZXRGaWx0ZXJzW25hbWVdO2lmKGZpbHRlcil7cmV0dXJuIGZpbHRlcihlbGVtLGksbWF0Y2gsYXJyYXkpfX19fTt2YXIgb3JpZ1BPUz1FeHByLm1hdGNoLlBPUztmb3IodmFyIHR5cGUgaW4gRXhwci5tYXRjaCl7RXhwci5tYXRjaFt0eXBlXT1uZXcgUmVnRXhwKEV4cHIubWF0Y2hbdHlwZV0uc291cmNlKy8oPyFbXlxcW10qXFxdKSg/IVteXFwoXSpcXCkpLy5zb3VyY2UpO0V4cHIubGVmdE1hdGNoW3R5cGVdPW5ldyBSZWdFeHAoLyheKD86LnxcXHJ8XFxuKSo/KS8uc291cmNlK0V4cHIubWF0Y2hbdHlwZV0uc291cmNlKX12YXIgbWFrZUFycmF5PWZ1bmN0aW9uKGFycmF5LHJlc3VsdHMpe2FycmF5PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycmF5LDApO2lmKHJlc3VsdHMpe3Jlc3VsdHMucHVzaC5hcHBseShyZXN1bHRzLGFycmF5KTtyZXR1cm4gcmVzdWx0c31yZXR1cm4gYXJyYXl9O3RyeXtBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2hpbGROb2RlcywwKX1jYXRjaChlKXttYWtlQXJyYXk9ZnVuY3Rpb24oYXJyYXkscmVzdWx0cyl7dmFyIHJldD1yZXN1bHRzfHxbXTtpZih0b1N0cmluZy5jYWxsKGFycmF5KT09PVwiW29iamVjdCBBcnJheV1cIil7QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocmV0LGFycmF5KX1lbHNle2lmKHR5cGVvZiBhcnJheS5sZW5ndGg9PT1cIm51bWJlclwiKXtmb3IodmFyIGk9MCxsPWFycmF5Lmxlbmd0aDtpPGw7aSsrKXtyZXQucHVzaChhcnJheVtpXSl9fWVsc2V7Zm9yKHZhciBpPTA7YXJyYXlbaV07aSsrKXtyZXQucHVzaChhcnJheVtpXSl9fX1yZXR1cm4gcmV0fX12YXIgc29ydE9yZGVyO2lmKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbil7c29ydE9yZGVyPWZ1bmN0aW9uKGEsYil7aWYoIWEuY29tcGFyZURvY3VtZW50UG9zaXRpb258fCFiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKXtpZihhPT1iKXtoYXNEdXBsaWNhdGU9dHJ1ZX1yZXR1cm4gYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj8tMToxfXZhciByZXQ9YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKSY0Py0xOmE9PT1iPzA6MTtpZihyZXQ9PT0wKXtoYXNEdXBsaWNhdGU9dHJ1ZX1yZXR1cm4gcmV0fX1lbHNle2lmKFwic291cmNlSW5kZXhcIiBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpe3NvcnRPcmRlcj1mdW5jdGlvbihhLGIpe2lmKCFhLnNvdXJjZUluZGV4fHwhYi5zb3VyY2VJbmRleCl7aWYoYT09Yil7aGFzRHVwbGljYXRlPXRydWV9cmV0dXJuIGEuc291cmNlSW5kZXg/LTE6MX12YXIgcmV0PWEuc291cmNlSW5kZXgtYi5zb3VyY2VJbmRleDtpZihyZXQ9PT0wKXtoYXNEdXBsaWNhdGU9dHJ1ZX1yZXR1cm4gcmV0fX1lbHNle2lmKGRvY3VtZW50LmNyZWF0ZVJhbmdlKXtzb3J0T3JkZXI9ZnVuY3Rpb24oYSxiKXtpZighYS5vd25lckRvY3VtZW50fHwhYi5vd25lckRvY3VtZW50KXtpZihhPT1iKXtoYXNEdXBsaWNhdGU9dHJ1ZX1yZXR1cm4gYS5vd25lckRvY3VtZW50Py0xOjF9dmFyIGFSYW5nZT1hLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSxiUmFuZ2U9Yi5vd25lckRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7YVJhbmdlLnNldFN0YXJ0KGEsMCk7YVJhbmdlLnNldEVuZChhLDApO2JSYW5nZS5zZXRTdGFydChiLDApO2JSYW5nZS5zZXRFbmQoYiwwKTt2YXIgcmV0PWFSYW5nZS5jb21wYXJlQm91bmRhcnlQb2ludHMoUmFuZ2UuU1RBUlRfVE9fRU5ELGJSYW5nZSk7aWYocmV0PT09MCl7aGFzRHVwbGljYXRlPXRydWV9cmV0dXJuIHJldH19fX1mdW5jdGlvbiBnZXRUZXh0KGVsZW1zKXt2YXIgcmV0PVwiXCIsZWxlbTtmb3IodmFyIGk9MDtlbGVtc1tpXTtpKyspe2VsZW09ZWxlbXNbaV07aWYoZWxlbS5ub2RlVHlwZT09PTN8fGVsZW0ubm9kZVR5cGU9PT00KXtyZXQrPWVsZW0ubm9kZVZhbHVlfWVsc2V7aWYoZWxlbS5ub2RlVHlwZSE9PTgpe3JldCs9Z2V0VGV4dChlbGVtLmNoaWxkTm9kZXMpfX19cmV0dXJuIHJldH0oZnVuY3Rpb24oKXt2YXIgZm9ybT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGlkPVwic2NyaXB0XCIrKG5ldyBEYXRlKS5nZXRUaW1lKCk7Zm9ybS5pbm5lckhUTUw9XCI8YSBuYW1lPSdcIitpZCtcIicvPlwiO3ZhciByb290PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtyb290Lmluc2VydEJlZm9yZShmb3JtLHJvb3QuZmlyc3RDaGlsZCk7aWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpKXtFeHByLmZpbmQuSUQ9ZnVuY3Rpb24obWF0Y2gsY29udGV4dCxpc1hNTCl7aWYodHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQhPT1cInVuZGVmaW5lZFwiJiYhaXNYTUwpe3ZhciBtPWNvbnRleHQuZ2V0RWxlbWVudEJ5SWQobWF0Y2hbMV0pO3JldHVybiBtP20uaWQ9PT1tYXRjaFsxXXx8dHlwZW9mIG0uZ2V0QXR0cmlidXRlTm9kZSE9PVwidW5kZWZpbmVkXCImJm0uZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpLm5vZGVWYWx1ZT09PW1hdGNoWzFdP1ttXTp1bmRlZmluZWQ6W119fTtFeHByLmZpbHRlci5JRD1mdW5jdGlvbihlbGVtLG1hdGNoKXt2YXIgbm9kZT10eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGVOb2RlIT09XCJ1bmRlZmluZWRcIiYmZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7cmV0dXJuIGVsZW0ubm9kZVR5cGU9PT0xJiZub2RlJiZub2RlLm5vZGVWYWx1ZT09PW1hdGNofX1yb290LnJlbW92ZUNoaWxkKGZvcm0pO3Jvb3Q9Zm9ybT1udWxsfSkoKTsoZnVuY3Rpb24oKXt2YXIgZGl2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZGl2LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoXCJcIikpO2lmKGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RoPjApe0V4cHIuZmluZC5UQUc9ZnVuY3Rpb24obWF0Y2gsY29udGV4dCl7dmFyIHJlc3VsdHM9Y29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZShtYXRjaFsxXSk7aWYobWF0Y2hbMV09PT1cIipcIil7dmFyIHRtcD1bXTtmb3IodmFyIGk9MDtyZXN1bHRzW2ldO2krKyl7aWYocmVzdWx0c1tpXS5ub2RlVHlwZT09PTEpe3RtcC5wdXNoKHJlc3VsdHNbaV0pfX1yZXN1bHRzPXRtcH1yZXR1cm4gcmVzdWx0c319ZGl2LmlubmVySFRNTD1cIjxhIGhyZWY9JyMnPjwvYT5cIjtpZihkaXYuZmlyc3RDaGlsZCYmdHlwZW9mIGRpdi5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSE9PVwidW5kZWZpbmVkXCImJmRpdi5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcImhyZWZcIikhPT1cIiNcIil7RXhwci5hdHRySGFuZGxlLmhyZWY9ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKFwiaHJlZlwiLDIpfX1kaXY9bnVsbH0pKCk7aWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCl7KGZ1bmN0aW9uKCl7dmFyIG9sZFNpenpsZT1TaXp6bGUsZGl2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZGl2LmlubmVySFRNTD1cIjxwIGNsYXNzPSdURVNUJz48L3A+XCI7aWYoZGl2LnF1ZXJ5U2VsZWN0b3JBbGwmJmRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiLlRFU1RcIikubGVuZ3RoPT09MCl7cmV0dXJufVNpenpsZT1mdW5jdGlvbihxdWVyeSxjb250ZXh0LGV4dHJhLHNlZWQpe2NvbnRleHQ9Y29udGV4dHx8ZG9jdW1lbnQ7aWYoIXNlZWQmJmNvbnRleHQubm9kZVR5cGU9PT05JiYhaXNYTUwoY29udGV4dCkpe3RyeXtyZXR1cm4gbWFrZUFycmF5KGNvbnRleHQucXVlcnlTZWxlY3RvckFsbChxdWVyeSksZXh0cmEpfWNhdGNoKGUpe319cmV0dXJuIG9sZFNpenpsZShxdWVyeSxjb250ZXh0LGV4dHJhLHNlZWQpfTtmb3IodmFyIHByb3AgaW4gb2xkU2l6emxlKXtTaXp6bGVbcHJvcF09b2xkU2l6emxlW3Byb3BdfWRpdj1udWxsfSkoKX0oZnVuY3Rpb24oKXt2YXIgZGl2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZGl2LmlubmVySFRNTD1cIjxkaXYgY2xhc3M9J3Rlc3QgZSc+PC9kaXY+PGRpdiBjbGFzcz0ndGVzdCc+PC9kaXY+XCI7aWYoIWRpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lfHxkaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImVcIikubGVuZ3RoPT09MCl7cmV0dXJufWRpdi5sYXN0Q2hpbGQuY2xhc3NOYW1lPVwiZVwiO2lmKGRpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZVwiKS5sZW5ndGg9PT0xKXtyZXR1cm59RXhwci5vcmRlci5zcGxpY2UoMSwwLFwiQ0xBU1NcIik7RXhwci5maW5kLkNMQVNTPWZ1bmN0aW9uKG1hdGNoLGNvbnRleHQsaXNYTUwpe2lmKHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT1cInVuZGVmaW5lZFwiJiYhaXNYTUwpe3JldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUobWF0Y2hbMV0pfX07ZGl2PW51bGx9KSgpO2Z1bmN0aW9uIGRpck5vZGVDaGVjayhkaXIsY3VyLGRvbmVOYW1lLGNoZWNrU2V0LG5vZGVDaGVjayxpc1hNTCl7Zm9yKHZhciBpPTAsbD1jaGVja1NldC5sZW5ndGg7aTxsO2krKyl7dmFyIGVsZW09Y2hlY2tTZXRbaV07aWYoZWxlbSl7ZWxlbT1lbGVtW2Rpcl07dmFyIG1hdGNoPWZhbHNlO3doaWxlKGVsZW0pe2lmKGVsZW0uc2l6Y2FjaGU9PT1kb25lTmFtZSl7bWF0Y2g9Y2hlY2tTZXRbZWxlbS5zaXpzZXRdO2JyZWFrfWlmKGVsZW0ubm9kZVR5cGU9PT0xJiYhaXNYTUwpe2VsZW0uc2l6Y2FjaGU9ZG9uZU5hbWU7ZWxlbS5zaXpzZXQ9aX1pZihlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1jdXIpe21hdGNoPWVsZW07YnJlYWt9ZWxlbT1lbGVtW2Rpcl19Y2hlY2tTZXRbaV09bWF0Y2h9fX1mdW5jdGlvbiBkaXJDaGVjayhkaXIsY3VyLGRvbmVOYW1lLGNoZWNrU2V0LG5vZGVDaGVjayxpc1hNTCl7Zm9yKHZhciBpPTAsbD1jaGVja1NldC5sZW5ndGg7aTxsO2krKyl7dmFyIGVsZW09Y2hlY2tTZXRbaV07aWYoZWxlbSl7ZWxlbT1lbGVtW2Rpcl07dmFyIG1hdGNoPWZhbHNlO3doaWxlKGVsZW0pe2lmKGVsZW0uc2l6Y2FjaGU9PT1kb25lTmFtZSl7bWF0Y2g9Y2hlY2tTZXRbZWxlbS5zaXpzZXRdO2JyZWFrfWlmKGVsZW0ubm9kZVR5cGU9PT0xKXtpZighaXNYTUwpe2VsZW0uc2l6Y2FjaGU9ZG9uZU5hbWU7ZWxlbS5zaXpzZXQ9aX1pZih0eXBlb2YgY3VyIT09XCJzdHJpbmdcIil7aWYoZWxlbT09PWN1cil7bWF0Y2g9dHJ1ZTticmVha319ZWxzZXtpZihTaXp6bGUuZmlsdGVyKGN1cixbZWxlbV0pLmxlbmd0aD4wKXttYXRjaD1lbGVtO2JyZWFrfX19ZWxlbT1lbGVtW2Rpcl19Y2hlY2tTZXRbaV09bWF0Y2h9fX12YXIgY29udGFpbnM9ZG9jdW1lbnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKSYxNn06ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSE9PWImJihhLmNvbnRhaW5zP2EuY29udGFpbnMoYik6dHJ1ZSl9O3ZhciBpc1hNTD1mdW5jdGlvbihlbGVtKXt2YXIgZG9jdW1lbnRFbGVtZW50PShlbGVtP2VsZW0ub3duZXJEb2N1bWVudHx8ZWxlbTowKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIGRvY3VtZW50RWxlbWVudD9kb2N1bWVudEVsZW1lbnQubm9kZU5hbWUhPT1cIkhUTUxcIjpmYWxzZX07dmFyIHBvc1Byb2Nlc3M9ZnVuY3Rpb24oc2VsZWN0b3IsY29udGV4dCl7dmFyIHRtcFNldD1bXSxsYXRlcj1cIlwiLG1hdGNoLHJvb3Q9Y29udGV4dC5ub2RlVHlwZT9bY29udGV4dF06Y29udGV4dDt3aGlsZSgobWF0Y2g9RXhwci5tYXRjaC5QU0VVRE8uZXhlYyhzZWxlY3RvcikpKXtsYXRlcis9bWF0Y2hbMF07c2VsZWN0b3I9c2VsZWN0b3IucmVwbGFjZShFeHByLm1hdGNoLlBTRVVETyxcIlwiKX1zZWxlY3Rvcj1FeHByLnJlbGF0aXZlW3NlbGVjdG9yXT9zZWxlY3RvcitcIipcIjpzZWxlY3Rvcjtmb3IodmFyIGk9MCxsPXJvb3QubGVuZ3RoO2k8bDtpKyspe1NpenpsZShzZWxlY3Rvcixyb290W2ldLHRtcFNldCl9cmV0dXJuIFNpenpsZS5maWx0ZXIobGF0ZXIsdG1wU2V0KX07cmV0dXJuIFNpenpsZX0pKCk7XG4vKlxuICogU1dGT2JqZWN0IHYyLjEgPGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9zd2ZvYmplY3QvPlxuICogQ29weXJpZ2h0IChjKSAyMDA3LTIwMDggR2VvZmYgU3RlYXJucywgTWljaGFlbCBXaWxsaWFtcywgYW5kIEJvYmJ5IHZhbiBkZXIgU2x1aXNcbiAqIFRoaXMgc29mdHdhcmUgaXMgcmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIDxodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocD5cbiAqXG4gKiBNb2RpZmllZCBmb3IgaW5jbHVzaW9uIGluIFNoYWRvd2JveC5qc1xuICovXG5TLmZsYXNoPShmdW5jdGlvbigpe3ZhciBzd2ZvYmplY3Q9ZnVuY3Rpb24oKXt2YXIgVU5ERUY9XCJ1bmRlZmluZWRcIixPQkpFQ1Q9XCJvYmplY3RcIixTSE9DS1dBVkVfRkxBU0g9XCJTaG9ja3dhdmUgRmxhc2hcIixTSE9DS1dBVkVfRkxBU0hfQVg9XCJTaG9ja3dhdmVGbGFzaC5TaG9ja3dhdmVGbGFzaFwiLEZMQVNIX01JTUVfVFlQRT1cImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoXCIsRVhQUkVTU19JTlNUQUxMX0lEPVwiU1dGT2JqZWN0RXhwckluc3RcIix3aW49d2luZG93LGRvYz1kb2N1bWVudCxuYXY9bmF2aWdhdG9yLGRvbUxvYWRGbkFycj1bXSxyZWdPYmpBcnI9W10sb2JqSWRBcnI9W10sbGlzdGVuZXJzQXJyPVtdLHNjcmlwdCx0aW1lcj1udWxsLHN0b3JlZEFsdENvbnRlbnQ9bnVsbCxzdG9yZWRBbHRDb250ZW50SWQ9bnVsbCxpc0RvbUxvYWRlZD1mYWxzZSxpc0V4cHJlc3NJbnN0YWxsQWN0aXZlPWZhbHNlO3ZhciB1YT1mdW5jdGlvbigpe3ZhciB3M2Nkb209dHlwZW9mIGRvYy5nZXRFbGVtZW50QnlJZCE9VU5ERUYmJnR5cGVvZiBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPVVOREVGJiZ0eXBlb2YgZG9jLmNyZWF0ZUVsZW1lbnQhPVVOREVGLHBsYXllclZlcnNpb249WzAsMCwwXSxkPW51bGw7aWYodHlwZW9mIG5hdi5wbHVnaW5zIT1VTkRFRiYmdHlwZW9mIG5hdi5wbHVnaW5zW1NIT0NLV0FWRV9GTEFTSF09PU9CSkVDVCl7ZD1uYXYucGx1Z2luc1tTSE9DS1dBVkVfRkxBU0hdLmRlc2NyaXB0aW9uO2lmKGQmJiEodHlwZW9mIG5hdi5taW1lVHlwZXMhPVVOREVGJiZuYXYubWltZVR5cGVzW0ZMQVNIX01JTUVfVFlQRV0mJiFuYXYubWltZVR5cGVzW0ZMQVNIX01JTUVfVFlQRV0uZW5hYmxlZFBsdWdpbikpe2Q9ZC5yZXBsYWNlKC9eLipcXHMrKFxcUytcXHMrXFxTKyQpLyxcIiQxXCIpO3BsYXllclZlcnNpb25bMF09cGFyc2VJbnQoZC5yZXBsYWNlKC9eKC4qKVxcLi4qJC8sXCIkMVwiKSwxMCk7cGxheWVyVmVyc2lvblsxXT1wYXJzZUludChkLnJlcGxhY2UoL14uKlxcLiguKilcXHMuKiQvLFwiJDFcIiksMTApO3BsYXllclZlcnNpb25bMl09L3IvLnRlc3QoZCk/cGFyc2VJbnQoZC5yZXBsYWNlKC9eLipyKC4qKSQvLFwiJDFcIiksMTApOjB9fWVsc2V7aWYodHlwZW9mIHdpbi5BY3RpdmVYT2JqZWN0IT1VTkRFRil7dmFyIGE9bnVsbCxmcDZDcmFzaD1mYWxzZTt0cnl7YT1uZXcgQWN0aXZlWE9iamVjdChTSE9DS1dBVkVfRkxBU0hfQVgrXCIuN1wiKX1jYXRjaChlKXt0cnl7YT1uZXcgQWN0aXZlWE9iamVjdChTSE9DS1dBVkVfRkxBU0hfQVgrXCIuNlwiKTtwbGF5ZXJWZXJzaW9uPVs2LDAsMjFdO2EuQWxsb3dTY3JpcHRBY2Nlc3M9XCJhbHdheXNcIn1jYXRjaChlKXtpZihwbGF5ZXJWZXJzaW9uWzBdPT02KXtmcDZDcmFzaD10cnVlfX1pZighZnA2Q3Jhc2gpe3RyeXthPW5ldyBBY3RpdmVYT2JqZWN0KFNIT0NLV0FWRV9GTEFTSF9BWCl9Y2F0Y2goZSl7fX19aWYoIWZwNkNyYXNoJiZhKXt0cnl7ZD1hLkdldFZhcmlhYmxlKFwiJHZlcnNpb25cIik7aWYoZCl7ZD1kLnNwbGl0KFwiIFwiKVsxXS5zcGxpdChcIixcIik7cGxheWVyVmVyc2lvbj1bcGFyc2VJbnQoZFswXSwxMCkscGFyc2VJbnQoZFsxXSwxMCkscGFyc2VJbnQoZFsyXSwxMCldfX1jYXRjaChlKXt9fX19dmFyIHU9bmF2LnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLHA9bmF2LnBsYXRmb3JtLnRvTG93ZXJDYXNlKCksd2Via2l0PS93ZWJraXQvLnRlc3QodSk/cGFyc2VGbG9hdCh1LnJlcGxhY2UoL14uKndlYmtpdFxcLyhcXGQrKFxcLlxcZCspPykuKiQvLFwiJDFcIikpOmZhbHNlLGllPWZhbHNlLHdpbmRvd3M9cD8vd2luLy50ZXN0KHApOi93aW4vLnRlc3QodSksbWFjPXA/L21hYy8udGVzdChwKTovbWFjLy50ZXN0KHUpO1xuLypAY2Nfb25cblx0XHRcdGllID0gdHJ1ZTtcblx0XHRcdEBpZiAoQF93aW4zMilcblx0XHRcdFx0d2luZG93cyA9IHRydWU7XG5cdFx0XHRAZWxpZiAoQF9tYWMpXG5cdFx0XHRcdG1hYyA9IHRydWU7XG5cdFx0XHRAZW5kXG5cdFx0QCovXG5yZXR1cm57dzNjZG9tOnczY2RvbSxwdjpwbGF5ZXJWZXJzaW9uLHdlYmtpdDp3ZWJraXQsaWU6aWUsd2luOndpbmRvd3MsbWFjOm1hY319KCk7dmFyIG9uRG9tTG9hZD1mdW5jdGlvbigpe2lmKCF1YS53M2Nkb20pe3JldHVybn1hZGREb21Mb2FkRXZlbnQobWFpbik7aWYodWEuaWUmJnVhLndpbil7dHJ5e2RvYy53cml0ZShcIjxzY3JpcHQgaWQ9X19pZV9vbmRvbWxvYWQgZGVmZXI9dHJ1ZSBzcmM9Ly86PjxcXC9zY3JpcHQ+XCIpO3NjcmlwdD1nZXRFbGVtZW50QnlJZChcIl9faWVfb25kb21sb2FkXCIpO2lmKHNjcmlwdCl7YWRkTGlzdGVuZXIoc2NyaXB0LFwib25yZWFkeXN0YXRlY2hhbmdlXCIsY2hlY2tSZWFkeVN0YXRlKX19Y2F0Y2goZSl7fX1pZih1YS53ZWJraXQmJnR5cGVvZiBkb2MucmVhZHlTdGF0ZSE9VU5ERUYpe3RpbWVyPXNldEludGVydmFsKGZ1bmN0aW9uKCl7aWYoL2xvYWRlZHxjb21wbGV0ZS8udGVzdChkb2MucmVhZHlTdGF0ZSkpe2NhbGxEb21Mb2FkRnVuY3Rpb25zKCl9fSwxMCl9aWYodHlwZW9mIGRvYy5hZGRFdmVudExpc3RlbmVyIT1VTkRFRil7ZG9jLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsY2FsbERvbUxvYWRGdW5jdGlvbnMsbnVsbCl9YWRkTG9hZEV2ZW50KGNhbGxEb21Mb2FkRnVuY3Rpb25zKX0oKTtmdW5jdGlvbiBjaGVja1JlYWR5U3RhdGUoKXtpZihzY3JpcHQucmVhZHlTdGF0ZT09XCJjb21wbGV0ZVwiKXtzY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO2NhbGxEb21Mb2FkRnVuY3Rpb25zKCl9fWZ1bmN0aW9uIGNhbGxEb21Mb2FkRnVuY3Rpb25zKCl7aWYoaXNEb21Mb2FkZWQpe3JldHVybn1pZih1YS5pZSYmdWEud2luKXt2YXIgcz1jcmVhdGVFbGVtZW50KFwic3BhblwiKTt0cnl7dmFyIHQ9ZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXS5hcHBlbmRDaGlsZChzKTt0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCl9Y2F0Y2goZSl7cmV0dXJufX1pc0RvbUxvYWRlZD10cnVlO2lmKHRpbWVyKXtjbGVhckludGVydmFsKHRpbWVyKTt0aW1lcj1udWxsfXZhciBkbD1kb21Mb2FkRm5BcnIubGVuZ3RoO2Zvcih2YXIgaT0wO2k8ZGw7aSsrKXtkb21Mb2FkRm5BcnJbaV0oKX19ZnVuY3Rpb24gYWRkRG9tTG9hZEV2ZW50KGZuKXtpZihpc0RvbUxvYWRlZCl7Zm4oKX1lbHNle2RvbUxvYWRGbkFycltkb21Mb2FkRm5BcnIubGVuZ3RoXT1mbn19ZnVuY3Rpb24gYWRkTG9hZEV2ZW50KGZuKXtpZih0eXBlb2Ygd2luLmFkZEV2ZW50TGlzdGVuZXIhPVVOREVGKXt3aW4uYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixmbixmYWxzZSl9ZWxzZXtpZih0eXBlb2YgZG9jLmFkZEV2ZW50TGlzdGVuZXIhPVVOREVGKXtkb2MuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixmbixmYWxzZSl9ZWxzZXtpZih0eXBlb2Ygd2luLmF0dGFjaEV2ZW50IT1VTkRFRil7YWRkTGlzdGVuZXIod2luLFwib25sb2FkXCIsZm4pfWVsc2V7aWYodHlwZW9mIHdpbi5vbmxvYWQ9PVwiZnVuY3Rpb25cIil7dmFyIGZuT2xkPXdpbi5vbmxvYWQ7d2luLm9ubG9hZD1mdW5jdGlvbigpe2ZuT2xkKCk7Zm4oKX19ZWxzZXt3aW4ub25sb2FkPWZufX19fX1mdW5jdGlvbiBtYWluKCl7dmFyIHJsPXJlZ09iakFyci5sZW5ndGg7Zm9yKHZhciBpPTA7aTxybDtpKyspe3ZhciBpZD1yZWdPYmpBcnJbaV0uaWQ7aWYodWEucHZbMF0+MCl7dmFyIG9iaj1nZXRFbGVtZW50QnlJZChpZCk7aWYob2JqKXtyZWdPYmpBcnJbaV0ud2lkdGg9b2JqLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpP29iai5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKTpcIjBcIjtyZWdPYmpBcnJbaV0uaGVpZ2h0PW9iai5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIik/b2JqLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKTpcIjBcIjtpZihoYXNQbGF5ZXJWZXJzaW9uKHJlZ09iakFycltpXS5zd2ZWZXJzaW9uKSl7aWYodWEud2Via2l0JiZ1YS53ZWJraXQ8MzEyKXtmaXhQYXJhbXMob2JqKX1zZXRWaXNpYmlsaXR5KGlkLHRydWUpfWVsc2V7aWYocmVnT2JqQXJyW2ldLmV4cHJlc3NJbnN0YWxsJiYhaXNFeHByZXNzSW5zdGFsbEFjdGl2ZSYmaGFzUGxheWVyVmVyc2lvbihcIjYuMC42NVwiKSYmKHVhLndpbnx8dWEubWFjKSl7c2hvd0V4cHJlc3NJbnN0YWxsKHJlZ09iakFycltpXSl9ZWxzZXtkaXNwbGF5QWx0Q29udGVudChvYmopfX19fWVsc2V7c2V0VmlzaWJpbGl0eShpZCx0cnVlKX19fWZ1bmN0aW9uIGZpeFBhcmFtcyhvYmope3ZhciBuZXN0ZWRPYmo9b2JqLmdldEVsZW1lbnRzQnlUYWdOYW1lKE9CSkVDVClbMF07aWYobmVzdGVkT2JqKXt2YXIgZT1jcmVhdGVFbGVtZW50KFwiZW1iZWRcIiksYT1uZXN0ZWRPYmouYXR0cmlidXRlcztpZihhKXt2YXIgYWw9YS5sZW5ndGg7Zm9yKHZhciBpPTA7aTxhbDtpKyspe2lmKGFbaV0ubm9kZU5hbWU9PVwiREFUQVwiKXtlLnNldEF0dHJpYnV0ZShcInNyY1wiLGFbaV0ubm9kZVZhbHVlKX1lbHNle2Uuc2V0QXR0cmlidXRlKGFbaV0ubm9kZU5hbWUsYVtpXS5ub2RlVmFsdWUpfX19dmFyIGM9bmVzdGVkT2JqLmNoaWxkTm9kZXM7aWYoYyl7dmFyIGNsPWMubGVuZ3RoO2Zvcih2YXIgaj0wO2o8Y2w7aisrKXtpZihjW2pdLm5vZGVUeXBlPT0xJiZjW2pdLm5vZGVOYW1lPT1cIlBBUkFNXCIpe2Uuc2V0QXR0cmlidXRlKGNbal0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKSxjW2pdLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpKX19fW9iai5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChlLG9iail9fWZ1bmN0aW9uIHNob3dFeHByZXNzSW5zdGFsbChyZWdPYmope2lzRXhwcmVzc0luc3RhbGxBY3RpdmU9dHJ1ZTt2YXIgb2JqPWdldEVsZW1lbnRCeUlkKHJlZ09iai5pZCk7aWYob2JqKXtpZihyZWdPYmouYWx0Q29udGVudElkKXt2YXIgYWM9Z2V0RWxlbWVudEJ5SWQocmVnT2JqLmFsdENvbnRlbnRJZCk7aWYoYWMpe3N0b3JlZEFsdENvbnRlbnQ9YWM7c3RvcmVkQWx0Q29udGVudElkPXJlZ09iai5hbHRDb250ZW50SWR9fWVsc2V7c3RvcmVkQWx0Q29udGVudD1hYnN0cmFjdEFsdENvbnRlbnQob2JqKX1pZighKC8lJC8udGVzdChyZWdPYmoud2lkdGgpKSYmcGFyc2VJbnQocmVnT2JqLndpZHRoLDEwKTwzMTApe3JlZ09iai53aWR0aD1cIjMxMFwifWlmKCEoLyUkLy50ZXN0KHJlZ09iai5oZWlnaHQpKSYmcGFyc2VJbnQocmVnT2JqLmhlaWdodCwxMCk8MTM3KXtyZWdPYmouaGVpZ2h0PVwiMTM3XCJ9ZG9jLnRpdGxlPWRvYy50aXRsZS5zbGljZSgwLDQ3KStcIiAtIEZsYXNoIFBsYXllciBJbnN0YWxsYXRpb25cIjt2YXIgcHQ9dWEuaWUmJnVhLndpbj9cIkFjdGl2ZVhcIjpcIlBsdWdJblwiLGR0PWRvYy50aXRsZSxmdj1cIk1NcmVkaXJlY3RVUkw9XCIrd2luLmxvY2F0aW9uK1wiJk1NcGxheWVyVHlwZT1cIitwdCtcIiZNTWRvY3RpdGxlPVwiK2R0LHJlcGxhY2VJZD1yZWdPYmouaWQ7aWYodWEuaWUmJnVhLndpbiYmb2JqLnJlYWR5U3RhdGUhPTQpe3ZhciBuZXdPYmo9Y3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXBsYWNlSWQrPVwiU1dGT2JqZWN0TmV3XCI7bmV3T2JqLnNldEF0dHJpYnV0ZShcImlkXCIscmVwbGFjZUlkKTtvYmoucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3T2JqLG9iaik7b2JqLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7dmFyIGZuPWZ1bmN0aW9uKCl7b2JqLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQob2JqKX07YWRkTGlzdGVuZXIod2luLFwib25sb2FkXCIsZm4pfWNyZWF0ZVNXRih7ZGF0YTpyZWdPYmouZXhwcmVzc0luc3RhbGwsaWQ6RVhQUkVTU19JTlNUQUxMX0lELHdpZHRoOnJlZ09iai53aWR0aCxoZWlnaHQ6cmVnT2JqLmhlaWdodH0se2ZsYXNodmFyczpmdn0scmVwbGFjZUlkKX19ZnVuY3Rpb24gZGlzcGxheUFsdENvbnRlbnQob2JqKXtpZih1YS5pZSYmdWEud2luJiZvYmoucmVhZHlTdGF0ZSE9NCl7dmFyIGVsPWNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7b2JqLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLG9iaik7ZWwucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoYWJzdHJhY3RBbHRDb250ZW50KG9iaiksZWwpO29iai5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO3ZhciBmbj1mdW5jdGlvbigpe29iai5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9iail9O2FkZExpc3RlbmVyKHdpbixcIm9ubG9hZFwiLGZuKX1lbHNle29iai5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChhYnN0cmFjdEFsdENvbnRlbnQob2JqKSxvYmopfX1mdW5jdGlvbiBhYnN0cmFjdEFsdENvbnRlbnQob2JqKXt2YXIgYWM9Y3JlYXRlRWxlbWVudChcImRpdlwiKTtpZih1YS53aW4mJnVhLmllKXthYy5pbm5lckhUTUw9b2JqLmlubmVySFRNTH1lbHNle3ZhciBuZXN0ZWRPYmo9b2JqLmdldEVsZW1lbnRzQnlUYWdOYW1lKE9CSkVDVClbMF07aWYobmVzdGVkT2JqKXt2YXIgYz1uZXN0ZWRPYmouY2hpbGROb2RlcztpZihjKXt2YXIgY2w9Yy5sZW5ndGg7Zm9yKHZhciBpPTA7aTxjbDtpKyspe2lmKCEoY1tpXS5ub2RlVHlwZT09MSYmY1tpXS5ub2RlTmFtZT09XCJQQVJBTVwiKSYmIShjW2ldLm5vZGVUeXBlPT04KSl7YWMuYXBwZW5kQ2hpbGQoY1tpXS5jbG9uZU5vZGUodHJ1ZSkpfX19fX1yZXR1cm4gYWN9ZnVuY3Rpb24gY3JlYXRlU1dGKGF0dE9iaixwYXJPYmosaWQpe3ZhciByLGVsPWdldEVsZW1lbnRCeUlkKGlkKTtpZihlbCl7aWYodHlwZW9mIGF0dE9iai5pZD09VU5ERUYpe2F0dE9iai5pZD1pZH1pZih1YS5pZSYmdWEud2luKXt2YXIgYXR0PVwiXCI7Zm9yKHZhciBpIGluIGF0dE9iail7aWYoYXR0T2JqW2ldIT1PYmplY3QucHJvdG90eXBlW2ldKXtpZihpLnRvTG93ZXJDYXNlKCk9PVwiZGF0YVwiKXtwYXJPYmoubW92aWU9YXR0T2JqW2ldfWVsc2V7aWYoaS50b0xvd2VyQ2FzZSgpPT1cInN0eWxlY2xhc3NcIil7YXR0Kz0nIGNsYXNzPVwiJythdHRPYmpbaV0rJ1wiJ31lbHNle2lmKGkudG9Mb3dlckNhc2UoKSE9XCJjbGFzc2lkXCIpe2F0dCs9XCIgXCIraSsnPVwiJythdHRPYmpbaV0rJ1wiJ319fX19dmFyIHBhcj1cIlwiO2Zvcih2YXIgaiBpbiBwYXJPYmope2lmKHBhck9ialtqXSE9T2JqZWN0LnByb3RvdHlwZVtqXSl7cGFyKz0nPHBhcmFtIG5hbWU9XCInK2orJ1wiIHZhbHVlPVwiJytwYXJPYmpbal0rJ1wiIC8+J319ZWwub3V0ZXJIVE1MPSc8b2JqZWN0IGNsYXNzaWQ9XCJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDBcIicrYXR0K1wiPlwiK3BhcitcIjwvb2JqZWN0PlwiO29iaklkQXJyW29iaklkQXJyLmxlbmd0aF09YXR0T2JqLmlkO3I9Z2V0RWxlbWVudEJ5SWQoYXR0T2JqLmlkKX1lbHNle2lmKHVhLndlYmtpdCYmdWEud2Via2l0PDMxMil7dmFyIGU9Y3JlYXRlRWxlbWVudChcImVtYmVkXCIpO2Uuc2V0QXR0cmlidXRlKFwidHlwZVwiLEZMQVNIX01JTUVfVFlQRSk7Zm9yKHZhciBrIGluIGF0dE9iail7aWYoYXR0T2JqW2tdIT1PYmplY3QucHJvdG90eXBlW2tdKXtpZihrLnRvTG93ZXJDYXNlKCk9PVwiZGF0YVwiKXtlLnNldEF0dHJpYnV0ZShcInNyY1wiLGF0dE9ialtrXSl9ZWxzZXtpZihrLnRvTG93ZXJDYXNlKCk9PVwic3R5bGVjbGFzc1wiKXtlLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsYXR0T2JqW2tdKX1lbHNle2lmKGsudG9Mb3dlckNhc2UoKSE9XCJjbGFzc2lkXCIpe2Uuc2V0QXR0cmlidXRlKGssYXR0T2JqW2tdKX19fX19Zm9yKHZhciBsIGluIHBhck9iail7aWYocGFyT2JqW2xdIT1PYmplY3QucHJvdG90eXBlW2xdKXtpZihsLnRvTG93ZXJDYXNlKCkhPVwibW92aWVcIil7ZS5zZXRBdHRyaWJ1dGUobCxwYXJPYmpbbF0pfX19ZWwucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZSxlbCk7cj1lfWVsc2V7dmFyIG89Y3JlYXRlRWxlbWVudChPQkpFQ1QpO28uc2V0QXR0cmlidXRlKFwidHlwZVwiLEZMQVNIX01JTUVfVFlQRSk7Zm9yKHZhciBtIGluIGF0dE9iail7aWYoYXR0T2JqW21dIT1PYmplY3QucHJvdG90eXBlW21dKXtpZihtLnRvTG93ZXJDYXNlKCk9PVwic3R5bGVjbGFzc1wiKXtvLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsYXR0T2JqW21dKX1lbHNle2lmKG0udG9Mb3dlckNhc2UoKSE9XCJjbGFzc2lkXCIpe28uc2V0QXR0cmlidXRlKG0sYXR0T2JqW21dKX19fX1mb3IodmFyIG4gaW4gcGFyT2JqKXtpZihwYXJPYmpbbl0hPU9iamVjdC5wcm90b3R5cGVbbl0mJm4udG9Mb3dlckNhc2UoKSE9XCJtb3ZpZVwiKXtjcmVhdGVPYmpQYXJhbShvLG4scGFyT2JqW25dKX19ZWwucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobyxlbCk7cj1vfX19cmV0dXJuIHJ9ZnVuY3Rpb24gY3JlYXRlT2JqUGFyYW0oZWwscE5hbWUscFZhbHVlKXt2YXIgcD1jcmVhdGVFbGVtZW50KFwicGFyYW1cIik7cC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIscE5hbWUpO3Auc2V0QXR0cmlidXRlKFwidmFsdWVcIixwVmFsdWUpO2VsLmFwcGVuZENoaWxkKHApfWZ1bmN0aW9uIHJlbW92ZVNXRihpZCl7dmFyIG9iaj1nZXRFbGVtZW50QnlJZChpZCk7aWYob2JqJiYob2JqLm5vZGVOYW1lPT1cIk9CSkVDVFwifHxvYmoubm9kZU5hbWU9PVwiRU1CRURcIikpe2lmKHVhLmllJiZ1YS53aW4pe2lmKG9iai5yZWFkeVN0YXRlPT00KXtyZW1vdmVPYmplY3RJbklFKGlkKX1lbHNle3dpbi5hdHRhY2hFdmVudChcIm9ubG9hZFwiLGZ1bmN0aW9uKCl7cmVtb3ZlT2JqZWN0SW5JRShpZCl9KX19ZWxzZXtvYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopfX19ZnVuY3Rpb24gcmVtb3ZlT2JqZWN0SW5JRShpZCl7dmFyIG9iaj1nZXRFbGVtZW50QnlJZChpZCk7aWYob2JqKXtmb3IodmFyIGkgaW4gb2JqKXtpZih0eXBlb2Ygb2JqW2ldPT1cImZ1bmN0aW9uXCIpe29ialtpXT1udWxsfX1vYmoucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvYmopfX1mdW5jdGlvbiBnZXRFbGVtZW50QnlJZChpZCl7dmFyIGVsPW51bGw7dHJ5e2VsPWRvYy5nZXRFbGVtZW50QnlJZChpZCl9Y2F0Y2goZSl7fXJldHVybiBlbH1mdW5jdGlvbiBjcmVhdGVFbGVtZW50KGVsKXtyZXR1cm4gZG9jLmNyZWF0ZUVsZW1lbnQoZWwpfWZ1bmN0aW9uIGFkZExpc3RlbmVyKHRhcmdldCxldmVudFR5cGUsZm4pe3RhcmdldC5hdHRhY2hFdmVudChldmVudFR5cGUsZm4pO2xpc3RlbmVyc0FycltsaXN0ZW5lcnNBcnIubGVuZ3RoXT1bdGFyZ2V0LGV2ZW50VHlwZSxmbl19ZnVuY3Rpb24gaGFzUGxheWVyVmVyc2lvbihydil7dmFyIHB2PXVhLnB2LHY9cnYuc3BsaXQoXCIuXCIpO3ZbMF09cGFyc2VJbnQodlswXSwxMCk7dlsxXT1wYXJzZUludCh2WzFdLDEwKXx8MDt2WzJdPXBhcnNlSW50KHZbMl0sMTApfHwwO3JldHVybihwdlswXT52WzBdfHwocHZbMF09PXZbMF0mJnB2WzFdPnZbMV0pfHwocHZbMF09PXZbMF0mJnB2WzFdPT12WzFdJiZwdlsyXT49dlsyXSkpP3RydWU6ZmFsc2V9ZnVuY3Rpb24gY3JlYXRlQ1NTKHNlbCxkZWNsKXtpZih1YS5pZSYmdWEubWFjKXtyZXR1cm59dmFyIGg9ZG9jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXSxzPWNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtzLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInRleHQvY3NzXCIpO3Muc2V0QXR0cmlidXRlKFwibWVkaWFcIixcInNjcmVlblwiKTtpZighKHVhLmllJiZ1YS53aW4pJiZ0eXBlb2YgZG9jLmNyZWF0ZVRleHROb2RlIT1VTkRFRil7cy5hcHBlbmRDaGlsZChkb2MuY3JlYXRlVGV4dE5vZGUoc2VsK1wiIHtcIitkZWNsK1wifVwiKSl9aC5hcHBlbmRDaGlsZChzKTtpZih1YS5pZSYmdWEud2luJiZ0eXBlb2YgZG9jLnN0eWxlU2hlZXRzIT1VTkRFRiYmZG9jLnN0eWxlU2hlZXRzLmxlbmd0aD4wKXt2YXIgbHM9ZG9jLnN0eWxlU2hlZXRzW2RvYy5zdHlsZVNoZWV0cy5sZW5ndGgtMV07aWYodHlwZW9mIGxzLmFkZFJ1bGU9PU9CSkVDVCl7bHMuYWRkUnVsZShzZWwsZGVjbCl9fX1mdW5jdGlvbiBzZXRWaXNpYmlsaXR5KGlkLGlzVmlzaWJsZSl7dmFyIHY9aXNWaXNpYmxlP1widmlzaWJsZVwiOlwiaGlkZGVuXCI7aWYoaXNEb21Mb2FkZWQmJmdldEVsZW1lbnRCeUlkKGlkKSl7Z2V0RWxlbWVudEJ5SWQoaWQpLnN0eWxlLnZpc2liaWxpdHk9dn1lbHNle2NyZWF0ZUNTUyhcIiNcIitpZCxcInZpc2liaWxpdHk6XCIrdil9fWZ1bmN0aW9uIHVybEVuY29kZUlmTmVjZXNzYXJ5KHMpe3ZhciByZWdleD0vW1xcXFxcXFwiPD5cXC47XS87dmFyIGhhc0JhZENoYXJzPXJlZ2V4LmV4ZWMocykhPW51bGw7cmV0dXJuIGhhc0JhZENoYXJzP2VuY29kZVVSSUNvbXBvbmVudChzKTpzfXZhciBjbGVhbnVwPWZ1bmN0aW9uKCl7aWYodWEuaWUmJnVhLndpbil7d2luZG93LmF0dGFjaEV2ZW50KFwib251bmxvYWRcIixmdW5jdGlvbigpe3ZhciBsbD1saXN0ZW5lcnNBcnIubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bGw7aSsrKXtsaXN0ZW5lcnNBcnJbaV1bMF0uZGV0YWNoRXZlbnQobGlzdGVuZXJzQXJyW2ldWzFdLGxpc3RlbmVyc0FycltpXVsyXSl9dmFyIGlsPW9iaklkQXJyLmxlbmd0aDtmb3IodmFyIGo9MDtqPGlsO2orKyl7cmVtb3ZlU1dGKG9iaklkQXJyW2pdKX1mb3IodmFyIGsgaW4gdWEpe3VhW2tdPW51bGx9dWE9bnVsbDtmb3IodmFyIGwgaW4gc3dmb2JqZWN0KXtzd2ZvYmplY3RbbF09bnVsbH1zd2ZvYmplY3Q9bnVsbH0pfX0oKTtyZXR1cm57cmVnaXN0ZXJPYmplY3Q6ZnVuY3Rpb24ob2JqZWN0SWRTdHIsc3dmVmVyc2lvblN0cix4aVN3ZlVybFN0cil7aWYoIXVhLnczY2RvbXx8IW9iamVjdElkU3RyfHwhc3dmVmVyc2lvblN0cil7cmV0dXJufXZhciByZWdPYmo9e307cmVnT2JqLmlkPW9iamVjdElkU3RyO3JlZ09iai5zd2ZWZXJzaW9uPXN3ZlZlcnNpb25TdHI7cmVnT2JqLmV4cHJlc3NJbnN0YWxsPXhpU3dmVXJsU3RyP3hpU3dmVXJsU3RyOmZhbHNlO3JlZ09iakFycltyZWdPYmpBcnIubGVuZ3RoXT1yZWdPYmo7c2V0VmlzaWJpbGl0eShvYmplY3RJZFN0cixmYWxzZSl9LGdldE9iamVjdEJ5SWQ6ZnVuY3Rpb24ob2JqZWN0SWRTdHIpe3ZhciByPW51bGw7aWYodWEudzNjZG9tKXt2YXIgbz1nZXRFbGVtZW50QnlJZChvYmplY3RJZFN0cik7aWYobyl7dmFyIG49by5nZXRFbGVtZW50c0J5VGFnTmFtZShPQkpFQ1QpWzBdO2lmKCFufHwobiYmdHlwZW9mIG8uU2V0VmFyaWFibGUhPVVOREVGKSl7cj1vfWVsc2V7aWYodHlwZW9mIG4uU2V0VmFyaWFibGUhPVVOREVGKXtyPW59fX19cmV0dXJuIHJ9LGVtYmVkU1dGOmZ1bmN0aW9uKHN3ZlVybFN0cixyZXBsYWNlRWxlbUlkU3RyLHdpZHRoU3RyLGhlaWdodFN0cixzd2ZWZXJzaW9uU3RyLHhpU3dmVXJsU3RyLGZsYXNodmFyc09iaixwYXJPYmosYXR0T2JqKXtpZighdWEudzNjZG9tfHwhc3dmVXJsU3RyfHwhcmVwbGFjZUVsZW1JZFN0cnx8IXdpZHRoU3RyfHwhaGVpZ2h0U3RyfHwhc3dmVmVyc2lvblN0cil7cmV0dXJufXdpZHRoU3RyKz1cIlwiO2hlaWdodFN0cis9XCJcIjtpZihoYXNQbGF5ZXJWZXJzaW9uKHN3ZlZlcnNpb25TdHIpKXtzZXRWaXNpYmlsaXR5KHJlcGxhY2VFbGVtSWRTdHIsZmFsc2UpO3ZhciBhdHQ9e307aWYoYXR0T2JqJiZ0eXBlb2YgYXR0T2JqPT09T0JKRUNUKXtmb3IodmFyIGkgaW4gYXR0T2JqKXtpZihhdHRPYmpbaV0hPU9iamVjdC5wcm90b3R5cGVbaV0pe2F0dFtpXT1hdHRPYmpbaV19fX1hdHQuZGF0YT1zd2ZVcmxTdHI7YXR0LndpZHRoPXdpZHRoU3RyO2F0dC5oZWlnaHQ9aGVpZ2h0U3RyO3ZhciBwYXI9e307aWYocGFyT2JqJiZ0eXBlb2YgcGFyT2JqPT09T0JKRUNUKXtmb3IodmFyIGogaW4gcGFyT2JqKXtpZihwYXJPYmpbal0hPU9iamVjdC5wcm90b3R5cGVbal0pe3BhcltqXT1wYXJPYmpbal19fX1pZihmbGFzaHZhcnNPYmomJnR5cGVvZiBmbGFzaHZhcnNPYmo9PT1PQkpFQ1Qpe2Zvcih2YXIgayBpbiBmbGFzaHZhcnNPYmope2lmKGZsYXNodmFyc09ialtrXSE9T2JqZWN0LnByb3RvdHlwZVtrXSl7aWYodHlwZW9mIHBhci5mbGFzaHZhcnMhPVVOREVGKXtwYXIuZmxhc2h2YXJzKz1cIiZcIitrK1wiPVwiK2ZsYXNodmFyc09ialtrXX1lbHNle3Bhci5mbGFzaHZhcnM9aytcIj1cIitmbGFzaHZhcnNPYmpba119fX19YWRkRG9tTG9hZEV2ZW50KGZ1bmN0aW9uKCl7Y3JlYXRlU1dGKGF0dCxwYXIscmVwbGFjZUVsZW1JZFN0cik7aWYoYXR0LmlkPT1yZXBsYWNlRWxlbUlkU3RyKXtzZXRWaXNpYmlsaXR5KHJlcGxhY2VFbGVtSWRTdHIsdHJ1ZSl9fSl9ZWxzZXtpZih4aVN3ZlVybFN0ciYmIWlzRXhwcmVzc0luc3RhbGxBY3RpdmUmJmhhc1BsYXllclZlcnNpb24oXCI2LjAuNjVcIikmJih1YS53aW58fHVhLm1hYykpe2lzRXhwcmVzc0luc3RhbGxBY3RpdmU9dHJ1ZTtzZXRWaXNpYmlsaXR5KHJlcGxhY2VFbGVtSWRTdHIsZmFsc2UpO2FkZERvbUxvYWRFdmVudChmdW5jdGlvbigpe3ZhciByZWdPYmo9e307cmVnT2JqLmlkPXJlZ09iai5hbHRDb250ZW50SWQ9cmVwbGFjZUVsZW1JZFN0cjtyZWdPYmoud2lkdGg9d2lkdGhTdHI7cmVnT2JqLmhlaWdodD1oZWlnaHRTdHI7cmVnT2JqLmV4cHJlc3NJbnN0YWxsPXhpU3dmVXJsU3RyO3Nob3dFeHByZXNzSW5zdGFsbChyZWdPYmopfSl9fX0sZ2V0Rmxhc2hQbGF5ZXJWZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJue21ham9yOnVhLnB2WzBdLG1pbm9yOnVhLnB2WzFdLHJlbGVhc2U6dWEucHZbMl19fSxoYXNGbGFzaFBsYXllclZlcnNpb246aGFzUGxheWVyVmVyc2lvbixjcmVhdGVTV0Y6ZnVuY3Rpb24oYXR0T2JqLHBhck9iaixyZXBsYWNlRWxlbUlkU3RyKXtpZih1YS53M2Nkb20pe3JldHVybiBjcmVhdGVTV0YoYXR0T2JqLHBhck9iaixyZXBsYWNlRWxlbUlkU3RyKX1lbHNle3JldHVybiB1bmRlZmluZWR9fSxyZW1vdmVTV0Y6ZnVuY3Rpb24ob2JqRWxlbUlkU3RyKXtpZih1YS53M2Nkb20pe3JlbW92ZVNXRihvYmpFbGVtSWRTdHIpfX0sY3JlYXRlQ1NTOmZ1bmN0aW9uKHNlbCxkZWNsKXtpZih1YS53M2Nkb20pe2NyZWF0ZUNTUyhzZWwsZGVjbCl9fSxhZGREb21Mb2FkRXZlbnQ6YWRkRG9tTG9hZEV2ZW50LGFkZExvYWRFdmVudDphZGRMb2FkRXZlbnQsZ2V0UXVlcnlQYXJhbVZhbHVlOmZ1bmN0aW9uKHBhcmFtKXt2YXIgcT1kb2MubG9jYXRpb24uc2VhcmNofHxkb2MubG9jYXRpb24uaGFzaDtpZihwYXJhbT09bnVsbCl7cmV0dXJuIHVybEVuY29kZUlmTmVjZXNzYXJ5KHEpfWlmKHEpe3ZhciBwYWlycz1xLnN1YnN0cmluZygxKS5zcGxpdChcIiZcIik7Zm9yKHZhciBpPTA7aTxwYWlycy5sZW5ndGg7aSsrKXtpZihwYWlyc1tpXS5zdWJzdHJpbmcoMCxwYWlyc1tpXS5pbmRleE9mKFwiPVwiKSk9PXBhcmFtKXtyZXR1cm4gdXJsRW5jb2RlSWZOZWNlc3NhcnkocGFpcnNbaV0uc3Vic3RyaW5nKChwYWlyc1tpXS5pbmRleE9mKFwiPVwiKSsxKSkpfX19cmV0dXJuXCJcIn0sZXhwcmVzc0luc3RhbGxDYWxsYmFjazpmdW5jdGlvbigpe2lmKGlzRXhwcmVzc0luc3RhbGxBY3RpdmUmJnN0b3JlZEFsdENvbnRlbnQpe3ZhciBvYmo9Z2V0RWxlbWVudEJ5SWQoRVhQUkVTU19JTlNUQUxMX0lEKTtpZihvYmope29iai5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChzdG9yZWRBbHRDb250ZW50LG9iaik7aWYoc3RvcmVkQWx0Q29udGVudElkKXtzZXRWaXNpYmlsaXR5KHN0b3JlZEFsdENvbnRlbnRJZCx0cnVlKTtpZih1YS5pZSYmdWEud2luKXtzdG9yZWRBbHRDb250ZW50LnN0eWxlLmRpc3BsYXk9XCJibG9ja1wifX1zdG9yZWRBbHRDb250ZW50PW51bGw7c3RvcmVkQWx0Q29udGVudElkPW51bGw7aXNFeHByZXNzSW5zdGFsbEFjdGl2ZT1mYWxzZX19fX19KCk7cmV0dXJuIHN3Zm9iamVjdH0pKCk7Uy5sYW5nPXtjb2RlOlwiZW5cIixvZjpcIm9mXCIsbG9hZGluZzpcImxvYWRpbmdcIixjYW5jZWw6XCJDYW5jZWxcIixuZXh0OlwiTmV4dFwiLHByZXZpb3VzOlwiUHJldmlvdXNcIixwbGF5OlwiUGxheVwiLHBhdXNlOlwiUGF1c2VcIixjbG9zZTpcIkNsb3NlXCIsZXJyb3JzOntzaW5nbGU6J1lvdSBtdXN0IGluc3RhbGwgdGhlIDxhIGhyZWY9XCJ7MH1cIj57MX08L2E+IGJyb3dzZXIgcGx1Z2luIHRvIHZpZXcgdGhpcyBjb250ZW50Licsc2hhcmVkOidZb3UgbXVzdCBpbnN0YWxsIGJvdGggdGhlIDxhIGhyZWY9XCJ7MH1cIj57MX08L2E+IGFuZCA8YSBocmVmPVwiezJ9XCI+ezN9PC9hPiBicm93c2VyIHBsdWdpbnMgdG8gdmlldyB0aGlzIGNvbnRlbnQuJyxlaXRoZXI6J1lvdSBtdXN0IGluc3RhbGwgZWl0aGVyIHRoZSA8YSBocmVmPVwiezB9XCI+ezF9PC9hPiBvciB0aGUgPGEgaHJlZj1cInsyfVwiPnszfTwvYT4gYnJvd3NlciBwbHVnaW4gdG8gdmlldyB0aGlzIGNvbnRlbnQuJ319O3ZhciBwcmUscHJveHlJZD1cInNiLWRyYWctcHJveHlcIixkcmFnRGF0YSxkcmFnUHJveHksZHJhZ1RhcmdldDtmdW5jdGlvbiByZXNldERyYWcoKXtkcmFnRGF0YT17eDowLHk6MCxzdGFydFg6bnVsbCxzdGFydFk6bnVsbH19ZnVuY3Rpb24gdXBkYXRlUHJveHkoKXt2YXIgZGltcz1TLmRpbWVuc2lvbnM7YXBwbHkoZHJhZ1Byb3h5LnN0eWxlLHtoZWlnaHQ6ZGltcy5pbm5lckhlaWdodCtcInB4XCIsd2lkdGg6ZGltcy5pbm5lcldpZHRoK1wicHhcIn0pfWZ1bmN0aW9uIGVuYWJsZURyYWcoKXtyZXNldERyYWcoKTt2YXIgc3R5bGU9W1wicG9zaXRpb246YWJzb2x1dGVcIixcImN1cnNvcjpcIisoUy5pc0dlY2tvP1wiLW1vei1ncmFiXCI6XCJtb3ZlXCIpLFwiYmFja2dyb3VuZC1jb2xvcjpcIisoUy5pc0lFP1wiI2ZmZjtmaWx0ZXI6YWxwaGEob3BhY2l0eT0wKVwiOlwidHJhbnNwYXJlbnRcIildLmpvaW4oXCI7XCIpO1MuYXBwZW5kSFRNTChTLnNraW4uYm9keSwnPGRpdiBpZD1cIicrcHJveHlJZCsnXCIgc3R5bGU9XCInK3N0eWxlKydcIj48L2Rpdj4nKTtkcmFnUHJveHk9Z2V0KHByb3h5SWQpO3VwZGF0ZVByb3h5KCk7YWRkRXZlbnQoZHJhZ1Byb3h5LFwibW91c2Vkb3duXCIsc3RhcnREcmFnKX1mdW5jdGlvbiBkaXNhYmxlRHJhZygpe2lmKGRyYWdQcm94eSl7cmVtb3ZlRXZlbnQoZHJhZ1Byb3h5LFwibW91c2Vkb3duXCIsc3RhcnREcmFnKTtyZW1vdmUoZHJhZ1Byb3h5KTtkcmFnUHJveHk9bnVsbH1kcmFnVGFyZ2V0PW51bGx9ZnVuY3Rpb24gc3RhcnREcmFnKGUpe3ByZXZlbnREZWZhdWx0KGUpO3ZhciB4eT1nZXRQYWdlWFkoZSk7ZHJhZ0RhdGEuc3RhcnRYPXh5WzBdO2RyYWdEYXRhLnN0YXJ0WT14eVsxXTtkcmFnVGFyZ2V0PWdldChTLnBsYXllci5pZCk7YWRkRXZlbnQoZG9jdW1lbnQsXCJtb3VzZW1vdmVcIixwb3NpdGlvbkRyYWcpO2FkZEV2ZW50KGRvY3VtZW50LFwibW91c2V1cFwiLGVuZERyYWcpO2lmKFMuaXNHZWNrbyl7ZHJhZ1Byb3h5LnN0eWxlLmN1cnNvcj1cIi1tb3otZ3JhYmJpbmdcIn19ZnVuY3Rpb24gcG9zaXRpb25EcmFnKGUpe3ZhciBwbGF5ZXI9Uy5wbGF5ZXIsZGltcz1TLmRpbWVuc2lvbnMseHk9Z2V0UGFnZVhZKGUpO3ZhciBtb3ZlWD14eVswXS1kcmFnRGF0YS5zdGFydFg7ZHJhZ0RhdGEuc3RhcnRYKz1tb3ZlWDtkcmFnRGF0YS54PU1hdGgubWF4KE1hdGgubWluKDAsZHJhZ0RhdGEueCttb3ZlWCksZGltcy5pbm5lcldpZHRoLXBsYXllci53aWR0aCk7dmFyIG1vdmVZPXh5WzFdLWRyYWdEYXRhLnN0YXJ0WTtkcmFnRGF0YS5zdGFydFkrPW1vdmVZO2RyYWdEYXRhLnk9TWF0aC5tYXgoTWF0aC5taW4oMCxkcmFnRGF0YS55K21vdmVZKSxkaW1zLmlubmVySGVpZ2h0LXBsYXllci5oZWlnaHQpO2FwcGx5KGRyYWdUYXJnZXQuc3R5bGUse2xlZnQ6ZHJhZ0RhdGEueCtcInB4XCIsdG9wOmRyYWdEYXRhLnkrXCJweFwifSl9ZnVuY3Rpb24gZW5kRHJhZygpe3JlbW92ZUV2ZW50KGRvY3VtZW50LFwibW91c2Vtb3ZlXCIscG9zaXRpb25EcmFnKTtyZW1vdmVFdmVudChkb2N1bWVudCxcIm1vdXNldXBcIixlbmREcmFnKTtpZihTLmlzR2Vja28pe2RyYWdQcm94eS5zdHlsZS5jdXJzb3I9XCItbW96LWdyYWJcIn19Uy5pbWc9ZnVuY3Rpb24ob2JqLGlkKXt0aGlzLm9iaj1vYmo7dGhpcy5pZD1pZDt0aGlzLnJlYWR5PWZhbHNlO3ZhciBzZWxmPXRoaXM7cHJlPW5ldyBJbWFnZSgpO3ByZS5vbmxvYWQ9ZnVuY3Rpb24oKXtzZWxmLmhlaWdodD1vYmouaGVpZ2h0P3BhcnNlSW50KG9iai5oZWlnaHQsMTApOnByZS5oZWlnaHQ7c2VsZi53aWR0aD1vYmoud2lkdGg/cGFyc2VJbnQob2JqLndpZHRoLDEwKTpwcmUud2lkdGg7c2VsZi5yZWFkeT10cnVlO3ByZS5vbmxvYWQ9bnVsbDtwcmU9bnVsbH07cHJlLnNyYz1vYmouY29udGVudH07Uy5pbWcuZXh0PVtcImJtcFwiLFwiZ2lmXCIsXCJqcGdcIixcImpwZWdcIixcInBuZ1wiXTtTLmltZy5wcm90b3R5cGU9e2FwcGVuZDpmdW5jdGlvbihib2R5LGRpbXMpe3ZhciBpbWc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtpbWcuaWQ9dGhpcy5pZDtpbWcuc3JjPXRoaXMub2JqLmNvbnRlbnQ7aW1nLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIjt2YXIgaGVpZ2h0LHdpZHRoO2lmKGRpbXMub3ZlcnNpemVkJiZTLm9wdGlvbnMuaGFuZGxlT3ZlcnNpemU9PVwicmVzaXplXCIpe2hlaWdodD1kaW1zLmlubmVySGVpZ2h0O3dpZHRoPWRpbXMuaW5uZXJXaWR0aH1lbHNle2hlaWdodD10aGlzLmhlaWdodDt3aWR0aD10aGlzLndpZHRofWltZy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIixoZWlnaHQpO2ltZy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLHdpZHRoKTtib2R5LmFwcGVuZENoaWxkKGltZyl9LHJlbW92ZTpmdW5jdGlvbigpe3ZhciBlbD1nZXQodGhpcy5pZCk7aWYoZWwpe3JlbW92ZShlbCl9ZGlzYWJsZURyYWcoKTtpZihwcmUpe3ByZS5vbmxvYWQ9bnVsbDtwcmU9bnVsbH19LG9uTG9hZDpmdW5jdGlvbigpe3ZhciBkaW1zPVMuZGltZW5zaW9ucztpZihkaW1zLm92ZXJzaXplZCYmUy5vcHRpb25zLmhhbmRsZU92ZXJzaXplPT1cImRyYWdcIil7ZW5hYmxlRHJhZygpfX0sb25XaW5kb3dSZXNpemU6ZnVuY3Rpb24oKXt2YXIgZGltcz1TLmRpbWVuc2lvbnM7c3dpdGNoKFMub3B0aW9ucy5oYW5kbGVPdmVyc2l6ZSl7Y2FzZVwicmVzaXplXCI6dmFyIGVsPWdldCh0aGlzLmlkKTtlbC5oZWlnaHQ9ZGltcy5pbm5lckhlaWdodDtlbC53aWR0aD1kaW1zLmlubmVyV2lkdGg7YnJlYWs7Y2FzZVwiZHJhZ1wiOmlmKGRyYWdUYXJnZXQpe3ZhciB0b3A9cGFyc2VJbnQoUy5nZXRTdHlsZShkcmFnVGFyZ2V0LFwidG9wXCIpKSxsZWZ0PXBhcnNlSW50KFMuZ2V0U3R5bGUoZHJhZ1RhcmdldCxcImxlZnRcIikpO2lmKHRvcCt0aGlzLmhlaWdodDxkaW1zLmlubmVySGVpZ2h0KXtkcmFnVGFyZ2V0LnN0eWxlLnRvcD1kaW1zLmlubmVySGVpZ2h0LXRoaXMuaGVpZ2h0K1wicHhcIn1pZihsZWZ0K3RoaXMud2lkdGg8ZGltcy5pbm5lcldpZHRoKXtkcmFnVGFyZ2V0LnN0eWxlLmxlZnQ9ZGltcy5pbm5lcldpZHRoLXRoaXMud2lkdGgrXCJweFwifXVwZGF0ZVByb3h5KCl9YnJlYWt9fX07Uy5pZnJhbWU9ZnVuY3Rpb24ob2JqLGlkKXt0aGlzLm9iaj1vYmo7dGhpcy5pZD1pZDt2YXIgb3ZlcmxheT1nZXQoXCJzYi1vdmVybGF5XCIpO3RoaXMuaGVpZ2h0PW9iai5oZWlnaHQ/cGFyc2VJbnQob2JqLmhlaWdodCwxMCk6b3ZlcmxheS5vZmZzZXRIZWlnaHQ7dGhpcy53aWR0aD1vYmoud2lkdGg/cGFyc2VJbnQob2JqLndpZHRoLDEwKTpvdmVybGF5Lm9mZnNldFdpZHRofTtTLmlmcmFtZS5wcm90b3R5cGU9e2FwcGVuZDpmdW5jdGlvbihib2R5LGRpbXMpe3ZhciBodG1sPSc8aWZyYW1lIGlkPVwiJyt0aGlzLmlkKydcIiBuYW1lPVwiJyt0aGlzLmlkKydcIiBoZWlnaHQ9XCIxMDAlXCIgd2lkdGg9XCIxMDAlXCIgZnJhbWVib3JkZXI9XCIwXCIgbWFyZ2lud2lkdGg9XCIwXCIgbWFyZ2luaGVpZ2h0PVwiMFwiIHN0eWxlPVwidmlzaWJpbGl0eTpoaWRkZW5cIiBvbmxvYWQ9XCJ0aGlzLnN0eWxlLnZpc2liaWxpdHk9XFwndmlzaWJsZVxcJ1wiIHNjcm9sbGluZz1cImF1dG9cIic7aWYoUy5pc0lFKXtodG1sKz0nIGFsbG93dHJhbnNwYXJlbmN5PVwidHJ1ZVwiJztpZihTLmlzSUU2KXtodG1sKz1cIiBzcmM9XFxcImphdmFzY3JpcHQ6ZmFsc2U7ZG9jdW1lbnQud3JpdGUoJycpO1xcXCJcIn19aHRtbCs9XCI+PC9pZnJhbWU+XCI7Ym9keS5pbm5lckhUTUw9aHRtbH0scmVtb3ZlOmZ1bmN0aW9uKCl7dmFyIGVsPWdldCh0aGlzLmlkKTtpZihlbCl7cmVtb3ZlKGVsKTtpZihTLmlzR2Vja28pe2RlbGV0ZSB3aW5kb3cuZnJhbWVzW3RoaXMuaWRdfX19LG9uTG9hZDpmdW5jdGlvbigpe3ZhciB3aW49Uy5pc0lFP2dldCh0aGlzLmlkKS5jb250ZW50V2luZG93OndpbmRvdy5mcmFtZXNbdGhpcy5pZF07d2luLmxvY2F0aW9uLmhyZWY9dGhpcy5vYmouY29udGVudH19O1MuaHRtbD1mdW5jdGlvbihvYmosaWQpe3RoaXMub2JqPW9iajt0aGlzLmlkPWlkO3RoaXMuaGVpZ2h0PW9iai5oZWlnaHQ/cGFyc2VJbnQob2JqLmhlaWdodCwxMCk6MzAwO3RoaXMud2lkdGg9b2JqLndpZHRoP3BhcnNlSW50KG9iai53aWR0aCwxMCk6NTAwfTtTLmh0bWwucHJvdG90eXBlPXthcHBlbmQ6ZnVuY3Rpb24oYm9keSxkaW1zKXt2YXIgZGl2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZGl2LmlkPXRoaXMuaWQ7ZGl2LmNsYXNzTmFtZT1cImh0bWxcIjtkaXYuaW5uZXJIVE1MPXRoaXMub2JqLmNvbnRlbnQ7Ym9keS5hcHBlbmRDaGlsZChkaXYpfSxyZW1vdmU6ZnVuY3Rpb24oKXt2YXIgZWw9Z2V0KHRoaXMuaWQpO2lmKGVsKXtyZW1vdmUoZWwpfX19O1Muc3dmPWZ1bmN0aW9uKG9iaixpZCl7dGhpcy5vYmo9b2JqO3RoaXMuaWQ9aWQ7dGhpcy5oZWlnaHQ9b2JqLmhlaWdodD9wYXJzZUludChvYmouaGVpZ2h0LDEwKTozMDA7dGhpcy53aWR0aD1vYmoud2lkdGg/cGFyc2VJbnQob2JqLndpZHRoLDEwKTozMDB9O1Muc3dmLmV4dD1bXCJzd2ZcIl07Uy5zd2YucHJvdG90eXBlPXthcHBlbmQ6ZnVuY3Rpb24oYm9keSxkaW1zKXt2YXIgdG1wPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dG1wLmlkPXRoaXMuaWQ7Ym9keS5hcHBlbmRDaGlsZCh0bXApO3ZhciBoZWlnaHQ9ZGltcy5pbm5lckhlaWdodCx3aWR0aD1kaW1zLmlubmVyV2lkdGgsc3dmPXRoaXMub2JqLmNvbnRlbnQsdmVyc2lvbj1TLm9wdGlvbnMuZmxhc2hWZXJzaW9uLGV4cHJlc3M9Uy5wYXRoK1wiZXhwcmVzc0luc3RhbGwuc3dmXCIsZmxhc2h2YXJzPVMub3B0aW9ucy5mbGFzaFZhcnMscGFyYW1zPVMub3B0aW9ucy5mbGFzaFBhcmFtcztTLmZsYXNoLmVtYmVkU1dGKHN3Zix0aGlzLmlkLHdpZHRoLGhlaWdodCx2ZXJzaW9uLGV4cHJlc3MsZmxhc2h2YXJzLHBhcmFtcyl9LHJlbW92ZTpmdW5jdGlvbigpe1MuZmxhc2guZXhwcmVzc0luc3RhbGxDYWxsYmFjaygpO1MuZmxhc2gucmVtb3ZlU1dGKHRoaXMuaWQpfSxvbldpbmRvd1Jlc2l6ZTpmdW5jdGlvbigpe3ZhciBkaW1zPVMuZGltZW5zaW9ucyxlbD1nZXQodGhpcy5pZCk7ZWwuaGVpZ2h0PWRpbXMuaW5uZXJIZWlnaHQ7ZWwud2lkdGg9ZGltcy5pbm5lcldpZHRofX07dmFyIG92ZXJsYXlPbj1mYWxzZSx2aXNpYmlsaXR5Q2FjaGU9W10scG5nSWRzPVtcInNiLW5hdi1jbG9zZVwiLFwic2ItbmF2LW5leHRcIixcInNiLW5hdi1wbGF5XCIsXCJzYi1uYXYtcGF1c2VcIixcInNiLW5hdi1wcmV2aW91c1wiXSxjb250YWluZXIsb3ZlcmxheSx3cmFwcGVyLGRvV2luZG93UmVzaXplPXRydWU7ZnVuY3Rpb24gYW5pbWF0ZShlbCxwcm9wZXJ0eSx0byxkdXJhdGlvbixjYWxsYmFjayl7dmFyIGlzT3BhY2l0eT0ocHJvcGVydHk9PVwib3BhY2l0eVwiKSxhbmltPWlzT3BhY2l0eT9TLnNldE9wYWNpdHk6ZnVuY3Rpb24oZWwsdmFsdWUpe2VsLnN0eWxlW3Byb3BlcnR5XT1cIlwiK3ZhbHVlK1wicHhcIn07aWYoZHVyYXRpb249PTB8fCghaXNPcGFjaXR5JiYhUy5vcHRpb25zLmFuaW1hdGUpfHwoaXNPcGFjaXR5JiYhUy5vcHRpb25zLmFuaW1hdGVGYWRlKSl7YW5pbShlbCx0byk7aWYoY2FsbGJhY2spe2NhbGxiYWNrKCl9cmV0dXJufXZhciBmcm9tPXBhcnNlRmxvYXQoUy5nZXRTdHlsZShlbCxwcm9wZXJ0eSkpfHwwO3ZhciBkZWx0YT10by1mcm9tO2lmKGRlbHRhPT0wKXtpZihjYWxsYmFjayl7Y2FsbGJhY2soKX1yZXR1cm59ZHVyYXRpb24qPTEwMDA7dmFyIGJlZ2luPW5vdygpLGVhc2U9Uy5lYXNlLGVuZD1iZWdpbitkdXJhdGlvbix0aW1lO3ZhciBpbnRlcnZhbD1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3RpbWU9bm93KCk7aWYodGltZT49ZW5kKXtjbGVhckludGVydmFsKGludGVydmFsKTtpbnRlcnZhbD1udWxsO2FuaW0oZWwsdG8pO2lmKGNhbGxiYWNrKXtjYWxsYmFjaygpfX1lbHNle2FuaW0oZWwsZnJvbStlYXNlKCh0aW1lLWJlZ2luKS9kdXJhdGlvbikqZGVsdGEpfX0sMTApfWZ1bmN0aW9uIHNldFNpemUoKXtjb250YWluZXIuc3R5bGUuaGVpZ2h0PVMuZ2V0V2luZG93U2l6ZShcIkhlaWdodFwiKStcInB4XCI7Y29udGFpbmVyLnN0eWxlLndpZHRoPVMuZ2V0V2luZG93U2l6ZShcIldpZHRoXCIpK1wicHhcIn1mdW5jdGlvbiBzZXRQb3NpdGlvbigpe2NvbnRhaW5lci5zdHlsZS50b3A9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCtcInB4XCI7Y29udGFpbmVyLnN0eWxlLmxlZnQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQrXCJweFwifWZ1bmN0aW9uIHRvZ2dsZVRyb3VibGVFbGVtZW50cyhvbil7aWYob24pe2VhY2godmlzaWJpbGl0eUNhY2hlLGZ1bmN0aW9uKGksZWwpe2VsWzBdLnN0eWxlLnZpc2liaWxpdHk9ZWxbMV18fFwiXCJ9KX1lbHNle3Zpc2liaWxpdHlDYWNoZT1bXTtlYWNoKFMub3B0aW9ucy50cm91YmxlRWxlbWVudHMsZnVuY3Rpb24oaSx0YWcpe2VhY2goZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnKSxmdW5jdGlvbihqLGVsKXt2aXNpYmlsaXR5Q2FjaGUucHVzaChbZWwsZWwuc3R5bGUudmlzaWJpbGl0eV0pO2VsLnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIn0pfSl9fWZ1bmN0aW9uIHRvZ2dsZU5hdihpZCxvbil7dmFyIGVsPWdldChcInNiLW5hdi1cIitpZCk7aWYoZWwpe2VsLnN0eWxlLmRpc3BsYXk9b24/XCJcIjpcIm5vbmVcIn19ZnVuY3Rpb24gdG9nZ2xlTG9hZGluZyhvbixjYWxsYmFjayl7dmFyIGxvYWRpbmc9Z2V0KFwic2ItbG9hZGluZ1wiKSxwbGF5ZXJOYW1lPVMuZ2V0Q3VycmVudCgpLnBsYXllcixhbmltPShwbGF5ZXJOYW1lPT1cImltZ1wifHxwbGF5ZXJOYW1lPT1cImh0bWxcIik7aWYob24pe1Muc2V0T3BhY2l0eShsb2FkaW5nLDApO2xvYWRpbmcuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7dmFyIHdyYXBwZWQ9ZnVuY3Rpb24oKXtTLmNsZWFyT3BhY2l0eShsb2FkaW5nKTtpZihjYWxsYmFjayl7Y2FsbGJhY2soKX19O2lmKGFuaW0pe2FuaW1hdGUobG9hZGluZyxcIm9wYWNpdHlcIiwxLFMub3B0aW9ucy5mYWRlRHVyYXRpb24sd3JhcHBlZCl9ZWxzZXt3cmFwcGVkKCl9fWVsc2V7dmFyIHdyYXBwZWQ9ZnVuY3Rpb24oKXtsb2FkaW5nLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7Uy5jbGVhck9wYWNpdHkobG9hZGluZyk7aWYoY2FsbGJhY2spe2NhbGxiYWNrKCl9fTtpZihhbmltKXthbmltYXRlKGxvYWRpbmcsXCJvcGFjaXR5XCIsMCxTLm9wdGlvbnMuZmFkZUR1cmF0aW9uLHdyYXBwZWQpfWVsc2V7d3JhcHBlZCgpfX19ZnVuY3Rpb24gYnVpbGRCYXJzKGNhbGxiYWNrKXt2YXIgb2JqPVMuZ2V0Q3VycmVudCgpO2dldChcInNiLXRpdGxlLWlubmVyXCIpLmlubmVySFRNTD1vYmoudGl0bGV8fFwiXCI7dmFyIGNsb3NlLG5leHQscGxheSxwYXVzZSxwcmV2aW91cztpZihTLm9wdGlvbnMuZGlzcGxheU5hdil7Y2xvc2U9dHJ1ZTt2YXIgbGVuPVMuZ2FsbGVyeS5sZW5ndGg7aWYobGVuPjEpe2lmKFMub3B0aW9ucy5jb250aW51b3VzKXtuZXh0PXByZXZpb3VzPXRydWV9ZWxzZXtuZXh0PShsZW4tMSk+Uy5jdXJyZW50O3ByZXZpb3VzPVMuY3VycmVudD4wfX1pZihTLm9wdGlvbnMuc2xpZGVzaG93RGVsYXk+MCYmUy5oYXNOZXh0KCkpe3BhdXNlPSFTLmlzUGF1c2VkKCk7cGxheT0hcGF1c2V9fWVsc2V7Y2xvc2U9bmV4dD1wbGF5PXBhdXNlPXByZXZpb3VzPWZhbHNlfXRvZ2dsZU5hdihcImNsb3NlXCIsY2xvc2UpO3RvZ2dsZU5hdihcIm5leHRcIixuZXh0KTt0b2dnbGVOYXYoXCJwbGF5XCIscGxheSk7dG9nZ2xlTmF2KFwicGF1c2VcIixwYXVzZSk7dG9nZ2xlTmF2KFwicHJldmlvdXNcIixwcmV2aW91cyk7dmFyIGNvdW50ZXI9XCJcIjtpZihTLm9wdGlvbnMuZGlzcGxheUNvdW50ZXImJlMuZ2FsbGVyeS5sZW5ndGg+MSl7dmFyIGxlbj1TLmdhbGxlcnkubGVuZ3RoO2lmKFMub3B0aW9ucy5jb3VudGVyVHlwZT09XCJza2lwXCIpe3ZhciBpPTAsZW5kPWxlbixsaW1pdD1wYXJzZUludChTLm9wdGlvbnMuY291bnRlckxpbWl0KXx8MDtpZihsaW1pdDxsZW4mJmxpbWl0PjIpe3ZhciBoPU1hdGguZmxvb3IobGltaXQvMik7aT1TLmN1cnJlbnQtaDtpZihpPDApe2krPWxlbn1lbmQ9Uy5jdXJyZW50KyhsaW1pdC1oKTtpZihlbmQ+bGVuKXtlbmQtPWxlbn19d2hpbGUoaSE9ZW5kKXtpZihpPT1sZW4pe2k9MH1jb3VudGVyKz0nPGEgb25jbGljaz1cIlNoYWRvd2JveC5jaGFuZ2UoJytpKycpO1wiJztpZihpPT1TLmN1cnJlbnQpe2NvdW50ZXIrPScgY2xhc3M9XCJzYi1jb3VudGVyLWN1cnJlbnRcIid9Y291bnRlcis9XCI+XCIrKCsraSkrXCI8L2E+XCJ9fWVsc2V7Y291bnRlcj1bUy5jdXJyZW50KzEsUy5sYW5nLm9mLGxlbl0uam9pbihcIiBcIil9fWdldChcInNiLWNvdW50ZXJcIikuaW5uZXJIVE1MPWNvdW50ZXI7Y2FsbGJhY2soKX1mdW5jdGlvbiBzaG93QmFycyhjYWxsYmFjayl7dmFyIHRpdGxlSW5uZXI9Z2V0KFwic2ItdGl0bGUtaW5uZXJcIiksaW5mb0lubmVyPWdldChcInNiLWluZm8taW5uZXJcIiksZHVyYXRpb249MC4zNTt0aXRsZUlubmVyLnN0eWxlLnZpc2liaWxpdHk9aW5mb0lubmVyLnN0eWxlLnZpc2liaWxpdHk9XCJcIjtpZih0aXRsZUlubmVyLmlubmVySFRNTCE9XCJcIil7YW5pbWF0ZSh0aXRsZUlubmVyLFwibWFyZ2luVG9wXCIsMCxkdXJhdGlvbil9YW5pbWF0ZShpbmZvSW5uZXIsXCJtYXJnaW5Ub3BcIiwwLGR1cmF0aW9uLGNhbGxiYWNrKX1mdW5jdGlvbiBoaWRlQmFycyhhbmltLGNhbGxiYWNrKXt2YXIgdGl0bGU9Z2V0KFwic2ItdGl0bGVcIiksaW5mbz1nZXQoXCJzYi1pbmZvXCIpLHRpdGxlSGVpZ2h0PXRpdGxlLm9mZnNldEhlaWdodCxpbmZvSGVpZ2h0PWluZm8ub2Zmc2V0SGVpZ2h0LHRpdGxlSW5uZXI9Z2V0KFwic2ItdGl0bGUtaW5uZXJcIiksaW5mb0lubmVyPWdldChcInNiLWluZm8taW5uZXJcIiksZHVyYXRpb249KGFuaW0/MC4zNTowKTthbmltYXRlKHRpdGxlSW5uZXIsXCJtYXJnaW5Ub3BcIix0aXRsZUhlaWdodCxkdXJhdGlvbik7YW5pbWF0ZShpbmZvSW5uZXIsXCJtYXJnaW5Ub3BcIixpbmZvSGVpZ2h0Ki0xLGR1cmF0aW9uLGZ1bmN0aW9uKCl7dGl0bGVJbm5lci5zdHlsZS52aXNpYmlsaXR5PWluZm9Jbm5lci5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCI7Y2FsbGJhY2soKX0pfWZ1bmN0aW9uIGFkanVzdEhlaWdodChoZWlnaHQsdG9wLGFuaW0sY2FsbGJhY2spe3ZhciB3cmFwcGVySW5uZXI9Z2V0KFwic2Itd3JhcHBlci1pbm5lclwiKSxkdXJhdGlvbj0oYW5pbT9TLm9wdGlvbnMucmVzaXplRHVyYXRpb246MCk7YW5pbWF0ZSh3cmFwcGVyLFwidG9wXCIsdG9wLGR1cmF0aW9uKTthbmltYXRlKHdyYXBwZXJJbm5lcixcImhlaWdodFwiLGhlaWdodCxkdXJhdGlvbixjYWxsYmFjayl9ZnVuY3Rpb24gYWRqdXN0V2lkdGgod2lkdGgsbGVmdCxhbmltLGNhbGxiYWNrKXt2YXIgZHVyYXRpb249KGFuaW0/Uy5vcHRpb25zLnJlc2l6ZUR1cmF0aW9uOjApO2FuaW1hdGUod3JhcHBlcixcImxlZnRcIixsZWZ0LGR1cmF0aW9uKTthbmltYXRlKHdyYXBwZXIsXCJ3aWR0aFwiLHdpZHRoLGR1cmF0aW9uLGNhbGxiYWNrKX1mdW5jdGlvbiBzZXREaW1lbnNpb25zKGhlaWdodCx3aWR0aCl7dmFyIGJvZHlJbm5lcj1nZXQoXCJzYi1ib2R5LWlubmVyXCIpLGhlaWdodD1wYXJzZUludChoZWlnaHQpLHdpZHRoPXBhcnNlSW50KHdpZHRoKSx0b3BCb3R0b209d3JhcHBlci5vZmZzZXRIZWlnaHQtYm9keUlubmVyLm9mZnNldEhlaWdodCxsZWZ0UmlnaHQ9d3JhcHBlci5vZmZzZXRXaWR0aC1ib2R5SW5uZXIub2Zmc2V0V2lkdGgsbWF4SGVpZ2h0PW92ZXJsYXkub2Zmc2V0SGVpZ2h0LG1heFdpZHRoPW92ZXJsYXkub2Zmc2V0V2lkdGgscGFkZGluZz1wYXJzZUludChTLm9wdGlvbnMudmlld3BvcnRQYWRkaW5nKXx8MjAscHJlc2VydmVBc3BlY3Q9KFMucGxheWVyJiZTLm9wdGlvbnMuaGFuZGxlT3ZlcnNpemUhPVwiZHJhZ1wiKTtyZXR1cm4gUy5zZXREaW1lbnNpb25zKGhlaWdodCx3aWR0aCxtYXhIZWlnaHQsbWF4V2lkdGgsdG9wQm90dG9tLGxlZnRSaWdodCxwYWRkaW5nLHByZXNlcnZlQXNwZWN0KX12YXIgSz17fTtLLm1hcmt1cD0nPGRpdiBpZD1cInNiLWNvbnRhaW5lclwiPjxkaXYgaWQ9XCJzYi1vdmVybGF5XCI+PC9kaXY+PGRpdiBpZD1cInNiLXdyYXBwZXJcIj48ZGl2IGlkPVwic2ItdGl0bGVcIj48ZGl2IGlkPVwic2ItdGl0bGUtaW5uZXJcIj48L2Rpdj48L2Rpdj48ZGl2IGlkPVwic2Itd3JhcHBlci1pbm5lclwiPjxkaXYgaWQ9XCJzYi1ib2R5XCI+PGRpdiBpZD1cInNiLWJvZHktaW5uZXJcIj48L2Rpdj48ZGl2IGlkPVwic2ItbG9hZGluZ1wiPjxkaXYgaWQ9XCJzYi1sb2FkaW5nLWlubmVyXCI+PHNwYW4+e2xvYWRpbmd9PC9zcGFuPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgaWQ9XCJzYi1pbmZvXCI+PGRpdiBpZD1cInNiLWluZm8taW5uZXJcIj48ZGl2IGlkPVwic2ItY291bnRlclwiPjwvZGl2PjxkaXYgaWQ9XCJzYi1uYXZcIj48YSBpZD1cInNiLW5hdi1jbG9zZVwiIHRpdGxlPVwie2Nsb3NlfVwiIG9uY2xpY2s9XCJTaGFkb3dib3guY2xvc2UoKVwiPjwvYT48YSBpZD1cInNiLW5hdi1uZXh0XCIgdGl0bGU9XCJ7bmV4dH1cIiBvbmNsaWNrPVwiU2hhZG93Ym94Lm5leHQoKVwiPjwvYT48YSBpZD1cInNiLW5hdi1wbGF5XCIgdGl0bGU9XCJ7cGxheX1cIiBvbmNsaWNrPVwiU2hhZG93Ym94LnBsYXkoKVwiPjwvYT48YSBpZD1cInNiLW5hdi1wYXVzZVwiIHRpdGxlPVwie3BhdXNlfVwiIG9uY2xpY2s9XCJTaGFkb3dib3gucGF1c2UoKVwiPjwvYT48YSBpZD1cInNiLW5hdi1wcmV2aW91c1wiIHRpdGxlPVwie3ByZXZpb3VzfVwiIG9uY2xpY2s9XCJTaGFkb3dib3gucHJldmlvdXMoKVwiPjwvYT48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nO0sub3B0aW9ucz17YW5pbVNlcXVlbmNlOlwic3luY1wiLGNvdW50ZXJMaW1pdDoxMCxjb3VudGVyVHlwZTpcImRlZmF1bHRcIixkaXNwbGF5Q291bnRlcjp0cnVlLGRpc3BsYXlOYXY6dHJ1ZSxmYWRlRHVyYXRpb246MC4zNSxpbml0aWFsSGVpZ2h0OjE2MCxpbml0aWFsV2lkdGg6MzIwLG1vZGFsOmZhbHNlLG92ZXJsYXlDb2xvcjpcIiMwMDBcIixvdmVybGF5T3BhY2l0eTowLjUscmVzaXplRHVyYXRpb246MC4zNSxzaG93T3ZlcmxheTp0cnVlLHRyb3VibGVFbGVtZW50czpbXCJzZWxlY3RcIixcIm9iamVjdFwiLFwiZW1iZWRcIixcImNhbnZhc1wiXX07Sy5pbml0PWZ1bmN0aW9uKCl7Uy5hcHBlbmRIVE1MKGRvY3VtZW50LmJvZHksc3ByaW50ZihLLm1hcmt1cCxTLmxhbmcpKTtLLmJvZHk9Z2V0KFwic2ItYm9keS1pbm5lclwiKTtjb250YWluZXI9Z2V0KFwic2ItY29udGFpbmVyXCIpO292ZXJsYXk9Z2V0KFwic2Itb3ZlcmxheVwiKTt3cmFwcGVyPWdldChcInNiLXdyYXBwZXJcIik7aWYoIXN1cHBvcnRzRml4ZWQpe2NvbnRhaW5lci5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCJ9aWYoIXN1cHBvcnRzT3BhY2l0eSl7dmFyIGVsLG0scmU9L3VybFxcKFwiKC4qXFwucG5nKVwiXFwpLztlYWNoKHBuZ0lkcyxmdW5jdGlvbihpLGlkKXtlbD1nZXQoaWQpO2lmKGVsKXttPVMuZ2V0U3R5bGUoZWwsXCJiYWNrZ3JvdW5kSW1hZ2VcIikubWF0Y2gocmUpO2lmKG0pe2VsLnN0eWxlLmJhY2tncm91bmRJbWFnZT1cIm5vbmVcIjtlbC5zdHlsZS5maWx0ZXI9XCJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGFJbWFnZUxvYWRlcihlbmFibGVkPXRydWUsc3JjPVwiK21bMV0rXCIsc2l6aW5nTWV0aG9kPXNjYWxlKTtcIn19fSl9dmFyIHRpbWVyO2FkZEV2ZW50KHdpbmRvdyxcInJlc2l6ZVwiLGZ1bmN0aW9uKCl7aWYodGltZXIpe2NsZWFyVGltZW91dCh0aW1lcik7dGltZXI9bnVsbH1pZihvcGVuKXt0aW1lcj1zZXRUaW1lb3V0KEsub25XaW5kb3dSZXNpemUsMTApfX0pfTtLLm9uT3Blbj1mdW5jdGlvbihvYmosY2FsbGJhY2spe2RvV2luZG93UmVzaXplPWZhbHNlO2NvbnRhaW5lci5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjtzZXRTaXplKCk7dmFyIGRpbXM9c2V0RGltZW5zaW9ucyhTLm9wdGlvbnMuaW5pdGlhbEhlaWdodCxTLm9wdGlvbnMuaW5pdGlhbFdpZHRoKTthZGp1c3RIZWlnaHQoZGltcy5pbm5lckhlaWdodCxkaW1zLnRvcCk7YWRqdXN0V2lkdGgoZGltcy53aWR0aCxkaW1zLmxlZnQpO2lmKFMub3B0aW9ucy5zaG93T3ZlcmxheSl7b3ZlcmxheS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9Uy5vcHRpb25zLm92ZXJsYXlDb2xvcjtTLnNldE9wYWNpdHkob3ZlcmxheSwwKTtpZighUy5vcHRpb25zLm1vZGFsKXthZGRFdmVudChvdmVybGF5LFwiY2xpY2tcIixTLmNsb3NlKX1vdmVybGF5T249dHJ1ZX1pZighc3VwcG9ydHNGaXhlZCl7c2V0UG9zaXRpb24oKTthZGRFdmVudCh3aW5kb3csXCJzY3JvbGxcIixzZXRQb3NpdGlvbil9dG9nZ2xlVHJvdWJsZUVsZW1lbnRzKCk7Y29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHk9XCJ2aXNpYmxlXCI7aWYob3ZlcmxheU9uKXthbmltYXRlKG92ZXJsYXksXCJvcGFjaXR5XCIsUy5vcHRpb25zLm92ZXJsYXlPcGFjaXR5LFMub3B0aW9ucy5mYWRlRHVyYXRpb24sY2FsbGJhY2spfWVsc2V7Y2FsbGJhY2soKX19O0sub25Mb2FkPWZ1bmN0aW9uKGNoYW5naW5nLGNhbGxiYWNrKXt0b2dnbGVMb2FkaW5nKHRydWUpO3doaWxlKEsuYm9keS5maXJzdENoaWxkKXtyZW1vdmUoSy5ib2R5LmZpcnN0Q2hpbGQpfWhpZGVCYXJzKGNoYW5naW5nLGZ1bmN0aW9uKCl7aWYoIW9wZW4pe3JldHVybn1pZighY2hhbmdpbmcpe3dyYXBwZXIuc3R5bGUudmlzaWJpbGl0eT1cInZpc2libGVcIn1idWlsZEJhcnMoY2FsbGJhY2spfSl9O0sub25SZWFkeT1mdW5jdGlvbihjYWxsYmFjayl7aWYoIW9wZW4pe3JldHVybn12YXIgcGxheWVyPVMucGxheWVyLGRpbXM9c2V0RGltZW5zaW9ucyhwbGF5ZXIuaGVpZ2h0LHBsYXllci53aWR0aCk7dmFyIHdyYXBwZWQ9ZnVuY3Rpb24oKXtzaG93QmFycyhjYWxsYmFjayl9O3N3aXRjaChTLm9wdGlvbnMuYW5pbVNlcXVlbmNlKXtjYXNlXCJod1wiOmFkanVzdEhlaWdodChkaW1zLmlubmVySGVpZ2h0LGRpbXMudG9wLHRydWUsZnVuY3Rpb24oKXthZGp1c3RXaWR0aChkaW1zLndpZHRoLGRpbXMubGVmdCx0cnVlLHdyYXBwZWQpfSk7YnJlYWs7Y2FzZVwid2hcIjphZGp1c3RXaWR0aChkaW1zLndpZHRoLGRpbXMubGVmdCx0cnVlLGZ1bmN0aW9uKCl7YWRqdXN0SGVpZ2h0KGRpbXMuaW5uZXJIZWlnaHQsZGltcy50b3AsdHJ1ZSx3cmFwcGVkKX0pO2JyZWFrO2RlZmF1bHQ6YWRqdXN0V2lkdGgoZGltcy53aWR0aCxkaW1zLmxlZnQsdHJ1ZSk7YWRqdXN0SGVpZ2h0KGRpbXMuaW5uZXJIZWlnaHQsZGltcy50b3AsdHJ1ZSx3cmFwcGVkKX19O0sub25TaG93PWZ1bmN0aW9uKGNhbGxiYWNrKXt0b2dnbGVMb2FkaW5nKGZhbHNlLGNhbGxiYWNrKTtkb1dpbmRvd1Jlc2l6ZT10cnVlfTtLLm9uQ2xvc2U9ZnVuY3Rpb24oKXtpZighc3VwcG9ydHNGaXhlZCl7cmVtb3ZlRXZlbnQod2luZG93LFwic2Nyb2xsXCIsc2V0UG9zaXRpb24pfXJlbW92ZUV2ZW50KG92ZXJsYXksXCJjbGlja1wiLFMuY2xvc2UpO3dyYXBwZXIuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiO3ZhciBjYWxsYmFjaz1mdW5jdGlvbigpe2NvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCI7Y29udGFpbmVyLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7dG9nZ2xlVHJvdWJsZUVsZW1lbnRzKHRydWUpfTtpZihvdmVybGF5T24pe2FuaW1hdGUob3ZlcmxheSxcIm9wYWNpdHlcIiwwLFMub3B0aW9ucy5mYWRlRHVyYXRpb24sY2FsbGJhY2spfWVsc2V7Y2FsbGJhY2soKX19O0sub25QbGF5PWZ1bmN0aW9uKCl7dG9nZ2xlTmF2KFwicGxheVwiLGZhbHNlKTt0b2dnbGVOYXYoXCJwYXVzZVwiLHRydWUpfTtLLm9uUGF1c2U9ZnVuY3Rpb24oKXt0b2dnbGVOYXYoXCJwYXVzZVwiLGZhbHNlKTt0b2dnbGVOYXYoXCJwbGF5XCIsdHJ1ZSl9O0sub25XaW5kb3dSZXNpemU9ZnVuY3Rpb24oKXtpZighZG9XaW5kb3dSZXNpemUpe3JldHVybn1zZXRTaXplKCk7dmFyIHBsYXllcj1TLnBsYXllcixkaW1zPXNldERpbWVuc2lvbnMocGxheWVyLmhlaWdodCxwbGF5ZXIud2lkdGgpO2FkanVzdFdpZHRoKGRpbXMud2lkdGgsZGltcy5sZWZ0KTthZGp1c3RIZWlnaHQoZGltcy5pbm5lckhlaWdodCxkaW1zLnRvcCk7aWYocGxheWVyLm9uV2luZG93UmVzaXplKXtwbGF5ZXIub25XaW5kb3dSZXNpemUoKX19O1Muc2tpbj1LO3dpbmRvdy5TaGFkb3dib3g9U30pKHdpbmRvdyk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvbGliL3NoYWRvd2JveC9zaGFkb3dib3guanNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyohXG4gKiBKYXZhU2NyaXB0IENvb2tpZSB2Mi4yLjBcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qcy1jb29raWUvanMtY29va2llXG4gKlxuICogQ29weXJpZ2h0IDIwMDYsIDIwMTUgS2xhdXMgSGFydGwgJiBGYWduZXIgQnJhY2tcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICovXG47KGZ1bmN0aW9uIChmYWN0b3J5KSB7XG5cdHZhciByZWdpc3RlcmVkSW5Nb2R1bGVMb2FkZXIgPSBmYWxzZTtcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuXHRcdGRlZmluZShmYWN0b3J5KTtcblx0XHRyZWdpc3RlcmVkSW5Nb2R1bGVMb2FkZXIgPSB0cnVlO1xuXHR9XG5cdGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0XHRyZWdpc3RlcmVkSW5Nb2R1bGVMb2FkZXIgPSB0cnVlO1xuXHR9XG5cdGlmICghcmVnaXN0ZXJlZEluTW9kdWxlTG9hZGVyKSB7XG5cdFx0dmFyIE9sZENvb2tpZXMgPSB3aW5kb3cuQ29va2llcztcblx0XHR2YXIgYXBpID0gd2luZG93LkNvb2tpZXMgPSBmYWN0b3J5KCk7XG5cdFx0YXBpLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR3aW5kb3cuQ29va2llcyA9IE9sZENvb2tpZXM7XG5cdFx0XHRyZXR1cm4gYXBpO1xuXHRcdH07XG5cdH1cbn0oZnVuY3Rpb24gKCkge1xuXHRmdW5jdGlvbiBleHRlbmQgKCkge1xuXHRcdHZhciBpID0gMDtcblx0XHR2YXIgcmVzdWx0ID0ge307XG5cdFx0Zm9yICg7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhdHRyaWJ1dGVzID0gYXJndW1lbnRzWyBpIF07XG5cdFx0XHRmb3IgKHZhciBrZXkgaW4gYXR0cmlidXRlcykge1xuXHRcdFx0XHRyZXN1bHRba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdGZ1bmN0aW9uIGluaXQgKGNvbnZlcnRlcikge1xuXHRcdGZ1bmN0aW9uIGFwaSAoa2V5LCB2YWx1ZSwgYXR0cmlidXRlcykge1xuXHRcdFx0dmFyIHJlc3VsdDtcblx0XHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gV3JpdGVcblxuXHRcdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdGF0dHJpYnV0ZXMgPSBleHRlbmQoe1xuXHRcdFx0XHRcdHBhdGg6ICcvJ1xuXHRcdFx0XHR9LCBhcGkuZGVmYXVsdHMsIGF0dHJpYnV0ZXMpO1xuXG5cdFx0XHRcdGlmICh0eXBlb2YgYXR0cmlidXRlcy5leHBpcmVzID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRcdHZhciBleHBpcmVzID0gbmV3IERhdGUoKTtcblx0XHRcdFx0XHRleHBpcmVzLnNldE1pbGxpc2Vjb25kcyhleHBpcmVzLmdldE1pbGxpc2Vjb25kcygpICsgYXR0cmlidXRlcy5leHBpcmVzICogODY0ZSs1KTtcblx0XHRcdFx0XHRhdHRyaWJ1dGVzLmV4cGlyZXMgPSBleHBpcmVzO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gV2UncmUgdXNpbmcgXCJleHBpcmVzXCIgYmVjYXVzZSBcIm1heC1hZ2VcIiBpcyBub3Qgc3VwcG9ydGVkIGJ5IElFXG5cdFx0XHRcdGF0dHJpYnV0ZXMuZXhwaXJlcyA9IGF0dHJpYnV0ZXMuZXhwaXJlcyA/IGF0dHJpYnV0ZXMuZXhwaXJlcy50b1VUQ1N0cmluZygpIDogJyc7XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRyZXN1bHQgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG5cdFx0XHRcdFx0aWYgKC9eW1xce1xcW10vLnRlc3QocmVzdWx0KSkge1xuXHRcdFx0XHRcdFx0dmFsdWUgPSByZXN1bHQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXG5cdFx0XHRcdGlmICghY29udmVydGVyLndyaXRlKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKHZhbHVlKSlcblx0XHRcdFx0XHRcdC5yZXBsYWNlKC8lKDIzfDI0fDI2fDJCfDNBfDNDfDNFfDNEfDJGfDNGfDQwfDVCfDVEfDVFfDYwfDdCfDdEfDdDKS9nLCBkZWNvZGVVUklDb21wb25lbnQpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZhbHVlID0gY29udmVydGVyLndyaXRlKHZhbHVlLCBrZXkpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0a2V5ID0gZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhrZXkpKTtcblx0XHRcdFx0a2V5ID0ga2V5LnJlcGxhY2UoLyUoMjN8MjR8MjZ8MkJ8NUV8NjB8N0MpL2csIGRlY29kZVVSSUNvbXBvbmVudCk7XG5cdFx0XHRcdGtleSA9IGtleS5yZXBsYWNlKC9bXFwoXFwpXS9nLCBlc2NhcGUpO1xuXG5cdFx0XHRcdHZhciBzdHJpbmdpZmllZEF0dHJpYnV0ZXMgPSAnJztcblxuXHRcdFx0XHRmb3IgKHZhciBhdHRyaWJ1dGVOYW1lIGluIGF0dHJpYnV0ZXMpIHtcblx0XHRcdFx0XHRpZiAoIWF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0pIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzdHJpbmdpZmllZEF0dHJpYnV0ZXMgKz0gJzsgJyArIGF0dHJpYnV0ZU5hbWU7XG5cdFx0XHRcdFx0aWYgKGF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0gPT09IHRydWUpIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzdHJpbmdpZmllZEF0dHJpYnV0ZXMgKz0gJz0nICsgYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gKGRvY3VtZW50LmNvb2tpZSA9IGtleSArICc9JyArIHZhbHVlICsgc3RyaW5naWZpZWRBdHRyaWJ1dGVzKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVhZFxuXG5cdFx0XHRpZiAoIWtleSkge1xuXHRcdFx0XHRyZXN1bHQgPSB7fTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVG8gcHJldmVudCB0aGUgZm9yIGxvb3AgaW4gdGhlIGZpcnN0IHBsYWNlIGFzc2lnbiBhbiBlbXB0eSBhcnJheVxuXHRcdFx0Ly8gaW4gY2FzZSB0aGVyZSBhcmUgbm8gY29va2llcyBhdCBhbGwuIEFsc28gcHJldmVudHMgb2RkIHJlc3VsdCB3aGVuXG5cdFx0XHQvLyBjYWxsaW5nIFwiZ2V0KClcIlxuXHRcdFx0dmFyIGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUgPyBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsgJykgOiBbXTtcblx0XHRcdHZhciByZGVjb2RlID0gLyglWzAtOUEtWl17Mn0pKy9nO1xuXHRcdFx0dmFyIGkgPSAwO1xuXG5cdFx0XHRmb3IgKDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIHBhcnRzID0gY29va2llc1tpXS5zcGxpdCgnPScpO1xuXHRcdFx0XHR2YXIgY29va2llID0gcGFydHMuc2xpY2UoMSkuam9pbignPScpO1xuXG5cdFx0XHRcdGlmICghdGhpcy5qc29uICYmIGNvb2tpZS5jaGFyQXQoMCkgPT09ICdcIicpIHtcblx0XHRcdFx0XHRjb29raWUgPSBjb29raWUuc2xpY2UoMSwgLTEpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHR2YXIgbmFtZSA9IHBhcnRzWzBdLnJlcGxhY2UocmRlY29kZSwgZGVjb2RlVVJJQ29tcG9uZW50KTtcblx0XHRcdFx0XHRjb29raWUgPSBjb252ZXJ0ZXIucmVhZCA/XG5cdFx0XHRcdFx0XHRjb252ZXJ0ZXIucmVhZChjb29raWUsIG5hbWUpIDogY29udmVydGVyKGNvb2tpZSwgbmFtZSkgfHxcblx0XHRcdFx0XHRcdGNvb2tpZS5yZXBsYWNlKHJkZWNvZGUsIGRlY29kZVVSSUNvbXBvbmVudCk7XG5cblx0XHRcdFx0XHRpZiAodGhpcy5qc29uKSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRjb29raWUgPSBKU09OLnBhcnNlKGNvb2tpZSk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChrZXkgPT09IG5hbWUpIHtcblx0XHRcdFx0XHRcdHJlc3VsdCA9IGNvb2tpZTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICgha2V5KSB7XG5cdFx0XHRcdFx0XHRyZXN1bHRbbmFtZV0gPSBjb29raWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH1cblxuXHRcdGFwaS5zZXQgPSBhcGk7XG5cdFx0YXBpLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcblx0XHRcdHJldHVybiBhcGkuY2FsbChhcGksIGtleSk7XG5cdFx0fTtcblx0XHRhcGkuZ2V0SlNPTiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBhcGkuYXBwbHkoe1xuXHRcdFx0XHRqc29uOiB0cnVlXG5cdFx0XHR9LCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuXHRcdH07XG5cdFx0YXBpLmRlZmF1bHRzID0ge307XG5cblx0XHRhcGkucmVtb3ZlID0gZnVuY3Rpb24gKGtleSwgYXR0cmlidXRlcykge1xuXHRcdFx0YXBpKGtleSwgJycsIGV4dGVuZChhdHRyaWJ1dGVzLCB7XG5cdFx0XHRcdGV4cGlyZXM6IC0xXG5cdFx0XHR9KSk7XG5cdFx0fTtcblxuXHRcdGFwaS53aXRoQ29udmVydGVyID0gaW5pdDtcblxuXHRcdHJldHVybiBhcGk7XG5cdH1cblxuXHRyZXR1cm4gaW5pdChmdW5jdGlvbiAoKSB7fSk7XG59KSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vanMtY29va2llL3NyYy9qcy5jb29raWUuanNcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIENvb2tpZXMgPSByZXF1aXJlKCdqcy1jb29raWUnKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoJCkge1xuICAgICAgICBpZiAoIUNvb2tpZXMuZ2V0KCdjb29raWVub3RpY2VzaG93bicpKSB7XG4gICAgICAgICAgICBDb29raWVzLnNldCgnY29va2llbm90aWNlc2hvd24nLCAnMScsIHtleHBpcmVzOiAzNjV9KTtcblxuICAgICAgICAgICAgJCgnLmNvb2tpZS1ub3RpY2UnKS5zaG93KCk7XG5cbiAgICAgICAgICAgICQoJy5jb29raWUtbm90aWNlX19kaXNtaXNzIGJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgJCgnLmNvb2tpZS1ub3RpY2UnKS5mYWRlT3V0KCdmYXN0Jyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59KCk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9qcy9tYWluL2Z1bmNzL2luaXQtY29va2llLW5vdGljZS5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgdmFyICRnbG9iYWxOYXZXcmFwcGVyID0gJChcIi5nbG9iYWwtbmF2LXdyYXBwZXJcIiksXG4gICAgICAkZ2xvYmFsTmF2RWxlbWVudHMgPSAkZ2xvYmFsTmF2V3JhcHBlci5maW5kKFwiLmdsb2JhbC1uYXZfX2l0ZW1cIiksXG4gICAgICAkc2VhcmNoV3JhcHBlciA9ICQoXCIuaGVhZGVyLXNlYXJjaC13cmFwcGVyXCIpLFxuICAgICAgJHNlYXJjaFRvZ2dsZXIgPSAkKFwiLmhlYWRlci1zZWFyY2gtdG9nZ2xlclwiKSxcbiAgICAgICRnbG9iYWxOYXZUb2dnbGVyID0gJChcIi5nbG9iYWwtbmF2LXRvZ2dsZXJcIiksXG4gICAgICAkd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgY29tcGFjdFdpZHRoID0gODQ0LFxuICAgICAgJGJvZHkgPSAkKFwiYm9keVwiKTtcblxuICByZXR1cm4gZnVuY3Rpb24oJCkge1xuICAgICRzZWFyY2hUb2dnbGVyLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgJHNlYXJjaFdyYXBwZXIudG9nZ2xlQ2xhc3MoXCJoZWFkZXItc2VhcmNoLXdyYXBwZXItLWFjdGl2ZVwiKTtcbiAgICAgICRnbG9iYWxOYXZXcmFwcGVyLnJlbW92ZUNsYXNzKFwiZ2xvYmFsLW5hdi13cmFwcGVyLS1hY3RpdmVcIik7XG4gICAgfSk7XG5cbiAgICAkZ2xvYmFsTmF2VG9nZ2xlci5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICRnbG9iYWxOYXZXcmFwcGVyLnRvZ2dsZUNsYXNzKFwiZ2xvYmFsLW5hdi13cmFwcGVyLS1hY3RpdmVcIik7XG4gICAgICAkc2VhcmNoV3JhcHBlci5yZW1vdmVDbGFzcyhcImhlYWRlci1zZWFyY2gtd3JhcHBlci0tYWN0aXZlXCIpO1xuICAgIH0pO1xuXG4gICAgJGdsb2JhbE5hdkVsZW1lbnRzLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGNsaWNrZWROYXZJdGVtID0gJCh0aGlzKSxcbiAgICAgICAgICBjbGlja2VkTmF2SXRlbUlzQWN0aXZlID0gY2xpY2tlZE5hdkl0ZW0uaGFzQ2xhc3MoXCJnbG9iYWwtbmF2X19pdGVtLS1hY3RpdmVcIik7XG5cbiAgICAgIGlmICgkd2luZG93LndpZHRoKCkgPiBjb21wYWN0V2lkdGgpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgJGdsb2JhbE5hdkVsZW1lbnRzLnJlbW92ZUNsYXNzKFwiZ2xvYmFsLW5hdl9faXRlbS0tYWN0aXZlXCIpO1xuICAgICAgICBpZiAoY2xpY2tlZE5hdkl0ZW1Jc0FjdGl2ZSkge1xuICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcImV2ZW50XCI6IFwiaGVhZGVyQ2xpY2tcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJoZWFkZXJDbGlja0RldGFpbHNcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXZlbnRDYXRlZ29yeVwiOiBcIkhlYWRlciBDbGlja1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXZlbnRBY3Rpb25cIjogdGhpcy5nZXRFbGVtZW50c0J5VGFnTmFtZShcImFcIilbMF0uaHJlZi5yZXBsYWNlKC9eaHR0cHM6LyxcImh0dHA6XCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiZXZlbnRMYWJlbFwiOiB0aGlzLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYVwiKVswXS5pbm5lclRleHQudHJpbSgpICsgXCIgKGZvbGxvdylcIn19KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgY2xpY2tlZE5hdkl0ZW0uYWRkQ2xhc3MoXCJnbG9iYWwtbmF2X19pdGVtLS1hY3RpdmVcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgICRib2R5LmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgJGdsb2JhbE5hdkVsZW1lbnRzLnJlbW92ZUNsYXNzKFwiZ2xvYmFsLW5hdl9faXRlbS0tYWN0aXZlXCIpO1xuICAgIH0pO1xuICB9O1xufSgpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvbWFpbi9mdW5jcy9pbml0LWhlYWRlci5qc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBUb2dnbGUgVmlzaWJpbGl0eSBvZiBJbWFnZSBDcmVkaXQgQ29tcG9uZW50XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciAkID0gcmVxdWlyZSgnLi4vanF1ZXJ5Jyk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciAkY3JlZGl0cyA9ICQoXCIuaW1hZ2UtY3JlZGl0XCIpLFxuICAgICAgICAgICAgJGNyZWRpdEl0ZW1zID0gJChcIi5jcmVkaXRzLWl0ZW1zXCIpLFxuICAgICAgICAgICAgJHNjcENyZWRpdHNUaXRsZSA9ICQoXCIuY3JlZGl0cy10aXRsZVwiKSxcbiAgICAgICAgICAgIGNyZWRpdEJ1dHRvbkNsYXNzID0gXCIuaW1hZ2UtY3JlZGl0X19idXR0b25cIixcblxuICAgICAgICAgICAgdG9nZ2xlSW1hZ2VDcmVkaXQgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gbm9kZS5hdHRyKFwiYXJpYS1wcmVzc2VkXCIpID09PSBcInRydWVcIiA/IFwiZmFsc2VcIiA6IFwidHJ1ZVwiO1xuICAgICAgICAgICAgICAgIG5vZGUuYXR0cihcImFyaWEtcHJlc3NlZFwiLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgbm9kZS5wYXJlbnQoKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCBzdGF0ZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICRjcmVkaXRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKGNyZWRpdEJ1dHRvbkNsYXNzKS5jbGljayhmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdG9nZ2xlSW1hZ2VDcmVkaXQoJCh0aGlzKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHNjcENyZWRpdHNUaXRsZS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoXCJjcmVkaXRzLXRpdGxlLS1hY3RpdmVcIikubmV4dChcIi5jcmVkaXRzLWl0ZW1zXCIpLnRvZ2dsZUNsYXNzKFwic3Itb25seVwiKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxufSgpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvanMvbWFpbi9mdW5jcy9pbWFnZS1jcmVkaXRhdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==